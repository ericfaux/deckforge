const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/modals-DAarLg_c.js","assets/vendor-ui-iSB70tNs.js","assets/vendor-supabase-CoxeBSpk.js","assets/AnimationPreview-D04ybz_r.js","assets/vendor-react-CRKsR9Cr.js","assets/TemplateGalleryModal-BreCvN4p.js"])))=>i.map(i=>d[i]);
var Qo=Object.defineProperty;var xn=e=>{throw TypeError(e)};var Jo=(e,r,s)=>r in e?Qo(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s;var tr=(e,r,s)=>Jo(e,typeof r!="symbol"?r+"":r,s),is=(e,r,s)=>r.has(e)||xn("Cannot "+s);var B=(e,r,s)=>(is(e,r,"read from private field"),s?s.call(e):r.get(e)),xe=(e,r,s)=>r.has(e)?xn("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,s),fe=(e,r,s,n)=>(is(e,r,"write to private field"),n?n.call(e,s):r.set(e,s),s),Fe=(e,r,s)=>(is(e,r,"access private method"),s);var yr=(e,r,s,n)=>({set _(i){fe(e,r,i,s)},get _(){return B(e,r,n)}});import{j as t,c as fa,a as dt,u as Re,P as Ne,B as el,b as jt,d as fr,e as ye,f as sr,R as tl,g as ha,h as nr,i as rl,k as ve,l as sl,m as nl,D as pa,n as zr,o as te,p as Se,S as vt,q as ma,r as xa,s as Vt,t as Wt,v as qt,w as os,x as al,L as ue,I as Ie,y as il,z as ol,A as ll,F as cl,C as ga,E as dl,G as ul,H as fl,J as hl,K as pl,M as ml,N as xl,W as ms,O as Sr,Q as ya,T as gn,U as gl,V as Be,X as Oe,Y as yl,Z as vl}from"./modals-DAarLg_c.js";import{a as Is,r as k,b as Pe,X as hr,am as bl,an as yn,ao as wl,ap as jl,aa as Fs,aq as va,ar as ba,af as wa,as as zs,at as ja,ae as Lr,a5 as Na,au as Er,av as Nl,aw as kl,ax as Cl,ay as _l,az as Sl,aA as El,aB as Al,V as vn,aC as Tl,aD as Pl,aE as Rl,aF as Ol,g as Ls,aG as Dl,aH as Il,aI as Fl,p as zl,D as Ll,F as Ml,B as $l,o as Bl,n as Ul,aJ as Hl,aK as Vl,z as Wl,y as Gl,x as ka,w as Ar,t as Ca,s as rr,q as it,H as Kl,Q as Yl,P as ql,O as Zl,N as Xl,K as Ql,J as Jl,I as _a,A as ec,aL as tc,aM as rc,aN as sc,aO as nc,a2 as ac,a1 as ic,a0 as oc,$ as lc,_ as cc,Y as dc,E as Tr,aP as uc,aQ as fc,aR as hc,aS as pc,u as le,a3 as ot,T as Ot,aT as mc,aU as xc,aV as gc,aW as yc,aX as xs,ad as Sa,aY as vc,j as Ea,ah as Mr,L as bc,a9 as wc,aZ as jc,a_ as Nc,a$ as kc,b0 as Cc,b1 as _c,b2 as Sc,b3 as Ec,b4 as Ac,m as Tc,G as Pc,i as Rc,b5 as Aa,U as Ta,c as Pa,b6 as Oc,a6 as Ms,a7 as Ra,b7 as bn,ab as Dc,b8 as Ic,b9 as wn,ba as Fc,bb as vr,bc as zc,bd as Lc,be as Mc,bf as $c,bg as jn,bh as Nn,bi as Bc,bj as Uc,bk as Hc,bl as Vc,bm as Wc,C as kn,bn as Gc,bo as Kc}from"./vendor-ui-iSB70tNs.js";import{u as Zt,a as Yc,b as qc,B as Zc,R as Xc,c as kt}from"./vendor-react-CRKsR9Cr.js";import"./vendor-supabase-CoxeBSpk.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var Oa,Cn=Is;Oa=Cn.createRoot,Cn.hydrateRoot;function _n(e){const r=Qc(e),s=k.forwardRef((n,i)=>{const{children:a,...l}=n,o=k.Children.toArray(a),c=o.find(ed);if(c){const m=c.props.children,h=o.map(p=>p===c?k.Children.count(m)>1?k.Children.only(null):k.isValidElement(m)?m.props.children:null:p);return t.jsx(r,{...l,ref:i,children:k.isValidElement(m)?k.cloneElement(m,void 0,h):null})}return t.jsx(r,{...l,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}function Qc(e){const r=k.forwardRef((s,n)=>{const{children:i,...a}=s;if(k.isValidElement(i)){const l=rd(i),o=td(a,i.props);return i.type!==k.Fragment&&(o.ref=n?fa(n,l):l),k.cloneElement(i,o)}return k.Children.count(i)>1?k.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var Jc=Symbol("radix.slottable");function ed(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Jc}function td(e,r){const s={...r};for(const n in r){const i=e[n],a=r[n];/^on[A-Z]/.test(n)?i&&a?s[n]=(...o)=>{const c=a(...o);return i(...o),c}:i&&(s[n]=i):n==="style"?s[n]={...i,...a}:n==="className"&&(s[n]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function rd(e){var n,i;let r=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function $s(e){const r=e+"CollectionProvider",[s,n]=dt(r),[i,a]=s(r,{collectionRef:{current:null},itemMap:new Map}),l=d=>{const{scope:x,children:g}=d,u=Pe.useRef(null),j=Pe.useRef(new Map).current;return t.jsx(i,{scope:x,itemMap:j,collectionRef:u,children:g})};l.displayName=r;const o=e+"CollectionSlot",c=_n(o),m=Pe.forwardRef((d,x)=>{const{scope:g,children:u}=d,j=a(o,g),N=Re(x,j.collectionRef);return t.jsx(c,{ref:N,children:u})});m.displayName=o;const h=e+"CollectionItemSlot",p="data-radix-collection-item",b=_n(h),f=Pe.forwardRef((d,x)=>{const{scope:g,children:u,...j}=d,N=Pe.useRef(null),S=Re(x,N),A=a(h,g);return Pe.useEffect(()=>(A.itemMap.set(N,{ref:N,...j}),()=>void A.itemMap.delete(N))),t.jsx(b,{[p]:"",ref:S,children:u})});f.displayName=h;function w(d){const x=a(e+"CollectionConsumer",d);return Pe.useCallback(()=>{const u=x.collectionRef.current;if(!u)return[];const j=Array.from(u.querySelectorAll(`[${p}]`));return Array.from(x.itemMap.values()).sort((A,T)=>j.indexOf(A.ref.current)-j.indexOf(T.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:l,Slot:m,ItemSlot:f},w,n]}var sd=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),nd="VisuallyHidden",$r=k.forwardRef((e,r)=>t.jsx(Ne.span,{...e,ref:r,style:{...sd,...e.style}}));$r.displayName=nd;var ad=$r,Bs="ToastProvider",[Us,id,od]=$s("Toast"),[Da]=dt("Toast",[od]),[ld,Br]=Da(Bs),Ia=e=>{const{__scopeToast:r,label:s="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:l}=e,[o,c]=k.useState(null),[m,h]=k.useState(0),p=k.useRef(!1),b=k.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${Bs}\`. Expected non-empty \`string\`.`),t.jsx(Us.Provider,{scope:r,children:t.jsx(ld,{scope:r,label:s,duration:n,swipeDirection:i,swipeThreshold:a,toastCount:m,viewport:o,onViewportChange:c,onToastAdd:k.useCallback(()=>h(f=>f+1),[]),onToastRemove:k.useCallback(()=>h(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:b,children:l})})};Ia.displayName=Bs;var Fa="ToastViewport",cd=["F8"],gs="toast.viewportPause",ys="toast.viewportResume",za=k.forwardRef((e,r)=>{const{__scopeToast:s,hotkey:n=cd,label:i="Notifications ({hotkey})",...a}=e,l=Br(Fa,s),o=id(s),c=k.useRef(null),m=k.useRef(null),h=k.useRef(null),p=k.useRef(null),b=Re(r,p,l.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=l.toastCount>0;k.useEffect(()=>{const x=g=>{var j;n.length!==0&&n.every(N=>g[N]||g.code===N)&&((j=p.current)==null||j.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),k.useEffect(()=>{const x=c.current,g=p.current;if(w&&x&&g){const u=()=>{if(!l.isClosePausedRef.current){const A=new CustomEvent(gs);g.dispatchEvent(A),l.isClosePausedRef.current=!0}},j=()=>{if(l.isClosePausedRef.current){const A=new CustomEvent(ys);g.dispatchEvent(A),l.isClosePausedRef.current=!1}},N=A=>{!x.contains(A.relatedTarget)&&j()},S=()=>{x.contains(document.activeElement)||j()};return x.addEventListener("focusin",u),x.addEventListener("focusout",N),x.addEventListener("pointermove",u),x.addEventListener("pointerleave",S),window.addEventListener("blur",u),window.addEventListener("focus",j),()=>{x.removeEventListener("focusin",u),x.removeEventListener("focusout",N),x.removeEventListener("pointermove",u),x.removeEventListener("pointerleave",S),window.removeEventListener("blur",u),window.removeEventListener("focus",j)}}},[w,l.isClosePausedRef]);const d=k.useCallback(({tabbingDirection:x})=>{const u=o().map(j=>{const N=j.ref.current,S=[N,...jd(N)];return x==="forwards"?S:S.reverse()});return(x==="forwards"?u.reverse():u).flat()},[o]);return k.useEffect(()=>{const x=p.current;if(x){const g=u=>{var S,A,T;const j=u.altKey||u.ctrlKey||u.metaKey;if(u.key==="Tab"&&!j){const L=document.activeElement,O=u.shiftKey;if(u.target===x&&O){(S=m.current)==null||S.focus();return}const C=d({tabbingDirection:O?"backwards":"forwards"}),R=C.findIndex(y=>y===L);ls(C.slice(R+1))?u.preventDefault():O?(A=m.current)==null||A.focus():(T=h.current)==null||T.focus()}};return x.addEventListener("keydown",g),()=>x.removeEventListener("keydown",g)}},[o,d]),t.jsxs(el,{ref:c,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&t.jsx(vs,{ref:m,onFocusFromOutsideViewport:()=>{const x=d({tabbingDirection:"forwards"});ls(x)}}),t.jsx(Us.Slot,{scope:s,children:t.jsx(Ne.ol,{tabIndex:-1,...a,ref:b})}),w&&t.jsx(vs,{ref:h,onFocusFromOutsideViewport:()=>{const x=d({tabbingDirection:"backwards"});ls(x)}})]})});za.displayName=Fa;var La="ToastFocusProxy",vs=k.forwardRef((e,r)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...i}=e,a=Br(La,s);return t.jsx($r,{tabIndex:0,...i,ref:r,style:{position:"fixed"},onFocus:l=>{var m;const o=l.relatedTarget;!((m=a.viewport)!=null&&m.contains(o))&&n()}})});vs.displayName=La;var pr="Toast",dd="toast.swipeStart",ud="toast.swipeMove",fd="toast.swipeCancel",hd="toast.swipeEnd",Ma=k.forwardRef((e,r)=>{const{forceMount:s,open:n,defaultOpen:i,onOpenChange:a,...l}=e,[o,c]=jt({prop:n,defaultProp:i??!0,onChange:a,caller:pr});return t.jsx(fr,{present:s||o,children:t.jsx(xd,{open:o,...l,ref:r,onClose:()=>c(!1),onPause:sr(e.onPause),onResume:sr(e.onResume),onSwipeStart:ye(e.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ye(e.onSwipeMove,m=>{const{x:h,y:p}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:ye(e.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ye(e.onSwipeEnd,m=>{const{x:h,y:p}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),c(!1)})})})});Ma.displayName=pr;var[pd,md]=Da(pr,{onClose(){}}),xd=k.forwardRef((e,r)=>{const{__scopeToast:s,type:n="foreground",duration:i,open:a,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:m,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:b,onSwipeEnd:f,...w}=e,d=Br(pr,s),[x,g]=k.useState(null),u=Re(r,y=>g(y)),j=k.useRef(null),N=k.useRef(null),S=i||d.duration,A=k.useRef(0),T=k.useRef(S),L=k.useRef(0),{onToastAdd:O,onToastRemove:U}=d,Y=sr(()=>{var D;(x==null?void 0:x.contains(document.activeElement))&&((D=d.viewport)==null||D.focus()),l()}),C=k.useCallback(y=>{!y||y===1/0||(window.clearTimeout(L.current),A.current=new Date().getTime(),L.current=window.setTimeout(Y,y))},[Y]);k.useEffect(()=>{const y=d.viewport;if(y){const D=()=>{C(T.current),m==null||m()},Q=()=>{const M=new Date().getTime()-A.current;T.current=T.current-M,window.clearTimeout(L.current),c==null||c()};return y.addEventListener(gs,Q),y.addEventListener(ys,D),()=>{y.removeEventListener(gs,Q),y.removeEventListener(ys,D)}}},[d.viewport,S,c,m,C]),k.useEffect(()=>{a&&!d.isClosePausedRef.current&&C(S)},[a,S,d.isClosePausedRef,C]),k.useEffect(()=>(O(),()=>U()),[O,U]);const R=k.useMemo(()=>x?Ga(x):null,[x]);return d.viewport?t.jsxs(t.Fragment,{children:[R&&t.jsx(gd,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:R}),t.jsx(pd,{scope:s,onClose:Y,children:Is.createPortal(t.jsx(Us.ItemSlot,{scope:s,children:t.jsx(tl,{asChild:!0,onEscapeKeyDown:ye(o,()=>{d.isFocusedToastEscapeKeyDownRef.current||Y(),d.isFocusedToastEscapeKeyDownRef.current=!1}),children:t.jsx(Ne.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":d.swipeDirection,...w,ref:u,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ye(e.onKeyDown,y=>{y.key==="Escape"&&(o==null||o(y.nativeEvent),y.nativeEvent.defaultPrevented||(d.isFocusedToastEscapeKeyDownRef.current=!0,Y()))}),onPointerDown:ye(e.onPointerDown,y=>{y.button===0&&(j.current={x:y.clientX,y:y.clientY})}),onPointerMove:ye(e.onPointerMove,y=>{if(!j.current)return;const D=y.clientX-j.current.x,Q=y.clientY-j.current.y,M=!!N.current,Z=["left","right"].includes(d.swipeDirection),H=["left","up"].includes(d.swipeDirection)?Math.min:Math.max,ne=Z?H(0,D):0,z=Z?0:H(0,Q),F=y.pointerType==="touch"?10:2,ie={x:ne,y:z},re={originalEvent:y,delta:ie};M?(N.current=ie,br(ud,p,re,{discrete:!1})):Sn(ie,d.swipeDirection,F)?(N.current=ie,br(dd,h,re,{discrete:!1}),y.target.setPointerCapture(y.pointerId)):(Math.abs(D)>F||Math.abs(Q)>F)&&(j.current=null)}),onPointerUp:ye(e.onPointerUp,y=>{const D=N.current,Q=y.target;if(Q.hasPointerCapture(y.pointerId)&&Q.releasePointerCapture(y.pointerId),N.current=null,j.current=null,D){const M=y.currentTarget,Z={originalEvent:y,delta:D};Sn(D,d.swipeDirection,d.swipeThreshold)?br(hd,f,Z,{discrete:!0}):br(fd,b,Z,{discrete:!0}),M.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),d.viewport)})]}):null}),gd=e=>{const{__scopeToast:r,children:s,...n}=e,i=Br(pr,r),[a,l]=k.useState(!1),[o,c]=k.useState(!1);return bd(()=>l(!0)),k.useEffect(()=>{const m=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(m)},[]),o?null:t.jsx(ha,{asChild:!0,children:t.jsx($r,{...n,children:a&&t.jsxs(t.Fragment,{children:[i.label," ",s]})})})},yd="ToastTitle",$a=k.forwardRef((e,r)=>{const{__scopeToast:s,...n}=e;return t.jsx(Ne.div,{...n,ref:r})});$a.displayName=yd;var vd="ToastDescription",Ba=k.forwardRef((e,r)=>{const{__scopeToast:s,...n}=e;return t.jsx(Ne.div,{...n,ref:r})});Ba.displayName=vd;var Ua="ToastAction",Ha=k.forwardRef((e,r)=>{const{altText:s,...n}=e;return s.trim()?t.jsx(Wa,{altText:s,asChild:!0,children:t.jsx(Hs,{...n,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ua}\`. Expected non-empty \`string\`.`),null)});Ha.displayName=Ua;var Va="ToastClose",Hs=k.forwardRef((e,r)=>{const{__scopeToast:s,...n}=e,i=md(Va,s);return t.jsx(Wa,{asChild:!0,children:t.jsx(Ne.button,{type:"button",...n,ref:r,onClick:ye(e.onClick,i.onClose)})})});Hs.displayName=Va;var Wa=k.forwardRef((e,r)=>{const{__scopeToast:s,altText:n,...i}=e;return t.jsx(Ne.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:r})});function Ga(e){const r=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&r.push(n.textContent),wd(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const l=n.dataset.radixToastAnnounceAlt;l&&r.push(l)}else r.push(...Ga(n))}}),r}function br(e,r,s,{discrete:n}){const i=s.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});r&&i.addEventListener(e,r,{once:!0}),n?rl(i,a):i.dispatchEvent(a)}var Sn=(e,r,s=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),a=n>i;return r==="left"||r==="right"?a&&n>s:!a&&i>s};function bd(e=()=>{}){const r=sr(e);nr(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(r)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[r])}function wd(e){return e.nodeType===e.ELEMENT_NODE}function jd(e){const r=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function ls(e){const r=document.activeElement;return e.some(s=>s===r?!0:(s.focus(),document.activeElement!==r))}var Nd=Ia,Ka=za,Ya=Ma,qa=$a,Za=Ba,Xa=Ha,Qa=Hs;const kd=Nd,Ja=k.forwardRef(({className:e,...r},s)=>t.jsx(Ka,{ref:s,className:ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...r}));Ja.displayName=Ka.displayName;const Cd=sl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ei=k.forwardRef(({className:e,variant:r,...s},n)=>t.jsx(Ya,{ref:n,className:ve(Cd({variant:r}),e),...s}));ei.displayName=Ya.displayName;const _d=k.forwardRef(({className:e,...r},s)=>t.jsx(Xa,{ref:s,className:ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...r}));_d.displayName=Xa.displayName;const ti=k.forwardRef(({className:e,...r},s)=>t.jsx(Qa,{ref:s,className:ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...r,children:t.jsx(hr,{className:"h-4 w-4"})}));ti.displayName=Qa.displayName;const ri=k.forwardRef(({className:e,...r},s)=>t.jsx(qa,{ref:s,className:ve("text-sm font-semibold",e),...r}));ri.displayName=qa.displayName;const si=k.forwardRef(({className:e,...r},s)=>t.jsx(Za,{ref:s,className:ve("text-sm opacity-90",e),...r}));si.displayName=Za.displayName;function Sd(){const{toasts:e}=nl();return t.jsxs(kd,{children:[e.map(function({id:r,title:s,description:n,action:i,...a}){return t.jsxs(ei,{...a,children:[t.jsxs("div",{className:"grid gap-1",children:[s&&t.jsx(ri,{children:s}),n&&t.jsx(si,{children:n})]}),i,t.jsx(ti,{})]},r)}),t.jsx(Ja,{})]})}var En=["light","dark"],Ed="(prefers-color-scheme: dark)",Ad=k.createContext(void 0),Td={setTheme:e=>{},themes:[]},Pd=()=>{var e;return(e=k.useContext(Ad))!=null?e:Td};k.memo(({forcedTheme:e,storageKey:r,attribute:s,enableSystem:n,enableColorScheme:i,defaultTheme:a,value:l,attrs:o,nonce:c})=>{let m=a==="system",h=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,p=i?En.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",b=(w,d=!1,x=!0)=>{let g=l?l[w]:w,u=d?w+"|| ''":`'${g}'`,j="";return i&&x&&!d&&En.includes(w)&&(j+=`d.style.colorScheme = '${w}';`),s==="class"?d||g?j+=`c.add(${u})`:j+="null":g&&(j+=`d[s](n,${u})`),j},f=e?`!function(){${h}${b(e)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${r}');if('system'===e||(!e&&${m})){var t='${Ed}',m=window.matchMedia(t);if(m.media!==t||m.matches){${b("dark")}}else{${b("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${b(l?"x[e]":"e",!0)}}${m?"":"else{"+b(a,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${r}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${b(l?"x[e]":"e",!0)}}else{${b(a,!1,!1)};}${p}}catch(t){}}();`;return k.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});const Rd=({...e})=>{const{theme:r="system"}=Pd();return t.jsx(bl,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},Od=["top","right","bottom","left"],bt=Math.min,Ue=Math.max,Pr=Math.round,wr=Math.floor,tt=e=>({x:e,y:e}),Dd={left:"right",right:"left",bottom:"top",top:"bottom"},Id={start:"end",end:"start"};function bs(e,r,s){return Ue(e,bt(r,s))}function lt(e,r){return typeof e=="function"?e(r):e}function ct(e){return e.split("-")[0]}function Xt(e){return e.split("-")[1]}function Vs(e){return e==="x"?"y":"x"}function Ws(e){return e==="y"?"height":"width"}const Fd=new Set(["top","bottom"]);function et(e){return Fd.has(ct(e))?"y":"x"}function Gs(e){return Vs(et(e))}function zd(e,r,s){s===void 0&&(s=!1);const n=Xt(e),i=Gs(e),a=Ws(i);let l=i==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return r.reference[a]>r.floating[a]&&(l=Rr(l)),[l,Rr(l)]}function Ld(e){const r=Rr(e);return[ws(e),r,ws(r)]}function ws(e){return e.replace(/start|end/g,r=>Id[r])}const An=["left","right"],Tn=["right","left"],Md=["top","bottom"],$d=["bottom","top"];function Bd(e,r,s){switch(e){case"top":case"bottom":return s?r?Tn:An:r?An:Tn;case"left":case"right":return r?Md:$d;default:return[]}}function Ud(e,r,s,n){const i=Xt(e);let a=Bd(ct(e),s==="start",n);return i&&(a=a.map(l=>l+"-"+i),r&&(a=a.concat(a.map(ws)))),a}function Rr(e){return e.replace(/left|right|bottom|top/g,r=>Dd[r])}function Hd(e){return{top:0,right:0,bottom:0,left:0,...e}}function ni(e){return typeof e!="number"?Hd(e):{top:e,right:e,bottom:e,left:e}}function Or(e){const{x:r,y:s,width:n,height:i}=e;return{width:n,height:i,top:s,left:r,right:r+n,bottom:s+i,x:r,y:s}}function Pn(e,r,s){let{reference:n,floating:i}=e;const a=et(r),l=Gs(r),o=Ws(l),c=ct(r),m=a==="y",h=n.x+n.width/2-i.width/2,p=n.y+n.height/2-i.height/2,b=n[o]/2-i[o]/2;let f;switch(c){case"top":f={x:h,y:n.y-i.height};break;case"bottom":f={x:h,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:p};break;case"left":f={x:n.x-i.width,y:p};break;default:f={x:n.x,y:n.y}}switch(Xt(r)){case"start":f[l]-=b*(s&&m?-1:1);break;case"end":f[l]+=b*(s&&m?-1:1);break}return f}async function Vd(e,r){var s;r===void 0&&(r={});const{x:n,y:i,platform:a,rects:l,elements:o,strategy:c}=e,{boundary:m="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:b=!1,padding:f=0}=lt(r,e),w=ni(f),x=o[b?p==="floating"?"reference":"floating":p],g=Or(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(x)))==null||s?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:m,rootBoundary:h,strategy:c})),u=p==="floating"?{x:n,y:i,width:l.floating.width,height:l.floating.height}:l.reference,j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),N=await(a.isElement==null?void 0:a.isElement(j))?await(a.getScale==null?void 0:a.getScale(j))||{x:1,y:1}:{x:1,y:1},S=Or(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:u,offsetParent:j,strategy:c}):u);return{top:(g.top-S.top+w.top)/N.y,bottom:(S.bottom-g.bottom+w.bottom)/N.y,left:(g.left-S.left+w.left)/N.x,right:(S.right-g.right+w.right)/N.x}}const Wd=async(e,r,s)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:l}=s,o=a.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(r));let m=await l.getElementRects({reference:e,floating:r,strategy:i}),{x:h,y:p}=Pn(m,n,c),b=n,f={},w=0;for(let x=0;x<o.length;x++){var d;const{name:g,fn:u}=o[x],{x:j,y:N,data:S,reset:A}=await u({x:h,y:p,initialPlacement:n,placement:b,strategy:i,middlewareData:f,rects:m,platform:{...l,detectOverflow:(d=l.detectOverflow)!=null?d:Vd},elements:{reference:e,floating:r}});h=j??h,p=N??p,f={...f,[g]:{...f[g],...S}},A&&w<=50&&(w++,typeof A=="object"&&(A.placement&&(b=A.placement),A.rects&&(m=A.rects===!0?await l.getElementRects({reference:e,floating:r,strategy:i}):A.rects),{x:h,y:p}=Pn(m,b,c)),x=-1)}return{x:h,y:p,placement:b,strategy:i,middlewareData:f}},Gd=e=>({name:"arrow",options:e,async fn(r){const{x:s,y:n,placement:i,rects:a,platform:l,elements:o,middlewareData:c}=r,{element:m,padding:h=0}=lt(e,r)||{};if(m==null)return{};const p=ni(h),b={x:s,y:n},f=Gs(i),w=Ws(f),d=await l.getDimensions(m),x=f==="y",g=x?"top":"left",u=x?"bottom":"right",j=x?"clientHeight":"clientWidth",N=a.reference[w]+a.reference[f]-b[f]-a.floating[w],S=b[f]-a.reference[f],A=await(l.getOffsetParent==null?void 0:l.getOffsetParent(m));let T=A?A[j]:0;(!T||!await(l.isElement==null?void 0:l.isElement(A)))&&(T=o.floating[j]||a.floating[w]);const L=N/2-S/2,O=T/2-d[w]/2-1,U=bt(p[g],O),Y=bt(p[u],O),C=U,R=T-d[w]-Y,y=T/2-d[w]/2+L,D=bs(C,y,R),Q=!c.arrow&&Xt(i)!=null&&y!==D&&a.reference[w]/2-(y<C?U:Y)-d[w]/2<0,M=Q?y<C?y-C:y-R:0;return{[f]:b[f]+M,data:{[f]:D,centerOffset:y-D-M,...Q&&{alignmentOffset:M}},reset:Q}}}),Kd=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(r){var s,n;const{placement:i,middlewareData:a,rects:l,initialPlacement:o,platform:c,elements:m}=r,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:b,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:d=!0,...x}=lt(e,r);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const g=ct(i),u=et(o),j=ct(o)===o,N=await(c.isRTL==null?void 0:c.isRTL(m.floating)),S=b||(j||!d?[Rr(o)]:Ld(o)),A=w!=="none";!b&&A&&S.push(...Ud(o,d,w,N));const T=[o,...S],L=await c.detectOverflow(r,x),O=[];let U=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&O.push(L[g]),p){const y=zd(i,l,N);O.push(L[y[0]],L[y[1]])}if(U=[...U,{placement:i,overflows:O}],!O.every(y=>y<=0)){var Y,C;const y=(((Y=a.flip)==null?void 0:Y.index)||0)+1,D=T[y];if(D&&(!(p==="alignment"?u!==et(D):!1)||U.every(Z=>et(Z.placement)===u?Z.overflows[0]>0:!0)))return{data:{index:y,overflows:U},reset:{placement:D}};let Q=(C=U.filter(M=>M.overflows[0]<=0).sort((M,Z)=>M.overflows[1]-Z.overflows[1])[0])==null?void 0:C.placement;if(!Q)switch(f){case"bestFit":{var R;const M=(R=U.filter(Z=>{if(A){const H=et(Z.placement);return H===u||H==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(H=>H>0).reduce((H,ne)=>H+ne,0)]).sort((Z,H)=>Z[1]-H[1])[0])==null?void 0:R[0];M&&(Q=M);break}case"initialPlacement":Q=o;break}if(i!==Q)return{reset:{placement:Q}}}return{}}}};function Rn(e,r){return{top:e.top-r.height,right:e.right-r.width,bottom:e.bottom-r.height,left:e.left-r.width}}function On(e){return Od.some(r=>e[r]>=0)}const Yd=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(r){const{rects:s,platform:n}=r,{strategy:i="referenceHidden",...a}=lt(e,r);switch(i){case"referenceHidden":{const l=await n.detectOverflow(r,{...a,elementContext:"reference"}),o=Rn(l,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:On(o)}}}case"escaped":{const l=await n.detectOverflow(r,{...a,altBoundary:!0}),o=Rn(l,s.floating);return{data:{escapedOffsets:o,escaped:On(o)}}}default:return{}}}}},ai=new Set(["left","top"]);async function qd(e,r){const{placement:s,platform:n,elements:i}=e,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),l=ct(s),o=Xt(s),c=et(s)==="y",m=ai.has(l)?-1:1,h=a&&c?-1:1,p=lt(r,e);let{mainAxis:b,crossAxis:f,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return o&&typeof w=="number"&&(f=o==="end"?w*-1:w),c?{x:f*h,y:b*m}:{x:b*m,y:f*h}}const Zd=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(r){var s,n;const{x:i,y:a,placement:l,middlewareData:o}=r,c=await qd(r,e);return l===((s=o.offset)==null?void 0:s.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:l}}}}},Xd=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(r){const{x:s,y:n,placement:i,platform:a}=r,{mainAxis:l=!0,crossAxis:o=!1,limiter:c={fn:g=>{let{x:u,y:j}=g;return{x:u,y:j}}},...m}=lt(e,r),h={x:s,y:n},p=await a.detectOverflow(r,m),b=et(ct(i)),f=Vs(b);let w=h[f],d=h[b];if(l){const g=f==="y"?"top":"left",u=f==="y"?"bottom":"right",j=w+p[g],N=w-p[u];w=bs(j,w,N)}if(o){const g=b==="y"?"top":"left",u=b==="y"?"bottom":"right",j=d+p[g],N=d-p[u];d=bs(j,d,N)}const x=c.fn({...r,[f]:w,[b]:d});return{...x,data:{x:x.x-s,y:x.y-n,enabled:{[f]:l,[b]:o}}}}}},Qd=function(e){return e===void 0&&(e={}),{options:e,fn(r){const{x:s,y:n,placement:i,rects:a,middlewareData:l}=r,{offset:o=0,mainAxis:c=!0,crossAxis:m=!0}=lt(e,r),h={x:s,y:n},p=et(i),b=Vs(p);let f=h[b],w=h[p];const d=lt(o,r),x=typeof d=="number"?{mainAxis:d,crossAxis:0}:{mainAxis:0,crossAxis:0,...d};if(c){const j=b==="y"?"height":"width",N=a.reference[b]-a.floating[j]+x.mainAxis,S=a.reference[b]+a.reference[j]-x.mainAxis;f<N?f=N:f>S&&(f=S)}if(m){var g,u;const j=b==="y"?"width":"height",N=ai.has(ct(i)),S=a.reference[p]-a.floating[j]+(N&&((g=l.offset)==null?void 0:g[p])||0)+(N?0:x.crossAxis),A=a.reference[p]+a.reference[j]+(N?0:((u=l.offset)==null?void 0:u[p])||0)-(N?x.crossAxis:0);w<S?w=S:w>A&&(w=A)}return{[b]:f,[p]:w}}}},Jd=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(r){var s,n;const{placement:i,rects:a,platform:l,elements:o}=r,{apply:c=()=>{},...m}=lt(e,r),h=await l.detectOverflow(r,m),p=ct(i),b=Xt(i),f=et(i)==="y",{width:w,height:d}=a.floating;let x,g;p==="top"||p==="bottom"?(x=p,g=b===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(g=p,x=b==="end"?"top":"bottom");const u=d-h.top-h.bottom,j=w-h.left-h.right,N=bt(d-h[x],u),S=bt(w-h[g],j),A=!r.middlewareData.shift;let T=N,L=S;if((s=r.middlewareData.shift)!=null&&s.enabled.x&&(L=j),(n=r.middlewareData.shift)!=null&&n.enabled.y&&(T=u),A&&!b){const U=Ue(h.left,0),Y=Ue(h.right,0),C=Ue(h.top,0),R=Ue(h.bottom,0);f?L=w-2*(U!==0||Y!==0?U+Y:Ue(h.left,h.right)):T=d-2*(C!==0||R!==0?C+R:Ue(h.top,h.bottom))}await c({...r,availableWidth:L,availableHeight:T});const O=await l.getDimensions(o.floating);return w!==O.width||d!==O.height?{reset:{rects:!0}}:{}}}};function Ur(){return typeof window<"u"}function Qt(e){return ii(e)?(e.nodeName||"").toLowerCase():"#document"}function He(e){var r;return(e==null||(r=e.ownerDocument)==null?void 0:r.defaultView)||window}function st(e){var r;return(r=(ii(e)?e.ownerDocument:e.document)||window.document)==null?void 0:r.documentElement}function ii(e){return Ur()?e instanceof Node||e instanceof He(e).Node:!1}function Ye(e){return Ur()?e instanceof Element||e instanceof He(e).Element:!1}function rt(e){return Ur()?e instanceof HTMLElement||e instanceof He(e).HTMLElement:!1}function Dn(e){return!Ur()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof He(e).ShadowRoot}const eu=new Set(["inline","contents"]);function mr(e){const{overflow:r,overflowX:s,overflowY:n,display:i}=qe(e);return/auto|scroll|overlay|hidden|clip/.test(r+n+s)&&!eu.has(i)}const tu=new Set(["table","td","th"]);function ru(e){return tu.has(Qt(e))}const su=[":popover-open",":modal"];function Hr(e){return su.some(r=>{try{return e.matches(r)}catch{return!1}})}const nu=["transform","translate","scale","rotate","perspective"],au=["transform","translate","scale","rotate","perspective","filter"],iu=["paint","layout","strict","content"];function Ks(e){const r=Ys(),s=Ye(e)?qe(e):e;return nu.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!r&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!r&&(s.filter?s.filter!=="none":!1)||au.some(n=>(s.willChange||"").includes(n))||iu.some(n=>(s.contain||"").includes(n))}function ou(e){let r=wt(e);for(;rt(r)&&!Gt(r);){if(Ks(r))return r;if(Hr(r))return null;r=wt(r)}return null}function Ys(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lu=new Set(["html","body","#document"]);function Gt(e){return lu.has(Qt(e))}function qe(e){return He(e).getComputedStyle(e)}function Vr(e){return Ye(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function wt(e){if(Qt(e)==="html")return e;const r=e.assignedSlot||e.parentNode||Dn(e)&&e.host||st(e);return Dn(r)?r.host:r}function oi(e){const r=wt(e);return Gt(r)?e.ownerDocument?e.ownerDocument.body:e.body:rt(r)&&mr(r)?r:oi(r)}function ar(e,r,s){var n;r===void 0&&(r=[]),s===void 0&&(s=!0);const i=oi(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),l=He(i);if(a){const o=js(l);return r.concat(l,l.visualViewport||[],mr(i)?i:[],o&&s?ar(o):[])}return r.concat(i,ar(i,[],s))}function js(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function li(e){const r=qe(e);let s=parseFloat(r.width)||0,n=parseFloat(r.height)||0;const i=rt(e),a=i?e.offsetWidth:s,l=i?e.offsetHeight:n,o=Pr(s)!==a||Pr(n)!==l;return o&&(s=a,n=l),{width:s,height:n,$:o}}function qs(e){return Ye(e)?e:e.contextElement}function It(e){const r=qs(e);if(!rt(r))return tt(1);const s=r.getBoundingClientRect(),{width:n,height:i,$:a}=li(r);let l=(a?Pr(s.width):s.width)/n,o=(a?Pr(s.height):s.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const cu=tt(0);function ci(e){const r=He(e);return!Ys()||!r.visualViewport?cu:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function du(e,r,s){return r===void 0&&(r=!1),!s||r&&s!==He(e)?!1:r}function Rt(e,r,s,n){r===void 0&&(r=!1),s===void 0&&(s=!1);const i=e.getBoundingClientRect(),a=qs(e);let l=tt(1);r&&(n?Ye(n)&&(l=It(n)):l=It(e));const o=du(a,s,n)?ci(a):tt(0);let c=(i.left+o.x)/l.x,m=(i.top+o.y)/l.y,h=i.width/l.x,p=i.height/l.y;if(a){const b=He(a),f=n&&Ye(n)?He(n):n;let w=b,d=js(w);for(;d&&n&&f!==w;){const x=It(d),g=d.getBoundingClientRect(),u=qe(d),j=g.left+(d.clientLeft+parseFloat(u.paddingLeft))*x.x,N=g.top+(d.clientTop+parseFloat(u.paddingTop))*x.y;c*=x.x,m*=x.y,h*=x.x,p*=x.y,c+=j,m+=N,w=He(d),d=js(w)}}return Or({width:h,height:p,x:c,y:m})}function Wr(e,r){const s=Vr(e).scrollLeft;return r?r.left+s:Rt(st(e)).left+s}function di(e,r){const s=e.getBoundingClientRect(),n=s.left+r.scrollLeft-Wr(e,s),i=s.top+r.scrollTop;return{x:n,y:i}}function uu(e){let{elements:r,rect:s,offsetParent:n,strategy:i}=e;const a=i==="fixed",l=st(n),o=r?Hr(r.floating):!1;if(n===l||o&&a)return s;let c={scrollLeft:0,scrollTop:0},m=tt(1);const h=tt(0),p=rt(n);if((p||!p&&!a)&&((Qt(n)!=="body"||mr(l))&&(c=Vr(n)),rt(n))){const f=Rt(n);m=It(n),h.x=f.x+n.clientLeft,h.y=f.y+n.clientTop}const b=l&&!p&&!a?di(l,c):tt(0);return{width:s.width*m.x,height:s.height*m.y,x:s.x*m.x-c.scrollLeft*m.x+h.x+b.x,y:s.y*m.y-c.scrollTop*m.y+h.y+b.y}}function fu(e){return Array.from(e.getClientRects())}function hu(e){const r=st(e),s=Vr(e),n=e.ownerDocument.body,i=Ue(r.scrollWidth,r.clientWidth,n.scrollWidth,n.clientWidth),a=Ue(r.scrollHeight,r.clientHeight,n.scrollHeight,n.clientHeight);let l=-s.scrollLeft+Wr(e);const o=-s.scrollTop;return qe(n).direction==="rtl"&&(l+=Ue(r.clientWidth,n.clientWidth)-i),{width:i,height:a,x:l,y:o}}const In=25;function pu(e,r){const s=He(e),n=st(e),i=s.visualViewport;let a=n.clientWidth,l=n.clientHeight,o=0,c=0;if(i){a=i.width,l=i.height;const h=Ys();(!h||h&&r==="fixed")&&(o=i.offsetLeft,c=i.offsetTop)}const m=Wr(n);if(m<=0){const h=n.ownerDocument,p=h.body,b=getComputedStyle(p),f=h.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,w=Math.abs(n.clientWidth-p.clientWidth-f);w<=In&&(a-=w)}else m<=In&&(a+=m);return{width:a,height:l,x:o,y:c}}const mu=new Set(["absolute","fixed"]);function xu(e,r){const s=Rt(e,!0,r==="fixed"),n=s.top+e.clientTop,i=s.left+e.clientLeft,a=rt(e)?It(e):tt(1),l=e.clientWidth*a.x,o=e.clientHeight*a.y,c=i*a.x,m=n*a.y;return{width:l,height:o,x:c,y:m}}function Fn(e,r,s){let n;if(r==="viewport")n=pu(e,s);else if(r==="document")n=hu(st(e));else if(Ye(r))n=xu(r,s);else{const i=ci(e);n={x:r.x-i.x,y:r.y-i.y,width:r.width,height:r.height}}return Or(n)}function ui(e,r){const s=wt(e);return s===r||!Ye(s)||Gt(s)?!1:qe(s).position==="fixed"||ui(s,r)}function gu(e,r){const s=r.get(e);if(s)return s;let n=ar(e,[],!1).filter(o=>Ye(o)&&Qt(o)!=="body"),i=null;const a=qe(e).position==="fixed";let l=a?wt(e):e;for(;Ye(l)&&!Gt(l);){const o=qe(l),c=Ks(l);!c&&o.position==="fixed"&&(i=null),(a?!c&&!i:!c&&o.position==="static"&&!!i&&mu.has(i.position)||mr(l)&&!c&&ui(e,l))?n=n.filter(h=>h!==l):i=o,l=wt(l)}return r.set(e,n),n}function yu(e){let{element:r,boundary:s,rootBoundary:n,strategy:i}=e;const l=[...s==="clippingAncestors"?Hr(r)?[]:gu(r,this._c):[].concat(s),n],o=l[0],c=l.reduce((m,h)=>{const p=Fn(r,h,i);return m.top=Ue(p.top,m.top),m.right=bt(p.right,m.right),m.bottom=bt(p.bottom,m.bottom),m.left=Ue(p.left,m.left),m},Fn(r,o,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function vu(e){const{width:r,height:s}=li(e);return{width:r,height:s}}function bu(e,r,s){const n=rt(r),i=st(r),a=s==="fixed",l=Rt(e,!0,a,r);let o={scrollLeft:0,scrollTop:0};const c=tt(0);function m(){c.x=Wr(i)}if(n||!n&&!a)if((Qt(r)!=="body"||mr(i))&&(o=Vr(r)),n){const f=Rt(r,!0,a,r);c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}else i&&m();a&&!n&&i&&m();const h=i&&!n&&!a?di(i,o):tt(0),p=l.left+o.scrollLeft-c.x-h.x,b=l.top+o.scrollTop-c.y-h.y;return{x:p,y:b,width:l.width,height:l.height}}function cs(e){return qe(e).position==="static"}function zn(e,r){if(!rt(e)||qe(e).position==="fixed")return null;if(r)return r(e);let s=e.offsetParent;return st(e)===s&&(s=s.ownerDocument.body),s}function fi(e,r){const s=He(e);if(Hr(e))return s;if(!rt(e)){let i=wt(e);for(;i&&!Gt(i);){if(Ye(i)&&!cs(i))return i;i=wt(i)}return s}let n=zn(e,r);for(;n&&ru(n)&&cs(n);)n=zn(n,r);return n&&Gt(n)&&cs(n)&&!Ks(n)?s:n||ou(e)||s}const wu=async function(e){const r=this.getOffsetParent||fi,s=this.getDimensions,n=await s(e.floating);return{reference:bu(e.reference,await r(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function ju(e){return qe(e).direction==="rtl"}const Nu={convertOffsetParentRelativeRectToViewportRelativeRect:uu,getDocumentElement:st,getClippingRect:yu,getOffsetParent:fi,getElementRects:wu,getClientRects:fu,getDimensions:vu,getScale:It,isElement:Ye,isRTL:ju};function hi(e,r){return e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height}function ku(e,r){let s=null,n;const i=st(e);function a(){var o;clearTimeout(n),(o=s)==null||o.disconnect(),s=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),a();const m=e.getBoundingClientRect(),{left:h,top:p,width:b,height:f}=m;if(o||r(),!b||!f)return;const w=wr(p),d=wr(i.clientWidth-(h+b)),x=wr(i.clientHeight-(p+f)),g=wr(h),j={rootMargin:-w+"px "+-d+"px "+-x+"px "+-g+"px",threshold:Ue(0,bt(1,c))||1};let N=!0;function S(A){const T=A[0].intersectionRatio;if(T!==c){if(!N)return l();T?l(!1,T):n=setTimeout(()=>{l(!1,1e-7)},1e3)}T===1&&!hi(m,e.getBoundingClientRect())&&l(),N=!1}try{s=new IntersectionObserver(S,{...j,root:i.ownerDocument})}catch{s=new IntersectionObserver(S,j)}s.observe(e)}return l(!0),a}function Cu(e,r,s,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,m=qs(e),h=i||a?[...m?ar(m):[],...ar(r)]:[];h.forEach(g=>{i&&g.addEventListener("scroll",s,{passive:!0}),a&&g.addEventListener("resize",s)});const p=m&&o?ku(m,s):null;let b=-1,f=null;l&&(f=new ResizeObserver(g=>{let[u]=g;u&&u.target===m&&f&&(f.unobserve(r),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var j;(j=f)==null||j.observe(r)})),s()}),m&&!c&&f.observe(m),f.observe(r));let w,d=c?Rt(e):null;c&&x();function x(){const g=Rt(e);d&&!hi(d,g)&&s(),d=g,w=requestAnimationFrame(x)}return s(),()=>{var g;h.forEach(u=>{i&&u.removeEventListener("scroll",s),a&&u.removeEventListener("resize",s)}),p==null||p(),(g=f)==null||g.disconnect(),f=null,c&&cancelAnimationFrame(w)}}const _u=Zd,Su=Xd,Eu=Kd,Au=Jd,Tu=Yd,Ln=Gd,Pu=Qd,Ru=(e,r,s)=>{const n=new Map,i={platform:Nu,...s},a={...i.platform,_c:n};return Wd(e,r,{...i,platform:a})};var Ou=typeof document<"u",Du=function(){},_r=Ou?k.useLayoutEffect:Du;function Dr(e,r){if(e===r)return!0;if(typeof e!=typeof r)return!1;if(typeof e=="function"&&e.toString()===r.toString())return!0;let s,n,i;if(e&&r&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==r.length)return!1;for(n=s;n--!==0;)if(!Dr(e[n],r[n]))return!1;return!0}if(i=Object.keys(e),s=i.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(r,i[n]))return!1;for(n=s;n--!==0;){const a=i[n];if(!(a==="_owner"&&e.$$typeof)&&!Dr(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}function pi(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Mn(e,r){const s=pi(e);return Math.round(r*s)/s}function ds(e){const r=k.useRef(e);return _r(()=>{r.current=e}),r}function Iu(e){e===void 0&&(e={});const{placement:r="bottom",strategy:s="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:l}={},transform:o=!0,whileElementsMounted:c,open:m}=e,[h,p]=k.useState({x:0,y:0,strategy:s,placement:r,middlewareData:{},isPositioned:!1}),[b,f]=k.useState(n);Dr(b,n)||f(n);const[w,d]=k.useState(null),[x,g]=k.useState(null),u=k.useCallback(Z=>{Z!==A.current&&(A.current=Z,d(Z))},[]),j=k.useCallback(Z=>{Z!==T.current&&(T.current=Z,g(Z))},[]),N=a||w,S=l||x,A=k.useRef(null),T=k.useRef(null),L=k.useRef(h),O=c!=null,U=ds(c),Y=ds(i),C=ds(m),R=k.useCallback(()=>{if(!A.current||!T.current)return;const Z={placement:r,strategy:s,middleware:b};Y.current&&(Z.platform=Y.current),Ru(A.current,T.current,Z).then(H=>{const ne={...H,isPositioned:C.current!==!1};y.current&&!Dr(L.current,ne)&&(L.current=ne,Is.flushSync(()=>{p(ne)}))})},[b,r,s,Y,C]);_r(()=>{m===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,p(Z=>({...Z,isPositioned:!1})))},[m]);const y=k.useRef(!1);_r(()=>(y.current=!0,()=>{y.current=!1}),[]),_r(()=>{if(N&&(A.current=N),S&&(T.current=S),N&&S){if(U.current)return U.current(N,S,R);R()}},[N,S,R,U,O]);const D=k.useMemo(()=>({reference:A,floating:T,setReference:u,setFloating:j}),[u,j]),Q=k.useMemo(()=>({reference:N,floating:S}),[N,S]),M=k.useMemo(()=>{const Z={position:s,left:0,top:0};if(!Q.floating)return Z;const H=Mn(Q.floating,h.x),ne=Mn(Q.floating,h.y);return o?{...Z,transform:"translate("+H+"px, "+ne+"px)",...pi(Q.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:H,top:ne}},[s,o,Q.floating,h.x,h.y]);return k.useMemo(()=>({...h,update:R,refs:D,elements:Q,floatingStyles:M}),[h,R,D,Q,M])}const Fu=e=>{function r(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:n,padding:i}=typeof e=="function"?e(s):e;return n&&r(n)?n.current!=null?Ln({element:n.current,padding:i}).fn(s):{}:n?Ln({element:n,padding:i}).fn(s):{}}}},zu=(e,r)=>({..._u(e),options:[e,r]}),Lu=(e,r)=>({...Su(e),options:[e,r]}),Mu=(e,r)=>({...Pu(e),options:[e,r]}),$u=(e,r)=>({...Eu(e),options:[e,r]}),Bu=(e,r)=>({...Au(e),options:[e,r]}),Uu=(e,r)=>({...Tu(e),options:[e,r]}),Hu=(e,r)=>({...Fu(e),options:[e,r]});var Vu="Arrow",mi=k.forwardRef((e,r)=>{const{children:s,width:n=10,height:i=5,...a}=e;return t.jsx(Ne.svg,{...a,ref:r,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:t.jsx("polygon",{points:"0,0 30,0 15,10"})})});mi.displayName=Vu;var Wu=mi;function Zs(e){const[r,s]=k.useState(void 0);return nr(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,o;if("borderBoxSize"in a){const c=a.borderBoxSize,m=Array.isArray(c)?c[0]:c;l=m.inlineSize,o=m.blockSize}else l=e.offsetWidth,o=e.offsetHeight;s({width:l,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else s(void 0)},[e]),r}var Xs="Popper",[xi,Gr]=dt(Xs),[Gu,gi]=xi(Xs),yi=e=>{const{__scopePopper:r,children:s}=e,[n,i]=k.useState(null);return t.jsx(Gu,{scope:r,anchor:n,onAnchorChange:i,children:s})};yi.displayName=Xs;var vi="PopperAnchor",bi=k.forwardRef((e,r)=>{const{__scopePopper:s,virtualRef:n,...i}=e,a=gi(vi,s),l=k.useRef(null),o=Re(r,l),c=k.useRef(null);return k.useEffect(()=>{const m=c.current;c.current=(n==null?void 0:n.current)||l.current,m!==c.current&&a.onAnchorChange(c.current)}),n?null:t.jsx(Ne.div,{...i,ref:o})});bi.displayName=vi;var Qs="PopperContent",[Ku,Yu]=xi(Qs),wi=k.forwardRef((e,r)=>{var Ce,he,me,ke,we,Le;const{__scopePopper:s,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:m=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:b=!1,updatePositionStrategy:f="optimized",onPlaced:w,...d}=e,x=gi(Qs,s),[g,u]=k.useState(null),j=Re(r,Ee=>u(Ee)),[N,S]=k.useState(null),A=Zs(N),T=(A==null?void 0:A.width)??0,L=(A==null?void 0:A.height)??0,O=n+(a!=="center"?"-"+a:""),U=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},Y=Array.isArray(m)?m:[m],C=Y.length>0,R={padding:U,boundary:Y.filter(Zu),altBoundary:C},{refs:y,floatingStyles:D,placement:Q,isPositioned:M,middlewareData:Z}=Iu({strategy:"fixed",placement:O,whileElementsMounted:(...Ee)=>Cu(...Ee,{animationFrame:f==="always"}),elements:{reference:x.anchor},middleware:[zu({mainAxis:i+L,alignmentAxis:l}),c&&Lu({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?Mu():void 0,...R}),c&&$u({...R}),Bu({...R,apply:({elements:Ee,rects:v,availableWidth:V,availableHeight:$})=>{const{width:E,height:_}=v.reference,P=Ee.floating.style;P.setProperty("--radix-popper-available-width",`${V}px`),P.setProperty("--radix-popper-available-height",`${$}px`),P.setProperty("--radix-popper-anchor-width",`${E}px`),P.setProperty("--radix-popper-anchor-height",`${_}px`)}}),N&&Hu({element:N,padding:o}),Xu({arrowWidth:T,arrowHeight:L}),b&&Uu({strategy:"referenceHidden",...R})]}),[H,ne]=ki(Q),z=sr(w);nr(()=>{M&&(z==null||z())},[M,z]);const F=(Ce=Z.arrow)==null?void 0:Ce.x,ie=(he=Z.arrow)==null?void 0:he.y,re=((me=Z.arrow)==null?void 0:me.centerOffset)!==0,[ee,je]=k.useState();return nr(()=>{g&&je(window.getComputedStyle(g).zIndex)},[g]),t.jsx("div",{ref:y.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:M?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(ke=Z.transformOrigin)==null?void 0:ke.x,(we=Z.transformOrigin)==null?void 0:we.y].join(" "),...((Le=Z.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:t.jsx(Ku,{scope:s,placedSide:H,onArrowChange:S,arrowX:F,arrowY:ie,shouldHideArrow:re,children:t.jsx(Ne.div,{"data-side":H,"data-align":ne,...d,ref:j,style:{...d.style,animation:M?void 0:"none"}})})})});wi.displayName=Qs;var ji="PopperArrow",qu={top:"bottom",right:"left",bottom:"top",left:"right"},Ni=k.forwardRef(function(r,s){const{__scopePopper:n,...i}=r,a=Yu(ji,n),l=qu[a.placedSide];return t.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:t.jsx(Wu,{...i,ref:s,style:{...i.style,display:"block"}})})});Ni.displayName=ji;function Zu(e){return e!==null}var Xu=e=>({name:"transformOrigin",options:e,fn(r){var x,g,u;const{placement:s,rects:n,middlewareData:i}=r,l=((x=i.arrow)==null?void 0:x.centerOffset)!==0,o=l?0:e.arrowWidth,c=l?0:e.arrowHeight,[m,h]=ki(s),p={start:"0%",center:"50%",end:"100%"}[h],b=(((g=i.arrow)==null?void 0:g.x)??0)+o/2,f=(((u=i.arrow)==null?void 0:u.y)??0)+c/2;let w="",d="";return m==="bottom"?(w=l?p:`${b}px`,d=`${-c}px`):m==="top"?(w=l?p:`${b}px`,d=`${n.floating.height+c}px`):m==="right"?(w=`${-c}px`,d=l?p:`${f}px`):m==="left"&&(w=`${n.floating.width+c}px`,d=l?p:`${f}px`),{data:{x:w,y:d}}}});function ki(e){const[r,s="center"]=e.split("-");return[r,s]}var Ci=yi,Js=bi,_i=wi,Si=Ni,Qu=Symbol("radix.slottable");function Ju(e){const r=({children:s})=>t.jsx(t.Fragment,{children:s});return r.displayName=`${e}.Slottable`,r.__radixId=Qu,r}var[Kr]=dt("Tooltip",[Gr]),Yr=Gr(),Ei="TooltipProvider",ef=700,Ns="tooltip.open",[tf,en]=Kr(Ei),Ai=e=>{const{__scopeTooltip:r,delayDuration:s=ef,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:a}=e,l=k.useRef(!0),o=k.useRef(!1),c=k.useRef(0);return k.useEffect(()=>{const m=c.current;return()=>window.clearTimeout(m)},[]),t.jsx(tf,{scope:r,isOpenDelayedRef:l,delayDuration:s,onOpen:k.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:k.useCallback(m=>{o.current=m},[]),disableHoverableContent:i,children:a})};Ai.displayName=Ei;var ir="Tooltip",[rf,qr]=Kr(ir),Ti=e=>{const{__scopeTooltip:r,children:s,open:n,defaultOpen:i,onOpenChange:a,disableHoverableContent:l,delayDuration:o}=e,c=en(ir,e.__scopeTooltip),m=Yr(r),[h,p]=k.useState(null),b=zr(),f=k.useRef(0),w=l??c.disableHoverableContent,d=o??c.delayDuration,x=k.useRef(!1),[g,u]=jt({prop:n,defaultProp:i??!1,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent(Ns))):c.onClose(),a==null||a(T)},caller:ir}),j=k.useMemo(()=>g?x.current?"delayed-open":"instant-open":"closed",[g]),N=k.useCallback(()=>{window.clearTimeout(f.current),f.current=0,x.current=!1,u(!0)},[u]),S=k.useCallback(()=>{window.clearTimeout(f.current),f.current=0,u(!1)},[u]),A=k.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{x.current=!0,u(!0),f.current=0},d)},[d,u]);return k.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),t.jsx(Ci,{...m,children:t.jsx(rf,{scope:r,contentId:b,open:g,stateAttribute:j,trigger:h,onTriggerChange:p,onTriggerEnter:k.useCallback(()=>{c.isOpenDelayedRef.current?A():N()},[c.isOpenDelayedRef,A,N]),onTriggerLeave:k.useCallback(()=>{w?S():(window.clearTimeout(f.current),f.current=0)},[S,w]),onOpen:N,onClose:S,disableHoverableContent:w,children:s})})};Ti.displayName=ir;var ks="TooltipTrigger",Pi=k.forwardRef((e,r)=>{const{__scopeTooltip:s,...n}=e,i=qr(ks,s),a=en(ks,s),l=Yr(s),o=k.useRef(null),c=Re(r,o,i.onTriggerChange),m=k.useRef(!1),h=k.useRef(!1),p=k.useCallback(()=>m.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),t.jsx(Js,{asChild:!0,...l,children:t.jsx(Ne.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:c,onPointerMove:ye(e.onPointerMove,b=>{b.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:ye(e.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:ye(e.onPointerDown,()=>{i.open&&i.onClose(),m.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:ye(e.onFocus,()=>{m.current||i.onOpen()}),onBlur:ye(e.onBlur,i.onClose),onClick:ye(e.onClick,i.onClose)})})});Pi.displayName=ks;var sf="TooltipPortal",[km,nf]=Kr(sf,{forceMount:void 0}),Kt="TooltipContent",Ri=k.forwardRef((e,r)=>{const s=nf(Kt,e.__scopeTooltip),{forceMount:n=s.forceMount,side:i="top",...a}=e,l=qr(Kt,e.__scopeTooltip);return t.jsx(fr,{present:n||l.open,children:l.disableHoverableContent?t.jsx(Oi,{side:i,...a,ref:r}):t.jsx(af,{side:i,...a,ref:r})})}),af=k.forwardRef((e,r)=>{const s=qr(Kt,e.__scopeTooltip),n=en(Kt,e.__scopeTooltip),i=k.useRef(null),a=Re(r,i),[l,o]=k.useState(null),{trigger:c,onClose:m}=s,h=i.current,{onPointerInTransitChange:p}=n,b=k.useCallback(()=>{o(null),p(!1)},[p]),f=k.useCallback((w,d)=>{const x=w.currentTarget,g={x:w.clientX,y:w.clientY},u=uf(g,x.getBoundingClientRect()),j=ff(g,u),N=hf(d.getBoundingClientRect()),S=mf([...j,...N]);o(S),p(!0)},[p]);return k.useEffect(()=>()=>b(),[b]),k.useEffect(()=>{if(c&&h){const w=x=>f(x,h),d=x=>f(x,c);return c.addEventListener("pointerleave",w),h.addEventListener("pointerleave",d),()=>{c.removeEventListener("pointerleave",w),h.removeEventListener("pointerleave",d)}}},[c,h,f,b]),k.useEffect(()=>{if(l){const w=d=>{const x=d.target,g={x:d.clientX,y:d.clientY},u=(c==null?void 0:c.contains(x))||(h==null?void 0:h.contains(x)),j=!pf(g,l);u?b():j&&(b(),m())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,h,l,m,b]),t.jsx(Oi,{...e,ref:a})}),[of,lf]=Kr(ir,{isInside:!1}),cf=Ju("TooltipContent"),Oi=k.forwardRef((e,r)=>{const{__scopeTooltip:s,children:n,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:l,...o}=e,c=qr(Kt,s),m=Yr(s),{onClose:h}=c;return k.useEffect(()=>(document.addEventListener(Ns,h),()=>document.removeEventListener(Ns,h)),[h]),k.useEffect(()=>{if(c.trigger){const p=b=>{const f=b.target;f!=null&&f.contains(c.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,h]),t.jsx(pa,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:t.jsxs(_i,{"data-state":c.stateAttribute,...m,...o,ref:r,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[t.jsx(cf,{children:n}),t.jsx(of,{scope:s,isInside:!0,children:t.jsx(ad,{id:c.contentId,role:"tooltip",children:i||n})})]})})});Ri.displayName=Kt;var Di="TooltipArrow",df=k.forwardRef((e,r)=>{const{__scopeTooltip:s,...n}=e,i=Yr(s);return lf(Di,s).isInside?null:t.jsx(Si,{...i,...n,ref:r})});df.displayName=Di;function uf(e,r){const s=Math.abs(r.top-e.y),n=Math.abs(r.bottom-e.y),i=Math.abs(r.right-e.x),a=Math.abs(r.left-e.x);switch(Math.min(s,n,i,a)){case a:return"left";case i:return"right";case s:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function ff(e,r,s=5){const n=[];switch(r){case"top":n.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":n.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":n.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":n.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return n}function hf(e){const{top:r,right:s,bottom:n,left:i}=e;return[{x:i,y:r},{x:s,y:r},{x:s,y:n},{x:i,y:n}]}function pf(e,r){const{x:s,y:n}=e;let i=!1;for(let a=0,l=r.length-1;a<r.length;l=a++){const o=r[a],c=r[l],m=o.x,h=o.y,p=c.x,b=c.y;h>n!=b>n&&s<(p-m)*(n-h)/(b-h)+m&&(i=!i)}return i}function mf(e){const r=e.slice();return r.sort((s,n)=>s.x<n.x?-1:s.x>n.x?1:s.y<n.y?-1:s.y>n.y?1:0),xf(r)}function xf(e){if(e.length<=1)return e.slice();const r=[];for(let n=0;n<e.length;n++){const i=e[n];for(;r.length>=2;){const a=r[r.length-1],l=r[r.length-2];if((a.x-l.x)*(i.y-l.y)>=(a.y-l.y)*(i.x-l.x))r.pop();else break}r.push(i)}r.pop();const s=[];for(let n=e.length-1;n>=0;n--){const i=e[n];for(;s.length>=2;){const a=s[s.length-1],l=s[s.length-2];if((a.x-l.x)*(i.y-l.y)>=(a.y-l.y)*(i.x-l.x))s.pop();else break}s.push(i)}return s.pop(),r.length===1&&s.length===1&&r[0].x===s[0].x&&r[0].y===s[0].y?r:r.concat(s)}var gf=Ai,yf=Ti,vf=Pi,Ii=Ri;const bf=gf,tn=yf,rn=vf,Zr=k.forwardRef(({className:e,sideOffset:r=4,...s},n)=>t.jsx(Ii,{ref:n,sideOffset:r,className:ve("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));Zr.displayName=Ii.displayName;var Xr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wf={setTimeout:(e,r)=>setTimeout(e,r),clearTimeout:e=>clearTimeout(e),setInterval:(e,r)=>setInterval(e,r),clearInterval:e=>clearInterval(e)},ht,Ds,sa,jf=(sa=class{constructor(){xe(this,ht,wf);xe(this,Ds,!1)}setTimeoutProvider(e){fe(this,ht,e)}setTimeout(e,r){return B(this,ht).setTimeout(e,r)}clearTimeout(e){B(this,ht).clearTimeout(e)}setInterval(e,r){return B(this,ht).setInterval(e,r)}clearInterval(e){B(this,ht).clearInterval(e)}},ht=new WeakMap,Ds=new WeakMap,sa),Cs=new jf;function Nf(e){setTimeout(e,0)}var Qr=typeof window>"u"||"Deno"in globalThis;function We(){}function kf(e,r){return typeof e=="function"?e(r):e}function Cf(e){return typeof e=="number"&&e>=0&&e!==1/0}function _f(e,r){return Math.max(e+(r||0)-Date.now(),0)}function _s(e,r){return typeof e=="function"?e(r):e}function Sf(e,r){return typeof e=="function"?e(r):e}function $n(e,r){const{type:s="all",exact:n,fetchStatus:i,predicate:a,queryKey:l,stale:o}=e;if(l){if(n){if(r.queryHash!==sn(l,r.options))return!1}else if(!lr(r.queryKey,l))return!1}if(s!=="all"){const c=r.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof o=="boolean"&&r.isStale()!==o||i&&i!==r.state.fetchStatus||a&&!a(r))}function Bn(e,r){const{exact:s,status:n,predicate:i,mutationKey:a}=e;if(a){if(!r.options.mutationKey)return!1;if(s){if(or(r.options.mutationKey)!==or(a))return!1}else if(!lr(r.options.mutationKey,a))return!1}return!(n&&r.state.status!==n||i&&!i(r))}function sn(e,r){return((r==null?void 0:r.queryKeyHashFn)||or)(e)}function or(e){return JSON.stringify(e,(r,s)=>Ss(s)?Object.keys(s).sort().reduce((n,i)=>(n[i]=s[i],n),{}):s)}function lr(e,r){return e===r?!0:typeof e!=typeof r?!1:e&&r&&typeof e=="object"&&typeof r=="object"?Object.keys(r).every(s=>lr(e[s],r[s])):!1}var Ef=Object.prototype.hasOwnProperty;function Fi(e,r,s=0){if(e===r)return e;if(s>500)return r;const n=Un(e)&&Un(r);if(!n&&!(Ss(e)&&Ss(r)))return r;const a=(n?e:Object.keys(e)).length,l=n?r:Object.keys(r),o=l.length,c=n?new Array(o):{};let m=0;for(let h=0;h<o;h++){const p=n?h:l[h],b=e[p],f=r[p];if(b===f){c[p]=b,(n?h<a:Ef.call(e,p))&&m++;continue}if(b===null||f===null||typeof b!="object"||typeof f!="object"){c[p]=f;continue}const w=Fi(b,f,s+1);c[p]=w,w===b&&m++}return a===o&&m===a?e:c}function Un(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ss(e){if(!Hn(e))return!1;const r=e.constructor;if(r===void 0)return!0;const s=r.prototype;return!(!Hn(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Hn(e){return Object.prototype.toString.call(e)==="[object Object]"}function Af(e){return new Promise(r=>{Cs.setTimeout(r,e)})}function Tf(e,r,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,r):s.structuralSharing!==!1?Fi(e,r):r}function Pf(e,r,s=0){const n=[...e,r];return s&&n.length>s?n.slice(1):n}function Rf(e,r,s=0){const n=[r,...e];return s&&n.length>s?n.slice(0,-1):n}var nn=Symbol();function zi(e,r){return!e.queryFn&&(r!=null&&r.initialPromise)?()=>r.initialPromise:!e.queryFn||e.queryFn===nn?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Of(e,r,s){let n=!1,i;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(i??(i=r()),n||(n=!0,i.aborted?s():i.addEventListener("abort",s,{once:!0})),i)}),e}var _t,pt,Ft,na,Df=(na=class extends Xr{constructor(){super();xe(this,_t);xe(this,pt);xe(this,Ft);fe(this,Ft,r=>{if(!Qr&&window.addEventListener){const s=()=>r();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){B(this,pt)||this.setEventListener(B(this,Ft))}onUnsubscribe(){var r;this.hasListeners()||((r=B(this,pt))==null||r.call(this),fe(this,pt,void 0))}setEventListener(r){var s;fe(this,Ft,r),(s=B(this,pt))==null||s.call(this),fe(this,pt,r(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(r){B(this,_t)!==r&&(fe(this,_t,r),this.onFocus())}onFocus(){const r=this.isFocused();this.listeners.forEach(s=>{s(r)})}isFocused(){var r;return typeof B(this,_t)=="boolean"?B(this,_t):((r=globalThis.document)==null?void 0:r.visibilityState)!=="hidden"}},_t=new WeakMap,pt=new WeakMap,Ft=new WeakMap,na),Li=new Df;function If(){let e,r;const s=new Promise((i,a)=>{e=i,r=a});s.status="pending",s.catch(()=>{});function n(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},s.reject=i=>{n({status:"rejected",reason:i}),r(i)},s}var Ff=Nf;function zf(){let e=[],r=0,s=o=>{o()},n=o=>{o()},i=Ff;const a=o=>{r?e.push(o):i(()=>{s(o)})},l=()=>{const o=e;e=[],o.length&&i(()=>{n(()=>{o.forEach(c=>{s(c)})})})};return{batch:o=>{let c;r++;try{c=o()}finally{r--,r||l()}return c},batchCalls:o=>(...c)=>{a(()=>{o(...c)})},schedule:a,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var $e=zf(),zt,mt,Lt,aa,Lf=(aa=class extends Xr{constructor(){super();xe(this,zt,!0);xe(this,mt);xe(this,Lt);fe(this,Lt,r=>{if(!Qr&&window.addEventListener){const s=()=>r(!0),n=()=>r(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){B(this,mt)||this.setEventListener(B(this,Lt))}onUnsubscribe(){var r;this.hasListeners()||((r=B(this,mt))==null||r.call(this),fe(this,mt,void 0))}setEventListener(r){var s;fe(this,Lt,r),(s=B(this,mt))==null||s.call(this),fe(this,mt,r(this.setOnline.bind(this)))}setOnline(r){B(this,zt)!==r&&(fe(this,zt,r),this.listeners.forEach(n=>{n(r)}))}isOnline(){return B(this,zt)}},zt=new WeakMap,mt=new WeakMap,Lt=new WeakMap,aa),Ir=new Lf;function Mf(e){return Math.min(1e3*2**e,3e4)}function Mi(e){return(e??"online")==="online"?Ir.isOnline():!0}var Es=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function $i(e){let r=!1,s=0,n;const i=If(),a=()=>i.status!=="pending",l=d=>{var x;if(!a()){const g=new Es(d);b(g),(x=e.onCancel)==null||x.call(e,g)}},o=()=>{r=!0},c=()=>{r=!1},m=()=>Li.isFocused()&&(e.networkMode==="always"||Ir.isOnline())&&e.canRun(),h=()=>Mi(e.networkMode)&&e.canRun(),p=d=>{a()||(n==null||n(),i.resolve(d))},b=d=>{a()||(n==null||n(),i.reject(d))},f=()=>new Promise(d=>{var x;n=g=>{(a()||m())&&d(g)},(x=e.onPause)==null||x.call(e)}).then(()=>{var d;n=void 0,a()||(d=e.onContinue)==null||d.call(e)}),w=()=>{if(a())return;let d;const x=s===0?e.initialPromise:void 0;try{d=x??e.fn()}catch(g){d=Promise.reject(g)}Promise.resolve(d).then(p).catch(g=>{var A;if(a())return;const u=e.retry??(Qr?0:3),j=e.retryDelay??Mf,N=typeof j=="function"?j(s,g):j,S=u===!0||typeof u=="number"&&s<u||typeof u=="function"&&u(s,g);if(r||!S){b(g);return}s++,(A=e.onFail)==null||A.call(e,s,g),Af(N).then(()=>m()?void 0:f()).then(()=>{r?b(g):w()})})};return{promise:i,status:()=>i.status,cancel:l,continue:()=>(n==null||n(),i),cancelRetry:o,continueRetry:c,canStart:h,start:()=>(h()?w():f().then(w),i)}}var St,ia,Bi=(ia=class{constructor(){xe(this,St)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Cf(this.gcTime)&&fe(this,St,Cs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qr?1/0:5*60*1e3))}clearGcTimeout(){B(this,St)&&(Cs.clearTimeout(B(this,St)),fe(this,St,void 0))}},St=new WeakMap,ia),Et,Mt,Ve,At,De,cr,Tt,Ge,nt,oa,$f=(oa=class extends Bi{constructor(r){super();xe(this,Ge);xe(this,Et);xe(this,Mt);xe(this,Ve);xe(this,At);xe(this,De);xe(this,cr);xe(this,Tt);fe(this,Tt,!1),fe(this,cr,r.defaultOptions),this.setOptions(r.options),this.observers=[],fe(this,At,r.client),fe(this,Ve,B(this,At).getQueryCache()),this.queryKey=r.queryKey,this.queryHash=r.queryHash,fe(this,Et,Wn(this.options)),this.state=r.state??B(this,Et),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var r;return(r=B(this,De))==null?void 0:r.promise}setOptions(r){if(this.options={...B(this,cr),...r},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Wn(this.options);s.data!==void 0&&(this.setState(Vn(s.data,s.dataUpdatedAt)),fe(this,Et,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,Ve).remove(this)}setData(r,s){const n=Tf(this.state.data,r,this.options);return Fe(this,Ge,nt).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(r,s){Fe(this,Ge,nt).call(this,{type:"setState",state:r,setStateOptions:s})}cancel(r){var n,i;const s=(n=B(this,De))==null?void 0:n.promise;return(i=B(this,De))==null||i.cancel(r),s?s.then(We).catch(We):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,Et))}isActive(){return this.observers.some(r=>Sf(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===nn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>_s(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!_f(this.state.dataUpdatedAt,r)}onFocus(){var s;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r==null||r.refetch({cancelRefetch:!1}),(s=B(this,De))==null||s.continue()}onOnline(){var s;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r==null||r.refetch({cancelRefetch:!1}),(s=B(this,De))==null||s.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),B(this,Ve).notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(s=>s!==r),this.observers.length||(B(this,De)&&(B(this,Tt)?B(this,De).cancel({revert:!0}):B(this,De).cancelRetry()),this.scheduleGc()),B(this,Ve).notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fe(this,Ge,nt).call(this,{type:"invalidate"})}async fetch(r,s){var c,m,h,p,b,f,w,d,x,g,u,j;if(this.state.fetchStatus!=="idle"&&((c=B(this,De))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(B(this,De))return B(this,De).continueRetry(),B(this,De).promise}if(r&&this.setOptions(r),!this.options.queryFn){const N=this.observers.find(S=>S.options.queryFn);N&&this.setOptions(N.options)}const n=new AbortController,i=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(fe(this,Tt,!0),n.signal)})},a=()=>{const N=zi(this.options,s),A=(()=>{const T={client:B(this,At),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return fe(this,Tt,!1),this.options.persister?this.options.persister(N,A,this):N(A)},o=(()=>{const N={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:B(this,At),state:this.state,fetchFn:a};return i(N),N})();(m=this.options.behavior)==null||m.onFetch(o,this),fe(this,Mt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&Fe(this,Ge,nt).call(this,{type:"fetch",meta:(p=o.fetchOptions)==null?void 0:p.meta}),fe(this,De,$i({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,onCancel:N=>{N instanceof Es&&N.revert&&this.setState({...B(this,Mt),fetchStatus:"idle"}),n.abort()},onFail:(N,S)=>{Fe(this,Ge,nt).call(this,{type:"failed",failureCount:N,error:S})},onPause:()=>{Fe(this,Ge,nt).call(this,{type:"pause"})},onContinue:()=>{Fe(this,Ge,nt).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const N=await B(this,De).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(f=(b=B(this,Ve).config).onSuccess)==null||f.call(b,N,this),(d=(w=B(this,Ve).config).onSettled)==null||d.call(w,N,this.state.error,this),N}catch(N){if(N instanceof Es){if(N.silent)return B(this,De).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw Fe(this,Ge,nt).call(this,{type:"error",error:N}),(g=(x=B(this,Ve).config).onError)==null||g.call(x,N,this),(j=(u=B(this,Ve).config).onSettled)==null||j.call(u,this.state.data,N,this),N}finally{this.scheduleGc()}}},Et=new WeakMap,Mt=new WeakMap,Ve=new WeakMap,At=new WeakMap,De=new WeakMap,cr=new WeakMap,Tt=new WeakMap,Ge=new WeakSet,nt=function(r){const s=n=>{switch(r.type){case"failed":return{...n,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Bf(n.data,this.options),fetchMeta:r.meta??null};case"success":const i={...n,...Vn(r.data,r.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return fe(this,Mt,r.manual?i:void 0),i;case"error":const a=r.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...r.state}}};this.state=s(this.state),$e.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),B(this,Ve).notify({query:this,type:"updated",action:r})})},oa);function Bf(e,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Mi(r.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Vn(e,r){return{data:e,dataUpdatedAt:r??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Wn(e){const r=typeof e.initialData=="function"?e.initialData():e.initialData,s=r!==void 0,n=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}function Gn(e){return{onFetch:(r,s)=>{var h,p,b,f,w;const n=r.options,i=(b=(p=(h=r.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:b.direction,a=((f=r.state.data)==null?void 0:f.pages)||[],l=((w=r.state.data)==null?void 0:w.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const m=async()=>{let d=!1;const x=j=>{Of(j,()=>r.signal,()=>d=!0)},g=zi(r.options,r.fetchOptions),u=async(j,N,S)=>{if(d)return Promise.reject();if(N==null&&j.pages.length)return Promise.resolve(j);const T=(()=>{const Y={client:r.client,queryKey:r.queryKey,pageParam:N,direction:S?"backward":"forward",meta:r.options.meta};return x(Y),Y})(),L=await g(T),{maxPages:O}=r.options,U=S?Rf:Pf;return{pages:U(j.pages,L,O),pageParams:U(j.pageParams,N,O)}};if(i&&a.length){const j=i==="backward",N=j?Uf:Kn,S={pages:a,pageParams:l},A=N(n,S);o=await u(S,A,j)}else{const j=e??a.length;do{const N=c===0?l[0]??n.initialPageParam:Kn(n,o);if(c>0&&N==null)break;o=await u(o,N),c++}while(c<j)}return o};r.options.persister?r.fetchFn=()=>{var d,x;return(x=(d=r.options).persister)==null?void 0:x.call(d,m,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},s)}:r.fetchFn=m}}}function Kn(e,{pages:r,pageParams:s}){const n=r.length-1;return r.length>0?e.getNextPageParam(r[n],r,s[n],s):void 0}function Uf(e,{pages:r,pageParams:s}){var n;return r.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,r[0],r,s[0],s):void 0}var dr,Xe,ze,Pt,Qe,ft,la,Hf=(la=class extends Bi{constructor(r){super();xe(this,Qe);xe(this,dr);xe(this,Xe);xe(this,ze);xe(this,Pt);fe(this,dr,r.client),this.mutationId=r.mutationId,fe(this,ze,r.mutationCache),fe(this,Xe,[]),this.state=r.state||Vf(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){B(this,Xe).includes(r)||(B(this,Xe).push(r),this.clearGcTimeout(),B(this,ze).notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){fe(this,Xe,B(this,Xe).filter(s=>s!==r)),this.scheduleGc(),B(this,ze).notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){B(this,Xe).length||(this.state.status==="pending"?this.scheduleGc():B(this,ze).remove(this))}continue(){var r;return((r=B(this,Pt))==null?void 0:r.continue())??this.execute(this.state.variables)}async execute(r){var l,o,c,m,h,p,b,f,w,d,x,g,u,j,N,S,A,T;const s=()=>{Fe(this,Qe,ft).call(this,{type:"continue"})},n={client:B(this,dr),meta:this.options.meta,mutationKey:this.options.mutationKey};fe(this,Pt,$i({fn:()=>this.options.mutationFn?this.options.mutationFn(r,n):Promise.reject(new Error("No mutationFn found")),onFail:(L,O)=>{Fe(this,Qe,ft).call(this,{type:"failed",failureCount:L,error:O})},onPause:()=>{Fe(this,Qe,ft).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,ze).canRun(this)}));const i=this.state.status==="pending",a=!B(this,Pt).canStart();try{if(i)s();else{Fe(this,Qe,ft).call(this,{type:"pending",variables:r,isPaused:a}),B(this,ze).config.onMutate&&await B(this,ze).config.onMutate(r,this,n);const O=await((o=(l=this.options).onMutate)==null?void 0:o.call(l,r,n));O!==this.state.context&&Fe(this,Qe,ft).call(this,{type:"pending",context:O,variables:r,isPaused:a})}const L=await B(this,Pt).start();return await((m=(c=B(this,ze).config).onSuccess)==null?void 0:m.call(c,L,r,this.state.context,this,n)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,L,r,this.state.context,n)),await((f=(b=B(this,ze).config).onSettled)==null?void 0:f.call(b,L,null,this.state.variables,this.state.context,this,n)),await((d=(w=this.options).onSettled)==null?void 0:d.call(w,L,null,r,this.state.context,n)),Fe(this,Qe,ft).call(this,{type:"success",data:L}),L}catch(L){try{await((g=(x=B(this,ze).config).onError)==null?void 0:g.call(x,L,r,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((j=(u=this.options).onError)==null?void 0:j.call(u,L,r,this.state.context,n))}catch(O){Promise.reject(O)}try{await((S=(N=B(this,ze).config).onSettled)==null?void 0:S.call(N,void 0,L,this.state.variables,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((T=(A=this.options).onSettled)==null?void 0:T.call(A,void 0,L,r,this.state.context,n))}catch(O){Promise.reject(O)}throw Fe(this,Qe,ft).call(this,{type:"error",error:L}),L}finally{B(this,ze).runNext(this)}}},dr=new WeakMap,Xe=new WeakMap,ze=new WeakMap,Pt=new WeakMap,Qe=new WeakSet,ft=function(r){const s=n=>{switch(r.type){case"failed":return{...n,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...n,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:r.error,failureCount:n.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=s(this.state),$e.batch(()=>{B(this,Xe).forEach(n=>{n.onMutationUpdate(r)}),B(this,ze).notify({mutation:this,type:"updated",action:r})})},la);function Vf(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var at,Ke,ur,ca,Wf=(ca=class extends Xr{constructor(r={}){super();xe(this,at);xe(this,Ke);xe(this,ur);this.config=r,fe(this,at,new Set),fe(this,Ke,new Map),fe(this,ur,0)}build(r,s,n){const i=new Hf({client:r,mutationCache:this,mutationId:++yr(this,ur)._,options:r.defaultMutationOptions(s),state:n});return this.add(i),i}add(r){B(this,at).add(r);const s=jr(r);if(typeof s=="string"){const n=B(this,Ke).get(s);n?n.push(r):B(this,Ke).set(s,[r])}this.notify({type:"added",mutation:r})}remove(r){if(B(this,at).delete(r)){const s=jr(r);if(typeof s=="string"){const n=B(this,Ke).get(s);if(n)if(n.length>1){const i=n.indexOf(r);i!==-1&&n.splice(i,1)}else n[0]===r&&B(this,Ke).delete(s)}}this.notify({type:"removed",mutation:r})}canRun(r){const s=jr(r);if(typeof s=="string"){const n=B(this,Ke).get(s),i=n==null?void 0:n.find(a=>a.state.status==="pending");return!i||i===r}else return!0}runNext(r){var n;const s=jr(r);if(typeof s=="string"){const i=(n=B(this,Ke).get(s))==null?void 0:n.find(a=>a!==r&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$e.batch(()=>{B(this,at).forEach(r=>{this.notify({type:"removed",mutation:r})}),B(this,at).clear(),B(this,Ke).clear()})}getAll(){return Array.from(B(this,at))}find(r){const s={exact:!0,...r};return this.getAll().find(n=>Bn(s,n))}findAll(r={}){return this.getAll().filter(s=>Bn(r,s))}notify(r){$e.batch(()=>{this.listeners.forEach(s=>{s(r)})})}resumePausedMutations(){const r=this.getAll().filter(s=>s.state.isPaused);return $e.batch(()=>Promise.all(r.map(s=>s.continue().catch(We))))}},at=new WeakMap,Ke=new WeakMap,ur=new WeakMap,ca);function jr(e){var r;return(r=e.options.scope)==null?void 0:r.id}var Je,da,Gf=(da=class extends Xr{constructor(r={}){super();xe(this,Je);this.config=r,fe(this,Je,new Map)}build(r,s,n){const i=s.queryKey,a=s.queryHash??sn(i,s);let l=this.get(a);return l||(l=new $f({client:r,queryKey:i,queryHash:a,options:r.defaultQueryOptions(s),state:n,defaultOptions:r.getQueryDefaults(i)}),this.add(l)),l}add(r){B(this,Je).has(r.queryHash)||(B(this,Je).set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){const s=B(this,Je).get(r.queryHash);s&&(r.destroy(),s===r&&B(this,Je).delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){$e.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return B(this,Je).get(r)}getAll(){return[...B(this,Je).values()]}find(r){const s={exact:!0,...r};return this.getAll().find(n=>$n(s,n))}findAll(r={}){const s=this.getAll();return Object.keys(r).length>0?s.filter(n=>$n(r,n)):s}notify(r){$e.batch(()=>{this.listeners.forEach(s=>{s(r)})})}onFocus(){$e.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){$e.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}},Je=new WeakMap,da),_e,xt,gt,$t,Bt,yt,Ut,Ht,ua,Kf=(ua=class{constructor(e={}){xe(this,_e);xe(this,xt);xe(this,gt);xe(this,$t);xe(this,Bt);xe(this,yt);xe(this,Ut);xe(this,Ht);fe(this,_e,e.queryCache||new Gf),fe(this,xt,e.mutationCache||new Wf),fe(this,gt,e.defaultOptions||{}),fe(this,$t,new Map),fe(this,Bt,new Map),fe(this,yt,0)}mount(){yr(this,yt)._++,B(this,yt)===1&&(fe(this,Ut,Li.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,_e).onFocus())})),fe(this,Ht,Ir.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,_e).onOnline())})))}unmount(){var e,r;yr(this,yt)._--,B(this,yt)===0&&((e=B(this,Ut))==null||e.call(this),fe(this,Ut,void 0),(r=B(this,Ht))==null||r.call(this),fe(this,Ht,void 0))}isFetching(e){return B(this,_e).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,xt).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const r=this.defaultQueryOptions({queryKey:e});return(s=B(this,_e).get(r.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const r=this.defaultQueryOptions(e),s=B(this,_e).build(this,r),n=s.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(_s(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(n))}getQueriesData(e){return B(this,_e).findAll(e).map(({queryKey:r,state:s})=>{const n=s.data;return[r,n]})}setQueryData(e,r,s){const n=this.defaultQueryOptions({queryKey:e}),i=B(this,_e).get(n.queryHash),a=i==null?void 0:i.state.data,l=kf(r,a);if(l!==void 0)return B(this,_e).build(this,n).setData(l,{...s,manual:!0})}setQueriesData(e,r,s){return $e.batch(()=>B(this,_e).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,r,s)]))}getQueryState(e){var s;const r=this.defaultQueryOptions({queryKey:e});return(s=B(this,_e).get(r.queryHash))==null?void 0:s.state}removeQueries(e){const r=B(this,_e);$e.batch(()=>{r.findAll(e).forEach(s=>{r.remove(s)})})}resetQueries(e,r){const s=B(this,_e);return $e.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},r)))}cancelQueries(e,r={}){const s={revert:!0,...r},n=$e.batch(()=>B(this,_e).findAll(e).map(i=>i.cancel(s)));return Promise.all(n).then(We).catch(We)}invalidateQueries(e,r={}){return $e.batch(()=>(B(this,_e).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},r)))}refetchQueries(e,r={}){const s={...r,cancelRefetch:r.cancelRefetch??!0},n=$e.batch(()=>B(this,_e).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,s);return s.throwOnError||(a=a.catch(We)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(We)}fetchQuery(e){const r=this.defaultQueryOptions(e);r.retry===void 0&&(r.retry=!1);const s=B(this,_e).build(this,r);return s.isStaleByTime(_s(r.staleTime,s))?s.fetch(r):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(We).catch(We)}fetchInfiniteQuery(e){return e.behavior=Gn(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(We).catch(We)}ensureInfiniteQueryData(e){return e.behavior=Gn(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ir.isOnline()?B(this,xt).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,_e)}getMutationCache(){return B(this,xt)}getDefaultOptions(){return B(this,gt)}setDefaultOptions(e){fe(this,gt,e)}setQueryDefaults(e,r){B(this,$t).set(or(e),{queryKey:e,defaultOptions:r})}getQueryDefaults(e){const r=[...B(this,$t).values()],s={};return r.forEach(n=>{lr(e,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(e,r){B(this,Bt).set(or(e),{mutationKey:e,defaultOptions:r})}getMutationDefaults(e){const r=[...B(this,Bt).values()],s={};return r.forEach(n=>{lr(e,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const r={...B(this,gt).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return r.queryHash||(r.queryHash=sn(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===nn&&(r.enabled=!1),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,gt).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,_e).clear(),B(this,xt).clear()}},_e=new WeakMap,xt=new WeakMap,gt=new WeakMap,$t=new WeakMap,Bt=new WeakMap,yt=new WeakMap,Ut=new WeakMap,Ht=new WeakMap,ua),Yf=k.createContext(void 0),qf=({client:e,children:r})=>(k.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),t.jsx(Yf.Provider,{value:e,children:r}));class Zf extends k.Component{constructor(){super(...arguments);tr(this,"state",{hasError:!1,error:null,errorInfo:null});tr(this,"handleReload",()=>{window.location.reload()});tr(this,"handleGoHome",()=>{window.location.href="/"});tr(this,"handleReportBug",()=>{var i,a,l;const s=`Error: ${(i=this.state.error)==null?void 0:i.message}

Stack: ${(a=this.state.error)==null?void 0:a.stack}

Component Stack: ${(l=this.state.errorInfo)==null?void 0:l.componentStack}`,n=`mailto:support@deckforge.com?subject=DeckForge Error Report&body=${encodeURIComponent(s)}`;window.location.href=n})}static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,n){console.error("ErrorBoundary caught an error:",s,n),this.setState({error:s,errorInfo:n});try{const i=localStorage.getItem("deckforge-autosave");if(i){const a={timestamp:new Date().toISOString(),state:i};localStorage.setItem("deckforge-crash-backup",JSON.stringify(a))}}catch(i){console.error("Failed to save crash backup:",i)}}render(){var s,n;return this.state.hasError?this.props.fallback?this.props.fallback:t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:t.jsx("div",{className:"max-w-2xl w-full",children:t.jsxs("div",{className:"bg-card border-2 border-destructive p-8 space-y-6",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"w-20 h-20 rounded-full bg-destructive/20 flex items-center justify-center",children:t.jsx(yn,{className:"w-10 h-10 text-destructive"})})}),t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h1",{className:"font-display text-2xl uppercase tracking-widest",children:"Something Went Wrong"}),t.jsx("p",{className:"text-muted-foreground",children:"DeckForge encountered an unexpected error"})]}),t.jsxs("details",{className:"bg-secondary p-4 rounded border border-border",children:[t.jsx("summary",{className:"cursor-pointer text-sm font-mono text-muted-foreground hover:text-foreground transition-colors",children:"Technical Details (click to expand)"}),t.jsx("div",{className:"mt-4 space-y-2",children:t.jsxs("div",{className:"text-xs font-mono bg-background p-3 rounded overflow-auto max-h-40",children:[t.jsx("p",{className:"text-destructive font-semibold",children:(s=this.state.error)==null?void 0:s.message}),((n=this.state.error)==null?void 0:n.stack)&&t.jsx("pre",{className:"mt-2 text-muted-foreground text-[10px] whitespace-pre-wrap",children:this.state.error.stack})]})})]}),t.jsx("div",{className:"bg-accent/10 border border-accent/30 p-4 rounded",children:t.jsxs("p",{className:"text-sm text-foreground flex items-start gap-2",children:[t.jsx("span",{className:"text-lg",children:""}),t.jsxs("span",{children:[t.jsx("strong",{children:"Your work may be saved!"})," We automatically backed up your design before the crash. Try reloading the page to recover it."]})]})}),t.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[t.jsxs(te,{onClick:this.handleReload,className:"gap-2",children:[t.jsx(wl,{className:"w-4 h-4"}),"Reload Page"]}),t.jsxs(te,{onClick:this.handleGoHome,variant:"outline",className:"gap-2",children:[t.jsx(jl,{className:"w-4 h-4"}),"Go to Dashboard"]}),t.jsxs(te,{onClick:this.handleReportBug,variant:"outline",className:"gap-2",children:[t.jsx(yn,{className:"w-4 h-4"}),"Report Bug"]})]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-xs text-muted-foreground",children:["If this keeps happening,"," ",t.jsx("a",{href:"/designs",className:"text-accent hover:underline",children:"try starting a new design"})," ","or"," ",t.jsx("a",{href:"mailto:support@deckforge.com",className:"text-accent hover:underline",children:"contact support"})]})})]})})}):this.props.children}}const Xf="modulepreload",Qf=function(e){return"/"+e},Yn={},ut=function(r,s,n){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(s.map(c=>{if(c=Qf(c),c in Yn)return;Yn[c]=!0;const m=c.endsWith(".css"),h=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=m?"stylesheet":Xf,m||(p.as="script"),p.crossOrigin="",p.href=c,o&&p.setAttribute("nonce",o),document.head.appendChild(p),m)return new Promise((b,f)=>{p.addEventListener("load",b),p.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return r().catch(a)})},us=[{id:"pen",icon:Fs,label:"Pen Tool",shortcut:"P",description:"Draw custom shapes with click-to-point or free draw"},{id:"stickers",icon:va,label:"Stickers",shortcut:"S",description:"Add vector icons and decals from library"},{id:"lines",icon:ba,label:"Lines",shortcut:"L",description:"Draw straight, curved, and decorative lines"},{id:"patterns",icon:wa,label:"Patterns",description:"Apply procedural patterns (checkerboard, stripes, etc.)"},{id:"textures",icon:zs,label:"Textures",description:"Add realistic texture overlays (concrete, rust, graffiti)"},{id:"graphics",icon:ja,label:"Graphics",shortcut:"G",description:"Basic shapes (circle, square, star)"},{id:"text",icon:Lr,label:"Text",shortcut:"T",description:"Add text with custom fonts and styling"},{id:"uploads",icon:Na,label:"Uploads",shortcut:"U",description:"Upload your own images, SVGs, and assets"},{id:"finishes",icon:Er,label:"Finishes",description:"Apply print textures (scratched wood, grip tape, halftone)"}];function qn(){const{activeTool:e,setActiveTool:r}=Se();return k.useEffect(()=>{const s=n=>{if(n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.ctrlKey||n.metaKey||n.altKey)return;const i=n.key.toLowerCase(),a=us.find(l=>{var o;return((o=l.shortcut)==null?void 0:o.toLowerCase())===i});a&&(n.preventDefault(),r(e===a.id?null:a.id))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,r]),t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"hidden md:flex flex-col w-14 bg-card border-r border-border h-full",children:[t.jsx("div",{className:"py-4 px-2 border-b border-border",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground block text-center",children:"Tools"})}),t.jsx(vt,{className:"flex-1",children:t.jsx("div",{className:"flex flex-col gap-1 p-2",children:us.map(s=>{const n=s.icon,i=e===s.id;return t.jsxs(tn,{delayDuration:300,children:[t.jsx(rn,{asChild:!0,children:t.jsx("button",{onClick:()=>r(i?null:s.id),className:ve("w-10 h-10 flex items-center justify-center border border-transparent","hover:border-border hover:bg-secondary transition-colors duration-75",i&&"tool-active border-primary"),children:t.jsx(n,{className:"w-5 h-5",strokeWidth:1.5})})}),t.jsx(Zr,{side:"right",className:"max-w-xs",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsx("span",{className:"font-semibold",children:s.label}),s.shortcut&&t.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted border border-border rounded font-mono",children:s.shortcut})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]})})]},s.id)})})})]}),t.jsx("div",{className:"md:hidden w-full bg-card border-b border-border",children:t.jsx(vt,{className:"w-full",orientation:"horizontal",children:t.jsx("div",{className:"flex gap-1 p-2",children:us.map(s=>{const n=s.icon,i=e===s.id;return t.jsxs("button",{onClick:()=>r(i?null:s.id),className:ve("min-w-[64px] h-16 flex flex-col items-center justify-center gap-1 border border-transparent shrink-0","active:bg-secondary/80 active:scale-95 transition-all duration-75 touch-manipulation",i&&"tool-active border-primary bg-primary/10"),children:[t.jsx(n,{className:"w-5 h-5",strokeWidth:1.5}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:s.label})]},s.id)})})})})]})}function Ui(e){const r=k.useRef({value:e,previous:e});return k.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}var Hi=["PageUp","PageDown"],Vi=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Wi={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Jt="Slider",[As,Jf,eh]=$s(Jt),[Gi]=dt(Jt,[eh]),[th,Jr]=Gi(Jt),Ki=k.forwardRef((e,r)=>{const{name:s,min:n=0,max:i=100,step:a=1,orientation:l="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:m=[n],value:h,onValueChange:p=()=>{},onValueCommit:b=()=>{},inverted:f=!1,form:w,...d}=e,x=k.useRef(new Set),g=k.useRef(0),j=l==="horizontal"?rh:sh,[N=[],S]=jt({prop:h,defaultProp:m,onChange:Y=>{var R;(R=[...x.current][g.current])==null||R.focus(),p(Y)}}),A=k.useRef(N);function T(Y){const C=lh(N,Y);U(Y,C)}function L(Y){U(Y,g.current)}function O(){const Y=A.current[g.current];N[g.current]!==Y&&b(N)}function U(Y,C,{commit:R}={commit:!1}){const y=fh(a),D=hh(Math.round((Y-n)/a)*a+n,y),Q=xa(D,[n,i]);S((M=[])=>{const Z=ih(M,Q,C);if(uh(Z,c*a)){g.current=Z.indexOf(Q);const H=String(Z)!==String(M);return H&&R&&b(Z),H?Z:M}else return M})}return t.jsx(th,{scope:e.__scopeSlider,name:s,disabled:o,min:n,max:i,valueIndexToChangeRef:g,thumbs:x.current,values:N,orientation:l,form:w,children:t.jsx(As.Provider,{scope:e.__scopeSlider,children:t.jsx(As.Slot,{scope:e.__scopeSlider,children:t.jsx(j,{"aria-disabled":o,"data-disabled":o?"":void 0,...d,ref:r,onPointerDown:ye(d.onPointerDown,()=>{o||(A.current=N)}),min:n,max:i,inverted:f,onSlideStart:o?void 0:T,onSlideMove:o?void 0:L,onSlideEnd:o?void 0:O,onHomeKeyDown:()=>!o&&U(n,0,{commit:!0}),onEndKeyDown:()=>!o&&U(i,N.length-1,{commit:!0}),onStepKeyDown:({event:Y,direction:C})=>{if(!o){const D=Hi.includes(Y.key)||Y.shiftKey&&Vi.includes(Y.key)?10:1,Q=g.current,M=N[Q],Z=a*D*C;U(M+Z,Q,{commit:!0})}}})})})})});Ki.displayName=Jt;var[Yi,qi]=Gi(Jt,{startEdge:"left",endEdge:"right",size:"width",direction:1}),rh=k.forwardRef((e,r)=>{const{min:s,max:n,dir:i,inverted:a,onSlideStart:l,onSlideMove:o,onSlideEnd:c,onStepKeyDown:m,...h}=e,[p,b]=k.useState(null),f=Re(r,j=>b(j)),w=k.useRef(void 0),d=ma(i),x=d==="ltr",g=x&&!a||!x&&a;function u(j){const N=w.current||p.getBoundingClientRect(),S=[0,N.width],T=an(S,g?[s,n]:[n,s]);return w.current=N,T(j-N.left)}return t.jsx(Yi,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:t.jsx(Zi,{dir:d,"data-orientation":"horizontal",...h,ref:f,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const N=u(j.clientX);l==null||l(N)},onSlideMove:j=>{const N=u(j.clientX);o==null||o(N)},onSlideEnd:()=>{w.current=void 0,c==null||c()},onStepKeyDown:j=>{const S=Wi[g?"from-left":"from-right"].includes(j.key);m==null||m({event:j,direction:S?-1:1})}})})}),sh=k.forwardRef((e,r)=>{const{min:s,max:n,inverted:i,onSlideStart:a,onSlideMove:l,onSlideEnd:o,onStepKeyDown:c,...m}=e,h=k.useRef(null),p=Re(r,h),b=k.useRef(void 0),f=!i;function w(d){const x=b.current||h.current.getBoundingClientRect(),g=[0,x.height],j=an(g,f?[n,s]:[s,n]);return b.current=x,j(d-x.top)}return t.jsx(Yi,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:t.jsx(Zi,{"data-orientation":"vertical",...m,ref:p,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:d=>{const x=w(d.clientY);a==null||a(x)},onSlideMove:d=>{const x=w(d.clientY);l==null||l(x)},onSlideEnd:()=>{b.current=void 0,o==null||o()},onStepKeyDown:d=>{const g=Wi[f?"from-bottom":"from-top"].includes(d.key);c==null||c({event:d,direction:g?-1:1})}})})}),Zi=k.forwardRef((e,r)=>{const{__scopeSlider:s,onSlideStart:n,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:l,onEndKeyDown:o,onStepKeyDown:c,...m}=e,h=Jr(Jt,s);return t.jsx(Ne.span,{...m,ref:r,onKeyDown:ye(e.onKeyDown,p=>{p.key==="Home"?(l(p),p.preventDefault()):p.key==="End"?(o(p),p.preventDefault()):Hi.concat(Vi).includes(p.key)&&(c(p),p.preventDefault())}),onPointerDown:ye(e.onPointerDown,p=>{const b=p.target;b.setPointerCapture(p.pointerId),p.preventDefault(),h.thumbs.has(b)?b.focus():n(p)}),onPointerMove:ye(e.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&i(p)}),onPointerUp:ye(e.onPointerUp,p=>{const b=p.target;b.hasPointerCapture(p.pointerId)&&(b.releasePointerCapture(p.pointerId),a(p))})})}),Xi="SliderTrack",Qi=k.forwardRef((e,r)=>{const{__scopeSlider:s,...n}=e,i=Jr(Xi,s);return t.jsx(Ne.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:r})});Qi.displayName=Xi;var Ts="SliderRange",Ji=k.forwardRef((e,r)=>{const{__scopeSlider:s,...n}=e,i=Jr(Ts,s),a=qi(Ts,s),l=k.useRef(null),o=Re(r,l),c=i.values.length,m=i.values.map(b=>ro(b,i.min,i.max)),h=c>1?Math.min(...m):0,p=100-Math.max(...m);return t.jsx(Ne.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:o,style:{...e.style,[a.startEdge]:h+"%",[a.endEdge]:p+"%"}})});Ji.displayName=Ts;var Ps="SliderThumb",eo=k.forwardRef((e,r)=>{const s=Jf(e.__scopeSlider),[n,i]=k.useState(null),a=Re(r,o=>i(o)),l=k.useMemo(()=>n?s().findIndex(o=>o.ref.current===n):-1,[s,n]);return t.jsx(nh,{...e,ref:a,index:l})}),nh=k.forwardRef((e,r)=>{const{__scopeSlider:s,index:n,name:i,...a}=e,l=Jr(Ps,s),o=qi(Ps,s),[c,m]=k.useState(null),h=Re(r,u=>m(u)),p=c?l.form||!!c.closest("form"):!0,b=Zs(c),f=l.values[n],w=f===void 0?0:ro(f,l.min,l.max),d=oh(n,l.values.length),x=b==null?void 0:b[o.size],g=x?ch(x,w,o.direction):0;return k.useEffect(()=>{if(c)return l.thumbs.add(c),()=>{l.thumbs.delete(c)}},[c,l.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${w}% + ${g}px)`},children:[t.jsx(As.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(Ne.span,{role:"slider","aria-label":e["aria-label"]||d,"aria-valuemin":l.min,"aria-valuenow":f,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...a,ref:h,style:f===void 0?{display:"none"}:e.style,onFocus:ye(e.onFocus,()=>{l.valueIndexToChangeRef.current=n})})}),p&&t.jsx(to,{name:i??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:f},n)]})});eo.displayName=Ps;var ah="RadioBubbleInput",to=k.forwardRef(({__scopeSlider:e,value:r,...s},n)=>{const i=k.useRef(null),a=Re(i,n),l=Ui(r);return k.useEffect(()=>{const o=i.current;if(!o)return;const c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==r&&h){const p=new Event("input",{bubbles:!0});h.call(o,r),o.dispatchEvent(p)}},[l,r]),t.jsx(Ne.input,{style:{display:"none"},...s,ref:a,defaultValue:r})});to.displayName=ah;function ih(e=[],r,s){const n=[...e];return n[s]=r,n.sort((i,a)=>i-a)}function ro(e,r,s){const a=100/(s-r)*(e-r);return xa(a,[0,100])}function oh(e,r){return r>2?`Value ${e+1} of ${r}`:r===2?["Minimum","Maximum"][e]:void 0}function lh(e,r){if(e.length===1)return 0;const s=e.map(i=>Math.abs(i-r)),n=Math.min(...s);return s.indexOf(n)}function ch(e,r,s){const n=e/2,a=an([0,50],[0,n]);return(n-a(r)*s)*s}function dh(e){return e.slice(0,-1).map((r,s)=>e[s+1]-r)}function uh(e,r){if(r>0){const s=dh(e);return Math.min(...s)>=r}return!0}function an(e,r){return s=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(e[1]-e[0]);return r[0]+n*(s-e[0])}}function fh(e){return(String(e).split(".")[1]||"").length}function hh(e,r){const s=Math.pow(10,r);return Math.round(e*s)/s}var so=Ki,ph=Qi,mh=Ji,xh=eo;const be=k.forwardRef(({className:e,...r},s)=>t.jsxs(so,{ref:s,className:ve("relative flex w-full touch-none select-none items-center",e),...r,children:[t.jsx(ph,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:t.jsx(mh,{className:"absolute h-full bg-primary"})}),t.jsx(xh,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));be.displayName=so.displayName;async function gh(e){const r=await e.text(),n=new DOMParser().parseFromString(r,"image/svg+xml");if(n.querySelector("parsererror"))throw new Error("Invalid SVG file");const a=n.querySelector("svg");if(!a)throw new Error("No SVG element found");const l=a.getAttribute("viewBox");let o=parseFloat(a.getAttribute("width")||"100"),c=parseFloat(a.getAttribute("height")||"100");if(l){const[,,p,b]=l.split(/\s+/).map(parseFloat);o=p||o,c=b||c}const m=[];if(a.querySelectorAll("rect, circle, ellipse, path, polygon, polyline, line").forEach(p=>{const b=yh(p,o,c);b&&m.push(b)}),m.length===0){const p=new XMLSerializer().serializeToString(a),b=new Blob([p],{type:"image/svg+xml"}),f=URL.createObjectURL(b);m.push({type:"image",x:0,y:0,width:Math.min(o,200),height:Math.min(c,200),rotation:0,opacity:1,scaleX:1,scaleY:1,src:f})}return m}function yh(e,r,s){const n=e.tagName.toLowerCase(),i=e.getAttribute("fill")||"#000000",a=e.getAttribute("stroke")||"",l=parseFloat(e.getAttribute("stroke-width")||"0"),o=parseFloat(e.getAttribute("opacity")||"1");if(i==="none"&&!a)return null;switch(n){case"rect":return vh(e,i,a,l,o);case"circle":return bh(e,i,a,l,o);case"ellipse":return wh(e,i,a,l,o);case"line":return jh(e,a||i,l,o);case"path":case"polygon":case"polyline":return Nh(e,r,s,o);default:return null}}function vh(e,r,s,n,i){const a=parseFloat(e.getAttribute("x")||"0"),l=parseFloat(e.getAttribute("y")||"0"),o=parseFloat(e.getAttribute("width")||"100"),c=parseFloat(e.getAttribute("height")||"100");return{type:"shape",shapeType:"rect",x:a,y:l,width:o,height:c,rotation:0,opacity:i,scaleX:1,scaleY:1,fill:r!=="none"?r:void 0,stroke:s||void 0,strokeWidth:n}}function bh(e,r,s,n,i){const a=parseFloat(e.getAttribute("cx")||"50"),l=parseFloat(e.getAttribute("cy")||"50"),o=parseFloat(e.getAttribute("r")||"25");return{type:"shape",shapeType:"circle",x:a-o,y:l-o,width:o*2,height:o*2,rotation:0,opacity:i,scaleX:1,scaleY:1,fill:r!=="none"?r:void 0,stroke:s||void 0,strokeWidth:n}}function wh(e,r,s,n,i){const a=parseFloat(e.getAttribute("cx")||"50"),l=parseFloat(e.getAttribute("cy")||"50"),o=parseFloat(e.getAttribute("rx")||"25"),c=parseFloat(e.getAttribute("ry")||"25");return{type:"shape",shapeType:"circle",x:a-o,y:l-c,width:o*2,height:c*2,rotation:0,opacity:i,scaleX:1,scaleY:c/o,fill:r!=="none"?r:void 0,stroke:s||void 0,strokeWidth:n}}function jh(e,r,s,n){const i=parseFloat(e.getAttribute("x1")||"0"),a=parseFloat(e.getAttribute("y1")||"0"),l=parseFloat(e.getAttribute("x2")||"100"),o=parseFloat(e.getAttribute("y2")||"100");return{type:"line",x:i,y:a,width:Math.abs(l-i),height:Math.abs(o-a),rotation:0,opacity:n,scaleX:1,scaleY:1,lineType:"straight",lineEndX:l-i,lineEndY:o-a,stroke:r||"#000000",strokeWidth:s||2,lineCapStyle:"round"}}function Nh(e,r,s,n){let i={x:0,y:0,width:100,height:100};try{const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.style.position="absolute",h.style.visibility="hidden";const p=e.cloneNode(!0);if(h.appendChild(p),document.body.appendChild(h),p.getBBox){const b=p.getBBox();i={x:b.x,y:b.y,width:b.width,height:b.height}}document.body.removeChild(h)}catch(h){console.warn("Failed to get accurate bounding box, using defaults",h)}const a=e.cloneNode(!0),l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`),l.setAttribute("width",String(i.width)),l.setAttribute("height",String(i.height)),l.appendChild(a);const o=new XMLSerializer().serializeToString(l),c=new Blob([o],{type:"image/svg+xml"}),m=URL.createObjectURL(c);return{type:"image",x:i.x,y:i.y,width:i.width,height:i.height,rotation:0,opacity:n,scaleX:1,scaleY:1,src:m}}function kh(e){const r=["image/svg+xml","image/svg","text/xml"],s=[".svg"],n=r.includes(e.type),i=s.some(a=>e.name.toLowerCase().endsWith(a));return n||i}const Zn={edgy:[{name:"Skull",icon:ac},{name:"Flame",icon:ic},{name:"Zap",icon:oc},{name:"Sword",icon:lc},{name:"Ghost",icon:cc},{name:"Bug",icon:dc},{name:"Eye",icon:Tr},{name:"Target",icon:vn},{name:"Bomb",icon:uc},{name:"Swords",icon:fc},{name:"Shield",icon:hc},{name:"Crosshair",icon:pc}],retro:[{name:"Radio",icon:Yl},{name:"Disc",icon:ql},{name:"Music",icon:Zl},{name:"Rocket",icon:Xl},{name:"Crown",icon:Ql},{name:"Anchor",icon:Jl},{name:"Sun",icon:_a},{name:"Moon",icon:ec},{name:"Camera",icon:tc},{name:"Gamepad",icon:rc},{name:"Headphones",icon:sc},{name:"Watch",icon:nc}],shapes:[{name:"Triangle",icon:Wl},{name:"Hexagon",icon:Gl},{name:"Circle",icon:ka},{name:"Square",icon:Ar},{name:"Star",icon:Ca},{name:"Heart",icon:rr},{name:"Sparkles",icon:it},{name:"Hand",icon:Kl}],nature:[{name:"Cat",icon:zl},{name:"Dog",icon:Ll},{name:"Fish",icon:Ml},{name:"Bird",icon:$l},{name:"Leaf",icon:Bl},{name:"Cloud",icon:Ul},{name:"Mountain",icon:zs},{name:"Waves",icon:Hl},{name:"Feather",icon:Vl}],street:[{name:"Pizza",icon:Tl},{name:"Coffee",icon:Pl},{name:"Cherry",icon:Rl},{name:"Glasses",icon:Ol},{name:"Lock",icon:Ls},{name:"Key",icon:Dl},{name:"Fingerprint",icon:Il},{name:"Compass",icon:Fl}],sports:[{name:"Trophy",icon:_l},{name:"Award",icon:Sl},{name:"Medal",icon:El},{name:"Dumbbell",icon:Al},{name:"Target",icon:vn}],emoji:[{name:"Laugh",icon:Nl},{name:"Smile",icon:kl},{name:"Frown",icon:Cl}]},Ch=[{id:"checkerboard",name:"Checkerboard",description:"Vans style"},{id:"speed-lines",name:"Speed Lines",description:"Racing stripes"},{id:"halftone",name:"Halftone",description:"Comic book dots"},{id:"noise",name:"Noise",description:"Grainy texture"},{id:"tie-dye",name:"Tie-Dye",description:"Psychedelic swirl"},{id:"diagonal-stripes",name:"Diagonal Stripes",description:"Bold lines"},{id:"hexagons",name:"Hexagons",description:"Honeycomb pattern"},{id:"crosshatch",name:"Crosshatch",description:"Grid overlay"}],_h=[{id:"concrete",name:"Concrete",query:"concrete texture"},{id:"rust",name:"Rust",query:"rust metal texture"},{id:"graffiti",name:"Graffiti",query:"graffiti wall"},{id:"wood",name:"Wood Grain",query:"wood grain texture"},{id:"sticker-bomb",name:"Sticker Bomb",query:"sticker collage"},{id:"asphalt",name:"Asphalt",query:"asphalt pavement"},{id:"brick",name:"Brick Wall",query:"red brick wall"},{id:"marble",name:"Marble",query:"white marble texture"},{id:"carbon-fiber",name:"Carbon Fiber",query:"carbon fiber weave"},{id:"splatter",name:"Paint Splatter",query:"paint splatter drips"}],Sh=[{id:"g1",label:"Circle",shapeType:"circle"},{id:"g2",label:"Square",shapeType:"rect"},{id:"g4",label:"Star",shapeType:"star"}],Eh={"scratched-wood":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Cpath d='M5 10 L55 8 M10 25 L50 27 M8 40 L52 38 M15 52 L45 55' stroke='%23444' stroke-width='0.5' fill='none'/%3E%3Cpath d='M20 5 L22 55 M35 8 L37 52 M48 3 L50 57' stroke='%23333' stroke-width='0.3' fill='none'/%3E%3C/svg%3E","grip-tape-dust":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Ccircle cx='10' cy='15' r='1' fill='%23555'/%3E%3Ccircle cx='25' cy='8' r='0.5' fill='%23444'/%3E%3Ccircle cx='45' cy='20' r='1.5' fill='%23555'/%3E%3Ccircle cx='15' cy='35' r='0.8' fill='%23444'/%3E%3Ccircle cx='50' cy='45' r='1' fill='%23555'/%3E%3Ccircle cx='30' cy='50' r='0.6' fill='%23444'/%3E%3Ccircle cx='8' cy='55' r='1.2' fill='%23555'/%3E%3Ccircle cx='40' cy='30' r='0.7' fill='%23444'/%3E%3C/svg%3E","halftone-dots":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Ccircle cx='10' cy='10' r='3' fill='%23444'/%3E%3Ccircle cx='30' cy='10' r='2' fill='%23444'/%3E%3Ccircle cx='50' cy='10' r='3' fill='%23444'/%3E%3Ccircle cx='20' cy='30' r='2.5' fill='%23444'/%3E%3Ccircle cx='40' cy='30' r='2' fill='%23444'/%3E%3Ccircle cx='10' cy='50' r='2' fill='%23444'/%3E%3Ccircle cx='30' cy='50' r='3' fill='%23444'/%3E%3Ccircle cx='50' cy='50' r='2.5' fill='%23444'/%3E%3C/svg%3E"};function Ah({onAddObject:e,deckCenterX:r,deckCenterY:s}){const[n,i]=k.useState("edgy"),a=l=>{e({type:"sticker",x:r-20,y:s-20,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:l,strokeWidth:3,stroke:"#ffffff",solidFill:!1})};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Vector stickers from Lucide icons. Click to add as large decals."}),t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(Zn).map(l=>t.jsx("button",{onClick:()=>i(l),className:ve("px-2 py-1 text-[9px] uppercase tracking-wider border transition-colors",n===l?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"),children:l},l))}),t.jsx("div",{className:"grid grid-cols-4 gap-2",children:Zn[n].map(l=>{const o=l.icon;return t.jsx("button",{onClick:()=>a(l.name),className:"aspect-square border border-border bg-secondary hover:border-primary transition-colors flex items-center justify-center",title:l.name,children:t.jsx(o,{className:"w-6 h-6",strokeWidth:3})},l.name)})}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:'Tip: Use the Inspector to toggle "Solid Fill" and adjust stroke width.'})]})}function Th({onAddObject:e,deckCenterX:r,deckCenterY:s}){const[n,i]=k.useState("#ccff00"),[a,l]=k.useState("#000000"),[o,c]=k.useState(20),m=p=>{switch(p){case"checkerboard":return`conic-gradient(from 90deg at 1px 1px, ${a} 90deg, ${n} 0) 0 0/${o}px ${o}px`;case"speed-lines":return`repeating-linear-gradient(90deg, ${n} 0px, ${n} ${o/4}px, ${a} ${o/4}px, ${a} ${o/2}px)`;case"halftone":return`radial-gradient(${n} ${o/6}px, ${a} ${o/6}px)`;case"noise":return a;case"tie-dye":return`radial-gradient(ellipse at 30% 30%, ${n}, transparent 50%), radial-gradient(ellipse at 70% 70%, ${a}, transparent 50%), ${n}`;case"diagonal-stripes":return`repeating-linear-gradient(45deg, ${n} 0px, ${n} ${o}px, ${a} ${o}px, ${a} ${o*2}px)`;case"hexagons":return`repeating-conic-gradient(from 30deg, ${n} 0deg 60deg, ${a} 60deg 120deg, ${n} 120deg 180deg, ${a} 180deg 240deg, ${n} 240deg 300deg, ${a} 300deg 360deg) 0 0/${o*2}px ${o*2}px`;case"crosshatch":return`repeating-linear-gradient(0deg, transparent, transparent ${o}px, ${a} ${o}px, ${a} ${o+2}px), repeating-linear-gradient(90deg, transparent, transparent ${o}px, ${n} ${o}px, ${n} ${o+2}px)`;default:return n}},h=p=>{let b,f=0;switch(p){case"checkerboard":case"speed-lines":b=[{offset:0,color:n},{offset:.25,color:n},{offset:.25,color:a},{offset:.5,color:a},{offset:.5,color:n},{offset:.75,color:n},{offset:.75,color:a},{offset:1,color:a}],f=p==="speed-lines"?0:45;break;case"diagonal-stripes":b=[{offset:0,color:n},{offset:.5,color:n},{offset:.5,color:a},{offset:1,color:a}],f=45;break;default:b=[{offset:0,color:n},{offset:1,color:a}],f=0}e({type:"shape",x:0,y:0,width:Wt,height:Vt,rotation:0,opacity:1,scaleX:1,scaleY:1,shapeType:"rect",fillType:"linear-gradient",gradientStops:b,gradientAngle:f,fill:n})};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Procedural patterns using CSS gradients. Infinite color combinations."}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Primary"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:n,onChange:p=>i(p.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),t.jsx("span",{className:"text-[9px] font-mono",children:n})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Secondary"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:a,onChange:p=>l(p.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),t.jsx("span",{className:"text-[9px] font-mono",children:a})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Scale"}),t.jsxs("span",{className:"text-[10px] font-mono",children:[o,"px"]})]}),t.jsx(be,{value:[o],onValueChange:([p])=>c(p),min:5,max:50,step:5})]}),t.jsx("div",{className:"space-y-2",children:Ch.map(p=>t.jsxs("button",{onClick:()=>h(p.id),className:"w-full border border-border hover:border-primary transition-colors p-2 flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 border border-border flex-shrink-0",style:{background:m(p.id),backgroundSize:`${o}px ${o}px`}}),t.jsxs("div",{className:"text-left",children:[t.jsx("span",{className:"text-xs font-mono block",children:p.name}),t.jsx("span",{className:"text-[9px] text-muted-foreground",children:p.description})]})]},p.id))})]})}function Ph({onAddObject:e,deckCenterX:r,deckCenterY:s}){const n=(i,a)=>{const l=`https://picsum.photos/seed/${i.replace(/\s/g,"")}-${a}/200/300`;e({type:"texture",x:0,y:0,width:Wt,height:Vt,rotation:0,opacity:.6,scaleX:1,scaleY:1,textureUrl:l,blendMode:"multiply"})};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Realistic textures applied with blend modes. Click to add as overlay."}),_h.map(i=>t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:i.name}),t.jsx("div",{className:"grid grid-cols-3 gap-1",children:[0,1,2].map(a=>t.jsx("button",{onClick:()=>n(i.query,a),className:"aspect-square border border-border hover:border-primary transition-colors overflow-hidden bg-secondary",children:t.jsx("img",{src:`https://picsum.photos/seed/${i.query.replace(/\s/g,"")}-${a}/100/100`,alt:i.name,className:"w-full h-full object-cover opacity-70 hover:opacity-100 transition-opacity",loading:"lazy"})},a))})]},i.id)),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Textures use multiply blend by default. Change in Inspector."})]})}const Rh=[{id:"straight",name:"Straight",description:"Clean straight line",icon:""},{id:"curved",name:"Curved",description:"Smooth bezier curve",icon:""},{id:"zigzag",name:"Zigzag",description:"Sharp angles",icon:""},{id:"dashed",name:"Dashed",description:"Dotted line",icon:""}];function Oh({onAddObject:e,deckCenterX:r,deckCenterY:s}){const[n,i]=k.useState("#ffffff"),[a,l]=k.useState(3),o=c=>{e({type:"line",x:r-30,y:s,width:60,height:60,rotation:0,opacity:1,scaleX:1,scaleY:1,lineType:c,lineEndX:60,lineEndY:c==="curved"?-30:0,lineCurve:c==="curved"?50:0,strokeWidth:a,stroke:n,lineCapStyle:"round"})};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Draw lines and curves. Click to add, then drag endpoints in canvas."}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Stroke Color"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:n,onChange:c=>i(c.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),t.jsx("div",{className:"flex gap-1",children:["#ffffff","#ccff00","#ff6600","#00ffff","#ff00ff","#000000"].map(c=>t.jsx("button",{onClick:()=>i(c),className:`w-5 h-5 border ${n===c?"border-primary":"border-border"}`,style:{backgroundColor:c}},c))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),t.jsxs("span",{className:"text-[10px] font-mono",children:[a,"px"]})]}),t.jsx(be,{value:[a],onValueChange:([c])=>l(c),min:1,max:12,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Line Types"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Rh.map(c=>t.jsxs("button",{onClick:()=>o(c.id),className:"border border-border hover:border-primary transition-colors p-3 flex flex-col items-center gap-1",children:[t.jsx("span",{className:"text-2xl leading-none",style:{color:n},children:c.icon}),t.jsx("span",{className:"text-[9px] font-mono",children:c.name})]},c.id))})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Tip: Use Inspector to adjust curve amount and endpoints."})]})}function Dh({onAddObject:e,deckCenterX:r,deckCenterY:s}){const[n,i]=k.useState([]),[a,l]=k.useState(!1),[o,c]=k.useState(!1),m=k.useRef(null),{isAuthenticated:h}=qt();k.useState(()=>{h&&p()});const p=async()=>{if(h){l(!0);try{const d=await os.list();i(d.assets||[])}catch(d){console.error("Failed to load assets:",d)}finally{l(!1)}}},b=async d=>{const x=d.target.files;if(!x||x.length===0)return;c(!0);let g=0,u=0,j=0;try{for(const N of Array.from(x))if(kh(N))try{const S=await gh(N);S.forEach(A=>e(A)),g++,j+=S.length,S.length>0?le.success(`Imported ${N.name}`,{description:`${S.length} shape${S.length!==1?"s":""} added to canvas`,duration:3e3}):le.warning(`${N.name} imported but no shapes found`,{description:"The SVG may be empty or use unsupported features",duration:3e3})}catch(S){console.error("SVG import failed:",S),le.error(`Failed to import ${N.name}`,{description:"Invalid SVG file or unsupported format",duration:4e3})}else try{const{url:S,width:A,height:T}=await os.upload(N);u++,le.success(`Uploaded ${N.name}`,{description:"Image added to your library"}),await p()}catch(S){console.error("Image upload failed:",S),le.error(`Failed to upload ${N.name}`,{description:"Please try again or check file format"})}if(x.length>1){const N=[];g>0&&N.push(`${g} SVG${g!==1?"s":""} (${j} shapes)`),u>0&&N.push(`${u} image${u!==1?"s":""}`),N.length>0&&le.success("Batch upload complete",{description:N.join(" + ")})}}catch(N){console.error("Upload failed:",N),le.error("Upload failed",{description:"Please try again or check your files"})}finally{c(!1),m.current&&(m.current.value="")}},f=d=>{const g=Math.min(120/d.width,120/d.height),u=d.width*g,j=d.height*g;e({type:"image",x:r-u/2,y:s-j/2,width:d.width,height:d.height,rotation:0,opacity:1,scaleX:g,scaleY:g,src:d.file_url})},w=async d=>{if(confirm("Delete this asset?"))try{await os.delete(d),await p()}catch(x){console.error("Delete failed:",x)}};return h?t.jsxs("div",{className:"space-y-4",children:[t.jsx("input",{ref:m,type:"file",accept:"image/*,.svg",multiple:!0,className:"hidden",onChange:b}),t.jsx("div",{onClick:()=>{var d;return(d=m.current)==null?void 0:d.click()},className:"border-2 border-dashed border-border p-6 text-center hover:border-primary transition-colors cursor-pointer",children:o?t.jsxs(t.Fragment,{children:[t.jsx(ot,{className:"w-6 h-6 mx-auto mb-2 animate-spin text-primary"}),t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Uploading..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Na,{className:"w-6 h-6 mx-auto mb-2 text-muted-foreground"}),t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground block mb-1",children:"Upload Images"}),t.jsx("span",{className:"text-xs text-muted-foreground",children:"PNG, JPG, SVG"})]})}),a?t.jsx("div",{className:"text-center py-4",children:t.jsx(ot,{className:"w-5 h-5 mx-auto animate-spin text-muted-foreground"})}):n.length>0?t.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map(d=>t.jsxs("div",{className:"relative group border border-border hover:border-primary transition-colors overflow-hidden aspect-square cursor-pointer",onClick:()=>f(d),children:[t.jsx("img",{src:d.file_url,alt:d.name,className:"w-full h-full object-cover"}),t.jsx("button",{onClick:x=>{x.stopPropagation(),w(d.id)},className:"absolute top-1 right-1 p-1 bg-destructive text-destructive-foreground rounded opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(Ot,{className:"w-3 h-3"})})]},d.id))}):t.jsx("p",{className:"text-center text-xs text-muted-foreground py-4",children:"No uploads yet. Click above to upload!"})]}):t.jsxs("div",{className:"text-center py-8 space-y-4",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Login to upload custom images"}),t.jsx(te,{size:"sm",onClick:()=>window.location.href="/auth",children:"Login"})]})}function Ih(){const{textureOverlays:e,toggleTexture:r,updateTexture:s}=Se();return t.jsxs("div",{className:"space-y-4",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground block",children:"Texture Overlays"}),t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Add realistic print textures that blend over your design."}),e.map(n=>t.jsxs("div",{className:ve("border p-3 space-y-3 transition-colors",n.enabled?"border-primary bg-secondary/50":"border-border"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>r(n.id),className:ve("w-12 h-12 border flex-shrink-0 bg-cover bg-center",n.enabled?"border-primary":"border-border"),style:{backgroundImage:`url("${Eh[n.id]}")`}}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-mono text-xs",children:n.name}),t.jsx("button",{onClick:()=>r(n.id),className:ve("w-8 h-4 rounded-full transition-colors relative",n.enabled?"bg-primary":"bg-muted"),children:t.jsx("span",{className:ve("absolute top-0.5 w-3 h-3 rounded-full bg-white transition-transform",n.enabled?"translate-x-4":"translate-x-0.5")})})]}),t.jsx("span",{className:"text-[9px] text-muted-foreground uppercase tracking-wider",children:n.blendMode})]})]}),n.enabled&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Opacity"}),t.jsxs("span",{className:"font-mono text-[10px]",children:[Math.round(n.opacity*100),"%"]})]}),t.jsx(be,{value:[n.opacity*100],onValueChange:([i])=>s(n.id,{opacity:i/100}),min:5,max:100,step:5,className:"w-full"})]})]},n.id))]})}function Fh({tool:e,onAddObject:r,deckCenterX:s,deckCenterY:n}){const i=(o,c)=>{o.dataTransfer.setData("application/json",JSON.stringify(c)),o.dataTransfer.effectAllowed="copy"},a=()=>{r({type:"text",x:s-25,y:n,width:50,height:24,rotation:0,opacity:1,scaleX:1,scaleY:1,text:"SKATE",fontSize:18,fontFamily:"Oswald",fill:"#ffffff"}),le.success("Text added to center of deck",{description:"Double-click text to edit, or use Inspector panel to customize",duration:3e3})},l=o=>{r({type:"shape",x:s-15,y:n-15,width:30,height:30,rotation:0,opacity:1,scaleX:1,scaleY:1,shapeType:o,fill:"#ffffff"})};if(e==="stickers")return t.jsx(Ah,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(e==="patterns")return t.jsx(Th,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(e==="textures")return t.jsx(Ph,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(e==="lines")return t.jsx(Oh,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(e==="graphics")return t.jsxs("div",{className:"space-y-3",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Click to add or drag to canvas"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:Sh.map(o=>t.jsxs("button",{draggable:!0,onDragStart:c=>i(c,{type:"shape",shapeType:o.shapeType,width:30,height:30,fill:"#ffffff"}),onClick:()=>l(o.shapeType),className:"aspect-square border border-border bg-secondary hover:border-primary transition-colors flex items-center justify-center cursor-grab active:cursor-grabbing",children:[o.shapeType==="circle"&&t.jsx("div",{className:"w-8 h-8 rounded-full bg-white"}),o.shapeType==="rect"&&t.jsx("div",{className:"w-8 h-8 bg-white"}),o.shapeType==="star"&&t.jsx("span",{className:"text-white text-2xl",children:""})]},o.id))})]});if(e==="pen"){const o=()=>{r({type:"path",x:s-30,y:n-30,width:60,height:60,rotation:0,opacity:1,scaleX:1,scaleY:1,stroke:"#ffffff",strokeWidth:3,solidFill:!1,pathPoints:[{x:0,y:30},{x:30,y:0,cp1x:10,cp1y:30,cp2x:20,cp2y:0},{x:60,y:30,cp1x:40,cp1y:0,cp2x:50,cp2y:30}],pathClosed:!1})},c=()=>{r({type:"path",x:s-25,y:n-25,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ccff00",stroke:"#ffffff",strokeWidth:2,solidFill:!0,pathPoints:[{x:25,y:0},{x:50,y:43,cp1x:50,cp1y:15,cp2x:50,cp2y:28},{x:0,y:43,cp1x:0,cp1y:28,cp2x:0,cp2y:15}],pathClosed:!0})};return t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Quick Start"}),t.jsx("button",{onClick:o,className:"w-full btn-brutal text-left",children:"+ Curved Path"}),t.jsx("button",{onClick:c,className:"w-full btn-brutal text-left",children:"+ Closed Shape"})]}),t.jsxs("div",{className:"space-y-2 pt-3 border-t border-border",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Instructions"}),t.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Select a path"})," to see anchor points (blue) and control handles (orange)."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Drag"})," the path to move it around the canvas."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Edit points"})," in the Inspector panel to add/remove anchors or adjust curves."]}),t.jsxs("p",{children:["Use ",t.jsx("strong",{children:"Transform tools"})," to scale and rotate paths."]})]})]})]})}return e==="text"?t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Add custom text to your deck. Text appears in the center and is immediately selected for editing."}),t.jsxs("button",{onClick:a,className:"w-full btn-brutal text-left flex items-center justify-between group",children:[t.jsx("span",{children:"+ Add Text"}),t.jsx("span",{className:"text-[9px] text-muted-foreground group-hover:text-foreground transition-colors",children:"Click to add"})]}),t.jsx("div",{className:"p-3 border border-accent/30 bg-accent/10 space-y-2",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-accent text-lg",children:""}),t.jsxs("div",{className:"text-[10px] text-muted-foreground space-y-1",children:[t.jsx("p",{children:t.jsx("strong",{children:"After adding:"})}),t.jsx("p",{children:" Edit text in Inspector panel"}),t.jsx("p",{children:" Change font, size, color"}),t.jsx("p",{children:" Drag to reposition"}),t.jsx("p",{children:" Use transform handles to resize/rotate"})]})]})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Popular Styles"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[t.jsx("span",{className:"font-display text-base font-bold",children:"BOLD IMPACT"}),t.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"High visibility branding"})]}),t.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[t.jsx("span",{className:"font-display text-base italic",children:"Stylish Script"}),t.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Elegant cursive look"})]}),t.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[t.jsx("span",{className:"font-mono text-sm",children:"TECHNICAL MONO"}),t.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Clean modern aesthetic"})]})]})]})]}):e==="uploads"?t.jsx(Dh,{onAddObject:r,deckCenterX:s,deckCenterY:n}):e==="finishes"?t.jsx(Ih,{}):t.jsx("div",{className:"text-center py-8",children:t.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Use Stickers, Patterns, or Textures for assets."})})}const zh={templates:"Templates",graphics:"Graphics",text:"Text",uploads:"Uploads",background:"Background",finishes:"Finishes",stickers:"Stickers",patterns:"Patterns",textures:"Textures",lines:"Lines",pen:"Pen Tool"};function Xn(){const{activeTool:e,drawerOpen:r,toggleDrawer:s,addObject:n}=Se();if(!r||!e||e==="pen")return null;const i=Wt/2,a=Vt/2;return t.jsxs("div",{className:"w-56 bg-card border-r border-border h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between py-3 px-3 border-b border-border",children:[t.jsx("span",{className:"font-display text-xs uppercase tracking-widest",children:zh[e]}),t.jsx("button",{onClick:()=>s(!1),className:"w-6 h-6 flex items-center justify-center hover:bg-secondary transition-colors",children:t.jsx(hr,{className:"w-4 h-4"})})]}),t.jsx(vt,{className:"flex-1 p-3",children:t.jsx(Fh,{tool:e,onAddObject:n,deckCenterX:i,deckCenterY:a})})]})}function Lh(e){return e.type==="text"?Lr:e.type==="image"?ja:e.type==="sticker"?va:e.type==="line"?ba:e.type==="path"?Fs:e.type==="texture"?zs:e.type==="shape"?e.shapeType==="circle"?ka:e.shapeType==="star"?Ca:Ar:Ar}function Qn(e){return e.type==="text"&&e.text?e.text.length>15?e.text.slice(0,15)+"...":e.text:e.type==="sticker"&&e.iconName?`${e.iconName} Sticker`:e.type==="shape"&&e.shapeType?`${e.shapeType.charAt(0).toUpperCase()+e.shapeType.slice(1)} Shape`:e.type==="line"&&e.lineType?`${e.lineType.charAt(0).toUpperCase()+e.lineType.slice(1)} Line`:e.type==="path"?e.pathClosed?"Closed Path":"Open Path":e.type==="texture"?"Texture Overlay":e.type==="image"?"Image":e.type.charAt(0).toUpperCase()+e.type.slice(1)}function Mh({obj:e,index:r,isSelected:s,onSelect:n,onDelete:i}){const a=Lh(e);return t.jsxs("div",{onClick:n,className:ve("flex items-center gap-2 px-2 py-1.5 border-b border-border cursor-pointer group","hover:bg-secondary transition-colors",s&&"bg-primary/10 border-l-2 border-l-primary"),children:[t.jsx(xc,{className:"w-3 h-3 text-muted-foreground cursor-grab"}),t.jsx(a,{className:"w-4 h-4 text-foreground"}),t.jsx("span",{className:"flex-1 text-xs truncate font-medium",children:Qn(e)}),t.jsxs(tn,{children:[t.jsx(rn,{asChild:!0,children:t.jsx("button",{onClick:l=>{l.stopPropagation();const o=Qn(e);i(),le.success(`Deleted "${o}"`,{description:"Use Layers panel to manage or remove items",duration:2e3})},className:"w-6 h-6 flex items-center justify-center hover:bg-destructive hover:text-destructive-foreground transition-colors rounded opacity-0 group-hover:opacity-100",title:"Delete layer",children:t.jsx(Ot,{className:"w-3.5 h-3.5"})})}),t.jsx(Zr,{side:"left",children:t.jsx("p",{className:"text-xs",children:"Delete this layer"})})]})]})}function no(){const{objects:e,selectedId:r,selectObject:s,deleteObject:n,moveLayer:i}=Se(),a=[...e].reverse();return t.jsxs("div",{className:"border-t border-border",children:[t.jsxs("div",{className:"py-2 px-3 border-b border-border bg-accent/10",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Er,{className:"w-4 h-4 text-accent"}),t.jsxs("span",{className:"font-display text-xs uppercase tracking-widest text-foreground font-semibold",children:["Layers ",e.length>0&&`(${e.length})`]})]}),t.jsxs(tn,{children:[t.jsx(rn,{asChild:!0,children:t.jsx("button",{className:"w-4 h-4 flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(mc,{className:"w-3.5 h-3.5"})})}),t.jsxs(Zr,{side:"left",className:"max-w-xs",children:[t.jsx("p",{className:"text-xs font-semibold mb-1",children:"Layers Panel"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Shows all elements on your deck. Click to select, hover to reveal delete button."})]})]})]}),e.length>0&&t.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Click layer to select  Hover to delete"})]}),t.jsx(vt,{className:"h-48",children:a.length===0?t.jsxs("div",{className:"p-6 text-center space-y-2",children:[t.jsx(Er,{className:"w-8 h-8 mx-auto text-muted-foreground opacity-50"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"No layers yet"}),t.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Add text, shapes, or images to see them here"})]})]}):a.map((l,o)=>{const c=e.length-1-o;return t.jsx(Mh,{obj:l,index:c,isSelected:r===l.id,onSelect:()=>s(l.id),onDelete:()=>n(l.id),onMoveUp:()=>i(l.id,"up"),onMoveDown:()=>i(l.id,"down"),isFirst:o===0,isLast:o===a.length-1},l.id)})})]})}var es="Switch",[$h]=dt(es),[Bh,Uh]=$h(es),ao=k.forwardRef((e,r)=>{const{__scopeSwitch:s,name:n,checked:i,defaultChecked:a,required:l,disabled:o,value:c="on",onCheckedChange:m,form:h,...p}=e,[b,f]=k.useState(null),w=Re(r,j=>f(j)),d=k.useRef(!1),x=b?h||!!b.closest("form"):!0,[g,u]=jt({prop:i,defaultProp:a??!1,onChange:m,caller:es});return t.jsxs(Bh,{scope:s,checked:g,disabled:o,children:[t.jsx(Ne.button,{type:"button",role:"switch","aria-checked":g,"aria-required":l,"data-state":co(g),"data-disabled":o?"":void 0,disabled:o,value:c,...p,ref:w,onClick:ye(e.onClick,j=>{u(N=>!N),x&&(d.current=j.isPropagationStopped(),d.current||j.stopPropagation())})}),x&&t.jsx(lo,{control:b,bubbles:!d.current,name:n,value:c,checked:g,required:l,disabled:o,form:h,style:{transform:"translateX(-100%)"}})]})});ao.displayName=es;var io="SwitchThumb",oo=k.forwardRef((e,r)=>{const{__scopeSwitch:s,...n}=e,i=Uh(io,s);return t.jsx(Ne.span,{"data-state":co(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:r})});oo.displayName=io;var Hh="SwitchBubbleInput",lo=k.forwardRef(({__scopeSwitch:e,control:r,checked:s,bubbles:n=!0,...i},a)=>{const l=k.useRef(null),o=Re(l,a),c=Ui(s),m=Zs(r);return k.useEffect(()=>{const h=l.current;if(!h)return;const p=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==s&&f){const w=new Event("click",{bubbles:n});f.call(h,s),h.dispatchEvent(w)}},[c,s,n]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:o,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});lo.displayName=Hh;function co(e){return e?"checked":"unchecked"}var uo=ao,Vh=oo;const ts=k.forwardRef(({className:e,...r},s)=>t.jsx(uo,{className:ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...r,ref:s,children:t.jsx(Vh,{className:ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ts.displayName=uo.displayName;var Wh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Gh=Wh.reduce((e,r)=>{const s=al(`Primitive.${r}`),n=k.forwardRef((i,a)=>{const{asChild:l,...o}=i,c=l?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(c,{...o,ref:a})});return n.displayName=`Primitive.${r}`,{...e,[r]:n}},{}),Kh="Separator",Jn="horizontal",Yh=["horizontal","vertical"],fo=k.forwardRef((e,r)=>{const{decorative:s,orientation:n=Jn,...i}=e,a=qh(n)?n:Jn,o=s?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return t.jsx(Gh.div,{"data-orientation":a,...o,...i,ref:r})});fo.displayName=Kh;function qh(e){return Yh.includes(e)}var ho=fo;const Ct=k.forwardRef(({className:e,orientation:r="horizontal",decorative:s=!0,...n},i)=>t.jsx(ho,{ref:i,decorative:s,orientation:r,className:ve("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Ct.displayName=ho.displayName;function Zh(){const{selectedId:e,objects:r,updateObject:s}=Se(),[n,i]=k.useState("gradient"),a=r.find(l=>l.id===e);return!e||!a?t.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Select an object to add effects"}):a.type!=="shape"&&a.type!=="text"&&a.type!=="sticker"?t.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Effects only available for shapes, text, and stickers"}):t.jsx(vt,{className:"h-full",children:t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2 border-b border-border pb-2",children:[t.jsxs(te,{variant:n==="gradient"?"default":"ghost",size:"sm",onClick:()=>i("gradient"),children:[t.jsx(it,{className:"w-3 h-3 mr-1"}),"Gradient"]}),t.jsxs(te,{variant:n==="shadow"?"default":"ghost",size:"sm",onClick:()=>i("shadow"),children:[t.jsx(gc,{className:"w-3 h-3 mr-1"}),"Shadow"]}),t.jsxs(te,{variant:n==="glow"?"default":"ghost",size:"sm",onClick:()=>i("glow"),children:[t.jsx(_a,{className:"w-3 h-3 mr-1"}),"Glow"]}),t.jsxs(te,{variant:n==="filters"?"default":"ghost",size:"sm",onClick:()=>i("filters"),children:[t.jsx(yc,{className:"w-3 h-3 mr-1"}),"Filters"]})]}),n==="gradient"&&t.jsx(Xh,{object:a,updateObject:s}),n==="shadow"&&t.jsx(Qh,{object:a,updateObject:s}),n==="glow"&&t.jsx(Jh,{object:a,updateObject:s}),n==="filters"&&t.jsx(ep,{object:a,updateObject:s})]})})}function Xh({object:e,updateObject:r}){const s=e.fillType||"solid",n=e.gradientStops||[{offset:0,color:"#ff0000"},{offset:1,color:"#0000ff"}],i=e.gradientAngle||0,a=m=>{r(e.id,{fillType:m,gradientStops:m!=="solid"?n:void 0,gradientAngle:m==="linear-gradient"?i:void 0})},l=(m,h)=>{const p=[...n];p[m]={...p[m],...h},r(e.id,{gradientStops:p})},o=()=>{const m=[...n,{offset:.5,color:"#00ff00"}].sort((h,p)=>h.offset-p.offset);r(e.id,{gradientStops:m})},c=m=>{if(n.length<=2)return;const h=n.filter((p,b)=>b!==m);r(e.id,{gradientStops:h})};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-xs",children:"Fill Type"}),t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsx(te,{variant:s==="solid"?"default":"outline",size:"sm",onClick:()=>a("solid"),className:"text-xs",children:"Solid"}),t.jsx(te,{variant:s==="linear-gradient"?"default":"outline",size:"sm",onClick:()=>a("linear-gradient"),className:"text-xs",children:"Linear"}),t.jsx(te,{variant:s==="radial-gradient"?"default":"outline",size:"sm",onClick:()=>a("radial-gradient"),className:"text-xs",children:"Radial"})]})]}),s!=="solid"&&t.jsxs(t.Fragment,{children:[s==="linear-gradient"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Angle: ",i,""]}),t.jsx(be,{value:[i],onValueChange:([m])=>r(e.id,{gradientAngle:m}),min:0,max:360,step:1})]}),t.jsx(Ct,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ue,{className:"text-xs",children:"Color Stops"}),t.jsx(te,{size:"sm",variant:"ghost",onClick:o,children:t.jsx(xs,{className:"w-3 h-3"})})]}),n.map((m,h)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ie,{type:"color",value:m.color,onChange:p=>l(h,{color:p.target.value}),className:"w-12 h-8 p-1 cursor-pointer"}),t.jsx(be,{value:[m.offset*100],onValueChange:([p])=>l(h,{offset:p/100}),min:0,max:100,step:1,className:"flex-1"}),t.jsxs("span",{className:"text-xs text-muted-foreground w-10 text-right",children:[Math.round(m.offset*100),"%"]}),n.length>2&&t.jsx(te,{size:"sm",variant:"ghost",onClick:()=>c(h),children:t.jsx(Ot,{className:"w-3 h-3"})})]},h))]})]})]})}function Qh({object:e,updateObject:r}){const s=e.dropShadow||{enabled:!1,offsetX:4,offsetY:4,blur:8,color:"#000000",opacity:.5},n=i=>{r(e.id,{dropShadow:{...s,...i}})};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ue,{className:"text-xs",children:"Drop Shadow"}),t.jsx(ts,{checked:s.enabled,onCheckedChange:i=>n({enabled:i})})]}),s.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Offset X: ",s.offsetX,"px"]}),t.jsx(be,{value:[s.offsetX],onValueChange:([i])=>n({offsetX:i}),min:-50,max:50,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Offset Y: ",s.offsetY,"px"]}),t.jsx(be,{value:[s.offsetY],onValueChange:([i])=>n({offsetY:i}),min:-50,max:50,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Blur: ",s.blur,"px"]}),t.jsx(be,{value:[s.blur],onValueChange:([i])=>n({blur:i}),min:0,max:50,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Opacity: ",Math.round(s.opacity*100),"%"]}),t.jsx(be,{value:[s.opacity*100],onValueChange:([i])=>n({opacity:i/100}),min:0,max:100,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-xs",children:"Color"}),t.jsx(Ie,{type:"color",value:s.color,onChange:i=>n({color:i.target.value}),className:"w-full h-10 cursor-pointer"})]})]})]})}function Jh({object:e,updateObject:r}){const s=e.glow||{enabled:!1,radius:10,color:"#ffffff",intensity:.8},n=i=>{r(e.id,{glow:{...s,...i}})};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ue,{className:"text-xs",children:"Glow Effect"}),t.jsx(ts,{checked:s.enabled,onCheckedChange:i=>n({enabled:i})})]}),s.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Radius: ",s.radius,"px"]}),t.jsx(be,{value:[s.radius],onValueChange:([i])=>n({radius:i}),min:0,max:50,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Intensity: ",Math.round(s.intensity*100),"%"]}),t.jsx(be,{value:[s.intensity*100],onValueChange:([i])=>n({intensity:i/100}),min:0,max:100,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-xs",children:"Color"}),t.jsx(Ie,{type:"color",value:s.color,onChange:i=>n({color:i.target.value}),className:"w-full h-10 cursor-pointer"})]})]})]})}function ep({object:e,updateObject:r}){const s=e.duotone||{enabled:!1,color1:"#000000",color2:"#ccff00"},n=i=>{r(e.id,{duotone:{...s,...i}})};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Blur: ",e.blur||0,"px"]}),t.jsx(be,{value:[e.blur||0],onValueChange:([i])=>r(e.id,{blur:i}),min:0,max:20,step:.5}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Gaussian blur effect (0-20px)"})]}),t.jsx(Ct,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Saturation: ",e.saturate||100,"%"]}),t.jsx(be,{value:[e.saturate||100],onValueChange:([i])=>r(e.id,{saturate:i}),min:0,max:200,step:5}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"0% = grayscale, 100% = normal, 200% = hyper-saturated"})]}),t.jsx(Ct,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Sepia: ",e.sepia||0,"%"]}),t.jsx(be,{value:[e.sepia||0],onValueChange:([i])=>r(e.id,{sepia:i}),min:0,max:100,step:5}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Vintage photo tone effect"})]}),t.jsx(Ct,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ue,{className:"text-xs",children:["Posterize: ",e.posterize||32," levels"]}),t.jsx(be,{value:[e.posterize||32],onValueChange:([i])=>r(e.id,{posterize:i}),min:2,max:32,step:1}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Reduce color levels (lower = more posterized)"})]}),t.jsx(Ct,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ue,{className:"text-xs",children:"Duotone Effect"}),t.jsx(ts,{checked:s.enabled,onCheckedChange:i=>n({enabled:i})})]}),s.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-xs",children:"Shadow Color"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Ie,{type:"color",value:s.color1,onChange:i=>n({color1:i.target.value}),className:"w-16 h-10 cursor-pointer"}),t.jsx("div",{className:"flex gap-1 flex-1",children:["#000000","#1a1a1a","#0000ff","#ff0000"].map(i=>t.jsx("button",{onClick:()=>n({color1:i}),className:"w-8 h-8 border border-border hover:border-primary transition-colors",style:{backgroundColor:i}},i))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-xs",children:"Highlight Color"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Ie,{type:"color",value:s.color2,onChange:i=>n({color2:i.target.value}),className:"w-16 h-10 cursor-pointer"}),t.jsx("div",{className:"flex gap-1 flex-1",children:["#ccff00","#00ffff","#ff00ff","#ffff00"].map(i=>t.jsx("button",{onClick:()=>n({color2:i}),className:"w-8 h-8 border border-border hover:border-primary transition-colors",style:{backgroundColor:i}},i))})]})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Classic punk/skate magazine effect"})]})]}),t.jsx(Ct,{}),t.jsx(te,{onClick:()=>r(e.id,{blur:0,saturate:100,sepia:0,posterize:32,duotone:{enabled:!1,color1:"#000000",color2:"#ccff00"}}),variant:"outline",size:"sm",className:"w-full",children:"Reset All Filters"})]})}const tp=[{id:"sunset",name:"Sunset",gradient:"linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #ee5a6f 100%)",stops:[{offset:0,color:"#ff6b6b"},{offset:.5,color:"#feca57"},{offset:1,color:"#ee5a6f"}],angle:135},{id:"ocean",name:"Ocean",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",stops:[{offset:0,color:"#667eea"},{offset:1,color:"#764ba2"}],angle:135},{id:"fire",name:"Fire",gradient:"linear-gradient(135deg, #f12711 0%, #f5af19 100%)",stops:[{offset:0,color:"#f12711"},{offset:1,color:"#f5af19"}],angle:135},{id:"mint",name:"Mint",gradient:"linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%)",stops:[{offset:0,color:"#00d2ff"},{offset:1,color:"#3a7bd5"}],angle:135},{id:"purple",name:"Purple Haze",gradient:"linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%)",stops:[{offset:0,color:"#8e2de2"},{offset:1,color:"#4a00e0"}],angle:135},{id:"neon",name:"Neon",gradient:"linear-gradient(135deg, #ccff00 0%, #00ffff 100%)",stops:[{offset:0,color:"#ccff00"},{offset:1,color:"#00ffff"}],angle:135}];function rp({currentFill:e,onApplyGradient:r,onApplySolid:s}){const[n,i]=k.useState(!1);return t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[t.jsx("input",{type:"color",value:e||"#ffffff",onChange:a=>s(a.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),t.jsx(Ie,{type:"text",value:e||"#ffffff",onChange:a=>s(a.target.value),className:"h-8 text-xs font-mono bg-secondary border-border flex-1"})]}),t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>i(!n),className:"gap-1.5 shrink-0",title:"Apply gradient fill",children:[t.jsx(it,{className:"w-3.5 h-3.5"}),t.jsx("span",{className:"text-[10px]",children:"Gradient"})]})]}),n&&t.jsxs("div",{className:"p-3 border border-accent/30 bg-accent/5 rounded space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground flex items-center gap-1.5",children:[t.jsx(Sa,{className:"w-3 h-3"}),"Gradient Presets"]}),t.jsx("button",{onClick:()=>i(!1),className:"text-[9px] text-muted-foreground hover:text-foreground",children:"Close"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:tp.map(a=>t.jsxs("button",{onClick:()=>{r(a.stops,a.angle||0),le.success(`Applied ${a.name} gradient`),i(!1)},className:"group space-y-1.5",children:[t.jsx("div",{className:ve("h-12 rounded border border-border group-hover:border-primary transition-colors","group-hover:scale-105 transform transition-transform"),style:{background:a.gradient}}),t.jsx("span",{className:"text-[9px] text-muted-foreground group-hover:text-foreground transition-colors block text-center",children:a.name})]},a.id))}),t.jsx("div",{className:"pt-2 border-t border-border",children:t.jsx("p",{className:"text-[9px] text-muted-foreground",children:" Tip: After applying a gradient, adjust colors and angle in the Advanced panel below"})})]})]})}function sp(e){const r=np(e),s=k.forwardRef((n,i)=>{const{children:a,...l}=n,o=k.Children.toArray(a),c=o.find(ip);if(c){const m=c.props.children,h=o.map(p=>p===c?k.Children.count(m)>1?k.Children.only(null):k.isValidElement(m)?m.props.children:null:p);return t.jsx(r,{...l,ref:i,children:k.isValidElement(m)?k.cloneElement(m,void 0,h):null})}return t.jsx(r,{...l,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}function np(e){const r=k.forwardRef((s,n)=>{const{children:i,...a}=s;if(k.isValidElement(i)){const l=lp(i),o=op(a,i.props);return i.type!==k.Fragment&&(o.ref=n?fa(n,l):l),k.cloneElement(i,o)}return k.Children.count(i)>1?k.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var ap=Symbol("radix.slottable");function ip(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ap}function op(e,r){const s={...r};for(const n in r){const i=e[n],a=r[n];/^on[A-Z]/.test(n)?i&&a?s[n]=(...o)=>{const c=a(...o);return i(...o),c}:i&&(s[n]=i):n==="style"?s[n]={...i,...a}:n==="className"&&(s[n]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function lp(e){var n,i;let r=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var rs="Popover",[po]=dt(rs,[Gr]),xr=Gr(),[cp,Nt]=po(rs),mo=e=>{const{__scopePopover:r,children:s,open:n,defaultOpen:i,onOpenChange:a,modal:l=!1}=e,o=xr(r),c=k.useRef(null),[m,h]=k.useState(!1),[p,b]=jt({prop:n,defaultProp:i??!1,onChange:a,caller:rs});return t.jsx(Ci,{...o,children:t.jsx(cp,{scope:r,contentId:zr(),triggerRef:c,open:p,onOpenChange:b,onOpenToggle:k.useCallback(()=>b(f=>!f),[b]),hasCustomAnchor:m,onCustomAnchorAdd:k.useCallback(()=>h(!0),[]),onCustomAnchorRemove:k.useCallback(()=>h(!1),[]),modal:l,children:s})})};mo.displayName=rs;var xo="PopoverAnchor",dp=k.forwardRef((e,r)=>{const{__scopePopover:s,...n}=e,i=Nt(xo,s),a=xr(s),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=i;return k.useEffect(()=>(l(),()=>o()),[l,o]),t.jsx(Js,{...a,...n,ref:r})});dp.displayName=xo;var go="PopoverTrigger",yo=k.forwardRef((e,r)=>{const{__scopePopover:s,...n}=e,i=Nt(go,s),a=xr(s),l=Re(r,i.triggerRef),o=t.jsx(Ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":No(i.open),...n,ref:l,onClick:ye(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?o:t.jsx(Js,{asChild:!0,...a,children:o})});yo.displayName=go;var on="PopoverPortal",[up,fp]=po(on,{forceMount:void 0}),vo=e=>{const{__scopePopover:r,forceMount:s,children:n,container:i}=e,a=Nt(on,r);return t.jsx(up,{scope:r,forceMount:s,children:t.jsx(fr,{present:s||a.open,children:t.jsx(ha,{asChild:!0,container:i,children:n})})})};vo.displayName=on;var Yt="PopoverContent",bo=k.forwardRef((e,r)=>{const s=fp(Yt,e.__scopePopover),{forceMount:n=s.forceMount,...i}=e,a=Nt(Yt,e.__scopePopover);return t.jsx(fr,{present:n||a.open,children:a.modal?t.jsx(pp,{...i,ref:r}):t.jsx(mp,{...i,ref:r})})});bo.displayName=Yt;var hp=sp("PopoverContent.RemoveScroll"),pp=k.forwardRef((e,r)=>{const s=Nt(Yt,e.__scopePopover),n=k.useRef(null),i=Re(r,n),a=k.useRef(!1);return k.useEffect(()=>{const l=n.current;if(l)return il(l)},[]),t.jsx(ol,{as:hp,allowPinchZoom:!0,children:t.jsx(wo,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(e.onCloseAutoFocus,l=>{var o;l.preventDefault(),a.current||(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ye(e.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,m=o.button===2||c;a.current=m},{checkForDefaultPrevented:!1}),onFocusOutside:ye(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),mp=k.forwardRef((e,r)=>{const s=Nt(Yt,e.__scopePopover),n=k.useRef(!1),i=k.useRef(!1);return t.jsx(wo,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,o;(l=e.onCloseAutoFocus)==null||l.call(e,a),a.defaultPrevented||(n.current||(o=s.triggerRef.current)==null||o.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var c,m;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=a.target;((m=s.triggerRef.current)==null?void 0:m.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),wo=k.forwardRef((e,r)=>{const{__scopePopover:s,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:m,onInteractOutside:h,...p}=e,b=Nt(Yt,s),f=xr(s);return ll(),t.jsx(cl,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:t.jsx(pa,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:m,onDismiss:()=>b.onOpenChange(!1),children:t.jsx(_i,{"data-state":No(b.open),role:"dialog",id:b.contentId,...f,...p,ref:r,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),jo="PopoverClose",xp=k.forwardRef((e,r)=>{const{__scopePopover:s,...n}=e,i=Nt(jo,s);return t.jsx(Ne.button,{type:"button",...n,ref:r,onClick:ye(e.onClick,()=>i.onOpenChange(!1))})});xp.displayName=jo;var gp="PopoverArrow",yp=k.forwardRef((e,r)=>{const{__scopePopover:s,...n}=e,i=xr(s);return t.jsx(Si,{...i,...n,ref:r})});yp.displayName=gp;function No(e){return e?"open":"closed"}var vp=mo,bp=yo,wp=vo,ko=bo;const jp=vp,Np=bp,Co=k.forwardRef(({className:e,align:r="center",sideOffset:s=4,...n},i)=>t.jsx(wp,{children:t.jsx(ko,{ref:i,align:r,sideOffset:s,className:ve("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Co.displayName=ko.displayName;function fs({value:e,onChange:r,label:s,showEyedropper:n=!0}){const[i,a]=k.useState(!1),{objects:l}=Se(),o=Array.from(new Set(l.flatMap(h=>[h.fill,h.stroke,h.colorize]).filter(h=>!!h&&h!=="none"))).slice(0,12),c=h=>{r(h),a(!1),le.success("Color picked!",{description:h.toUpperCase()})},m=["#000000","#ffffff","#ccff00","#ff6600","#00ffff","#ff00ff","#ff0000","#00ff00"];return t.jsxs("div",{className:"space-y-2",children:[s&&t.jsx("label",{className:"text-[10px] uppercase tracking-widest text-muted-foreground font-medium block",children:s}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-10 h-10 rounded border-2 border-border shadow-sm cursor-pointer hover:scale-105 transition-transform shrink-0",style:{backgroundColor:e},title:e}),t.jsx("input",{type:"color",value:e,onChange:h=>r(h.target.value),className:"flex-1 h-10 border border-border rounded cursor-pointer min-w-0"}),n&&o.length>0&&t.jsxs(jp,{open:i,onOpenChange:a,children:[t.jsx(Np,{asChild:!0,children:t.jsx(te,{size:"sm",variant:"outline",className:"gap-2 shrink-0",title:"Pick color from canvas",children:t.jsx(vc,{className:"w-4 h-4"})})}),t.jsx(Co,{className:"w-64 p-3",align:"end",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-sm font-medium",children:"Pick from canvas"}),t.jsx(te,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>a(!1),children:t.jsx(hr,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"grid grid-cols-6 gap-2",children:o.map((h,p)=>t.jsx("button",{onClick:()=>c(h),className:`w-9 h-9 rounded border-2 transition-all hover:scale-110 ${e.toLowerCase()===h.toLowerCase()?"border-accent ring-2 ring-accent/30":"border-border/50 hover:border-accent/50"}`,style:{backgroundColor:h},title:h},`${h}-${p}`))}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Colors from your design"})]})})]})]}),t.jsx("div",{className:"grid grid-cols-8 gap-1.5",children:m.map(h=>t.jsx("button",{onClick:()=>r(h),className:`w-8 h-8 rounded border-2 transition-all hover:scale-110 ${e.toLowerCase()===h.toLowerCase()?"border-accent ring-2 ring-accent/30":"border-border/50"}`,style:{backgroundColor:h},title:h},h))}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("input",{type:"text",value:e,onChange:h=>{const p=h.target.value;(/^#[0-9A-Fa-f]{0,6}$/.test(p)||p==="")&&r(p)},placeholder:"#000000",maxLength:7,className:"flex-1 h-8 px-2 text-xs font-mono border border-border rounded bg-background"})})]})}var ss="Collapsible",[kp,_o]=dt(ss),[Cp,ln]=kp(ss),So=k.forwardRef((e,r)=>{const{__scopeCollapsible:s,open:n,defaultOpen:i,disabled:a,onOpenChange:l,...o}=e,[c,m]=jt({prop:n,defaultProp:i??!1,onChange:l,caller:ss});return t.jsx(Cp,{scope:s,disabled:a,contentId:zr(),open:c,onOpenToggle:k.useCallback(()=>m(h=>!h),[m]),children:t.jsx(Ne.div,{"data-state":dn(c),"data-disabled":a?"":void 0,...o,ref:r})})});So.displayName=ss;var Eo="CollapsibleTrigger",Ao=k.forwardRef((e,r)=>{const{__scopeCollapsible:s,...n}=e,i=ln(Eo,s);return t.jsx(Ne.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":dn(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...n,ref:r,onClick:ye(e.onClick,i.onOpenToggle)})});Ao.displayName=Eo;var cn="CollapsibleContent",To=k.forwardRef((e,r)=>{const{forceMount:s,...n}=e,i=ln(cn,e.__scopeCollapsible);return t.jsx(fr,{present:s||i.open,children:({present:a})=>t.jsx(_p,{...n,ref:r,present:a})})});To.displayName=cn;var _p=k.forwardRef((e,r)=>{const{__scopeCollapsible:s,present:n,children:i,...a}=e,l=ln(cn,s),[o,c]=k.useState(n),m=k.useRef(null),h=Re(r,m),p=k.useRef(0),b=p.current,f=k.useRef(0),w=f.current,d=l.open||o,x=k.useRef(d),g=k.useRef(void 0);return k.useEffect(()=>{const u=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(u)},[]),nr(()=>{const u=m.current;if(u){g.current=g.current||{transitionDuration:u.style.transitionDuration,animationName:u.style.animationName},u.style.transitionDuration="0s",u.style.animationName="none";const j=u.getBoundingClientRect();p.current=j.height,f.current=j.width,x.current||(u.style.transitionDuration=g.current.transitionDuration,u.style.animationName=g.current.animationName),c(n)}},[l.open,n]),t.jsx(Ne.div,{"data-state":dn(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!d,...a,ref:h,style:{"--radix-collapsible-content-height":b?`${b}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:d&&i})});function dn(e){return e?"open":"closed"}var Sp=So,Ep=Ao,Ap=To,Ze="Accordion",Tp=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[un,Pp,Rp]=$s(Ze),[ns]=dt(Ze,[Rp,_o]),fn=_o(),Po=Pe.forwardRef((e,r)=>{const{type:s,...n}=e,i=n,a=n;return t.jsx(un.Provider,{scope:e.__scopeAccordion,children:s==="multiple"?t.jsx(Fp,{...a,ref:r}):t.jsx(Ip,{...i,ref:r})})});Po.displayName=Ze;var[Ro,Op]=ns(Ze),[Oo,Dp]=ns(Ze,{collapsible:!1}),Ip=Pe.forwardRef((e,r)=>{const{value:s,defaultValue:n,onValueChange:i=()=>{},collapsible:a=!1,...l}=e,[o,c]=jt({prop:s,defaultProp:n??"",onChange:i,caller:Ze});return t.jsx(Ro,{scope:e.__scopeAccordion,value:Pe.useMemo(()=>o?[o]:[],[o]),onItemOpen:c,onItemClose:Pe.useCallback(()=>a&&c(""),[a,c]),children:t.jsx(Oo,{scope:e.__scopeAccordion,collapsible:a,children:t.jsx(Do,{...l,ref:r})})})}),Fp=Pe.forwardRef((e,r)=>{const{value:s,defaultValue:n,onValueChange:i=()=>{},...a}=e,[l,o]=jt({prop:s,defaultProp:n??[],onChange:i,caller:Ze}),c=Pe.useCallback(h=>o((p=[])=>[...p,h]),[o]),m=Pe.useCallback(h=>o((p=[])=>p.filter(b=>b!==h)),[o]);return t.jsx(Ro,{scope:e.__scopeAccordion,value:l,onItemOpen:c,onItemClose:m,children:t.jsx(Oo,{scope:e.__scopeAccordion,collapsible:!0,children:t.jsx(Do,{...a,ref:r})})})}),[zp,as]=ns(Ze),Do=Pe.forwardRef((e,r)=>{const{__scopeAccordion:s,disabled:n,dir:i,orientation:a="vertical",...l}=e,o=Pe.useRef(null),c=Re(o,r),m=Pp(s),p=ma(i)==="ltr",b=ye(e.onKeyDown,f=>{var L;if(!Tp.includes(f.key))return;const w=f.target,d=m().filter(O=>{var U;return!((U=O.ref.current)!=null&&U.disabled)}),x=d.findIndex(O=>O.ref.current===w),g=d.length;if(x===-1)return;f.preventDefault();let u=x;const j=0,N=g-1,S=()=>{u=x+1,u>N&&(u=j)},A=()=>{u=x-1,u<j&&(u=N)};switch(f.key){case"Home":u=j;break;case"End":u=N;break;case"ArrowRight":a==="horizontal"&&(p?S():A());break;case"ArrowDown":a==="vertical"&&S();break;case"ArrowLeft":a==="horizontal"&&(p?A():S());break;case"ArrowUp":a==="vertical"&&A();break}const T=u%g;(L=d[T].ref.current)==null||L.focus()});return t.jsx(zp,{scope:s,disabled:n,direction:i,orientation:a,children:t.jsx(un.Slot,{scope:s,children:t.jsx(Ne.div,{...l,"data-orientation":a,ref:c,onKeyDown:n?void 0:b})})})}),Fr="AccordionItem",[Lp,hn]=ns(Fr),Io=Pe.forwardRef((e,r)=>{const{__scopeAccordion:s,value:n,...i}=e,a=as(Fr,s),l=Op(Fr,s),o=fn(s),c=zr(),m=n&&l.value.includes(n)||!1,h=a.disabled||e.disabled;return t.jsx(Lp,{scope:s,open:m,disabled:h,triggerId:c,children:t.jsx(Sp,{"data-orientation":a.orientation,"data-state":Bo(m),...o,...i,ref:r,disabled:h,open:m,onOpenChange:p=>{p?l.onItemOpen(n):l.onItemClose(n)}})})});Io.displayName=Fr;var Fo="AccordionHeader",zo=Pe.forwardRef((e,r)=>{const{__scopeAccordion:s,...n}=e,i=as(Ze,s),a=hn(Fo,s);return t.jsx(Ne.h3,{"data-orientation":i.orientation,"data-state":Bo(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:r})});zo.displayName=Fo;var Rs="AccordionTrigger",Lo=Pe.forwardRef((e,r)=>{const{__scopeAccordion:s,...n}=e,i=as(Ze,s),a=hn(Rs,s),l=Dp(Rs,s),o=fn(s);return t.jsx(un.ItemSlot,{scope:s,children:t.jsx(Ep,{"aria-disabled":a.open&&!l.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...o,...n,ref:r})})});Lo.displayName=Rs;var Mo="AccordionContent",$o=Pe.forwardRef((e,r)=>{const{__scopeAccordion:s,...n}=e,i=as(Ze,s),a=hn(Mo,s),l=fn(s);return t.jsx(Ap,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...l,...n,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});$o.displayName=Mo;function Bo(e){return e?"open":"closed"}var Mp=Po,$p=Io,Bp=zo,Uo=Lo,Ho=$o;const Up=Mp,Vo=k.forwardRef(({className:e,...r},s)=>t.jsx($p,{ref:s,className:ve("border-b",e),...r}));Vo.displayName="AccordionItem";const Wo=k.forwardRef(({className:e,children:r,...s},n)=>t.jsx(Bp,{className:"flex",children:t.jsxs(Uo,{ref:n,className:ve("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...s,children:[r,t.jsx(Ea,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Wo.displayName=Uo.displayName;const Go=k.forwardRef(({className:e,children:r,...s},n)=>t.jsx(Ho,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:t.jsx("div",{className:ve("pb-4 pt-0",e),children:r})}));Go.displayName=Ho.displayName;function ea(){const{objects:e,selectedId:r,updateObject:s,saveToHistory:n,generatePattern:i}=Se(),a=e.find(u=>u.id===r),[l,o]=k.useState(5),[c,m]=k.useState(0),[h,p]=k.useState(!1),[b,f]=k.useState([]);k.useEffect(()=>{ga().then(f)},[]);const w=()=>{alert("Export feature coming soon! The deck design will be exported as a high-resolution PNG.")},d=u=>{r&&(n(),s(r,u))},{backgroundColor:x,setBackgroundColor:g}=Se();return t.jsxs("div",{className:"w-64 bg-card border-l border-border h-full flex flex-col",children:[t.jsx("div",{className:"p-3 border-b border-border",children:t.jsxs("button",{onClick:w,className:"w-full bg-accent text-accent-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-accent hover:bg-accent/90 transition-colors flex items-center justify-center gap-2",children:[t.jsx(Mr,{className:"w-4 h-4"}),"Export Print"]})}),t.jsx("div",{className:"p-3 border-b border-border space-y-2",children:t.jsx(fs,{label:"Deck Background",value:x,onChange:g,showEyedropper:!0})}),t.jsx("div",{className:"flex-1 overflow-auto",children:a?t.jsxs("div",{className:"p-3 space-y-4",children:[t.jsxs("div",{className:"py-2 border-b border-border flex items-center justify-between",children:[t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Properties"}),t.jsx("button",{onClick:()=>d({locked:!a.locked}),className:`flex items-center gap-1.5 px-2 py-1 text-xs transition-colors ${a.locked?"bg-destructive/20 text-destructive hover:bg-destructive/30":"bg-secondary text-muted-foreground hover:bg-secondary/80"}`,title:a.locked?"Unlock object":"Lock object",children:a.locked?t.jsxs(t.Fragment,{children:[t.jsx(Ls,{className:"w-3 h-3"}),t.jsx("span",{className:"uppercase tracking-wider",children:"Locked"})]}):t.jsxs(t.Fragment,{children:[t.jsx(bc,{className:"w-3 h-3"}),t.jsx("span",{className:"uppercase tracking-wider",children:"Unlocked"})]})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Opacity"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[a.opacity*100],onValueChange:([u])=>d({opacity:u/100}),max:100,min:0,step:1,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[Math.round(a.opacity*100),"%"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Rotation"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ie,{type:"number",value:Math.round(a.rotation),onChange:u=>d({rotation:Number(u.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"}),t.jsx("span",{className:"text-[11px] text-muted-foreground",children:"deg"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Scale"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-[9px] text-muted-foreground",children:"X"}),t.jsx(Ie,{type:"number",step:"0.1",value:a.scaleX.toFixed(2),onChange:u=>d({scaleX:Number(u.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Y"}),t.jsx(Ie,{type:"number",step:"0.1",value:a.scaleY.toFixed(2),onChange:u=>d({scaleY:Number(u.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]})]})]}),(a.type==="text"||a.type==="shape")&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Color"}),t.jsx(rp,{currentFill:a.fill,onApplySolid:u=>d({fill:u}),onApplyGradient:(u,j)=>{d({gradientType:"linear",gradientStops:u,gradientAngle:j,fill:u[0].color})}})]}),a.type==="sticker"&&t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Sticker Options"})}),t.jsx(fs,{label:"Stroke Color",value:a.stroke||"#ffffff",onChange:u=>d({stroke:u}),showEyedropper:!0}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[a.strokeWidth??3],onValueChange:([u])=>d({strokeWidth:u}),max:8,min:1,step:.5,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[a.strokeWidth??3,"px"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Style"}),t.jsx("div",{className:"grid grid-cols-3 gap-1",children:["solid","dashed","dotted"].map(u=>t.jsx("button",{onClick:()=>d({strokeDashStyle:u}),className:`px-2 py-1.5 text-[10px] uppercase tracking-wider border transition-colors ${(a.strokeDashStyle||"solid")===u?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:u==="solid"?"":u==="dashed"?"":""},u))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Solid Fill"}),t.jsx("button",{onClick:()=>d({solidFill:!a.solidFill}),className:`w-10 h-5 rounded-full transition-colors relative ${a.solidFill?"bg-primary":"bg-muted"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${a.solidFill?"translate-x-5":"translate-x-0.5"}`})})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Fill the icon with solid color instead of outline"})]})]}),a.type==="texture"&&t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Texture Options"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Blend Mode"}),t.jsx("div",{className:"grid grid-cols-2 gap-1",children:["multiply","overlay","soft-light","color-burn","normal"].map(u=>t.jsx("button",{onClick:()=>d({blendMode:u}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${a.blendMode===u?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:u},u))})]})]}),a.type==="line"&&t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Options"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Type"}),t.jsx("div",{className:"grid grid-cols-2 gap-1",children:["straight","curved","zigzag","dashed"].map(u=>t.jsx("button",{onClick:()=>d({lineType:u}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${a.lineType===u?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:u},u))})]}),t.jsx(fs,{label:"Stroke Color",value:a.stroke||"#ffffff",onChange:u=>d({stroke:u}),showEyedropper:!0}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[a.strokeWidth??3],onValueChange:([u])=>d({strokeWidth:u}),max:12,min:1,step:1,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[a.strokeWidth??3,"px"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Style"}),t.jsx("div",{className:"grid grid-cols-3 gap-1",children:["solid","dashed","dotted"].map(u=>t.jsx("button",{onClick:()=>d({strokeDashStyle:u}),className:`px-2 py-1.5 text-[10px] uppercase tracking-wider border transition-colors ${(a.strokeDashStyle||"solid")===u?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:u==="solid"?"":u==="dashed"?"":""},u))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Length (X)"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[a.lineEndX??60],onValueChange:([u])=>d({lineEndX:u}),max:200,min:-200,step:5,className:"flex-1"}),t.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:a.lineEndX??60})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Length (Y)"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[a.lineEndY??0],onValueChange:([u])=>d({lineEndY:u}),max:200,min:-200,step:5,className:"flex-1"}),t.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:a.lineEndY??0})]})]}),a.lineType==="curved"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Curve Amount"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[a.lineCurve??50],onValueChange:([u])=>d({lineCurve:u}),max:100,min:-100,step:5,className:"flex-1"}),t.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:a.lineCurve??50})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Negative = curve down, Positive = curve up"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Cap Style"}),t.jsx("div",{className:"grid grid-cols-3 gap-1",children:["butt","round","square"].map(u=>t.jsx("button",{onClick:()=>d({lineCapStyle:u}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${a.lineCapStyle===u?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:u},u))})]})]}),a.type==="text"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Text"}),t.jsx(Ie,{type:"text",value:a.text||"",onChange:u=>d({text:u.target.value}),className:"h-8 text-xs font-mono bg-secondary border-border"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Font Family ",b.length>0&&t.jsxs("span",{className:"text-accent font-normal",children:["(",b.length," custom)"]})]}),t.jsxs("button",{onClick:()=>p(!0),className:"text-[10px] uppercase tracking-widest text-accent hover:text-accent/80 transition-colors flex items-center gap-1",children:[t.jsx(Lr,{className:"w-3 h-3"}),b.length>0?"Manage":"Upload"]})]}),t.jsxs("select",{value:a.fontFamily||"Arial",onChange:u=>d({fontFamily:u.target.value}),className:"w-full h-8 text-xs bg-secondary border border-border px-2 cursor-pointer hover:border-primary transition-colors",children:[b.length>0&&t.jsx("optgroup",{label:" Your Custom Fonts",children:b.map(u=>t.jsx("option",{value:u.font_family,children:u.name},u.id))}),t.jsxs("optgroup",{label:"System Fonts",children:[t.jsx("option",{value:"Arial",children:"Arial"}),t.jsx("option",{value:"Helvetica",children:"Helvetica"}),t.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),t.jsx("option",{value:"Courier New",children:"Courier New"}),t.jsx("option",{value:"Georgia",children:"Georgia"}),t.jsx("option",{value:"Verdana",children:"Verdana"}),t.jsx("option",{value:"Impact",children:"Impact"}),t.jsx("option",{value:"Comic Sans MS",children:"Comic Sans MS"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Font Size"}),t.jsx(Ie,{type:"number",value:a.fontSize||24,onChange:u=>d({fontSize:Number(u.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]})]}),t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Filters"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Contrast"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[a.contrast??100],onValueChange:([u])=>d({contrast:u}),max:200,min:0,step:5,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[a.contrast??100,"%"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Brightness"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[a.brightness??100],onValueChange:([u])=>d({brightness:u}),max:200,min:0,step:5,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[a.brightness??100,"%"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Grayscale"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[a.grayscale??0],onValueChange:([u])=>d({grayscale:u}),max:100,min:0,step:5,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[a.grayscale??0,"%"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Threshold"}),t.jsx("button",{onClick:()=>d({threshold:!a.threshold}),className:`w-10 h-5 rounded-full transition-colors relative ${a.threshold?"bg-primary":"bg-muted"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${a.threshold?"translate-x-5":"translate-x-0.5"}`})})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"High-contrast black & white xerox effect"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Colorize"}),t.jsx("button",{onClick:()=>d({colorize:a.colorize?null:"#00ff00"}),className:`w-10 h-5 rounded-full transition-colors relative ${a.colorize?"bg-primary":"bg-muted"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${a.colorize?"translate-x-5":"translate-x-0.5"}`})})]}),a.colorize&&t.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[t.jsx("input",{type:"color",value:a.colorize,onChange:u=>d({colorize:u.target.value}),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),t.jsx("div",{className:"flex gap-1",children:["#ccff00","#ff6600","#00ffff","#ff00ff","#ffffff"].map(u=>t.jsx("button",{onClick:()=>d({colorize:u}),className:`w-6 h-6 border ${a.colorize===u?"border-primary":"border-border"}`,style:{backgroundColor:u}},u))})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Cast in a single punk zine color"})]})]}),t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Remix Effects"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Hue Shift"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[a.hueRotate??0],onValueChange:([u])=>d({hueRotate:u}),max:360,min:0,step:15,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[a.hueRotate??0,""]})]}),t.jsx("div",{className:"h-3 w-full rounded",style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"}})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Invert"}),t.jsx("button",{onClick:()=>d({invert:!a.invert}),className:`w-10 h-5 rounded-full transition-colors relative ${a.invert?"bg-primary":"bg-muted"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${a.invert?"translate-x-5":"translate-x-0.5"}`})})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Flip colors to negative"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pixelate"}),t.jsx("button",{onClick:()=>d({pixelate:!a.pixelate}),className:`w-10 h-5 rounded-full transition-colors relative ${a.pixelate?"bg-primary":"bg-muted"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${a.pixelate?"translate-x-5":"translate-x-0.5"}`})})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Lo-fi 8-bit effect (images only)"})]}),t.jsxs("button",{onClick:()=>d({hueRotate:0,invert:!1,pixelate:!1,contrast:100,brightness:100,grayscale:0,threshold:!1,colorize:null}),className:"w-full border border-border hover:border-primary transition-colors py-1.5 px-3 text-[10px] uppercase tracking-wider flex items-center justify-center gap-2",children:[t.jsx(wc,{className:"w-3 h-3"}),"Reset All Filters"]})]}),t.jsx(Up,{type:"single",collapsible:!0,className:"border-t border-border",children:t.jsxs(Vo,{value:"effects",className:"border-none",children:[t.jsx(Wo,{className:"py-3 px-0 hover:no-underline",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Advanced Effects"})}),t.jsx(Go,{className:"pb-4",children:t.jsx(Zh,{})})]})}),(a.type==="shape"||a.type==="image"||a.type==="sticker")&&t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pattern Generator"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Gap (spacing)"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[l],onValueChange:([u])=>o(u),max:30,min:0,step:1,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[l,"px"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Random Rotation"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(be,{value:[c],onValueChange:([u])=>m(u),max:180,min:0,step:5,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[c,""]})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"0 = neat grid, 180 = chaotic sticker bomb"})]}),t.jsxs("button",{onClick:()=>{r&&i(r,l,c,Wt,Vt)},className:"w-full bg-primary text-primary-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-primary hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[t.jsx(wa,{className:"w-4 h-4"}),"Make Pattern"]}),t.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Tiles the selected sticker across the entire deck"})]})]}):t.jsx("div",{className:"p-4 text-center",children:t.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest",children:"Select an object"})})}),t.jsx(no,{}),t.jsx(dl,{isOpen:h,onClose:()=>p(!1),onFontUploaded:async u=>{f([...b,u]);try{await ul(u),le.success(`Font "${u.name}" ready to use`,{description:"Select it from the font dropdown",duration:3e3}),a&&a.type==="text"&&(d({fontFamily:u.font_family}),le.info("Applied to selected text",{duration:2e3}))}catch(j){console.error("Failed to load font:",j),le.error("Font uploaded but failed to load",{description:"Try refreshing the page"})}}})]})}function Hp(){var m;const{selectedIds:e,objects:r,alignObjects:s,distributeObjects:n,groupObjects:i,ungroupObject:a}=Se();if(e.length<2)return null;const l=e.length===1&&((m=r.find(h=>h.id===e[0]))==null?void 0:m.type)==="group",o=h=>{s(h);const p={left:"Left",center:"Center",right:"Right",top:"Top",middle:"Middle",bottom:"Bottom"};le.success(`Aligned ${e.length} objects`,{description:p[h]})},c=h=>{if(e.length<3){le.error("Need at least 3 objects to distribute");return}n(h),le.success(`Distributed ${e.length} objects`,{description:h==="horizontal"?"Horizontally":"Vertically"})};return t.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 bg-card border-2 border-primary shadow-2xl rounded-lg p-3 animate-in slide-in-from-bottom-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"px-3 py-1.5 bg-primary/10 rounded border border-primary/20",children:t.jsxs("span",{className:"text-sm font-medium text-primary",children:[e.length," selected"]})}),t.jsx("div",{className:"w-px h-8 bg-border"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:"Align:"}),t.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("left"),className:"h-8 w-8 p-0",title:"Align Left",children:t.jsx(jc,{className:"w-4 h-4"})}),t.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("center"),className:"h-8 w-8 p-0",title:"Align Center",children:t.jsx(Nc,{className:"w-4 h-4"})}),t.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("right"),className:"h-8 w-8 p-0",title:"Align Right",children:t.jsx(kc,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"w-px h-8 bg-border"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("top"),className:"h-8 w-8 p-0",title:"Align Top",children:t.jsx(Cc,{className:"w-4 h-4"})}),t.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("middle"),className:"h-8 w-8 p-0",title:"Align Middle",children:t.jsx(_c,{className:"w-4 h-4"})}),t.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("bottom"),className:"h-8 w-8 p-0",title:"Align Bottom",children:t.jsx(Sc,{className:"w-4 h-4"})})]}),e.length>=3&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-px h-8 bg-border"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:"Distribute:"}),t.jsx(te,{size:"sm",variant:"outline",onClick:()=>c("horizontal"),className:"h-8 w-8 p-0",title:"Distribute Horizontally",children:t.jsx(Ec,{className:"w-4 h-4"})}),t.jsx(te,{size:"sm",variant:"outline",onClick:()=>c("vertical"),className:"h-8 w-8 p-0",title:"Distribute Vertically",children:t.jsx(Ac,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"w-px h-8 bg-border"}),l?t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>{a(e[0]),le.success("Ungrouped objects")},className:"gap-2",title:"Ungroup (Ctrl+Shift+G)",children:[t.jsx(Tc,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline text-xs",children:"Ungroup"})]}):t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>{i(e),le.success(`Grouped ${e.length} objects`)},className:"gap-2",title:"Group (Ctrl+G)",children:[t.jsx(Pc,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline text-xs",children:"Group"})]})]})})}function Vp({onSave:e,onExport:r,onOpenHistory:s,onOpenInspector:n,onOpenLayers:i,isSaving:a,isExporting:l}){const{undo:o,redo:c,past:m,future:h,selectedId:p,deleteObject:b}=Se(),[f,w]=k.useState(!1),d=(j=10)=>{"vibrate"in navigator&&navigator.vibrate(j)},x=()=>{d(10),o()},g=()=>{d(10),c()},u=()=>{p&&(d([10,50,10]),b(p))};return t.jsxs(t.Fragment,{children:[f&&t.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:()=>w(!1)}),t.jsxs("div",{className:ve("fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50 transition-all duration-300",f?"h-48":"h-14"),children:[t.jsx("button",{onClick:()=>w(!f),className:"absolute -top-8 right-4 w-12 h-8 bg-card border border-border border-b-0 rounded-t-lg flex items-center justify-center hover:bg-secondary transition-colors",children:f?t.jsx(Rc,{className:"w-4 h-4"}):t.jsx(Aa,{className:"w-4 h-4"})}),t.jsxs("div",{className:"h-14 flex items-center justify-around px-1",children:[t.jsxs("button",{onClick:x,disabled:m.length===0,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-transform",children:[t.jsx(Ta,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Undo"})]}),t.jsxs("button",{onClick:g,disabled:h.length===0,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-transform",children:[t.jsx(Pa,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Redo"})]}),p&&t.jsxs("button",{onClick:u,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] text-destructive active:scale-95 transition-transform",children:[t.jsx(Ot,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Delete"})]}),t.jsxs("button",{onClick:()=>{d(10),i()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[t.jsx(Er,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Layers"})]}),t.jsxs("button",{onClick:()=>{d(10),n()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[t.jsx(Oc,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Props"})]}),t.jsxs("button",{onClick:()=>{d(10),s()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[t.jsx(Ms,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"History"})]})]}),f&&t.jsxs("div",{className:"border-t border-border p-3 space-y-2",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("button",{onClick:()=>{e(),w(!1)},disabled:a,className:"btn-brutal text-sm py-2.5 flex items-center justify-center gap-2",children:[t.jsx(Ra,{className:"w-4 h-4"}),a?"Saving...":"Save"]}),t.jsxs("button",{onClick:()=>{r(),w(!1)},disabled:l,className:"btn-brutal text-sm py-2.5 flex items-center justify-center gap-2",children:[t.jsx(Mr,{className:"w-4 h-4"}),l?"Exporting...":"Export"]})]}),t.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Tap outside to close"})]})]})]})}function hs({isOpen:e,onClose:r,title:s,children:n}){return e?t.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),t.jsxs("div",{className:ve("absolute bottom-0 left-0 right-0 bg-card border-t-2 border-border max-h-[80vh] flex flex-col","animate-in slide-in-from-bottom duration-300"),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border shrink-0",children:[t.jsx("h2",{className:"font-display text-sm uppercase tracking-wider",children:s}),t.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(hr,{className:"w-5 h-5"})})]}),t.jsx(vt,{className:"flex-1",children:t.jsx("div",{className:"p-4",children:n})})]})]}):null}const Ko=[{keys:["Click"],description:"Select object",category:"Selection"},{keys:["Shift","Click"],description:"Multi-select",category:"Selection"},{keys:["Esc"],description:"Deselect all",category:"Selection"},{keys:["Tab"],description:"Select next object",category:"Selection"},{keys:["Shift","Tab"],description:"Select previous object",category:"Selection"},{keys:["Delete"],description:"Delete selected",category:"Editing"},{keys:["Backspace"],description:"Delete selected",category:"Editing"},{keys:["Ctrl","Z"],description:"Undo",category:"Editing"},{keys:["Ctrl","Shift","Z"],description:"Redo",category:"Editing"},{keys:["Ctrl","D"],description:"Duplicate",category:"Editing"},{keys:["Ctrl","Shift","D"],description:"Array duplicate (custom grid)",category:"Editing"},{keys:["Ctrl","C"],description:"Copy to clipboard",category:"Editing"},{keys:["Ctrl","V"],description:"Paste from clipboard",category:"Editing"},{keys:["Ctrl","A"],description:"Select all (top object)",category:"Editing"},{keys:["Ctrl","L"],description:"Lock/unlock object",category:"Editing"},{keys:["Ctrl","G"],description:"Group selected objects",category:"Editing"},{keys:["Ctrl","Shift","G"],description:"Ungroup selected group",category:"Editing"},{keys:["Drag"],description:"Move object",category:"Transform"},{keys:["Shift","Drag"],description:"Move with snapping disabled",category:"Transform"},{keys:["Corner","Drag"],description:"Scale object",category:"Transform"},{keys:["Shift","Scale"],description:"Scale proportionally",category:"Transform"},{keys:["Alt","Scale"],description:"Scale from center",category:"Transform"},{keys:["Rotate","Handle"],description:"Rotate object",category:"Transform"},{keys:["Shift","Rotate"],description:"Rotate in 15 increments",category:"Transform"},{keys:["Ctrl","]"],description:"Bring forward",category:"Layers"},{keys:["Ctrl","["],description:"Send backward",category:"Layers"},{keys:["Ctrl","Shift","]"],description:"Bring to front",category:"Layers"},{keys:["Ctrl","Shift","["],description:"Send to back",category:"Layers"},{keys:["Alt","L"],description:"Align left",category:"Alignment"},{keys:["Alt","R"],description:"Align right",category:"Alignment"},{keys:["Alt","C"],description:"Align center",category:"Alignment"},{keys:["Alt","T"],description:"Align top",category:"Alignment"},{keys:["Alt","B"],description:"Align bottom",category:"Alignment"},{keys:["Alt","M"],description:"Align middle",category:"Alignment"},{keys:["Space","Drag"],description:"Pan canvas",category:"View"},{keys:["Scroll"],description:"Zoom in/out",category:"View"},{keys:["Ctrl","0"],description:"Reset zoom to 100%",category:"View"},{keys:["Ctrl","1"],description:"Zoom to fit",category:"View"},{keys:["Ctrl","Shift","R"],description:"Toggle rulers",category:"View"},{keys:["H"],description:"Toggle hardware guide",category:"View"},{keys:["T"],description:"Select text tool",category:"Tools"},{keys:["R"],description:"Select rectangle tool",category:"Tools"},{keys:["C"],description:"Select circle tool",category:"Tools"},{keys:["L"],description:"Select line tool",category:"Tools"},{keys:["V"],description:"Select move tool (default)",category:"Tools"},{keys:["Ctrl","S"],description:"Save design",category:"File"},{keys:["Ctrl","E"],description:"Export PNG",category:"File"},{keys:["Ctrl","N"],description:"New design",category:"File"},{keys:["Ctrl","O"],description:"Open design",category:"File"}],Wp=[...new Set(Ko.map(e=>e.category))];function ta({text:e}){return t.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-muted border border-border rounded",children:e})}function Gp(){const[e,r]=k.useState(!1);return t.jsxs(fl,{open:e,onOpenChange:r,children:[t.jsx(hl,{asChild:!0,children:t.jsxs(te,{size:"sm",variant:"ghost",className:"gap-2",children:[t.jsx(bn,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden md:inline",children:"Shortcuts"})]})}),t.jsxs(pl,{className:"max-w-3xl max-h-[80vh]",children:[t.jsx(ml,{children:t.jsxs(xl,{className:"font-display text-xl uppercase tracking-widest flex items-center gap-2",children:[t.jsx(bn,{className:"w-5 h-5"}),"Keyboard Shortcuts"]})}),t.jsx(vt,{className:"h-[60vh] pr-4",children:t.jsx("div",{className:"space-y-6",children:Wp.map(s=>t.jsxs("div",{children:[t.jsx("h3",{className:"font-display text-sm uppercase tracking-widest text-primary mb-3",children:s}),t.jsx("div",{className:"space-y-2",children:Ko.filter(n=>n.category===s).map((n,i)=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[t.jsx("span",{className:"text-sm text-foreground",children:n.description}),t.jsx("div",{className:"flex items-center gap-1",children:n.keys.map((a,l)=>t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(ta,{text:a}),l<n.keys.length-1&&t.jsx("span",{className:"text-xs text-muted-foreground",children:"+"})]},l))})]},i))})]},s))})}),t.jsxs("div",{className:"text-xs text-muted-foreground text-center pt-4 border-t",children:["Press ",t.jsx(ta,{text:"?"})," anytime to view shortcuts"]})]})]})}function Kp(){const[e,r]=k.useState(!1);return k.useEffect(()=>{const s=()=>{r(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e}const Yp=k.lazy(()=>ut(()=>import("./modals-DAarLg_c.js").then(e=>e.$),__vite__mapDeps([0,1,2])).then(e=>({default:e.VersionHistory}))),qp=k.lazy(()=>ut(()=>import("./modals-DAarLg_c.js").then(e=>e.a0),__vite__mapDeps([0,1,2])).then(e=>({default:e.ShareModal}))),Zp=k.lazy(()=>ut(()=>import("./AnimationPreview-D04ybz_r.js"),__vite__mapDeps([3,0,1,2,4])).then(e=>({default:e.AnimationPreview}))),Xp=k.lazy(()=>ut(()=>import("./modals-DAarLg_c.js").then(e=>e.a1),__vite__mapDeps([0,1,2])).then(e=>({default:e.BrandKitModal}))),Qp=k.lazy(()=>ut(()=>import("./modals-DAarLg_c.js").then(e=>e._),__vite__mapDeps([0,1,2])).then(e=>({default:e.FontUploadModal}))),Jp=k.lazy(()=>ut(()=>import("./modals-DAarLg_c.js").then(e=>e.a2),__vite__mapDeps([0,1,2])).then(e=>({default:e.ArrayDuplicateModal}))),em=k.lazy(()=>ut(()=>import("./modals-DAarLg_c.js").then(e=>e.a3),__vite__mapDeps([0,1,2])).then(e=>({default:e.ExportPreview}))),tm=k.lazy(()=>ut(()=>import("./modals-DAarLg_c.js").then(e=>e.a4),__vite__mapDeps([0,1,2])).then(e=>({default:e.ExportPresetsModal}))),rm=k.lazy(()=>ut(()=>import("./TemplateGalleryModal-BreCvN4p.js"),__vite__mapDeps([5,0,1,2])).then(e=>({default:e.TemplateGalleryModal})));function sm(){const{selectedId:e,selectedIds:r,deleteObject:s,undo:n,redo:i,getCanvasState:a,currentDesignId:l,setDesignId:o,setSaving:c,isSaving:m,objects:h,designName:p,createVersion:b,past:f,future:w,updateObject:d,saveToHistory:x,addObject:g,selectObject:u,setActiveTool:j,stageScale:N,setStageScale:S,arrayDuplicate:A,showRulers:T,toggleRulers:L,groupObjects:O,ungroupObject:U}=Se(),{isAuthenticated:Y}=qt(),C=Zt(),R=Kp(),[y,D]=k.useState(""),[Q,M]=k.useState(!1),[Z,H]=k.useState(!1),[ne,z]=k.useState(!1),[F,ie]=k.useState(!1),[re,ee]=k.useState(!1),[je,Ce]=k.useState(!1),[he,me]=k.useState(!1),[ke,we]=k.useState(!1),[Le,Ee]=k.useState(!1),[v,V]=k.useState(!1),[$,E]=k.useState(!1),[_,P]=k.useState(!1),[W,G]=k.useState(!1),[I,X]=k.useState(!1),se=async()=>{if(!Y){C("/auth");return}c(!0),D("Saving...");try{const ae=a();if(l)await Sr.update(l,{canvas_data:ae,name:ae.name}),D("Saved!"),le.success("Design saved successfully");else{const K=await Sr.create({name:ae.name,canvas_data:ae});o(K.design.id),D("Saved!"),le.success("Design created successfully")}setTimeout(()=>D(""),2e3)}catch(ae){console.error("Save failed:",ae),D("Save failed"),le.error("Failed to save design. Please try again."),setTimeout(()=>D(""),2e3)}finally{c(!1)}},J=async()=>{M(!0),D("Exporting PNG..."),H(!1);try{const ae=await ya(h,{scale:3,format:"png",includeBackground:!0}),K=`${p.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${Date.now()}.png`;gn(ae,K),D("Exported PNG!"),le.success(`Exported as ${K}`),setTimeout(()=>D(""),2e3)}catch(ae){console.error("Export failed:",ae),D("Export failed"),le.error("Failed to export PNG. Please try again."),setTimeout(()=>D(""),2e3)}finally{M(!1)}},ce=async()=>{M(!0),D("Exporting SVG..."),H(!1);try{const ae=await gl(h,{includeBackground:!0}),K=`${p.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${Date.now()}.svg`;gn(ae,K),D("Exported SVG!"),le.success(`Exported vector as ${K}`),setTimeout(()=>D(""),2e3)}catch(ae){console.error("SVG export failed:",ae),D("Export failed"),le.error("Failed to export SVG. Please try again."),setTimeout(()=>D(""),2e3)}finally{M(!1)}};return k.useEffect(()=>{Y&&ga().catch(console.error)},[Y]),k.useEffect(()=>{if(h.length===0)return;const ae=setInterval(()=>{b(void 0,!0)},5*60*1e3);return()=>clearInterval(ae)},[h.length,b]),k.useEffect(()=>{const ae=K=>{if(K.target instanceof HTMLInputElement||K.target instanceof HTMLTextAreaElement)return;const oe=K.key.toLowerCase(),pe=K.ctrlKey||K.metaKey,ge=K.shiftKey,Ae=K.altKey;if(pe&&oe==="s"){K.preventDefault(),se();return}if(pe&&oe==="e"){K.preventDefault(),J();return}if((oe==="delete"||oe==="backspace")&&e){K.preventDefault(),s(e);return}if(pe&&oe==="z"&&!ge){K.preventDefault(),n();return}if(pe&&oe==="z"&&ge){K.preventDefault(),i();return}if(pe&&oe==="d"&&!ge&&e){K.preventDefault();const q=h.find(de=>de.id===e);if(q){const{id:de,...Te}=q;g({...Te,x:q.x+10,y:q.y+10}),le.success("Object duplicated")}return}if(pe&&ge&&oe==="d"&&e){K.preventDefault(),we(!0);return}if(oe==="t"&&!pe&&!Ae){K.preventDefault(),j("text");return}if(oe==="p"&&!pe&&!Ae){K.preventDefault(),j("pen");return}if(oe==="g"&&!pe&&!Ae){K.preventDefault(),j("graphics");return}if(oe==="l"&&!pe&&!Ae){K.preventDefault(),j("lines");return}if(oe==="s"&&!pe&&!Ae){K.preventDefault(),j("stickers");return}if(oe==="u"&&!pe&&!Ae){K.preventDefault(),j("uploads");return}if(oe==="escape"){K.preventDefault(),u(null),j(null);return}if(pe&&ge&&oe==="r"){K.preventDefault(),Se.getState().toggleRulers();const q=Se.getState().showRulers;le.success(q?"Rulers enabled":"Rulers disabled");return}if(pe&&oe==="l"&&e){K.preventDefault();const q=h.find(de=>de.id===e);q&&(d(e,{locked:!q.locked}),le.success(q.locked?"Object unlocked":"Object locked"));return}if(pe&&oe==="g"&&!ge&&r.length>=2){K.preventDefault(),O(r),le.success(`Grouped ${r.length} objects`);return}if(pe&&ge&&oe==="g"&&r.length===1){K.preventDefault();const q=h.find(de=>de.id===r[0]);q&&q.type==="group"?(U(r[0]),le.success("Ungrouped objects")):le.error("Selected object is not a group");return}if(e&&["arrowup","arrowdown","arrowleft","arrowright"].includes(oe)){K.preventDefault();const q=h.find(Me=>Me.id===e);if(!q)return;const de=ge?10:1,Te={};oe==="arrowup"&&(Te.y=q.y-de),oe==="arrowdown"&&(Te.y=q.y+de),oe==="arrowleft"&&(Te.x=q.x-de),oe==="arrowright"&&(Te.x=q.x+de),d(e,Te);return}if(pe&&oe==="c"&&e){K.preventDefault();const q=h.find(de=>de.id===e);q&&(sessionStorage.setItem("deckforge_clipboard",JSON.stringify(q)),le.success("Copied to clipboard"));return}if(pe&&oe==="v"){K.preventDefault();const q=sessionStorage.getItem("deckforge_clipboard");if(q)try{const de=JSON.parse(q),{id:Te,...Me}=de;g({...Me,x:de.x+20,y:de.y+20}),le.success("Pasted from clipboard")}catch{le.error("Failed to paste")}else le.error("Nothing to paste");return}if(pe&&oe==="a"){K.preventDefault(),h.length>0&&(u(h[h.length-1].id),le.success(`Selected top object (${h.length} total)`));return}if(pe&&oe==="0"){K.preventDefault(),S(1),le.success("Zoom reset to 100%");return}if(pe&&oe==="1"){K.preventDefault(),S(.8),le.success("Zoom to fit");return}if(pe&&(oe==="="||oe==="+")){K.preventDefault();const q=Math.min(3,N*1.2);S(q),le.success(`Zoom: ${Math.round(q*100)}%`);return}if(pe&&(oe==="-"||oe==="_")){K.preventDefault();const q=Math.max(.25,N/1.2);S(q),le.success(`Zoom: ${Math.round(q*100)}%`);return}if(e){const q=h.findIndex(de=>de.id===e);if(q===-1)return;if(pe&&!ge&&oe==="]"){if(K.preventDefault(),q<h.length-1){const de=[...h];[de[q],de[q+1]]=[de[q+1],de[q]],Se.setState({objects:de}),le.success("Brought forward")}return}if(pe&&!ge&&oe==="["){if(K.preventDefault(),q>0){const de=[...h];[de[q],de[q-1]]=[de[q-1],de[q]],Se.setState({objects:de}),le.success("Sent backward")}return}if(pe&&ge&&oe==="]"){K.preventDefault();const de=h.filter(Te=>Te.id!==e);de.push(h[q]),Se.setState({objects:de}),le.success("Brought to front");return}if(pe&&ge&&oe==="["){K.preventDefault();const de=h.filter(Te=>Te.id!==e);de.unshift(h[q]),Se.setState({objects:de}),le.success("Sent to back");return}}if(e&&Ae){const q=h.find(Me=>Me.id===e);if(!q)return;const de=(Wt-q.width*q.scaleX)/2,Te=(Vt-q.height*q.scaleY)/2;if(oe==="l"){K.preventDefault(),d(e,{x:0}),le.success("Aligned left");return}if(oe==="r"){K.preventDefault(),d(e,{x:Wt-q.width*q.scaleX}),le.success("Aligned right");return}if(oe==="c"){K.preventDefault(),d(e,{x:de}),le.success("Aligned center");return}if(oe==="t"){K.preventDefault(),d(e,{y:0}),le.success("Aligned top");return}if(oe==="b"){K.preventDefault(),d(e,{y:Vt-q.height*q.scaleY}),le.success("Aligned bottom");return}if(oe==="m"){K.preventDefault(),d(e,{y:Te}),le.success("Aligned middle");return}}};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[e,s,n,i,h,se,J,g,u,j,d,N,S]),t.jsxs("div",{className:"h-screen w-screen flex flex-col bg-background overflow-hidden",children:[t.jsxs("header",{className:ve("border-b border-border flex items-center px-4 bg-card shrink-0","h-12"),children:[t.jsxs("h1",{className:ve("font-display uppercase tracking-widest text-foreground",R?"text-base":"text-lg"),children:["Deck",t.jsx("span",{className:"text-primary",children:"Forge"})]}),!R&&t.jsx("div",{className:"ml-4 flex items-center gap-2",children:t.jsx("span",{className:"tag-brutal",children:"v1.0"})}),t.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[!R&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest hidden md:block mr-4",children:"Fingerboard Graphics Editor"}),y&&t.jsx("span",{className:"text-xs text-primary",children:y}),t.jsxs("div",{className:"flex items-center gap-1 border border-border rounded",children:[t.jsxs(te,{size:"sm",variant:"ghost",onClick:n,disabled:f.length===0,className:"gap-1.5 rounded-r-none border-r border-border",title:`Undo (Ctrl+Z) - ${f.length} action${f.length!==1?"s":""} available`,children:[t.jsx(Ta,{className:"w-4 h-4"}),t.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:f.length})]}),t.jsxs(te,{size:"sm",variant:"ghost",onClick:i,disabled:w.length===0,className:"gap-1.5 rounded-l-none",title:`Redo (Ctrl+Shift+Z) - ${w.length} action${w.length!==1?"s":""} available`,children:[t.jsx(Pa,{className:"w-4 h-4"}),t.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:w.length})]})]}),t.jsxs(te,{size:"sm",variant:"outline",onClick:se,disabled:m,className:"gap-2",children:[t.jsx(Ra,{className:"w-4 h-4"}),m?"Saving...":"Save"]}),t.jsxs("div",{className:"relative",children:[t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>H(!Z),disabled:Q,className:"gap-2",children:[t.jsx(Mr,{className:"w-4 h-4"}),Q?"Exporting...":"Export",t.jsx(Ea,{className:"w-3 h-3"})]}),Z&&!Q&&t.jsxs("div",{className:"absolute top-full mt-1 right-0 z-50 bg-card border border-border shadow-lg min-w-[180px] rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:()=>{H(!1),V(!0)},className:"w-full px-4 py-2.5 text-left text-sm hover:bg-secondary transition-colors font-medium flex items-center gap-2",children:[t.jsx(it,{className:"w-4 h-4 text-primary"}),"Quick Export",t.jsx("span",{className:"ml-auto text-[9px] text-primary",children:"NEW"})]}),t.jsxs("button",{onClick:()=>{H(!1),Ee(!0)},className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary transition-colors border-t border-border",children:["PNG (High-Res)",t.jsx("span",{className:"ml-2 text-[9px] text-muted-foreground",children:"Preview first"})]}),t.jsxs("button",{onClick:ce,className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary transition-colors border-t border-border",children:["SVG (Vector)",t.jsx("span",{className:"ml-2 text-[10px] text-accent",children:"PRO"})]})]})]}),t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>Ce(!0),className:"gap-2",children:[t.jsx(Sa,{className:"w-4 h-4"}),"Brand Kits",t.jsx("span",{className:"ml-1 text-[9px] text-accent",children:"PRO"})]}),t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>me(!0),className:"gap-2",children:[t.jsx(Lr,{className:"w-4 h-4"}),"Custom Fonts"]}),l&&t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>ie(!0),className:"gap-2",children:[t.jsx(Dc,{className:"w-4 h-4"}),"Share"]}),t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>z(!0),className:"gap-2",children:[t.jsx(Ms,{className:"w-4 h-4"}),"History"]}),t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>ee(!0),className:"gap-2",children:[t.jsx(Ic,{className:"w-4 h-4"}),"Preview"]}),t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>E(!0),className:"gap-2",children:[t.jsx(it,{className:"w-4 h-4"}),"Templates",t.jsx("span",{className:"ml-1 text-[9px] text-primary",children:"NEW"})]}),t.jsxs(te,{size:"sm",variant:"ghost",onClick:()=>C("/gallery"),className:"gap-2",children:[t.jsx(it,{className:"w-4 h-4"}),"Gallery"]}),t.jsxs(te,{size:"sm",variant:"ghost",onClick:()=>C(Y?"/designs":"/auth"),className:"gap-2",children:[t.jsx(wn,{className:"w-4 h-4"}),Y?"My Designs":"Login"]}),t.jsx(te,{size:"sm",variant:T?"default":"ghost",onClick:()=>{L(),le.success(T?"Rulers hidden":"Rulers visible")},className:"gap-2",title:"Toggle rulers (Ctrl+Shift+R)",children:t.jsx(Fc,{className:"w-4 h-4"})}),t.jsx(Gp,{})]}),R&&t.jsx(te,{size:"sm",variant:"ghost",onClick:()=>X(!0),className:"gap-2",children:t.jsx(Aa,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:ve("flex-1 flex overflow-hidden",R&&"pb-14"),children:[!R&&t.jsxs(t.Fragment,{children:[t.jsx(qn,{}),t.jsx(Xn,{}),t.jsx(ms,{}),t.jsx(ea,{})]}),R&&t.jsxs(t.Fragment,{children:[t.jsx(qn,{}),t.jsx(Xn,{}),t.jsx(ms,{})]})]}),R&&t.jsx(Vp,{onSave:se,onExport:J,onOpenHistory:()=>z(!0),onOpenInspector:()=>P(!0),onOpenLayers:()=>G(!0),isSaving:m,isExporting:Q}),t.jsx(hs,{isOpen:_,onClose:()=>P(!1),title:"Properties",children:t.jsx(ea,{})}),t.jsx(hs,{isOpen:W,onClose:()=>G(!1),title:"Layers",children:t.jsx(no,{})}),t.jsx(hs,{isOpen:I,onClose:()=>X(!1),title:"Menu",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("button",{onClick:()=>{C("/templates"),X(!1)},className:"w-full btn-brutal text-left py-3 flex items-center gap-2",children:[t.jsx(it,{className:"w-4 h-4"}),"Templates"]}),t.jsxs("button",{onClick:()=>{C(Y?"/designs":"/auth"),X(!1)},className:"w-full btn-brutal text-left py-3 flex items-center gap-2",children:[t.jsx(wn,{className:"w-4 h-4"}),Y?"My Designs":"Login"]}),y&&t.jsx("p",{className:"text-xs text-primary text-center py-2",children:y})]})}),t.jsxs(k.Suspense,{fallback:null,children:[t.jsx(Yp,{isOpen:ne,onClose:()=>z(!1)}),l&&t.jsx(qp,{isOpen:F,onClose:()=>ie(!1),designId:l,designName:p}),t.jsx(Zp,{isOpen:re,onClose:()=>ee(!1)}),t.jsx(Qp,{isOpen:he,onClose:()=>me(!1),onFontUploaded:ae=>{le.success(`${ae.name} is now available!`,{description:"You can now use this font in your text objects."})}}),t.jsx(Jp,{open:ke,onClose:()=>we(!1),onDuplicate:(ae,K,oe,pe)=>{if(e){A(e,ae,K,oe,pe);const ge=ae*K-1;le.success(`Created ${ge} ${ge===1?"copy":"copies"} in ${ae}${K} grid`)}}})]}),t.jsx(Xp,{isOpen:je,onClose:()=>Ce(!1),currentColors:(()=>{const ae=new Set;return h.forEach(K=>{K.fill&&ae.add(K.fill),K.stroke&&ae.add(K.stroke),K.colorize&&ae.add(K.colorize)}),Array.from(ae)})(),onApplyKit:ae=>{const K=new Set;h.forEach(q=>{q.fill&&q.fill!=="none"&&K.add(q.fill),q.stroke&&K.add(q.stroke),q.colorize&&K.add(q.colorize)});const oe=Array.from(K),pe=ae.colors,ge=new Map;oe.forEach((q,de)=>{const Te=pe[de%pe.length];ge.set(q,Te)}),x();let Ae=0;h.forEach(q=>{const de={};q.fill&&ge.has(q.fill)&&(de.fill=ge.get(q.fill),Ae++),q.stroke&&ge.has(q.stroke)&&(de.stroke=ge.get(q.stroke),Ae++),q.colorize&&ge.has(q.colorize)&&(de.colorize=ge.get(q.colorize),Ae++),Object.keys(de).length>0&&d(q.id,de)}),Ae>0?le.success(`Applied "${ae.name}" - ${Ae} color${Ae!==1?"s":""} changed`):le.info(`Applied "${ae.name}" - No matching colors found`)}}),t.jsxs(k.Suspense,{fallback:null,children:[t.jsx(em,{isOpen:Le,onClose:()=>Ee(!1),objects:h,designName:p,onConfirmExport:()=>{le.success("Design exported successfully")}}),t.jsx(tm,{open:v,onClose:()=>V(!1)}),t.jsx(rm,{isOpen:$,onClose:()=>E(!1)})]}),t.jsx(Hp,{})]})}function nm(){const[e,r]=k.useState(!0),[s,n]=k.useState(""),[i,a]=k.useState(""),[l,o]=k.useState(""),{signup:c,login:m,isLoading:h,error:p}=qt(),b=Zt(),f=async w=>{w.preventDefault();try{e?await m(s,i):await c(s,i,l),b("/")}catch(d){console.error(d)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:t.jsxs("div",{className:"w-full max-w-md space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("h1",{className:"font-display text-4xl uppercase tracking-widest",children:["Deck",t.jsx("span",{className:"text-primary",children:"Forge"})]}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground uppercase tracking-widest",children:"Fingerboard Graphics Editor"})]}),t.jsxs("div",{className:"border border-border bg-card p-8 space-y-6",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx(te,{variant:e?"default":"outline",className:"flex-1",onClick:()=>r(!0),children:"Login"}),t.jsx(te,{variant:e?"outline":"default",className:"flex-1",onClick:()=>r(!1),children:"Sign Up"})]}),t.jsxs("form",{onSubmit:f,className:"space-y-4",children:[!e&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{htmlFor:"username",children:"Username"}),t.jsx(Ie,{id:"username",type:"text",value:l,onChange:w=>o(w.target.value),placeholder:"fingerboarder123",required:!e})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{htmlFor:"email",children:"Email"}),t.jsx(Ie,{id:"email",type:"email",value:s,onChange:w=>n(w.target.value),placeholder:"you@example.com",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(ue,{htmlFor:"password",children:"Password"}),t.jsx(Ie,{id:"password",type:"password",value:i,onChange:w=>a(w.target.value),placeholder:"",required:!0,minLength:6})]}),p&&t.jsx("div",{className:"text-sm text-destructive bg-destructive/10 border border-destructive/20 p-3 rounded",children:p}),t.jsx(te,{type:"submit",className:"w-full",disabled:h,children:h?"Loading...":e?"Login":"Create Account"})]}),t.jsx("div",{className:"text-center",children:t.jsx(te,{variant:"link",onClick:()=>b("/"),className:"text-xs uppercase tracking-widest",children:"Continue as Guest"})})]})]})})}function Nr(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yo={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,r){(function(s){e.exports=s()})(function(){return function s(n,i,a){function l(m,h){if(!i[m]){if(!n[m]){var p=typeof Nr=="function"&&Nr;if(!h&&p)return p(m,!0);if(o)return o(m,!0);var b=new Error("Cannot find module '"+m+"'");throw b.code="MODULE_NOT_FOUND",b}var f=i[m]={exports:{}};n[m][0].call(f.exports,function(w){var d=n[m][1][w];return l(d||w)},f,f.exports,s,n,i,a)}return i[m].exports}for(var o=typeof Nr=="function"&&Nr,c=0;c<a.length;c++)l(a[c]);return l}({1:[function(s,n,i){var a=s("./utils"),l=s("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var m,h,p,b,f,w,d,x=[],g=0,u=c.length,j=u,N=a.getTypeOf(c)!=="string";g<c.length;)j=u-g,p=N?(m=c[g++],h=g<u?c[g++]:0,g<u?c[g++]:0):(m=c.charCodeAt(g++),h=g<u?c.charCodeAt(g++):0,g<u?c.charCodeAt(g++):0),b=m>>2,f=(3&m)<<4|h>>4,w=1<j?(15&h)<<2|p>>6:64,d=2<j?63&p:64,x.push(o.charAt(b)+o.charAt(f)+o.charAt(w)+o.charAt(d));return x.join("")},i.decode=function(c){var m,h,p,b,f,w,d=0,x=0,g="data:";if(c.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var u,j=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&j--,c.charAt(c.length-2)===o.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=l.uint8array?new Uint8Array(0|j):new Array(0|j);d<c.length;)m=o.indexOf(c.charAt(d++))<<2|(b=o.indexOf(c.charAt(d++)))>>4,h=(15&b)<<4|(f=o.indexOf(c.charAt(d++)))>>2,p=(3&f)<<6|(w=o.indexOf(c.charAt(d++))),u[x++]=m,f!==64&&(u[x++]=h),w!==64&&(u[x++]=p);return u}},{"./support":30,"./utils":32}],2:[function(s,n,i){var a=s("./external"),l=s("./stream/DataWorker"),o=s("./stream/Crc32Probe"),c=s("./stream/DataLengthProbe");function m(h,p,b,f,w){this.compressedSize=h,this.uncompressedSize=p,this.crc32=b,this.compression=f,this.compressedContent=w}m.prototype={getContentWorker:function(){var h=new l(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),p=this;return h.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new l(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(h,p,b){return h.pipe(new o).pipe(new c("uncompressedSize")).pipe(p.compressWorker(b)).pipe(new c("compressedSize")).withStreamInfo("compression",p)},n.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,n,i){var a=s("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,n,i){var a=s("./utils"),l=function(){for(var o,c=[],m=0;m<256;m++){o=m;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;c[m]=o}return c}();n.exports=function(o,c){return o!==void 0&&o.length?a.getTypeOf(o)!=="string"?function(m,h,p,b){var f=l,w=b+p;m^=-1;for(var d=b;d<w;d++)m=m>>>8^f[255&(m^h[d])];return-1^m}(0|c,o,o.length,0):function(m,h,p,b){var f=l,w=b+p;m^=-1;for(var d=b;d<w;d++)m=m>>>8^f[255&(m^h.charCodeAt(d))];return-1^m}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(s,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(s,n,i){var a=null;a=typeof Promise<"u"?Promise:s("lie"),n.exports={Promise:a}},{lie:37}],7:[function(s,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=s("pako"),o=s("./utils"),c=s("./stream/GenericWorker"),m=a?"uint8array":"array";function h(p,b){c.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=b,this.meta={}}i.magic="\b\0",o.inherits(h,c),h.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(m,p.data),!1)},h.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(b){p.push({data:b,meta:p.meta})}},i.compressWorker=function(p){return new h("Deflate",p)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,n,i){function a(f,w){var d,x="";for(d=0;d<w;d++)x+=String.fromCharCode(255&f),f>>>=8;return x}function l(f,w,d,x,g,u){var j,N,S=f.file,A=f.compression,T=u!==m.utf8encode,L=o.transformTo("string",u(S.name)),O=o.transformTo("string",m.utf8encode(S.name)),U=S.comment,Y=o.transformTo("string",u(U)),C=o.transformTo("string",m.utf8encode(U)),R=O.length!==S.name.length,y=C.length!==U.length,D="",Q="",M="",Z=S.dir,H=S.date,ne={crc32:0,compressedSize:0,uncompressedSize:0};w&&!d||(ne.crc32=f.crc32,ne.compressedSize=f.compressedSize,ne.uncompressedSize=f.uncompressedSize);var z=0;w&&(z|=8),T||!R&&!y||(z|=2048);var F=0,ie=0;Z&&(F|=16),g==="UNIX"?(ie=798,F|=function(ee,je){var Ce=ee;return ee||(Ce=je?16893:33204),(65535&Ce)<<16}(S.unixPermissions,Z)):(ie=20,F|=function(ee){return 63&(ee||0)}(S.dosPermissions)),j=H.getUTCHours(),j<<=6,j|=H.getUTCMinutes(),j<<=5,j|=H.getUTCSeconds()/2,N=H.getUTCFullYear()-1980,N<<=4,N|=H.getUTCMonth()+1,N<<=5,N|=H.getUTCDate(),R&&(Q=a(1,1)+a(h(L),4)+O,D+="up"+a(Q.length,2)+Q),y&&(M=a(1,1)+a(h(Y),4)+C,D+="uc"+a(M.length,2)+M);var re="";return re+=`
\0`,re+=a(z,2),re+=A.magic,re+=a(j,2),re+=a(N,2),re+=a(ne.crc32,4),re+=a(ne.compressedSize,4),re+=a(ne.uncompressedSize,4),re+=a(L.length,2),re+=a(D.length,2),{fileRecord:p.LOCAL_FILE_HEADER+re+L+D,dirRecord:p.CENTRAL_FILE_HEADER+a(ie,2)+re+a(Y.length,2)+"\0\0\0\0"+a(F,4)+a(x,4)+L+D+Y}}var o=s("../utils"),c=s("../stream/GenericWorker"),m=s("../utf8"),h=s("../crc32"),p=s("../signature");function b(f,w,d,x){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=d,this.encodeFileName=x,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(b,c),b.prototype.push=function(f){var w=f.meta.percent||0,d=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,c.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:d?(w+100*(d-x-1))/d:100}}))},b.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var w=this.streamFiles&&!f.file.dir;if(w){var d=l(f,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(f){this.accumulate=!1;var w=this.streamFiles&&!f.file.dir,d=l(f,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),w)this.push({data:function(x){return p.DATA_DESCRIPTOR+a(x.crc32,4)+a(x.compressedSize,4)+a(x.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var f=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var d=this.bytesWritten-f,x=function(g,u,j,N,S){var A=o.transformTo("string",S(N));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(g,2)+a(g,2)+a(u,4)+a(j,4)+a(A.length,2)+A}(this.dirRecords.length,d,f,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(f){this._sources.push(f);var w=this;return f.on("data",function(d){w.processChunk(d)}),f.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),f.on("error",function(d){w.error(d)}),this},b.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(f){var w=this._sources;if(!c.prototype.error.call(this,f))return!1;for(var d=0;d<w.length;d++)try{w[d].error(f)}catch{}return!0},b.prototype.lock=function(){c.prototype.lock.call(this);for(var f=this._sources,w=0;w<f.length;w++)f[w].lock()},n.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,n,i){var a=s("../compressions"),l=s("./ZipFileWorker");i.generateWorker=function(o,c,m){var h=new l(c.streamFiles,m,c.platform,c.encodeFileName),p=0;try{o.forEach(function(b,f){p++;var w=function(u,j){var N=u||j,S=a[N];if(!S)throw new Error(N+" is not a valid compression method !");return S}(f.options.compression,c.compression),d=f.options.compressionOptions||c.compressionOptions||{},x=f.dir,g=f.date;f._compressWorker(w,d).withStreamInfo("file",{name:b,dir:x,date:g,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(h)}),h.entriesCount=p}catch(b){h.error(b)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,n,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new a;for(var o in this)typeof this[o]!="function"&&(l[o]=this[o]);return l}}(a.prototype=s("./object")).loadAsync=s("./load"),a.support=s("./support"),a.defaults=s("./defaults"),a.version="3.10.1",a.loadAsync=function(l,o){return new a().loadAsync(l,o)},a.external=s("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,n,i){var a=s("./utils"),l=s("./external"),o=s("./utf8"),c=s("./zipEntries"),m=s("./stream/Crc32Probe"),h=s("./nodejsUtils");function p(b){return new l.Promise(function(f,w){var d=b.decompressed.getContentWorker().pipe(new m);d.on("error",function(x){w(x)}).on("end",function(){d.streamInfo.crc32!==b.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}n.exports=function(b,f){var w=this;return f=a.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),h.isNode&&h.isStream(b)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",b,!0,f.optimizedBinaryString,f.base64).then(function(d){var x=new c(f);return x.load(d),x}).then(function(d){var x=[l.Promise.resolve(d)],g=d.files;if(f.checkCRC32)for(var u=0;u<g.length;u++)x.push(p(g[u]));return l.Promise.all(x)}).then(function(d){for(var x=d.shift(),g=x.files,u=0;u<g.length;u++){var j=g[u],N=j.fileNameStr,S=a.resolve(j.fileNameStr);w.file(S,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:f.createFolders}),j.dir||(w.file(S).unsafeOriginalName=N)}return x.zipComment.length&&(w.comment=x.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,n,i){var a=s("../utils"),l=s("../stream/GenericWorker");function o(c,m){l.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(m)}a.inherits(o,l),o.prototype._bindStream=function(c){var m=this;(this._stream=c).pause(),c.on("data",function(h){m.push({data:h,meta:{percent:0}})}).on("error",function(h){m.isPaused?this.generatedError=h:m.error(h)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},o.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,n,i){var a=s("readable-stream").Readable;function l(o,c,m){a.call(this,c),this._helper=o;var h=this;o.on("data",function(p,b){h.push(p)||h._helper.pause(),m&&m(b)}).on("error",function(p){h.emit("error",p)}).on("end",function(){h.push(null)})}s("../utils").inherits(l,a),l.prototype._read=function(){this._helper.resume()},n.exports=l},{"../utils":32,"readable-stream":16}],14:[function(s,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,l);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,l)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var l=new Buffer(a);return l.fill(0),l},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(s,n,i){function a(S,A,T){var L,O=o.getTypeOf(A),U=o.extend(T||{},h);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(S=g(S)),U.createFolders&&(L=x(S))&&u.call(this,L,!0);var Y=O==="string"&&U.binary===!1&&U.base64===!1;T&&T.binary!==void 0||(U.binary=!Y),(A instanceof p&&A.uncompressedSize===0||U.dir||!A||A.length===0)&&(U.base64=!1,U.binary=!0,A="",U.compression="STORE",O="string");var C=null;C=A instanceof p||A instanceof c?A:w.isNode&&w.isStream(A)?new d(S,A):o.prepareContent(S,A,U.binary,U.optimizedBinaryString,U.base64);var R=new b(S,C,U);this.files[S]=R}var l=s("./utf8"),o=s("./utils"),c=s("./stream/GenericWorker"),m=s("./stream/StreamHelper"),h=s("./defaults"),p=s("./compressedObject"),b=s("./zipObject"),f=s("./generate"),w=s("./nodejsUtils"),d=s("./nodejs/NodejsStreamInputAdapter"),x=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var A=S.lastIndexOf("/");return 0<A?S.substring(0,A):""},g=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},u=function(S,A){return A=A!==void 0?A:h.createFolders,S=g(S),this.files[S]||a.call(this,S,null,{dir:!0,createFolders:A}),this.files[S]};function j(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var A,T,L;for(A in this.files)L=this.files[A],(T=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&S(T,L)},filter:function(S){var A=[];return this.forEach(function(T,L){S(T,L)&&A.push(L)}),A},file:function(S,A,T){if(arguments.length!==1)return S=this.root+S,a.call(this,S,A,T),this;if(j(S)){var L=S;return this.filter(function(U,Y){return!Y.dir&&L.test(U)})}var O=this.files[this.root+S];return O&&!O.dir?O:null},folder:function(S){if(!S)return this;if(j(S))return this.filter(function(O,U){return U.dir&&S.test(O)});var A=this.root+S,T=u.call(this,A),L=this.clone();return L.root=T.name,L},remove:function(S){S=this.root+S;var A=this.files[S];if(A||(S.slice(-1)!=="/"&&(S+="/"),A=this.files[S]),A&&!A.dir)delete this.files[S];else for(var T=this.filter(function(O,U){return U.name.slice(0,S.length)===S}),L=0;L<T.length;L++)delete this.files[T[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var A,T={};try{if((T=o.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");o.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var L=T.comment||this.comment||"";A=f.generateWorker(this,T,L)}catch(O){(A=new c("error")).error(O)}return new m(A,T.type||"string",T.mimeType)},generateAsync:function(S,A){return this.generateInternalStream(S).accumulate(A)},generateNodeStream:function(S,A){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(A)}};n.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,n,i){n.exports=s("stream")},{stream:void 0}],17:[function(s,n,i){var a=s("./DataReader");function l(o){a.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}s("../utils").inherits(l,a),l.prototype.byteAt=function(o){return this.data[this.zero+o]},l.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),m=o.charCodeAt(1),h=o.charCodeAt(2),p=o.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===c&&this.data[b+1]===m&&this.data[b+2]===h&&this.data[b+3]===p)return b-this.zero;return-1},l.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),m=o.charCodeAt(1),h=o.charCodeAt(2),p=o.charCodeAt(3),b=this.readData(4);return c===b[0]&&m===b[1]&&h===b[2]&&p===b[3]},l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./DataReader":18}],18:[function(s,n,i){var a=s("../utils");function l(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,m=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)m=(m<<8)+this.byteAt(c);return this.index+=o,m},readString:function(o){return a.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=l},{"../utils":32}],19:[function(s,n,i){var a=s("./Uint8ArrayReader");function l(o){a.call(this,o)}s("../utils").inherits(l,a),l.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,n,i){var a=s("./DataReader");function l(o){a.call(this,o)}s("../utils").inherits(l,a),l.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},l.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},l.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},l.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./DataReader":18}],21:[function(s,n,i){var a=s("./ArrayReader");function l(o){a.call(this,o)}s("../utils").inherits(l,a),l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(s,n,i){var a=s("../utils"),l=s("../support"),o=s("./ArrayReader"),c=s("./StringReader"),m=s("./NodeBufferReader"),h=s("./Uint8ArrayReader");n.exports=function(p){var b=a.getTypeOf(p);return a.checkSupport(b),b!=="string"||l.uint8array?b==="nodebuffer"?new m(p):l.uint8array?new h(a.transformTo("uint8array",p)):new o(a.transformTo("array",p)):new c(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,n,i){var a=s("./GenericWorker"),l=s("../utils");function o(c){a.call(this,"ConvertWorker to "+c),this.destType=c}l.inherits(o,a),o.prototype.processChunk=function(c){this.push({data:l.transformTo(this.destType,c.data),meta:c.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(s,n,i){var a=s("./GenericWorker"),l=s("../crc32");function o(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(o,a),o.prototype.processChunk=function(c){this.streamInfo.crc32=l(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,n,i){var a=s("../utils"),l=s("./GenericWorker");function o(c){l.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}a.inherits(o,l),o.prototype.processChunk=function(c){if(c){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+c.data.length}l.prototype.processChunk.call(this,c)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(s,n,i){var a=s("../utils"),l=s("./GenericWorker");function o(c){l.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(h){m.dataIsReady=!0,m.data=h,m.max=h&&h.length||0,m.type=a.getTypeOf(h),m.isPaused||m._tickAndRepeat()},function(h){m.error(h)})}a.inherits(o,l),o.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,m);break;case"uint8array":c=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":c=this.data.slice(this.index,m)}return this.index=m,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(s,n,i){function a(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,o){return this._listeners[l].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,o){if(this._listeners[l])for(var c=0;c<this._listeners[l].length;c++)this._listeners[l][c].call(this,o)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var o=this;return l.on("data",function(c){o.processChunk(c)}),l.on("end",function(){o.end()}),l.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,o){return this.extraStreamInfo[l]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},n.exports=a},{}],29:[function(s,n,i){var a=s("../utils"),l=s("./ConvertWorker"),o=s("./GenericWorker"),c=s("../base64"),m=s("../support"),h=s("../external"),p=null;if(m.nodestream)try{p=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(w,d){return new h.Promise(function(x,g){var u=[],j=w._internalType,N=w._outputType,S=w._mimeType;w.on("data",function(A,T){u.push(A),d&&d(T)}).on("error",function(A){u=[],g(A)}).on("end",function(){try{var A=function(T,L,O){switch(T){case"blob":return a.newBlob(a.transformTo("arraybuffer",L),O);case"base64":return c.encode(L);default:return a.transformTo(T,L)}}(N,function(T,L){var O,U=0,Y=null,C=0;for(O=0;O<L.length;O++)C+=L[O].length;switch(T){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(Y=new Uint8Array(C),O=0;O<L.length;O++)Y.set(L[O],U),U+=L[O].length;return Y;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+T+"'")}}(j,u),S);x(A)}catch(T){g(T)}u=[]}).resume()})}function f(w,d,x){var g=d;switch(d){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=d,this._mimeType=x,a.checkSupport(g),this._worker=w.pipe(new l(g)),w.lock()}catch(u){this._worker=new o("error"),this._worker.error(u)}}f.prototype={accumulate:function(w){return b(this,w)},on:function(w,d){var x=this;return w==="data"?this._worker.on(w,function(g){d.call(x,g.data,g.meta)}):this._worker.on(w,function(){a.delay(d,arguments,x)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},w)}},n.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(a),i.blob=l.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!s("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(s,n,i){for(var a=s("./utils"),l=s("./support"),o=s("./nodejsUtils"),c=s("./stream/GenericWorker"),m=new Array(256),h=0;h<256;h++)m[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;m[254]=m[254]=1;function p(){c.call(this,"utf-8 decode"),this.leftOver=null}function b(){c.call(this,"utf-8 encode")}i.utf8encode=function(f){return l.nodebuffer?o.newBufferFrom(f,"utf-8"):function(w){var d,x,g,u,j,N=w.length,S=0;for(u=0;u<N;u++)(64512&(x=w.charCodeAt(u)))==55296&&u+1<N&&(64512&(g=w.charCodeAt(u+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),u++),S+=x<128?1:x<2048?2:x<65536?3:4;for(d=l.uint8array?new Uint8Array(S):new Array(S),u=j=0;j<S;u++)(64512&(x=w.charCodeAt(u)))==55296&&u+1<N&&(64512&(g=w.charCodeAt(u+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),u++),x<128?d[j++]=x:(x<2048?d[j++]=192|x>>>6:(x<65536?d[j++]=224|x>>>12:(d[j++]=240|x>>>18,d[j++]=128|x>>>12&63),d[j++]=128|x>>>6&63),d[j++]=128|63&x);return d}(f)},i.utf8decode=function(f){return l.nodebuffer?a.transformTo("nodebuffer",f).toString("utf-8"):function(w){var d,x,g,u,j=w.length,N=new Array(2*j);for(d=x=0;d<j;)if((g=w[d++])<128)N[x++]=g;else if(4<(u=m[g]))N[x++]=65533,d+=u-1;else{for(g&=u===2?31:u===3?15:7;1<u&&d<j;)g=g<<6|63&w[d++],u--;1<u?N[x++]=65533:g<65536?N[x++]=g:(g-=65536,N[x++]=55296|g>>10&1023,N[x++]=56320|1023&g)}return N.length!==x&&(N.subarray?N=N.subarray(0,x):N.length=x),a.applyFromCharCode(N)}(f=a.transformTo(l.uint8array?"uint8array":"array",f))},a.inherits(p,c),p.prototype.processChunk=function(f){var w=a.transformTo(l.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var d=w;(w=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),w.set(d,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var x=function(u,j){var N;for((j=j||u.length)>u.length&&(j=u.length),N=j-1;0<=N&&(192&u[N])==128;)N--;return N<0||N===0?j:N+m[u[N]]>j?N:j}(w),g=w;x!==w.length&&(l.uint8array?(g=w.subarray(0,x),this.leftOver=w.subarray(x,w.length)):(g=w.slice(0,x),this.leftOver=w.slice(x,w.length))),this.push({data:i.utf8decode(g),meta:f.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,a.inherits(b,c),b.prototype.processChunk=function(f){this.push({data:i.utf8encode(f.data),meta:f.meta})},i.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,n,i){var a=s("./support"),l=s("./base64"),o=s("./nodejsUtils"),c=s("./external");function m(d){return d}function h(d,x){for(var g=0;g<d.length;++g)x[g]=255&d.charCodeAt(g);return x}s("setimmediate"),i.newBlob=function(d,x){i.checkSupport("blob");try{return new Blob([d],{type:x})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(d),g.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(d,x,g){var u=[],j=0,N=d.length;if(N<=g)return String.fromCharCode.apply(null,d);for(;j<N;)x==="array"||x==="nodebuffer"?u.push(String.fromCharCode.apply(null,d.slice(j,Math.min(j+g,N)))):u.push(String.fromCharCode.apply(null,d.subarray(j,Math.min(j+g,N)))),j+=g;return u.join("")},stringifyByChar:function(d){for(var x="",g=0;g<d.length;g++)x+=String.fromCharCode(d[g]);return x},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function b(d){var x=65536,g=i.getTypeOf(d),u=!0;if(g==="uint8array"?u=p.applyCanBeUsed.uint8array:g==="nodebuffer"&&(u=p.applyCanBeUsed.nodebuffer),u)for(;1<x;)try{return p.stringifyByChunk(d,g,x)}catch{x=Math.floor(x/2)}return p.stringifyByChar(d)}function f(d,x){for(var g=0;g<d.length;g++)x[g]=d[g];return x}i.applyFromCharCode=b;var w={};w.string={string:m,array:function(d){return h(d,new Array(d.length))},arraybuffer:function(d){return w.string.uint8array(d).buffer},uint8array:function(d){return h(d,new Uint8Array(d.length))},nodebuffer:function(d){return h(d,o.allocBuffer(d.length))}},w.array={string:b,array:m,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return o.newBufferFrom(d)}},w.arraybuffer={string:function(d){return b(new Uint8Array(d))},array:function(d){return f(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:m,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return o.newBufferFrom(new Uint8Array(d))}},w.uint8array={string:b,array:function(d){return f(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:m,nodebuffer:function(d){return o.newBufferFrom(d)}},w.nodebuffer={string:b,array:function(d){return f(d,new Array(d.length))},arraybuffer:function(d){return w.nodebuffer.uint8array(d).buffer},uint8array:function(d){return f(d,new Uint8Array(d.length))},nodebuffer:m},i.transformTo=function(d,x){if(x=x||"",!d)return x;i.checkSupport(d);var g=i.getTypeOf(x);return w[g][d](x)},i.resolve=function(d){for(var x=d.split("/"),g=[],u=0;u<x.length;u++){var j=x[u];j==="."||j===""&&u!==0&&u!==x.length-1||(j===".."?g.pop():g.push(j))}return g.join("/")},i.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":a.nodebuffer&&o.isBuffer(d)?"nodebuffer":a.uint8array&&d instanceof Uint8Array?"uint8array":a.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(d){if(!a[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(d){var x,g,u="";for(g=0;g<(d||"").length;g++)u+="\\x"+((x=d.charCodeAt(g))<16?"0":"")+x.toString(16).toUpperCase();return u},i.delay=function(d,x,g){setImmediate(function(){d.apply(g||null,x||[])})},i.inherits=function(d,x){function g(){}g.prototype=x.prototype,d.prototype=new g},i.extend=function(){var d,x,g={};for(d=0;d<arguments.length;d++)for(x in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],x)&&g[x]===void 0&&(g[x]=arguments[d][x]);return g},i.prepareContent=function(d,x,g,u,j){return c.Promise.resolve(x).then(function(N){return a.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new c.Promise(function(S,A){var T=new FileReader;T.onload=function(L){S(L.target.result)},T.onerror=function(L){A(L.target.error)},T.readAsArrayBuffer(N)}):N}).then(function(N){var S=i.getTypeOf(N);return S?(S==="arraybuffer"?N=i.transformTo("uint8array",N):S==="string"&&(j?N=l.decode(N):g&&u!==!0&&(N=function(A){return h(A,a.uint8array?new Uint8Array(A.length):new Array(A.length))}(N))),N):c.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,n,i){var a=s("./reader/readerFor"),l=s("./utils"),o=s("./signature"),c=s("./zipEntry"),m=s("./support");function h(p){this.files=[],this.loadOptions=p}h.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(b)+", expected "+l.pretty(p)+")")}},isSignature:function(p,b){var f=this.reader.index;this.reader.setIndex(p);var w=this.reader.readString(4)===b;return this.reader.setIndex(f),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),b=m.uint8array?"uint8array":"array",f=l.transformTo(b,p);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,b,f,w=this.zip64EndOfCentralSize-44;0<w;)p=this.reader.readInt(2),b=this.reader.readInt(4),f=this.reader.readData(b),this.zip64ExtensibleData[p]={id:p,length:b,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,b;for(p=0;p<this.files.length;p++)b=this.files[p],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(p=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var b=p;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var w=b-f;if(0<w)this.isSignature(b,o.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(p){this.reader=a(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,n,i){var a=s("./reader/readerFor"),l=s("./utils"),o=s("./compressedObject"),c=s("./crc32"),m=s("./utf8"),h=s("./compressions"),p=s("./support");function b(f,w){this.options=f,this.loadOptions=w}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var w,d;if(f.skip(22),this.fileNameLength=f.readInt(2),d=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(x){for(var g in h)if(Object.prototype.hasOwnProperty.call(h,g)&&h[g].magic===x)return h[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,w,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var w=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(w),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=a(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var w,d,x,g=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<g;)w=f.readInt(2),d=f.readInt(2),x=f.readData(d),this.extraFields[w]={id:w,length:d,value:x};f.setIndex(g)},handleUTF8:function(){var f=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var d=l.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var g=l.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var w=a(f.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:m.utf8decode(w.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var w=a(f.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:m.utf8decode(w.readData(f.length-5))}return null}},n.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,n,i){function a(w,d,x){this.name=w,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=d,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var l=s("./stream/StreamHelper"),o=s("./stream/DataWorker"),c=s("./utf8"),m=s("./compressedObject"),h=s("./stream/GenericWorker");a.prototype={internalStream:function(w){var d=null,x="string";try{if(!w)throw new Error("No output type specified.");var g=(x=w.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),d=this._decompressWorker();var u=!this._dataBinary;u&&!g&&(d=d.pipe(new c.Utf8EncodeWorker)),!u&&g&&(d=d.pipe(new c.Utf8DecodeWorker))}catch(j){(d=new h("error")).error(j)}return new l(d,x,"")},async:function(w,d){return this.internalStream(w).accumulate(d)},nodeStream:function(w,d){return this.internalStream(w||"nodebuffer").toNodejsStream(d)},_compressWorker:function(w,d){if(this._data instanceof m&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new c.Utf8EncodeWorker)),m.createWorkerFrom(x,w,d)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof h?this._data:new o(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<p.length;f++)a.prototype[p[f]]=b;n.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,n,i){(function(a){var l,o,c=a.MutationObserver||a.WebKitMutationObserver;if(c){var m=0,h=new c(w),p=a.document.createTextNode("");h.observe(p,{characterData:!0}),l=function(){p.data=m=++m%2}}else if(a.setImmediate||a.MessageChannel===void 0)l="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var d=a.document.createElement("script");d.onreadystatechange=function(){w(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},a.document.documentElement.appendChild(d)}:function(){setTimeout(w,0)};else{var b=new a.MessageChannel;b.port1.onmessage=w,l=function(){b.port2.postMessage(0)}}var f=[];function w(){var d,x;o=!0;for(var g=f.length;g;){for(x=f,f=[],d=-1;++d<g;)x[d]();g=f.length}o=!1}n.exports=function(d){f.push(d)!==1||o||l()}}).call(this,typeof vr<"u"?vr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,n,i){var a=s("immediate");function l(){}var o={},c=["REJECTED"],m=["FULFILLED"],h=["PENDING"];function p(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,g!==l&&d(this,g)}function b(g,u,j){this.promise=g,typeof u=="function"&&(this.onFulfilled=u,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function f(g,u,j){a(function(){var N;try{N=u(j)}catch(S){return o.reject(g,S)}N===g?o.reject(g,new TypeError("Cannot resolve promise with itself")):o.resolve(g,N)})}function w(g){var u=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof u=="function")return function(){u.apply(g,arguments)}}function d(g,u){var j=!1;function N(T){j||(j=!0,o.reject(g,T))}function S(T){j||(j=!0,o.resolve(g,T))}var A=x(function(){u(S,N)});A.status==="error"&&N(A.value)}function x(g,u){var j={};try{j.value=g(u),j.status="success"}catch(N){j.status="error",j.value=N}return j}(n.exports=p).prototype.finally=function(g){if(typeof g!="function")return this;var u=this.constructor;return this.then(function(j){return u.resolve(g()).then(function(){return j})},function(j){return u.resolve(g()).then(function(){throw j})})},p.prototype.catch=function(g){return this.then(null,g)},p.prototype.then=function(g,u){if(typeof g!="function"&&this.state===m||typeof u!="function"&&this.state===c)return this;var j=new this.constructor(l);return this.state!==h?f(j,this.state===m?g:u,this.outcome):this.queue.push(new b(j,g,u)),j},b.prototype.callFulfilled=function(g){o.resolve(this.promise,g)},b.prototype.otherCallFulfilled=function(g){f(this.promise,this.onFulfilled,g)},b.prototype.callRejected=function(g){o.reject(this.promise,g)},b.prototype.otherCallRejected=function(g){f(this.promise,this.onRejected,g)},o.resolve=function(g,u){var j=x(w,u);if(j.status==="error")return o.reject(g,j.value);var N=j.value;if(N)d(g,N);else{g.state=m,g.outcome=u;for(var S=-1,A=g.queue.length;++S<A;)g.queue[S].callFulfilled(u)}return g},o.reject=function(g,u){g.state=c,g.outcome=u;for(var j=-1,N=g.queue.length;++j<N;)g.queue[j].callRejected(u);return g},p.resolve=function(g){return g instanceof this?g:o.resolve(new this(l),g)},p.reject=function(g){var u=new this(l);return o.reject(u,g)},p.all=function(g){var u=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=g.length,N=!1;if(!j)return this.resolve([]);for(var S=new Array(j),A=0,T=-1,L=new this(l);++T<j;)O(g[T],T);return L;function O(U,Y){u.resolve(U).then(function(C){S[Y]=C,++A!==j||N||(N=!0,o.resolve(L,S))},function(C){N||(N=!0,o.reject(L,C))})}},p.race=function(g){var u=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=g.length,N=!1;if(!j)return this.resolve([]);for(var S=-1,A=new this(l);++S<j;)T=g[S],u.resolve(T).then(function(L){N||(N=!0,o.resolve(A,L))},function(L){N||(N=!0,o.reject(A,L))});var T;return A}},{immediate:36}],38:[function(s,n,i){var a={};(0,s("./lib/utils/common").assign)(a,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),n.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,n,i){var a=s("./zlib/deflate"),l=s("./utils/common"),o=s("./utils/strings"),c=s("./zlib/messages"),m=s("./zlib/zstream"),h=Object.prototype.toString,p=0,b=-1,f=0,w=8;function d(g){if(!(this instanceof d))return new d(g);this.options=l.assign({level:b,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},g||{});var u=this.options;u.raw&&0<u.windowBits?u.windowBits=-u.windowBits:u.gzip&&0<u.windowBits&&u.windowBits<16&&(u.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var j=a.deflateInit2(this.strm,u.level,u.method,u.windowBits,u.memLevel,u.strategy);if(j!==p)throw new Error(c[j]);if(u.header&&a.deflateSetHeader(this.strm,u.header),u.dictionary){var N;if(N=typeof u.dictionary=="string"?o.string2buf(u.dictionary):h.call(u.dictionary)==="[object ArrayBuffer]"?new Uint8Array(u.dictionary):u.dictionary,(j=a.deflateSetDictionary(this.strm,N))!==p)throw new Error(c[j]);this._dict_set=!0}}function x(g,u){var j=new d(u);if(j.push(g,!0),j.err)throw j.msg||c[j.err];return j.result}d.prototype.push=function(g,u){var j,N,S=this.strm,A=this.options.chunkSize;if(this.ended)return!1;N=u===~~u?u:u===!0?4:0,typeof g=="string"?S.input=o.string2buf(g):h.call(g)==="[object ArrayBuffer]"?S.input=new Uint8Array(g):S.input=g,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new l.Buf8(A),S.next_out=0,S.avail_out=A),(j=a.deflate(S,N))!==1&&j!==p)return this.onEnd(j),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(l.shrinkBuf(S.output,S.next_out))):this.onData(l.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&j!==1);return N===4?(j=a.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===p):N!==2||(this.onEnd(p),!(S.avail_out=0))},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Deflate=d,i.deflate=x,i.deflateRaw=function(g,u){return(u=u||{}).raw=!0,x(g,u)},i.gzip=function(g,u){return(u=u||{}).gzip=!0,x(g,u)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,n,i){var a=s("./zlib/inflate"),l=s("./utils/common"),o=s("./utils/strings"),c=s("./zlib/constants"),m=s("./zlib/messages"),h=s("./zlib/zstream"),p=s("./zlib/gzheader"),b=Object.prototype.toString;function f(d){if(!(this instanceof f))return new f(d);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},d||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||d&&d.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var g=a.inflateInit2(this.strm,x.windowBits);if(g!==c.Z_OK)throw new Error(m[g]);this.header=new p,a.inflateGetHeader(this.strm,this.header)}function w(d,x){var g=new f(x);if(g.push(d,!0),g.err)throw g.msg||m[g.err];return g.result}f.prototype.push=function(d,x){var g,u,j,N,S,A,T=this.strm,L=this.options.chunkSize,O=this.options.dictionary,U=!1;if(this.ended)return!1;u=x===~~x?x:x===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof d=="string"?T.input=o.binstring2buf(d):b.call(d)==="[object ArrayBuffer]"?T.input=new Uint8Array(d):T.input=d,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new l.Buf8(L),T.next_out=0,T.avail_out=L),(g=a.inflate(T,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&O&&(A=typeof O=="string"?o.string2buf(O):b.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,g=a.inflateSetDictionary(this.strm,A)),g===c.Z_BUF_ERROR&&U===!0&&(g=c.Z_OK,U=!1),g!==c.Z_STREAM_END&&g!==c.Z_OK)return this.onEnd(g),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&g!==c.Z_STREAM_END&&(T.avail_in!==0||u!==c.Z_FINISH&&u!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=o.utf8border(T.output,T.next_out),N=T.next_out-j,S=o.buf2string(T.output,j),T.next_out=N,T.avail_out=L-N,N&&l.arraySet(T.output,T.output,j,N,0),this.onData(S)):this.onData(l.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(U=!0)}while((0<T.avail_in||T.avail_out===0)&&g!==c.Z_STREAM_END);return g===c.Z_STREAM_END&&(u=c.Z_FINISH),u===c.Z_FINISH?(g=a.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===c.Z_OK):u!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(T.avail_out=0))},f.prototype.onData=function(d){this.chunks.push(d)},f.prototype.onEnd=function(d){d===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},i.Inflate=f,i.inflate=w,i.inflateRaw=function(d,x){return(x=x||{}).raw=!0,w(d,x)},i.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var h=m.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var p in h)h.hasOwnProperty(p)&&(c[p]=h[p])}}return c},i.shrinkBuf=function(c,m){return c.length===m?c:c.subarray?c.subarray(0,m):(c.length=m,c)};var l={arraySet:function(c,m,h,p,b){if(m.subarray&&c.subarray)c.set(m.subarray(h,h+p),b);else for(var f=0;f<p;f++)c[b+f]=m[h+f]},flattenChunks:function(c){var m,h,p,b,f,w;for(m=p=0,h=c.length;m<h;m++)p+=c[m].length;for(w=new Uint8Array(p),m=b=0,h=c.length;m<h;m++)f=c[m],w.set(f,b),b+=f.length;return w}},o={arraySet:function(c,m,h,p,b){for(var f=0;f<p;f++)c[b+f]=m[h+f]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,l)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(a)},{}],42:[function(s,n,i){var a=s("./common"),l=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new a.Buf8(256),m=0;m<256;m++)c[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function h(p,b){if(b<65537&&(p.subarray&&o||!p.subarray&&l))return String.fromCharCode.apply(null,a.shrinkBuf(p,b));for(var f="",w=0;w<b;w++)f+=String.fromCharCode(p[w]);return f}c[254]=c[254]=1,i.string2buf=function(p){var b,f,w,d,x,g=p.length,u=0;for(d=0;d<g;d++)(64512&(f=p.charCodeAt(d)))==55296&&d+1<g&&(64512&(w=p.charCodeAt(d+1)))==56320&&(f=65536+(f-55296<<10)+(w-56320),d++),u+=f<128?1:f<2048?2:f<65536?3:4;for(b=new a.Buf8(u),d=x=0;x<u;d++)(64512&(f=p.charCodeAt(d)))==55296&&d+1<g&&(64512&(w=p.charCodeAt(d+1)))==56320&&(f=65536+(f-55296<<10)+(w-56320),d++),f<128?b[x++]=f:(f<2048?b[x++]=192|f>>>6:(f<65536?b[x++]=224|f>>>12:(b[x++]=240|f>>>18,b[x++]=128|f>>>12&63),b[x++]=128|f>>>6&63),b[x++]=128|63&f);return b},i.buf2binstring=function(p){return h(p,p.length)},i.binstring2buf=function(p){for(var b=new a.Buf8(p.length),f=0,w=b.length;f<w;f++)b[f]=p.charCodeAt(f);return b},i.buf2string=function(p,b){var f,w,d,x,g=b||p.length,u=new Array(2*g);for(f=w=0;f<g;)if((d=p[f++])<128)u[w++]=d;else if(4<(x=c[d]))u[w++]=65533,f+=x-1;else{for(d&=x===2?31:x===3?15:7;1<x&&f<g;)d=d<<6|63&p[f++],x--;1<x?u[w++]=65533:d<65536?u[w++]=d:(d-=65536,u[w++]=55296|d>>10&1023,u[w++]=56320|1023&d)}return h(u,w)},i.utf8border=function(p,b){var f;for((b=b||p.length)>p.length&&(b=p.length),f=b-1;0<=f&&(192&p[f])==128;)f--;return f<0||f===0?b:f+c[p[f]]>b?f:b}},{"./common":41}],43:[function(s,n,i){n.exports=function(a,l,o,c){for(var m=65535&a|0,h=a>>>16&65535|0,p=0;o!==0;){for(o-=p=2e3<o?2e3:o;h=h+(m=m+l[c++]|0)|0,--p;);m%=65521,h%=65521}return m|h<<16|0}},{}],44:[function(s,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,n,i){var a=function(){for(var l,o=[],c=0;c<256;c++){l=c;for(var m=0;m<8;m++)l=1&l?3988292384^l>>>1:l>>>1;o[c]=l}return o}();n.exports=function(l,o,c,m){var h=a,p=m+c;l^=-1;for(var b=m;b<p;b++)l=l>>>8^h[255&(l^o[b])];return-1^l}},{}],46:[function(s,n,i){var a,l=s("../utils/common"),o=s("./trees"),c=s("./adler32"),m=s("./crc32"),h=s("./messages"),p=0,b=4,f=0,w=-2,d=-1,x=4,g=2,u=8,j=9,N=286,S=30,A=19,T=2*N+1,L=15,O=3,U=258,Y=U+O+1,C=42,R=113,y=1,D=2,Q=3,M=4;function Z(v,V){return v.msg=h[V],V}function H(v){return(v<<1)-(4<v?9:0)}function ne(v){for(var V=v.length;0<=--V;)v[V]=0}function z(v){var V=v.state,$=V.pending;$>v.avail_out&&($=v.avail_out),$!==0&&(l.arraySet(v.output,V.pending_buf,V.pending_out,$,v.next_out),v.next_out+=$,V.pending_out+=$,v.total_out+=$,v.avail_out-=$,V.pending-=$,V.pending===0&&(V.pending_out=0))}function F(v,V){o._tr_flush_block(v,0<=v.block_start?v.block_start:-1,v.strstart-v.block_start,V),v.block_start=v.strstart,z(v.strm)}function ie(v,V){v.pending_buf[v.pending++]=V}function re(v,V){v.pending_buf[v.pending++]=V>>>8&255,v.pending_buf[v.pending++]=255&V}function ee(v,V){var $,E,_=v.max_chain_length,P=v.strstart,W=v.prev_length,G=v.nice_match,I=v.strstart>v.w_size-Y?v.strstart-(v.w_size-Y):0,X=v.window,se=v.w_mask,J=v.prev,ce=v.strstart+U,ae=X[P+W-1],K=X[P+W];v.prev_length>=v.good_match&&(_>>=2),G>v.lookahead&&(G=v.lookahead);do if(X[($=V)+W]===K&&X[$+W-1]===ae&&X[$]===X[P]&&X[++$]===X[P+1]){P+=2,$++;do;while(X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&P<ce);if(E=U-(ce-P),P=ce-U,W<E){if(v.match_start=V,G<=(W=E))break;ae=X[P+W-1],K=X[P+W]}}while((V=J[V&se])>I&&--_!=0);return W<=v.lookahead?W:v.lookahead}function je(v){var V,$,E,_,P,W,G,I,X,se,J=v.w_size;do{if(_=v.window_size-v.lookahead-v.strstart,v.strstart>=J+(J-Y)){for(l.arraySet(v.window,v.window,J,J,0),v.match_start-=J,v.strstart-=J,v.block_start-=J,V=$=v.hash_size;E=v.head[--V],v.head[V]=J<=E?E-J:0,--$;);for(V=$=J;E=v.prev[--V],v.prev[V]=J<=E?E-J:0,--$;);_+=J}if(v.strm.avail_in===0)break;if(W=v.strm,G=v.window,I=v.strstart+v.lookahead,X=_,se=void 0,se=W.avail_in,X<se&&(se=X),$=se===0?0:(W.avail_in-=se,l.arraySet(G,W.input,W.next_in,se,I),W.state.wrap===1?W.adler=c(W.adler,G,se,I):W.state.wrap===2&&(W.adler=m(W.adler,G,se,I)),W.next_in+=se,W.total_in+=se,se),v.lookahead+=$,v.lookahead+v.insert>=O)for(P=v.strstart-v.insert,v.ins_h=v.window[P],v.ins_h=(v.ins_h<<v.hash_shift^v.window[P+1])&v.hash_mask;v.insert&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[P+O-1])&v.hash_mask,v.prev[P&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=P,P++,v.insert--,!(v.lookahead+v.insert<O)););}while(v.lookahead<Y&&v.strm.avail_in!==0)}function Ce(v,V){for(var $,E;;){if(v.lookahead<Y){if(je(v),v.lookahead<Y&&V===p)return y;if(v.lookahead===0)break}if($=0,v.lookahead>=O&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),$!==0&&v.strstart-$<=v.w_size-Y&&(v.match_length=ee(v,$)),v.match_length>=O)if(E=o._tr_tally(v,v.strstart-v.match_start,v.match_length-O),v.lookahead-=v.match_length,v.match_length<=v.max_lazy_match&&v.lookahead>=O){for(v.match_length--;v.strstart++,v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart,--v.match_length!=0;);v.strstart++}else v.strstart+=v.match_length,v.match_length=0,v.ins_h=v.window[v.strstart],v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+1])&v.hash_mask;else E=o._tr_tally(v,0,v.window[v.strstart]),v.lookahead--,v.strstart++;if(E&&(F(v,!1),v.strm.avail_out===0))return y}return v.insert=v.strstart<O-1?v.strstart:O-1,V===b?(F(v,!0),v.strm.avail_out===0?Q:M):v.last_lit&&(F(v,!1),v.strm.avail_out===0)?y:D}function he(v,V){for(var $,E,_;;){if(v.lookahead<Y){if(je(v),v.lookahead<Y&&V===p)return y;if(v.lookahead===0)break}if($=0,v.lookahead>=O&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),v.prev_length=v.match_length,v.prev_match=v.match_start,v.match_length=O-1,$!==0&&v.prev_length<v.max_lazy_match&&v.strstart-$<=v.w_size-Y&&(v.match_length=ee(v,$),v.match_length<=5&&(v.strategy===1||v.match_length===O&&4096<v.strstart-v.match_start)&&(v.match_length=O-1)),v.prev_length>=O&&v.match_length<=v.prev_length){for(_=v.strstart+v.lookahead-O,E=o._tr_tally(v,v.strstart-1-v.prev_match,v.prev_length-O),v.lookahead-=v.prev_length-1,v.prev_length-=2;++v.strstart<=_&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),--v.prev_length!=0;);if(v.match_available=0,v.match_length=O-1,v.strstart++,E&&(F(v,!1),v.strm.avail_out===0))return y}else if(v.match_available){if((E=o._tr_tally(v,0,v.window[v.strstart-1]))&&F(v,!1),v.strstart++,v.lookahead--,v.strm.avail_out===0)return y}else v.match_available=1,v.strstart++,v.lookahead--}return v.match_available&&(E=o._tr_tally(v,0,v.window[v.strstart-1]),v.match_available=0),v.insert=v.strstart<O-1?v.strstart:O-1,V===b?(F(v,!0),v.strm.avail_out===0?Q:M):v.last_lit&&(F(v,!1),v.strm.avail_out===0)?y:D}function me(v,V,$,E,_){this.good_length=v,this.max_lazy=V,this.nice_length=$,this.max_chain=E,this.func=_}function ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=u,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*T),this.dyn_dtree=new l.Buf16(2*(2*S+1)),this.bl_tree=new l.Buf16(2*(2*A+1)),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(L+1),this.heap=new l.Buf16(2*N+1),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*N+1),ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function we(v){var V;return v&&v.state?(v.total_in=v.total_out=0,v.data_type=g,(V=v.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?C:R,v.adler=V.wrap===2?0:1,V.last_flush=p,o._tr_init(V),f):Z(v,w)}function Le(v){var V=we(v);return V===f&&function($){$.window_size=2*$.w_size,ne($.head),$.max_lazy_match=a[$.level].max_lazy,$.good_match=a[$.level].good_length,$.nice_match=a[$.level].nice_length,$.max_chain_length=a[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=O-1,$.match_available=0,$.ins_h=0}(v.state),V}function Ee(v,V,$,E,_,P){if(!v)return w;var W=1;if(V===d&&(V=6),E<0?(W=0,E=-E):15<E&&(W=2,E-=16),_<1||j<_||$!==u||E<8||15<E||V<0||9<V||P<0||x<P)return Z(v,w);E===8&&(E=9);var G=new ke;return(v.state=G).strm=v,G.wrap=W,G.gzhead=null,G.w_bits=E,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=_+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+O-1)/O),G.window=new l.Buf8(2*G.w_size),G.head=new l.Buf16(G.hash_size),G.prev=new l.Buf16(G.w_size),G.lit_bufsize=1<<_+6,G.pending_buf_size=4*G.lit_bufsize,G.pending_buf=new l.Buf8(G.pending_buf_size),G.d_buf=1*G.lit_bufsize,G.l_buf=3*G.lit_bufsize,G.level=V,G.strategy=P,G.method=$,Le(v)}a=[new me(0,0,0,0,function(v,V){var $=65535;for($>v.pending_buf_size-5&&($=v.pending_buf_size-5);;){if(v.lookahead<=1){if(je(v),v.lookahead===0&&V===p)return y;if(v.lookahead===0)break}v.strstart+=v.lookahead,v.lookahead=0;var E=v.block_start+$;if((v.strstart===0||v.strstart>=E)&&(v.lookahead=v.strstart-E,v.strstart=E,F(v,!1),v.strm.avail_out===0)||v.strstart-v.block_start>=v.w_size-Y&&(F(v,!1),v.strm.avail_out===0))return y}return v.insert=0,V===b?(F(v,!0),v.strm.avail_out===0?Q:M):(v.strstart>v.block_start&&(F(v,!1),v.strm.avail_out),y)}),new me(4,4,8,4,Ce),new me(4,5,16,8,Ce),new me(4,6,32,32,Ce),new me(4,4,16,16,he),new me(8,16,32,32,he),new me(8,16,128,128,he),new me(8,32,128,256,he),new me(32,128,258,1024,he),new me(32,258,258,4096,he)],i.deflateInit=function(v,V){return Ee(v,V,u,15,8,0)},i.deflateInit2=Ee,i.deflateReset=Le,i.deflateResetKeep=we,i.deflateSetHeader=function(v,V){return v&&v.state?v.state.wrap!==2?w:(v.state.gzhead=V,f):w},i.deflate=function(v,V){var $,E,_,P;if(!v||!v.state||5<V||V<0)return v?Z(v,w):w;if(E=v.state,!v.output||!v.input&&v.avail_in!==0||E.status===666&&V!==b)return Z(v,v.avail_out===0?-5:w);if(E.strm=v,$=E.last_flush,E.last_flush=V,E.status===C)if(E.wrap===2)v.adler=0,ie(E,31),ie(E,139),ie(E,8),E.gzhead?(ie(E,(E.gzhead.text?1:0)+(E.gzhead.hcrc?2:0)+(E.gzhead.extra?4:0)+(E.gzhead.name?8:0)+(E.gzhead.comment?16:0)),ie(E,255&E.gzhead.time),ie(E,E.gzhead.time>>8&255),ie(E,E.gzhead.time>>16&255),ie(E,E.gzhead.time>>24&255),ie(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),ie(E,255&E.gzhead.os),E.gzhead.extra&&E.gzhead.extra.length&&(ie(E,255&E.gzhead.extra.length),ie(E,E.gzhead.extra.length>>8&255)),E.gzhead.hcrc&&(v.adler=m(v.adler,E.pending_buf,E.pending,0)),E.gzindex=0,E.status=69):(ie(E,0),ie(E,0),ie(E,0),ie(E,0),ie(E,0),ie(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),ie(E,3),E.status=R);else{var W=u+(E.w_bits-8<<4)<<8;W|=(2<=E.strategy||E.level<2?0:E.level<6?1:E.level===6?2:3)<<6,E.strstart!==0&&(W|=32),W+=31-W%31,E.status=R,re(E,W),E.strstart!==0&&(re(E,v.adler>>>16),re(E,65535&v.adler)),v.adler=1}if(E.status===69)if(E.gzhead.extra){for(_=E.pending;E.gzindex<(65535&E.gzhead.extra.length)&&(E.pending!==E.pending_buf_size||(E.gzhead.hcrc&&E.pending>_&&(v.adler=m(v.adler,E.pending_buf,E.pending-_,_)),z(v),_=E.pending,E.pending!==E.pending_buf_size));)ie(E,255&E.gzhead.extra[E.gzindex]),E.gzindex++;E.gzhead.hcrc&&E.pending>_&&(v.adler=m(v.adler,E.pending_buf,E.pending-_,_)),E.gzindex===E.gzhead.extra.length&&(E.gzindex=0,E.status=73)}else E.status=73;if(E.status===73)if(E.gzhead.name){_=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>_&&(v.adler=m(v.adler,E.pending_buf,E.pending-_,_)),z(v),_=E.pending,E.pending===E.pending_buf_size)){P=1;break}P=E.gzindex<E.gzhead.name.length?255&E.gzhead.name.charCodeAt(E.gzindex++):0,ie(E,P)}while(P!==0);E.gzhead.hcrc&&E.pending>_&&(v.adler=m(v.adler,E.pending_buf,E.pending-_,_)),P===0&&(E.gzindex=0,E.status=91)}else E.status=91;if(E.status===91)if(E.gzhead.comment){_=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>_&&(v.adler=m(v.adler,E.pending_buf,E.pending-_,_)),z(v),_=E.pending,E.pending===E.pending_buf_size)){P=1;break}P=E.gzindex<E.gzhead.comment.length?255&E.gzhead.comment.charCodeAt(E.gzindex++):0,ie(E,P)}while(P!==0);E.gzhead.hcrc&&E.pending>_&&(v.adler=m(v.adler,E.pending_buf,E.pending-_,_)),P===0&&(E.status=103)}else E.status=103;if(E.status===103&&(E.gzhead.hcrc?(E.pending+2>E.pending_buf_size&&z(v),E.pending+2<=E.pending_buf_size&&(ie(E,255&v.adler),ie(E,v.adler>>8&255),v.adler=0,E.status=R)):E.status=R),E.pending!==0){if(z(v),v.avail_out===0)return E.last_flush=-1,f}else if(v.avail_in===0&&H(V)<=H($)&&V!==b)return Z(v,-5);if(E.status===666&&v.avail_in!==0)return Z(v,-5);if(v.avail_in!==0||E.lookahead!==0||V!==p&&E.status!==666){var G=E.strategy===2?function(I,X){for(var se;;){if(I.lookahead===0&&(je(I),I.lookahead===0)){if(X===p)return y;break}if(I.match_length=0,se=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,se&&(F(I,!1),I.strm.avail_out===0))return y}return I.insert=0,X===b?(F(I,!0),I.strm.avail_out===0?Q:M):I.last_lit&&(F(I,!1),I.strm.avail_out===0)?y:D}(E,V):E.strategy===3?function(I,X){for(var se,J,ce,ae,K=I.window;;){if(I.lookahead<=U){if(je(I),I.lookahead<=U&&X===p)return y;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=O&&0<I.strstart&&(J=K[ce=I.strstart-1])===K[++ce]&&J===K[++ce]&&J===K[++ce]){ae=I.strstart+U;do;while(J===K[++ce]&&J===K[++ce]&&J===K[++ce]&&J===K[++ce]&&J===K[++ce]&&J===K[++ce]&&J===K[++ce]&&J===K[++ce]&&ce<ae);I.match_length=U-(ae-ce),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=O?(se=o._tr_tally(I,1,I.match_length-O),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(se=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),se&&(F(I,!1),I.strm.avail_out===0))return y}return I.insert=0,X===b?(F(I,!0),I.strm.avail_out===0?Q:M):I.last_lit&&(F(I,!1),I.strm.avail_out===0)?y:D}(E,V):a[E.level].func(E,V);if(G!==Q&&G!==M||(E.status=666),G===y||G===Q)return v.avail_out===0&&(E.last_flush=-1),f;if(G===D&&(V===1?o._tr_align(E):V!==5&&(o._tr_stored_block(E,0,0,!1),V===3&&(ne(E.head),E.lookahead===0&&(E.strstart=0,E.block_start=0,E.insert=0))),z(v),v.avail_out===0))return E.last_flush=-1,f}return V!==b?f:E.wrap<=0?1:(E.wrap===2?(ie(E,255&v.adler),ie(E,v.adler>>8&255),ie(E,v.adler>>16&255),ie(E,v.adler>>24&255),ie(E,255&v.total_in),ie(E,v.total_in>>8&255),ie(E,v.total_in>>16&255),ie(E,v.total_in>>24&255)):(re(E,v.adler>>>16),re(E,65535&v.adler)),z(v),0<E.wrap&&(E.wrap=-E.wrap),E.pending!==0?f:1)},i.deflateEnd=function(v){var V;return v&&v.state?(V=v.state.status)!==C&&V!==69&&V!==73&&V!==91&&V!==103&&V!==R&&V!==666?Z(v,w):(v.state=null,V===R?Z(v,-3):f):w},i.deflateSetDictionary=function(v,V){var $,E,_,P,W,G,I,X,se=V.length;if(!v||!v.state||(P=($=v.state).wrap)===2||P===1&&$.status!==C||$.lookahead)return w;for(P===1&&(v.adler=c(v.adler,V,se,0)),$.wrap=0,se>=$.w_size&&(P===0&&(ne($.head),$.strstart=0,$.block_start=0,$.insert=0),X=new l.Buf8($.w_size),l.arraySet(X,V,se-$.w_size,$.w_size,0),V=X,se=$.w_size),W=v.avail_in,G=v.next_in,I=v.input,v.avail_in=se,v.next_in=0,v.input=V,je($);$.lookahead>=O;){for(E=$.strstart,_=$.lookahead-(O-1);$.ins_h=($.ins_h<<$.hash_shift^$.window[E+O-1])&$.hash_mask,$.prev[E&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=E,E++,--_;);$.strstart=E,$.lookahead=O-1,je($)}return $.strstart+=$.lookahead,$.block_start=$.strstart,$.insert=$.lookahead,$.lookahead=0,$.match_length=$.prev_length=O-1,$.match_available=0,v.next_in=G,v.input=I,v.avail_in=W,$.wrap=P,f},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,n,i){n.exports=function(a,l){var o,c,m,h,p,b,f,w,d,x,g,u,j,N,S,A,T,L,O,U,Y,C,R,y,D;o=a.state,c=a.next_in,y=a.input,m=c+(a.avail_in-5),h=a.next_out,D=a.output,p=h-(l-a.avail_out),b=h+(a.avail_out-257),f=o.dmax,w=o.wsize,d=o.whave,x=o.wnext,g=o.window,u=o.hold,j=o.bits,N=o.lencode,S=o.distcode,A=(1<<o.lenbits)-1,T=(1<<o.distbits)-1;e:do{j<15&&(u+=y[c++]<<j,j+=8,u+=y[c++]<<j,j+=8),L=N[u&A];t:for(;;){if(u>>>=O=L>>>24,j-=O,(O=L>>>16&255)===0)D[h++]=65535&L;else{if(!(16&O)){if(!(64&O)){L=N[(65535&L)+(u&(1<<O)-1)];continue t}if(32&O){o.mode=12;break e}a.msg="invalid literal/length code",o.mode=30;break e}U=65535&L,(O&=15)&&(j<O&&(u+=y[c++]<<j,j+=8),U+=u&(1<<O)-1,u>>>=O,j-=O),j<15&&(u+=y[c++]<<j,j+=8,u+=y[c++]<<j,j+=8),L=S[u&T];r:for(;;){if(u>>>=O=L>>>24,j-=O,!(16&(O=L>>>16&255))){if(!(64&O)){L=S[(65535&L)+(u&(1<<O)-1)];continue r}a.msg="invalid distance code",o.mode=30;break e}if(Y=65535&L,j<(O&=15)&&(u+=y[c++]<<j,(j+=8)<O&&(u+=y[c++]<<j,j+=8)),f<(Y+=u&(1<<O)-1)){a.msg="invalid distance too far back",o.mode=30;break e}if(u>>>=O,j-=O,(O=h-p)<Y){if(d<(O=Y-O)&&o.sane){a.msg="invalid distance too far back",o.mode=30;break e}if(R=g,(C=0)===x){if(C+=w-O,O<U){for(U-=O;D[h++]=g[C++],--O;);C=h-Y,R=D}}else if(x<O){if(C+=w+x-O,(O-=x)<U){for(U-=O;D[h++]=g[C++],--O;);if(C=0,x<U){for(U-=O=x;D[h++]=g[C++],--O;);C=h-Y,R=D}}}else if(C+=x-O,O<U){for(U-=O;D[h++]=g[C++],--O;);C=h-Y,R=D}for(;2<U;)D[h++]=R[C++],D[h++]=R[C++],D[h++]=R[C++],U-=3;U&&(D[h++]=R[C++],1<U&&(D[h++]=R[C++]))}else{for(C=h-Y;D[h++]=D[C++],D[h++]=D[C++],D[h++]=D[C++],2<(U-=3););U&&(D[h++]=D[C++],1<U&&(D[h++]=D[C++]))}break}}break}}while(c<m&&h<b);c-=U=j>>3,u&=(1<<(j-=U<<3))-1,a.next_in=c,a.next_out=h,a.avail_in=c<m?m-c+5:5-(c-m),a.avail_out=h<b?b-h+257:257-(h-b),o.hold=u,o.bits=j}},{}],49:[function(s,n,i){var a=s("../utils/common"),l=s("./adler32"),o=s("./crc32"),c=s("./inffast"),m=s("./inftrees"),h=1,p=2,b=0,f=-2,w=1,d=852,x=592;function g(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(C){var R;return C&&C.state?(R=C.state,C.total_in=C.total_out=R.total=0,C.msg="",R.wrap&&(C.adler=1&R.wrap),R.mode=w,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new a.Buf32(d),R.distcode=R.distdyn=new a.Buf32(x),R.sane=1,R.back=-1,b):f}function N(C){var R;return C&&C.state?((R=C.state).wsize=0,R.whave=0,R.wnext=0,j(C)):f}function S(C,R){var y,D;return C&&C.state?(D=C.state,R<0?(y=0,R=-R):(y=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?f:(D.window!==null&&D.wbits!==R&&(D.window=null),D.wrap=y,D.wbits=R,N(C))):f}function A(C,R){var y,D;return C?(D=new u,(C.state=D).window=null,(y=S(C,R))!==b&&(C.state=null),y):f}var T,L,O=!0;function U(C){if(O){var R;for(T=new a.Buf32(512),L=new a.Buf32(32),R=0;R<144;)C.lens[R++]=8;for(;R<256;)C.lens[R++]=9;for(;R<280;)C.lens[R++]=7;for(;R<288;)C.lens[R++]=8;for(m(h,C.lens,0,288,T,0,C.work,{bits:9}),R=0;R<32;)C.lens[R++]=5;m(p,C.lens,0,32,L,0,C.work,{bits:5}),O=!1}C.lencode=T,C.lenbits=9,C.distcode=L,C.distbits=5}function Y(C,R,y,D){var Q,M=C.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new a.Buf8(M.wsize)),D>=M.wsize?(a.arraySet(M.window,R,y-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(D<(Q=M.wsize-M.wnext)&&(Q=D),a.arraySet(M.window,R,y-D,Q,M.wnext),(D-=Q)?(a.arraySet(M.window,R,y-D,D,0),M.wnext=D,M.whave=M.wsize):(M.wnext+=Q,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=Q))),0}i.inflateReset=N,i.inflateReset2=S,i.inflateResetKeep=j,i.inflateInit=function(C){return A(C,15)},i.inflateInit2=A,i.inflate=function(C,R){var y,D,Q,M,Z,H,ne,z,F,ie,re,ee,je,Ce,he,me,ke,we,Le,Ee,v,V,$,E,_=0,P=new a.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return f;(y=C.state).mode===12&&(y.mode=13),Z=C.next_out,Q=C.output,ne=C.avail_out,M=C.next_in,D=C.input,H=C.avail_in,z=y.hold,F=y.bits,ie=H,re=ne,V=b;e:for(;;)switch(y.mode){case w:if(y.wrap===0){y.mode=13;break}for(;F<16;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(2&y.wrap&&z===35615){P[y.check=0]=255&z,P[1]=z>>>8&255,y.check=o(y.check,P,2,0),F=z=0,y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&z)<<8)+(z>>8))%31){C.msg="incorrect header check",y.mode=30;break}if((15&z)!=8){C.msg="unknown compression method",y.mode=30;break}if(F-=4,v=8+(15&(z>>>=4)),y.wbits===0)y.wbits=v;else if(v>y.wbits){C.msg="invalid window size",y.mode=30;break}y.dmax=1<<v,C.adler=y.check=1,y.mode=512&z?10:12,F=z=0;break;case 2:for(;F<16;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(y.flags=z,(255&y.flags)!=8){C.msg="unknown compression method",y.mode=30;break}if(57344&y.flags){C.msg="unknown header flags set",y.mode=30;break}y.head&&(y.head.text=z>>8&1),512&y.flags&&(P[0]=255&z,P[1]=z>>>8&255,y.check=o(y.check,P,2,0)),F=z=0,y.mode=3;case 3:for(;F<32;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.head&&(y.head.time=z),512&y.flags&&(P[0]=255&z,P[1]=z>>>8&255,P[2]=z>>>16&255,P[3]=z>>>24&255,y.check=o(y.check,P,4,0)),F=z=0,y.mode=4;case 4:for(;F<16;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.head&&(y.head.xflags=255&z,y.head.os=z>>8),512&y.flags&&(P[0]=255&z,P[1]=z>>>8&255,y.check=o(y.check,P,2,0)),F=z=0,y.mode=5;case 5:if(1024&y.flags){for(;F<16;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.length=z,y.head&&(y.head.extra_len=z),512&y.flags&&(P[0]=255&z,P[1]=z>>>8&255,y.check=o(y.check,P,2,0)),F=z=0}else y.head&&(y.head.extra=null);y.mode=6;case 6:if(1024&y.flags&&(H<(ee=y.length)&&(ee=H),ee&&(y.head&&(v=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),a.arraySet(y.head.extra,D,M,ee,v)),512&y.flags&&(y.check=o(y.check,D,ee,M)),H-=ee,M+=ee,y.length-=ee),y.length))break e;y.length=0,y.mode=7;case 7:if(2048&y.flags){if(H===0)break e;for(ee=0;v=D[M+ee++],y.head&&v&&y.length<65536&&(y.head.name+=String.fromCharCode(v)),v&&ee<H;);if(512&y.flags&&(y.check=o(y.check,D,ee,M)),H-=ee,M+=ee,v)break e}else y.head&&(y.head.name=null);y.length=0,y.mode=8;case 8:if(4096&y.flags){if(H===0)break e;for(ee=0;v=D[M+ee++],y.head&&v&&y.length<65536&&(y.head.comment+=String.fromCharCode(v)),v&&ee<H;);if(512&y.flags&&(y.check=o(y.check,D,ee,M)),H-=ee,M+=ee,v)break e}else y.head&&(y.head.comment=null);y.mode=9;case 9:if(512&y.flags){for(;F<16;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(z!==(65535&y.check)){C.msg="header crc mismatch",y.mode=30;break}F=z=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),C.adler=y.check=0,y.mode=12;break;case 10:for(;F<32;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}C.adler=y.check=g(z),F=z=0,y.mode=11;case 11:if(y.havedict===0)return C.next_out=Z,C.avail_out=ne,C.next_in=M,C.avail_in=H,y.hold=z,y.bits=F,2;C.adler=y.check=1,y.mode=12;case 12:if(R===5||R===6)break e;case 13:if(y.last){z>>>=7&F,F-=7&F,y.mode=27;break}for(;F<3;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}switch(y.last=1&z,F-=1,3&(z>>>=1)){case 0:y.mode=14;break;case 1:if(U(y),y.mode=20,R!==6)break;z>>>=2,F-=2;break e;case 2:y.mode=17;break;case 3:C.msg="invalid block type",y.mode=30}z>>>=2,F-=2;break;case 14:for(z>>>=7&F,F-=7&F;F<32;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if((65535&z)!=(z>>>16^65535)){C.msg="invalid stored block lengths",y.mode=30;break}if(y.length=65535&z,F=z=0,y.mode=15,R===6)break e;case 15:y.mode=16;case 16:if(ee=y.length){if(H<ee&&(ee=H),ne<ee&&(ee=ne),ee===0)break e;a.arraySet(Q,D,M,ee,Z),H-=ee,M+=ee,ne-=ee,Z+=ee,y.length-=ee;break}y.mode=12;break;case 17:for(;F<14;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(y.nlen=257+(31&z),z>>>=5,F-=5,y.ndist=1+(31&z),z>>>=5,F-=5,y.ncode=4+(15&z),z>>>=4,F-=4,286<y.nlen||30<y.ndist){C.msg="too many length or distance symbols",y.mode=30;break}y.have=0,y.mode=18;case 18:for(;y.have<y.ncode;){for(;F<3;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.lens[W[y.have++]]=7&z,z>>>=3,F-=3}for(;y.have<19;)y.lens[W[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,$={bits:y.lenbits},V=m(0,y.lens,0,19,y.lencode,0,y.work,$),y.lenbits=$.bits,V){C.msg="invalid code lengths set",y.mode=30;break}y.have=0,y.mode=19;case 19:for(;y.have<y.nlen+y.ndist;){for(;me=(_=y.lencode[z&(1<<y.lenbits)-1])>>>16&255,ke=65535&_,!((he=_>>>24)<=F);){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(ke<16)z>>>=he,F-=he,y.lens[y.have++]=ke;else{if(ke===16){for(E=he+2;F<E;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(z>>>=he,F-=he,y.have===0){C.msg="invalid bit length repeat",y.mode=30;break}v=y.lens[y.have-1],ee=3+(3&z),z>>>=2,F-=2}else if(ke===17){for(E=he+3;F<E;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}F-=he,v=0,ee=3+(7&(z>>>=he)),z>>>=3,F-=3}else{for(E=he+7;F<E;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}F-=he,v=0,ee=11+(127&(z>>>=he)),z>>>=7,F-=7}if(y.have+ee>y.nlen+y.ndist){C.msg="invalid bit length repeat",y.mode=30;break}for(;ee--;)y.lens[y.have++]=v}}if(y.mode===30)break;if(y.lens[256]===0){C.msg="invalid code -- missing end-of-block",y.mode=30;break}if(y.lenbits=9,$={bits:y.lenbits},V=m(h,y.lens,0,y.nlen,y.lencode,0,y.work,$),y.lenbits=$.bits,V){C.msg="invalid literal/lengths set",y.mode=30;break}if(y.distbits=6,y.distcode=y.distdyn,$={bits:y.distbits},V=m(p,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,$),y.distbits=$.bits,V){C.msg="invalid distances set",y.mode=30;break}if(y.mode=20,R===6)break e;case 20:y.mode=21;case 21:if(6<=H&&258<=ne){C.next_out=Z,C.avail_out=ne,C.next_in=M,C.avail_in=H,y.hold=z,y.bits=F,c(C,re),Z=C.next_out,Q=C.output,ne=C.avail_out,M=C.next_in,D=C.input,H=C.avail_in,z=y.hold,F=y.bits,y.mode===12&&(y.back=-1);break}for(y.back=0;me=(_=y.lencode[z&(1<<y.lenbits)-1])>>>16&255,ke=65535&_,!((he=_>>>24)<=F);){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(me&&!(240&me)){for(we=he,Le=me,Ee=ke;me=(_=y.lencode[Ee+((z&(1<<we+Le)-1)>>we)])>>>16&255,ke=65535&_,!(we+(he=_>>>24)<=F);){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}z>>>=we,F-=we,y.back+=we}if(z>>>=he,F-=he,y.back+=he,y.length=ke,me===0){y.mode=26;break}if(32&me){y.back=-1,y.mode=12;break}if(64&me){C.msg="invalid literal/length code",y.mode=30;break}y.extra=15&me,y.mode=22;case 22:if(y.extra){for(E=y.extra;F<E;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.length+=z&(1<<y.extra)-1,z>>>=y.extra,F-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=23;case 23:for(;me=(_=y.distcode[z&(1<<y.distbits)-1])>>>16&255,ke=65535&_,!((he=_>>>24)<=F);){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(!(240&me)){for(we=he,Le=me,Ee=ke;me=(_=y.distcode[Ee+((z&(1<<we+Le)-1)>>we)])>>>16&255,ke=65535&_,!(we+(he=_>>>24)<=F);){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}z>>>=we,F-=we,y.back+=we}if(z>>>=he,F-=he,y.back+=he,64&me){C.msg="invalid distance code",y.mode=30;break}y.offset=ke,y.extra=15&me,y.mode=24;case 24:if(y.extra){for(E=y.extra;F<E;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.offset+=z&(1<<y.extra)-1,z>>>=y.extra,F-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){C.msg="invalid distance too far back",y.mode=30;break}y.mode=25;case 25:if(ne===0)break e;if(ee=re-ne,y.offset>ee){if((ee=y.offset-ee)>y.whave&&y.sane){C.msg="invalid distance too far back",y.mode=30;break}je=ee>y.wnext?(ee-=y.wnext,y.wsize-ee):y.wnext-ee,ee>y.length&&(ee=y.length),Ce=y.window}else Ce=Q,je=Z-y.offset,ee=y.length;for(ne<ee&&(ee=ne),ne-=ee,y.length-=ee;Q[Z++]=Ce[je++],--ee;);y.length===0&&(y.mode=21);break;case 26:if(ne===0)break e;Q[Z++]=y.length,ne--,y.mode=21;break;case 27:if(y.wrap){for(;F<32;){if(H===0)break e;H--,z|=D[M++]<<F,F+=8}if(re-=ne,C.total_out+=re,y.total+=re,re&&(C.adler=y.check=y.flags?o(y.check,Q,re,Z-re):l(y.check,Q,re,Z-re)),re=ne,(y.flags?z:g(z))!==y.check){C.msg="incorrect data check",y.mode=30;break}F=z=0}y.mode=28;case 28:if(y.wrap&&y.flags){for(;F<32;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(z!==(4294967295&y.total)){C.msg="incorrect length check",y.mode=30;break}F=z=0}y.mode=29;case 29:V=1;break e;case 30:V=-3;break e;case 31:return-4;case 32:default:return f}return C.next_out=Z,C.avail_out=ne,C.next_in=M,C.avail_in=H,y.hold=z,y.bits=F,(y.wsize||re!==C.avail_out&&y.mode<30&&(y.mode<27||R!==4))&&Y(C,C.output,C.next_out,re-C.avail_out)?(y.mode=31,-4):(ie-=C.avail_in,re-=C.avail_out,C.total_in+=ie,C.total_out+=re,y.total+=re,y.wrap&&re&&(C.adler=y.check=y.flags?o(y.check,Q,re,C.next_out-re):l(y.check,Q,re,C.next_out-re)),C.data_type=y.bits+(y.last?64:0)+(y.mode===12?128:0)+(y.mode===20||y.mode===15?256:0),(ie==0&&re===0||R===4)&&V===b&&(V=-5),V)},i.inflateEnd=function(C){if(!C||!C.state)return f;var R=C.state;return R.window&&(R.window=null),C.state=null,b},i.inflateGetHeader=function(C,R){var y;return C&&C.state&&2&(y=C.state).wrap?((y.head=R).done=!1,b):f},i.inflateSetDictionary=function(C,R){var y,D=R.length;return C&&C.state?(y=C.state).wrap!==0&&y.mode!==11?f:y.mode===11&&l(1,R,D,0)!==y.check?-3:Y(C,R,D,D)?(y.mode=31,-4):(y.havedict=1,b):f},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,n,i){var a=s("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(h,p,b,f,w,d,x,g){var u,j,N,S,A,T,L,O,U,Y=g.bits,C=0,R=0,y=0,D=0,Q=0,M=0,Z=0,H=0,ne=0,z=0,F=null,ie=0,re=new a.Buf16(16),ee=new a.Buf16(16),je=null,Ce=0;for(C=0;C<=15;C++)re[C]=0;for(R=0;R<f;R++)re[p[b+R]]++;for(Q=Y,D=15;1<=D&&re[D]===0;D--);if(D<Q&&(Q=D),D===0)return w[d++]=20971520,w[d++]=20971520,g.bits=1,0;for(y=1;y<D&&re[y]===0;y++);for(Q<y&&(Q=y),C=H=1;C<=15;C++)if(H<<=1,(H-=re[C])<0)return-1;if(0<H&&(h===0||D!==1))return-1;for(ee[1]=0,C=1;C<15;C++)ee[C+1]=ee[C]+re[C];for(R=0;R<f;R++)p[b+R]!==0&&(x[ee[p[b+R]]++]=R);if(T=h===0?(F=je=x,19):h===1?(F=l,ie-=257,je=o,Ce-=257,256):(F=c,je=m,-1),C=y,A=d,Z=R=z=0,N=-1,S=(ne=1<<(M=Q))-1,h===1&&852<ne||h===2&&592<ne)return 1;for(;;){for(L=C-Z,U=x[R]<T?(O=0,x[R]):x[R]>T?(O=je[Ce+x[R]],F[ie+x[R]]):(O=96,0),u=1<<C-Z,y=j=1<<M;w[A+(z>>Z)+(j-=u)]=L<<24|O<<16|U|0,j!==0;);for(u=1<<C-1;z&u;)u>>=1;if(u!==0?(z&=u-1,z+=u):z=0,R++,--re[C]==0){if(C===D)break;C=p[b+x[R]]}if(Q<C&&(z&S)!==N){for(Z===0&&(Z=Q),A+=y,H=1<<(M=C-Z);M+Z<D&&!((H-=re[M+Z])<=0);)M++,H<<=1;if(ne+=1<<M,h===1&&852<ne||h===2&&592<ne)return 1;w[N=z&S]=Q<<24|M<<16|A-d|0}}return z!==0&&(w[A+z]=C-Z<<24|64<<16|0),g.bits=Q,0}},{"../utils/common":41}],51:[function(s,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,n,i){var a=s("../utils/common"),l=0,o=1;function c(_){for(var P=_.length;0<=--P;)_[P]=0}var m=0,h=29,p=256,b=p+1+h,f=30,w=19,d=2*b+1,x=15,g=16,u=7,j=256,N=16,S=17,A=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(b+2));c(Y);var C=new Array(2*f);c(C);var R=new Array(512);c(R);var y=new Array(256);c(y);var D=new Array(h);c(D);var Q,M,Z,H=new Array(f);function ne(_,P,W,G,I){this.static_tree=_,this.extra_bits=P,this.extra_base=W,this.elems=G,this.max_length=I,this.has_stree=_&&_.length}function z(_,P){this.dyn_tree=_,this.max_code=0,this.stat_desc=P}function F(_){return _<256?R[_]:R[256+(_>>>7)]}function ie(_,P){_.pending_buf[_.pending++]=255&P,_.pending_buf[_.pending++]=P>>>8&255}function re(_,P,W){_.bi_valid>g-W?(_.bi_buf|=P<<_.bi_valid&65535,ie(_,_.bi_buf),_.bi_buf=P>>g-_.bi_valid,_.bi_valid+=W-g):(_.bi_buf|=P<<_.bi_valid&65535,_.bi_valid+=W)}function ee(_,P,W){re(_,W[2*P],W[2*P+1])}function je(_,P){for(var W=0;W|=1&_,_>>>=1,W<<=1,0<--P;);return W>>>1}function Ce(_,P,W){var G,I,X=new Array(x+1),se=0;for(G=1;G<=x;G++)X[G]=se=se+W[G-1]<<1;for(I=0;I<=P;I++){var J=_[2*I+1];J!==0&&(_[2*I]=je(X[J]++,J))}}function he(_){var P;for(P=0;P<b;P++)_.dyn_ltree[2*P]=0;for(P=0;P<f;P++)_.dyn_dtree[2*P]=0;for(P=0;P<w;P++)_.bl_tree[2*P]=0;_.dyn_ltree[2*j]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function me(_){8<_.bi_valid?ie(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function ke(_,P,W,G){var I=2*P,X=2*W;return _[I]<_[X]||_[I]===_[X]&&G[P]<=G[W]}function we(_,P,W){for(var G=_.heap[W],I=W<<1;I<=_.heap_len&&(I<_.heap_len&&ke(P,_.heap[I+1],_.heap[I],_.depth)&&I++,!ke(P,G,_.heap[I],_.depth));)_.heap[W]=_.heap[I],W=I,I<<=1;_.heap[W]=G}function Le(_,P,W){var G,I,X,se,J=0;if(_.last_lit!==0)for(;G=_.pending_buf[_.d_buf+2*J]<<8|_.pending_buf[_.d_buf+2*J+1],I=_.pending_buf[_.l_buf+J],J++,G===0?ee(_,I,P):(ee(_,(X=y[I])+p+1,P),(se=T[X])!==0&&re(_,I-=D[X],se),ee(_,X=F(--G),W),(se=L[X])!==0&&re(_,G-=H[X],se)),J<_.last_lit;);ee(_,j,P)}function Ee(_,P){var W,G,I,X=P.dyn_tree,se=P.stat_desc.static_tree,J=P.stat_desc.has_stree,ce=P.stat_desc.elems,ae=-1;for(_.heap_len=0,_.heap_max=d,W=0;W<ce;W++)X[2*W]!==0?(_.heap[++_.heap_len]=ae=W,_.depth[W]=0):X[2*W+1]=0;for(;_.heap_len<2;)X[2*(I=_.heap[++_.heap_len]=ae<2?++ae:0)]=1,_.depth[I]=0,_.opt_len--,J&&(_.static_len-=se[2*I+1]);for(P.max_code=ae,W=_.heap_len>>1;1<=W;W--)we(_,X,W);for(I=ce;W=_.heap[1],_.heap[1]=_.heap[_.heap_len--],we(_,X,1),G=_.heap[1],_.heap[--_.heap_max]=W,_.heap[--_.heap_max]=G,X[2*I]=X[2*W]+X[2*G],_.depth[I]=(_.depth[W]>=_.depth[G]?_.depth[W]:_.depth[G])+1,X[2*W+1]=X[2*G+1]=I,_.heap[1]=I++,we(_,X,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(K,oe){var pe,ge,Ae,q,de,Te,Me=oe.dyn_tree,pn=oe.max_code,qo=oe.stat_desc.static_tree,Zo=oe.stat_desc.has_stree,Xo=oe.stat_desc.extra_bits,mn=oe.stat_desc.extra_base,er=oe.stat_desc.max_length,gr=0;for(q=0;q<=x;q++)K.bl_count[q]=0;for(Me[2*K.heap[K.heap_max]+1]=0,pe=K.heap_max+1;pe<d;pe++)er<(q=Me[2*Me[2*(ge=K.heap[pe])+1]+1]+1)&&(q=er,gr++),Me[2*ge+1]=q,pn<ge||(K.bl_count[q]++,de=0,mn<=ge&&(de=Xo[ge-mn]),Te=Me[2*ge],K.opt_len+=Te*(q+de),Zo&&(K.static_len+=Te*(qo[2*ge+1]+de)));if(gr!==0){do{for(q=er-1;K.bl_count[q]===0;)q--;K.bl_count[q]--,K.bl_count[q+1]+=2,K.bl_count[er]--,gr-=2}while(0<gr);for(q=er;q!==0;q--)for(ge=K.bl_count[q];ge!==0;)pn<(Ae=K.heap[--pe])||(Me[2*Ae+1]!==q&&(K.opt_len+=(q-Me[2*Ae+1])*Me[2*Ae],Me[2*Ae+1]=q),ge--)}}(_,P),Ce(X,ae,_.bl_count)}function v(_,P,W){var G,I,X=-1,se=P[1],J=0,ce=7,ae=4;for(se===0&&(ce=138,ae=3),P[2*(W+1)+1]=65535,G=0;G<=W;G++)I=se,se=P[2*(G+1)+1],++J<ce&&I===se||(J<ae?_.bl_tree[2*I]+=J:I!==0?(I!==X&&_.bl_tree[2*I]++,_.bl_tree[2*N]++):J<=10?_.bl_tree[2*S]++:_.bl_tree[2*A]++,X=I,ae=(J=0)===se?(ce=138,3):I===se?(ce=6,3):(ce=7,4))}function V(_,P,W){var G,I,X=-1,se=P[1],J=0,ce=7,ae=4;for(se===0&&(ce=138,ae=3),G=0;G<=W;G++)if(I=se,se=P[2*(G+1)+1],!(++J<ce&&I===se)){if(J<ae)for(;ee(_,I,_.bl_tree),--J!=0;);else I!==0?(I!==X&&(ee(_,I,_.bl_tree),J--),ee(_,N,_.bl_tree),re(_,J-3,2)):J<=10?(ee(_,S,_.bl_tree),re(_,J-3,3)):(ee(_,A,_.bl_tree),re(_,J-11,7));X=I,ae=(J=0)===se?(ce=138,3):I===se?(ce=6,3):(ce=7,4)}}c(H);var $=!1;function E(_,P,W,G){re(_,(m<<1)+(G?1:0),3),function(I,X,se,J){me(I),ie(I,se),ie(I,~se),a.arraySet(I.pending_buf,I.window,X,se,I.pending),I.pending+=se}(_,P,W)}i._tr_init=function(_){$||(function(){var P,W,G,I,X,se=new Array(x+1);for(I=G=0;I<h-1;I++)for(D[I]=G,P=0;P<1<<T[I];P++)y[G++]=I;for(y[G-1]=I,I=X=0;I<16;I++)for(H[I]=X,P=0;P<1<<L[I];P++)R[X++]=I;for(X>>=7;I<f;I++)for(H[I]=X<<7,P=0;P<1<<L[I]-7;P++)R[256+X++]=I;for(W=0;W<=x;W++)se[W]=0;for(P=0;P<=143;)Y[2*P+1]=8,P++,se[8]++;for(;P<=255;)Y[2*P+1]=9,P++,se[9]++;for(;P<=279;)Y[2*P+1]=7,P++,se[7]++;for(;P<=287;)Y[2*P+1]=8,P++,se[8]++;for(Ce(Y,b+1,se),P=0;P<f;P++)C[2*P+1]=5,C[2*P]=je(P,5);Q=new ne(Y,T,p+1,b,x),M=new ne(C,L,0,f,x),Z=new ne(new Array(0),O,0,w,u)}(),$=!0),_.l_desc=new z(_.dyn_ltree,Q),_.d_desc=new z(_.dyn_dtree,M),_.bl_desc=new z(_.bl_tree,Z),_.bi_buf=0,_.bi_valid=0,he(_)},i._tr_stored_block=E,i._tr_flush_block=function(_,P,W,G){var I,X,se=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(J){var ce,ae=4093624447;for(ce=0;ce<=31;ce++,ae>>>=1)if(1&ae&&J.dyn_ltree[2*ce]!==0)return l;if(J.dyn_ltree[18]!==0||J.dyn_ltree[20]!==0||J.dyn_ltree[26]!==0)return o;for(ce=32;ce<p;ce++)if(J.dyn_ltree[2*ce]!==0)return o;return l}(_)),Ee(_,_.l_desc),Ee(_,_.d_desc),se=function(J){var ce;for(v(J,J.dyn_ltree,J.l_desc.max_code),v(J,J.dyn_dtree,J.d_desc.max_code),Ee(J,J.bl_desc),ce=w-1;3<=ce&&J.bl_tree[2*U[ce]+1]===0;ce--);return J.opt_len+=3*(ce+1)+5+5+4,ce}(_),I=_.opt_len+3+7>>>3,(X=_.static_len+3+7>>>3)<=I&&(I=X)):I=X=W+5,W+4<=I&&P!==-1?E(_,P,W,G):_.strategy===4||X===I?(re(_,2+(G?1:0),3),Le(_,Y,C)):(re(_,4+(G?1:0),3),function(J,ce,ae,K){var oe;for(re(J,ce-257,5),re(J,ae-1,5),re(J,K-4,4),oe=0;oe<K;oe++)re(J,J.bl_tree[2*U[oe]+1],3);V(J,J.dyn_ltree,ce-1),V(J,J.dyn_dtree,ae-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,se+1),Le(_,_.dyn_ltree,_.dyn_dtree)),he(_),G&&me(_)},i._tr_tally=function(_,P,W){return _.pending_buf[_.d_buf+2*_.last_lit]=P>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&P,_.pending_buf[_.l_buf+_.last_lit]=255&W,_.last_lit++,P===0?_.dyn_ltree[2*W]++:(_.matches++,P--,_.dyn_ltree[2*(y[W]+p+1)]++,_.dyn_dtree[2*F(P)]++),_.last_lit===_.lit_bufsize-1},i._tr_align=function(_){re(_,2,3),ee(_,j,Y),function(P){P.bi_valid===16?(ie(P,P.bi_buf),P.bi_buf=0,P.bi_valid=0):8<=P.bi_valid&&(P.pending_buf[P.pending++]=255&P.bi_buf,P.bi_buf>>=8,P.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(s,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,n,i){(function(a){(function(l,o){if(!l.setImmediate){var c,m,h,p,b=1,f={},w=!1,d=l.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(l);x=x&&x.setTimeout?x:l,c={}.toString.call(l.process)==="[object process]"?function(N){process.nextTick(function(){u(N)})}:function(){if(l.postMessage&&!l.importScripts){var N=!0,S=l.onmessage;return l.onmessage=function(){N=!1},l.postMessage("","*"),l.onmessage=S,N}}()?(p="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",j,!1):l.attachEvent("onmessage",j),function(N){l.postMessage(p+N,"*")}):l.MessageChannel?((h=new MessageChannel).port1.onmessage=function(N){u(N.data)},function(N){h.port2.postMessage(N)}):d&&"onreadystatechange"in d.createElement("script")?(m=d.documentElement,function(N){var S=d.createElement("script");S.onreadystatechange=function(){u(N),S.onreadystatechange=null,m.removeChild(S),S=null},m.appendChild(S)}):function(N){setTimeout(u,0,N)},x.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var S=new Array(arguments.length-1),A=0;A<S.length;A++)S[A]=arguments[A+1];var T={callback:N,args:S};return f[b]=T,c(b),b++},x.clearImmediate=g}function g(N){delete f[N]}function u(N){if(w)setTimeout(u,0,N);else{var S=f[N];if(S){w=!0;try{(function(A){var T=A.callback,L=A.args;switch(L.length){case 0:T();break;case 1:T(L[0]);break;case 2:T(L[0],L[1]);break;case 3:T(L[0],L[1],L[2]);break;default:T.apply(o,L)}})(S)}finally{g(N),w=!1}}}}function j(N){N.source===l&&typeof N.data=="string"&&N.data.indexOf(p)===0&&u(+N.data.slice(p.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof vr<"u"?vr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Yo);var am=Yo.exports;const im=zc(am);async function om(e,r){const s=new im,n=s.folder("deckforge-designs");if(!n)throw new Error("Failed to create ZIP folder");for(let a=0;a<e.length;a++){const l=e[a];r==null||r(a+1,e.length);try{const o=await ya(l.canvas_data.objects,{scale:3,format:"png",includeBackground:!0}),m=`${l.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${l.id.slice(0,8)}.png`;n.file(m,o)}catch(o){console.error(`Failed to export design ${l.name}:`,o)}}return await s.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}})}function lm(e,r){const s=URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}const Dt="http://localhost:3000",kr={async list(){const e=localStorage.getItem("token");return(await Be.get(`${Dt}/folders`,{headers:{Authorization:`Bearer ${e}`}})).data.folders},async create(e,r){const s=localStorage.getItem("token");return(await Be.post(`${Dt}/folders`,{name:e,color:r},{headers:{Authorization:`Bearer ${s}`}})).data.folder},async update(e,r){const s=localStorage.getItem("token");return(await Be.patch(`${Dt}/folders/${e}`,r,{headers:{Authorization:`Bearer ${s}`}})).data.folder},async delete(e){const r=localStorage.getItem("token");await Be.delete(`${Dt}/folders/${e}`,{headers:{Authorization:`Bearer ${r}`}})},async moveDesign(e,r){const s=localStorage.getItem("token");await Be.post(`${Dt}/folders/${e}/designs/${r}`,{},{headers:{Authorization:`Bearer ${s}`}})},async removeDesign(e,r){const s=localStorage.getItem("token");await Be.delete(`${Dt}/folders/${e}/designs/${r}`,{headers:{Authorization:`Bearer ${s}`}})}},ra=["#ccff00","#00ffff","#ff00ff","#ff6600","#00ff00","#ff0000","#0000ff","#ffff00"];function cm({selectedFolder:e,onFolderSelect:r}){const[s,n]=k.useState([]),[i,a]=k.useState(!0),[l,o]=k.useState(!1),[c,m]=k.useState(""),[h,p]=k.useState(null),[b,f]=k.useState("");k.useEffect(()=>{w()},[]);const w=async()=>{a(!0);try{const u=await kr.list();n(u)}catch(u){console.error("Failed to load folders:",u)}finally{a(!1)}},d=async()=>{var u,j;if(c.trim())try{const N=ra[Math.floor(Math.random()*ra.length)],S=await kr.create(c.trim(),N);n([...s,S]),m(""),o(!1),Oe({title:" Folder created",description:`${S.name} is ready`})}catch(N){Oe({title:"Failed to create folder",description:((j=(u=N.response)==null?void 0:u.data)==null?void 0:j.error)||"Please try again",variant:"destructive"})}},x=async u=>{if(b.trim())try{const j=await kr.update(u,{name:b.trim()});n(s.map(N=>N.id===u?j:N)),p(null),Oe({title:" Folder renamed"})}catch{Oe({title:"Failed to rename",variant:"destructive"})}},g=async(u,j)=>{if(confirm(`Delete folder "${j}"? Designs will be moved to "All Designs".`))try{await kr.delete(u),n(s.filter(N=>N.id!==u)),e===u&&r(null),Oe({title:" Folder deleted"})}catch{Oe({title:"Failed to delete",variant:"destructive"})}};return t.jsxs("div",{className:"w-64 bg-card border-r border-border h-full flex flex-col",children:[t.jsxs("div",{className:"p-3 border-b border-border",children:[t.jsx("h3",{className:"font-display text-xs uppercase tracking-wider mb-3",children:"Folders"}),t.jsxs(te,{size:"sm",variant:"outline",onClick:()=>o(!l),className:"w-full gap-2",children:[t.jsx(Lc,{className:"w-4 h-4"}),"New Folder"]})]}),t.jsx(vt,{className:"flex-1",children:t.jsxs("div",{className:"p-3 space-y-1",children:[t.jsxs("button",{onClick:()=>r(null),className:`w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors ${e===null?"bg-primary/10 text-primary border border-primary":"hover:bg-secondary border border-transparent"}`,children:[t.jsx(Mc,{className:"w-4 h-4"}),t.jsx("span",{className:"flex-1 text-left",children:"All Designs"})]}),l&&t.jsxs("div",{className:"py-2 space-y-2",children:[t.jsx(Ie,{placeholder:"Folder name...",value:c,onChange:u=>m(u.target.value),onKeyDown:u=>{u.key==="Enter"&&d(),u.key==="Escape"&&o(!1)},autoFocus:!0,className:"h-8 text-sm"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(te,{size:"sm",onClick:d,disabled:!c.trim(),className:"flex-1",children:"Create"}),t.jsx(te,{size:"sm",variant:"ghost",onClick:()=>o(!1),children:"Cancel"})]})]}),i&&t.jsx("div",{className:"flex justify-center py-4",children:t.jsx(ot,{className:"w-5 h-5 animate-spin text-muted-foreground"})}),s.map(u=>t.jsx("div",{className:`group flex items-center gap-2 px-3 py-2 text-sm transition-colors ${e===u.id?"bg-primary/10 text-primary border border-primary":"hover:bg-secondary border border-transparent"}`,children:h===u.id?t.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[t.jsx(Ie,{value:b,onChange:j=>f(j.target.value),onKeyDown:j=>{j.key==="Enter"&&x(u.id),j.key==="Escape"&&p(null)},className:"h-7 text-sm",autoFocus:!0}),t.jsx(te,{size:"sm",variant:"ghost",onClick:()=>x(u.id),className:"h-7 px-2",children:"Save"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>r(u.id),className:"flex-1 flex items-center gap-2",children:[t.jsx($c,{className:"w-4 h-4",style:{color:u.color}}),t.jsx("span",{className:"truncate",children:u.name})]}),t.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex gap-1",children:[t.jsx("button",{onClick:()=>{p(u.id),f(u.name)},className:"p-1 hover:bg-secondary",children:t.jsx(Fs,{className:"w-3 h-3"})}),t.jsx("button",{onClick:()=>g(u.id,u.name),className:"p-1 hover:bg-destructive/10 text-destructive",children:t.jsx(Ot,{className:"w-3 h-3"})})]})]})},u.id))]})})]})}function dm(){const[e,r]=k.useState([]),[s,n]=k.useState(!0),[i,a]=k.useState(new Set),[l,o]=k.useState(!1),[c,m]=k.useState({current:0,total:0}),[h,p]=k.useState(null),{isAuthenticated:b,logout:f}=qt(),{loadDesign:w,resetCanvas:d}=Se(),x=Zt(),g=h?e.filter(C=>C.folder_id===h):e;k.useEffect(()=>{if(!b){x("/auth");return}u()},[b]);const u=async()=>{n(!0);try{const C=await Sr.list();r(C.designs||[])}catch(C){console.error("Failed to load designs:",C)}finally{n(!1)}},j=C=>{w(C.canvas_data),x("/")},N=async(C,R)=>{if(R.stopPropagation(),!!confirm("Delete this design? This cannot be undone."))try{await Sr.delete(C),a(y=>{const D=new Set(y);return D.delete(C),D}),await u()}catch(y){console.error("Delete failed:",y),alert("Failed to delete design")}},S=(C,R)=>{R.stopPropagation(),a(y=>{const D=new Set(y);return D.has(C)?D.delete(C):D.add(C),D})},A=()=>{i.size===g.length?a(new Set):a(new Set(g.map(C=>C.id)))},T=async(C,R,y)=>{y.stopPropagation();const D="http://localhost:3000",Q=localStorage.getItem("token");try{await Be.patch(`${D}/gallery/${C}/visibility`,{is_public:!R},{headers:{Authorization:`Bearer ${Q}`}}),r(M=>M.map(Z=>Z.id===C?{...Z,is_public:!R}:Z)),Oe({title:R?" Design unpublished":" Design published",description:R?"Your design has been removed from the gallery":"Your design is now visible in the public gallery"})}catch(M){console.error("Toggle public failed:",M),Oe({title:"Failed to update visibility",description:"Please try again",variant:"destructive"})}},L=async()=>{const C=e.filter(R=>i.has(R.id));if(C.length===0){Oe({title:"No designs selected",description:"Please select at least one design to export.",variant:"destructive"});return}o(!0),m({current:0,total:C.length});try{const R=await om(C,(Q,M)=>{m({current:Q,total:M})}),D=`deckforge_designs_${Date.now()}.zip`;lm(R,D),Oe({title:" Batch export complete",description:`${C.length} design${C.length!==1?"s":""} exported successfully.`}),a(new Set)}catch(R){console.error("Batch export failed:",R),Oe({title:"Export failed",description:"Failed to export designs. Please try again.",variant:"destructive"})}finally{o(!1),m({current:0,total:0})}},O=()=>{d(),x("/")},U=async()=>{await f(),x("/auth")};if(!b)return null;const Y=i.size>0;return t.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[t.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card shrink-0",children:[t.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest",children:["My ",t.jsx("span",{className:"text-primary",children:"Designs"})]}),t.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[Y&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-sm text-muted-foreground",children:[i.size," selected"]}),t.jsx(te,{size:"sm",variant:"outline",onClick:L,disabled:l,className:"gap-2",children:l?t.jsxs(t.Fragment,{children:[t.jsx(ot,{className:"w-4 h-4 animate-spin"}),"Exporting ",c.current,"/",c.total]}):t.jsxs(t.Fragment,{children:[t.jsx(Mr,{className:"w-4 h-4"}),"Export Selected"]})})]}),t.jsxs(te,{size:"sm",variant:"outline",onClick:O,className:"gap-2",children:[t.jsx(xs,{className:"w-4 h-4"}),"New Design"]}),t.jsx(te,{size:"sm",variant:"ghost",onClick:U,children:"Logout"})]})]}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsx(cm,{selectedFolder:h,onFolderSelect:p}),t.jsx("div",{className:"flex-1 overflow-auto",children:t.jsx("div",{className:"container mx-auto px-6 py-8",children:s?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(ot,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):g.length===0?t.jsxs("div",{className:"text-center py-20 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-display uppercase tracking-widest mb-2",children:"No Designs Yet"}),t.jsx("p",{className:"text-muted-foreground",children:"Create your first custom deck design!"})]}),t.jsxs(te,{onClick:O,size:"lg",className:"gap-2",children:[t.jsx(xs,{className:"w-5 h-5"}),"Create Design"]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[t.jsx(te,{size:"sm",variant:"outline",onClick:A,className:"gap-2",children:i.size===g.length?t.jsxs(t.Fragment,{children:[t.jsx(jn,{className:"w-4 h-4"}),"Deselect All"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ar,{className:"w-4 h-4"}),"Select All"]})}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:[g.length," design",g.length!==1?"s":"",h&&" in folder"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(C=>{const R=i.has(C.id);return t.jsxs("div",{className:`group border transition-colors bg-card overflow-hidden cursor-pointer relative ${R?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary"}`,onClick:()=>j(C),children:[t.jsx("div",{className:"absolute top-2 left-2 z-10",onClick:y=>S(C.id,y),children:t.jsx("div",{className:`w-6 h-6 border-2 flex items-center justify-center transition-colors cursor-pointer ${R?"bg-primary border-primary":"bg-background border-border hover:border-primary"}`,children:R&&t.jsx(jn,{className:"w-5 h-5 text-primary-foreground"})})}),t.jsx("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden",children:C.thumbnail_url?t.jsx("img",{src:C.thumbnail_url,alt:C.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:C.name})}),C.is_public&&t.jsx("div",{className:"absolute top-2 right-2 z-10",children:t.jsxs("div",{className:"bg-primary text-primary-foreground px-2 py-1 rounded text-[10px] uppercase tracking-wider flex items-center gap-1",children:[t.jsx(Nn,{className:"w-3 h-3"}),"Public"]})}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-display text-sm uppercase tracking-widest truncate",children:C.name}),C.description&&t.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:C.description}),t.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 uppercase tracking-widest",children:new Date(C.updated_at).toLocaleDateString()})]}),t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsxs(te,{size:"sm",variant:"outline",className:"flex-1 gap-1",onClick:y=>{y.stopPropagation(),j(C)},children:[t.jsx(Tr,{className:"w-3 h-3"}),"Open"]}),t.jsx(te,{size:"sm",variant:C.is_public?"default":"outline",onClick:y=>T(C.id,C.is_public,y),title:C.is_public?"Make Private":"Publish to Gallery",children:C.is_public?t.jsx(Nn,{className:"w-3 h-3"}):t.jsx(Ls,{className:"w-3 h-3"})}),t.jsx(te,{size:"sm",variant:"destructive",onClick:y=>N(C.id,y),children:t.jsx(Ot,{className:"w-3 h-3"})})]})})]})]},C.id)})})]})})})]})]})}const Os=[{id:"skull-flames",name:"Skull & Flames",description:"Classic skate punk aesthetic with skull and flame stickers",tags:["punk","edgy","classic"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#000000"},{type:"shape",shapeType:"rect",x:0,y:120,width:96,height:54,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ff0000"},{type:"sticker",x:28,y:80,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Skull",fill:"#ffffff",strokeWidth:0,solidFill:!0},{type:"sticker",x:10,y:200,width:30,height:30,rotation:-15,opacity:1,scaleX:1,scaleY:1,iconName:"Flame",fill:"#ff4500",strokeWidth:0,solidFill:!0},{type:"sticker",x:56,y:200,width:30,height:30,rotation:15,opacity:1,scaleX:1,scaleY:1,iconName:"Flame",fill:"#ff4500",strokeWidth:0,solidFill:!0}]},{id:"gradient-fade",name:"Gradient Fade",description:"Modern gradient design with smooth color transitions",tags:["modern","gradient","clean"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fillType:"linear-gradient",gradientStops:[{offset:0,color:"#667eea"},{offset:.5,color:"#764ba2"},{offset:1,color:"#f093fb"}],gradientAngle:180},{type:"shape",shapeType:"circle",x:23,y:122,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff",glow:{enabled:!0,radius:20,color:"#ffffff",intensity:.8}}]},{id:"retro-vinyl",name:"Retro Vinyl",description:"Vintage music-inspired design with record and music icons",tags:["retro","music","vintage"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#f4e8d8"},{type:"shape",shapeType:"rect",x:0,y:140,width:96,height:14,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#8b4513"},{type:"sticker",x:23,y:60,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Disc",fill:"#2c2c2c",strokeWidth:0,solidFill:!0},{type:"sticker",x:12,y:200,width:25,height:25,rotation:-10,opacity:1,scaleX:1,scaleY:1,iconName:"Music",fill:"#8b4513",strokeWidth:0,solidFill:!0},{type:"sticker",x:59,y:195,width:25,height:25,rotation:10,opacity:1,scaleX:1,scaleY:1,iconName:"Music",fill:"#8b4513",strokeWidth:0,solidFill:!0}]},{id:"neon-lightning",name:"Neon Lightning",description:"Electric neon design with lightning bolts",tags:["neon","electric","bold"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#1a1a2e"},{type:"sticker",x:18,y:90,width:60,height:60,rotation:15,opacity:1,scaleX:1,scaleY:1,iconName:"Zap",fill:"#00ff88",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:15,color:"#00ff88",intensity:1}},{type:"sticker",x:8,y:180,width:40,height:40,rotation:-25,opacity:.7,scaleX:1,scaleY:1,iconName:"Zap",fill:"#ff00ff",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:12,color:"#ff00ff",intensity:.9}},{type:"sticker",x:48,y:170,width:40,height:40,rotation:30,opacity:.7,scaleX:1,scaleY:1,iconName:"Zap",fill:"#00ddff",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:12,color:"#00ddff",intensity:.9}}]},{id:"minimalist-shapes",name:"Minimalist Shapes",description:"Clean geometric design with simple shapes",tags:["minimal","geometric","clean"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff"},{type:"shape",shapeType:"circle",x:8,y:70,width:80,height:80,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#000000"},{type:"sticker",x:28,y:180,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Triangle",fill:"#ff0000",strokeWidth:0,solidFill:!0}]},{id:"blank",name:"Blank Canvas",description:"Start from scratch with a clean white deck",tags:["blank","custom"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff"}]}];function um(e){if(!e)return Os;const r=e.toLowerCase();return Os.filter(s=>s.name.toLowerCase().includes(r)||s.description.toLowerCase().includes(r)||s.tags.some(n=>n.toLowerCase().includes(r)))}function fm(){const[e,r]=k.useState(""),{loadDesign:s}=Se(),n=Zt(),i=um(e),a=l=>{const o=Os.find(c=>c.id===l);o&&(s({objects:o.objects,name:o.name}),n("/"))};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card",children:[t.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest flex items-center gap-2",children:[t.jsx(it,{className:"w-5 h-5 text-primary"}),t.jsx("span",{children:"Templates"})]}),t.jsx("div",{className:"ml-auto flex items-center gap-4",children:t.jsx(te,{size:"sm",variant:"outline",onClick:()=>n("/"),children:"Back to Editor"})})]}),t.jsxs("div",{className:"container mx-auto px-6 py-8",children:[t.jsx("div",{className:"max-w-md mb-8",children:t.jsxs("div",{className:"relative",children:[t.jsx(Bc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),t.jsx(Ie,{type:"text",placeholder:"Search templates...",value:e,onChange:l=>r(l.target.value),className:"pl-10"})]})}),i.length===0?t.jsx("div",{className:"text-center py-20",children:t.jsx("p",{className:"text-muted-foreground",children:"No templates found"})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:i.map(l=>t.jsxs("div",{className:"group border border-border hover:border-primary transition-colors bg-card overflow-hidden cursor-pointer",onClick:()=>a(l.id),children:[t.jsxs("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden relative",children:[l.thumbnail?t.jsx("img",{src:l.thumbnail,alt:l.name,className:"w-full h-full object-cover"}):t.jsxs("div",{className:"text-center p-4",children:[t.jsx(it,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),t.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:l.name})]}),t.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:t.jsx(te,{size:"sm",variant:"default",children:"Use Template"})})]}),t.jsxs("div",{className:"p-4 space-y-2",children:[t.jsx("h3",{className:"font-display text-sm uppercase tracking-widest",children:l.name}),t.jsx("p",{className:"text-xs text-muted-foreground",children:l.description}),t.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:l.tags.map(o=>t.jsx("span",{className:"px-2 py-0.5 text-[10px] uppercase tracking-wider bg-primary/10 text-primary rounded",children:o},o))})]})]},l.id))})]})]})}const ps="http://localhost:3000";function hm({designId:e}){const[r,s]=k.useState([]),[n,i]=k.useState(""),[a,l]=k.useState(!0),[o,c]=k.useState(!1),{isAuthenticated:m}=qt();k.useEffect(()=>{h()},[e]);const h=async()=>{l(!0);try{const f=await Be.get(`${ps}/comments/${e}`);s(f.data.comments||[])}catch(f){console.error("Failed to load comments:",f)}finally{l(!1)}},p=async f=>{var w,d;if(f.preventDefault(),!m){Oe({title:"Login required",description:"Please login to comment",variant:"destructive"});return}if(n.trim()){c(!0);try{const x=localStorage.getItem("token"),g=await Be.post(`${ps}/comments/${e}`,{content:n},{headers:{Authorization:`Bearer ${x}`}});s([...r,g.data.comment]),i(""),Oe({title:" Comment posted",description:"Your comment has been added"})}catch(x){console.error("Failed to post comment:",x),Oe({title:"Failed to post comment",description:((d=(w=x.response)==null?void 0:w.data)==null?void 0:d.error)||"Please try again",variant:"destructive"})}finally{c(!1)}}},b=async f=>{if(confirm("Delete this comment?"))try{const w=localStorage.getItem("token");await Be.delete(`${ps}/comments/${f}`,{headers:{Authorization:`Bearer ${w}`}}),s(r.filter(d=>d.id!==f)),Oe({title:" Comment deleted",description:"Your comment has been removed"})}catch(w){console.error("Failed to delete comment:",w),Oe({title:"Failed to delete",description:"Please try again",variant:"destructive"})}};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Uc,{className:"w-5 h-5"}),t.jsxs("h3",{className:"font-display text-sm uppercase tracking-wider",children:["Comments (",r.length,")"]})]}),m?t.jsxs("form",{onSubmit:p,className:"space-y-2",children:[t.jsx(yl,{value:n,onChange:f=>i(f.target.value),placeholder:"Add a comment...",className:"min-h-[80px] resize-none",disabled:o}),t.jsx("div",{className:"flex justify-end",children:t.jsx(te,{type:"submit",size:"sm",disabled:!n.trim()||o,className:"gap-2",children:o?t.jsxs(t.Fragment,{children:[t.jsx(ot,{className:"w-3 h-3 animate-spin"}),"Posting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Hc,{className:"w-3 h-3"}),"Post Comment"]})})})]}):t.jsx("div",{className:"border border-border p-4 text-center text-sm text-muted-foreground",children:"Please login to comment"}),t.jsx("div",{className:"space-y-3",children:a?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(ot,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):r.length===0?t.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No comments yet. Be the first to comment!"}):r.map(f=>t.jsxs("div",{className:"border border-border p-3 space-y-2 bg-secondary/50",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:f.content})}),m&&f.user_id===localStorage.getItem("userId")&&t.jsx(te,{size:"sm",variant:"ghost",onClick:()=>b(f.id),className:"shrink-0",children:t.jsx(Ot,{className:"w-3 h-3"})})]}),t.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:t.jsx("span",{children:new Date(f.created_at).toLocaleString()})})]},f.id))})]})}const Cr="http://localhost:3000";function pm(){const[e,r]=k.useState([]),[s,n]=k.useState(!0),[i,a]=k.useState("recent"),[l,o]=k.useState(new Set),[c,m]=k.useState(null),{isAuthenticated:h}=qt(),{loadDesign:p}=Se(),b=Zt();k.useEffect(()=>{f()},[i]);const f=async()=>{n(!0);try{const x=await Be.get(`${Cr}/gallery?sort=${i}&limit=50`);if(r(x.data.designs||[]),h){const g=new Set;for(const u of x.data.designs||[])try{const j=localStorage.getItem("token");(await Be.get(`${Cr}/gallery/${u.id}/liked`,{headers:{Authorization:`Bearer ${j}`}})).data.liked&&g.add(u.id)}catch{}o(g)}}catch(x){console.error("Failed to load gallery:",x)}finally{n(!1)}},w=async(x,g)=>{var N,S;if(g.stopPropagation(),!h){Oe({title:"Login required",description:"Please login to like designs",variant:"destructive"}),b("/auth");return}const u=localStorage.getItem("token"),j=l.has(x);try{j?(await Be.delete(`${Cr}/gallery/${x}/like`,{headers:{Authorization:`Bearer ${u}`}}),o(A=>{const T=new Set(A);return T.delete(x),T}),r(A=>A.map(T=>T.id===x?{...T,like_count:T.like_count-1}:T))):(await Be.post(`${Cr}/gallery/${x}/like`,{},{headers:{Authorization:`Bearer ${u}`}}),o(A=>new Set(A).add(x)),r(A=>A.map(T=>T.id===x?{...T,like_count:T.like_count+1}:T)))}catch(A){console.error("Like failed:",A),Oe({title:"Action failed",description:((S=(N=A.response)==null?void 0:N.data)==null?void 0:S.error)||"Please try again",variant:"destructive"})}},d=(x,g)=>{g.stopPropagation(),p(x.canvas_data),b("/"),Oe({title:" Design loaded",description:"Remix and make it your own!"})};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card",children:[t.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest",children:["Design ",t.jsx("span",{className:"text-primary",children:"Gallery"})]}),t.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(te,{size:"sm",variant:i==="recent"?"default":"outline",onClick:()=>a("recent"),className:"gap-2",children:[t.jsx(Ms,{className:"w-4 h-4"}),"Recent"]}),t.jsxs(te,{size:"sm",variant:i==="popular"?"default":"outline",onClick:()=>a("popular"),className:"gap-2",children:[t.jsx(Vc,{className:"w-4 h-4"}),"Popular"]}),t.jsxs(te,{size:"sm",variant:i==="liked"?"default":"outline",onClick:()=>a("liked"),className:"gap-2",children:[t.jsx(Wc,{className:"w-4 h-4"}),"Most Liked"]})]}),t.jsx(te,{size:"sm",variant:"outline",onClick:()=>b("/"),children:"Create Design"}),!h&&t.jsx(te,{size:"sm",variant:"ghost",onClick:()=>b("/auth"),children:"Login"})]})]}),t.jsx("div",{className:"container mx-auto px-6 py-8",children:s?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(ot,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):e.length===0?t.jsxs("div",{className:"text-center py-20 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-display uppercase tracking-widest mb-2",children:"No Public Designs Yet"}),t.jsx("p",{className:"text-muted-foreground",children:"Be the first to share a design with the community!"})]}),t.jsx(te,{onClick:()=>b("/"),size:"lg",children:"Create & Share"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-6",children:t.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.length," design",e.length!==1?"s":"","  Community creations"]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(x=>{const g=l.has(x.id);return t.jsxs("div",{className:"group border border-border hover:border-primary transition-colors bg-card overflow-hidden cursor-pointer",onClick:()=>m(x),children:[t.jsxs("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden relative",children:[x.thumbnail_url?t.jsx("img",{src:x.thumbnail_url,alt:x.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:x.name}),t.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[t.jsxs("div",{className:"bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white flex items-center gap-1",children:[t.jsx(Tr,{className:"w-3 h-3"}),x.view_count]}),t.jsxs("div",{className:"bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white flex items-center gap-1",children:[t.jsx(rr,{className:"w-3 h-3"}),x.like_count]})]})]}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-display text-sm uppercase tracking-widest truncate",children:x.name}),x.description&&t.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:x.description}),t.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 uppercase tracking-widest",children:new Date(x.created_at).toLocaleDateString()})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(te,{size:"sm",variant:"outline",className:"flex-1 gap-1",onClick:u=>d(x,u),children:[t.jsx(kn,{className:"w-3 h-3"}),"Remix"]}),t.jsx(te,{size:"sm",variant:g?"default":"outline",onClick:u=>w(x.id,u),className:g?"text-red-500":"",children:t.jsx(rr,{className:`w-3 h-3 ${g?"fill-current":""}`})})]})]})]},x.id)})})]})}),c&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>m(null)}),t.jsxs("div",{className:"relative bg-card border-2 border-border shadow-xl w-full max-w-4xl max-h-[90vh] overflow-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between z-10",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"font-display text-lg uppercase tracking-wider",children:c.name}),c.description&&t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:c.description})]}),t.jsx("button",{onClick:()=>m(null),className:"text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(hr,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden border border-border",children:c.thumbnail_url?t.jsx("img",{src:c.thumbnail_url,alt:c.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:c.name})}),t.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-border",children:[t.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Tr,{className:"w-4 h-4"}),c.view_count," views"]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(rr,{className:"w-4 h-4"}),c.like_count," likes"]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(te,{size:"sm",variant:"outline",onClick:x=>{x.stopPropagation(),d(c,x),m(null)},className:"gap-2",children:[t.jsx(kn,{className:"w-4 h-4"}),"Remix"]}),t.jsx(te,{size:"sm",variant:l.has(c.id)?"default":"outline",onClick:x=>w(c.id,x),children:t.jsx(rr,{className:`w-4 h-4 ${l.has(c.id)?"fill-current":""}`})})]})]}),t.jsx(hm,{designId:c.id})]})]})]})]})}function mm(){const{token:e}=Yc(),r=Zt(),{loadDesign:s}=Se(),[n,i]=k.useState(null),[a,l]=k.useState(!0),[o,c]=k.useState(null);k.useEffect(()=>{e&&m()},[e]);const m=async()=>{var h,p;if(e){l(!0),c(null);try{const b=await vl.getSharedDesign(e);i(b),s(b.canvas_data)}catch(b){console.error("Failed to load shared design:",b),c(((p=(h=b.response)==null?void 0:h.data)==null?void 0:p.error)||"Failed to load shared design")}finally{l(!1)}}};return a?t.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background",children:t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx(ot,{className:"w-12 h-12 mx-auto animate-spin text-primary"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading shared design..."})]})}):o||!n?t.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background",children:t.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[t.jsx(Gc,{className:"w-12 h-12 mx-auto text-destructive"}),t.jsx("h2",{className:"font-display text-xl uppercase tracking-wider",children:"Design Not Found"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:o||"This shared design link may have been revoked or does not exist."}),t.jsxs(te,{onClick:()=>r("/"),className:"gap-2",children:[t.jsx(Kc,{className:"w-4 h-4"}),"Go to DeckForge"]})]})}):t.jsxs("div",{className:"h-screen w-screen flex flex-col bg-background overflow-hidden",children:[t.jsxs("header",{className:"h-12 border-b border-border flex items-center px-4 bg-card shrink-0",children:[t.jsxs("h1",{className:"font-display text-lg uppercase tracking-widest text-foreground",children:["Deck",t.jsx("span",{className:"text-primary",children:"Forge"})]}),t.jsx("div",{className:"ml-4 flex items-center gap-2",children:t.jsx("span",{className:"tag-brutal",children:"Shared"})}),t.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[t.jsxs("div",{className:"text-right hidden sm:block",children:[t.jsx("h2",{className:"text-sm font-medium",children:n.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["View only  Created ",new Date(n.created_at).toLocaleDateString()]})]}),t.jsx(te,{size:"sm",variant:"outline",onClick:()=>r("/"),className:"gap-2",children:"Create Your Own"})]})]}),t.jsx("div",{className:"flex-1 flex overflow-hidden",children:t.jsx(ms,{})}),t.jsx("footer",{className:"h-10 border-t border-border flex items-center justify-center px-4 bg-card shrink-0",children:t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Made with ",t.jsx("span",{className:"text-primary",children:"DeckForge"}),"  Fingerboard Graphics Editor"]})})]})}const xm=()=>{const e=qc();return k.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),t.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),t.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},gm=new Kf,ym=()=>t.jsx(Zf,{children:t.jsx(qf,{client:gm,children:t.jsxs(bf,{children:[t.jsx(Sd,{}),t.jsx(Rd,{}),t.jsx(Zc,{children:t.jsxs(Xc,{children:[t.jsx(kt,{path:"/",element:t.jsx(sm,{})}),t.jsx(kt,{path:"/auth",element:t.jsx(nm,{})}),t.jsx(kt,{path:"/designs",element:t.jsx(dm,{})}),t.jsx(kt,{path:"/templates",element:t.jsx(fm,{})}),t.jsx(kt,{path:"/gallery",element:t.jsx(pm,{})}),t.jsx(kt,{path:"/share/:token",element:t.jsx(mm,{})}),t.jsx(kt,{path:"*",element:t.jsx(xm,{})})]})})]})})});Oa(document.getElementById("root")).render(t.jsx(ym,{}));export{be as S};
