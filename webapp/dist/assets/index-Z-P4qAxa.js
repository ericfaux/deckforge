const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/modals-CF30nvay.js","assets/vendor-ui-DrJlhI9e.js","assets/vendor-supabase-CoxeBSpk.js","assets/AnimationPreview-Dp9at5jx.js","assets/vendor-react-CsliSb-b.js","assets/ColorExtractorModal-Yz9AxTz9.js","assets/SmartDuplicateModal-Rrwbn77z.js","assets/TemplateGalleryModal-Bs9ZD5JF.js","assets/DeckGenerator3D-DQNmlrze.js"])))=>i.map(i=>d[i]);
var z1=Object.defineProperty;var yf=r=>{throw TypeError(r)};var B1=(r,e,t)=>e in r?z1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var $i=(r,e,t)=>B1(r,typeof e!="symbol"?e+"":e,t),$c=(r,e,t)=>e.has(r)||yf("Cannot "+t);var oe=(r,e,t)=>($c(r,e,"read from private field"),t?t.call(r):e.get(r)),Ke=(r,e,t)=>e.has(r)?yf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Le=(r,e,t,n)=>($c(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Jt=(r,e,t)=>($c(r,e,"access private method"),t);var _o=(r,e,t,n)=>({set _(a){Le(r,e,a,t)},get _(){return oe(r,e,n)}});import{j as s,c as Jp,a as Nn,u as Dt,P as vt,B as G1,b as ts,d as Sa,e as it,f as ha,R as H1,g as em,h as fa,i as U1,k as at,l as W1,m as V1,D as tm,n as ol,o as le,p as _t,S as Qn,q as rm,r as nm,s as yi,t as vi,v as jn,w as Xc,x as Y1,L as fe,I as dt,y as $1,z as X1,A as q1,F as K1,C as sm,E as Q1,G as Z1,H as Go,J as J1,K as Ho,M as Uo,N as Wo,_ as Tr,W as dd,O as qo,Q as im,T as vf,U as e2,V as dr,X as Mt,Y as Hd,Z as t2,$ as Qe,a0 as qc,a1 as wf}from"./modals-CF30nvay.js";import{a as Ud,r as A,b as Ze,X as Ca,an as r2,ao as bf,ap as am,aq as n2,aa as Wd,ar as om,as as lm,af as Vd,at as Yd,au as $d,ae as ll,a5 as Ko,av as Qo,aw as s2,ax as i2,ay as a2,az as o2,aA as l2,aB as c2,aC as d2,V as _f,aD as u2,aE as h2,aF as f2,aG as p2,g as cl,aH as m2,aI as g2,aJ as x2,p as y2,D as v2,F as w2,B as b2,o as _2,n as S2,aK as C2,aL as N2,z as j2,y as k2,x as cm,w as Zo,t as Xd,s as sn,q as cr,H as E2,Q as P2,P as A2,O as T2,N as R2,K as D2,J as O2,I as dm,A as I2,aM as M2,aN as L2,aO as F2,aP as z2,a2 as B2,a1 as G2,a0 as H2,$ as U2,_ as W2,Y as V2,E as Zn,aQ as Y2,aR as $2,aS as X2,aT as q2,u as de,a3 as ur,T as kn,aU as um,aV as K2,h as Q2,L as hm,aW as Z2,aX as J2,aY as pa,j as fm,ad as ud,aZ as ey,ah as Hr,a_ as ty,a$ as ry,k as ny,l as sy,a9 as pm,b0 as mm,b1 as iy,b2 as gm,b3 as xm,b4 as ay,b5 as ym,b6 as oy,b7 as ly,m as cy,G as dy,i as uy,b8 as vm,U as wm,c as bm,b9 as hy,a6 as qd,a7 as Jo,ba as fy,bb as py,bc as my,bd as gy,ag as xy,be as Sf,ab as _m,bf as yy,bg as Cf,bh as Nf,bi as So,bj as Sm,bk as vy,bl as Cm,bm as wy,bn as jf,bo as kf,bp as Nm,bq as by,br as _y,bs as Kd,bt as Sy,C as Ef,bu as jm,bv as Cy,bw as Ny,bx as Qd,by as jy,bz as km,bA as Pf,bB as ky,bC as Vo}from"./vendor-ui-DrJlhI9e.js";import{u as Rr,a as Em,b as Ey,B as Py,R as Ay,c as Er}from"./vendor-react-CsliSb-b.js";import"./vendor-supabase-CoxeBSpk.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Pm,Af=Ud;Pm=Af.createRoot,Af.hydrateRoot;function Tf(r){const e=Ty(r),t=A.forwardRef((n,a)=>{const{children:l,...c}=n,d=A.Children.toArray(l),u=d.find(Dy);if(u){const f=u.props.children,p=d.map(m=>m===u?A.Children.count(f)>1?A.Children.only(null):A.isValidElement(f)?f.props.children:null:m);return s.jsx(e,{...c,ref:a,children:A.isValidElement(f)?A.cloneElement(f,void 0,p):null})}return s.jsx(e,{...c,ref:a,children:l})});return t.displayName=`${r}.Slot`,t}function Ty(r){const e=A.forwardRef((t,n)=>{const{children:a,...l}=t;if(A.isValidElement(a)){const c=Iy(a),d=Oy(l,a.props);return a.type!==A.Fragment&&(d.ref=n?Jp(n,c):c),A.cloneElement(a,d)}return A.Children.count(a)>1?A.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var Ry=Symbol("radix.slottable");function Dy(r){return A.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Ry}function Oy(r,e){const t={...e};for(const n in e){const a=r[n],l=e[n];/^on[A-Z]/.test(n)?a&&l?t[n]=(...d)=>{const u=l(...d);return a(...d),u}:a&&(t[n]=a):n==="style"?t[n]={...a,...l}:n==="className"&&(t[n]=[a,l].filter(Boolean).join(" "))}return{...r,...t}}function Iy(r){var n,a;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(a=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:a.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function Zd(r){const e=r+"CollectionProvider",[t,n]=Nn(e),[a,l]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=v=>{const{scope:w,children:C}=v,_=Ze.useRef(null),N=Ze.useRef(new Map).current;return s.jsx(a,{scope:w,itemMap:N,collectionRef:_,children:C})};c.displayName=e;const d=r+"CollectionSlot",u=Tf(d),f=Ze.forwardRef((v,w)=>{const{scope:C,children:_}=v,N=l(d,C),E=Dt(w,N.collectionRef);return s.jsx(u,{ref:E,children:_})});f.displayName=d;const p=r+"CollectionItemSlot",m="data-radix-collection-item",x=Tf(p),y=Ze.forwardRef((v,w)=>{const{scope:C,children:_,...N}=v,E=Ze.useRef(null),R=Dt(w,E),O=l(p,C);return Ze.useEffect(()=>(O.itemMap.set(E,{ref:E,...N}),()=>void O.itemMap.delete(E))),s.jsx(x,{[m]:"",ref:R,children:_})});y.displayName=p;function S(v){const w=l(r+"CollectionConsumer",v);return Ze.useCallback(()=>{const _=w.collectionRef.current;if(!_)return[];const N=Array.from(_.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((O,I)=>N.indexOf(O.ref.current)-N.indexOf(I.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:c,Slot:f,ItemSlot:y},S,n]}var My=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ly="VisuallyHidden",dl=A.forwardRef((r,e)=>s.jsx(vt.span,{...r,ref:e,style:{...My,...r.style}}));dl.displayName=Ly;var Fy=dl,Jd="ToastProvider",[eu,zy,By]=Zd("Toast"),[Am]=Nn("Toast",[By]),[Gy,ul]=Am(Jd),Tm=r=>{const{__scopeToast:e,label:t="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:l=50,children:c}=r,[d,u]=A.useState(null),[f,p]=A.useState(0),m=A.useRef(!1),x=A.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Jd}\`. Expected non-empty \`string\`.`),s.jsx(eu.Provider,{scope:e,children:s.jsx(Gy,{scope:e,label:t,duration:n,swipeDirection:a,swipeThreshold:l,toastCount:f,viewport:d,onViewportChange:u,onToastAdd:A.useCallback(()=>p(y=>y+1),[]),onToastRemove:A.useCallback(()=>p(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:x,children:c})})};Tm.displayName=Jd;var Rm="ToastViewport",Hy=["F8"],hd="toast.viewportPause",fd="toast.viewportResume",Dm=A.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:n=Hy,label:a="Notifications ({hotkey})",...l}=r,c=ul(Rm,t),d=zy(t),u=A.useRef(null),f=A.useRef(null),p=A.useRef(null),m=A.useRef(null),x=Dt(e,m,c.onViewportChange),y=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=c.toastCount>0;A.useEffect(()=>{const w=C=>{var N;n.length!==0&&n.every(E=>C[E]||C.code===E)&&((N=m.current)==null||N.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),A.useEffect(()=>{const w=u.current,C=m.current;if(S&&w&&C){const _=()=>{if(!c.isClosePausedRef.current){const O=new CustomEvent(hd);C.dispatchEvent(O),c.isClosePausedRef.current=!0}},N=()=>{if(c.isClosePausedRef.current){const O=new CustomEvent(fd);C.dispatchEvent(O),c.isClosePausedRef.current=!1}},E=O=>{!w.contains(O.relatedTarget)&&N()},R=()=>{w.contains(document.activeElement)||N()};return w.addEventListener("focusin",_),w.addEventListener("focusout",E),w.addEventListener("pointermove",_),w.addEventListener("pointerleave",R),window.addEventListener("blur",_),window.addEventListener("focus",N),()=>{w.removeEventListener("focusin",_),w.removeEventListener("focusout",E),w.removeEventListener("pointermove",_),w.removeEventListener("pointerleave",R),window.removeEventListener("blur",_),window.removeEventListener("focus",N)}}},[S,c.isClosePausedRef]);const v=A.useCallback(({tabbingDirection:w})=>{const _=d().map(N=>{const E=N.ref.current,R=[E,...tv(E)];return w==="forwards"?R:R.reverse()});return(w==="forwards"?_.reverse():_).flat()},[d]);return A.useEffect(()=>{const w=m.current;if(w){const C=_=>{var R,O,I;const N=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!N){const G=document.activeElement,F=_.shiftKey;if(_.target===w&&F){(R=f.current)==null||R.focus();return}const D=v({tabbingDirection:F?"backwards":"forwards"}),H=D.findIndex(k=>k===G);Kc(D.slice(H+1))?_.preventDefault():F?(O=f.current)==null||O.focus():(I=p.current)==null||I.focus()}};return w.addEventListener("keydown",C),()=>w.removeEventListener("keydown",C)}},[d,v]),s.jsxs(G1,{ref:u,role:"region","aria-label":a.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&s.jsx(pd,{ref:f,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"forwards"});Kc(w)}}),s.jsx(eu.Slot,{scope:t,children:s.jsx(vt.ol,{tabIndex:-1,...l,ref:x})}),S&&s.jsx(pd,{ref:p,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"backwards"});Kc(w)}})]})});Dm.displayName=Rm;var Om="ToastFocusProxy",pd=A.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:n,...a}=r,l=ul(Om,t);return s.jsx(dl,{tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:c=>{var f;const d=c.relatedTarget;!((f=l.viewport)!=null&&f.contains(d))&&n()}})});pd.displayName=Om;var Na="Toast",Uy="toast.swipeStart",Wy="toast.swipeMove",Vy="toast.swipeCancel",Yy="toast.swipeEnd",Im=A.forwardRef((r,e)=>{const{forceMount:t,open:n,defaultOpen:a,onOpenChange:l,...c}=r,[d,u]=ts({prop:n,defaultProp:a??!0,onChange:l,caller:Na});return s.jsx(Sa,{present:t||d,children:s.jsx(qy,{open:d,...c,ref:e,onClose:()=>u(!1),onPause:ha(r.onPause),onResume:ha(r.onResume),onSwipeStart:it(r.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:it(r.onSwipeMove,f=>{const{x:p,y:m}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:it(r.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:it(r.onSwipeEnd,f=>{const{x:p,y:m}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),u(!1)})})})});Im.displayName=Na;var[$y,Xy]=Am(Na,{onClose(){}}),qy=A.forwardRef((r,e)=>{const{__scopeToast:t,type:n="foreground",duration:a,open:l,onClose:c,onEscapeKeyDown:d,onPause:u,onResume:f,onSwipeStart:p,onSwipeMove:m,onSwipeCancel:x,onSwipeEnd:y,...S}=r,v=ul(Na,t),[w,C]=A.useState(null),_=Dt(e,k=>C(k)),N=A.useRef(null),E=A.useRef(null),R=a||v.duration,O=A.useRef(0),I=A.useRef(R),G=A.useRef(0),{onToastAdd:F,onToastRemove:Y}=v,re=ha(()=>{var T;(w==null?void 0:w.contains(document.activeElement))&&((T=v.viewport)==null||T.focus()),c()}),D=A.useCallback(k=>{!k||k===1/0||(window.clearTimeout(G.current),O.current=new Date().getTime(),G.current=window.setTimeout(re,k))},[re]);A.useEffect(()=>{const k=v.viewport;if(k){const T=()=>{D(I.current),f==null||f()},Z=()=>{const W=new Date().getTime()-O.current;I.current=I.current-W,window.clearTimeout(G.current),u==null||u()};return k.addEventListener(hd,Z),k.addEventListener(fd,T),()=>{k.removeEventListener(hd,Z),k.removeEventListener(fd,T)}}},[v.viewport,R,u,f,D]),A.useEffect(()=>{l&&!v.isClosePausedRef.current&&D(R)},[l,R,v.isClosePausedRef,D]),A.useEffect(()=>(F(),()=>Y()),[F,Y]);const H=A.useMemo(()=>w?Hm(w):null,[w]);return v.viewport?s.jsxs(s.Fragment,{children:[H&&s.jsx(Ky,{__scopeToast:t,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:H}),s.jsx($y,{scope:t,onClose:re,children:Ud.createPortal(s.jsx(eu.ItemSlot,{scope:t,children:s.jsx(H1,{asChild:!0,onEscapeKeyDown:it(d,()=>{v.isFocusedToastEscapeKeyDownRef.current||re(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(vt.li,{tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":v.swipeDirection,...S,ref:_,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:it(r.onKeyDown,k=>{k.key==="Escape"&&(d==null||d(k.nativeEvent),k.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,re()))}),onPointerDown:it(r.onPointerDown,k=>{k.button===0&&(N.current={x:k.clientX,y:k.clientY})}),onPointerMove:it(r.onPointerMove,k=>{if(!N.current)return;const T=k.clientX-N.current.x,Z=k.clientY-N.current.y,W=!!E.current,ee=["left","right"].includes(v.swipeDirection),J=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,V=ee?J(0,T):0,U=ee?0:J(0,Z),X=k.pointerType==="touch"?10:2,Ce={x:V,y:U},Ne={originalEvent:k,delta:Ce};W?(E.current=Ce,Co(Wy,m,Ne,{discrete:!1})):Rf(Ce,v.swipeDirection,X)?(E.current=Ce,Co(Uy,p,Ne,{discrete:!1}),k.target.setPointerCapture(k.pointerId)):(Math.abs(T)>X||Math.abs(Z)>X)&&(N.current=null)}),onPointerUp:it(r.onPointerUp,k=>{const T=E.current,Z=k.target;if(Z.hasPointerCapture(k.pointerId)&&Z.releasePointerCapture(k.pointerId),E.current=null,N.current=null,T){const W=k.currentTarget,ee={originalEvent:k,delta:T};Rf(T,v.swipeDirection,v.swipeThreshold)?Co(Yy,y,ee,{discrete:!0}):Co(Vy,x,ee,{discrete:!0}),W.addEventListener("click",J=>J.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),Ky=r=>{const{__scopeToast:e,children:t,...n}=r,a=ul(Na,e),[l,c]=A.useState(!1),[d,u]=A.useState(!1);return Jy(()=>c(!0)),A.useEffect(()=>{const f=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(f)},[]),d?null:s.jsx(em,{asChild:!0,children:s.jsx(dl,{...n,children:l&&s.jsxs(s.Fragment,{children:[a.label," ",t]})})})},Qy="ToastTitle",Mm=A.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return s.jsx(vt.div,{...n,ref:e})});Mm.displayName=Qy;var Zy="ToastDescription",Lm=A.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return s.jsx(vt.div,{...n,ref:e})});Lm.displayName=Zy;var Fm="ToastAction",zm=A.forwardRef((r,e)=>{const{altText:t,...n}=r;return t.trim()?s.jsx(Gm,{altText:t,asChild:!0,children:s.jsx(tu,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Fm}\`. Expected non-empty \`string\`.`),null)});zm.displayName=Fm;var Bm="ToastClose",tu=A.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r,a=Xy(Bm,t);return s.jsx(Gm,{asChild:!0,children:s.jsx(vt.button,{type:"button",...n,ref:e,onClick:it(r.onClick,a.onClose)})})});tu.displayName=Bm;var Gm=A.forwardRef((r,e)=>{const{__scopeToast:t,altText:n,...a}=r;return s.jsx(vt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:e})});function Hm(r){const e=[];return Array.from(r.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),ev(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",l=n.dataset.radixToastAnnounceExclude==="";if(!a)if(l){const c=n.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...Hm(n))}}),e}function Co(r,e,t,{discrete:n}){const a=t.originalEvent.currentTarget,l=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&a.addEventListener(r,e,{once:!0}),n?U1(a,l):a.dispatchEvent(l)}var Rf=(r,e,t=0)=>{const n=Math.abs(r.x),a=Math.abs(r.y),l=n>a;return e==="left"||e==="right"?l&&n>t:!l&&a>t};function Jy(r=()=>{}){const e=ha(r);fa(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}function ev(r){return r.nodeType===r.ELEMENT_NODE}function tv(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Kc(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var rv=Tm,Um=Dm,Wm=Im,Vm=Mm,Ym=Lm,$m=zm,Xm=tu;const nv=rv,qm=A.forwardRef(({className:r,...e},t)=>s.jsx(Um,{ref:t,className:at("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));qm.displayName=Um.displayName;const sv=W1("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Km=A.forwardRef(({className:r,variant:e,...t},n)=>s.jsx(Wm,{ref:n,className:at(sv({variant:e}),r),...t}));Km.displayName=Wm.displayName;const iv=A.forwardRef(({className:r,...e},t)=>s.jsx($m,{ref:t,className:at("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",r),...e}));iv.displayName=$m.displayName;const Qm=A.forwardRef(({className:r,...e},t)=>s.jsx(Xm,{ref:t,className:at("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...e,children:s.jsx(Ca,{className:"h-4 w-4"})}));Qm.displayName=Xm.displayName;const Zm=A.forwardRef(({className:r,...e},t)=>s.jsx(Vm,{ref:t,className:at("text-sm font-semibold",r),...e}));Zm.displayName=Vm.displayName;const Jm=A.forwardRef(({className:r,...e},t)=>s.jsx(Ym,{ref:t,className:at("text-sm opacity-90",r),...e}));Jm.displayName=Ym.displayName;function av(){const{toasts:r}=V1();return s.jsxs(nv,{children:[r.map(function({id:e,title:t,description:n,action:a,...l}){return s.jsxs(Km,{...l,children:[s.jsxs("div",{className:"grid gap-1",children:[t&&s.jsx(Zm,{children:t}),n&&s.jsx(Jm,{children:n})]}),a,s.jsx(Qm,{})]},e)}),s.jsx(qm,{})]})}var Df=["light","dark"],ov="(prefers-color-scheme: dark)",lv=A.createContext(void 0),cv={setTheme:r=>{},themes:[]},dv=()=>{var r;return(r=A.useContext(lv))!=null?r:cv};A.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:a,defaultTheme:l,value:c,attrs:d,nonce:u})=>{let f=l==="system",p=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${d.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,m=a?Df.includes(l)&&l?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",x=(S,v=!1,w=!0)=>{let C=c?c[S]:S,_=v?S+"|| ''":`'${C}'`,N="";return a&&w&&!v&&Df.includes(S)&&(N+=`d.style.colorScheme = '${S}';`),t==="class"?v||C?N+=`c.add(${_})`:N+="null":C&&(N+=`d[s](n,${_})`),N},y=r?`!function(){${p}${x(r)}}()`:n?`!function(){try{${p}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${f})){var t='${ov}',m=window.matchMedia(t);if(m.media!==t||m.matches){${x("dark")}}else{${x("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${x(c?"x[e]":"e",!0)}}${f?"":"else{"+x(l,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${x(c?"x[e]":"e",!0)}}else{${x(l,!1,!1)};}${m}}catch(t){}}();`;return A.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:y}})});const uv=({...r})=>{const{theme:e="system"}=dv();return s.jsx(r2,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...r})},hv=["top","right","bottom","left"],Jn=Math.min,pr=Math.max,el=Math.round,No=Math.floor,ln=r=>({x:r,y:r}),fv={left:"right",right:"left",bottom:"top",top:"bottom"},pv={start:"end",end:"start"};function md(r,e,t){return pr(r,Jn(e,t))}function Sn(r,e){return typeof r=="function"?r(e):r}function Cn(r){return r.split("-")[0]}function Ci(r){return r.split("-")[1]}function ru(r){return r==="x"?"y":"x"}function nu(r){return r==="y"?"height":"width"}const mv=new Set(["top","bottom"]);function an(r){return mv.has(Cn(r))?"y":"x"}function su(r){return ru(an(r))}function gv(r,e,t){t===void 0&&(t=!1);const n=Ci(r),a=su(r),l=nu(a);let c=a==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=tl(c)),[c,tl(c)]}function xv(r){const e=tl(r);return[gd(r),e,gd(e)]}function gd(r){return r.replace(/start|end/g,e=>pv[e])}const Of=["left","right"],If=["right","left"],yv=["top","bottom"],vv=["bottom","top"];function wv(r,e,t){switch(r){case"top":case"bottom":return t?e?If:Of:e?Of:If;case"left":case"right":return e?yv:vv;default:return[]}}function bv(r,e,t,n){const a=Ci(r);let l=wv(Cn(r),t==="start",n);return a&&(l=l.map(c=>c+"-"+a),e&&(l=l.concat(l.map(gd)))),l}function tl(r){return r.replace(/left|right|bottom|top/g,e=>fv[e])}function _v(r){return{top:0,right:0,bottom:0,left:0,...r}}function eg(r){return typeof r!="number"?_v(r):{top:r,right:r,bottom:r,left:r}}function rl(r){const{x:e,y:t,width:n,height:a}=r;return{width:n,height:a,top:t,left:e,right:e+n,bottom:t+a,x:e,y:t}}function Mf(r,e,t){let{reference:n,floating:a}=r;const l=an(e),c=su(e),d=nu(c),u=Cn(e),f=l==="y",p=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,x=n[d]/2-a[d]/2;let y;switch(u){case"top":y={x:p,y:n.y-a.height};break;case"bottom":y={x:p,y:n.y+n.height};break;case"right":y={x:n.x+n.width,y:m};break;case"left":y={x:n.x-a.width,y:m};break;default:y={x:n.x,y:n.y}}switch(Ci(e)){case"start":y[c]-=x*(t&&f?-1:1);break;case"end":y[c]+=x*(t&&f?-1:1);break}return y}async function Sv(r,e){var t;e===void 0&&(e={});const{x:n,y:a,platform:l,rects:c,elements:d,strategy:u}=r,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:x=!1,padding:y=0}=Sn(e,r),S=eg(y),w=d[x?m==="floating"?"reference":"floating":m],C=rl(await l.getClippingRect({element:(t=await(l.isElement==null?void 0:l.isElement(w)))==null||t?w:w.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:f,rootBoundary:p,strategy:u})),_=m==="floating"?{x:n,y:a,width:c.floating.width,height:c.floating.height}:c.reference,N=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),E=await(l.isElement==null?void 0:l.isElement(N))?await(l.getScale==null?void 0:l.getScale(N))||{x:1,y:1}:{x:1,y:1},R=rl(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:_,offsetParent:N,strategy:u}):_);return{top:(C.top-R.top+S.top)/E.y,bottom:(R.bottom-C.bottom+S.bottom)/E.y,left:(C.left-R.left+S.left)/E.x,right:(R.right-C.right+S.right)/E.x}}const Cv=async(r,e,t)=>{const{placement:n="bottom",strategy:a="absolute",middleware:l=[],platform:c}=t,d=l.filter(Boolean),u=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:r,floating:e,strategy:a}),{x:p,y:m}=Mf(f,n,u),x=n,y={},S=0;for(let w=0;w<d.length;w++){var v;const{name:C,fn:_}=d[w],{x:N,y:E,data:R,reset:O}=await _({x:p,y:m,initialPlacement:n,placement:x,strategy:a,middlewareData:y,rects:f,platform:{...c,detectOverflow:(v=c.detectOverflow)!=null?v:Sv},elements:{reference:r,floating:e}});p=N??p,m=E??m,y={...y,[C]:{...y[C],...R}},O&&S<=50&&(S++,typeof O=="object"&&(O.placement&&(x=O.placement),O.rects&&(f=O.rects===!0?await c.getElementRects({reference:r,floating:e,strategy:a}):O.rects),{x:p,y:m}=Mf(f,x,u)),w=-1)}return{x:p,y:m,placement:x,strategy:a,middlewareData:y}},Nv=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:a,rects:l,platform:c,elements:d,middlewareData:u}=e,{element:f,padding:p=0}=Sn(r,e)||{};if(f==null)return{};const m=eg(p),x={x:t,y:n},y=su(a),S=nu(y),v=await c.getDimensions(f),w=y==="y",C=w?"top":"left",_=w?"bottom":"right",N=w?"clientHeight":"clientWidth",E=l.reference[S]+l.reference[y]-x[y]-l.floating[S],R=x[y]-l.reference[y],O=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let I=O?O[N]:0;(!I||!await(c.isElement==null?void 0:c.isElement(O)))&&(I=d.floating[N]||l.floating[S]);const G=E/2-R/2,F=I/2-v[S]/2-1,Y=Jn(m[C],F),re=Jn(m[_],F),D=Y,H=I-v[S]-re,k=I/2-v[S]/2+G,T=md(D,k,H),Z=!u.arrow&&Ci(a)!=null&&k!==T&&l.reference[S]/2-(k<D?Y:re)-v[S]/2<0,W=Z?k<D?k-D:k-H:0;return{[y]:x[y]+W,data:{[y]:T,centerOffset:k-T-W,...Z&&{alignmentOffset:W}},reset:Z}}}),jv=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:a,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:f}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:x,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:v=!0,...w}=Sn(r,e);if((t=l.arrow)!=null&&t.alignmentOffset)return{};const C=Cn(a),_=an(d),N=Cn(d)===d,E=await(u.isRTL==null?void 0:u.isRTL(f.floating)),R=x||(N||!v?[tl(d)]:xv(d)),O=S!=="none";!x&&O&&R.push(...bv(d,v,S,E));const I=[d,...R],G=await u.detectOverflow(e,w),F=[];let Y=((n=l.flip)==null?void 0:n.overflows)||[];if(p&&F.push(G[C]),m){const k=gv(a,c,E);F.push(G[k[0]],G[k[1]])}if(Y=[...Y,{placement:a,overflows:F}],!F.every(k=>k<=0)){var re,D;const k=(((re=l.flip)==null?void 0:re.index)||0)+1,T=I[k];if(T&&(!(m==="alignment"?_!==an(T):!1)||Y.every(ee=>an(ee.placement)===_?ee.overflows[0]>0:!0)))return{data:{index:k,overflows:Y},reset:{placement:T}};let Z=(D=Y.filter(W=>W.overflows[0]<=0).sort((W,ee)=>W.overflows[1]-ee.overflows[1])[0])==null?void 0:D.placement;if(!Z)switch(y){case"bestFit":{var H;const W=(H=Y.filter(ee=>{if(O){const J=an(ee.placement);return J===_||J==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(J=>J>0).reduce((J,V)=>J+V,0)]).sort((ee,J)=>ee[1]-J[1])[0])==null?void 0:H[0];W&&(Z=W);break}case"initialPlacement":Z=d;break}if(a!==Z)return{reset:{placement:Z}}}return{}}}};function Lf(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function Ff(r){return hv.some(e=>r[e]>=0)}const kv=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t,platform:n}=e,{strategy:a="referenceHidden",...l}=Sn(r,e);switch(a){case"referenceHidden":{const c=await n.detectOverflow(e,{...l,elementContext:"reference"}),d=Lf(c,t.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:Ff(d)}}}case"escaped":{const c=await n.detectOverflow(e,{...l,altBoundary:!0}),d=Lf(c,t.floating);return{data:{escapedOffsets:d,escaped:Ff(d)}}}default:return{}}}}},tg=new Set(["left","top"]);async function Ev(r,e){const{placement:t,platform:n,elements:a}=r,l=await(n.isRTL==null?void 0:n.isRTL(a.floating)),c=Cn(t),d=Ci(t),u=an(t)==="y",f=tg.has(c)?-1:1,p=l&&u?-1:1,m=Sn(e,r);let{mainAxis:x,crossAxis:y,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return d&&typeof S=="number"&&(y=d==="end"?S*-1:S),u?{x:y*p,y:x*f}:{x:x*f,y:y*p}}const Pv=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:a,y:l,placement:c,middlewareData:d}=e,u=await Ev(e,r);return c===((t=d.offset)==null?void 0:t.placement)&&(n=d.arrow)!=null&&n.alignmentOffset?{}:{x:a+u.x,y:l+u.y,data:{...u,placement:c}}}}},Av=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:a,platform:l}=e,{mainAxis:c=!0,crossAxis:d=!1,limiter:u={fn:C=>{let{x:_,y:N}=C;return{x:_,y:N}}},...f}=Sn(r,e),p={x:t,y:n},m=await l.detectOverflow(e,f),x=an(Cn(a)),y=ru(x);let S=p[y],v=p[x];if(c){const C=y==="y"?"top":"left",_=y==="y"?"bottom":"right",N=S+m[C],E=S-m[_];S=md(N,S,E)}if(d){const C=x==="y"?"top":"left",_=x==="y"?"bottom":"right",N=v+m[C],E=v-m[_];v=md(N,v,E)}const w=u.fn({...e,[y]:S,[x]:v});return{...w,data:{x:w.x-t,y:w.y-n,enabled:{[y]:c,[x]:d}}}}}},Tv=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:n,placement:a,rects:l,middlewareData:c}=e,{offset:d=0,mainAxis:u=!0,crossAxis:f=!0}=Sn(r,e),p={x:t,y:n},m=an(a),x=ru(m);let y=p[x],S=p[m];const v=Sn(d,e),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(u){const N=x==="y"?"height":"width",E=l.reference[x]-l.floating[N]+w.mainAxis,R=l.reference[x]+l.reference[N]-w.mainAxis;y<E?y=E:y>R&&(y=R)}if(f){var C,_;const N=x==="y"?"width":"height",E=tg.has(Cn(a)),R=l.reference[m]-l.floating[N]+(E&&((C=c.offset)==null?void 0:C[m])||0)+(E?0:w.crossAxis),O=l.reference[m]+l.reference[N]+(E?0:((_=c.offset)==null?void 0:_[m])||0)-(E?w.crossAxis:0);S<R?S=R:S>O&&(S=O)}return{[x]:y,[m]:S}}}},Rv=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:a,rects:l,platform:c,elements:d}=e,{apply:u=()=>{},...f}=Sn(r,e),p=await c.detectOverflow(e,f),m=Cn(a),x=Ci(a),y=an(a)==="y",{width:S,height:v}=l.floating;let w,C;m==="top"||m==="bottom"?(w=m,C=x===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(C=m,w=x==="end"?"top":"bottom");const _=v-p.top-p.bottom,N=S-p.left-p.right,E=Jn(v-p[w],_),R=Jn(S-p[C],N),O=!e.middlewareData.shift;let I=E,G=R;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(G=N),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(I=_),O&&!x){const Y=pr(p.left,0),re=pr(p.right,0),D=pr(p.top,0),H=pr(p.bottom,0);y?G=S-2*(Y!==0||re!==0?Y+re:pr(p.left,p.right)):I=v-2*(D!==0||H!==0?D+H:pr(p.top,p.bottom))}await u({...e,availableWidth:G,availableHeight:I});const F=await c.getDimensions(d.floating);return S!==F.width||v!==F.height?{reset:{rects:!0}}:{}}}};function hl(){return typeof window<"u"}function Ni(r){return rg(r)?(r.nodeName||"").toLowerCase():"#document"}function gr(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function dn(r){var e;return(e=(rg(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function rg(r){return hl()?r instanceof Node||r instanceof gr(r).Node:!1}function Ur(r){return hl()?r instanceof Element||r instanceof gr(r).Element:!1}function cn(r){return hl()?r instanceof HTMLElement||r instanceof gr(r).HTMLElement:!1}function zf(r){return!hl()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof gr(r).ShadowRoot}const Dv=new Set(["inline","contents"]);function ja(r){const{overflow:e,overflowX:t,overflowY:n,display:a}=Wr(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!Dv.has(a)}const Ov=new Set(["table","td","th"]);function Iv(r){return Ov.has(Ni(r))}const Mv=[":popover-open",":modal"];function fl(r){return Mv.some(e=>{try{return r.matches(e)}catch{return!1}})}const Lv=["transform","translate","scale","rotate","perspective"],Fv=["transform","translate","scale","rotate","perspective","filter"],zv=["paint","layout","strict","content"];function iu(r){const e=au(),t=Ur(r)?Wr(r):r;return Lv.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||Fv.some(n=>(t.willChange||"").includes(n))||zv.some(n=>(t.contain||"").includes(n))}function Bv(r){let e=es(r);for(;cn(e)&&!wi(e);){if(iu(e))return e;if(fl(e))return null;e=es(e)}return null}function au(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Gv=new Set(["html","body","#document"]);function wi(r){return Gv.has(Ni(r))}function Wr(r){return gr(r).getComputedStyle(r)}function pl(r){return Ur(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function es(r){if(Ni(r)==="html")return r;const e=r.assignedSlot||r.parentNode||zf(r)&&r.host||dn(r);return zf(e)?e.host:e}function ng(r){const e=es(r);return wi(e)?r.ownerDocument?r.ownerDocument.body:r.body:cn(e)&&ja(e)?e:ng(e)}function ma(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const a=ng(r),l=a===((n=r.ownerDocument)==null?void 0:n.body),c=gr(a);if(l){const d=xd(c);return e.concat(c,c.visualViewport||[],ja(a)?a:[],d&&t?ma(d):[])}return e.concat(a,ma(a,[],t))}function xd(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function sg(r){const e=Wr(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const a=cn(r),l=a?r.offsetWidth:t,c=a?r.offsetHeight:n,d=el(t)!==l||el(n)!==c;return d&&(t=l,n=c),{width:t,height:n,$:d}}function ou(r){return Ur(r)?r:r.contextElement}function si(r){const e=ou(r);if(!cn(e))return ln(1);const t=e.getBoundingClientRect(),{width:n,height:a,$:l}=sg(e);let c=(l?el(t.width):t.width)/n,d=(l?el(t.height):t.height)/a;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const Hv=ln(0);function ig(r){const e=gr(r);return!au()||!e.visualViewport?Hv:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Uv(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==gr(r)?!1:e}function As(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const a=r.getBoundingClientRect(),l=ou(r);let c=ln(1);e&&(n?Ur(n)&&(c=si(n)):c=si(r));const d=Uv(l,t,n)?ig(l):ln(0);let u=(a.left+d.x)/c.x,f=(a.top+d.y)/c.y,p=a.width/c.x,m=a.height/c.y;if(l){const x=gr(l),y=n&&Ur(n)?gr(n):n;let S=x,v=xd(S);for(;v&&n&&y!==S;){const w=si(v),C=v.getBoundingClientRect(),_=Wr(v),N=C.left+(v.clientLeft+parseFloat(_.paddingLeft))*w.x,E=C.top+(v.clientTop+parseFloat(_.paddingTop))*w.y;u*=w.x,f*=w.y,p*=w.x,m*=w.y,u+=N,f+=E,S=gr(v),v=xd(S)}}return rl({width:p,height:m,x:u,y:f})}function ml(r,e){const t=pl(r).scrollLeft;return e?e.left+t:As(dn(r)).left+t}function ag(r,e){const t=r.getBoundingClientRect(),n=t.left+e.scrollLeft-ml(r,t),a=t.top+e.scrollTop;return{x:n,y:a}}function Wv(r){let{elements:e,rect:t,offsetParent:n,strategy:a}=r;const l=a==="fixed",c=dn(n),d=e?fl(e.floating):!1;if(n===c||d&&l)return t;let u={scrollLeft:0,scrollTop:0},f=ln(1);const p=ln(0),m=cn(n);if((m||!m&&!l)&&((Ni(n)!=="body"||ja(c))&&(u=pl(n)),cn(n))){const y=As(n);f=si(n),p.x=y.x+n.clientLeft,p.y=y.y+n.clientTop}const x=c&&!m&&!l?ag(c,u):ln(0);return{width:t.width*f.x,height:t.height*f.y,x:t.x*f.x-u.scrollLeft*f.x+p.x+x.x,y:t.y*f.y-u.scrollTop*f.y+p.y+x.y}}function Vv(r){return Array.from(r.getClientRects())}function Yv(r){const e=dn(r),t=pl(r),n=r.ownerDocument.body,a=pr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),l=pr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let c=-t.scrollLeft+ml(r);const d=-t.scrollTop;return Wr(n).direction==="rtl"&&(c+=pr(e.clientWidth,n.clientWidth)-a),{width:a,height:l,x:c,y:d}}const Bf=25;function $v(r,e){const t=gr(r),n=dn(r),a=t.visualViewport;let l=n.clientWidth,c=n.clientHeight,d=0,u=0;if(a){l=a.width,c=a.height;const p=au();(!p||p&&e==="fixed")&&(d=a.offsetLeft,u=a.offsetTop)}const f=ml(n);if(f<=0){const p=n.ownerDocument,m=p.body,x=getComputedStyle(m),y=p.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,S=Math.abs(n.clientWidth-m.clientWidth-y);S<=Bf&&(l-=S)}else f<=Bf&&(l+=f);return{width:l,height:c,x:d,y:u}}const Xv=new Set(["absolute","fixed"]);function qv(r,e){const t=As(r,!0,e==="fixed"),n=t.top+r.clientTop,a=t.left+r.clientLeft,l=cn(r)?si(r):ln(1),c=r.clientWidth*l.x,d=r.clientHeight*l.y,u=a*l.x,f=n*l.y;return{width:c,height:d,x:u,y:f}}function Gf(r,e,t){let n;if(e==="viewport")n=$v(r,t);else if(e==="document")n=Yv(dn(r));else if(Ur(e))n=qv(e,t);else{const a=ig(r);n={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return rl(n)}function og(r,e){const t=es(r);return t===e||!Ur(t)||wi(t)?!1:Wr(t).position==="fixed"||og(t,e)}function Kv(r,e){const t=e.get(r);if(t)return t;let n=ma(r,[],!1).filter(d=>Ur(d)&&Ni(d)!=="body"),a=null;const l=Wr(r).position==="fixed";let c=l?es(r):r;for(;Ur(c)&&!wi(c);){const d=Wr(c),u=iu(c);!u&&d.position==="fixed"&&(a=null),(l?!u&&!a:!u&&d.position==="static"&&!!a&&Xv.has(a.position)||ja(c)&&!u&&og(r,c))?n=n.filter(p=>p!==c):a=d,c=es(c)}return e.set(r,n),n}function Qv(r){let{element:e,boundary:t,rootBoundary:n,strategy:a}=r;const c=[...t==="clippingAncestors"?fl(e)?[]:Kv(e,this._c):[].concat(t),n],d=c[0],u=c.reduce((f,p)=>{const m=Gf(e,p,a);return f.top=pr(m.top,f.top),f.right=Jn(m.right,f.right),f.bottom=Jn(m.bottom,f.bottom),f.left=pr(m.left,f.left),f},Gf(e,d,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Zv(r){const{width:e,height:t}=sg(r);return{width:e,height:t}}function Jv(r,e,t){const n=cn(e),a=dn(e),l=t==="fixed",c=As(r,!0,l,e);let d={scrollLeft:0,scrollTop:0};const u=ln(0);function f(){u.x=ml(a)}if(n||!n&&!l)if((Ni(e)!=="body"||ja(a))&&(d=pl(e)),n){const y=As(e,!0,l,e);u.x=y.x+e.clientLeft,u.y=y.y+e.clientTop}else a&&f();l&&!n&&a&&f();const p=a&&!n&&!l?ag(a,d):ln(0),m=c.left+d.scrollLeft-u.x-p.x,x=c.top+d.scrollTop-u.y-p.y;return{x:m,y:x,width:c.width,height:c.height}}function Qc(r){return Wr(r).position==="static"}function Hf(r,e){if(!cn(r)||Wr(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return dn(r)===t&&(t=t.ownerDocument.body),t}function lg(r,e){const t=gr(r);if(fl(r))return t;if(!cn(r)){let a=es(r);for(;a&&!wi(a);){if(Ur(a)&&!Qc(a))return a;a=es(a)}return t}let n=Hf(r,e);for(;n&&Iv(n)&&Qc(n);)n=Hf(n,e);return n&&wi(n)&&Qc(n)&&!iu(n)?t:n||Bv(r)||t}const ew=async function(r){const e=this.getOffsetParent||lg,t=this.getDimensions,n=await t(r.floating);return{reference:Jv(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function tw(r){return Wr(r).direction==="rtl"}const rw={convertOffsetParentRelativeRectToViewportRelativeRect:Wv,getDocumentElement:dn,getClippingRect:Qv,getOffsetParent:lg,getElementRects:ew,getClientRects:Vv,getDimensions:Zv,getScale:si,isElement:Ur,isRTL:tw};function cg(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function nw(r,e){let t=null,n;const a=dn(r);function l(){var d;clearTimeout(n),(d=t)==null||d.disconnect(),t=null}function c(d,u){d===void 0&&(d=!1),u===void 0&&(u=1),l();const f=r.getBoundingClientRect(),{left:p,top:m,width:x,height:y}=f;if(d||e(),!x||!y)return;const S=No(m),v=No(a.clientWidth-(p+x)),w=No(a.clientHeight-(m+y)),C=No(p),N={rootMargin:-S+"px "+-v+"px "+-w+"px "+-C+"px",threshold:pr(0,Jn(1,u))||1};let E=!0;function R(O){const I=O[0].intersectionRatio;if(I!==u){if(!E)return c();I?c(!1,I):n=setTimeout(()=>{c(!1,1e-7)},1e3)}I===1&&!cg(f,r.getBoundingClientRect())&&c(),E=!1}try{t=new IntersectionObserver(R,{...N,root:a.ownerDocument})}catch{t=new IntersectionObserver(R,N)}t.observe(r)}return c(!0),l}function sw(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:u=!1}=n,f=ou(r),p=a||l?[...f?ma(f):[],...ma(e)]:[];p.forEach(C=>{a&&C.addEventListener("scroll",t,{passive:!0}),l&&C.addEventListener("resize",t)});const m=f&&d?nw(f,t):null;let x=-1,y=null;c&&(y=new ResizeObserver(C=>{let[_]=C;_&&_.target===f&&y&&(y.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var N;(N=y)==null||N.observe(e)})),t()}),f&&!u&&y.observe(f),y.observe(e));let S,v=u?As(r):null;u&&w();function w(){const C=As(r);v&&!cg(v,C)&&t(),v=C,S=requestAnimationFrame(w)}return t(),()=>{var C;p.forEach(_=>{a&&_.removeEventListener("scroll",t),l&&_.removeEventListener("resize",t)}),m==null||m(),(C=y)==null||C.disconnect(),y=null,u&&cancelAnimationFrame(S)}}const iw=Pv,aw=Av,ow=jv,lw=Rv,cw=kv,Uf=Nv,dw=Tv,uw=(r,e,t)=>{const n=new Map,a={platform:rw,...t},l={...a.platform,_c:n};return Cv(r,e,{...a,platform:l})};var hw=typeof document<"u",fw=function(){},Yo=hw?A.useLayoutEffect:fw;function nl(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,a;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!nl(r[n],e[n]))return!1;return!0}if(a=Object.keys(r),t=a.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,a[n]))return!1;for(n=t;n--!==0;){const l=a[n];if(!(l==="_owner"&&r.$$typeof)&&!nl(r[l],e[l]))return!1}return!0}return r!==r&&e!==e}function dg(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function Wf(r,e){const t=dg(r);return Math.round(e*t)/t}function Zc(r){const e=A.useRef(r);return Yo(()=>{e.current=r}),e}function pw(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:a,elements:{reference:l,floating:c}={},transform:d=!0,whileElementsMounted:u,open:f}=r,[p,m]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[x,y]=A.useState(n);nl(x,n)||y(n);const[S,v]=A.useState(null),[w,C]=A.useState(null),_=A.useCallback(ee=>{ee!==O.current&&(O.current=ee,v(ee))},[]),N=A.useCallback(ee=>{ee!==I.current&&(I.current=ee,C(ee))},[]),E=l||S,R=c||w,O=A.useRef(null),I=A.useRef(null),G=A.useRef(p),F=u!=null,Y=Zc(u),re=Zc(a),D=Zc(f),H=A.useCallback(()=>{if(!O.current||!I.current)return;const ee={placement:e,strategy:t,middleware:x};re.current&&(ee.platform=re.current),uw(O.current,I.current,ee).then(J=>{const V={...J,isPositioned:D.current!==!1};k.current&&!nl(G.current,V)&&(G.current=V,Ud.flushSync(()=>{m(V)}))})},[x,e,t,re,D]);Yo(()=>{f===!1&&G.current.isPositioned&&(G.current.isPositioned=!1,m(ee=>({...ee,isPositioned:!1})))},[f]);const k=A.useRef(!1);Yo(()=>(k.current=!0,()=>{k.current=!1}),[]),Yo(()=>{if(E&&(O.current=E),R&&(I.current=R),E&&R){if(Y.current)return Y.current(E,R,H);H()}},[E,R,H,Y,F]);const T=A.useMemo(()=>({reference:O,floating:I,setReference:_,setFloating:N}),[_,N]),Z=A.useMemo(()=>({reference:E,floating:R}),[E,R]),W=A.useMemo(()=>{const ee={position:t,left:0,top:0};if(!Z.floating)return ee;const J=Wf(Z.floating,p.x),V=Wf(Z.floating,p.y);return d?{...ee,transform:"translate("+J+"px, "+V+"px)",...dg(Z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:J,top:V}},[t,d,Z.floating,p.x,p.y]);return A.useMemo(()=>({...p,update:H,refs:T,elements:Z,floatingStyles:W}),[p,H,T,Z,W])}const mw=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:a}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?Uf({element:n.current,padding:a}).fn(t):{}:n?Uf({element:n,padding:a}).fn(t):{}}}},gw=(r,e)=>({...iw(r),options:[r,e]}),xw=(r,e)=>({...aw(r),options:[r,e]}),yw=(r,e)=>({...dw(r),options:[r,e]}),vw=(r,e)=>({...ow(r),options:[r,e]}),ww=(r,e)=>({...lw(r),options:[r,e]}),bw=(r,e)=>({...cw(r),options:[r,e]}),_w=(r,e)=>({...mw(r),options:[r,e]});var Sw="Arrow",ug=A.forwardRef((r,e)=>{const{children:t,width:n=10,height:a=5,...l}=r;return s.jsx(vt.svg,{...l,ref:e,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?t:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});ug.displayName=Sw;var Cw=ug;function lu(r){const[e,t]=A.useState(void 0);return fa(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let c,d;if("borderBoxSize"in l){const u=l.borderBoxSize,f=Array.isArray(u)?u[0]:u;c=f.inlineSize,d=f.blockSize}else c=r.offsetWidth,d=r.offsetHeight;t({width:c,height:d})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else t(void 0)},[r]),e}var cu="Popper",[hg,gl]=Nn(cu),[Nw,fg]=hg(cu),pg=r=>{const{__scopePopper:e,children:t}=r,[n,a]=A.useState(null);return s.jsx(Nw,{scope:e,anchor:n,onAnchorChange:a,children:t})};pg.displayName=cu;var mg="PopperAnchor",gg=A.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:n,...a}=r,l=fg(mg,t),c=A.useRef(null),d=Dt(e,c),u=A.useRef(null);return A.useEffect(()=>{const f=u.current;u.current=(n==null?void 0:n.current)||c.current,f!==u.current&&l.onAnchorChange(u.current)}),n?null:s.jsx(vt.div,{...a,ref:d})});gg.displayName=mg;var du="PopperContent",[jw,kw]=hg(du),xg=A.forwardRef((r,e)=>{var gt,Ge,Ue,lt,We,At;const{__scopePopper:t,side:n="bottom",sideOffset:a=0,align:l="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:u=!0,collisionBoundary:f=[],collisionPadding:p=0,sticky:m="partial",hideWhenDetached:x=!1,updatePositionStrategy:y="optimized",onPlaced:S,...v}=r,w=fg(du,t),[C,_]=A.useState(null),N=Dt(e,Je=>_(Je)),[E,R]=A.useState(null),O=lu(E),I=(O==null?void 0:O.width)??0,G=(O==null?void 0:O.height)??0,F=n+(l!=="center"?"-"+l:""),Y=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},re=Array.isArray(f)?f:[f],D=re.length>0,H={padding:Y,boundary:re.filter(Pw),altBoundary:D},{refs:k,floatingStyles:T,placement:Z,isPositioned:W,middlewareData:ee}=pw({strategy:"fixed",placement:F,whileElementsMounted:(...Je)=>sw(...Je,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[gw({mainAxis:a+G,alignmentAxis:c}),u&&xw({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?yw():void 0,...H}),u&&vw({...H}),ww({...H,apply:({elements:Je,rects:P,availableWidth:ce,availableHeight:ie})=>{const{width:z,height:L}=P.reference,$=Je.floating.style;$.setProperty("--radix-popper-available-width",`${ce}px`),$.setProperty("--radix-popper-available-height",`${ie}px`),$.setProperty("--radix-popper-anchor-width",`${z}px`),$.setProperty("--radix-popper-anchor-height",`${L}px`)}}),E&&_w({element:E,padding:d}),Aw({arrowWidth:I,arrowHeight:G}),x&&bw({strategy:"referenceHidden",...H})]}),[J,V]=wg(Z),U=ha(S);fa(()=>{W&&(U==null||U())},[W,U]);const X=(gt=ee.arrow)==null?void 0:gt.x,Ce=(Ge=ee.arrow)==null?void 0:Ge.y,Ne=((Ue=ee.arrow)==null?void 0:Ue.centerOffset)!==0,[we,ot]=A.useState();return fa(()=>{C&&ot(window.getComputedStyle(C).zIndex)},[C]),s.jsx("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...T,transform:W?T.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(lt=ee.transformOrigin)==null?void 0:lt.x,(We=ee.transformOrigin)==null?void 0:We.y].join(" "),...((At=ee.hide)==null?void 0:At.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:s.jsx(jw,{scope:t,placedSide:J,onArrowChange:R,arrowX:X,arrowY:Ce,shouldHideArrow:Ne,children:s.jsx(vt.div,{"data-side":J,"data-align":V,...v,ref:N,style:{...v.style,animation:W?void 0:"none"}})})})});xg.displayName=du;var yg="PopperArrow",Ew={top:"bottom",right:"left",bottom:"top",left:"right"},vg=A.forwardRef(function(e,t){const{__scopePopper:n,...a}=e,l=kw(yg,n),c=Ew[l.placedSide];return s.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:s.jsx(Cw,{...a,ref:t,style:{...a.style,display:"block"}})})});vg.displayName=yg;function Pw(r){return r!==null}var Aw=r=>({name:"transformOrigin",options:r,fn(e){var w,C,_;const{placement:t,rects:n,middlewareData:a}=e,c=((w=a.arrow)==null?void 0:w.centerOffset)!==0,d=c?0:r.arrowWidth,u=c?0:r.arrowHeight,[f,p]=wg(t),m={start:"0%",center:"50%",end:"100%"}[p],x=(((C=a.arrow)==null?void 0:C.x)??0)+d/2,y=(((_=a.arrow)==null?void 0:_.y)??0)+u/2;let S="",v="";return f==="bottom"?(S=c?m:`${x}px`,v=`${-u}px`):f==="top"?(S=c?m:`${x}px`,v=`${n.floating.height+u}px`):f==="right"?(S=`${-u}px`,v=c?m:`${y}px`):f==="left"&&(S=`${n.floating.width+u}px`,v=c?m:`${y}px`),{data:{x:S,y:v}}}});function wg(r){const[e,t="center"]=r.split("-");return[e,t]}var bg=pg,uu=gg,_g=xg,Sg=vg,Tw=Symbol("radix.slottable");function Rw(r){const e=({children:t})=>s.jsx(s.Fragment,{children:t});return e.displayName=`${r}.Slottable`,e.__radixId=Tw,e}var[xl]=Nn("Tooltip",[gl]),yl=gl(),Cg="TooltipProvider",Dw=700,yd="tooltip.open",[Ow,hu]=xl(Cg),Ng=r=>{const{__scopeTooltip:e,delayDuration:t=Dw,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:l}=r,c=A.useRef(!0),d=A.useRef(!1),u=A.useRef(0);return A.useEffect(()=>{const f=u.current;return()=>window.clearTimeout(f)},[]),s.jsx(Ow,{scope:e,isOpenDelayedRef:c,delayDuration:t,onOpen:A.useCallback(()=>{window.clearTimeout(u.current),c.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>c.current=!0,n)},[n]),isPointerInTransitRef:d,onPointerInTransitChange:A.useCallback(f=>{d.current=f},[]),disableHoverableContent:a,children:l})};Ng.displayName=Cg;var ga="Tooltip",[Iw,vl]=xl(ga),jg=r=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:a,onOpenChange:l,disableHoverableContent:c,delayDuration:d}=r,u=hu(ga,r.__scopeTooltip),f=yl(e),[p,m]=A.useState(null),x=ol(),y=A.useRef(0),S=c??u.disableHoverableContent,v=d??u.delayDuration,w=A.useRef(!1),[C,_]=ts({prop:n,defaultProp:a??!1,onChange:I=>{I?(u.onOpen(),document.dispatchEvent(new CustomEvent(yd))):u.onClose(),l==null||l(I)},caller:ga}),N=A.useMemo(()=>C?w.current?"delayed-open":"instant-open":"closed",[C]),E=A.useCallback(()=>{window.clearTimeout(y.current),y.current=0,w.current=!1,_(!0)},[_]),R=A.useCallback(()=>{window.clearTimeout(y.current),y.current=0,_(!1)},[_]),O=A.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{w.current=!0,_(!0),y.current=0},v)},[v,_]);return A.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),s.jsx(bg,{...f,children:s.jsx(Iw,{scope:e,contentId:x,open:C,stateAttribute:N,trigger:p,onTriggerChange:m,onTriggerEnter:A.useCallback(()=>{u.isOpenDelayedRef.current?O():E()},[u.isOpenDelayedRef,O,E]),onTriggerLeave:A.useCallback(()=>{S?R():(window.clearTimeout(y.current),y.current=0)},[R,S]),onOpen:E,onClose:R,disableHoverableContent:S,children:t})})};jg.displayName=ga;var vd="TooltipTrigger",kg=A.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,a=vl(vd,t),l=hu(vd,t),c=yl(t),d=A.useRef(null),u=Dt(e,d,a.onTriggerChange),f=A.useRef(!1),p=A.useRef(!1),m=A.useCallback(()=>f.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),s.jsx(uu,{asChild:!0,...c,children:s.jsx(vt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:u,onPointerMove:it(r.onPointerMove,x=>{x.pointerType!=="touch"&&!p.current&&!l.isPointerInTransitRef.current&&(a.onTriggerEnter(),p.current=!0)}),onPointerLeave:it(r.onPointerLeave,()=>{a.onTriggerLeave(),p.current=!1}),onPointerDown:it(r.onPointerDown,()=>{a.open&&a.onClose(),f.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:it(r.onFocus,()=>{f.current||a.onOpen()}),onBlur:it(r.onBlur,a.onClose),onClick:it(r.onClick,a.onClose)})})});kg.displayName=vd;var Mw="TooltipPortal",[V_,Lw]=xl(Mw,{forceMount:void 0}),bi="TooltipContent",Eg=A.forwardRef((r,e)=>{const t=Lw(bi,r.__scopeTooltip),{forceMount:n=t.forceMount,side:a="top",...l}=r,c=vl(bi,r.__scopeTooltip);return s.jsx(Sa,{present:n||c.open,children:c.disableHoverableContent?s.jsx(Pg,{side:a,...l,ref:e}):s.jsx(Fw,{side:a,...l,ref:e})})}),Fw=A.forwardRef((r,e)=>{const t=vl(bi,r.__scopeTooltip),n=hu(bi,r.__scopeTooltip),a=A.useRef(null),l=Dt(e,a),[c,d]=A.useState(null),{trigger:u,onClose:f}=t,p=a.current,{onPointerInTransitChange:m}=n,x=A.useCallback(()=>{d(null),m(!1)},[m]),y=A.useCallback((S,v)=>{const w=S.currentTarget,C={x:S.clientX,y:S.clientY},_=Uw(C,w.getBoundingClientRect()),N=Ww(C,_),E=Vw(v.getBoundingClientRect()),R=$w([...N,...E]);d(R),m(!0)},[m]);return A.useEffect(()=>()=>x(),[x]),A.useEffect(()=>{if(u&&p){const S=w=>y(w,p),v=w=>y(w,u);return u.addEventListener("pointerleave",S),p.addEventListener("pointerleave",v),()=>{u.removeEventListener("pointerleave",S),p.removeEventListener("pointerleave",v)}}},[u,p,y,x]),A.useEffect(()=>{if(c){const S=v=>{const w=v.target,C={x:v.clientX,y:v.clientY},_=(u==null?void 0:u.contains(w))||(p==null?void 0:p.contains(w)),N=!Yw(C,c);_?x():N&&(x(),f())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[u,p,c,f,x]),s.jsx(Pg,{...r,ref:l})}),[zw,Bw]=xl(ga,{isInside:!1}),Gw=Rw("TooltipContent"),Pg=A.forwardRef((r,e)=>{const{__scopeTooltip:t,children:n,"aria-label":a,onEscapeKeyDown:l,onPointerDownOutside:c,...d}=r,u=vl(bi,t),f=yl(t),{onClose:p}=u;return A.useEffect(()=>(document.addEventListener(yd,p),()=>document.removeEventListener(yd,p)),[p]),A.useEffect(()=>{if(u.trigger){const m=x=>{const y=x.target;y!=null&&y.contains(u.trigger)&&p()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[u.trigger,p]),s.jsx(tm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:m=>m.preventDefault(),onDismiss:p,children:s.jsxs(_g,{"data-state":u.stateAttribute,...f,...d,ref:e,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(Gw,{children:n}),s.jsx(zw,{scope:t,isInside:!0,children:s.jsx(Fy,{id:u.contentId,role:"tooltip",children:a||n})})]})})});Eg.displayName=bi;var Ag="TooltipArrow",Hw=A.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,a=yl(t);return Bw(Ag,t).isInside?null:s.jsx(Sg,{...a,...n,ref:e})});Hw.displayName=Ag;function Uw(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),a=Math.abs(e.right-r.x),l=Math.abs(e.left-r.x);switch(Math.min(t,n,a,l)){case l:return"left";case a:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Ww(r,e,t=5){const n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function Vw(r){const{top:e,right:t,bottom:n,left:a}=r;return[{x:a,y:e},{x:t,y:e},{x:t,y:n},{x:a,y:n}]}function Yw(r,e){const{x:t,y:n}=r;let a=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const d=e[l],u=e[c],f=d.x,p=d.y,m=u.x,x=u.y;p>n!=x>n&&t<(m-f)*(n-p)/(x-p)+f&&(a=!a)}return a}function $w(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),Xw(e)}function Xw(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const a=r[n];for(;e.length>=2;){const l=e[e.length-1],c=e[e.length-2];if((l.x-c.x)*(a.y-c.y)>=(l.y-c.y)*(a.x-c.x))e.pop();else break}e.push(a)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const a=r[n];for(;t.length>=2;){const l=t[t.length-1],c=t[t.length-2];if((l.x-c.x)*(a.y-c.y)>=(l.y-c.y)*(a.x-c.x))t.pop();else break}t.push(a)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var qw=Ng,Kw=jg,Qw=kg,Tg=Eg;const Zw=qw,ii=Kw,ai=Qw,Ps=A.forwardRef(({className:r,sideOffset:e=4,...t},n)=>s.jsx(Tg,{ref:n,sideOffset:e,className:at("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t}));Ps.displayName=Tg.displayName;var wl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jw={setTimeout:(r,e)=>setTimeout(r,e),clearTimeout:r=>clearTimeout(r),setInterval:(r,e)=>setInterval(r,e),clearInterval:r=>clearInterval(r)},Vn,Gd,Wp,e5=(Wp=class{constructor(){Ke(this,Vn,Jw);Ke(this,Gd,!1)}setTimeoutProvider(r){Le(this,Vn,r)}setTimeout(r,e){return oe(this,Vn).setTimeout(r,e)}clearTimeout(r){oe(this,Vn).clearTimeout(r)}setInterval(r,e){return oe(this,Vn).setInterval(r,e)}clearInterval(r){oe(this,Vn).clearInterval(r)}},Vn=new WeakMap,Gd=new WeakMap,Wp),wd=new e5;function t5(r){setTimeout(r,0)}var bl=typeof window>"u"||"Deno"in globalThis;function zr(){}function r5(r,e){return typeof r=="function"?r(e):r}function n5(r){return typeof r=="number"&&r>=0&&r!==1/0}function s5(r,e){return Math.max(r+(e||0)-Date.now(),0)}function bd(r,e){return typeof r=="function"?r(e):r}function i5(r,e){return typeof r=="function"?r(e):r}function Vf(r,e){const{type:t="all",exact:n,fetchStatus:a,predicate:l,queryKey:c,stale:d}=r;if(c){if(n){if(e.queryHash!==fu(c,e.options))return!1}else if(!ya(e.queryKey,c))return!1}if(t!=="all"){const u=e.isActive();if(t==="active"&&!u||t==="inactive"&&u)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||a&&a!==e.state.fetchStatus||l&&!l(e))}function Yf(r,e){const{exact:t,status:n,predicate:a,mutationKey:l}=r;if(l){if(!e.options.mutationKey)return!1;if(t){if(xa(e.options.mutationKey)!==xa(l))return!1}else if(!ya(e.options.mutationKey,l))return!1}return!(n&&e.state.status!==n||a&&!a(e))}function fu(r,e){return((e==null?void 0:e.queryKeyHashFn)||xa)(r)}function xa(r){return JSON.stringify(r,(e,t)=>_d(t)?Object.keys(t).sort().reduce((n,a)=>(n[a]=t[a],n),{}):t)}function ya(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>ya(r[t],e[t])):!1}var a5=Object.prototype.hasOwnProperty;function Rg(r,e,t=0){if(r===e)return r;if(t>500)return e;const n=$f(r)&&$f(e);if(!n&&!(_d(r)&&_d(e)))return e;const l=(n?r:Object.keys(r)).length,c=n?e:Object.keys(e),d=c.length,u=n?new Array(d):{};let f=0;for(let p=0;p<d;p++){const m=n?p:c[p],x=r[m],y=e[m];if(x===y){u[m]=x,(n?p<l:a5.call(r,m))&&f++;continue}if(x===null||y===null||typeof x!="object"||typeof y!="object"){u[m]=y;continue}const S=Rg(x,y,t+1);u[m]=S,S===x&&f++}return l===d&&f===l?r:u}function $f(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function _d(r){if(!Xf(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Xf(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Xf(r){return Object.prototype.toString.call(r)==="[object Object]"}function o5(r){return new Promise(e=>{wd.setTimeout(e,r)})}function l5(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Rg(r,e):e}function c5(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function d5(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var pu=Symbol();function Dg(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===pu?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function u5(r,e,t){let n=!1,a;return Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(a??(a=e()),n||(n=!0,a.aborted?t():a.addEventListener("abort",t,{once:!0})),a)}),r}var Ss,Yn,di,Vp,h5=(Vp=class extends wl{constructor(){super();Ke(this,Ss);Ke(this,Yn);Ke(this,di);Le(this,di,e=>{if(!bl&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){oe(this,Yn)||this.setEventListener(oe(this,di))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,Yn))==null||e.call(this),Le(this,Yn,void 0))}setEventListener(e){var t;Le(this,di,e),(t=oe(this,Yn))==null||t.call(this),Le(this,Yn,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){oe(this,Ss)!==e&&(Le(this,Ss,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof oe(this,Ss)=="boolean"?oe(this,Ss):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ss=new WeakMap,Yn=new WeakMap,di=new WeakMap,Vp),Og=new h5;function f5(){let r,e;const t=new Promise((a,l)=>{r=a,e=l});t.status="pending",t.catch(()=>{});function n(a){Object.assign(t,a),delete t.resolve,delete t.reject}return t.resolve=a=>{n({status:"fulfilled",value:a}),r(a)},t.reject=a=>{n({status:"rejected",reason:a}),e(a)},t}var p5=t5;function m5(){let r=[],e=0,t=d=>{d()},n=d=>{d()},a=p5;const l=d=>{e?r.push(d):a(()=>{t(d)})},c=()=>{const d=r;r=[],d.length&&a(()=>{n(()=>{d.forEach(u=>{t(u)})})})};return{batch:d=>{let u;e++;try{u=d()}finally{e--,e||c()}return u},batchCalls:d=>(...u)=>{l(()=>{d(...u)})},schedule:l,setNotifyFunction:d=>{t=d},setBatchNotifyFunction:d=>{n=d},setScheduler:d=>{a=d}}}var rr=m5(),ui,$n,hi,Yp,g5=(Yp=class extends wl{constructor(){super();Ke(this,ui,!0);Ke(this,$n);Ke(this,hi);Le(this,hi,e=>{if(!bl&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){oe(this,$n)||this.setEventListener(oe(this,hi))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,$n))==null||e.call(this),Le(this,$n,void 0))}setEventListener(e){var t;Le(this,hi,e),(t=oe(this,$n))==null||t.call(this),Le(this,$n,e(this.setOnline.bind(this)))}setOnline(e){oe(this,ui)!==e&&(Le(this,ui,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return oe(this,ui)}},ui=new WeakMap,$n=new WeakMap,hi=new WeakMap,Yp),sl=new g5;function x5(r){return Math.min(1e3*2**r,3e4)}function Ig(r){return(r??"online")==="online"?sl.isOnline():!0}var Sd=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Mg(r){let e=!1,t=0,n;const a=f5(),l=()=>a.status!=="pending",c=v=>{var w;if(!l()){const C=new Sd(v);x(C),(w=r.onCancel)==null||w.call(r,C)}},d=()=>{e=!0},u=()=>{e=!1},f=()=>Og.isFocused()&&(r.networkMode==="always"||sl.isOnline())&&r.canRun(),p=()=>Ig(r.networkMode)&&r.canRun(),m=v=>{l()||(n==null||n(),a.resolve(v))},x=v=>{l()||(n==null||n(),a.reject(v))},y=()=>new Promise(v=>{var w;n=C=>{(l()||f())&&v(C)},(w=r.onPause)==null||w.call(r)}).then(()=>{var v;n=void 0,l()||(v=r.onContinue)==null||v.call(r)}),S=()=>{if(l())return;let v;const w=t===0?r.initialPromise:void 0;try{v=w??r.fn()}catch(C){v=Promise.reject(C)}Promise.resolve(v).then(m).catch(C=>{var O;if(l())return;const _=r.retry??(bl?0:3),N=r.retryDelay??x5,E=typeof N=="function"?N(t,C):N,R=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,C);if(e||!R){x(C);return}t++,(O=r.onFail)==null||O.call(r,t,C),o5(E).then(()=>f()?void 0:y()).then(()=>{e?x(C):S()})})};return{promise:a,status:()=>a.status,cancel:c,continue:()=>(n==null||n(),a),cancelRetry:d,continueRetry:u,canStart:p,start:()=>(p()?S():y().then(S),a)}}var Cs,$p,Lg=($p=class{constructor(){Ke(this,Cs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),n5(this.gcTime)&&Le(this,Cs,wd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(bl?1/0:5*60*1e3))}clearGcTimeout(){oe(this,Cs)&&(wd.clearTimeout(oe(this,Cs)),Le(this,Cs,void 0))}},Cs=new WeakMap,$p),Ns,fi,Pr,js,Ut,wa,ks,Br,wn,Xp,y5=(Xp=class extends Lg{constructor(e){super();Ke(this,Br);Ke(this,Ns);Ke(this,fi);Ke(this,Pr);Ke(this,js);Ke(this,Ut);Ke(this,wa);Ke(this,ks);Le(this,ks,!1),Le(this,wa,e.defaultOptions),this.setOptions(e.options),this.observers=[],Le(this,js,e.client),Le(this,Pr,oe(this,js).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Le(this,Ns,Kf(this.options)),this.state=e.state??oe(this,Ns),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=oe(this,Ut))==null?void 0:e.promise}setOptions(e){if(this.options={...oe(this,wa),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Kf(this.options);t.data!==void 0&&(this.setState(qf(t.data,t.dataUpdatedAt)),Le(this,Ns,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,Pr).remove(this)}setData(e,t){const n=l5(this.state.data,e,this.options);return Jt(this,Br,wn).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){Jt(this,Br,wn).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,a;const t=(n=oe(this,Ut))==null?void 0:n.promise;return(a=oe(this,Ut))==null||a.cancel(e),t?t.then(zr).catch(zr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,Ns))}isActive(){return this.observers.some(e=>i5(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pu||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>bd(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!s5(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=oe(this,Ut))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=oe(this,Ut))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),oe(this,Pr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(oe(this,Ut)&&(oe(this,ks)?oe(this,Ut).cancel({revert:!0}):oe(this,Ut).cancelRetry()),this.scheduleGc()),oe(this,Pr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Jt(this,Br,wn).call(this,{type:"invalidate"})}async fetch(e,t){var u,f,p,m,x,y,S,v,w,C,_,N;if(this.state.fetchStatus!=="idle"&&((u=oe(this,Ut))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(oe(this,Ut))return oe(this,Ut).continueRetry(),oe(this,Ut).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(R=>R.options.queryFn);E&&this.setOptions(E.options)}const n=new AbortController,a=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(Le(this,ks,!0),n.signal)})},l=()=>{const E=Dg(this.options,t),O=(()=>{const I={client:oe(this,js),queryKey:this.queryKey,meta:this.meta};return a(I),I})();return Le(this,ks,!1),this.options.persister?this.options.persister(E,O,this):E(O)},d=(()=>{const E={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:oe(this,js),state:this.state,fetchFn:l};return a(E),E})();(f=this.options.behavior)==null||f.onFetch(d,this),Le(this,fi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=d.fetchOptions)==null?void 0:p.meta))&&Jt(this,Br,wn).call(this,{type:"fetch",meta:(m=d.fetchOptions)==null?void 0:m.meta}),Le(this,Ut,Mg({initialPromise:t==null?void 0:t.initialPromise,fn:d.fetchFn,onCancel:E=>{E instanceof Sd&&E.revert&&this.setState({...oe(this,fi),fetchStatus:"idle"}),n.abort()},onFail:(E,R)=>{Jt(this,Br,wn).call(this,{type:"failed",failureCount:E,error:R})},onPause:()=>{Jt(this,Br,wn).call(this,{type:"pause"})},onContinue:()=>{Jt(this,Br,wn).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const E=await oe(this,Ut).start();if(E===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(E),(y=(x=oe(this,Pr).config).onSuccess)==null||y.call(x,E,this),(v=(S=oe(this,Pr).config).onSettled)==null||v.call(S,E,this.state.error,this),E}catch(E){if(E instanceof Sd){if(E.silent)return oe(this,Ut).promise;if(E.revert){if(this.state.data===void 0)throw E;return this.state.data}}throw Jt(this,Br,wn).call(this,{type:"error",error:E}),(C=(w=oe(this,Pr).config).onError)==null||C.call(w,E,this),(N=(_=oe(this,Pr).config).onSettled)==null||N.call(_,this.state.data,E,this),E}finally{this.scheduleGc()}}},Ns=new WeakMap,fi=new WeakMap,Pr=new WeakMap,js=new WeakMap,Ut=new WeakMap,wa=new WeakMap,ks=new WeakMap,Br=new WeakSet,wn=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...v5(n.data,this.options),fetchMeta:e.meta??null};case"success":const a={...n,...qf(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Le(this,fi,e.manual?a:void 0),a;case"error":const l=e.error;return{...n,error:l,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),rr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),oe(this,Pr).notify({query:this,type:"updated",action:e})})},Xp);function v5(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ig(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function qf(r,e){return{data:r,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Kf(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function Qf(r){return{onFetch:(e,t)=>{var p,m,x,y,S;const n=e.options,a=(x=(m=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:m.fetchMore)==null?void 0:x.direction,l=((y=e.state.data)==null?void 0:y.pages)||[],c=((S=e.state.data)==null?void 0:S.pageParams)||[];let d={pages:[],pageParams:[]},u=0;const f=async()=>{let v=!1;const w=N=>{u5(N,()=>e.signal,()=>v=!0)},C=Dg(e.options,e.fetchOptions),_=async(N,E,R)=>{if(v)return Promise.reject();if(E==null&&N.pages.length)return Promise.resolve(N);const I=(()=>{const re={client:e.client,queryKey:e.queryKey,pageParam:E,direction:R?"backward":"forward",meta:e.options.meta};return w(re),re})(),G=await C(I),{maxPages:F}=e.options,Y=R?d5:c5;return{pages:Y(N.pages,G,F),pageParams:Y(N.pageParams,E,F)}};if(a&&l.length){const N=a==="backward",E=N?w5:Zf,R={pages:l,pageParams:c},O=E(n,R);d=await _(R,O,N)}else{const N=r??l.length;do{const E=u===0?c[0]??n.initialPageParam:Zf(n,d);if(u>0&&E==null)break;d=await _(d,E),u++}while(u<N)}return d};e.options.persister?e.fetchFn=()=>{var v,w;return(w=(v=e.options).persister)==null?void 0:w.call(v,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=f}}}function Zf(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function w5(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var ba,tn,er,Es,rn,Gn,qp,b5=(qp=class extends Lg{constructor(e){super();Ke(this,rn);Ke(this,ba);Ke(this,tn);Ke(this,er);Ke(this,Es);Le(this,ba,e.client),this.mutationId=e.mutationId,Le(this,er,e.mutationCache),Le(this,tn,[]),this.state=e.state||_5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){oe(this,tn).includes(e)||(oe(this,tn).push(e),this.clearGcTimeout(),oe(this,er).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Le(this,tn,oe(this,tn).filter(t=>t!==e)),this.scheduleGc(),oe(this,er).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){oe(this,tn).length||(this.state.status==="pending"?this.scheduleGc():oe(this,er).remove(this))}continue(){var e;return((e=oe(this,Es))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var c,d,u,f,p,m,x,y,S,v,w,C,_,N,E,R,O,I;const t=()=>{Jt(this,rn,Gn).call(this,{type:"continue"})},n={client:oe(this,ba),meta:this.options.meta,mutationKey:this.options.mutationKey};Le(this,Es,Mg({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(G,F)=>{Jt(this,rn,Gn).call(this,{type:"failed",failureCount:G,error:F})},onPause:()=>{Jt(this,rn,Gn).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,er).canRun(this)}));const a=this.state.status==="pending",l=!oe(this,Es).canStart();try{if(a)t();else{Jt(this,rn,Gn).call(this,{type:"pending",variables:e,isPaused:l}),oe(this,er).config.onMutate&&await oe(this,er).config.onMutate(e,this,n);const F=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,n));F!==this.state.context&&Jt(this,rn,Gn).call(this,{type:"pending",context:F,variables:e,isPaused:l})}const G=await oe(this,Es).start();return await((f=(u=oe(this,er).config).onSuccess)==null?void 0:f.call(u,G,e,this.state.context,this,n)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,G,e,this.state.context,n)),await((y=(x=oe(this,er).config).onSettled)==null?void 0:y.call(x,G,null,this.state.variables,this.state.context,this,n)),await((v=(S=this.options).onSettled)==null?void 0:v.call(S,G,null,e,this.state.context,n)),Jt(this,rn,Gn).call(this,{type:"success",data:G}),G}catch(G){try{await((C=(w=oe(this,er).config).onError)==null?void 0:C.call(w,G,e,this.state.context,this,n))}catch(F){Promise.reject(F)}try{await((N=(_=this.options).onError)==null?void 0:N.call(_,G,e,this.state.context,n))}catch(F){Promise.reject(F)}try{await((R=(E=oe(this,er).config).onSettled)==null?void 0:R.call(E,void 0,G,this.state.variables,this.state.context,this,n))}catch(F){Promise.reject(F)}try{await((I=(O=this.options).onSettled)==null?void 0:I.call(O,void 0,G,e,this.state.context,n))}catch(F){Promise.reject(F)}throw Jt(this,rn,Gn).call(this,{type:"error",error:G}),G}finally{oe(this,er).runNext(this)}}},ba=new WeakMap,tn=new WeakMap,er=new WeakMap,Es=new WeakMap,rn=new WeakSet,Gn=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),rr.batch(()=>{oe(this,tn).forEach(n=>{n.onMutationUpdate(e)}),oe(this,er).notify({mutation:this,type:"updated",action:e})})},qp);function _5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _n,Gr,_a,Kp,S5=(Kp=class extends wl{constructor(e={}){super();Ke(this,_n);Ke(this,Gr);Ke(this,_a);this.config=e,Le(this,_n,new Set),Le(this,Gr,new Map),Le(this,_a,0)}build(e,t,n){const a=new b5({client:e,mutationCache:this,mutationId:++_o(this,_a)._,options:e.defaultMutationOptions(t),state:n});return this.add(a),a}add(e){oe(this,_n).add(e);const t=jo(e);if(typeof t=="string"){const n=oe(this,Gr).get(t);n?n.push(e):oe(this,Gr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(oe(this,_n).delete(e)){const t=jo(e);if(typeof t=="string"){const n=oe(this,Gr).get(t);if(n)if(n.length>1){const a=n.indexOf(e);a!==-1&&n.splice(a,1)}else n[0]===e&&oe(this,Gr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=jo(e);if(typeof t=="string"){const n=oe(this,Gr).get(t),a=n==null?void 0:n.find(l=>l.state.status==="pending");return!a||a===e}else return!0}runNext(e){var n;const t=jo(e);if(typeof t=="string"){const a=(n=oe(this,Gr).get(t))==null?void 0:n.find(l=>l!==e&&l.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rr.batch(()=>{oe(this,_n).forEach(e=>{this.notify({type:"removed",mutation:e})}),oe(this,_n).clear(),oe(this,Gr).clear()})}getAll(){return Array.from(oe(this,_n))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Yf(t,n))}findAll(e={}){return this.getAll().filter(t=>Yf(e,t))}notify(e){rr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return rr.batch(()=>Promise.all(e.map(t=>t.continue().catch(zr))))}},_n=new WeakMap,Gr=new WeakMap,_a=new WeakMap,Kp);function jo(r){var e;return(e=r.options.scope)==null?void 0:e.id}var nn,Qp,C5=(Qp=class extends wl{constructor(e={}){super();Ke(this,nn);this.config=e,Le(this,nn,new Map)}build(e,t,n){const a=t.queryKey,l=t.queryHash??fu(a,t);let c=this.get(l);return c||(c=new y5({client:e,queryKey:a,queryHash:l,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(c)),c}add(e){oe(this,nn).has(e.queryHash)||(oe(this,nn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=oe(this,nn).get(e.queryHash);t&&(e.destroy(),t===e&&oe(this,nn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return oe(this,nn).get(e)}getAll(){return[...oe(this,nn).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Vf(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>Vf(e,n)):t}notify(e){rr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){rr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},nn=new WeakMap,Qp),kt,Xn,qn,pi,mi,Kn,gi,xi,Zp,N5=(Zp=class{constructor(r={}){Ke(this,kt);Ke(this,Xn);Ke(this,qn);Ke(this,pi);Ke(this,mi);Ke(this,Kn);Ke(this,gi);Ke(this,xi);Le(this,kt,r.queryCache||new C5),Le(this,Xn,r.mutationCache||new S5),Le(this,qn,r.defaultOptions||{}),Le(this,pi,new Map),Le(this,mi,new Map),Le(this,Kn,0)}mount(){_o(this,Kn)._++,oe(this,Kn)===1&&(Le(this,gi,Og.subscribe(async r=>{r&&(await this.resumePausedMutations(),oe(this,kt).onFocus())})),Le(this,xi,sl.subscribe(async r=>{r&&(await this.resumePausedMutations(),oe(this,kt).onOnline())})))}unmount(){var r,e;_o(this,Kn)._--,oe(this,Kn)===0&&((r=oe(this,gi))==null||r.call(this),Le(this,gi,void 0),(e=oe(this,xi))==null||e.call(this),Le(this,xi,void 0))}isFetching(r){return oe(this,kt).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return oe(this,Xn).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=oe(this,kt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=oe(this,kt).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(bd(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(r){return oe(this,kt).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),a=oe(this,kt).get(n.queryHash),l=a==null?void 0:a.state.data,c=r5(e,l);if(c!==void 0)return oe(this,kt).build(this,n).setData(c,{...t,manual:!0})}setQueriesData(r,e,t){return rr.batch(()=>oe(this,kt).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=oe(this,kt).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=oe(this,kt);rr.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=oe(this,kt);return rr.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},n=rr.batch(()=>oe(this,kt).findAll(r).map(a=>a.cancel(t)));return Promise.all(n).then(zr).catch(zr)}invalidateQueries(r,e={}){return rr.batch(()=>(oe(this,kt).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=rr.batch(()=>oe(this,kt).findAll(r).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let l=a.fetch(void 0,t);return t.throwOnError||(l=l.catch(zr)),a.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(zr)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=oe(this,kt).build(this,e);return t.isStaleByTime(bd(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(zr).catch(zr)}fetchInfiniteQuery(r){return r.behavior=Qf(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(zr).catch(zr)}ensureInfiniteQueryData(r){return r.behavior=Qf(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return sl.isOnline()?oe(this,Xn).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,kt)}getMutationCache(){return oe(this,Xn)}getDefaultOptions(){return oe(this,qn)}setDefaultOptions(r){Le(this,qn,r)}setQueryDefaults(r,e){oe(this,pi).set(xa(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...oe(this,pi).values()],t={};return e.forEach(n=>{ya(r,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(r,e){oe(this,mi).set(xa(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...oe(this,mi).values()],t={};return e.forEach(n=>{ya(r,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...oe(this,qn).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=fu(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===pu&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...oe(this,qn).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){oe(this,kt).clear(),oe(this,Xn).clear()}},kt=new WeakMap,Xn=new WeakMap,qn=new WeakMap,pi=new WeakMap,mi=new WeakMap,Kn=new WeakMap,gi=new WeakMap,xi=new WeakMap,Zp),j5=A.createContext(void 0),k5=({client:r,children:e})=>(A.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),s.jsx(j5.Provider,{value:r,children:e}));class E5 extends A.Component{constructor(){super(...arguments);$i(this,"state",{hasError:!1,error:null,errorInfo:null});$i(this,"handleReload",()=>{window.location.reload()});$i(this,"handleGoHome",()=>{window.location.href="/"});$i(this,"handleReportBug",()=>{var a,l,c;const t=`Error: ${(a=this.state.error)==null?void 0:a.message}

Stack: ${(l=this.state.error)==null?void 0:l.stack}

Component Stack: ${(c=this.state.errorInfo)==null?void 0:c.componentStack}`,n=`mailto:support@deckforge.com?subject=DeckForge Error Report&body=${encodeURIComponent(t)}`;window.location.href=n})}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n});try{const a=localStorage.getItem("deckforge-autosave");if(a){const l={timestamp:new Date().toISOString(),state:a};localStorage.setItem("deckforge-crash-backup",JSON.stringify(l))}}catch(a){console.error("Failed to save crash backup:",a)}}render(){var t,n;return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:s.jsx("div",{className:"max-w-2xl w-full",children:s.jsxs("div",{className:"bg-card border-2 border-destructive p-8 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-20 h-20 rounded-full bg-destructive/20 flex items-center justify-center",children:s.jsx(bf,{className:"w-10 h-10 text-destructive"})})}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h1",{className:"font-display text-2xl uppercase tracking-widest",children:"Something Went Wrong"}),s.jsx("p",{className:"text-muted-foreground",children:"DeckForge encountered an unexpected error"})]}),s.jsxs("details",{className:"bg-secondary p-4 rounded border border-border",children:[s.jsx("summary",{className:"cursor-pointer text-sm font-mono text-muted-foreground hover:text-foreground transition-colors",children:"Technical Details (click to expand)"}),s.jsx("div",{className:"mt-4 space-y-2",children:s.jsxs("div",{className:"text-xs font-mono bg-background p-3 rounded overflow-auto max-h-40",children:[s.jsx("p",{className:"text-destructive font-semibold",children:(t=this.state.error)==null?void 0:t.message}),((n=this.state.error)==null?void 0:n.stack)&&s.jsx("pre",{className:"mt-2 text-muted-foreground text-[10px] whitespace-pre-wrap",children:this.state.error.stack})]})})]}),s.jsx("div",{className:"bg-accent/10 border border-accent/30 p-4 rounded",children:s.jsxs("p",{className:"text-sm text-foreground flex items-start gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("span",{children:[s.jsx("strong",{children:"Your work may be saved!"})," We automatically backed up your design before the crash. Try reloading the page to recover it."]})]})}),s.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[s.jsxs(le,{onClick:this.handleReload,className:"gap-2",children:[s.jsx(am,{className:"w-4 h-4"}),"Reload Page"]}),s.jsxs(le,{onClick:this.handleGoHome,variant:"outline",className:"gap-2",children:[s.jsx(n2,{className:"w-4 h-4"}),"Go to Dashboard"]}),s.jsxs(le,{onClick:this.handleReportBug,variant:"outline",className:"gap-2",children:[s.jsx(bf,{className:"w-4 h-4"}),"Report Bug"]})]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-xs text-muted-foreground",children:["If this keeps happening,"," ",s.jsx("a",{href:"/designs",className:"text-accent hover:underline",children:"try starting a new design"})," ","or"," ",s.jsx("a",{href:"mailto:support@deckforge.com",className:"text-accent hover:underline",children:"contact support"})]})})]})})}):this.props.children}}const Jc=[{id:"pen",icon:Wd,label:"Pen Tool",shortcut:"P",description:"Draw custom shapes with click-to-point or free draw"},{id:"stickers",icon:om,label:"Stickers",shortcut:"S",description:"Add vector icons and decals from library"},{id:"lines",icon:lm,label:"Lines",shortcut:"L",description:"Draw straight, curved, and decorative lines"},{id:"patterns",icon:Vd,label:"Patterns",description:"Apply procedural patterns (checkerboard, stripes, etc.)"},{id:"textures",icon:Yd,label:"Textures",description:"Add realistic texture overlays (concrete, rust, graffiti)"},{id:"graphics",icon:$d,label:"Graphics",shortcut:"G",description:"Basic shapes (circle, square, star)"},{id:"text",icon:ll,label:"Text",shortcut:"T",description:"Add text with custom fonts and styling"},{id:"uploads",icon:Ko,label:"Uploads",shortcut:"U",description:"Upload your own images, SVGs, and assets"},{id:"finishes",icon:Qo,label:"Finishes",description:"Apply print textures (scratched wood, grip tape, halftone)"}];function Jf(){const{activeTool:r,setActiveTool:e}=_t();return A.useEffect(()=>{const t=n=>{if(n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.ctrlKey||n.metaKey||n.altKey)return;const a=n.key.toLowerCase(),l=Jc.find(c=>{var d;return((d=c.shortcut)==null?void 0:d.toLowerCase())===a});l&&(n.preventDefault(),e(r===l.id?null:l.id))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[r,e]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"hidden md:flex flex-col w-14 bg-card border-r border-border h-full",children:[s.jsx("div",{className:"py-4 px-2 border-b border-border",children:s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground block text-center",children:"Tools"})}),s.jsx(Qn,{className:"flex-1",children:s.jsx("div",{className:"flex flex-col gap-1 p-2",children:Jc.map(t=>{const n=t.icon,a=r===t.id;return s.jsxs(ii,{delayDuration:300,children:[s.jsx(ai,{asChild:!0,children:s.jsx("button",{onClick:()=>e(a?null:t.id),className:at("w-10 h-10 flex items-center justify-center border border-transparent rounded-md","hover:border-border hover:bg-secondary hover:scale-105 transition-all duration-200 active:scale-95",a&&"tool-active border-primary bg-primary/10 scale-105"),children:s.jsx(n,{className:"w-5 h-5",strokeWidth:1.5})})}),s.jsx(Ps,{side:"right",className:"max-w-xs",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("span",{className:"font-semibold",children:t.label}),t.shortcut&&s.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted border border-border rounded font-mono",children:t.shortcut})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]})})]},t.id)})})})]}),s.jsx("div",{className:"md:hidden w-full bg-card border-b border-border",children:s.jsx(Qn,{className:"w-full",orientation:"horizontal",children:s.jsx("div",{className:"flex gap-1 p-2",children:Jc.map(t=>{const n=t.icon,a=r===t.id;return s.jsxs("button",{onClick:()=>e(a?null:t.id),className:at("min-w-[64px] h-16 flex flex-col items-center justify-center gap-1 border border-transparent shrink-0 rounded-md","hover:bg-secondary/50 hover:border-border active:bg-secondary/80 active:scale-95 transition-all duration-200 touch-manipulation",a&&"tool-active border-primary bg-primary/10"),children:[s.jsx(n,{className:"w-5 h-5",strokeWidth:1.5}),s.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:t.label})]},t.id)})})})})]})}function Fg(r){const e=A.useRef({value:r,previous:r});return A.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var zg=["PageUp","PageDown"],Bg=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Gg={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ji="Slider",[Cd,P5,A5]=Zd(ji),[Hg]=Nn(ji,[A5]),[T5,_l]=Hg(ji),Ug=A.forwardRef((r,e)=>{const{name:t,min:n=0,max:a=100,step:l=1,orientation:c="horizontal",disabled:d=!1,minStepsBetweenThumbs:u=0,defaultValue:f=[n],value:p,onValueChange:m=()=>{},onValueCommit:x=()=>{},inverted:y=!1,form:S,...v}=r,w=A.useRef(new Set),C=A.useRef(0),N=c==="horizontal"?R5:D5,[E=[],R]=ts({prop:p,defaultProp:f,onChange:re=>{var H;(H=[...w.current][C.current])==null||H.focus(),m(re)}}),O=A.useRef(E);function I(re){const D=F5(E,re);Y(re,D)}function G(re){Y(re,C.current)}function F(){const re=O.current[C.current];E[C.current]!==re&&x(E)}function Y(re,D,{commit:H}={commit:!1}){const k=H5(l),T=U5(Math.round((re-n)/l)*l+n,k),Z=nm(T,[n,a]);R((W=[])=>{const ee=M5(W,Z,D);if(G5(ee,u*l)){C.current=ee.indexOf(Z);const J=String(ee)!==String(W);return J&&H&&x(ee),J?ee:W}else return W})}return s.jsx(T5,{scope:r.__scopeSlider,name:t,disabled:d,min:n,max:a,valueIndexToChangeRef:C,thumbs:w.current,values:E,orientation:c,form:S,children:s.jsx(Cd.Provider,{scope:r.__scopeSlider,children:s.jsx(Cd.Slot,{scope:r.__scopeSlider,children:s.jsx(N,{"aria-disabled":d,"data-disabled":d?"":void 0,...v,ref:e,onPointerDown:it(v.onPointerDown,()=>{d||(O.current=E)}),min:n,max:a,inverted:y,onSlideStart:d?void 0:I,onSlideMove:d?void 0:G,onSlideEnd:d?void 0:F,onHomeKeyDown:()=>!d&&Y(n,0,{commit:!0}),onEndKeyDown:()=>!d&&Y(a,E.length-1,{commit:!0}),onStepKeyDown:({event:re,direction:D})=>{if(!d){const T=zg.includes(re.key)||re.shiftKey&&Bg.includes(re.key)?10:1,Z=C.current,W=E[Z],ee=l*T*D;Y(W+ee,Z,{commit:!0})}}})})})})});Ug.displayName=ji;var[Wg,Vg]=Hg(ji,{startEdge:"left",endEdge:"right",size:"width",direction:1}),R5=A.forwardRef((r,e)=>{const{min:t,max:n,dir:a,inverted:l,onSlideStart:c,onSlideMove:d,onSlideEnd:u,onStepKeyDown:f,...p}=r,[m,x]=A.useState(null),y=Dt(e,N=>x(N)),S=A.useRef(void 0),v=rm(a),w=v==="ltr",C=w&&!l||!w&&l;function _(N){const E=S.current||m.getBoundingClientRect(),R=[0,E.width],I=mu(R,C?[t,n]:[n,t]);return S.current=E,I(N-E.left)}return s.jsx(Wg,{scope:r.__scopeSlider,startEdge:C?"left":"right",endEdge:C?"right":"left",direction:C?1:-1,size:"width",children:s.jsx(Yg,{dir:v,"data-orientation":"horizontal",...p,ref:y,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const E=_(N.clientX);c==null||c(E)},onSlideMove:N=>{const E=_(N.clientX);d==null||d(E)},onSlideEnd:()=>{S.current=void 0,u==null||u()},onStepKeyDown:N=>{const R=Gg[C?"from-left":"from-right"].includes(N.key);f==null||f({event:N,direction:R?-1:1})}})})}),D5=A.forwardRef((r,e)=>{const{min:t,max:n,inverted:a,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...f}=r,p=A.useRef(null),m=Dt(e,p),x=A.useRef(void 0),y=!a;function S(v){const w=x.current||p.current.getBoundingClientRect(),C=[0,w.height],N=mu(C,y?[n,t]:[t,n]);return x.current=w,N(v-w.top)}return s.jsx(Wg,{scope:r.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:s.jsx(Yg,{"data-orientation":"vertical",...f,ref:m,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const w=S(v.clientY);l==null||l(w)},onSlideMove:v=>{const w=S(v.clientY);c==null||c(w)},onSlideEnd:()=>{x.current=void 0,d==null||d()},onStepKeyDown:v=>{const C=Gg[y?"from-bottom":"from-top"].includes(v.key);u==null||u({event:v,direction:C?-1:1})}})})}),Yg=A.forwardRef((r,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:a,onSlideEnd:l,onHomeKeyDown:c,onEndKeyDown:d,onStepKeyDown:u,...f}=r,p=_l(ji,t);return s.jsx(vt.span,{...f,ref:e,onKeyDown:it(r.onKeyDown,m=>{m.key==="Home"?(c(m),m.preventDefault()):m.key==="End"?(d(m),m.preventDefault()):zg.concat(Bg).includes(m.key)&&(u(m),m.preventDefault())}),onPointerDown:it(r.onPointerDown,m=>{const x=m.target;x.setPointerCapture(m.pointerId),m.preventDefault(),p.thumbs.has(x)?x.focus():n(m)}),onPointerMove:it(r.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&a(m)}),onPointerUp:it(r.onPointerUp,m=>{const x=m.target;x.hasPointerCapture(m.pointerId)&&(x.releasePointerCapture(m.pointerId),l(m))})})}),$g="SliderTrack",Xg=A.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,a=_l($g,t);return s.jsx(vt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:e})});Xg.displayName=$g;var Nd="SliderRange",qg=A.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,a=_l(Nd,t),l=Vg(Nd,t),c=A.useRef(null),d=Dt(e,c),u=a.values.length,f=a.values.map(x=>Zg(x,a.min,a.max)),p=u>1?Math.min(...f):0,m=100-Math.max(...f);return s.jsx(vt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:d,style:{...r.style,[l.startEdge]:p+"%",[l.endEdge]:m+"%"}})});qg.displayName=Nd;var jd="SliderThumb",Kg=A.forwardRef((r,e)=>{const t=P5(r.__scopeSlider),[n,a]=A.useState(null),l=Dt(e,d=>a(d)),c=A.useMemo(()=>n?t().findIndex(d=>d.ref.current===n):-1,[t,n]);return s.jsx(O5,{...r,ref:l,index:c})}),O5=A.forwardRef((r,e)=>{const{__scopeSlider:t,index:n,name:a,...l}=r,c=_l(jd,t),d=Vg(jd,t),[u,f]=A.useState(null),p=Dt(e,_=>f(_)),m=u?c.form||!!u.closest("form"):!0,x=lu(u),y=c.values[n],S=y===void 0?0:Zg(y,c.min,c.max),v=L5(n,c.values.length),w=x==null?void 0:x[d.size],C=w?z5(w,S,d.direction):0;return A.useEffect(()=>{if(u)return c.thumbs.add(u),()=>{c.thumbs.delete(u)}},[u,c.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${S}% + ${C}px)`},children:[s.jsx(Cd.ItemSlot,{scope:r.__scopeSlider,children:s.jsx(vt.span,{role:"slider","aria-label":r["aria-label"]||v,"aria-valuemin":c.min,"aria-valuenow":y,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...l,ref:p,style:y===void 0?{display:"none"}:r.style,onFocus:it(r.onFocus,()=>{c.valueIndexToChangeRef.current=n})})}),m&&s.jsx(Qg,{name:a??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:y},n)]})});Kg.displayName=jd;var I5="RadioBubbleInput",Qg=A.forwardRef(({__scopeSlider:r,value:e,...t},n)=>{const a=A.useRef(null),l=Dt(a,n),c=Fg(e);return A.useEffect(()=>{const d=a.current;if(!d)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"value").set;if(c!==e&&p){const m=new Event("input",{bubbles:!0});p.call(d,e),d.dispatchEvent(m)}},[c,e]),s.jsx(vt.input,{style:{display:"none"},...t,ref:l,defaultValue:e})});Qg.displayName=I5;function M5(r=[],e,t){const n=[...r];return n[t]=e,n.sort((a,l)=>a-l)}function Zg(r,e,t){const l=100/(t-e)*(r-e);return nm(l,[0,100])}function L5(r,e){return e>2?`Value ${r+1} of ${e}`:e===2?["Minimum","Maximum"][r]:void 0}function F5(r,e){if(r.length===1)return 0;const t=r.map(a=>Math.abs(a-e)),n=Math.min(...t);return t.indexOf(n)}function z5(r,e,t){const n=r/2,l=mu([0,50],[0,n]);return(n-l(e)*t)*t}function B5(r){return r.slice(0,-1).map((e,t)=>r[t+1]-e)}function G5(r,e){if(e>0){const t=B5(r);return Math.min(...t)>=e}return!0}function mu(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function H5(r){return(String(r).split(".")[1]||"").length}function U5(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}var Jg=Ug,W5=Xg,V5=qg,Y5=Kg;const He=A.forwardRef(({className:r,...e},t)=>s.jsxs(Jg,{ref:t,className:at("relative flex w-full touch-none select-none items-center",r),...e,children:[s.jsx(W5,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(V5,{className:"absolute h-full bg-primary"})}),s.jsx(Y5,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));He.displayName=Jg.displayName;async function $5(r){const e=await r.text(),n=new DOMParser().parseFromString(e,"image/svg+xml");if(n.querySelector("parsererror"))throw new Error("Invalid SVG file");const l=n.querySelector("svg");if(!l)throw new Error("No SVG element found");const c=l.getAttribute("viewBox");let d=parseFloat(l.getAttribute("width")||"100"),u=parseFloat(l.getAttribute("height")||"100");if(c){const[,,m,x]=c.split(/\s+/).map(parseFloat);d=m||d,u=x||u}const f=[];if(l.querySelectorAll("rect, circle, ellipse, path, polygon, polyline, line").forEach(m=>{const x=X5(m,d,u);x&&f.push(x)}),f.length===0){const m=new XMLSerializer().serializeToString(l),x=new Blob([m],{type:"image/svg+xml"}),y=URL.createObjectURL(x);f.push({type:"image",x:0,y:0,width:Math.min(d,200),height:Math.min(u,200),rotation:0,opacity:1,scaleX:1,scaleY:1,src:y})}return f}function X5(r,e,t){const n=r.tagName.toLowerCase(),a=r.getAttribute("fill")||"#000000",l=r.getAttribute("stroke")||"",c=parseFloat(r.getAttribute("stroke-width")||"0"),d=parseFloat(r.getAttribute("opacity")||"1");if(a==="none"&&!l)return null;switch(n){case"rect":return q5(r,a,l,c,d);case"circle":return K5(r,a,l,c,d);case"ellipse":return Q5(r,a,l,c,d);case"line":return Z5(r,l||a,c,d);case"path":case"polygon":case"polyline":return J5(r,e,t,d);default:return null}}function q5(r,e,t,n,a){const l=parseFloat(r.getAttribute("x")||"0"),c=parseFloat(r.getAttribute("y")||"0"),d=parseFloat(r.getAttribute("width")||"100"),u=parseFloat(r.getAttribute("height")||"100");return{type:"shape",shapeType:"rect",x:l,y:c,width:d,height:u,rotation:0,opacity:a,scaleX:1,scaleY:1,fill:e!=="none"?e:void 0,stroke:t||void 0,strokeWidth:n}}function K5(r,e,t,n,a){const l=parseFloat(r.getAttribute("cx")||"50"),c=parseFloat(r.getAttribute("cy")||"50"),d=parseFloat(r.getAttribute("r")||"25");return{type:"shape",shapeType:"circle",x:l-d,y:c-d,width:d*2,height:d*2,rotation:0,opacity:a,scaleX:1,scaleY:1,fill:e!=="none"?e:void 0,stroke:t||void 0,strokeWidth:n}}function Q5(r,e,t,n,a){const l=parseFloat(r.getAttribute("cx")||"50"),c=parseFloat(r.getAttribute("cy")||"50"),d=parseFloat(r.getAttribute("rx")||"25"),u=parseFloat(r.getAttribute("ry")||"25");return{type:"shape",shapeType:"circle",x:l-d,y:c-u,width:d*2,height:u*2,rotation:0,opacity:a,scaleX:1,scaleY:u/d,fill:e!=="none"?e:void 0,stroke:t||void 0,strokeWidth:n}}function Z5(r,e,t,n){const a=parseFloat(r.getAttribute("x1")||"0"),l=parseFloat(r.getAttribute("y1")||"0"),c=parseFloat(r.getAttribute("x2")||"100"),d=parseFloat(r.getAttribute("y2")||"100");return{type:"line",x:a,y:l,width:Math.abs(c-a),height:Math.abs(d-l),rotation:0,opacity:n,scaleX:1,scaleY:1,lineType:"straight",lineEndX:c-a,lineEndY:d-l,stroke:e||"#000000",strokeWidth:t||2,lineCapStyle:"round"}}function J5(r,e,t,n){let a={x:0,y:0,width:100,height:100};try{const p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.style.position="absolute",p.style.visibility="hidden";const m=r.cloneNode(!0);if(p.appendChild(m),document.body.appendChild(p),m.getBBox){const x=m.getBBox();a={x:x.x,y:x.y,width:x.width,height:x.height}}document.body.removeChild(p)}catch(p){console.warn("Failed to get accurate bounding box, using defaults",p)}const l=r.cloneNode(!0),c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("viewBox",`${a.x} ${a.y} ${a.width} ${a.height}`),c.setAttribute("width",String(a.width)),c.setAttribute("height",String(a.height)),c.appendChild(l);const d=new XMLSerializer().serializeToString(c),u=new Blob([d],{type:"image/svg+xml"}),f=URL.createObjectURL(u);return{type:"image",x:a.x,y:a.y,width:a.width,height:a.height,rotation:0,opacity:n,scaleX:1,scaleY:1,src:f}}function e3(r){const e=["image/svg+xml","image/svg","text/xml"],t=[".svg"],n=e.includes(r.type),a=t.some(l=>r.name.toLowerCase().endsWith(l));return n||a}const ep={edgy:[{name:"Skull",icon:B2},{name:"Flame",icon:G2},{name:"Zap",icon:H2},{name:"Sword",icon:U2},{name:"Ghost",icon:W2},{name:"Bug",icon:V2},{name:"Eye",icon:Zn},{name:"Target",icon:_f},{name:"Bomb",icon:Y2},{name:"Swords",icon:$2},{name:"Shield",icon:X2},{name:"Crosshair",icon:q2}],retro:[{name:"Radio",icon:P2},{name:"Disc",icon:A2},{name:"Music",icon:T2},{name:"Rocket",icon:R2},{name:"Crown",icon:D2},{name:"Anchor",icon:O2},{name:"Sun",icon:dm},{name:"Moon",icon:I2},{name:"Camera",icon:M2},{name:"Gamepad",icon:L2},{name:"Headphones",icon:F2},{name:"Watch",icon:z2}],shapes:[{name:"Triangle",icon:j2},{name:"Hexagon",icon:k2},{name:"Circle",icon:cm},{name:"Square",icon:Zo},{name:"Star",icon:Xd},{name:"Heart",icon:sn},{name:"Sparkles",icon:cr},{name:"Hand",icon:E2}],nature:[{name:"Cat",icon:y2},{name:"Dog",icon:v2},{name:"Fish",icon:w2},{name:"Bird",icon:b2},{name:"Leaf",icon:_2},{name:"Cloud",icon:S2},{name:"Mountain",icon:Yd},{name:"Waves",icon:C2},{name:"Feather",icon:N2}],street:[{name:"Pizza",icon:u2},{name:"Coffee",icon:h2},{name:"Cherry",icon:f2},{name:"Glasses",icon:p2},{name:"Lock",icon:cl},{name:"Key",icon:m2},{name:"Fingerprint",icon:g2},{name:"Compass",icon:x2}],sports:[{name:"Trophy",icon:o2},{name:"Award",icon:l2},{name:"Medal",icon:c2},{name:"Dumbbell",icon:d2},{name:"Target",icon:_f}],emoji:[{name:"Laugh",icon:s2},{name:"Smile",icon:i2},{name:"Frown",icon:a2}]},t3=[{id:"checkerboard",name:"Checkerboard",description:"Vans style"},{id:"speed-lines",name:"Speed Lines",description:"Racing stripes"},{id:"halftone",name:"Halftone",description:"Comic book dots"},{id:"noise",name:"Noise",description:"Grainy texture"},{id:"tie-dye",name:"Tie-Dye",description:"Psychedelic swirl"},{id:"diagonal-stripes",name:"Diagonal Stripes",description:"Bold lines"},{id:"hexagons",name:"Hexagons",description:"Honeycomb pattern"},{id:"crosshatch",name:"Crosshatch",description:"Grid overlay"}],r3=[{id:"concrete",name:"Concrete",query:"concrete texture"},{id:"rust",name:"Rust",query:"rust metal texture"},{id:"graffiti",name:"Graffiti",query:"graffiti wall"},{id:"wood",name:"Wood Grain",query:"wood grain texture"},{id:"sticker-bomb",name:"Sticker Bomb",query:"sticker collage"},{id:"asphalt",name:"Asphalt",query:"asphalt pavement"},{id:"brick",name:"Brick Wall",query:"red brick wall"},{id:"marble",name:"Marble",query:"white marble texture"},{id:"carbon-fiber",name:"Carbon Fiber",query:"carbon fiber weave"},{id:"splatter",name:"Paint Splatter",query:"paint splatter drips"}],n3=[{id:"g1",label:"Circle",shapeType:"circle"},{id:"g2",label:"Square",shapeType:"rect"},{id:"g4",label:"Star",shapeType:"star"},{id:"g5",label:"Triangle",shapeType:"polygon",polygonSides:3},{id:"g6",label:"Pentagon",shapeType:"polygon",polygonSides:5},{id:"g7",label:"Hexagon",shapeType:"polygon",polygonSides:6},{id:"g8",label:"Octagon",shapeType:"polygon",polygonSides:8}],s3={"scratched-wood":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Cpath d='M5 10 L55 8 M10 25 L50 27 M8 40 L52 38 M15 52 L45 55' stroke='%23444' stroke-width='0.5' fill='none'/%3E%3Cpath d='M20 5 L22 55 M35 8 L37 52 M48 3 L50 57' stroke='%23333' stroke-width='0.3' fill='none'/%3E%3C/svg%3E","grip-tape-dust":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Ccircle cx='10' cy='15' r='1' fill='%23555'/%3E%3Ccircle cx='25' cy='8' r='0.5' fill='%23444'/%3E%3Ccircle cx='45' cy='20' r='1.5' fill='%23555'/%3E%3Ccircle cx='15' cy='35' r='0.8' fill='%23444'/%3E%3Ccircle cx='50' cy='45' r='1' fill='%23555'/%3E%3Ccircle cx='30' cy='50' r='0.6' fill='%23444'/%3E%3Ccircle cx='8' cy='55' r='1.2' fill='%23555'/%3E%3Ccircle cx='40' cy='30' r='0.7' fill='%23444'/%3E%3C/svg%3E","halftone-dots":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Ccircle cx='10' cy='10' r='3' fill='%23444'/%3E%3Ccircle cx='30' cy='10' r='2' fill='%23444'/%3E%3Ccircle cx='50' cy='10' r='3' fill='%23444'/%3E%3Ccircle cx='20' cy='30' r='2.5' fill='%23444'/%3E%3Ccircle cx='40' cy='30' r='2' fill='%23444'/%3E%3Ccircle cx='10' cy='50' r='2' fill='%23444'/%3E%3Ccircle cx='30' cy='50' r='3' fill='%23444'/%3E%3Ccircle cx='50' cy='50' r='2.5' fill='%23444'/%3E%3C/svg%3E"};function i3({onAddObject:r,deckCenterX:e,deckCenterY:t}){const[n,a]=A.useState("edgy"),l=c=>{r({type:"sticker",x:e-20,y:t-20,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:c,strokeWidth:3,stroke:"#ffffff",solidFill:!1})};return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Vector stickers from Lucide icons. Click to add as large decals."}),s.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(ep).map(c=>s.jsx("button",{onClick:()=>a(c),className:at("px-2 py-1 text-[9px] uppercase tracking-wider border transition-colors",n===c?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"),children:c},c))}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:ep[n].map(c=>{const d=c.icon;return s.jsx("button",{onClick:()=>l(c.name),className:"aspect-square border border-border bg-secondary hover:border-primary transition-colors flex items-center justify-center",title:c.name,children:s.jsx(d,{className:"w-6 h-6",strokeWidth:3})},c.name)})}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:'Tip: Use the Inspector to toggle "Solid Fill" and adjust stroke width.'})]})}function a3({onAddObject:r,deckCenterX:e,deckCenterY:t}){const[n,a]=A.useState("#1e3a8a"),[l,c]=A.useState("#3b82f6"),[d,u]=A.useState(20),f=m=>{switch(m){case"checkerboard":return`conic-gradient(from 90deg at 1px 1px, ${l} 90deg, ${n} 0) 0 0/${d}px ${d}px`;case"speed-lines":return`repeating-linear-gradient(90deg, ${n} 0px, ${n} ${d/4}px, ${l} ${d/4}px, ${l} ${d/2}px)`;case"halftone":return`radial-gradient(${n} ${d/6}px, ${l} ${d/6}px)`;case"noise":return l;case"tie-dye":return`radial-gradient(ellipse at 30% 30%, ${n}, transparent 50%), radial-gradient(ellipse at 70% 70%, ${l}, transparent 50%), ${n}`;case"diagonal-stripes":return`repeating-linear-gradient(45deg, ${n} 0px, ${n} ${d}px, ${l} ${d}px, ${l} ${d*2}px)`;case"hexagons":return`repeating-conic-gradient(from 30deg, ${n} 0deg 60deg, ${l} 60deg 120deg, ${n} 120deg 180deg, ${l} 180deg 240deg, ${n} 240deg 300deg, ${l} 300deg 360deg) 0 0/${d*2}px ${d*2}px`;case"crosshatch":return`repeating-linear-gradient(0deg, transparent, transparent ${d}px, ${l} ${d}px, ${l} ${d+2}px), repeating-linear-gradient(90deg, transparent, transparent ${d}px, ${n} ${d}px, ${n} ${d+2}px)`;default:return n}},p=m=>{r({type:"shape",x:0,y:0,width:vi,height:yi,rotation:0,opacity:1,scaleX:1,scaleY:1,shapeType:"rect",patternType:m,patternPrimaryColor:n,patternSecondaryColor:l,patternScale:d,fill:n})};return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Procedural patterns using CSS gradients. Infinite color combinations."}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Primary"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:n,onChange:m=>a(m.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),s.jsx("span",{className:"text-[9px] font-mono",children:n})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Secondary"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:l,onChange:m=>c(m.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),s.jsx("span",{className:"text-[9px] font-mono",children:l})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Scale"}),s.jsxs("span",{className:"text-[10px] font-mono",children:[d,"px"]})]}),s.jsx(He,{value:[d],onValueChange:([m])=>u(m),min:5,max:50,step:5})]}),s.jsx("div",{className:"space-y-2",children:t3.map(m=>s.jsxs("button",{onClick:()=>p(m.id),className:"w-full border border-border hover:border-primary transition-colors p-2 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 border border-border flex-shrink-0",style:{background:f(m.id),backgroundSize:`${d}px ${d}px`}}),s.jsxs("div",{className:"text-left",children:[s.jsx("span",{className:"text-xs font-mono block",children:m.name}),s.jsx("span",{className:"text-[9px] text-muted-foreground",children:m.description})]})]},m.id))})]})}function o3({onAddObject:r,deckCenterX:e,deckCenterY:t}){const n=(a,l)=>{const c=`https://picsum.photos/seed/${a.replace(/\s/g,"")}-${l}/200/300`;r({type:"texture",x:0,y:0,width:vi,height:yi,rotation:0,opacity:.6,scaleX:1,scaleY:1,textureUrl:c,blendMode:"multiply"})};return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Realistic textures applied with blend modes. Click to add as overlay."}),r3.map(a=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:a.name}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:[0,1,2].map(l=>s.jsx("button",{onClick:()=>n(a.query,l),className:"aspect-square border border-border hover:border-primary transition-colors overflow-hidden bg-secondary",children:s.jsx("img",{src:`https://picsum.photos/seed/${a.query.replace(/\s/g,"")}-${l}/100/100`,alt:a.name,className:"w-full h-full object-cover opacity-70 hover:opacity-100 transition-opacity",loading:"lazy"})},l))})]},a.id)),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Textures use multiply blend by default. Change in Inspector."})]})}const l3=[{id:"straight",name:"Straight",description:"Clean straight line",icon:""},{id:"curved",name:"Curved",description:"Smooth bezier curve",icon:""},{id:"zigzag",name:"Zigzag",description:"Sharp angles",icon:""},{id:"dashed",name:"Dashed",description:"Dotted line",icon:""}];function c3({onAddObject:r,deckCenterX:e,deckCenterY:t}){const[n,a]=A.useState("#ffffff"),[l,c]=A.useState(3),d=u=>{r({type:"line",x:e-30,y:t,width:60,height:60,rotation:0,opacity:1,scaleX:1,scaleY:1,lineType:u,lineEndX:60,lineEndY:u==="curved"?-30:0,lineCurve:u==="curved"?50:0,strokeWidth:l,stroke:n,lineCapStyle:"round"})};return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Draw lines and curves. Click to add, then drag endpoints in canvas."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Stroke Color"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:n,onChange:u=>a(u.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),s.jsx("div",{className:"flex gap-1",children:["#ffffff","#ccff00","#ff6600","#00ffff","#ff00ff","#000000"].map(u=>s.jsx("button",{onClick:()=>a(u),className:`w-5 h-5 border ${n===u?"border-primary":"border-border"}`,style:{backgroundColor:u}},u))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),s.jsxs("span",{className:"text-[10px] font-mono",children:[l,"px"]})]}),s.jsx(He,{value:[l],onValueChange:([u])=>c(u),min:1,max:12,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Line Types"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:l3.map(u=>s.jsxs("button",{onClick:()=>d(u.id),className:"border border-border hover:border-primary transition-colors p-3 flex flex-col items-center gap-1",children:[s.jsx("span",{className:"text-2xl leading-none",style:{color:n},children:u.icon}),s.jsx("span",{className:"text-[9px] font-mono",children:u.name})]},u.id))})]}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Tip: Use Inspector to adjust curve amount and endpoints."})]})}function d3({onAddObject:r,deckCenterX:e,deckCenterY:t}){const[n,a]=A.useState([]),[l,c]=A.useState(!1),[d,u]=A.useState(!1),f=A.useRef(null),{isAuthenticated:p}=jn();A.useState(()=>{p&&m()});const m=async()=>{if(p){c(!0);try{const v=await Xc.list();a(v.assets||[])}catch(v){console.error("Failed to load assets:",v)}finally{c(!1)}}},x=async v=>{const w=v.target.files;if(!w||w.length===0)return;u(!0);let C=0,_=0,N=0;try{for(const E of Array.from(w))if(e3(E))try{const R=await $5(E);R.forEach(O=>r(O)),C++,N+=R.length,R.length>0?de.success(`Imported ${E.name}`,{description:`${R.length} shape${R.length!==1?"s":""} added to canvas`,duration:3e3}):de.warning(`${E.name} imported but no shapes found`,{description:"The SVG may be empty or use unsupported features",duration:3e3})}catch(R){console.error("SVG import failed:",R),de.error(`Failed to import ${E.name}`,{description:"Invalid SVG file or unsupported format",duration:4e3})}else try{const{url:R,width:O,height:I}=await Xc.upload(E);_++,de.success(`Uploaded ${E.name}`,{description:"Image added to your library"}),await m()}catch(R){console.error("Image upload failed:",R),de.error(`Failed to upload ${E.name}`,{description:"Please try again or check file format"})}if(w.length>1){const E=[];C>0&&E.push(`${C} SVG${C!==1?"s":""} (${N} shapes)`),_>0&&E.push(`${_} image${_!==1?"s":""}`),E.length>0&&de.success("Batch upload complete",{description:E.join(" + ")})}}catch(E){console.error("Upload failed:",E),de.error("Upload failed",{description:"Please try again or check your files"})}finally{u(!1),f.current&&(f.current.value="")}},y=v=>{const C=Math.min(120/v.width,120/v.height),_=v.width*C,N=v.height*C;r({type:"image",x:e-_/2,y:t-N/2,width:v.width,height:v.height,rotation:0,opacity:1,scaleX:C,scaleY:C,src:v.file_url})},S=async v=>{if(confirm("Delete this asset?"))try{await Xc.delete(v),await m()}catch(w){console.error("Delete failed:",w)}};return p?s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:f,type:"file",accept:"image/*,.svg",multiple:!0,className:"hidden",onChange:x}),s.jsx("div",{onClick:()=>{var v;return(v=f.current)==null?void 0:v.click()},className:"border-2 border-dashed border-border p-6 text-center hover:border-primary transition-colors cursor-pointer",children:d?s.jsxs(s.Fragment,{children:[s.jsx(ur,{className:"w-6 h-6 mx-auto mb-2 animate-spin text-primary"}),s.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Uploading..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ko,{className:"w-6 h-6 mx-auto mb-2 text-muted-foreground"}),s.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground block mb-1",children:"Upload Images"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"PNG, JPG, SVG"})]})}),l?s.jsx("div",{className:"text-center py-4",children:s.jsx(ur,{className:"w-5 h-5 mx-auto animate-spin text-muted-foreground"})}):n.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map(v=>s.jsxs("div",{className:"relative group border border-border hover:border-primary transition-colors overflow-hidden aspect-square cursor-pointer",onClick:()=>y(v),children:[s.jsx("img",{src:v.file_url,alt:v.name,className:"w-full h-full object-cover"}),s.jsx("button",{onClick:w=>{w.stopPropagation(),S(v.id)},className:"absolute top-1 right-1 p-1 bg-destructive text-destructive-foreground rounded opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(kn,{className:"w-3 h-3"})})]},v.id))}):s.jsx("p",{className:"text-center text-xs text-muted-foreground py-4",children:"No uploads yet. Click above to upload!"})]}):s.jsxs("div",{className:"text-center py-8 space-y-4",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Login to upload custom images"}),s.jsx(le,{size:"sm",onClick:()=>window.location.href="/auth",children:"Login"})]})}function u3(){const{textureOverlays:r,toggleTexture:e,updateTexture:t}=_t();return s.jsxs("div",{className:"space-y-4",children:[s.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground block",children:"Texture Overlays"}),s.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Add realistic print textures that blend over your design."}),r.map(n=>s.jsxs("div",{className:at("border p-3 space-y-3 transition-colors",n.enabled?"border-primary bg-secondary/50":"border-border"),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>e(n.id),className:at("w-12 h-12 border flex-shrink-0 bg-cover bg-center",n.enabled?"border-primary":"border-border"),style:{backgroundImage:`url("${s3[n.id]}")`}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-mono text-xs",children:n.name}),s.jsx("button",{onClick:()=>e(n.id),className:at("w-8 h-4 rounded-full transition-colors relative",n.enabled?"bg-primary":"bg-muted"),children:s.jsx("span",{className:at("absolute top-0.5 w-3 h-3 rounded-full bg-white transition-transform",n.enabled?"translate-x-4":"translate-x-0.5")})})]}),s.jsx("span",{className:"text-[9px] text-muted-foreground uppercase tracking-wider",children:n.blendMode})]})]}),n.enabled&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Opacity"}),s.jsxs("span",{className:"font-mono text-[10px]",children:[Math.round(n.opacity*100),"%"]})]}),s.jsx(He,{value:[n.opacity*100],onValueChange:([a])=>t(n.id,{opacity:a/100}),min:5,max:100,step:5,className:"w-full"})]})]},n.id))]})}function h3({tool:r,onAddObject:e,deckCenterX:t,deckCenterY:n}){const a=(d,u)=>{d.dataTransfer.setData("application/json",JSON.stringify(u)),d.dataTransfer.effectAllowed="copy"},l=()=>{e({type:"text",x:t-25,y:n,width:50,height:24,rotation:0,opacity:1,scaleX:1,scaleY:1,text:"SKATE",fontSize:18,fontFamily:"Oswald",fill:"#ffffff"}),de.success("Text added to center of deck",{description:"Double-click text to edit, or use Inspector panel to customize",duration:3e3})},c=(d,u)=>{e({type:"shape",x:t-15,y:n-15,width:30,height:30,rotation:0,opacity:1,scaleX:1,scaleY:1,shapeType:d,fill:"#ffffff",...d==="polygon"&&{polygonSides:u||6}})};if(r==="stickers")return s.jsx(i3,{onAddObject:e,deckCenterX:t,deckCenterY:n});if(r==="patterns")return s.jsx(a3,{onAddObject:e,deckCenterX:t,deckCenterY:n});if(r==="textures")return s.jsx(o3,{onAddObject:e,deckCenterX:t,deckCenterY:n});if(r==="lines")return s.jsx(c3,{onAddObject:e,deckCenterX:t,deckCenterY:n});if(r==="graphics")return s.jsxs("div",{className:"space-y-3",children:[s.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Click to add or drag to canvas"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:n3.map(d=>s.jsxs("button",{draggable:!0,onDragStart:u=>a(u,{type:"shape",shapeType:d.shapeType,width:30,height:30,fill:"#ffffff",...d.shapeType==="polygon"&&{polygonSides:d.polygonSides}}),onClick:()=>c(d.shapeType,d.polygonSides),className:"aspect-square border border-border bg-secondary hover:border-primary transition-colors flex items-center justify-center cursor-grab active:cursor-grabbing",children:[d.shapeType==="circle"&&s.jsx("div",{className:"w-8 h-8 rounded-full bg-white"}),d.shapeType==="rect"&&s.jsx("div",{className:"w-8 h-8 bg-white"}),d.shapeType==="star"&&s.jsx("span",{className:"text-white text-2xl",children:""}),d.shapeType==="polygon"&&d.polygonSides===3&&s.jsx("span",{className:"text-white text-2xl",children:""}),d.shapeType==="polygon"&&d.polygonSides===5&&s.jsx("span",{className:"text-white text-2xl",children:""}),d.shapeType==="polygon"&&d.polygonSides===6&&s.jsx("span",{className:"text-white text-2xl",children:""}),d.shapeType==="polygon"&&d.polygonSides===8&&s.jsx("span",{className:"text-white text-2xl",children:""})]},d.id))})]});if(r==="pen"){const d=()=>{e({type:"path",x:t-30,y:n-30,width:60,height:60,rotation:0,opacity:1,scaleX:1,scaleY:1,stroke:"#ffffff",strokeWidth:3,solidFill:!1,pathPoints:[{x:0,y:30},{x:30,y:0,cp1x:10,cp1y:30,cp2x:20,cp2y:0},{x:60,y:30,cp1x:40,cp1y:0,cp2x:50,cp2y:30}],pathClosed:!1})},u=()=>{e({type:"path",x:t-25,y:n-25,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ccff00",stroke:"#ffffff",strokeWidth:2,solidFill:!0,pathPoints:[{x:25,y:0},{x:50,y:43,cp1x:50,cp1y:15,cp2x:50,cp2y:28},{x:0,y:43,cp1x:0,cp1y:28,cp2x:0,cp2y:15}],pathClosed:!0})};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Quick Start"}),s.jsx("button",{onClick:d,className:"w-full btn-brutal text-left",children:"+ Curved Path"}),s.jsx("button",{onClick:u,className:"w-full btn-brutal text-left",children:"+ Closed Shape"})]}),s.jsxs("div",{className:"space-y-2 pt-3 border-t border-border",children:[s.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Instructions"}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Select a path"})," to see anchor points (blue) and control handles (orange)."]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Drag"})," the path to move it around the canvas."]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Edit points"})," in the Inspector panel to add/remove anchors or adjust curves."]}),s.jsxs("p",{children:["Use ",s.jsx("strong",{children:"Transform tools"})," to scale and rotate paths."]})]})]})]})}return r==="text"?s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Add custom text to your deck. Text appears in the center and is immediately selected for editing."}),s.jsxs("button",{onClick:l,className:"w-full btn-brutal text-left flex items-center justify-between group",children:[s.jsx("span",{children:"+ Add Text"}),s.jsx("span",{className:"text-[9px] text-muted-foreground group-hover:text-foreground transition-colors",children:"Click to add"})]}),s.jsx("div",{className:"p-3 border border-accent/30 bg-accent/10 space-y-2",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-accent text-lg",children:""}),s.jsxs("div",{className:"text-[10px] text-muted-foreground space-y-1",children:[s.jsx("p",{children:s.jsx("strong",{children:"After adding:"})}),s.jsx("p",{children:" Edit text in Inspector panel"}),s.jsx("p",{children:" Change font, size, color"}),s.jsx("p",{children:" Drag to reposition"}),s.jsx("p",{children:" Use transform handles to resize/rotate"})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Popular Styles"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[s.jsx("span",{className:"font-display text-base font-bold",children:"BOLD IMPACT"}),s.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"High visibility branding"})]}),s.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[s.jsx("span",{className:"font-display text-base italic",children:"Stylish Script"}),s.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Elegant cursive look"})]}),s.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[s.jsx("span",{className:"font-mono text-sm",children:"TECHNICAL MONO"}),s.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Clean modern aesthetic"})]})]})]})]}):r==="uploads"?s.jsx(d3,{onAddObject:e,deckCenterX:t,deckCenterY:n}):r==="finishes"?s.jsx(u3,{}):s.jsx("div",{className:"text-center py-8",children:s.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Use Stickers, Patterns, or Textures for assets."})})}const f3={templates:"Templates",graphics:"Graphics",text:"Text",uploads:"Uploads",background:"Background",finishes:"Finishes",stickers:"Stickers",patterns:"Patterns",textures:"Textures",lines:"Lines",pen:"Pen Tool"};function tp(){const{activeTool:r,drawerOpen:e,toggleDrawer:t,addObject:n}=_t();if(!e||!r||r==="pen")return null;const a=vi/2,l=yi/2;return s.jsxs("div",{className:"w-56 bg-card border-r border-border h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between py-3 px-3 border-b border-border",children:[s.jsx("span",{className:"font-display text-xs uppercase tracking-widest",children:f3[r]}),s.jsx("button",{onClick:()=>t(!1),className:"w-6 h-6 flex items-center justify-center hover:bg-secondary transition-colors",children:s.jsx(Ca,{className:"w-4 h-4"})})]}),s.jsx(Qn,{className:"flex-1 p-3",children:s.jsx(h3,{tool:r,onAddObject:n,deckCenterX:a,deckCenterY:l})})]})}function p3(r){return r.type==="text"?ll:r.type==="image"?$d:r.type==="sticker"?om:r.type==="line"?lm:r.type==="path"?Wd:r.type==="texture"?Yd:r.type==="shape"?r.shapeType==="circle"?cm:r.shapeType==="star"?Xd:Zo:Zo}function rp(r){return r.type==="text"&&r.text?r.text.length>15?r.text.slice(0,15)+"...":r.text:r.type==="sticker"&&r.iconName?`${r.iconName} Sticker`:r.type==="shape"&&r.shapeType?`${r.shapeType.charAt(0).toUpperCase()+r.shapeType.slice(1)} Shape`:r.type==="line"&&r.lineType?`${r.lineType.charAt(0).toUpperCase()+r.lineType.slice(1)} Line`:r.type==="path"?r.pathClosed?"Closed Path":"Open Path":r.type==="texture"?"Texture Overlay":r.type==="image"?"Image":r.type.charAt(0).toUpperCase()+r.type.slice(1)}function m3({obj:r,index:e,isSelected:t,onSelect:n,onDelete:a}){const l=p3(r),{updateObject:c}=_t(),d=f=>{f.stopPropagation(),c(r.id,{hidden:!r.hidden}),de.success(r.hidden?"Layer visible":"Layer hidden")},u=f=>{f.stopPropagation(),c(r.id,{locked:!r.locked}),de.success(r.locked?"Layer unlocked":"Layer locked")};return s.jsxs("div",{onClick:n,className:at("flex items-center gap-1.5 px-2 py-1.5 border-b border-border cursor-pointer group","hover:bg-secondary hover:shadow-sm transition-all duration-200",t&&"bg-primary/10 border-l-2 border-l-primary",r.hidden&&"opacity-50"),children:[s.jsx(K2,{className:"w-3 h-3 text-muted-foreground cursor-grab"}),s.jsx(l,{className:"w-4 h-4 text-foreground"}),s.jsx("span",{className:"flex-1 text-xs truncate font-medium",children:rp(r)}),s.jsxs(ii,{children:[s.jsx(ai,{asChild:!0,children:s.jsx("button",{onClick:d,className:"w-6 h-6 flex items-center justify-center hover:bg-secondary hover:scale-110 active:scale-95 transition-all duration-200 rounded",title:r.hidden?"Show layer":"Hide layer",children:r.hidden?s.jsx(Q2,{className:"w-3.5 h-3.5 text-muted-foreground"}):s.jsx(Zn,{className:"w-3.5 h-3.5 text-muted-foreground"})})}),s.jsx(Ps,{side:"left",children:s.jsxs("p",{className:"text-xs",children:[r.hidden?"Show":"Hide"," layer"]})})]}),s.jsxs(ii,{children:[s.jsx(ai,{asChild:!0,children:s.jsx("button",{onClick:u,className:"w-6 h-6 flex items-center justify-center hover:bg-secondary hover:scale-110 active:scale-95 transition-all duration-200 rounded",title:r.locked?"Unlock layer":"Lock layer",children:r.locked?s.jsx(cl,{className:"w-3.5 h-3.5 text-orange-500"}):s.jsx(hm,{className:"w-3.5 h-3.5 text-muted-foreground"})})}),s.jsx(Ps,{side:"left",children:s.jsxs("p",{className:"text-xs",children:[r.locked?"Unlock":"Lock"," layer"]})})]}),s.jsxs(ii,{children:[s.jsx(ai,{asChild:!0,children:s.jsx("button",{onClick:f=>{f.stopPropagation();const p=rp(r);a(),de.success(`Deleted "${p}"`,{description:"Use Layers panel to manage or remove items",duration:2e3})},className:"w-6 h-6 flex items-center justify-center hover:bg-destructive hover:text-destructive-foreground hover:scale-110 active:scale-95 transition-all duration-200 rounded opacity-0 group-hover:opacity-100",title:"Delete layer",children:s.jsx(kn,{className:"w-3.5 h-3.5"})})}),s.jsx(Ps,{side:"left",children:s.jsx("p",{className:"text-xs",children:"Delete this layer"})})]})]})}function e0(){const{objects:r,selectedId:e,selectObject:t,deleteObject:n,moveLayer:a}=_t(),l=[...r].reverse();return s.jsxs("div",{className:"border-t border-border",children:[s.jsxs("div",{className:"py-2 px-3 border-b border-border bg-accent/10",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qo,{className:"w-4 h-4 text-accent"}),s.jsxs("span",{className:"font-display text-xs uppercase tracking-widest text-foreground font-semibold",children:["Layers ",r.length>0&&`(${r.length})`]})]}),s.jsxs(ii,{children:[s.jsx(ai,{asChild:!0,children:s.jsx("button",{className:"w-4 h-4 flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(um,{className:"w-3.5 h-3.5"})})}),s.jsxs(Ps,{side:"left",className:"max-w-xs",children:[s.jsx("p",{className:"text-xs font-semibold mb-1",children:"Layers Panel"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Shows all elements on your deck. Click to select, hover to reveal delete button."})]})]})]}),r.length>0&&s.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Click layer to select  Hover to delete"})]}),s.jsx(Qn,{className:"h-48",children:l.length===0?s.jsxs("div",{className:"p-6 text-center space-y-2",children:[s.jsx(Qo,{className:"w-8 h-8 mx-auto text-muted-foreground opacity-50"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"No layers yet"}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Add text, shapes, or images to see them here"})]})]}):l.map((c,d)=>{const u=r.length-1-d;return s.jsx(m3,{obj:c,index:u,isSelected:e===c.id,onSelect:()=>t(c.id),onDelete:()=>n(c.id),onMoveUp:()=>a(c.id,"up"),onMoveDown:()=>a(c.id,"down"),isFirst:d===0,isLast:d===l.length-1},c.id)})})]})}var Sl="Switch",[g3]=Nn(Sl),[x3,y3]=g3(Sl),t0=A.forwardRef((r,e)=>{const{__scopeSwitch:t,name:n,checked:a,defaultChecked:l,required:c,disabled:d,value:u="on",onCheckedChange:f,form:p,...m}=r,[x,y]=A.useState(null),S=Dt(e,N=>y(N)),v=A.useRef(!1),w=x?p||!!x.closest("form"):!0,[C,_]=ts({prop:a,defaultProp:l??!1,onChange:f,caller:Sl});return s.jsxs(x3,{scope:t,checked:C,disabled:d,children:[s.jsx(vt.button,{type:"button",role:"switch","aria-checked":C,"aria-required":c,"data-state":i0(C),"data-disabled":d?"":void 0,disabled:d,value:u,...m,ref:S,onClick:it(r.onClick,N=>{_(E=>!E),w&&(v.current=N.isPropagationStopped(),v.current||N.stopPropagation())})}),w&&s.jsx(s0,{control:x,bubbles:!v.current,name:n,value:u,checked:C,required:c,disabled:d,form:p,style:{transform:"translateX(-100%)"}})]})});t0.displayName=Sl;var r0="SwitchThumb",n0=A.forwardRef((r,e)=>{const{__scopeSwitch:t,...n}=r,a=y3(r0,t);return s.jsx(vt.span,{"data-state":i0(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:e})});n0.displayName=r0;var v3="SwitchBubbleInput",s0=A.forwardRef(({__scopeSwitch:r,control:e,checked:t,bubbles:n=!0,...a},l)=>{const c=A.useRef(null),d=Dt(c,l),u=Fg(t),f=lu(e);return A.useEffect(()=>{const p=c.current;if(!p)return;const m=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==t&&y){const S=new Event("click",{bubbles:n});y.call(p,t),p.dispatchEvent(S)}},[u,t,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...a,tabIndex:-1,ref:d,style:{...a.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});s0.displayName=v3;function i0(r){return r?"checked":"unchecked"}var a0=t0,w3=n0;const Cl=A.forwardRef(({className:r,...e},t)=>s.jsx(a0,{className:at("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",r),...e,ref:t,children:s.jsx(w3,{className:at("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Cl.displayName=a0.displayName;var b3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_3=b3.reduce((r,e)=>{const t=Y1(`Primitive.${e}`),n=A.forwardRef((a,l)=>{const{asChild:c,...d}=a,u=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(u,{...d,ref:l})});return n.displayName=`Primitive.${e}`,{...r,[e]:n}},{}),S3="Separator",np="horizontal",C3=["horizontal","vertical"],o0=A.forwardRef((r,e)=>{const{decorative:t,orientation:n=np,...a}=r,l=N3(n)?n:np,d=t?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return s.jsx(_3.div,{"data-orientation":l,...d,...a,ref:e})});o0.displayName=S3;function N3(r){return C3.includes(r)}var l0=o0;const bs=A.forwardRef(({className:r,orientation:e="horizontal",decorative:t=!0,...n},a)=>s.jsx(l0,{ref:a,decorative:t,orientation:e,className:at("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...n}));bs.displayName=l0.displayName;function j3(){const{selectedId:r,objects:e,updateObject:t}=_t(),[n,a]=A.useState("gradient"),l=e.find(c=>c.id===r);return!r||!l?s.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Select an object to add effects"}):l.type!=="shape"&&l.type!=="text"&&l.type!=="sticker"?s.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Effects only available for shapes, text, and stickers"}):s.jsx(Qn,{className:"h-full",children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 border-b border-border pb-2",children:[s.jsxs(le,{variant:n==="gradient"?"default":"ghost",size:"sm",onClick:()=>a("gradient"),children:[s.jsx(cr,{className:"w-3 h-3 mr-1"}),"Gradient"]}),s.jsxs(le,{variant:n==="shadow"?"default":"ghost",size:"sm",onClick:()=>a("shadow"),children:[s.jsx(Z2,{className:"w-3 h-3 mr-1"}),"Shadow"]}),s.jsxs(le,{variant:n==="glow"?"default":"ghost",size:"sm",onClick:()=>a("glow"),children:[s.jsx(dm,{className:"w-3 h-3 mr-1"}),"Glow"]}),s.jsxs(le,{variant:n==="filters"?"default":"ghost",size:"sm",onClick:()=>a("filters"),children:[s.jsx(J2,{className:"w-3 h-3 mr-1"}),"Filters"]})]}),n==="gradient"&&s.jsx(k3,{object:l,updateObject:t}),n==="shadow"&&s.jsx(E3,{object:l,updateObject:t}),n==="glow"&&s.jsx(P3,{object:l,updateObject:t}),n==="filters"&&s.jsx(A3,{object:l,updateObject:t})]})})}function k3({object:r,updateObject:e}){const t=r.fillType||"solid",n=r.gradientStops||[{offset:0,color:"#ff0000"},{offset:1,color:"#0000ff"}],a=r.gradientAngle||0,l=f=>{e(r.id,{fillType:f,gradientStops:f!=="solid"?n:void 0,gradientAngle:f==="linear-gradient"?a:void 0})},c=(f,p)=>{const m=[...n];m[f]={...m[f],...p},e(r.id,{gradientStops:m})},d=()=>{const f=[...n,{offset:.5,color:"#00ff00"}].sort((p,m)=>p.offset-m.offset);e(r.id,{gradientStops:f})},u=f=>{if(n.length<=2)return;const p=n.filter((m,x)=>x!==f);e(r.id,{gradientStops:p})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-xs",children:"Fill Type"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx(le,{variant:t==="solid"?"default":"outline",size:"sm",onClick:()=>l("solid"),className:"text-xs",children:"Solid"}),s.jsx(le,{variant:t==="linear-gradient"?"default":"outline",size:"sm",onClick:()=>l("linear-gradient"),className:"text-xs",children:"Linear"}),s.jsx(le,{variant:t==="radial-gradient"?"default":"outline",size:"sm",onClick:()=>l("radial-gradient"),className:"text-xs",children:"Radial"})]})]}),t!=="solid"&&s.jsxs(s.Fragment,{children:[t==="linear-gradient"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Angle: ",a,""]}),s.jsx(He,{value:[a],onValueChange:([f])=>e(r.id,{gradientAngle:f}),min:0,max:360,step:1})]}),s.jsx(bs,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-xs",children:"Color Stops"}),s.jsx(le,{size:"sm",variant:"ghost",onClick:d,children:s.jsx(pa,{className:"w-3 h-3"})})]}),n.map((f,p)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dt,{type:"color",value:f.color,onChange:m=>c(p,{color:m.target.value}),className:"w-12 h-8 p-1 cursor-pointer"}),s.jsx(He,{value:[f.offset*100],onValueChange:([m])=>c(p,{offset:m/100}),min:0,max:100,step:1,className:"flex-1"}),s.jsxs("span",{className:"text-xs text-muted-foreground w-10 text-right",children:[Math.round(f.offset*100),"%"]}),n.length>2&&s.jsx(le,{size:"sm",variant:"ghost",onClick:()=>u(p),children:s.jsx(kn,{className:"w-3 h-3"})})]},p))]})]})]})}function E3({object:r,updateObject:e}){const t=r.dropShadow||{enabled:!1,offsetX:4,offsetY:4,blur:8,color:"#000000",opacity:.5},n=a=>{e(r.id,{dropShadow:{...t,...a}})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-xs",children:"Drop Shadow"}),s.jsx(Cl,{checked:t.enabled,onCheckedChange:a=>n({enabled:a})})]}),t.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Offset X: ",t.offsetX,"px"]}),s.jsx(He,{value:[t.offsetX],onValueChange:([a])=>n({offsetX:a}),min:-50,max:50,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Offset Y: ",t.offsetY,"px"]}),s.jsx(He,{value:[t.offsetY],onValueChange:([a])=>n({offsetY:a}),min:-50,max:50,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Blur: ",t.blur,"px"]}),s.jsx(He,{value:[t.blur],onValueChange:([a])=>n({blur:a}),min:0,max:50,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Opacity: ",Math.round(t.opacity*100),"%"]}),s.jsx(He,{value:[t.opacity*100],onValueChange:([a])=>n({opacity:a/100}),min:0,max:100,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-xs",children:"Color"}),s.jsx(dt,{type:"color",value:t.color,onChange:a=>n({color:a.target.value}),className:"w-full h-10 cursor-pointer"})]})]})]})}function P3({object:r,updateObject:e}){const t=r.glow||{enabled:!1,radius:10,color:"#ffffff",intensity:.8},n=a=>{e(r.id,{glow:{...t,...a}})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-xs",children:"Glow Effect"}),s.jsx(Cl,{checked:t.enabled,onCheckedChange:a=>n({enabled:a})})]}),t.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Radius: ",t.radius,"px"]}),s.jsx(He,{value:[t.radius],onValueChange:([a])=>n({radius:a}),min:0,max:50,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Intensity: ",Math.round(t.intensity*100),"%"]}),s.jsx(He,{value:[t.intensity*100],onValueChange:([a])=>n({intensity:a/100}),min:0,max:100,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-xs",children:"Color"}),s.jsx(dt,{type:"color",value:t.color,onChange:a=>n({color:a.target.value}),className:"w-full h-10 cursor-pointer"})]})]})]})}function A3({object:r,updateObject:e}){const t=r.duotone||{enabled:!1,color1:"#000000",color2:"#ccff00"},n=a=>{e(r.id,{duotone:{...t,...a}})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Blur: ",r.blur||0,"px"]}),s.jsx(He,{value:[r.blur||0],onValueChange:([a])=>e(r.id,{blur:a}),min:0,max:20,step:.5}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Gaussian blur effect (0-20px)"})]}),s.jsx(bs,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Saturation: ",r.saturate||100,"%"]}),s.jsx(He,{value:[r.saturate||100],onValueChange:([a])=>e(r.id,{saturate:a}),min:0,max:200,step:5}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"0% = grayscale, 100% = normal, 200% = hyper-saturated"})]}),s.jsx(bs,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Sepia: ",r.sepia||0,"%"]}),s.jsx(He,{value:[r.sepia||0],onValueChange:([a])=>e(r.id,{sepia:a}),min:0,max:100,step:5}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Vintage photo tone effect"})]}),s.jsx(bs,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-xs",children:["Posterize: ",r.posterize||32," levels"]}),s.jsx(He,{value:[r.posterize||32],onValueChange:([a])=>e(r.id,{posterize:a}),min:2,max:32,step:1}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Reduce color levels (lower = more posterized)"})]}),s.jsx(bs,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-xs",children:"Duotone Effect"}),s.jsx(Cl,{checked:t.enabled,onCheckedChange:a=>n({enabled:a})})]}),t.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-xs",children:"Shadow Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(dt,{type:"color",value:t.color1,onChange:a=>n({color1:a.target.value}),className:"w-16 h-10 cursor-pointer"}),s.jsx("div",{className:"flex gap-1 flex-1",children:["#000000","#1a1a1a","#0000ff","#ff0000"].map(a=>s.jsx("button",{onClick:()=>n({color1:a}),className:"w-8 h-8 border border-border hover:border-primary transition-colors",style:{backgroundColor:a}},a))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-xs",children:"Highlight Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(dt,{type:"color",value:t.color2,onChange:a=>n({color2:a.target.value}),className:"w-16 h-10 cursor-pointer"}),s.jsx("div",{className:"flex gap-1 flex-1",children:["#ccff00","#00ffff","#ff00ff","#ffff00"].map(a=>s.jsx("button",{onClick:()=>n({color2:a}),className:"w-8 h-8 border border-border hover:border-primary transition-colors",style:{backgroundColor:a}},a))})]})]}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Classic punk/skate magazine effect"})]})]}),s.jsx(bs,{}),s.jsx(le,{onClick:()=>e(r.id,{blur:0,saturate:100,sepia:0,posterize:32,duotone:{enabled:!1,color1:"#000000",color2:"#ccff00"}}),variant:"outline",size:"sm",className:"w-full",children:"Reset All Filters"})]})}var Nl="Collapsible",[T3,c0]=Nn(Nl),[R3,gu]=T3(Nl),d0=A.forwardRef((r,e)=>{const{__scopeCollapsible:t,open:n,defaultOpen:a,disabled:l,onOpenChange:c,...d}=r,[u,f]=ts({prop:n,defaultProp:a??!1,onChange:c,caller:Nl});return s.jsx(R3,{scope:t,disabled:l,contentId:ol(),open:u,onOpenToggle:A.useCallback(()=>f(p=>!p),[f]),children:s.jsx(vt.div,{"data-state":yu(u),"data-disabled":l?"":void 0,...d,ref:e})})});d0.displayName=Nl;var u0="CollapsibleTrigger",h0=A.forwardRef((r,e)=>{const{__scopeCollapsible:t,...n}=r,a=gu(u0,t);return s.jsx(vt.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":yu(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:e,onClick:it(r.onClick,a.onOpenToggle)})});h0.displayName=u0;var xu="CollapsibleContent",f0=A.forwardRef((r,e)=>{const{forceMount:t,...n}=r,a=gu(xu,r.__scopeCollapsible);return s.jsx(Sa,{present:t||a.open,children:({present:l})=>s.jsx(D3,{...n,ref:e,present:l})})});f0.displayName=xu;var D3=A.forwardRef((r,e)=>{const{__scopeCollapsible:t,present:n,children:a,...l}=r,c=gu(xu,t),[d,u]=A.useState(n),f=A.useRef(null),p=Dt(e,f),m=A.useRef(0),x=m.current,y=A.useRef(0),S=y.current,v=c.open||d,w=A.useRef(v),C=A.useRef(void 0);return A.useEffect(()=>{const _=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(_)},[]),fa(()=>{const _=f.current;if(_){C.current=C.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const N=_.getBoundingClientRect();m.current=N.height,y.current=N.width,w.current||(_.style.transitionDuration=C.current.transitionDuration,_.style.animationName=C.current.animationName),u(n)}},[c.open,n]),s.jsx(vt.div,{"data-state":yu(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!v,...l,ref:p,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":S?`${S}px`:void 0,...r.style},children:v&&a})});function yu(r){return r?"open":"closed"}var O3=d0,I3=h0,M3=f0,Vr="Accordion",L3=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[vu,F3,z3]=Zd(Vr),[jl]=Nn(Vr,[z3,c0]),wu=c0(),p0=Ze.forwardRef((r,e)=>{const{type:t,...n}=r,a=n,l=n;return s.jsx(vu.Provider,{scope:r.__scopeAccordion,children:t==="multiple"?s.jsx(U3,{...l,ref:e}):s.jsx(H3,{...a,ref:e})})});p0.displayName=Vr;var[m0,B3]=jl(Vr),[g0,G3]=jl(Vr,{collapsible:!1}),H3=Ze.forwardRef((r,e)=>{const{value:t,defaultValue:n,onValueChange:a=()=>{},collapsible:l=!1,...c}=r,[d,u]=ts({prop:t,defaultProp:n??"",onChange:a,caller:Vr});return s.jsx(m0,{scope:r.__scopeAccordion,value:Ze.useMemo(()=>d?[d]:[],[d]),onItemOpen:u,onItemClose:Ze.useCallback(()=>l&&u(""),[l,u]),children:s.jsx(g0,{scope:r.__scopeAccordion,collapsible:l,children:s.jsx(x0,{...c,ref:e})})})}),U3=Ze.forwardRef((r,e)=>{const{value:t,defaultValue:n,onValueChange:a=()=>{},...l}=r,[c,d]=ts({prop:t,defaultProp:n??[],onChange:a,caller:Vr}),u=Ze.useCallback(p=>d((m=[])=>[...m,p]),[d]),f=Ze.useCallback(p=>d((m=[])=>m.filter(x=>x!==p)),[d]);return s.jsx(m0,{scope:r.__scopeAccordion,value:c,onItemOpen:u,onItemClose:f,children:s.jsx(g0,{scope:r.__scopeAccordion,collapsible:!0,children:s.jsx(x0,{...l,ref:e})})})}),[W3,kl]=jl(Vr),x0=Ze.forwardRef((r,e)=>{const{__scopeAccordion:t,disabled:n,dir:a,orientation:l="vertical",...c}=r,d=Ze.useRef(null),u=Dt(d,e),f=F3(t),m=rm(a)==="ltr",x=it(r.onKeyDown,y=>{var G;if(!L3.includes(y.key))return;const S=y.target,v=f().filter(F=>{var Y;return!((Y=F.ref.current)!=null&&Y.disabled)}),w=v.findIndex(F=>F.ref.current===S),C=v.length;if(w===-1)return;y.preventDefault();let _=w;const N=0,E=C-1,R=()=>{_=w+1,_>E&&(_=N)},O=()=>{_=w-1,_<N&&(_=E)};switch(y.key){case"Home":_=N;break;case"End":_=E;break;case"ArrowRight":l==="horizontal"&&(m?R():O());break;case"ArrowDown":l==="vertical"&&R();break;case"ArrowLeft":l==="horizontal"&&(m?O():R());break;case"ArrowUp":l==="vertical"&&O();break}const I=_%C;(G=v[I].ref.current)==null||G.focus()});return s.jsx(W3,{scope:t,disabled:n,direction:a,orientation:l,children:s.jsx(vu.Slot,{scope:t,children:s.jsx(vt.div,{...c,"data-orientation":l,ref:u,onKeyDown:n?void 0:x})})})}),il="AccordionItem",[V3,bu]=jl(il),y0=Ze.forwardRef((r,e)=>{const{__scopeAccordion:t,value:n,...a}=r,l=kl(il,t),c=B3(il,t),d=wu(t),u=ol(),f=n&&c.value.includes(n)||!1,p=l.disabled||r.disabled;return s.jsx(V3,{scope:t,open:f,disabled:p,triggerId:u,children:s.jsx(O3,{"data-orientation":l.orientation,"data-state":C0(f),...d,...a,ref:e,disabled:p,open:f,onOpenChange:m=>{m?c.onItemOpen(n):c.onItemClose(n)}})})});y0.displayName=il;var v0="AccordionHeader",w0=Ze.forwardRef((r,e)=>{const{__scopeAccordion:t,...n}=r,a=kl(Vr,t),l=bu(v0,t);return s.jsx(vt.h3,{"data-orientation":a.orientation,"data-state":C0(l.open),"data-disabled":l.disabled?"":void 0,...n,ref:e})});w0.displayName=v0;var kd="AccordionTrigger",b0=Ze.forwardRef((r,e)=>{const{__scopeAccordion:t,...n}=r,a=kl(Vr,t),l=bu(kd,t),c=G3(kd,t),d=wu(t);return s.jsx(vu.ItemSlot,{scope:t,children:s.jsx(I3,{"aria-disabled":l.open&&!c.collapsible||void 0,"data-orientation":a.orientation,id:l.triggerId,...d,...n,ref:e})})});b0.displayName=kd;var _0="AccordionContent",S0=Ze.forwardRef((r,e)=>{const{__scopeAccordion:t,...n}=r,a=kl(Vr,t),l=bu(_0,t),c=wu(t);return s.jsx(M3,{role:"region","aria-labelledby":l.triggerId,"data-orientation":a.orientation,...c,...n,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...r.style}})});S0.displayName=_0;function C0(r){return r?"open":"closed"}var Y3=p0,$3=y0,X3=w0,N0=b0,j0=S0;const Ed=Y3,oi=A.forwardRef(({className:r,...e},t)=>s.jsx($3,{ref:t,className:at("border-b",r),...e}));oi.displayName="AccordionItem";const li=A.forwardRef(({className:r,children:e,...t},n)=>s.jsx(X3,{className:"flex",children:s.jsxs(N0,{ref:n,className:at("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",r),...t,children:[e,s.jsx(fm,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));li.displayName=N0.displayName;const ci=A.forwardRef(({className:r,children:e,...t},n)=>s.jsx(j0,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:s.jsx("div",{className:at("pb-4 pt-0",r),children:e})}));ci.displayName=j0.displayName;function q3(){var c,d,u,f,p,m,x,y,S,v,w,C,_,N,E,R,O,I,G,F,Y,re,D,H,k,T,Z;const{selectedId:r,objects:e,updateObject:t,saveToHistory:n}=_t(),a=e.find(W=>W.id===r);if(!a)return null;const l=W=>{r&&(n(),t(r,W))};return s.jsxs(Ed,{type:"multiple",className:"border-t border-border",children:[s.jsxs(oi,{value:"drop-shadow",children:[s.jsxs(li,{className:"text-[10px] uppercase tracking-widest text-muted-foreground py-2",children:["Drop Shadow ",((c=a.dropShadow)==null?void 0:c.enabled)&&""]}),s.jsxs(ci,{className:"space-y-3 pt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:((d=a.dropShadow)==null?void 0:d.enabled)||!1,onChange:W=>{var ee,J,V,U;return l({dropShadow:{enabled:W.target.checked,offsetX:((ee=a.dropShadow)==null?void 0:ee.offsetX)||4,offsetY:((J=a.dropShadow)==null?void 0:J.offsetY)||4,blur:((V=a.dropShadow)==null?void 0:V.blur)||8,color:((U=a.dropShadow)==null?void 0:U.color)||"rgba(0,0,0,0.5)"}})},className:"w-4 h-4"}),s.jsx(fe,{className:"text-xs",children:"Enable Drop Shadow"})]}),((u=a.dropShadow)==null?void 0:u.enabled)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Offset X: ",((f=a.dropShadow)==null?void 0:f.offsetX)||0,"px"]}),s.jsx(He,{value:[((p=a.dropShadow)==null?void 0:p.offsetX)||4],onValueChange:([W])=>l({dropShadow:{...a.dropShadow,offsetX:W}}),max:50,min:-50,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Offset Y: ",((m=a.dropShadow)==null?void 0:m.offsetY)||0,"px"]}),s.jsx(He,{value:[((x=a.dropShadow)==null?void 0:x.offsetY)||4],onValueChange:([W])=>l({dropShadow:{...a.dropShadow,offsetY:W}}),max:50,min:-50,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Blur: ",((y=a.dropShadow)==null?void 0:y.blur)||0,"px"]}),s.jsx(He,{value:[((S=a.dropShadow)==null?void 0:S.blur)||8],onValueChange:([W])=>l({dropShadow:{...a.dropShadow,blur:W}}),max:50,min:0,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Shadow Color"}),s.jsx("input",{type:"color",value:((w=(v=a.dropShadow)==null?void 0:v.color)==null?void 0:w.replace(/rgba?\(|\)|[\s,]+/g,"#"))||"#000000",onChange:W=>l({dropShadow:{...a.dropShadow,color:W.target.value}}),className:"w-full h-8 cursor-pointer"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Opacity: ",Math.round((((C=a.dropShadow)==null?void 0:C.opacity)||.5)*100),"%"]}),s.jsx(He,{value:[((_=a.dropShadow)==null?void 0:_.opacity)||.5],onValueChange:([W])=>l({dropShadow:{...a.dropShadow,opacity:W}}),max:1,min:0,step:.05})]})]})]})]}),s.jsxs(oi,{value:"glow",children:[s.jsxs(li,{className:"text-[10px] uppercase tracking-widest text-muted-foreground py-2",children:["Glow ",((N=a.glow)==null?void 0:N.enabled)&&""]}),s.jsxs(ci,{className:"space-y-3 pt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:((E=a.glow)==null?void 0:E.enabled)||!1,onChange:W=>{var ee,J,V;return l({glow:{enabled:W.target.checked,blur:((ee=a.glow)==null?void 0:ee.blur)||15,color:((J=a.glow)==null?void 0:J.color)||"#ffffff",opacity:((V=a.glow)==null?void 0:V.opacity)||.8}})},className:"w-4 h-4"}),s.jsx(fe,{className:"text-xs",children:"Enable Glow"})]}),((R=a.glow)==null?void 0:R.enabled)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Blur: ",((O=a.glow)==null?void 0:O.blur)||0,"px"]}),s.jsx(He,{value:[((I=a.glow)==null?void 0:I.blur)||15],onValueChange:([W])=>l({glow:{...a.glow,blur:W}}),max:50,min:0,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Glow Color"}),s.jsx("input",{type:"color",value:((G=a.glow)==null?void 0:G.color)||"#ffffff",onChange:W=>l({glow:{...a.glow,color:W.target.value}}),className:"w-full h-8 cursor-pointer"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Opacity: ",Math.round((((F=a.glow)==null?void 0:F.opacity)||.8)*100),"%"]}),s.jsx(He,{value:[((Y=a.glow)==null?void 0:Y.opacity)||.8],onValueChange:([W])=>l({glow:{...a.glow,opacity:W}}),max:1,min:0,step:.05})]})]})]})]}),s.jsxs(oi,{value:"outline",children:[s.jsxs(li,{className:"text-[10px] uppercase tracking-widest text-muted-foreground py-2",children:["Outline Stroke ",((re=a.outlineStroke)==null?void 0:re.enabled)&&""]}),s.jsxs(ci,{className:"space-y-3 pt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:((D=a.outlineStroke)==null?void 0:D.enabled)||!1,onChange:W=>{var ee,J;return l({outlineStroke:{enabled:W.target.checked,width:((ee=a.outlineStroke)==null?void 0:ee.width)||2,color:((J=a.outlineStroke)==null?void 0:J.color)||"#000000"}})},className:"w-4 h-4"}),s.jsx(fe,{className:"text-xs",children:"Enable Outline"})]}),((H=a.outlineStroke)==null?void 0:H.enabled)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Width: ",((k=a.outlineStroke)==null?void 0:k.width)||0,"px"]}),s.jsx(He,{value:[((T=a.outlineStroke)==null?void 0:T.width)||2],onValueChange:([W])=>l({outlineStroke:{...a.outlineStroke,width:W}}),max:20,min:.5,step:.5})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Stroke Color"}),s.jsx("input",{type:"color",value:((Z=a.outlineStroke)==null?void 0:Z.color)||"#000000",onChange:W=>l({outlineStroke:{...a.outlineStroke,color:W.target.value}}),className:"w-full h-8 cursor-pointer"})]})]})]})]})]})}const K3=[{id:"sunset",name:"Sunset",gradient:"linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #ee5a6f 100%)",stops:[{offset:0,color:"#ff6b6b"},{offset:.5,color:"#feca57"},{offset:1,color:"#ee5a6f"}],angle:135},{id:"ocean",name:"Ocean",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",stops:[{offset:0,color:"#667eea"},{offset:1,color:"#764ba2"}],angle:135},{id:"fire",name:"Fire",gradient:"linear-gradient(135deg, #f12711 0%, #f5af19 100%)",stops:[{offset:0,color:"#f12711"},{offset:1,color:"#f5af19"}],angle:135},{id:"mint",name:"Mint",gradient:"linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%)",stops:[{offset:0,color:"#00d2ff"},{offset:1,color:"#3a7bd5"}],angle:135},{id:"purple",name:"Purple Haze",gradient:"linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%)",stops:[{offset:0,color:"#8e2de2"},{offset:1,color:"#4a00e0"}],angle:135},{id:"neon",name:"Neon",gradient:"linear-gradient(135deg, #ccff00 0%, #00ffff 100%)",stops:[{offset:0,color:"#ccff00"},{offset:1,color:"#00ffff"}],angle:135}];function Q3({currentFill:r,onApplyGradient:e,onApplySolid:t}){const[n,a]=A.useState(!1);return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[s.jsx("input",{type:"color",value:r||"#ffffff",onChange:l=>t(l.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),s.jsx(dt,{type:"text",value:r||"#ffffff",onChange:l=>t(l.target.value),className:"h-8 text-xs font-mono bg-secondary border-border flex-1"})]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>a(!n),className:"gap-1.5 shrink-0",title:"Apply gradient fill",children:[s.jsx(cr,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"text-[10px]",children:"Gradient"})]})]}),n&&s.jsxs("div",{className:"p-3 border border-accent/30 bg-accent/5 rounded space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground flex items-center gap-1.5",children:[s.jsx(ud,{className:"w-3 h-3"}),"Gradient Presets"]}),s.jsx("button",{onClick:()=>a(!1),className:"text-[9px] text-muted-foreground hover:text-foreground",children:"Close"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:K3.map(l=>s.jsxs("button",{onClick:()=>{e(l.stops,l.angle||0),de.success(`Applied ${l.name} gradient`),a(!1)},className:"group space-y-1.5",children:[s.jsx("div",{className:at("h-12 rounded border border-border group-hover:border-primary transition-colors","group-hover:scale-105 transform transition-transform"),style:{background:l.gradient}}),s.jsx("span",{className:"text-[9px] text-muted-foreground group-hover:text-foreground transition-colors block text-center",children:l.name})]},l.id))}),s.jsx("div",{className:"pt-2 border-t border-border",children:s.jsx("p",{className:"text-[9px] text-muted-foreground",children:" Tip: After applying a gradient, adjust colors and angle in the Advanced panel below"})})]})]})}function Z3(r){const e=J3(r),t=A.forwardRef((n,a)=>{const{children:l,...c}=n,d=A.Children.toArray(l),u=d.find(t4);if(u){const f=u.props.children,p=d.map(m=>m===u?A.Children.count(f)>1?A.Children.only(null):A.isValidElement(f)?f.props.children:null:m);return s.jsx(e,{...c,ref:a,children:A.isValidElement(f)?A.cloneElement(f,void 0,p):null})}return s.jsx(e,{...c,ref:a,children:l})});return t.displayName=`${r}.Slot`,t}function J3(r){const e=A.forwardRef((t,n)=>{const{children:a,...l}=t;if(A.isValidElement(a)){const c=n4(a),d=r4(l,a.props);return a.type!==A.Fragment&&(d.ref=n?Jp(n,c):c),A.cloneElement(a,d)}return A.Children.count(a)>1?A.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var e4=Symbol("radix.slottable");function t4(r){return A.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===e4}function r4(r,e){const t={...e};for(const n in e){const a=r[n],l=e[n];/^on[A-Z]/.test(n)?a&&l?t[n]=(...d)=>{const u=l(...d);return a(...d),u}:a&&(t[n]=a):n==="style"?t[n]={...a,...l}:n==="className"&&(t[n]=[a,l].filter(Boolean).join(" "))}return{...r,...t}}function n4(r){var n,a;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(a=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:a.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var El="Popover",[k0]=Nn(El,[gl]),ka=gl(),[s4,rs]=k0(El),E0=r=>{const{__scopePopover:e,children:t,open:n,defaultOpen:a,onOpenChange:l,modal:c=!1}=r,d=ka(e),u=A.useRef(null),[f,p]=A.useState(!1),[m,x]=ts({prop:n,defaultProp:a??!1,onChange:l,caller:El});return s.jsx(bg,{...d,children:s.jsx(s4,{scope:e,contentId:ol(),triggerRef:u,open:m,onOpenChange:x,onOpenToggle:A.useCallback(()=>x(y=>!y),[x]),hasCustomAnchor:f,onCustomAnchorAdd:A.useCallback(()=>p(!0),[]),onCustomAnchorRemove:A.useCallback(()=>p(!1),[]),modal:c,children:t})})};E0.displayName=El;var P0="PopoverAnchor",i4=A.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,a=rs(P0,t),l=ka(t),{onCustomAnchorAdd:c,onCustomAnchorRemove:d}=a;return A.useEffect(()=>(c(),()=>d()),[c,d]),s.jsx(uu,{...l,...n,ref:e})});i4.displayName=P0;var A0="PopoverTrigger",T0=A.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,a=rs(A0,t),l=ka(t),c=Dt(e,a.triggerRef),d=s.jsx(vt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":M0(a.open),...n,ref:c,onClick:it(r.onClick,a.onOpenToggle)});return a.hasCustomAnchor?d:s.jsx(uu,{asChild:!0,...l,children:d})});T0.displayName=A0;var _u="PopoverPortal",[a4,o4]=k0(_u,{forceMount:void 0}),R0=r=>{const{__scopePopover:e,forceMount:t,children:n,container:a}=r,l=rs(_u,e);return s.jsx(a4,{scope:e,forceMount:t,children:s.jsx(Sa,{present:t||l.open,children:s.jsx(em,{asChild:!0,container:a,children:n})})})};R0.displayName=_u;var _i="PopoverContent",D0=A.forwardRef((r,e)=>{const t=o4(_i,r.__scopePopover),{forceMount:n=t.forceMount,...a}=r,l=rs(_i,r.__scopePopover);return s.jsx(Sa,{present:n||l.open,children:l.modal?s.jsx(c4,{...a,ref:e}):s.jsx(d4,{...a,ref:e})})});D0.displayName=_i;var l4=Z3("PopoverContent.RemoveScroll"),c4=A.forwardRef((r,e)=>{const t=rs(_i,r.__scopePopover),n=A.useRef(null),a=Dt(e,n),l=A.useRef(!1);return A.useEffect(()=>{const c=n.current;if(c)return $1(c)},[]),s.jsx(X1,{as:l4,allowPinchZoom:!0,children:s.jsx(O0,{...r,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(r.onCloseAutoFocus,c=>{var d;c.preventDefault(),l.current||(d=t.triggerRef.current)==null||d.focus()}),onPointerDownOutside:it(r.onPointerDownOutside,c=>{const d=c.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0,f=d.button===2||u;l.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:it(r.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),d4=A.forwardRef((r,e)=>{const t=rs(_i,r.__scopePopover),n=A.useRef(!1),a=A.useRef(!1);return s.jsx(O0,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var c,d;(c=r.onCloseAutoFocus)==null||c.call(r,l),l.defaultPrevented||(n.current||(d=t.triggerRef.current)==null||d.focus(),l.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:l=>{var u,f;(u=r.onInteractOutside)==null||u.call(r,l),l.defaultPrevented||(n.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=l.target;((f=t.triggerRef.current)==null?void 0:f.contains(c))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),O0=A.forwardRef((r,e)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,...m}=r,x=rs(_i,t),y=ka(t);return q1(),s.jsx(K1,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:l,children:s.jsx(tm,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:p,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onDismiss:()=>x.onOpenChange(!1),children:s.jsx(_g,{"data-state":M0(x.open),role:"dialog",id:x.contentId,...y,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),I0="PopoverClose",u4=A.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,a=rs(I0,t);return s.jsx(vt.button,{type:"button",...n,ref:e,onClick:it(r.onClick,()=>a.onOpenChange(!1))})});u4.displayName=I0;var h4="PopoverArrow",f4=A.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,a=ka(t);return s.jsx(Sg,{...a,...n,ref:e})});f4.displayName=h4;function M0(r){return r?"open":"closed"}var p4=E0,m4=T0,g4=R0,L0=D0;const x4=p4,y4=m4,F0=A.forwardRef(({className:r,align:e="center",sideOffset:t=4,...n},a)=>s.jsx(g4,{children:s.jsx(L0,{ref:a,align:e,sideOffset:t,className:at("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n})}));F0.displayName=L0.displayName;function ys({value:r,onChange:e,label:t,showEyedropper:n=!0}){const[a,l]=A.useState(!1),{objects:c}=_t(),d=Array.from(new Set(c.flatMap(p=>[p.fill,p.stroke,p.colorize]).filter(p=>!!p&&p!=="none"))).slice(0,12),u=p=>{e(p),l(!1),de.success("Color picked!",{description:p.toUpperCase()})},f=["#000000","#ffffff","#ccff00","#ff6600","#00ffff","#ff00ff","#ff0000","#00ff00"];return s.jsxs("div",{className:"space-y-2",children:[t&&s.jsx("label",{className:"text-[10px] uppercase tracking-widest text-muted-foreground font-medium block",children:t}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-10 h-10 rounded border-2 border-border shadow-sm cursor-pointer hover:scale-105 transition-transform shrink-0",style:{backgroundColor:r},title:r}),s.jsx("input",{type:"color",value:r,onChange:p=>e(p.target.value),className:"flex-1 h-10 border border-border rounded cursor-pointer min-w-0"}),n&&d.length>0&&s.jsxs(x4,{open:a,onOpenChange:l,children:[s.jsx(y4,{asChild:!0,children:s.jsx(le,{size:"sm",variant:"outline",className:"gap-2 shrink-0",title:"Pick color from canvas",children:s.jsx(ey,{className:"w-4 h-4"})})}),s.jsx(F0,{className:"w-64 p-3",align:"end",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Pick from canvas"}),s.jsx(le,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>l(!1),children:s.jsx(Ca,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"grid grid-cols-6 gap-2",children:d.map((p,m)=>s.jsx("button",{onClick:()=>u(p),className:`w-9 h-9 rounded border-2 transition-all hover:scale-110 ${r.toLowerCase()===p.toLowerCase()?"border-accent ring-2 ring-accent/30":"border-border/50 hover:border-accent/50"}`,style:{backgroundColor:p},title:p},`${p}-${m}`))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Colors from your design"})]})})]})]}),s.jsx("div",{className:"grid grid-cols-8 gap-1.5",children:f.map(p=>s.jsx("button",{onClick:()=>e(p),className:`w-8 h-8 rounded border-2 transition-all hover:scale-110 ${r.toLowerCase()===p.toLowerCase()?"border-accent ring-2 ring-accent/30":"border-border/50"}`,style:{backgroundColor:p},title:p},p))}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("input",{type:"text",value:r,onChange:p=>{const m=p.target.value;(/^#[0-9A-Fa-f]{0,6}$/.test(m)||m==="")&&e(m)},placeholder:"#000000",maxLength:7,className:"flex-1 h-8 px-2 text-xs font-mono border border-border rounded bg-background"})})]})}function sp(){var R,O,I,G,F,Y,re,D,H,k;const{objects:r,selectedId:e,updateObject:t,saveToHistory:n,generatePattern:a,moveLayer:l,bringToFront:c,sendToBack:d}=_t(),u=r.find(T=>T.id===e),[f,p]=A.useState(5),[m,x]=A.useState(0),[y,S]=A.useState(!1),[v,w]=A.useState([]);A.useEffect(()=>{sm().then(w)},[]);const C=()=>{alert("Export feature coming soon! The deck design will be exported as a high-resolution PNG.")},_=T=>{e&&(n(),t(e,T))},{backgroundColor:N,setBackgroundColor:E}=_t();return s.jsxs("div",{className:"w-64 bg-card border-l border-border h-full flex flex-col",children:[s.jsx("div",{className:"p-3 border-b border-border",children:s.jsxs("button",{onClick:C,className:"w-full bg-accent text-accent-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-accent hover:bg-accent/90 transition-colors flex items-center justify-center gap-2",children:[s.jsx(Hr,{className:"w-4 h-4"}),"Export Print"]})}),s.jsx("div",{className:"p-3 border-b border-border space-y-2",children:s.jsx(ys,{label:"Deck Background",value:N,onChange:E,showEyedropper:!0})}),s.jsx("div",{className:"flex-1 overflow-auto",children:u?s.jsxs("div",{className:"p-3 space-y-4",children:[s.jsxs("div",{className:"py-2 border-b border-border flex items-center justify-between",children:[s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Properties"}),s.jsx("button",{onClick:()=>_({locked:!u.locked}),className:`flex items-center gap-1.5 px-2 py-1 text-xs transition-colors ${u.locked?"bg-destructive/20 text-destructive hover:bg-destructive/30":"bg-secondary text-muted-foreground hover:bg-secondary/80"}`,title:u.locked?"Unlock object":"Lock object",children:u.locked?s.jsxs(s.Fragment,{children:[s.jsx(cl,{className:"w-3 h-3"}),s.jsx("span",{className:"uppercase tracking-wider",children:"Locked"})]}):s.jsxs(s.Fragment,{children:[s.jsx(hm,{className:"w-3 h-3"}),s.jsx("span",{className:"uppercase tracking-wider",children:"Unlocked"})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Layer Order"}),s.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[s.jsxs("button",{onClick:()=>{l(e,"up"),de.success("Moved forward")},className:"flex items-center justify-center gap-1 px-2 py-1.5 text-xs bg-secondary hover:bg-secondary/80 border border-border transition-colors",title:"Bring forward (Ctrl+])",children:[s.jsx(ty,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"text-[9px] uppercase",children:"Forward"})]}),s.jsxs("button",{onClick:()=>{l(e,"down"),de.success("Moved backward")},className:"flex items-center justify-center gap-1 px-2 py-1.5 text-xs bg-secondary hover:bg-secondary/80 border border-border transition-colors",title:"Send backward (Ctrl+[)",children:[s.jsx(ry,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"text-[9px] uppercase",children:"Back"})]}),s.jsxs("button",{onClick:()=>{c(e),de.success("Brought to front")},className:"flex items-center justify-center gap-1 px-2 py-1.5 text-xs bg-secondary hover:bg-secondary/80 border border-border transition-colors",title:"Bring to front (Ctrl+Shift+])",children:[s.jsx(ny,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"text-[9px] uppercase",children:"Front"})]}),s.jsxs("button",{onClick:()=>{d(e),de.success("Sent to back")},className:"flex items-center justify-center gap-1 px-2 py-1.5 text-xs bg-secondary hover:bg-secondary/80 border border-border transition-colors",title:"Send to back (Ctrl+Shift+[)",children:[s.jsx(sy,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"text-[9px] uppercase",children:"Back"})]})]}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Move layer in front of or behind other objects"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Opacity"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.opacity*100],onValueChange:([T])=>_({opacity:T/100}),max:100,min:0,step:1,className:"flex-1"}),s.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[Math.round(u.opacity*100),"%"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Blend Mode"}),s.jsxs("select",{value:u.mixBlendMode||"normal",onChange:T=>_({mixBlendMode:T.target.value}),className:"w-full h-8 text-xs bg-secondary border border-border px-2",children:[s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"multiply",children:"Multiply"}),s.jsx("option",{value:"screen",children:"Screen"}),s.jsx("option",{value:"overlay",children:"Overlay"}),s.jsx("option",{value:"darken",children:"Darken"}),s.jsx("option",{value:"lighten",children:"Lighten"}),s.jsx("option",{value:"color-dodge",children:"Color Dodge"}),s.jsx("option",{value:"color-burn",children:"Color Burn"}),s.jsx("option",{value:"hard-light",children:"Hard Light"}),s.jsx("option",{value:"soft-light",children:"Soft Light"}),s.jsx("option",{value:"difference",children:"Difference"}),s.jsx("option",{value:"exclusion",children:"Exclusion"}),s.jsx("option",{value:"hue",children:"Hue"}),s.jsx("option",{value:"saturation",children:"Saturation"}),s.jsx("option",{value:"color",children:"Color"}),s.jsx("option",{value:"luminosity",children:"Luminosity"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Rotation"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dt,{type:"number",value:Math.round(u.rotation),onChange:T=>_({rotation:Number(T.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"}),s.jsx("span",{className:"text-[11px] text-muted-foreground",children:"deg"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Scale"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-[9px] text-muted-foreground",children:"X"}),s.jsx(dt,{type:"number",step:"0.1",value:u.scaleX.toFixed(2),onChange:T=>_({scaleX:Number(T.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Y"}),s.jsx(dt,{type:"number",step:"0.1",value:u.scaleY.toFixed(2),onChange:T=>_({scaleY:Number(T.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]})]})]}),(u.type==="text"||u.type==="shape")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Color"}),s.jsx(Q3,{currentFill:u.fill,onApplySolid:T=>_({fill:T}),onApplyGradient:(T,Z)=>{_({gradientType:"linear",gradientStops:T,gradientAngle:Z,fill:T[0].color})}})]}),u.type==="shape"&&u.patternType&&s.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[s.jsx("div",{className:"py-2",children:s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pattern Settings"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pattern Type"}),s.jsxs("select",{value:u.patternType,onChange:T=>_({patternType:T.target.value}),className:"w-full h-8 text-xs bg-secondary border-border rounded px-2",children:[s.jsx("option",{value:"checkerboard",children:"Checkerboard"}),s.jsx("option",{value:"speed-lines",children:"Speed Lines"}),s.jsx("option",{value:"halftone",children:"Halftone"}),s.jsx("option",{value:"diagonal-stripes",children:"Diagonal Stripes"}),s.jsx("option",{value:"hexagons",children:"Hexagons"}),s.jsx("option",{value:"crosshatch",children:"Crosshatch"})]})]}),s.jsx(ys,{label:"Primary Color",value:u.patternPrimaryColor||"#1e3a8a",onChange:T=>_({patternPrimaryColor:T}),showEyedropper:!0}),s.jsx(ys,{label:"Secondary Color",value:u.patternSecondaryColor||"#3b82f6",onChange:T=>_({patternSecondaryColor:T}),showEyedropper:!0}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pattern Scale"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.patternScale||20],onValueChange:([T])=>_({patternScale:T}),max:100,min:5,step:5,className:"flex-1"}),s.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[u.patternScale||20,"px"]})]})]})]}),(u.type==="image"||u.type==="path")&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Color Tint"}),s.jsx("button",{onClick:()=>_({colorize:u.colorize?null:"#ccff00"}),className:`px-2 py-1 text-[9px] uppercase tracking-wider border transition-colors rounded ${u.colorize?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:u.colorize?"On":"Off"})]}),u.colorize&&s.jsx(ys,{label:"",value:u.colorize,onChange:T=>_({colorize:T}),showEyedropper:!0}),s.jsxs("p",{className:"text-[9px] text-muted-foreground",children:["Apply a color overlay to the ",u.type]})]}),u.type==="sticker"&&s.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[s.jsx("div",{className:"py-2",children:s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Sticker Options"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Fill Color"}),s.jsx("button",{onClick:()=>_({colorize:u.colorize?null:"#ccff00"}),className:`px-2 py-1 text-[9px] uppercase tracking-wider border transition-colors rounded ${u.colorize?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:u.colorize?"On":"Off"})]}),u.colorize&&s.jsx(ys,{label:"",value:u.colorize,onChange:T=>_({colorize:T}),showEyedropper:!0}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Tint the sticker with a solid color"})]}),s.jsx(ys,{label:"Stroke Color",value:u.stroke||"#ffffff",onChange:T=>_({stroke:T}),showEyedropper:!0}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.strokeWidth??3],onValueChange:([T])=>_({strokeWidth:T}),max:8,min:1,step:.5,className:"flex-1"}),s.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[u.strokeWidth??3,"px"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:["solid","dashed","dotted"].map(T=>s.jsx("button",{onClick:()=>_({strokeDashStyle:T}),className:`px-2 py-1.5 text-[10px] uppercase tracking-wider border transition-colors ${(u.strokeDashStyle||"solid")===T?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:T==="solid"?"":T==="dashed"?"":""},T))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Solid Fill"}),s.jsx("button",{onClick:()=>_({solidFill:!u.solidFill}),className:`w-10 h-5 rounded-full transition-colors relative ${u.solidFill?"bg-primary":"bg-muted"}`,children:s.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${u.solidFill?"translate-x-5":"translate-x-0.5"}`})})]}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Fill the icon with solid color instead of outline"})]})]}),u.type==="texture"&&s.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[s.jsx("div",{className:"py-2",children:s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Texture Options"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Blend Mode"}),s.jsx("div",{className:"grid grid-cols-2 gap-1",children:["multiply","overlay","soft-light","color-burn","normal"].map(T=>s.jsx("button",{onClick:()=>_({blendMode:T}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${u.blendMode===T?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:T},T))})]})]}),u.type==="line"&&s.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[s.jsx("div",{className:"py-2",children:s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Options"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Type"}),s.jsx("div",{className:"grid grid-cols-2 gap-1",children:["straight","curved","zigzag","dashed"].map(T=>s.jsx("button",{onClick:()=>_({lineType:T}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${u.lineType===T?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:T},T))})]}),s.jsx(ys,{label:"Stroke Color",value:u.stroke||"#ffffff",onChange:T=>_({stroke:T}),showEyedropper:!0}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.strokeWidth??3],onValueChange:([T])=>_({strokeWidth:T}),max:12,min:1,step:1,className:"flex-1"}),s.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[u.strokeWidth??3,"px"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:["solid","dashed","dotted"].map(T=>s.jsx("button",{onClick:()=>_({strokeDashStyle:T}),className:`px-2 py-1.5 text-[10px] uppercase tracking-wider border transition-colors ${(u.strokeDashStyle||"solid")===T?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:T==="solid"?"":T==="dashed"?"":""},T))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Length (X)"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.lineEndX??60],onValueChange:([T])=>_({lineEndX:T}),max:200,min:-200,step:5,className:"flex-1"}),s.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:u.lineEndX??60})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Length (Y)"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.lineEndY??0],onValueChange:([T])=>_({lineEndY:T}),max:200,min:-200,step:5,className:"flex-1"}),s.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:u.lineEndY??0})]})]}),u.lineType==="curved"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Curve Amount"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.lineCurve??50],onValueChange:([T])=>_({lineCurve:T}),max:100,min:-100,step:5,className:"flex-1"}),s.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:u.lineCurve??50})]}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Negative = curve down, Positive = curve up"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Cap Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:["butt","round","square"].map(T=>s.jsx("button",{onClick:()=>_({lineCapStyle:T}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${u.lineCapStyle===T?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:T},T))})]})]}),u.type==="text"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Text"}),s.jsx(dt,{type:"text",value:u.text||"",onChange:T=>_({text:T.target.value}),className:"h-8 text-xs font-mono bg-secondary border-border"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Font Family ",v.length>0&&s.jsxs("span",{className:"text-accent font-normal",children:["(",v.length," custom)"]})]}),s.jsxs("button",{onClick:()=>S(!0),className:"text-[10px] uppercase tracking-widest text-accent hover:text-accent/80 transition-colors flex items-center gap-1",children:[s.jsx(ll,{className:"w-3 h-3"}),v.length>0?"Manage":"Upload"]})]}),s.jsxs("select",{value:u.fontFamily||"Arial",onChange:T=>_({fontFamily:T.target.value}),className:"w-full h-8 text-xs bg-secondary border border-border px-2 cursor-pointer hover:border-primary transition-colors",children:[v.length>0&&s.jsx("optgroup",{label:" Your Custom Fonts",children:v.map(T=>s.jsx("option",{value:T.font_family,children:T.name},T.id))}),s.jsxs("optgroup",{label:"System Fonts",children:[s.jsx("option",{value:"Arial",children:"Arial"}),s.jsx("option",{value:"Helvetica",children:"Helvetica"}),s.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),s.jsx("option",{value:"Courier New",children:"Courier New"}),s.jsx("option",{value:"Georgia",children:"Georgia"}),s.jsx("option",{value:"Verdana",children:"Verdana"}),s.jsx("option",{value:"Impact",children:"Impact"}),s.jsx("option",{value:"Comic Sans MS",children:"Comic Sans MS"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Font Size"}),s.jsx(dt,{type:"number",value:u.fontSize||24,onChange:T=>_({fontSize:Number(T.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Alignment"}),s.jsx("div",{className:"grid grid-cols-3 gap-1",children:["left","center","right"].map(T=>s.jsx("button",{onClick:()=>_({align:T}),className:`h-8 text-xs uppercase transition-colors ${(u.align||"left")===T?"bg-primary text-primary-foreground":"bg-secondary hover:bg-secondary/80"}`,children:T[0].toUpperCase()},T))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Weight"}),s.jsxs("select",{value:u.fontWeight||"normal",onChange:T=>_({fontWeight:T.target.value}),className:"w-full h-8 text-xs bg-secondary border border-border px-2",children:[s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"bold",children:"Bold"}),s.jsx("option",{value:"300",children:"Light"}),s.jsx("option",{value:"600",children:"Semi-Bold"}),s.jsx("option",{value:"800",children:"Extra-Bold"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Style"}),s.jsxs("select",{value:u.fontStyle||"normal",onChange:T=>_({fontStyle:T.target.value}),className:"w-full h-8 text-xs bg-secondary border border-border px-2",children:[s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"italic",children:"Italic"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Letter Spacing: ",u.letterSpacing||0,"px"]}),s.jsx(He,{value:[u.letterSpacing||0],onValueChange:([T])=>_({letterSpacing:T}),max:20,min:-5,step:.5,className:"flex-1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Line Height: ",(u.lineHeight||1.2).toFixed(1)]}),s.jsx(He,{value:[u.lineHeight||1.2],onValueChange:([T])=>_({lineHeight:T}),max:3,min:.5,step:.1,className:"flex-1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Transform"}),s.jsxs("select",{value:u.textTransform||"none",onChange:T=>_({textTransform:T.target.value}),className:"w-full h-8 text-xs bg-secondary border border-border px-2",children:[s.jsx("option",{value:"none",children:"None"}),s.jsx("option",{value:"uppercase",children:"UPPERCASE"}),s.jsx("option",{value:"lowercase",children:"lowercase"}),s.jsx("option",{value:"capitalize",children:"Capitalize"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Decoration"}),s.jsxs("select",{value:u.textDecoration||"none",onChange:T=>_({textDecoration:T.target.value}),className:"w-full h-8 text-xs bg-secondary border border-border px-2",children:[s.jsx("option",{value:"none",children:"None"}),s.jsx("option",{value:"underline",children:"Underline"}),s.jsx("option",{value:"line-through",children:"Strike-through"})]})]}),s.jsx(Ed,{type:"single",collapsible:!0,className:"border-t border-border",children:s.jsxs(oi,{value:"text-shadow",children:[s.jsxs(li,{className:"text-[10px] uppercase tracking-widest text-muted-foreground py-2",children:["Text Shadow ",((R=u.textShadow)==null?void 0:R.enabled)&&""]}),s.jsxs(ci,{className:"space-y-3 pt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:((O=u.textShadow)==null?void 0:O.enabled)||!1,onChange:T=>{var Z,W,ee,J;return _({textShadow:{enabled:T.target.checked,offsetX:((Z=u.textShadow)==null?void 0:Z.offsetX)||2,offsetY:((W=u.textShadow)==null?void 0:W.offsetY)||2,blur:((ee=u.textShadow)==null?void 0:ee.blur)||4,color:((J=u.textShadow)==null?void 0:J.color)||"#000000"}})},className:"w-4 h-4"}),s.jsx(fe,{className:"text-xs",children:"Enable Shadow"})]}),((I=u.textShadow)==null?void 0:I.enabled)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Offset X: ",((G=u.textShadow)==null?void 0:G.offsetX)||0,"px"]}),s.jsx(He,{value:[((F=u.textShadow)==null?void 0:F.offsetX)||2],onValueChange:([T])=>_({textShadow:{...u.textShadow,offsetX:T}}),max:20,min:-20,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Offset Y: ",((Y=u.textShadow)==null?void 0:Y.offsetY)||0,"px"]}),s.jsx(He,{value:[((re=u.textShadow)==null?void 0:re.offsetY)||2],onValueChange:([T])=>_({textShadow:{...u.textShadow,offsetY:T}}),max:20,min:-20,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Blur: ",((D=u.textShadow)==null?void 0:D.blur)||0,"px"]}),s.jsx(He,{value:[((H=u.textShadow)==null?void 0:H.blur)||4],onValueChange:([T])=>_({textShadow:{...u.textShadow,blur:T}}),max:30,min:0,step:1})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Shadow Color"}),s.jsx("input",{type:"color",value:((k=u.textShadow)==null?void 0:k.color)||"#000000",onChange:T=>_({textShadow:{...u.textShadow,color:T.target.value}}),className:"w-full h-8 cursor-pointer"})]})]})]})]})})]}),s.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[s.jsx("div",{className:"py-2",children:s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Filters"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Contrast"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.contrast??100],onValueChange:([T])=>_({contrast:T}),max:200,min:0,step:5,className:"flex-1"}),s.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[u.contrast??100,"%"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Brightness"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.brightness??100],onValueChange:([T])=>_({brightness:T}),max:200,min:0,step:5,className:"flex-1"}),s.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[u.brightness??100,"%"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Grayscale"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.grayscale??0],onValueChange:([T])=>_({grayscale:T}),max:100,min:0,step:5,className:"flex-1"}),s.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[u.grayscale??0,"%"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Threshold"}),s.jsx("button",{onClick:()=>_({threshold:!u.threshold}),className:`w-10 h-5 rounded-full transition-colors relative ${u.threshold?"bg-primary":"bg-muted"}`,children:s.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${u.threshold?"translate-x-5":"translate-x-0.5"}`})})]}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"High-contrast black & white xerox effect"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Colorize"}),s.jsx("button",{onClick:()=>_({colorize:u.colorize?null:"#00ff00"}),className:`w-10 h-5 rounded-full transition-colors relative ${u.colorize?"bg-primary":"bg-muted"}`,children:s.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${u.colorize?"translate-x-5":"translate-x-0.5"}`})})]}),u.colorize&&s.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[s.jsx("input",{type:"color",value:u.colorize,onChange:T=>_({colorize:T.target.value}),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),s.jsx("div",{className:"flex gap-1",children:["#ccff00","#ff6600","#00ffff","#ff00ff","#ffffff"].map(T=>s.jsx("button",{onClick:()=>_({colorize:T}),className:`w-6 h-6 border ${u.colorize===T?"border-primary":"border-border"}`,style:{backgroundColor:T}},T))})]}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Cast in a single punk zine color"})]})]}),s.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[s.jsx("div",{className:"py-2",children:s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Remix Effects"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Hue Shift"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[u.hueRotate??0],onValueChange:([T])=>_({hueRotate:T}),max:360,min:0,step:15,className:"flex-1"}),s.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[u.hueRotate??0,""]})]}),s.jsx("div",{className:"h-3 w-full rounded",style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Invert"}),s.jsx("button",{onClick:()=>_({invert:!u.invert}),className:`w-10 h-5 rounded-full transition-colors relative ${u.invert?"bg-primary":"bg-muted"}`,children:s.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${u.invert?"translate-x-5":"translate-x-0.5"}`})})]}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Flip colors to negative"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pixelate"}),s.jsx("button",{onClick:()=>_({pixelate:!u.pixelate}),className:`w-10 h-5 rounded-full transition-colors relative ${u.pixelate?"bg-primary":"bg-muted"}`,children:s.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${u.pixelate?"translate-x-5":"translate-x-0.5"}`})})]}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Lo-fi 8-bit effect (images only)"})]}),s.jsxs("button",{onClick:()=>_({hueRotate:0,invert:!1,pixelate:!1,contrast:100,brightness:100,grayscale:0,threshold:!1,colorize:null}),className:"w-full border border-border hover:border-primary transition-colors py-1.5 px-3 text-[10px] uppercase tracking-wider flex items-center justify-center gap-2",children:[s.jsx(pm,{className:"w-3 h-3"}),"Reset All Filters"]})]}),s.jsx(Ed,{type:"single",collapsible:!0,className:"border-t border-border",children:s.jsxs(oi,{value:"effects",className:"border-none",children:[s.jsx(li,{className:"py-3 px-0 hover:no-underline",children:s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Advanced Effects"})}),s.jsx(ci,{className:"pb-4",children:s.jsx(j3,{})})]})}),s.jsxs("div",{className:"pt-4 border-t border-border",children:[s.jsx("div",{className:"py-2",children:s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Effects"})}),s.jsx(q3,{})]}),(u.type==="shape"||u.type==="image"||u.type==="sticker")&&s.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[s.jsx("div",{className:"py-2",children:s.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pattern Generator"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Gap (spacing)"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[f],onValueChange:([T])=>p(T),max:30,min:0,step:1,className:"flex-1"}),s.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[f,"px"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Random Rotation"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(He,{value:[m],onValueChange:([T])=>x(T),max:180,min:0,step:5,className:"flex-1"}),s.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[m,""]})]}),s.jsx("p",{className:"text-[9px] text-muted-foreground",children:"0 = neat grid, 180 = chaotic sticker bomb"})]}),s.jsxs("button",{onClick:()=>{e&&a(e,f,m,vi,yi)},className:"w-full bg-primary text-primary-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-primary hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[s.jsx(Vd,{className:"w-4 h-4"}),"Make Pattern"]}),s.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Tiles the selected sticker across the entire deck"})]})]}):s.jsx("div",{className:"p-4 text-center",children:s.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest",children:"Select an object"})})}),s.jsx(e0,{}),s.jsx(Q1,{isOpen:y,onClose:()=>S(!1),onFontUploaded:async T=>{w([...v,T]);try{await Z1(T),de.success(`Font "${T.name}" ready to use`,{description:"Select it from the font dropdown",duration:3e3}),u&&u.type==="text"&&(_({fontFamily:T.font_family}),de.info("Applied to selected text",{duration:2e3}))}catch(Z){console.error("Failed to load font:",Z),de.error("Font uploaded but failed to load",{description:"Try refreshing the page"})}}})]})}function v4(){var f;const{selectedIds:r,objects:e,alignObjects:t,distributeObjects:n,groupObjects:a,ungroupObject:l}=_t();if(r.length<2)return null;const c=r.length===1&&((f=e.find(p=>p.id===r[0]))==null?void 0:f.type)==="group",d=p=>{t(p);const m={left:"Left",center:"Center",right:"Right",top:"Top",middle:"Middle",bottom:"Bottom"};de.success(`Aligned ${r.length} objects`,{description:m[p]})},u=p=>{if(r.length<3){de.error("Need at least 3 objects to distribute");return}n(p),de.success(`Distributed ${r.length} objects`,{description:p==="horizontal"?"Horizontally":"Vertically"})};return s.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 bg-card border-2 border-primary shadow-2xl rounded-lg p-3 animate-in slide-in-from-bottom-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"px-3 py-1.5 bg-primary/10 rounded border border-primary/20",children:s.jsxs("span",{className:"text-sm font-medium text-primary",children:[r.length," selected"]})}),s.jsx("div",{className:"w-px h-8 bg-border"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:"Align:"}),s.jsx(le,{size:"sm",variant:"outline",onClick:()=>d("left"),className:"h-8 w-8 p-0",title:"Align Left",children:s.jsx(mm,{className:"w-4 h-4"})}),s.jsx(le,{size:"sm",variant:"outline",onClick:()=>d("center"),className:"h-8 w-8 p-0",title:"Align Center",children:s.jsx(iy,{className:"w-4 h-4"})}),s.jsx(le,{size:"sm",variant:"outline",onClick:()=>d("right"),className:"h-8 w-8 p-0",title:"Align Right",children:s.jsx(gm,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"w-px h-8 bg-border"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(le,{size:"sm",variant:"outline",onClick:()=>d("top"),className:"h-8 w-8 p-0",title:"Align Top",children:s.jsx(xm,{className:"w-4 h-4"})}),s.jsx(le,{size:"sm",variant:"outline",onClick:()=>d("middle"),className:"h-8 w-8 p-0",title:"Align Middle",children:s.jsx(ay,{className:"w-4 h-4"})}),s.jsx(le,{size:"sm",variant:"outline",onClick:()=>d("bottom"),className:"h-8 w-8 p-0",title:"Align Bottom",children:s.jsx(ym,{className:"w-4 h-4"})})]}),r.length>=3&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-8 bg-border"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:"Distribute:"}),s.jsx(le,{size:"sm",variant:"outline",onClick:()=>u("horizontal"),className:"h-8 w-8 p-0",title:"Distribute Horizontally",children:s.jsx(oy,{className:"w-4 h-4"})}),s.jsx(le,{size:"sm",variant:"outline",onClick:()=>u("vertical"),className:"h-8 w-8 p-0",title:"Distribute Vertically",children:s.jsx(ly,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"w-px h-8 bg-border"}),c?s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>{l(r[0]),de.success("Ungrouped objects")},className:"gap-2",title:"Ungroup (Ctrl+Shift+G)",children:[s.jsx(cy,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline text-xs",children:"Ungroup"})]}):s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>{a(r),de.success(`Grouped ${r.length} objects`)},className:"gap-2",title:"Group (Ctrl+G)",children:[s.jsx(dy,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline text-xs",children:"Group"})]})]})})}function w4({onSave:r,onExport:e,onOpenHistory:t,onOpenInspector:n,onOpenLayers:a,isSaving:l,isExporting:c}){const{undo:d,redo:u,past:f,future:p,selectedId:m,deleteObject:x}=_t(),[y,S]=A.useState(!1),v=(N=10)=>{"vibrate"in navigator&&navigator.vibrate(N)},w=()=>{v(10),d()},C=()=>{v(10),u()},_=()=>{m&&(v([10,50,10]),x(m))};return s.jsxs(s.Fragment,{children:[y&&s.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:()=>S(!1)}),s.jsxs("div",{className:at("fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50 transition-all duration-300",y?"h-48":"h-14"),children:[s.jsx("button",{onClick:()=>S(!y),className:"absolute -top-8 right-4 w-12 h-8 bg-card border border-border border-b-0 rounded-t-lg flex items-center justify-center hover:bg-secondary transition-colors",children:y?s.jsx(uy,{className:"w-4 h-4"}):s.jsx(vm,{className:"w-4 h-4"})}),s.jsxs("div",{className:"h-14 flex items-center justify-around px-1",children:[s.jsxs("button",{onClick:w,disabled:f.length===0,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-transform",children:[s.jsx(wm,{className:"w-5 h-5"}),s.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Undo"})]}),s.jsxs("button",{onClick:C,disabled:p.length===0,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-transform",children:[s.jsx(bm,{className:"w-5 h-5"}),s.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Redo"})]}),m&&s.jsxs("button",{onClick:_,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] text-destructive active:scale-95 transition-transform",children:[s.jsx(kn,{className:"w-5 h-5"}),s.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Delete"})]}),s.jsxs("button",{onClick:()=>{v(10),a()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[s.jsx(Qo,{className:"w-5 h-5"}),s.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Layers"})]}),s.jsxs("button",{onClick:()=>{v(10),n()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[s.jsx(hy,{className:"w-5 h-5"}),s.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Props"})]}),s.jsxs("button",{onClick:()=>{v(10),t()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[s.jsx(qd,{className:"w-5 h-5"}),s.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"History"})]})]}),y&&s.jsxs("div",{className:"border-t border-border p-3 space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:()=>{r(),S(!1)},disabled:l,className:"btn-brutal text-sm py-2.5 flex items-center justify-center gap-2",children:[s.jsx(Jo,{className:"w-4 h-4"}),l?"Saving...":"Save"]}),s.jsxs("button",{onClick:()=>{e(),S(!1)},disabled:c,className:"btn-brutal text-sm py-2.5 flex items-center justify-center gap-2",children:[s.jsx(Hr,{className:"w-4 h-4"}),c?"Exporting...":"Export"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Tap outside to close"})]})]})]})}function b4(){const{selectedIds:r,objects:e,updateObject:t,saveToHistory:n}=_t(),a=e.filter(w=>r.includes(w.id));if(r.length<2)return null;const l=()=>{n();const w=Math.min(...a.map(C=>C.x));a.forEach(C=>{t(C.id,{x:w})}),de.success("Aligned to left edge")},c=()=>{n();const w=Math.max(...a.map(C=>C.x+C.width));a.forEach(C=>{t(C.id,{x:w-C.width})}),de.success("Aligned to right edge")},d=()=>{n();const w=Math.min(...a.map(N=>N.x)),C=Math.max(...a.map(N=>N.x+N.width)),_=(w+C)/2;a.forEach(N=>{t(N.id,{x:_-N.width/2})}),de.success("Aligned horizontally")},u=()=>{n();const w=Math.min(...a.map(C=>C.y));a.forEach(C=>{t(C.id,{y:w})}),de.success("Aligned to top edge")},f=()=>{n();const w=Math.max(...a.map(C=>C.y+C.height));a.forEach(C=>{t(C.id,{y:w-C.height})}),de.success("Aligned to bottom edge")},p=()=>{n();const w=Math.min(...a.map(N=>N.y)),C=Math.max(...a.map(N=>N.y+N.height)),_=(w+C)/2;a.forEach(N=>{t(N.id,{y:_-N.height/2})}),de.success("Aligned vertically")},m=()=>{n();const w=[...a].sort((O,I)=>O.x-I.x),C=w[0].x,_=w[w.length-1].x+w[w.length-1].width,N=w.reduce((O,I)=>O+I.width,0),E=(_-C-N)/(w.length-1);let R=C;w.forEach((O,I)=>{I>0&&(R+=w[I-1].width+E,t(O.id,{x:R}))}),de.success("Distributed horizontally")},x=()=>{n();const w=[...a].sort((O,I)=>O.y-I.y),C=w[0].y,_=w[w.length-1].y+w[w.length-1].height,N=w.reduce((O,I)=>O+I.height,0),E=(_-C-N)/(w.length-1);let R=C;w.forEach((O,I)=>{I>0&&(R+=w[I-1].height+E,t(O.id,{y:R}))}),de.success("Distributed vertically")},y=()=>{n();const w=a[0].width;a.slice(1).forEach(C=>{t(C.id,{width:w})}),de.success("Matched widths")},S=()=>{n();const w=a[0].height;a.slice(1).forEach(C=>{t(C.id,{height:w})}),de.success("Matched heights")},v=()=>{n();const w=a[0].width,C=a[0].height;a.slice(1).forEach(_=>{t(_.id,{width:w,height:C})}),de.success("Matched sizes")};return s.jsx("div",{className:"fixed top-16 left-1/2 transform -translate-x-1/2 bg-gray-900 border border-gray-700 rounded-lg shadow-2xl p-3 z-40",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"text-xs text-gray-400 font-semibold mb-1 text-center",children:["Align (",r.length," selected)"]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(le,{size:"sm",variant:"ghost",onClick:l,className:"flex-1 h-8",title:"Align Left (Ctrl+Shift+L)",children:s.jsx(mm,{className:"w-4 h-4"})}),s.jsx(le,{size:"sm",variant:"ghost",onClick:d,className:"flex-1 h-8",title:"Align Center Horizontal (Ctrl+Shift+C)",children:s.jsx(fy,{className:"w-4 h-4"})}),s.jsx(le,{size:"sm",variant:"ghost",onClick:c,className:"flex-1 h-8",title:"Align Right (Ctrl+Shift+R)",children:s.jsx(gm,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(le,{size:"sm",variant:"ghost",onClick:u,className:"flex-1 h-8",title:"Align Top (Ctrl+Shift+T)",children:s.jsx(xm,{className:"w-4 h-4"})}),s.jsx(le,{size:"sm",variant:"ghost",onClick:p,className:"flex-1 h-8",title:"Align Center Vertical (Ctrl+Shift+M)",children:s.jsx(py,{className:"w-4 h-4"})}),s.jsx(le,{size:"sm",variant:"ghost",onClick:f,className:"flex-1 h-8",title:"Align Bottom (Ctrl+Shift+B)",children:s.jsx(ym,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"border-t border-gray-700 my-1"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(le,{size:"sm",variant:"ghost",onClick:m,className:"flex-1 h-8",title:"Distribute Horizontally",children:s.jsx(my,{className:"w-4 h-4"})}),s.jsx(le,{size:"sm",variant:"ghost",onClick:x,className:"flex-1 h-8",title:"Distribute Vertically",children:s.jsx(gy,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"border-t border-gray-700 my-1"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(le,{size:"sm",variant:"ghost",onClick:y,className:"flex-1 h-8 text-xs",title:"Match Width",children:"W"}),s.jsx(le,{size:"sm",variant:"ghost",onClick:S,className:"flex-1 h-8 text-xs",title:"Match Height",children:"H"}),s.jsx(le,{size:"sm",variant:"ghost",onClick:v,className:"flex-1 h-8",title:"Match Size",children:s.jsx(xy,{className:"w-4 h-4"})})]})]})})}function ed({isOpen:r,onClose:e,title:t,children:n}){return r?s.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),s.jsxs("div",{className:at("absolute bottom-0 left-0 right-0 bg-card border-t-2 border-border max-h-[80vh] flex flex-col","animate-in slide-in-from-bottom duration-300"),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border shrink-0",children:[s.jsx("h2",{className:"font-display text-sm uppercase tracking-wider",children:t}),s.jsx("button",{onClick:e,className:"text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(Ca,{className:"w-5 h-5"})})]}),s.jsx(Qn,{className:"flex-1",children:s.jsx("div",{className:"p-4",children:n})})]})]}):null}const z0=[{keys:["Click"],description:"Select object",category:"Selection"},{keys:["Shift","Click"],description:"Multi-select",category:"Selection"},{keys:["Esc"],description:"Deselect all",category:"Selection"},{keys:["Tab"],description:"Select next object",category:"Selection"},{keys:["Shift","Tab"],description:"Select previous object",category:"Selection"},{keys:["Delete"],description:"Delete selected",category:"Editing"},{keys:["Backspace"],description:"Delete selected",category:"Editing"},{keys:["Ctrl","Z"],description:"Undo",category:"Editing"},{keys:["Ctrl","Shift","Z"],description:"Redo",category:"Editing"},{keys:["Ctrl","D"],description:"Duplicate",category:"Editing"},{keys:["Ctrl","Shift","D"],description:"Array duplicate (custom grid)",category:"Editing"},{keys:["Ctrl","C"],description:"Copy to clipboard",category:"Editing"},{keys:["Ctrl","V"],description:"Paste from clipboard",category:"Editing"},{keys:["Ctrl","A"],description:"Select all (top object)",category:"Editing"},{keys:["Ctrl","L"],description:"Lock/unlock object",category:"Editing"},{keys:["Ctrl","G"],description:"Group selected objects",category:"Editing"},{keys:["Ctrl","Shift","G"],description:"Ungroup selected group",category:"Editing"},{keys:["Drag"],description:"Move object",category:"Transform"},{keys:["Shift","Drag"],description:"Move with snapping disabled",category:"Transform"},{keys:["Corner","Drag"],description:"Scale object",category:"Transform"},{keys:["Shift","Scale"],description:"Scale proportionally",category:"Transform"},{keys:["Alt","Scale"],description:"Scale from center",category:"Transform"},{keys:["Rotate","Handle"],description:"Rotate object",category:"Transform"},{keys:["Shift","Rotate"],description:"Rotate in 15 increments",category:"Transform"},{keys:["Ctrl","]"],description:"Bring forward",category:"Layers"},{keys:["Ctrl","["],description:"Send backward",category:"Layers"},{keys:["Ctrl","Shift","]"],description:"Bring to front",category:"Layers"},{keys:["Ctrl","Shift","["],description:"Send to back",category:"Layers"},{keys:["Alt","L"],description:"Align left",category:"Alignment"},{keys:["Alt","R"],description:"Align right",category:"Alignment"},{keys:["Alt","C"],description:"Align center",category:"Alignment"},{keys:["Alt","T"],description:"Align top",category:"Alignment"},{keys:["Alt","B"],description:"Align bottom",category:"Alignment"},{keys:["Alt","M"],description:"Align middle",category:"Alignment"},{keys:["Space","Drag"],description:"Pan canvas",category:"View"},{keys:["Scroll"],description:"Zoom in/out",category:"View"},{keys:["Ctrl","0"],description:"Reset zoom to 100%",category:"View"},{keys:["Ctrl","1"],description:"Zoom to fit",category:"View"},{keys:["Ctrl","Shift","R"],description:"Toggle rulers",category:"View"},{keys:["H"],description:"Toggle hardware guide",category:"View"},{keys:["T"],description:"Select text tool",category:"Tools"},{keys:["R"],description:"Select rectangle tool",category:"Tools"},{keys:["C"],description:"Select circle tool",category:"Tools"},{keys:["L"],description:"Select line tool",category:"Tools"},{keys:["V"],description:"Select move tool (default)",category:"Tools"},{keys:["Ctrl","S"],description:"Save design",category:"File"},{keys:["Ctrl","E"],description:"Export PNG",category:"File"},{keys:["Ctrl","N"],description:"New design",category:"File"},{keys:["Ctrl","O"],description:"Open design",category:"File"}],_4=[...new Set(z0.map(r=>r.category))];function ip({text:r}){return s.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-muted border border-border rounded",children:r})}function S4(){const[r,e]=A.useState(!1);return s.jsxs(Go,{open:r,onOpenChange:e,children:[s.jsx(J1,{asChild:!0,children:s.jsxs(le,{size:"sm",variant:"ghost",className:"gap-2",children:[s.jsx(Sf,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden md:inline",children:"Shortcuts"})]})}),s.jsxs(Ho,{className:"max-w-3xl max-h-[80vh]",children:[s.jsx(Uo,{children:s.jsxs(Wo,{className:"font-display text-xl uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Sf,{className:"w-5 h-5"}),"Keyboard Shortcuts"]})}),s.jsx(Qn,{className:"h-[60vh] pr-4",children:s.jsx("div",{className:"space-y-6",children:_4.map(t=>s.jsxs("div",{children:[s.jsx("h3",{className:"font-display text-sm uppercase tracking-widest text-primary mb-3",children:t}),s.jsx("div",{className:"space-y-2",children:z0.filter(n=>n.category===t).map((n,a)=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[s.jsx("span",{className:"text-sm text-foreground",children:n.description}),s.jsx("div",{className:"flex items-center gap-1",children:n.keys.map((l,c)=>s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ip,{text:l}),c<n.keys.length-1&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"+"})]},c))})]},a))})]},t))})}),s.jsxs("div",{className:"text-xs text-muted-foreground text-center pt-4 border-t",children:["Press ",s.jsx(ip,{text:"?"})," anytime to view shortcuts"]})]})]})}function C4(){const[r,e]=A.useState(!1);return A.useEffect(()=>{const t=()=>{e(window.innerWidth<768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),r}const N4=A.lazy(()=>Tr(()=>import("./modals-CF30nvay.js").then(r=>r.a3),__vite__mapDeps([0,1,2])).then(r=>({default:r.VersionHistory}))),j4=A.lazy(()=>Tr(()=>import("./modals-CF30nvay.js").then(r=>r.a4),__vite__mapDeps([0,1,2])).then(r=>({default:r.ShareModal}))),k4=A.lazy(()=>Tr(()=>import("./AnimationPreview-Dp9at5jx.js"),__vite__mapDeps([3,0,1,2,4])).then(r=>({default:r.AnimationPreview}))),E4=A.lazy(()=>Tr(()=>import("./modals-CF30nvay.js").then(r=>r.a5),__vite__mapDeps([0,1,2])).then(r=>({default:r.BrandKitModal}))),P4=A.lazy(()=>Tr(()=>import("./modals-CF30nvay.js").then(r=>r.a2),__vite__mapDeps([0,1,2])).then(r=>({default:r.FontUploadModal}))),A4=A.lazy(()=>Tr(()=>import("./ColorExtractorModal-Yz9AxTz9.js"),__vite__mapDeps([5,0,1,2])).then(r=>({default:r.ColorExtractorModal}))),T4=A.lazy(()=>Tr(()=>import("./SmartDuplicateModal-Rrwbn77z.js"),__vite__mapDeps([6,0,1,2])).then(r=>({default:r.SmartDuplicateModal}))),R4=A.lazy(()=>Tr(()=>import("./modals-CF30nvay.js").then(r=>r.a6),__vite__mapDeps([0,1,2])).then(r=>({default:r.ArrayDuplicateModal}))),D4=A.lazy(()=>Tr(()=>import("./modals-CF30nvay.js").then(r=>r.a7),__vite__mapDeps([0,1,2])).then(r=>({default:r.ExportPreview}))),O4=A.lazy(()=>Tr(()=>import("./modals-CF30nvay.js").then(r=>r.a8),__vite__mapDeps([0,1,2])).then(r=>({default:r.ExportPresetsModal}))),I4=A.lazy(()=>Tr(()=>import("./TemplateGalleryModal-Bs9ZD5JF.js"),__vite__mapDeps([7,0,1,2])).then(r=>({default:r.TemplateGalleryModal}))),M4=A.lazy(()=>Tr(()=>import("./DeckGenerator3D-DQNmlrze.js"),__vite__mapDeps([8,0,1,2,4])).then(r=>({default:r.default})));function L4(){const{selectedId:r,selectedIds:e,deleteObject:t,undo:n,redo:a,getCanvasState:l,currentDesignId:c,setDesignId:d,setSaving:u,isSaving:f,objects:p,designName:m,createVersion:x,past:y,future:S,updateObject:v,saveToHistory:w,addObject:C,selectObject:_,setActiveTool:N,stageScale:E,setStageScale:R,arrayDuplicate:O,showRulers:I,toggleRulers:G,groupObjects:F,ungroupObject:Y}=_t(),{isAuthenticated:re}=jn(),D=Rr(),H=C4(),[k,T]=A.useState(""),[Z,W]=A.useState(!1),[ee,J]=A.useState(!1),[V,U]=A.useState(!1),[X,Ce]=A.useState(!1),[Ne,we]=A.useState(!1),[ot,gt]=A.useState(!1),[Ge,Ue]=A.useState(!1),[lt,We]=A.useState(!1),[At,Je]=A.useState(!1),[P,ce]=A.useState(!1),[ie,z]=A.useState(!1),[L,$]=A.useState(!1),[ue,he]=A.useState(!1),[te,ge]=A.useState(!1),[je,ve]=A.useState(!1),[Oe,nt]=A.useState(!1),[Ye,Et]=A.useState(!1),vr=async()=>{if(!re){D("/auth");return}u(!0),T("Saving...");try{const De=l();if(c)await qo.update(c,{canvas_data:De,name:De.name}),T("Saved!"),de.success("Design saved successfully");else{const Se=await qo.create({name:De.name,canvas_data:De});d(Se.design.id),T("Saved!"),de.success("Design created successfully")}setTimeout(()=>T(""),2e3)}catch(De){console.error("Save failed:",De),T("Save failed"),de.error("Failed to save design. Please try again."),setTimeout(()=>T(""),2e3)}finally{u(!1)}},$t=async()=>{W(!0),T("Exporting PNG..."),J(!1);try{const De=await im(p,{scale:3,format:"png",includeBackground:!0}),Se=`${m.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${Date.now()}.png`;vf(De,Se),T("Exported PNG!"),de.success(`Exported as ${Se}`),setTimeout(()=>T(""),2e3)}catch(De){console.error("Export failed:",De),T("Export failed"),de.error("Failed to export PNG. Please try again."),setTimeout(()=>T(""),2e3)}finally{W(!1)}},hn=async()=>{W(!0),T("Exporting SVG..."),J(!1);try{const De=await e2(p,{includeBackground:!0}),Se=`${m.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${Date.now()}.svg`;vf(De,Se),T("Exported SVG!"),de.success(`Exported vector as ${Se}`),setTimeout(()=>T(""),2e3)}catch(De){console.error("SVG export failed:",De),T("Export failed"),de.error("Failed to export SVG. Please try again."),setTimeout(()=>T(""),2e3)}finally{W(!1)}};return A.useEffect(()=>{re&&sm().catch(console.error)},[re]),A.useEffect(()=>{if(p.length===0)return;const De=setInterval(()=>{x(void 0,!0)},5*60*1e3);return()=>clearInterval(De)},[p.length,x]),A.useEffect(()=>{const De=Se=>{if(Se.target instanceof HTMLInputElement||Se.target instanceof HTMLTextAreaElement)return;const Re=Se.key.toLowerCase(),Me=Se.ctrlKey||Se.metaKey,qe=Se.shiftKey,Ft=Se.altKey;if(Me&&Re==="s"){Se.preventDefault(),vr();return}if(Me&&Re==="e"){Se.preventDefault(),$t();return}if((Re==="delete"||Re==="backspace")&&r){Se.preventDefault(),t(r);return}if(Me&&Re==="z"&&!qe){Se.preventDefault(),n();return}if(Me&&Re==="z"&&qe){Se.preventDefault(),a();return}if(Me&&Re==="d"&&!qe&&r){Se.preventDefault();const me=p.find(Pe=>Pe.id===r);if(me){const{id:Pe,...Fe}=me;C({...Fe,x:me.x+10,y:me.y+10}),de.success("Object duplicated")}return}if(Me&&qe&&Re==="d"&&r){Se.preventDefault(),ge(!0);return}if(Re==="t"&&!Me&&!Ft){Se.preventDefault(),N("text");return}if(Re==="p"&&!Me&&!Ft){Se.preventDefault(),N("pen");return}if(Re==="g"&&!Me&&!Ft){Se.preventDefault(),N("graphics");return}if(Re==="l"&&!Me&&!Ft){Se.preventDefault(),N("lines");return}if(Re==="s"&&!Me&&!Ft){Se.preventDefault(),N("stickers");return}if(Re==="u"&&!Me&&!Ft){Se.preventDefault(),N("uploads");return}if(Re==="escape"){Se.preventDefault(),_(null),N(null);return}if(Me&&qe&&Re==="r"){Se.preventDefault(),_t.getState().toggleRulers();const me=_t.getState().showRulers;de.success(me?"Rulers enabled":"Rulers disabled");return}if(Me&&Re==="l"&&r){Se.preventDefault();const me=p.find(Pe=>Pe.id===r);me&&(v(r,{locked:!me.locked}),de.success(me.locked?"Object unlocked":"Object locked"));return}if(Me&&Re==="g"&&!qe&&e.length>=2){Se.preventDefault(),F(e),de.success(`Grouped ${e.length} objects`);return}if(Me&&qe&&Re==="g"&&e.length===1){Se.preventDefault();const me=p.find(Pe=>Pe.id===e[0]);me&&me.type==="group"?(Y(e[0]),de.success("Ungrouped objects")):de.error("Selected object is not a group");return}if(e.length>=2){const me=p.filter(Pe=>e.includes(Pe.id));if(Me&&qe&&Re==="l"){Se.preventDefault(),w();const Pe=Math.min(...me.map(Fe=>Fe.x));me.forEach(Fe=>v(Fe.id,{x:Pe})),de.success("Aligned to left edge");return}if(Me&&qe&&Re===";"){Se.preventDefault(),w();const Pe=Math.max(...me.map(Fe=>Fe.x+Fe.width));me.forEach(Fe=>v(Fe.id,{x:Pe-Fe.width})),de.success("Aligned to right edge");return}if(Me&&qe&&Re==="c"){Se.preventDefault(),w();const Pe=Math.min(...me.map(jt=>jt.x)),Fe=Math.max(...me.map(jt=>jt.x+jt.width)),Wt=(Pe+Fe)/2;me.forEach(jt=>v(jt.id,{x:Wt-jt.width/2})),de.success("Aligned horizontally");return}if(Me&&qe&&Re==="t"){Se.preventDefault(),w();const Pe=Math.min(...me.map(Fe=>Fe.y));me.forEach(Fe=>v(Fe.id,{y:Pe})),de.success("Aligned to top edge");return}if(Me&&qe&&Re==="b"){Se.preventDefault(),w();const Pe=Math.max(...me.map(Fe=>Fe.y+Fe.height));me.forEach(Fe=>v(Fe.id,{y:Pe-Fe.height})),de.success("Aligned to bottom edge");return}if(Me&&qe&&Re==="m"){Se.preventDefault(),w();const Pe=Math.min(...me.map(jt=>jt.y)),Fe=Math.max(...me.map(jt=>jt.y+jt.height)),Wt=(Pe+Fe)/2;me.forEach(jt=>v(jt.id,{y:Wt-jt.height/2})),de.success("Aligned vertically");return}}if(r&&["arrowup","arrowdown","arrowleft","arrowright"].includes(Re)){Se.preventDefault();const me=p.find(Wt=>Wt.id===r);if(!me)return;const Pe=qe?10:1,Fe={};Re==="arrowup"&&(Fe.y=me.y-Pe),Re==="arrowdown"&&(Fe.y=me.y+Pe),Re==="arrowleft"&&(Fe.x=me.x-Pe),Re==="arrowright"&&(Fe.x=me.x+Pe),v(r,Fe);return}if(Me&&Re==="c"&&r){Se.preventDefault();const me=p.find(Pe=>Pe.id===r);me&&(sessionStorage.setItem("deckforge_clipboard",JSON.stringify(me)),de.success("Copied to clipboard"));return}if(Me&&Re==="v"){Se.preventDefault();const me=sessionStorage.getItem("deckforge_clipboard");if(me)try{const Pe=JSON.parse(me),{id:Fe,...Wt}=Pe;C({...Wt,x:Pe.x+20,y:Pe.y+20}),de.success("Pasted from clipboard")}catch{de.error("Failed to paste")}else de.error("Nothing to paste");return}if(Me&&Re==="a"){Se.preventDefault(),p.length>0&&(_(p[p.length-1].id),de.success(`Selected top object (${p.length} total)`));return}if(Me&&Re==="0"){Se.preventDefault(),R(1),de.success("Zoom reset to 100%");return}if(Me&&Re==="1"){Se.preventDefault(),R(.8),de.success("Zoom to fit");return}if(Me&&(Re==="="||Re==="+")){Se.preventDefault();const me=Math.min(3,E*1.2);R(me),de.success(`Zoom: ${Math.round(me*100)}%`);return}if(Me&&(Re==="-"||Re==="_")){Se.preventDefault();const me=Math.max(.25,E/1.2);R(me),de.success(`Zoom: ${Math.round(me*100)}%`);return}if(r){const me=p.findIndex(Pe=>Pe.id===r);if(me===-1)return;if(Me&&!qe&&Re==="]"){if(Se.preventDefault(),me<p.length-1){const Pe=[...p];[Pe[me],Pe[me+1]]=[Pe[me+1],Pe[me]],_t.setState({objects:Pe}),de.success("Brought forward")}return}if(Me&&!qe&&Re==="["){if(Se.preventDefault(),me>0){const Pe=[...p];[Pe[me],Pe[me-1]]=[Pe[me-1],Pe[me]],_t.setState({objects:Pe}),de.success("Sent backward")}return}if(Me&&qe&&Re==="]"){Se.preventDefault();const Pe=p.filter(Fe=>Fe.id!==r);Pe.push(p[me]),_t.setState({objects:Pe}),de.success("Brought to front");return}if(Me&&qe&&Re==="["){Se.preventDefault();const Pe=p.filter(Fe=>Fe.id!==r);Pe.unshift(p[me]),_t.setState({objects:Pe}),de.success("Sent to back");return}}if(r&&Ft){const me=p.find(Wt=>Wt.id===r);if(!me)return;const Pe=(vi-me.width*me.scaleX)/2,Fe=(yi-me.height*me.scaleY)/2;if(Re==="l"){Se.preventDefault(),v(r,{x:0}),de.success("Aligned left");return}if(Re==="r"){Se.preventDefault(),v(r,{x:vi-me.width*me.scaleX}),de.success("Aligned right");return}if(Re==="c"){Se.preventDefault(),v(r,{x:Pe}),de.success("Aligned center");return}if(Re==="t"){Se.preventDefault(),v(r,{y:0}),de.success("Aligned top");return}if(Re==="b"){Se.preventDefault(),v(r,{y:yi-me.height*me.scaleY}),de.success("Aligned bottom");return}if(Re==="m"){Se.preventDefault(),v(r,{y:Fe}),de.success("Aligned middle");return}}};return window.addEventListener("keydown",De),()=>window.removeEventListener("keydown",De)},[r,t,n,a,p,vr,$t,C,_,N,v,E,R]),s.jsxs("div",{className:"h-screen w-screen flex flex-col bg-background overflow-hidden",children:[s.jsxs("header",{className:at("border-b border-border flex items-center px-4 bg-card shrink-0","h-12"),children:[s.jsxs("h1",{className:at("font-display uppercase tracking-widest text-foreground",H?"text-base":"text-lg"),children:["Deck",s.jsx("span",{className:"text-primary",children:"Forge"})]}),!H&&s.jsx("div",{className:"ml-4 flex items-center gap-2",children:s.jsx("span",{className:"tag-brutal",children:"v1.0"})}),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[!H&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest hidden md:block mr-4",children:"Fingerboard Graphics Editor"}),k&&s.jsx("span",{className:"text-xs text-primary",children:k}),s.jsxs("div",{className:"flex items-center gap-1 border border-border rounded",children:[s.jsxs(le,{size:"sm",variant:"ghost",onClick:n,disabled:y.length===0,className:"gap-1.5 rounded-r-none border-r border-border",title:`Undo (Ctrl+Z) - ${y.length} action${y.length!==1?"s":""} available`,children:[s.jsx(wm,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:y.length})]}),s.jsxs(le,{size:"sm",variant:"ghost",onClick:a,disabled:S.length===0,className:"gap-1.5 rounded-l-none",title:`Redo (Ctrl+Shift+Z) - ${S.length} action${S.length!==1?"s":""} available`,children:[s.jsx(bm,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:S.length})]})]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:vr,disabled:f,className:"gap-2",children:[f?s.jsx(ur,{className:"w-4 h-4 animate-spin"}):s.jsx(Jo,{className:"w-4 h-4"}),f?"Saving...":"Save"]}),s.jsxs("div",{className:"relative",children:[s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>J(!ee),disabled:Z,className:"gap-2",children:[s.jsx(Hr,{className:"w-4 h-4"}),Z?"Exporting...":"Export",s.jsx(fm,{className:"w-3 h-3"})]}),ee&&!Z&&s.jsxs("div",{className:"absolute top-full mt-1 right-0 z-50 bg-card border border-border shadow-lg min-w-[180px] rounded-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>{J(!1),ce(!0)},className:"w-full px-4 py-2.5 text-left text-sm hover:bg-secondary transition-colors font-medium flex items-center gap-2",children:[s.jsx(cr,{className:"w-4 h-4 text-primary"}),"Quick Export",s.jsx("span",{className:"ml-auto text-[9px] text-primary",children:"NEW"})]}),s.jsxs("button",{onClick:()=>{J(!1),Je(!0)},className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary transition-colors border-t border-border",children:["PNG (High-Res)",s.jsx("span",{className:"ml-2 text-[9px] text-muted-foreground",children:"Preview first"})]}),s.jsxs("button",{onClick:hn,className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary transition-colors border-t border-border",children:["SVG (Vector)",s.jsx("span",{className:"ml-2 text-[10px] text-accent",children:"PRO"})]})]})]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>gt(!0),className:"gap-2",children:[s.jsx(ud,{className:"w-4 h-4"}),"Brand Kits",s.jsx("span",{className:"ml-1 text-[9px] text-accent",children:"PRO"})]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>he(!0),className:"gap-2",children:[s.jsx(ud,{className:"w-4 h-4"}),"Extract Colors"]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>Ue(!0),className:"gap-2",children:[s.jsx(ll,{className:"w-4 h-4"}),"Custom Fonts"]}),c&&s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>Ce(!0),className:"gap-2",children:[s.jsx(_m,{className:"w-4 h-4"}),"Share"]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>U(!0),className:"gap-2",children:[s.jsx(qd,{className:"w-4 h-4"}),"History"]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>we(!0),className:"gap-2",children:[s.jsx(yy,{className:"w-4 h-4"}),"Preview"]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>$(!0),className:"gap-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0",children:[s.jsx("span",{className:"text-sm font-bold",children:" 3D Print"}),s.jsx("span",{className:"ml-1 text-[9px] bg-white/20 px-1 rounded",children:"NEW"})]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>z(!0),className:"gap-2",children:[s.jsx(cr,{className:"w-4 h-4"}),"Templates",s.jsx("span",{className:"ml-1 text-[9px] text-primary",children:"NEW"})]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>D("/marketplace"),className:"gap-2",children:[s.jsx(cr,{className:"w-4 h-4"}),"Marketplace",s.jsx("span",{className:"ml-1 text-[9px] text-primary",children:"NEW"})]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>D("/fingerpark"),className:"gap-2",children:[s.jsx(Cf,{className:"w-4 h-4"}),"Park Builder",s.jsx("span",{className:"ml-1 text-[9px] text-primary",children:"NEW"})]}),s.jsxs(le,{size:"sm",variant:"ghost",onClick:()=>D("/gallery"),className:"gap-2",children:[s.jsx(cr,{className:"w-4 h-4"}),"Gallery"]}),s.jsxs(le,{size:"sm",variant:"ghost",onClick:()=>D(re?"/designs":"/auth"),className:"gap-2",children:[s.jsx(Nf,{className:"w-4 h-4"}),re?"My Designs":"Login"]}),s.jsx(le,{size:"sm",variant:I?"default":"ghost",onClick:()=>{G(),de.success(I?"Rulers hidden":"Rulers visible")},className:"gap-2",title:"Toggle rulers (Ctrl+Shift+R)",children:s.jsx(Cf,{className:"w-4 h-4"})}),s.jsx(S4,{})]}),H&&s.jsx(le,{size:"sm",variant:"ghost",onClick:()=>Et(!0),className:"gap-2",children:s.jsx(vm,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:at("flex-1 flex overflow-hidden",H&&"pb-14"),children:[!H&&s.jsxs(s.Fragment,{children:[s.jsx(Jf,{}),s.jsx(tp,{}),s.jsx(dd,{}),s.jsx(sp,{})]}),H&&s.jsxs(s.Fragment,{children:[s.jsx(Jf,{}),s.jsx(tp,{}),s.jsx(dd,{})]})]}),H&&s.jsx(w4,{onSave:vr,onExport:$t,onOpenHistory:()=>U(!0),onOpenInspector:()=>ve(!0),onOpenLayers:()=>nt(!0),isSaving:f,isExporting:Z}),s.jsx(ed,{isOpen:je,onClose:()=>ve(!1),title:"Properties",children:s.jsx(sp,{})}),s.jsx(ed,{isOpen:Oe,onClose:()=>nt(!1),title:"Layers",children:s.jsx(e0,{})}),s.jsx(ed,{isOpen:Ye,onClose:()=>Et(!1),title:"Menu",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>{D("/templates"),Et(!1)},className:"w-full btn-brutal text-left py-3 flex items-center gap-2",children:[s.jsx(cr,{className:"w-4 h-4"}),"Templates"]}),s.jsxs("button",{onClick:()=>{D("/marketplace"),Et(!1)},className:"w-full btn-brutal text-left py-3 flex items-center gap-2",children:[s.jsx(cr,{className:"w-4 h-4"}),"Marketplace",s.jsx("span",{className:"ml-auto text-[9px] text-primary",children:"NEW"})]}),s.jsxs("button",{onClick:()=>{D("/fingerpark"),Et(!1)},className:"w-full btn-brutal text-left py-3 flex items-center gap-2",children:[s.jsx(cr,{className:"w-4 h-4"}),"Park Builder",s.jsx("span",{className:"ml-auto text-[9px] text-primary",children:"NEW"})]}),s.jsxs("button",{onClick:()=>{D(re?"/designs":"/auth"),Et(!1)},className:"w-full btn-brutal text-left py-3 flex items-center gap-2",children:[s.jsx(Nf,{className:"w-4 h-4"}),re?"My Designs":"Login"]}),k&&s.jsx("p",{className:"text-xs text-primary text-center py-2",children:k})]})}),s.jsxs(A.Suspense,{fallback:null,children:[s.jsx(N4,{isOpen:V,onClose:()=>U(!1)}),c&&s.jsx(j4,{isOpen:X,onClose:()=>Ce(!1),designId:c,designName:m}),s.jsx(k4,{isOpen:Ne,onClose:()=>we(!1)}),s.jsx(P4,{isOpen:Ge,onClose:()=>Ue(!1),onFontUploaded:De=>{de.success(`${De.name} is now available!`,{description:"You can now use this font in your text objects."})}}),s.jsx(R4,{open:lt,onClose:()=>We(!1),onDuplicate:(De,Se,Re,Me)=>{if(r){O(r,De,Se,Re,Me);const qe=De*Se-1;de.success(`Created ${qe} ${qe===1?"copy":"copies"} in ${De}${Se} grid`)}}})]}),s.jsx(E4,{isOpen:ot,onClose:()=>gt(!1),currentColors:(()=>{const De=new Set;return p.forEach(Se=>{Se.fill&&De.add(Se.fill),Se.stroke&&De.add(Se.stroke),Se.colorize&&De.add(Se.colorize)}),Array.from(De)})(),onApplyKit:De=>{const Se=new Set;p.forEach(me=>{me.fill&&me.fill!=="none"&&Se.add(me.fill),me.stroke&&Se.add(me.stroke),me.colorize&&Se.add(me.colorize)});const Re=Array.from(Se),Me=De.colors,qe=new Map;Re.forEach((me,Pe)=>{const Fe=Me[Pe%Me.length];qe.set(me,Fe)}),w();let Ft=0;p.forEach(me=>{const Pe={};me.fill&&qe.has(me.fill)&&(Pe.fill=qe.get(me.fill),Ft++),me.stroke&&qe.has(me.stroke)&&(Pe.stroke=qe.get(me.stroke),Ft++),me.colorize&&qe.has(me.colorize)&&(Pe.colorize=qe.get(me.colorize),Ft++),Object.keys(Pe).length>0&&v(me.id,Pe)}),Ft>0?de.success(`Applied "${De.name}" - ${Ft} color${Ft!==1?"s":""} changed`):de.info(`Applied "${De.name}" - No matching colors found`)}}),s.jsxs(A.Suspense,{fallback:null,children:[s.jsx(D4,{isOpen:At,onClose:()=>Je(!1),objects:p,designName:m,onConfirmExport:()=>{de.success("Design exported successfully")}}),s.jsx(O4,{open:P,onClose:()=>ce(!1)}),s.jsx(I4,{isOpen:ie,onClose:()=>z(!1)}),L&&s.jsx(M4,{objects:p,onClose:()=>$(!1)}),s.jsx(A4,{isOpen:ue,onClose:()=>he(!1)}),s.jsx(T4,{isOpen:te,onClose:()=>ge(!1)})]}),s.jsx(v4,{}),s.jsx(b4,{})]})}function F4(){const[r,e]=A.useState(!0),[t,n]=A.useState(""),[a,l]=A.useState(""),[c,d]=A.useState(""),{signup:u,login:f,isLoading:p,error:m}=jn(),x=Rr(),y=async S=>{S.preventDefault();try{r?await f(t,a):await u(t,a,c),x("/")}catch(v){console.error(v)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsxs("div",{className:"w-full max-w-md space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"font-display text-4xl uppercase tracking-widest",children:["Deck",s.jsx("span",{className:"text-primary",children:"Forge"})]}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground uppercase tracking-widest",children:"Fingerboard Graphics Editor"})]}),s.jsxs("div",{className:"border border-border bg-card p-8 space-y-6",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(le,{variant:r?"default":"outline",className:"flex-1",onClick:()=>e(!0),children:"Login"}),s.jsx(le,{variant:r?"outline":"default",className:"flex-1",onClick:()=>e(!1),children:"Sign Up"})]}),s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[!r&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{htmlFor:"username",children:"Username"}),s.jsx(dt,{id:"username",type:"text",value:c,onChange:S=>d(S.target.value),placeholder:"fingerboarder123",required:!r})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{htmlFor:"email",children:"Email"}),s.jsx(dt,{id:"email",type:"email",value:t,onChange:S=>n(S.target.value),placeholder:"you@example.com",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{htmlFor:"password",children:"Password"}),s.jsx(dt,{id:"password",type:"password",value:a,onChange:S=>l(S.target.value),placeholder:"",required:!0,minLength:6})]}),m&&s.jsx("div",{className:"text-sm text-destructive bg-destructive/10 border border-destructive/20 p-3 rounded",children:m}),s.jsx(le,{type:"submit",className:"w-full",disabled:p,children:p?"Loading...":r?"Login":"Create Account"})]}),s.jsx("div",{className:"text-center",children:s.jsx(le,{variant:"link",onClick:()=>x("/"),className:"text-xs uppercase tracking-widest",children:"Continue as Guest"})})]})]})})}function ko(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var B0={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,a,l){function c(f,p){if(!a[f]){if(!n[f]){var m=typeof ko=="function"&&ko;if(!p&&m)return m(f,!0);if(d)return d(f,!0);var x=new Error("Cannot find module '"+f+"'");throw x.code="MODULE_NOT_FOUND",x}var y=a[f]={exports:{}};n[f][0].call(y.exports,function(S){var v=n[f][1][S];return c(v||S)},y,y.exports,t,n,a,l)}return a[f].exports}for(var d=typeof ko=="function"&&ko,u=0;u<l.length;u++)c(l[u]);return c}({1:[function(t,n,a){var l=t("./utils"),c=t("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var f,p,m,x,y,S,v,w=[],C=0,_=u.length,N=_,E=l.getTypeOf(u)!=="string";C<u.length;)N=_-C,m=E?(f=u[C++],p=C<_?u[C++]:0,C<_?u[C++]:0):(f=u.charCodeAt(C++),p=C<_?u.charCodeAt(C++):0,C<_?u.charCodeAt(C++):0),x=f>>2,y=(3&f)<<4|p>>4,S=1<N?(15&p)<<2|m>>6:64,v=2<N?63&m:64,w.push(d.charAt(x)+d.charAt(y)+d.charAt(S)+d.charAt(v));return w.join("")},a.decode=function(u){var f,p,m,x,y,S,v=0,w=0,C="data:";if(u.substr(0,C.length)===C)throw new Error("Invalid base64 input, it looks like a data url.");var _,N=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===d.charAt(64)&&N--,u.charAt(u.length-2)===d.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=c.uint8array?new Uint8Array(0|N):new Array(0|N);v<u.length;)f=d.indexOf(u.charAt(v++))<<2|(x=d.indexOf(u.charAt(v++)))>>4,p=(15&x)<<4|(y=d.indexOf(u.charAt(v++)))>>2,m=(3&y)<<6|(S=d.indexOf(u.charAt(v++))),_[w++]=f,y!==64&&(_[w++]=p),S!==64&&(_[w++]=m);return _}},{"./support":30,"./utils":32}],2:[function(t,n,a){var l=t("./external"),c=t("./stream/DataWorker"),d=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function f(p,m,x,y,S){this.compressedSize=p,this.uncompressedSize=m,this.crc32=x,this.compression=y,this.compressedContent=S}f.prototype={getContentWorker:function(){var p=new c(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),m=this;return p.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new c(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(p,m,x){return p.pipe(new d).pipe(new u("uncompressedSize")).pipe(m.compressWorker(x)).pipe(new u("compressedSize")).withStreamInfo("compression",m)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,a){var l=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,a){var l=t("./utils"),c=function(){for(var d,u=[],f=0;f<256;f++){d=f;for(var p=0;p<8;p++)d=1&d?3988292384^d>>>1:d>>>1;u[f]=d}return u}();n.exports=function(d,u){return d!==void 0&&d.length?l.getTypeOf(d)!=="string"?function(f,p,m,x){var y=c,S=x+m;f^=-1;for(var v=x;v<S;v++)f=f>>>8^y[255&(f^p[v])];return-1^f}(0|u,d,d.length,0):function(f,p,m,x){var y=c,S=x+m;f^=-1;for(var v=x;v<S;v++)f=f>>>8^y[255&(f^p.charCodeAt(v))];return-1^f}(0|u,d,d.length,0):0}},{"./utils":32}],5:[function(t,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,n,a){var l=null;l=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:l}},{lie:37}],7:[function(t,n,a){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=t("pako"),d=t("./utils"),u=t("./stream/GenericWorker"),f=l?"uint8array":"array";function p(m,x){u.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=x,this.meta={}}a.magic="\b\0",d.inherits(p,u),p.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(f,m.data),!1)},p.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(x){m.push({data:x,meta:m.meta})}},a.compressWorker=function(m){return new p("Deflate",m)},a.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,a){function l(y,S){var v,w="";for(v=0;v<S;v++)w+=String.fromCharCode(255&y),y>>>=8;return w}function c(y,S,v,w,C,_){var N,E,R=y.file,O=y.compression,I=_!==f.utf8encode,G=d.transformTo("string",_(R.name)),F=d.transformTo("string",f.utf8encode(R.name)),Y=R.comment,re=d.transformTo("string",_(Y)),D=d.transformTo("string",f.utf8encode(Y)),H=F.length!==R.name.length,k=D.length!==Y.length,T="",Z="",W="",ee=R.dir,J=R.date,V={crc32:0,compressedSize:0,uncompressedSize:0};S&&!v||(V.crc32=y.crc32,V.compressedSize=y.compressedSize,V.uncompressedSize=y.uncompressedSize);var U=0;S&&(U|=8),I||!H&&!k||(U|=2048);var X=0,Ce=0;ee&&(X|=16),C==="UNIX"?(Ce=798,X|=function(we,ot){var gt=we;return we||(gt=ot?16893:33204),(65535&gt)<<16}(R.unixPermissions,ee)):(Ce=20,X|=function(we){return 63&(we||0)}(R.dosPermissions)),N=J.getUTCHours(),N<<=6,N|=J.getUTCMinutes(),N<<=5,N|=J.getUTCSeconds()/2,E=J.getUTCFullYear()-1980,E<<=4,E|=J.getUTCMonth()+1,E<<=5,E|=J.getUTCDate(),H&&(Z=l(1,1)+l(p(G),4)+F,T+="up"+l(Z.length,2)+Z),k&&(W=l(1,1)+l(p(re),4)+D,T+="uc"+l(W.length,2)+W);var Ne="";return Ne+=`
\0`,Ne+=l(U,2),Ne+=O.magic,Ne+=l(N,2),Ne+=l(E,2),Ne+=l(V.crc32,4),Ne+=l(V.compressedSize,4),Ne+=l(V.uncompressedSize,4),Ne+=l(G.length,2),Ne+=l(T.length,2),{fileRecord:m.LOCAL_FILE_HEADER+Ne+G+T,dirRecord:m.CENTRAL_FILE_HEADER+l(Ce,2)+Ne+l(re.length,2)+"\0\0\0\0"+l(X,4)+l(w,4)+G+T+re}}var d=t("../utils"),u=t("../stream/GenericWorker"),f=t("../utf8"),p=t("../crc32"),m=t("../signature");function x(y,S,v,w){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=S,this.zipPlatform=v,this.encodeFileName=w,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(x,u),x.prototype.push=function(y){var S=y.meta.percent||0,v=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,u.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:v?(S+100*(v-w-1))/v:100}}))},x.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var S=this.streamFiles&&!y.file.dir;if(S){var v=c(y,S,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(y){this.accumulate=!1;var S=this.streamFiles&&!y.file.dir,v=c(y,S,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),S)this.push({data:function(w){return m.DATA_DESCRIPTOR+l(w.crc32,4)+l(w.compressedSize,4)+l(w.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var y=this.bytesWritten,S=0;S<this.dirRecords.length;S++)this.push({data:this.dirRecords[S],meta:{percent:100}});var v=this.bytesWritten-y,w=function(C,_,N,E,R){var O=d.transformTo("string",R(E));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(C,2)+l(C,2)+l(_,4)+l(N,4)+l(O.length,2)+O}(this.dirRecords.length,v,y,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(y){this._sources.push(y);var S=this;return y.on("data",function(v){S.processChunk(v)}),y.on("end",function(){S.closedSource(S.previous.streamInfo),S._sources.length?S.prepareNextSource():S.end()}),y.on("error",function(v){S.error(v)}),this},x.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(y){var S=this._sources;if(!u.prototype.error.call(this,y))return!1;for(var v=0;v<S.length;v++)try{S[v].error(y)}catch{}return!0},x.prototype.lock=function(){u.prototype.lock.call(this);for(var y=this._sources,S=0;S<y.length;S++)y[S].lock()},n.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,a){var l=t("../compressions"),c=t("./ZipFileWorker");a.generateWorker=function(d,u,f){var p=new c(u.streamFiles,f,u.platform,u.encodeFileName),m=0;try{d.forEach(function(x,y){m++;var S=function(_,N){var E=_||N,R=l[E];if(!R)throw new Error(E+" is not a valid compression method !");return R}(y.options.compression,u.compression),v=y.options.compressionOptions||u.compressionOptions||{},w=y.dir,C=y.date;y._compressWorker(S,v).withStreamInfo("file",{name:x,dir:w,date:C,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(p)}),p.entriesCount=m}catch(x){p.error(x)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,a){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new l;for(var d in this)typeof this[d]!="function"&&(c[d]=this[d]);return c}}(l.prototype=t("./object")).loadAsync=t("./load"),l.support=t("./support"),l.defaults=t("./defaults"),l.version="3.10.1",l.loadAsync=function(c,d){return new l().loadAsync(c,d)},l.external=t("./external"),n.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,a){var l=t("./utils"),c=t("./external"),d=t("./utf8"),u=t("./zipEntries"),f=t("./stream/Crc32Probe"),p=t("./nodejsUtils");function m(x){return new c.Promise(function(y,S){var v=x.decompressed.getContentWorker().pipe(new f);v.on("error",function(w){S(w)}).on("end",function(){v.streamInfo.crc32!==x.decompressed.crc32?S(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}n.exports=function(x,y){var S=this;return y=l.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),p.isNode&&p.isStream(x)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",x,!0,y.optimizedBinaryString,y.base64).then(function(v){var w=new u(y);return w.load(v),w}).then(function(v){var w=[c.Promise.resolve(v)],C=v.files;if(y.checkCRC32)for(var _=0;_<C.length;_++)w.push(m(C[_]));return c.Promise.all(w)}).then(function(v){for(var w=v.shift(),C=w.files,_=0;_<C.length;_++){var N=C[_],E=N.fileNameStr,R=l.resolve(N.fileNameStr);S.file(R,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:y.createFolders}),N.dir||(S.file(R).unsafeOriginalName=E)}return w.zipComment.length&&(S.comment=w.zipComment),S})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,a){var l=t("../utils"),c=t("../stream/GenericWorker");function d(u,f){c.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(f)}l.inherits(d,c),d.prototype._bindStream=function(u){var f=this;(this._stream=u).pause(),u.on("data",function(p){f.push({data:p,meta:{percent:0}})}).on("error",function(p){f.isPaused?this.generatedError=p:f.error(p)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},d.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,a){var l=t("readable-stream").Readable;function c(d,u,f){l.call(this,u),this._helper=d;var p=this;d.on("data",function(m,x){p.push(m)||p._helper.pause(),f&&f(x)}).on("error",function(m){p.emit("error",m)}).on("end",function(){p.push(null)})}t("../utils").inherits(c,l),c.prototype._read=function(){this._helper.resume()},n.exports=c},{"../utils":32,"readable-stream":16}],14:[function(t,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,c);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,c)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var c=new Buffer(l);return c.fill(0),c},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(t,n,a){function l(R,O,I){var G,F=d.getTypeOf(O),Y=d.extend(I||{},p);Y.date=Y.date||new Date,Y.compression!==null&&(Y.compression=Y.compression.toUpperCase()),typeof Y.unixPermissions=="string"&&(Y.unixPermissions=parseInt(Y.unixPermissions,8)),Y.unixPermissions&&16384&Y.unixPermissions&&(Y.dir=!0),Y.dosPermissions&&16&Y.dosPermissions&&(Y.dir=!0),Y.dir&&(R=C(R)),Y.createFolders&&(G=w(R))&&_.call(this,G,!0);var re=F==="string"&&Y.binary===!1&&Y.base64===!1;I&&I.binary!==void 0||(Y.binary=!re),(O instanceof m&&O.uncompressedSize===0||Y.dir||!O||O.length===0)&&(Y.base64=!1,Y.binary=!0,O="",Y.compression="STORE",F="string");var D=null;D=O instanceof m||O instanceof u?O:S.isNode&&S.isStream(O)?new v(R,O):d.prepareContent(R,O,Y.binary,Y.optimizedBinaryString,Y.base64);var H=new x(R,D,Y);this.files[R]=H}var c=t("./utf8"),d=t("./utils"),u=t("./stream/GenericWorker"),f=t("./stream/StreamHelper"),p=t("./defaults"),m=t("./compressedObject"),x=t("./zipObject"),y=t("./generate"),S=t("./nodejsUtils"),v=t("./nodejs/NodejsStreamInputAdapter"),w=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var O=R.lastIndexOf("/");return 0<O?R.substring(0,O):""},C=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},_=function(R,O){return O=O!==void 0?O:p.createFolders,R=C(R),this.files[R]||l.call(this,R,null,{dir:!0,createFolders:O}),this.files[R]};function N(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var O,I,G;for(O in this.files)G=this.files[O],(I=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&R(I,G)},filter:function(R){var O=[];return this.forEach(function(I,G){R(I,G)&&O.push(G)}),O},file:function(R,O,I){if(arguments.length!==1)return R=this.root+R,l.call(this,R,O,I),this;if(N(R)){var G=R;return this.filter(function(Y,re){return!re.dir&&G.test(Y)})}var F=this.files[this.root+R];return F&&!F.dir?F:null},folder:function(R){if(!R)return this;if(N(R))return this.filter(function(F,Y){return Y.dir&&R.test(F)});var O=this.root+R,I=_.call(this,O),G=this.clone();return G.root=I.name,G},remove:function(R){R=this.root+R;var O=this.files[R];if(O||(R.slice(-1)!=="/"&&(R+="/"),O=this.files[R]),O&&!O.dir)delete this.files[R];else for(var I=this.filter(function(F,Y){return Y.name.slice(0,R.length)===R}),G=0;G<I.length;G++)delete this.files[I[G].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var O,I={};try{if((I=d.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");d.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var G=I.comment||this.comment||"";O=y.generateWorker(this,I,G)}catch(F){(O=new u("error")).error(F)}return new f(O,I.type||"string",I.mimeType)},generateAsync:function(R,O){return this.generateInternalStream(R).accumulate(O)},generateNodeStream:function(R,O){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(O)}};n.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,a){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,a){var l=t("./DataReader");function c(d){l.call(this,d);for(var u=0;u<this.data.length;u++)d[u]=255&d[u]}t("../utils").inherits(c,l),c.prototype.byteAt=function(d){return this.data[this.zero+d]},c.prototype.lastIndexOfSignature=function(d){for(var u=d.charCodeAt(0),f=d.charCodeAt(1),p=d.charCodeAt(2),m=d.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===u&&this.data[x+1]===f&&this.data[x+2]===p&&this.data[x+3]===m)return x-this.zero;return-1},c.prototype.readAndCheckSignature=function(d){var u=d.charCodeAt(0),f=d.charCodeAt(1),p=d.charCodeAt(2),m=d.charCodeAt(3),x=this.readData(4);return u===x[0]&&f===x[1]&&p===x[2]&&m===x[3]},c.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},n.exports=c},{"../utils":32,"./DataReader":18}],18:[function(t,n,a){var l=t("../utils");function c(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(){},readInt:function(d){var u,f=0;for(this.checkOffset(d),u=this.index+d-1;u>=this.index;u--)f=(f<<8)+this.byteAt(u);return this.index+=d,f},readString:function(d){return l.transformTo("string",this.readData(d))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},n.exports=c},{"../utils":32}],19:[function(t,n,a){var l=t("./Uint8ArrayReader");function c(d){l.call(this,d)}t("../utils").inherits(c,l),c.prototype.readData=function(d){this.checkOffset(d);var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},n.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,a){var l=t("./DataReader");function c(d){l.call(this,d)}t("../utils").inherits(c,l),c.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},c.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},c.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},c.prototype.readData=function(d){this.checkOffset(d);var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},n.exports=c},{"../utils":32,"./DataReader":18}],21:[function(t,n,a){var l=t("./ArrayReader");function c(d){l.call(this,d)}t("../utils").inherits(c,l),c.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},n.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,a){var l=t("../utils"),c=t("../support"),d=t("./ArrayReader"),u=t("./StringReader"),f=t("./NodeBufferReader"),p=t("./Uint8ArrayReader");n.exports=function(m){var x=l.getTypeOf(m);return l.checkSupport(x),x!=="string"||c.uint8array?x==="nodebuffer"?new f(m):c.uint8array?new p(l.transformTo("uint8array",m)):new d(l.transformTo("array",m)):new u(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,a){var l=t("./GenericWorker"),c=t("../utils");function d(u){l.call(this,"ConvertWorker to "+u),this.destType=u}c.inherits(d,l),d.prototype.processChunk=function(u){this.push({data:c.transformTo(this.destType,u.data),meta:u.meta})},n.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,a){var l=t("./GenericWorker"),c=t("../crc32");function d(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(d,l),d.prototype.processChunk=function(u){this.streamInfo.crc32=c(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,a){var l=t("../utils"),c=t("./GenericWorker");function d(u){c.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}l.inherits(d,c),d.prototype.processChunk=function(u){if(u){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+u.data.length}c.prototype.processChunk.call(this,u)},n.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,a){var l=t("../utils"),c=t("./GenericWorker");function d(u){c.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(p){f.dataIsReady=!0,f.data=p,f.max=p&&p.length||0,f.type=l.getTypeOf(p),f.isPaused||f._tickAndRepeat()},function(p){f.error(p)})}l.inherits(d,c),d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,f);break;case"uint8array":u=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":u=this.data.slice(this.index,f)}return this.index=f,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,a){function l(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,d){return this._listeners[c].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,d){if(this._listeners[c])for(var u=0;u<this._listeners[c].length;u++)this._listeners[c][u].call(this,d)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var d=this;return c.on("data",function(u){d.processChunk(u)}),c.on("end",function(){d.end()}),c.on("error",function(u){d.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,d){return this.extraStreamInfo[c]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},n.exports=l},{}],29:[function(t,n,a){var l=t("../utils"),c=t("./ConvertWorker"),d=t("./GenericWorker"),u=t("../base64"),f=t("../support"),p=t("../external"),m=null;if(f.nodestream)try{m=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function x(S,v){return new p.Promise(function(w,C){var _=[],N=S._internalType,E=S._outputType,R=S._mimeType;S.on("data",function(O,I){_.push(O),v&&v(I)}).on("error",function(O){_=[],C(O)}).on("end",function(){try{var O=function(I,G,F){switch(I){case"blob":return l.newBlob(l.transformTo("arraybuffer",G),F);case"base64":return u.encode(G);default:return l.transformTo(I,G)}}(E,function(I,G){var F,Y=0,re=null,D=0;for(F=0;F<G.length;F++)D+=G[F].length;switch(I){case"string":return G.join("");case"array":return Array.prototype.concat.apply([],G);case"uint8array":for(re=new Uint8Array(D),F=0;F<G.length;F++)re.set(G[F],Y),Y+=G[F].length;return re;case"nodebuffer":return Buffer.concat(G);default:throw new Error("concat : unsupported type '"+I+"'")}}(N,_),R);w(O)}catch(I){C(I)}_=[]}).resume()})}function y(S,v,w){var C=v;switch(v){case"blob":case"arraybuffer":C="uint8array";break;case"base64":C="string"}try{this._internalType=C,this._outputType=v,this._mimeType=w,l.checkSupport(C),this._worker=S.pipe(new c(C)),S.lock()}catch(_){this._worker=new d("error"),this._worker.error(_)}}y.prototype={accumulate:function(S){return x(this,S)},on:function(S,v){var w=this;return S==="data"?this._worker.on(S,function(C){v.call(w,C.data,C.meta)}):this._worker.on(S,function(){l.delay(v,arguments,w)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(S){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},S)}},n.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var l=new ArrayBuffer(0);try{a.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(l),a.blob=c.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,a){for(var l=t("./utils"),c=t("./support"),d=t("./nodejsUtils"),u=t("./stream/GenericWorker"),f=new Array(256),p=0;p<256;p++)f[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;f[254]=f[254]=1;function m(){u.call(this,"utf-8 decode"),this.leftOver=null}function x(){u.call(this,"utf-8 encode")}a.utf8encode=function(y){return c.nodebuffer?d.newBufferFrom(y,"utf-8"):function(S){var v,w,C,_,N,E=S.length,R=0;for(_=0;_<E;_++)(64512&(w=S.charCodeAt(_)))==55296&&_+1<E&&(64512&(C=S.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(C-56320),_++),R+=w<128?1:w<2048?2:w<65536?3:4;for(v=c.uint8array?new Uint8Array(R):new Array(R),_=N=0;N<R;_++)(64512&(w=S.charCodeAt(_)))==55296&&_+1<E&&(64512&(C=S.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(C-56320),_++),w<128?v[N++]=w:(w<2048?v[N++]=192|w>>>6:(w<65536?v[N++]=224|w>>>12:(v[N++]=240|w>>>18,v[N++]=128|w>>>12&63),v[N++]=128|w>>>6&63),v[N++]=128|63&w);return v}(y)},a.utf8decode=function(y){return c.nodebuffer?l.transformTo("nodebuffer",y).toString("utf-8"):function(S){var v,w,C,_,N=S.length,E=new Array(2*N);for(v=w=0;v<N;)if((C=S[v++])<128)E[w++]=C;else if(4<(_=f[C]))E[w++]=65533,v+=_-1;else{for(C&=_===2?31:_===3?15:7;1<_&&v<N;)C=C<<6|63&S[v++],_--;1<_?E[w++]=65533:C<65536?E[w++]=C:(C-=65536,E[w++]=55296|C>>10&1023,E[w++]=56320|1023&C)}return E.length!==w&&(E.subarray?E=E.subarray(0,w):E.length=w),l.applyFromCharCode(E)}(y=l.transformTo(c.uint8array?"uint8array":"array",y))},l.inherits(m,u),m.prototype.processChunk=function(y){var S=l.transformTo(c.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var v=S;(S=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),S.set(v,this.leftOver.length)}else S=this.leftOver.concat(S);this.leftOver=null}var w=function(_,N){var E;for((N=N||_.length)>_.length&&(N=_.length),E=N-1;0<=E&&(192&_[E])==128;)E--;return E<0||E===0?N:E+f[_[E]]>N?E:N}(S),C=S;w!==S.length&&(c.uint8array?(C=S.subarray(0,w),this.leftOver=S.subarray(w,S.length)):(C=S.slice(0,w),this.leftOver=S.slice(w,S.length))),this.push({data:a.utf8decode(C),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=m,l.inherits(x,u),x.prototype.processChunk=function(y){this.push({data:a.utf8encode(y.data),meta:y.meta})},a.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,a){var l=t("./support"),c=t("./base64"),d=t("./nodejsUtils"),u=t("./external");function f(v){return v}function p(v,w){for(var C=0;C<v.length;++C)w[C]=255&v.charCodeAt(C);return w}t("setimmediate"),a.newBlob=function(v,w){a.checkSupport("blob");try{return new Blob([v],{type:w})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(v),C.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(v,w,C){var _=[],N=0,E=v.length;if(E<=C)return String.fromCharCode.apply(null,v);for(;N<E;)w==="array"||w==="nodebuffer"?_.push(String.fromCharCode.apply(null,v.slice(N,Math.min(N+C,E)))):_.push(String.fromCharCode.apply(null,v.subarray(N,Math.min(N+C,E)))),N+=C;return _.join("")},stringifyByChar:function(v){for(var w="",C=0;C<v.length;C++)w+=String.fromCharCode(v[C]);return w},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}}()}};function x(v){var w=65536,C=a.getTypeOf(v),_=!0;if(C==="uint8array"?_=m.applyCanBeUsed.uint8array:C==="nodebuffer"&&(_=m.applyCanBeUsed.nodebuffer),_)for(;1<w;)try{return m.stringifyByChunk(v,C,w)}catch{w=Math.floor(w/2)}return m.stringifyByChar(v)}function y(v,w){for(var C=0;C<v.length;C++)w[C]=v[C];return w}a.applyFromCharCode=x;var S={};S.string={string:f,array:function(v){return p(v,new Array(v.length))},arraybuffer:function(v){return S.string.uint8array(v).buffer},uint8array:function(v){return p(v,new Uint8Array(v.length))},nodebuffer:function(v){return p(v,d.allocBuffer(v.length))}},S.array={string:x,array:f,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return d.newBufferFrom(v)}},S.arraybuffer={string:function(v){return x(new Uint8Array(v))},array:function(v){return y(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:f,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return d.newBufferFrom(new Uint8Array(v))}},S.uint8array={string:x,array:function(v){return y(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:f,nodebuffer:function(v){return d.newBufferFrom(v)}},S.nodebuffer={string:x,array:function(v){return y(v,new Array(v.length))},arraybuffer:function(v){return S.nodebuffer.uint8array(v).buffer},uint8array:function(v){return y(v,new Uint8Array(v.length))},nodebuffer:f},a.transformTo=function(v,w){if(w=w||"",!v)return w;a.checkSupport(v);var C=a.getTypeOf(w);return S[C][v](w)},a.resolve=function(v){for(var w=v.split("/"),C=[],_=0;_<w.length;_++){var N=w[_];N==="."||N===""&&_!==0&&_!==w.length-1||(N===".."?C.pop():C.push(N))}return C.join("/")},a.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":l.nodebuffer&&d.isBuffer(v)?"nodebuffer":l.uint8array&&v instanceof Uint8Array?"uint8array":l.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(v){if(!l[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(v){var w,C,_="";for(C=0;C<(v||"").length;C++)_+="\\x"+((w=v.charCodeAt(C))<16?"0":"")+w.toString(16).toUpperCase();return _},a.delay=function(v,w,C){setImmediate(function(){v.apply(C||null,w||[])})},a.inherits=function(v,w){function C(){}C.prototype=w.prototype,v.prototype=new C},a.extend=function(){var v,w,C={};for(v=0;v<arguments.length;v++)for(w in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],w)&&C[w]===void 0&&(C[w]=arguments[v][w]);return C},a.prepareContent=function(v,w,C,_,N){return u.Promise.resolve(w).then(function(E){return l.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new u.Promise(function(R,O){var I=new FileReader;I.onload=function(G){R(G.target.result)},I.onerror=function(G){O(G.target.error)},I.readAsArrayBuffer(E)}):E}).then(function(E){var R=a.getTypeOf(E);return R?(R==="arraybuffer"?E=a.transformTo("uint8array",E):R==="string"&&(N?E=c.decode(E):C&&_!==!0&&(E=function(O){return p(O,l.uint8array?new Uint8Array(O.length):new Array(O.length))}(E))),E):u.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,a){var l=t("./reader/readerFor"),c=t("./utils"),d=t("./signature"),u=t("./zipEntry"),f=t("./support");function p(m){this.files=[],this.loadOptions=m}p.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(x)+", expected "+c.pretty(m)+")")}},isSignature:function(m,x){var y=this.reader.index;this.reader.setIndex(m);var S=this.reader.readString(4)===x;return this.reader.setIndex(y),S},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),x=f.uint8array?"uint8array":"array",y=c.transformTo(x,m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,x,y,S=this.zip64EndOfCentralSize-44;0<S;)m=this.reader.readInt(2),x=this.reader.readInt(4),y=this.reader.readData(x),this.zip64ExtensibleData[m]={id:m,length:x,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,x;for(m=0;m<this.files.length;m++)x=this.files[m],this.reader.setIndex(x.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(m=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var x=m;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var S=x-y;if(0<S)this.isSignature(x,d.CENTRAL_FILE_HEADER)||(this.reader.zero=S);else if(S<0)throw new Error("Corrupted zip: missing "+Math.abs(S)+" bytes.")},prepareReader:function(m){this.reader=l(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,a){var l=t("./reader/readerFor"),c=t("./utils"),d=t("./compressedObject"),u=t("./crc32"),f=t("./utf8"),p=t("./compressions"),m=t("./support");function x(y,S){this.options=y,this.loadOptions=S}x.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var S,v;if(y.skip(22),this.fileNameLength=y.readInt(2),v=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((S=function(w){for(var C in p)if(Object.prototype.hasOwnProperty.call(p,C)&&p[C].magic===w)return p[C];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,S,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var S=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(S),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=l(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var S,v,w,C=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<C;)S=y.readInt(2),v=y.readInt(2),w=y.readData(v),this.extraFields[S]={id:S,length:v,value:w};y.setIndex(C)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var S=this.findExtraFieldUnicodePath();if(S!==null)this.fileNameStr=S;else{var v=c.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var C=c.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var S=l(y.value);return S.readInt(1)!==1||u(this.fileName)!==S.readInt(4)?null:f.utf8decode(S.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var S=l(y.value);return S.readInt(1)!==1||u(this.fileComment)!==S.readInt(4)?null:f.utf8decode(S.readData(y.length-5))}return null}},n.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,a){function l(S,v,w){this.name=S,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=v,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var c=t("./stream/StreamHelper"),d=t("./stream/DataWorker"),u=t("./utf8"),f=t("./compressedObject"),p=t("./stream/GenericWorker");l.prototype={internalStream:function(S){var v=null,w="string";try{if(!S)throw new Error("No output type specified.");var C=(w=S.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),v=this._decompressWorker();var _=!this._dataBinary;_&&!C&&(v=v.pipe(new u.Utf8EncodeWorker)),!_&&C&&(v=v.pipe(new u.Utf8DecodeWorker))}catch(N){(v=new p("error")).error(N)}return new c(v,w,"")},async:function(S,v){return this.internalStream(S).accumulate(v)},nodeStream:function(S,v){return this.internalStream(S||"nodebuffer").toNodejsStream(v)},_compressWorker:function(S,v){if(this._data instanceof f&&this._data.compression.magic===S.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new u.Utf8EncodeWorker)),f.createWorkerFrom(w,S,v)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof p?this._data:new d(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)l.prototype[m[y]]=x;n.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,a){(function(l){var c,d,u=l.MutationObserver||l.WebKitMutationObserver;if(u){var f=0,p=new u(S),m=l.document.createTextNode("");p.observe(m,{characterData:!0}),c=function(){m.data=f=++f%2}}else if(l.setImmediate||l.MessageChannel===void 0)c="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var v=l.document.createElement("script");v.onreadystatechange=function(){S(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},l.document.documentElement.appendChild(v)}:function(){setTimeout(S,0)};else{var x=new l.MessageChannel;x.port1.onmessage=S,c=function(){x.port2.postMessage(0)}}var y=[];function S(){var v,w;d=!0;for(var C=y.length;C;){for(w=y,y=[],v=-1;++v<C;)w[v]();C=y.length}d=!1}n.exports=function(v){y.push(v)!==1||d||c()}}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,a){var l=t("immediate");function c(){}var d={},u=["REJECTED"],f=["FULFILLED"],p=["PENDING"];function m(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,C!==c&&v(this,C)}function x(C,_,N){this.promise=C,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function y(C,_,N){l(function(){var E;try{E=_(N)}catch(R){return d.reject(C,R)}E===C?d.reject(C,new TypeError("Cannot resolve promise with itself")):d.resolve(C,E)})}function S(C){var _=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof _=="function")return function(){_.apply(C,arguments)}}function v(C,_){var N=!1;function E(I){N||(N=!0,d.reject(C,I))}function R(I){N||(N=!0,d.resolve(C,I))}var O=w(function(){_(R,E)});O.status==="error"&&E(O.value)}function w(C,_){var N={};try{N.value=C(_),N.status="success"}catch(E){N.status="error",N.value=E}return N}(n.exports=m).prototype.finally=function(C){if(typeof C!="function")return this;var _=this.constructor;return this.then(function(N){return _.resolve(C()).then(function(){return N})},function(N){return _.resolve(C()).then(function(){throw N})})},m.prototype.catch=function(C){return this.then(null,C)},m.prototype.then=function(C,_){if(typeof C!="function"&&this.state===f||typeof _!="function"&&this.state===u)return this;var N=new this.constructor(c);return this.state!==p?y(N,this.state===f?C:_,this.outcome):this.queue.push(new x(N,C,_)),N},x.prototype.callFulfilled=function(C){d.resolve(this.promise,C)},x.prototype.otherCallFulfilled=function(C){y(this.promise,this.onFulfilled,C)},x.prototype.callRejected=function(C){d.reject(this.promise,C)},x.prototype.otherCallRejected=function(C){y(this.promise,this.onRejected,C)},d.resolve=function(C,_){var N=w(S,_);if(N.status==="error")return d.reject(C,N.value);var E=N.value;if(E)v(C,E);else{C.state=f,C.outcome=_;for(var R=-1,O=C.queue.length;++R<O;)C.queue[R].callFulfilled(_)}return C},d.reject=function(C,_){C.state=u,C.outcome=_;for(var N=-1,E=C.queue.length;++N<E;)C.queue[N].callRejected(_);return C},m.resolve=function(C){return C instanceof this?C:d.resolve(new this(c),C)},m.reject=function(C){var _=new this(c);return d.reject(_,C)},m.all=function(C){var _=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=C.length,E=!1;if(!N)return this.resolve([]);for(var R=new Array(N),O=0,I=-1,G=new this(c);++I<N;)F(C[I],I);return G;function F(Y,re){_.resolve(Y).then(function(D){R[re]=D,++O!==N||E||(E=!0,d.resolve(G,R))},function(D){E||(E=!0,d.reject(G,D))})}},m.race=function(C){var _=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=C.length,E=!1;if(!N)return this.resolve([]);for(var R=-1,O=new this(c);++R<N;)I=C[R],_.resolve(I).then(function(G){E||(E=!0,d.resolve(O,G))},function(G){E||(E=!0,d.reject(O,G))});var I;return O}},{immediate:36}],38:[function(t,n,a){var l={};(0,t("./lib/utils/common").assign)(l,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,a){var l=t("./zlib/deflate"),c=t("./utils/common"),d=t("./utils/strings"),u=t("./zlib/messages"),f=t("./zlib/zstream"),p=Object.prototype.toString,m=0,x=-1,y=0,S=8;function v(C){if(!(this instanceof v))return new v(C);this.options=c.assign({level:x,method:S,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},C||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var N=l.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(N!==m)throw new Error(u[N]);if(_.header&&l.deflateSetHeader(this.strm,_.header),_.dictionary){var E;if(E=typeof _.dictionary=="string"?d.string2buf(_.dictionary):p.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(N=l.deflateSetDictionary(this.strm,E))!==m)throw new Error(u[N]);this._dict_set=!0}}function w(C,_){var N=new v(_);if(N.push(C,!0),N.err)throw N.msg||u[N.err];return N.result}v.prototype.push=function(C,_){var N,E,R=this.strm,O=this.options.chunkSize;if(this.ended)return!1;E=_===~~_?_:_===!0?4:0,typeof C=="string"?R.input=d.string2buf(C):p.call(C)==="[object ArrayBuffer]"?R.input=new Uint8Array(C):R.input=C,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new c.Buf8(O),R.next_out=0,R.avail_out=O),(N=l.deflate(R,E))!==1&&N!==m)return this.onEnd(N),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(c.shrinkBuf(R.output,R.next_out))):this.onData(c.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&N!==1);return E===4?(N=l.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===m):E!==2||(this.onEnd(m),!(R.avail_out=0))},v.prototype.onData=function(C){this.chunks.push(C)},v.prototype.onEnd=function(C){C===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},a.Deflate=v,a.deflate=w,a.deflateRaw=function(C,_){return(_=_||{}).raw=!0,w(C,_)},a.gzip=function(C,_){return(_=_||{}).gzip=!0,w(C,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,a){var l=t("./zlib/inflate"),c=t("./utils/common"),d=t("./utils/strings"),u=t("./zlib/constants"),f=t("./zlib/messages"),p=t("./zlib/zstream"),m=t("./zlib/gzheader"),x=Object.prototype.toString;function y(v){if(!(this instanceof y))return new y(v);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},v||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||v&&v.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var C=l.inflateInit2(this.strm,w.windowBits);if(C!==u.Z_OK)throw new Error(f[C]);this.header=new m,l.inflateGetHeader(this.strm,this.header)}function S(v,w){var C=new y(w);if(C.push(v,!0),C.err)throw C.msg||f[C.err];return C.result}y.prototype.push=function(v,w){var C,_,N,E,R,O,I=this.strm,G=this.options.chunkSize,F=this.options.dictionary,Y=!1;if(this.ended)return!1;_=w===~~w?w:w===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof v=="string"?I.input=d.binstring2buf(v):x.call(v)==="[object ArrayBuffer]"?I.input=new Uint8Array(v):I.input=v,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new c.Buf8(G),I.next_out=0,I.avail_out=G),(C=l.inflate(I,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&F&&(O=typeof F=="string"?d.string2buf(F):x.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,C=l.inflateSetDictionary(this.strm,O)),C===u.Z_BUF_ERROR&&Y===!0&&(C=u.Z_OK,Y=!1),C!==u.Z_STREAM_END&&C!==u.Z_OK)return this.onEnd(C),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&C!==u.Z_STREAM_END&&(I.avail_in!==0||_!==u.Z_FINISH&&_!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=d.utf8border(I.output,I.next_out),E=I.next_out-N,R=d.buf2string(I.output,N),I.next_out=E,I.avail_out=G-E,E&&c.arraySet(I.output,I.output,N,E,0),this.onData(R)):this.onData(c.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(Y=!0)}while((0<I.avail_in||I.avail_out===0)&&C!==u.Z_STREAM_END);return C===u.Z_STREAM_END&&(_=u.Z_FINISH),_===u.Z_FINISH?(C=l.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===u.Z_OK):_!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(I.avail_out=0))},y.prototype.onData=function(v){this.chunks.push(v)},y.prototype.onEnd=function(v){v===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},a.Inflate=y,a.inflate=S,a.inflateRaw=function(v,w){return(w=w||{}).raw=!0,S(v,w)},a.ungzip=S},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,a){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var p=f.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var m in p)p.hasOwnProperty(m)&&(u[m]=p[m])}}return u},a.shrinkBuf=function(u,f){return u.length===f?u:u.subarray?u.subarray(0,f):(u.length=f,u)};var c={arraySet:function(u,f,p,m,x){if(f.subarray&&u.subarray)u.set(f.subarray(p,p+m),x);else for(var y=0;y<m;y++)u[x+y]=f[p+y]},flattenChunks:function(u){var f,p,m,x,y,S;for(f=m=0,p=u.length;f<p;f++)m+=u[f].length;for(S=new Uint8Array(m),f=x=0,p=u.length;f<p;f++)y=u[f],S.set(y,x),x+=y.length;return S}},d={arraySet:function(u,f,p,m,x){for(var y=0;y<m;y++)u[x+y]=f[p+y]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,c)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,d))},a.setTyped(l)},{}],42:[function(t,n,a){var l=t("./common"),c=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var u=new l.Buf8(256),f=0;f<256;f++)u[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function p(m,x){if(x<65537&&(m.subarray&&d||!m.subarray&&c))return String.fromCharCode.apply(null,l.shrinkBuf(m,x));for(var y="",S=0;S<x;S++)y+=String.fromCharCode(m[S]);return y}u[254]=u[254]=1,a.string2buf=function(m){var x,y,S,v,w,C=m.length,_=0;for(v=0;v<C;v++)(64512&(y=m.charCodeAt(v)))==55296&&v+1<C&&(64512&(S=m.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(S-56320),v++),_+=y<128?1:y<2048?2:y<65536?3:4;for(x=new l.Buf8(_),v=w=0;w<_;v++)(64512&(y=m.charCodeAt(v)))==55296&&v+1<C&&(64512&(S=m.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(S-56320),v++),y<128?x[w++]=y:(y<2048?x[w++]=192|y>>>6:(y<65536?x[w++]=224|y>>>12:(x[w++]=240|y>>>18,x[w++]=128|y>>>12&63),x[w++]=128|y>>>6&63),x[w++]=128|63&y);return x},a.buf2binstring=function(m){return p(m,m.length)},a.binstring2buf=function(m){for(var x=new l.Buf8(m.length),y=0,S=x.length;y<S;y++)x[y]=m.charCodeAt(y);return x},a.buf2string=function(m,x){var y,S,v,w,C=x||m.length,_=new Array(2*C);for(y=S=0;y<C;)if((v=m[y++])<128)_[S++]=v;else if(4<(w=u[v]))_[S++]=65533,y+=w-1;else{for(v&=w===2?31:w===3?15:7;1<w&&y<C;)v=v<<6|63&m[y++],w--;1<w?_[S++]=65533:v<65536?_[S++]=v:(v-=65536,_[S++]=55296|v>>10&1023,_[S++]=56320|1023&v)}return p(_,S)},a.utf8border=function(m,x){var y;for((x=x||m.length)>m.length&&(x=m.length),y=x-1;0<=y&&(192&m[y])==128;)y--;return y<0||y===0?x:y+u[m[y]]>x?y:x}},{"./common":41}],43:[function(t,n,a){n.exports=function(l,c,d,u){for(var f=65535&l|0,p=l>>>16&65535|0,m=0;d!==0;){for(d-=m=2e3<d?2e3:d;p=p+(f=f+c[u++]|0)|0,--m;);f%=65521,p%=65521}return f|p<<16|0}},{}],44:[function(t,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,a){var l=function(){for(var c,d=[],u=0;u<256;u++){c=u;for(var f=0;f<8;f++)c=1&c?3988292384^c>>>1:c>>>1;d[u]=c}return d}();n.exports=function(c,d,u,f){var p=l,m=f+u;c^=-1;for(var x=f;x<m;x++)c=c>>>8^p[255&(c^d[x])];return-1^c}},{}],46:[function(t,n,a){var l,c=t("../utils/common"),d=t("./trees"),u=t("./adler32"),f=t("./crc32"),p=t("./messages"),m=0,x=4,y=0,S=-2,v=-1,w=4,C=2,_=8,N=9,E=286,R=30,O=19,I=2*E+1,G=15,F=3,Y=258,re=Y+F+1,D=42,H=113,k=1,T=2,Z=3,W=4;function ee(P,ce){return P.msg=p[ce],ce}function J(P){return(P<<1)-(4<P?9:0)}function V(P){for(var ce=P.length;0<=--ce;)P[ce]=0}function U(P){var ce=P.state,ie=ce.pending;ie>P.avail_out&&(ie=P.avail_out),ie!==0&&(c.arraySet(P.output,ce.pending_buf,ce.pending_out,ie,P.next_out),P.next_out+=ie,ce.pending_out+=ie,P.total_out+=ie,P.avail_out-=ie,ce.pending-=ie,ce.pending===0&&(ce.pending_out=0))}function X(P,ce){d._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,ce),P.block_start=P.strstart,U(P.strm)}function Ce(P,ce){P.pending_buf[P.pending++]=ce}function Ne(P,ce){P.pending_buf[P.pending++]=ce>>>8&255,P.pending_buf[P.pending++]=255&ce}function we(P,ce){var ie,z,L=P.max_chain_length,$=P.strstart,ue=P.prev_length,he=P.nice_match,te=P.strstart>P.w_size-re?P.strstart-(P.w_size-re):0,ge=P.window,je=P.w_mask,ve=P.prev,Oe=P.strstart+Y,nt=ge[$+ue-1],Ye=ge[$+ue];P.prev_length>=P.good_match&&(L>>=2),he>P.lookahead&&(he=P.lookahead);do if(ge[(ie=ce)+ue]===Ye&&ge[ie+ue-1]===nt&&ge[ie]===ge[$]&&ge[++ie]===ge[$+1]){$+=2,ie++;do;while(ge[++$]===ge[++ie]&&ge[++$]===ge[++ie]&&ge[++$]===ge[++ie]&&ge[++$]===ge[++ie]&&ge[++$]===ge[++ie]&&ge[++$]===ge[++ie]&&ge[++$]===ge[++ie]&&ge[++$]===ge[++ie]&&$<Oe);if(z=Y-(Oe-$),$=Oe-Y,ue<z){if(P.match_start=ce,he<=(ue=z))break;nt=ge[$+ue-1],Ye=ge[$+ue]}}while((ce=ve[ce&je])>te&&--L!=0);return ue<=P.lookahead?ue:P.lookahead}function ot(P){var ce,ie,z,L,$,ue,he,te,ge,je,ve=P.w_size;do{if(L=P.window_size-P.lookahead-P.strstart,P.strstart>=ve+(ve-re)){for(c.arraySet(P.window,P.window,ve,ve,0),P.match_start-=ve,P.strstart-=ve,P.block_start-=ve,ce=ie=P.hash_size;z=P.head[--ce],P.head[ce]=ve<=z?z-ve:0,--ie;);for(ce=ie=ve;z=P.prev[--ce],P.prev[ce]=ve<=z?z-ve:0,--ie;);L+=ve}if(P.strm.avail_in===0)break;if(ue=P.strm,he=P.window,te=P.strstart+P.lookahead,ge=L,je=void 0,je=ue.avail_in,ge<je&&(je=ge),ie=je===0?0:(ue.avail_in-=je,c.arraySet(he,ue.input,ue.next_in,je,te),ue.state.wrap===1?ue.adler=u(ue.adler,he,je,te):ue.state.wrap===2&&(ue.adler=f(ue.adler,he,je,te)),ue.next_in+=je,ue.total_in+=je,je),P.lookahead+=ie,P.lookahead+P.insert>=F)for($=P.strstart-P.insert,P.ins_h=P.window[$],P.ins_h=(P.ins_h<<P.hash_shift^P.window[$+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[$+F-1])&P.hash_mask,P.prev[$&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=$,$++,P.insert--,!(P.lookahead+P.insert<F)););}while(P.lookahead<re&&P.strm.avail_in!==0)}function gt(P,ce){for(var ie,z;;){if(P.lookahead<re){if(ot(P),P.lookahead<re&&ce===m)return k;if(P.lookahead===0)break}if(ie=0,P.lookahead>=F&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,ie=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),ie!==0&&P.strstart-ie<=P.w_size-re&&(P.match_length=we(P,ie)),P.match_length>=F)if(z=d._tr_tally(P,P.strstart-P.match_start,P.match_length-F),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=F){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,ie=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else z=d._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(z&&(X(P,!1),P.strm.avail_out===0))return k}return P.insert=P.strstart<F-1?P.strstart:F-1,ce===x?(X(P,!0),P.strm.avail_out===0?Z:W):P.last_lit&&(X(P,!1),P.strm.avail_out===0)?k:T}function Ge(P,ce){for(var ie,z,L;;){if(P.lookahead<re){if(ot(P),P.lookahead<re&&ce===m)return k;if(P.lookahead===0)break}if(ie=0,P.lookahead>=F&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,ie=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=F-1,ie!==0&&P.prev_length<P.max_lazy_match&&P.strstart-ie<=P.w_size-re&&(P.match_length=we(P,ie),P.match_length<=5&&(P.strategy===1||P.match_length===F&&4096<P.strstart-P.match_start)&&(P.match_length=F-1)),P.prev_length>=F&&P.match_length<=P.prev_length){for(L=P.strstart+P.lookahead-F,z=d._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-F),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=L&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+F-1])&P.hash_mask,ie=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=F-1,P.strstart++,z&&(X(P,!1),P.strm.avail_out===0))return k}else if(P.match_available){if((z=d._tr_tally(P,0,P.window[P.strstart-1]))&&X(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return k}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(z=d._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<F-1?P.strstart:F-1,ce===x?(X(P,!0),P.strm.avail_out===0?Z:W):P.last_lit&&(X(P,!1),P.strm.avail_out===0)?k:T}function Ue(P,ce,ie,z,L){this.good_length=P,this.max_lazy=ce,this.nice_length=ie,this.max_chain=z,this.func=L}function lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*I),this.dyn_dtree=new c.Buf16(2*(2*R+1)),this.bl_tree=new c.Buf16(2*(2*O+1)),V(this.dyn_ltree),V(this.dyn_dtree),V(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(G+1),this.heap=new c.Buf16(2*E+1),V(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*E+1),V(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function We(P){var ce;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=C,(ce=P.state).pending=0,ce.pending_out=0,ce.wrap<0&&(ce.wrap=-ce.wrap),ce.status=ce.wrap?D:H,P.adler=ce.wrap===2?0:1,ce.last_flush=m,d._tr_init(ce),y):ee(P,S)}function At(P){var ce=We(P);return ce===y&&function(ie){ie.window_size=2*ie.w_size,V(ie.head),ie.max_lazy_match=l[ie.level].max_lazy,ie.good_match=l[ie.level].good_length,ie.nice_match=l[ie.level].nice_length,ie.max_chain_length=l[ie.level].max_chain,ie.strstart=0,ie.block_start=0,ie.lookahead=0,ie.insert=0,ie.match_length=ie.prev_length=F-1,ie.match_available=0,ie.ins_h=0}(P.state),ce}function Je(P,ce,ie,z,L,$){if(!P)return S;var ue=1;if(ce===v&&(ce=6),z<0?(ue=0,z=-z):15<z&&(ue=2,z-=16),L<1||N<L||ie!==_||z<8||15<z||ce<0||9<ce||$<0||w<$)return ee(P,S);z===8&&(z=9);var he=new lt;return(P.state=he).strm=P,he.wrap=ue,he.gzhead=null,he.w_bits=z,he.w_size=1<<he.w_bits,he.w_mask=he.w_size-1,he.hash_bits=L+7,he.hash_size=1<<he.hash_bits,he.hash_mask=he.hash_size-1,he.hash_shift=~~((he.hash_bits+F-1)/F),he.window=new c.Buf8(2*he.w_size),he.head=new c.Buf16(he.hash_size),he.prev=new c.Buf16(he.w_size),he.lit_bufsize=1<<L+6,he.pending_buf_size=4*he.lit_bufsize,he.pending_buf=new c.Buf8(he.pending_buf_size),he.d_buf=1*he.lit_bufsize,he.l_buf=3*he.lit_bufsize,he.level=ce,he.strategy=$,he.method=ie,At(P)}l=[new Ue(0,0,0,0,function(P,ce){var ie=65535;for(ie>P.pending_buf_size-5&&(ie=P.pending_buf_size-5);;){if(P.lookahead<=1){if(ot(P),P.lookahead===0&&ce===m)return k;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var z=P.block_start+ie;if((P.strstart===0||P.strstart>=z)&&(P.lookahead=P.strstart-z,P.strstart=z,X(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-re&&(X(P,!1),P.strm.avail_out===0))return k}return P.insert=0,ce===x?(X(P,!0),P.strm.avail_out===0?Z:W):(P.strstart>P.block_start&&(X(P,!1),P.strm.avail_out),k)}),new Ue(4,4,8,4,gt),new Ue(4,5,16,8,gt),new Ue(4,6,32,32,gt),new Ue(4,4,16,16,Ge),new Ue(8,16,32,32,Ge),new Ue(8,16,128,128,Ge),new Ue(8,32,128,256,Ge),new Ue(32,128,258,1024,Ge),new Ue(32,258,258,4096,Ge)],a.deflateInit=function(P,ce){return Je(P,ce,_,15,8,0)},a.deflateInit2=Je,a.deflateReset=At,a.deflateResetKeep=We,a.deflateSetHeader=function(P,ce){return P&&P.state?P.state.wrap!==2?S:(P.state.gzhead=ce,y):S},a.deflate=function(P,ce){var ie,z,L,$;if(!P||!P.state||5<ce||ce<0)return P?ee(P,S):S;if(z=P.state,!P.output||!P.input&&P.avail_in!==0||z.status===666&&ce!==x)return ee(P,P.avail_out===0?-5:S);if(z.strm=P,ie=z.last_flush,z.last_flush=ce,z.status===D)if(z.wrap===2)P.adler=0,Ce(z,31),Ce(z,139),Ce(z,8),z.gzhead?(Ce(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),Ce(z,255&z.gzhead.time),Ce(z,z.gzhead.time>>8&255),Ce(z,z.gzhead.time>>16&255),Ce(z,z.gzhead.time>>24&255),Ce(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),Ce(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(Ce(z,255&z.gzhead.extra.length),Ce(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(P.adler=f(P.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(Ce(z,0),Ce(z,0),Ce(z,0),Ce(z,0),Ce(z,0),Ce(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),Ce(z,3),z.status=H);else{var ue=_+(z.w_bits-8<<4)<<8;ue|=(2<=z.strategy||z.level<2?0:z.level<6?1:z.level===6?2:3)<<6,z.strstart!==0&&(ue|=32),ue+=31-ue%31,z.status=H,Ne(z,ue),z.strstart!==0&&(Ne(z,P.adler>>>16),Ne(z,65535&P.adler)),P.adler=1}if(z.status===69)if(z.gzhead.extra){for(L=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>L&&(P.adler=f(P.adler,z.pending_buf,z.pending-L,L)),U(P),L=z.pending,z.pending!==z.pending_buf_size));)Ce(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>L&&(P.adler=f(P.adler,z.pending_buf,z.pending-L,L)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=73;if(z.status===73)if(z.gzhead.name){L=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>L&&(P.adler=f(P.adler,z.pending_buf,z.pending-L,L)),U(P),L=z.pending,z.pending===z.pending_buf_size)){$=1;break}$=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0,Ce(z,$)}while($!==0);z.gzhead.hcrc&&z.pending>L&&(P.adler=f(P.adler,z.pending_buf,z.pending-L,L)),$===0&&(z.gzindex=0,z.status=91)}else z.status=91;if(z.status===91)if(z.gzhead.comment){L=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>L&&(P.adler=f(P.adler,z.pending_buf,z.pending-L,L)),U(P),L=z.pending,z.pending===z.pending_buf_size)){$=1;break}$=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0,Ce(z,$)}while($!==0);z.gzhead.hcrc&&z.pending>L&&(P.adler=f(P.adler,z.pending_buf,z.pending-L,L)),$===0&&(z.status=103)}else z.status=103;if(z.status===103&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&U(P),z.pending+2<=z.pending_buf_size&&(Ce(z,255&P.adler),Ce(z,P.adler>>8&255),P.adler=0,z.status=H)):z.status=H),z.pending!==0){if(U(P),P.avail_out===0)return z.last_flush=-1,y}else if(P.avail_in===0&&J(ce)<=J(ie)&&ce!==x)return ee(P,-5);if(z.status===666&&P.avail_in!==0)return ee(P,-5);if(P.avail_in!==0||z.lookahead!==0||ce!==m&&z.status!==666){var he=z.strategy===2?function(te,ge){for(var je;;){if(te.lookahead===0&&(ot(te),te.lookahead===0)){if(ge===m)return k;break}if(te.match_length=0,je=d._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++,je&&(X(te,!1),te.strm.avail_out===0))return k}return te.insert=0,ge===x?(X(te,!0),te.strm.avail_out===0?Z:W):te.last_lit&&(X(te,!1),te.strm.avail_out===0)?k:T}(z,ce):z.strategy===3?function(te,ge){for(var je,ve,Oe,nt,Ye=te.window;;){if(te.lookahead<=Y){if(ot(te),te.lookahead<=Y&&ge===m)return k;if(te.lookahead===0)break}if(te.match_length=0,te.lookahead>=F&&0<te.strstart&&(ve=Ye[Oe=te.strstart-1])===Ye[++Oe]&&ve===Ye[++Oe]&&ve===Ye[++Oe]){nt=te.strstart+Y;do;while(ve===Ye[++Oe]&&ve===Ye[++Oe]&&ve===Ye[++Oe]&&ve===Ye[++Oe]&&ve===Ye[++Oe]&&ve===Ye[++Oe]&&ve===Ye[++Oe]&&ve===Ye[++Oe]&&Oe<nt);te.match_length=Y-(nt-Oe),te.match_length>te.lookahead&&(te.match_length=te.lookahead)}if(te.match_length>=F?(je=d._tr_tally(te,1,te.match_length-F),te.lookahead-=te.match_length,te.strstart+=te.match_length,te.match_length=0):(je=d._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++),je&&(X(te,!1),te.strm.avail_out===0))return k}return te.insert=0,ge===x?(X(te,!0),te.strm.avail_out===0?Z:W):te.last_lit&&(X(te,!1),te.strm.avail_out===0)?k:T}(z,ce):l[z.level].func(z,ce);if(he!==Z&&he!==W||(z.status=666),he===k||he===Z)return P.avail_out===0&&(z.last_flush=-1),y;if(he===T&&(ce===1?d._tr_align(z):ce!==5&&(d._tr_stored_block(z,0,0,!1),ce===3&&(V(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),U(P),P.avail_out===0))return z.last_flush=-1,y}return ce!==x?y:z.wrap<=0?1:(z.wrap===2?(Ce(z,255&P.adler),Ce(z,P.adler>>8&255),Ce(z,P.adler>>16&255),Ce(z,P.adler>>24&255),Ce(z,255&P.total_in),Ce(z,P.total_in>>8&255),Ce(z,P.total_in>>16&255),Ce(z,P.total_in>>24&255)):(Ne(z,P.adler>>>16),Ne(z,65535&P.adler)),U(P),0<z.wrap&&(z.wrap=-z.wrap),z.pending!==0?y:1)},a.deflateEnd=function(P){var ce;return P&&P.state?(ce=P.state.status)!==D&&ce!==69&&ce!==73&&ce!==91&&ce!==103&&ce!==H&&ce!==666?ee(P,S):(P.state=null,ce===H?ee(P,-3):y):S},a.deflateSetDictionary=function(P,ce){var ie,z,L,$,ue,he,te,ge,je=ce.length;if(!P||!P.state||($=(ie=P.state).wrap)===2||$===1&&ie.status!==D||ie.lookahead)return S;for($===1&&(P.adler=u(P.adler,ce,je,0)),ie.wrap=0,je>=ie.w_size&&($===0&&(V(ie.head),ie.strstart=0,ie.block_start=0,ie.insert=0),ge=new c.Buf8(ie.w_size),c.arraySet(ge,ce,je-ie.w_size,ie.w_size,0),ce=ge,je=ie.w_size),ue=P.avail_in,he=P.next_in,te=P.input,P.avail_in=je,P.next_in=0,P.input=ce,ot(ie);ie.lookahead>=F;){for(z=ie.strstart,L=ie.lookahead-(F-1);ie.ins_h=(ie.ins_h<<ie.hash_shift^ie.window[z+F-1])&ie.hash_mask,ie.prev[z&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=z,z++,--L;);ie.strstart=z,ie.lookahead=F-1,ot(ie)}return ie.strstart+=ie.lookahead,ie.block_start=ie.strstart,ie.insert=ie.lookahead,ie.lookahead=0,ie.match_length=ie.prev_length=F-1,ie.match_available=0,P.next_in=he,P.input=te,P.avail_in=ue,ie.wrap=$,y},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,a){n.exports=function(l,c){var d,u,f,p,m,x,y,S,v,w,C,_,N,E,R,O,I,G,F,Y,re,D,H,k,T;d=l.state,u=l.next_in,k=l.input,f=u+(l.avail_in-5),p=l.next_out,T=l.output,m=p-(c-l.avail_out),x=p+(l.avail_out-257),y=d.dmax,S=d.wsize,v=d.whave,w=d.wnext,C=d.window,_=d.hold,N=d.bits,E=d.lencode,R=d.distcode,O=(1<<d.lenbits)-1,I=(1<<d.distbits)-1;e:do{N<15&&(_+=k[u++]<<N,N+=8,_+=k[u++]<<N,N+=8),G=E[_&O];t:for(;;){if(_>>>=F=G>>>24,N-=F,(F=G>>>16&255)===0)T[p++]=65535&G;else{if(!(16&F)){if(!(64&F)){G=E[(65535&G)+(_&(1<<F)-1)];continue t}if(32&F){d.mode=12;break e}l.msg="invalid literal/length code",d.mode=30;break e}Y=65535&G,(F&=15)&&(N<F&&(_+=k[u++]<<N,N+=8),Y+=_&(1<<F)-1,_>>>=F,N-=F),N<15&&(_+=k[u++]<<N,N+=8,_+=k[u++]<<N,N+=8),G=R[_&I];r:for(;;){if(_>>>=F=G>>>24,N-=F,!(16&(F=G>>>16&255))){if(!(64&F)){G=R[(65535&G)+(_&(1<<F)-1)];continue r}l.msg="invalid distance code",d.mode=30;break e}if(re=65535&G,N<(F&=15)&&(_+=k[u++]<<N,(N+=8)<F&&(_+=k[u++]<<N,N+=8)),y<(re+=_&(1<<F)-1)){l.msg="invalid distance too far back",d.mode=30;break e}if(_>>>=F,N-=F,(F=p-m)<re){if(v<(F=re-F)&&d.sane){l.msg="invalid distance too far back",d.mode=30;break e}if(H=C,(D=0)===w){if(D+=S-F,F<Y){for(Y-=F;T[p++]=C[D++],--F;);D=p-re,H=T}}else if(w<F){if(D+=S+w-F,(F-=w)<Y){for(Y-=F;T[p++]=C[D++],--F;);if(D=0,w<Y){for(Y-=F=w;T[p++]=C[D++],--F;);D=p-re,H=T}}}else if(D+=w-F,F<Y){for(Y-=F;T[p++]=C[D++],--F;);D=p-re,H=T}for(;2<Y;)T[p++]=H[D++],T[p++]=H[D++],T[p++]=H[D++],Y-=3;Y&&(T[p++]=H[D++],1<Y&&(T[p++]=H[D++]))}else{for(D=p-re;T[p++]=T[D++],T[p++]=T[D++],T[p++]=T[D++],2<(Y-=3););Y&&(T[p++]=T[D++],1<Y&&(T[p++]=T[D++]))}break}}break}}while(u<f&&p<x);u-=Y=N>>3,_&=(1<<(N-=Y<<3))-1,l.next_in=u,l.next_out=p,l.avail_in=u<f?f-u+5:5-(u-f),l.avail_out=p<x?x-p+257:257-(p-x),d.hold=_,d.bits=N}},{}],49:[function(t,n,a){var l=t("../utils/common"),c=t("./adler32"),d=t("./crc32"),u=t("./inffast"),f=t("./inftrees"),p=1,m=2,x=0,y=-2,S=1,v=852,w=592;function C(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(D){var H;return D&&D.state?(H=D.state,D.total_in=D.total_out=H.total=0,D.msg="",H.wrap&&(D.adler=1&H.wrap),H.mode=S,H.last=0,H.havedict=0,H.dmax=32768,H.head=null,H.hold=0,H.bits=0,H.lencode=H.lendyn=new l.Buf32(v),H.distcode=H.distdyn=new l.Buf32(w),H.sane=1,H.back=-1,x):y}function E(D){var H;return D&&D.state?((H=D.state).wsize=0,H.whave=0,H.wnext=0,N(D)):y}function R(D,H){var k,T;return D&&D.state?(T=D.state,H<0?(k=0,H=-H):(k=1+(H>>4),H<48&&(H&=15)),H&&(H<8||15<H)?y:(T.window!==null&&T.wbits!==H&&(T.window=null),T.wrap=k,T.wbits=H,E(D))):y}function O(D,H){var k,T;return D?(T=new _,(D.state=T).window=null,(k=R(D,H))!==x&&(D.state=null),k):y}var I,G,F=!0;function Y(D){if(F){var H;for(I=new l.Buf32(512),G=new l.Buf32(32),H=0;H<144;)D.lens[H++]=8;for(;H<256;)D.lens[H++]=9;for(;H<280;)D.lens[H++]=7;for(;H<288;)D.lens[H++]=8;for(f(p,D.lens,0,288,I,0,D.work,{bits:9}),H=0;H<32;)D.lens[H++]=5;f(m,D.lens,0,32,G,0,D.work,{bits:5}),F=!1}D.lencode=I,D.lenbits=9,D.distcode=G,D.distbits=5}function re(D,H,k,T){var Z,W=D.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new l.Buf8(W.wsize)),T>=W.wsize?(l.arraySet(W.window,H,k-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(T<(Z=W.wsize-W.wnext)&&(Z=T),l.arraySet(W.window,H,k-T,Z,W.wnext),(T-=Z)?(l.arraySet(W.window,H,k-T,T,0),W.wnext=T,W.whave=W.wsize):(W.wnext+=Z,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=Z))),0}a.inflateReset=E,a.inflateReset2=R,a.inflateResetKeep=N,a.inflateInit=function(D){return O(D,15)},a.inflateInit2=O,a.inflate=function(D,H){var k,T,Z,W,ee,J,V,U,X,Ce,Ne,we,ot,gt,Ge,Ue,lt,We,At,Je,P,ce,ie,z,L=0,$=new l.Buf8(4),ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return y;(k=D.state).mode===12&&(k.mode=13),ee=D.next_out,Z=D.output,V=D.avail_out,W=D.next_in,T=D.input,J=D.avail_in,U=k.hold,X=k.bits,Ce=J,Ne=V,ce=x;e:for(;;)switch(k.mode){case S:if(k.wrap===0){k.mode=13;break}for(;X<16;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}if(2&k.wrap&&U===35615){$[k.check=0]=255&U,$[1]=U>>>8&255,k.check=d(k.check,$,2,0),X=U=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&U)<<8)+(U>>8))%31){D.msg="incorrect header check",k.mode=30;break}if((15&U)!=8){D.msg="unknown compression method",k.mode=30;break}if(X-=4,P=8+(15&(U>>>=4)),k.wbits===0)k.wbits=P;else if(P>k.wbits){D.msg="invalid window size",k.mode=30;break}k.dmax=1<<P,D.adler=k.check=1,k.mode=512&U?10:12,X=U=0;break;case 2:for(;X<16;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}if(k.flags=U,(255&k.flags)!=8){D.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){D.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=U>>8&1),512&k.flags&&($[0]=255&U,$[1]=U>>>8&255,k.check=d(k.check,$,2,0)),X=U=0,k.mode=3;case 3:for(;X<32;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}k.head&&(k.head.time=U),512&k.flags&&($[0]=255&U,$[1]=U>>>8&255,$[2]=U>>>16&255,$[3]=U>>>24&255,k.check=d(k.check,$,4,0)),X=U=0,k.mode=4;case 4:for(;X<16;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}k.head&&(k.head.xflags=255&U,k.head.os=U>>8),512&k.flags&&($[0]=255&U,$[1]=U>>>8&255,k.check=d(k.check,$,2,0)),X=U=0,k.mode=5;case 5:if(1024&k.flags){for(;X<16;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}k.length=U,k.head&&(k.head.extra_len=U),512&k.flags&&($[0]=255&U,$[1]=U>>>8&255,k.check=d(k.check,$,2,0)),X=U=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(J<(we=k.length)&&(we=J),we&&(k.head&&(P=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),l.arraySet(k.head.extra,T,W,we,P)),512&k.flags&&(k.check=d(k.check,T,we,W)),J-=we,W+=we,k.length-=we),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(J===0)break e;for(we=0;P=T[W+we++],k.head&&P&&k.length<65536&&(k.head.name+=String.fromCharCode(P)),P&&we<J;);if(512&k.flags&&(k.check=d(k.check,T,we,W)),J-=we,W+=we,P)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(J===0)break e;for(we=0;P=T[W+we++],k.head&&P&&k.length<65536&&(k.head.comment+=String.fromCharCode(P)),P&&we<J;);if(512&k.flags&&(k.check=d(k.check,T,we,W)),J-=we,W+=we,P)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;X<16;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}if(U!==(65535&k.check)){D.msg="header crc mismatch",k.mode=30;break}X=U=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),D.adler=k.check=0,k.mode=12;break;case 10:for(;X<32;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}D.adler=k.check=C(U),X=U=0,k.mode=11;case 11:if(k.havedict===0)return D.next_out=ee,D.avail_out=V,D.next_in=W,D.avail_in=J,k.hold=U,k.bits=X,2;D.adler=k.check=1,k.mode=12;case 12:if(H===5||H===6)break e;case 13:if(k.last){U>>>=7&X,X-=7&X,k.mode=27;break}for(;X<3;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}switch(k.last=1&U,X-=1,3&(U>>>=1)){case 0:k.mode=14;break;case 1:if(Y(k),k.mode=20,H!==6)break;U>>>=2,X-=2;break e;case 2:k.mode=17;break;case 3:D.msg="invalid block type",k.mode=30}U>>>=2,X-=2;break;case 14:for(U>>>=7&X,X-=7&X;X<32;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}if((65535&U)!=(U>>>16^65535)){D.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&U,X=U=0,k.mode=15,H===6)break e;case 15:k.mode=16;case 16:if(we=k.length){if(J<we&&(we=J),V<we&&(we=V),we===0)break e;l.arraySet(Z,T,W,we,ee),J-=we,W+=we,V-=we,ee+=we,k.length-=we;break}k.mode=12;break;case 17:for(;X<14;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}if(k.nlen=257+(31&U),U>>>=5,X-=5,k.ndist=1+(31&U),U>>>=5,X-=5,k.ncode=4+(15&U),U>>>=4,X-=4,286<k.nlen||30<k.ndist){D.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;X<3;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}k.lens[ue[k.have++]]=7&U,U>>>=3,X-=3}for(;k.have<19;)k.lens[ue[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,ie={bits:k.lenbits},ce=f(0,k.lens,0,19,k.lencode,0,k.work,ie),k.lenbits=ie.bits,ce){D.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;Ue=(L=k.lencode[U&(1<<k.lenbits)-1])>>>16&255,lt=65535&L,!((Ge=L>>>24)<=X);){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}if(lt<16)U>>>=Ge,X-=Ge,k.lens[k.have++]=lt;else{if(lt===16){for(z=Ge+2;X<z;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}if(U>>>=Ge,X-=Ge,k.have===0){D.msg="invalid bit length repeat",k.mode=30;break}P=k.lens[k.have-1],we=3+(3&U),U>>>=2,X-=2}else if(lt===17){for(z=Ge+3;X<z;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}X-=Ge,P=0,we=3+(7&(U>>>=Ge)),U>>>=3,X-=3}else{for(z=Ge+7;X<z;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}X-=Ge,P=0,we=11+(127&(U>>>=Ge)),U>>>=7,X-=7}if(k.have+we>k.nlen+k.ndist){D.msg="invalid bit length repeat",k.mode=30;break}for(;we--;)k.lens[k.have++]=P}}if(k.mode===30)break;if(k.lens[256]===0){D.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,ie={bits:k.lenbits},ce=f(p,k.lens,0,k.nlen,k.lencode,0,k.work,ie),k.lenbits=ie.bits,ce){D.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,ie={bits:k.distbits},ce=f(m,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,ie),k.distbits=ie.bits,ce){D.msg="invalid distances set",k.mode=30;break}if(k.mode=20,H===6)break e;case 20:k.mode=21;case 21:if(6<=J&&258<=V){D.next_out=ee,D.avail_out=V,D.next_in=W,D.avail_in=J,k.hold=U,k.bits=X,u(D,Ne),ee=D.next_out,Z=D.output,V=D.avail_out,W=D.next_in,T=D.input,J=D.avail_in,U=k.hold,X=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;Ue=(L=k.lencode[U&(1<<k.lenbits)-1])>>>16&255,lt=65535&L,!((Ge=L>>>24)<=X);){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}if(Ue&&!(240&Ue)){for(We=Ge,At=Ue,Je=lt;Ue=(L=k.lencode[Je+((U&(1<<We+At)-1)>>We)])>>>16&255,lt=65535&L,!(We+(Ge=L>>>24)<=X);){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}U>>>=We,X-=We,k.back+=We}if(U>>>=Ge,X-=Ge,k.back+=Ge,k.length=lt,Ue===0){k.mode=26;break}if(32&Ue){k.back=-1,k.mode=12;break}if(64&Ue){D.msg="invalid literal/length code",k.mode=30;break}k.extra=15&Ue,k.mode=22;case 22:if(k.extra){for(z=k.extra;X<z;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}k.length+=U&(1<<k.extra)-1,U>>>=k.extra,X-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;Ue=(L=k.distcode[U&(1<<k.distbits)-1])>>>16&255,lt=65535&L,!((Ge=L>>>24)<=X);){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}if(!(240&Ue)){for(We=Ge,At=Ue,Je=lt;Ue=(L=k.distcode[Je+((U&(1<<We+At)-1)>>We)])>>>16&255,lt=65535&L,!(We+(Ge=L>>>24)<=X);){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}U>>>=We,X-=We,k.back+=We}if(U>>>=Ge,X-=Ge,k.back+=Ge,64&Ue){D.msg="invalid distance code",k.mode=30;break}k.offset=lt,k.extra=15&Ue,k.mode=24;case 24:if(k.extra){for(z=k.extra;X<z;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}k.offset+=U&(1<<k.extra)-1,U>>>=k.extra,X-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){D.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(V===0)break e;if(we=Ne-V,k.offset>we){if((we=k.offset-we)>k.whave&&k.sane){D.msg="invalid distance too far back",k.mode=30;break}ot=we>k.wnext?(we-=k.wnext,k.wsize-we):k.wnext-we,we>k.length&&(we=k.length),gt=k.window}else gt=Z,ot=ee-k.offset,we=k.length;for(V<we&&(we=V),V-=we,k.length-=we;Z[ee++]=gt[ot++],--we;);k.length===0&&(k.mode=21);break;case 26:if(V===0)break e;Z[ee++]=k.length,V--,k.mode=21;break;case 27:if(k.wrap){for(;X<32;){if(J===0)break e;J--,U|=T[W++]<<X,X+=8}if(Ne-=V,D.total_out+=Ne,k.total+=Ne,Ne&&(D.adler=k.check=k.flags?d(k.check,Z,Ne,ee-Ne):c(k.check,Z,Ne,ee-Ne)),Ne=V,(k.flags?U:C(U))!==k.check){D.msg="incorrect data check",k.mode=30;break}X=U=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;X<32;){if(J===0)break e;J--,U+=T[W++]<<X,X+=8}if(U!==(4294967295&k.total)){D.msg="incorrect length check",k.mode=30;break}X=U=0}k.mode=29;case 29:ce=1;break e;case 30:ce=-3;break e;case 31:return-4;case 32:default:return y}return D.next_out=ee,D.avail_out=V,D.next_in=W,D.avail_in=J,k.hold=U,k.bits=X,(k.wsize||Ne!==D.avail_out&&k.mode<30&&(k.mode<27||H!==4))&&re(D,D.output,D.next_out,Ne-D.avail_out)?(k.mode=31,-4):(Ce-=D.avail_in,Ne-=D.avail_out,D.total_in+=Ce,D.total_out+=Ne,k.total+=Ne,k.wrap&&Ne&&(D.adler=k.check=k.flags?d(k.check,Z,Ne,D.next_out-Ne):c(k.check,Z,Ne,D.next_out-Ne)),D.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(Ce==0&&Ne===0||H===4)&&ce===x&&(ce=-5),ce)},a.inflateEnd=function(D){if(!D||!D.state)return y;var H=D.state;return H.window&&(H.window=null),D.state=null,x},a.inflateGetHeader=function(D,H){var k;return D&&D.state&&2&(k=D.state).wrap?((k.head=H).done=!1,x):y},a.inflateSetDictionary=function(D,H){var k,T=H.length;return D&&D.state?(k=D.state).wrap!==0&&k.mode!==11?y:k.mode===11&&c(1,H,T,0)!==k.check?-3:re(D,H,T,T)?(k.mode=31,-4):(k.havedict=1,x):y},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,a){var l=t("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(p,m,x,y,S,v,w,C){var _,N,E,R,O,I,G,F,Y,re=C.bits,D=0,H=0,k=0,T=0,Z=0,W=0,ee=0,J=0,V=0,U=0,X=null,Ce=0,Ne=new l.Buf16(16),we=new l.Buf16(16),ot=null,gt=0;for(D=0;D<=15;D++)Ne[D]=0;for(H=0;H<y;H++)Ne[m[x+H]]++;for(Z=re,T=15;1<=T&&Ne[T]===0;T--);if(T<Z&&(Z=T),T===0)return S[v++]=20971520,S[v++]=20971520,C.bits=1,0;for(k=1;k<T&&Ne[k]===0;k++);for(Z<k&&(Z=k),D=J=1;D<=15;D++)if(J<<=1,(J-=Ne[D])<0)return-1;if(0<J&&(p===0||T!==1))return-1;for(we[1]=0,D=1;D<15;D++)we[D+1]=we[D]+Ne[D];for(H=0;H<y;H++)m[x+H]!==0&&(w[we[m[x+H]]++]=H);if(I=p===0?(X=ot=w,19):p===1?(X=c,Ce-=257,ot=d,gt-=257,256):(X=u,ot=f,-1),D=k,O=v,ee=H=U=0,E=-1,R=(V=1<<(W=Z))-1,p===1&&852<V||p===2&&592<V)return 1;for(;;){for(G=D-ee,Y=w[H]<I?(F=0,w[H]):w[H]>I?(F=ot[gt+w[H]],X[Ce+w[H]]):(F=96,0),_=1<<D-ee,k=N=1<<W;S[O+(U>>ee)+(N-=_)]=G<<24|F<<16|Y|0,N!==0;);for(_=1<<D-1;U&_;)_>>=1;if(_!==0?(U&=_-1,U+=_):U=0,H++,--Ne[D]==0){if(D===T)break;D=m[x+w[H]]}if(Z<D&&(U&R)!==E){for(ee===0&&(ee=Z),O+=k,J=1<<(W=D-ee);W+ee<T&&!((J-=Ne[W+ee])<=0);)W++,J<<=1;if(V+=1<<W,p===1&&852<V||p===2&&592<V)return 1;S[E=U&R]=Z<<24|W<<16|O-v|0}}return U!==0&&(S[O+U]=D-ee<<24|64<<16|0),C.bits=Z,0}},{"../utils/common":41}],51:[function(t,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,a){var l=t("../utils/common"),c=0,d=1;function u(L){for(var $=L.length;0<=--$;)L[$]=0}var f=0,p=29,m=256,x=m+1+p,y=30,S=19,v=2*x+1,w=15,C=16,_=7,N=256,E=16,R=17,O=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=new Array(2*(x+2));u(re);var D=new Array(2*y);u(D);var H=new Array(512);u(H);var k=new Array(256);u(k);var T=new Array(p);u(T);var Z,W,ee,J=new Array(y);function V(L,$,ue,he,te){this.static_tree=L,this.extra_bits=$,this.extra_base=ue,this.elems=he,this.max_length=te,this.has_stree=L&&L.length}function U(L,$){this.dyn_tree=L,this.max_code=0,this.stat_desc=$}function X(L){return L<256?H[L]:H[256+(L>>>7)]}function Ce(L,$){L.pending_buf[L.pending++]=255&$,L.pending_buf[L.pending++]=$>>>8&255}function Ne(L,$,ue){L.bi_valid>C-ue?(L.bi_buf|=$<<L.bi_valid&65535,Ce(L,L.bi_buf),L.bi_buf=$>>C-L.bi_valid,L.bi_valid+=ue-C):(L.bi_buf|=$<<L.bi_valid&65535,L.bi_valid+=ue)}function we(L,$,ue){Ne(L,ue[2*$],ue[2*$+1])}function ot(L,$){for(var ue=0;ue|=1&L,L>>>=1,ue<<=1,0<--$;);return ue>>>1}function gt(L,$,ue){var he,te,ge=new Array(w+1),je=0;for(he=1;he<=w;he++)ge[he]=je=je+ue[he-1]<<1;for(te=0;te<=$;te++){var ve=L[2*te+1];ve!==0&&(L[2*te]=ot(ge[ve]++,ve))}}function Ge(L){var $;for($=0;$<x;$++)L.dyn_ltree[2*$]=0;for($=0;$<y;$++)L.dyn_dtree[2*$]=0;for($=0;$<S;$++)L.bl_tree[2*$]=0;L.dyn_ltree[2*N]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function Ue(L){8<L.bi_valid?Ce(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function lt(L,$,ue,he){var te=2*$,ge=2*ue;return L[te]<L[ge]||L[te]===L[ge]&&he[$]<=he[ue]}function We(L,$,ue){for(var he=L.heap[ue],te=ue<<1;te<=L.heap_len&&(te<L.heap_len&&lt($,L.heap[te+1],L.heap[te],L.depth)&&te++,!lt($,he,L.heap[te],L.depth));)L.heap[ue]=L.heap[te],ue=te,te<<=1;L.heap[ue]=he}function At(L,$,ue){var he,te,ge,je,ve=0;if(L.last_lit!==0)for(;he=L.pending_buf[L.d_buf+2*ve]<<8|L.pending_buf[L.d_buf+2*ve+1],te=L.pending_buf[L.l_buf+ve],ve++,he===0?we(L,te,$):(we(L,(ge=k[te])+m+1,$),(je=I[ge])!==0&&Ne(L,te-=T[ge],je),we(L,ge=X(--he),ue),(je=G[ge])!==0&&Ne(L,he-=J[ge],je)),ve<L.last_lit;);we(L,N,$)}function Je(L,$){var ue,he,te,ge=$.dyn_tree,je=$.stat_desc.static_tree,ve=$.stat_desc.has_stree,Oe=$.stat_desc.elems,nt=-1;for(L.heap_len=0,L.heap_max=v,ue=0;ue<Oe;ue++)ge[2*ue]!==0?(L.heap[++L.heap_len]=nt=ue,L.depth[ue]=0):ge[2*ue+1]=0;for(;L.heap_len<2;)ge[2*(te=L.heap[++L.heap_len]=nt<2?++nt:0)]=1,L.depth[te]=0,L.opt_len--,ve&&(L.static_len-=je[2*te+1]);for($.max_code=nt,ue=L.heap_len>>1;1<=ue;ue--)We(L,ge,ue);for(te=Oe;ue=L.heap[1],L.heap[1]=L.heap[L.heap_len--],We(L,ge,1),he=L.heap[1],L.heap[--L.heap_max]=ue,L.heap[--L.heap_max]=he,ge[2*te]=ge[2*ue]+ge[2*he],L.depth[te]=(L.depth[ue]>=L.depth[he]?L.depth[ue]:L.depth[he])+1,ge[2*ue+1]=ge[2*he+1]=te,L.heap[1]=te++,We(L,ge,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(Ye,Et){var vr,$t,hn,De,Se,Re,Me=Et.dyn_tree,qe=Et.max_code,Ft=Et.stat_desc.static_tree,me=Et.stat_desc.has_stree,Pe=Et.stat_desc.extra_bits,Fe=Et.stat_desc.extra_base,Wt=Et.stat_desc.max_length,jt=0;for(De=0;De<=w;De++)Ye.bl_count[De]=0;for(Me[2*Ye.heap[Ye.heap_max]+1]=0,vr=Ye.heap_max+1;vr<v;vr++)Wt<(De=Me[2*Me[2*($t=Ye.heap[vr])+1]+1]+1)&&(De=Wt,jt++),Me[2*$t+1]=De,qe<$t||(Ye.bl_count[De]++,Se=0,Fe<=$t&&(Se=Pe[$t-Fe]),Re=Me[2*$t],Ye.opt_len+=Re*(De+Se),me&&(Ye.static_len+=Re*(Ft[2*$t+1]+Se)));if(jt!==0){do{for(De=Wt-1;Ye.bl_count[De]===0;)De--;Ye.bl_count[De]--,Ye.bl_count[De+1]+=2,Ye.bl_count[Wt]--,jt-=2}while(0<jt);for(De=Wt;De!==0;De--)for($t=Ye.bl_count[De];$t!==0;)qe<(hn=Ye.heap[--vr])||(Me[2*hn+1]!==De&&(Ye.opt_len+=(De-Me[2*hn+1])*Me[2*hn],Me[2*hn+1]=De),$t--)}}(L,$),gt(ge,nt,L.bl_count)}function P(L,$,ue){var he,te,ge=-1,je=$[1],ve=0,Oe=7,nt=4;for(je===0&&(Oe=138,nt=3),$[2*(ue+1)+1]=65535,he=0;he<=ue;he++)te=je,je=$[2*(he+1)+1],++ve<Oe&&te===je||(ve<nt?L.bl_tree[2*te]+=ve:te!==0?(te!==ge&&L.bl_tree[2*te]++,L.bl_tree[2*E]++):ve<=10?L.bl_tree[2*R]++:L.bl_tree[2*O]++,ge=te,nt=(ve=0)===je?(Oe=138,3):te===je?(Oe=6,3):(Oe=7,4))}function ce(L,$,ue){var he,te,ge=-1,je=$[1],ve=0,Oe=7,nt=4;for(je===0&&(Oe=138,nt=3),he=0;he<=ue;he++)if(te=je,je=$[2*(he+1)+1],!(++ve<Oe&&te===je)){if(ve<nt)for(;we(L,te,L.bl_tree),--ve!=0;);else te!==0?(te!==ge&&(we(L,te,L.bl_tree),ve--),we(L,E,L.bl_tree),Ne(L,ve-3,2)):ve<=10?(we(L,R,L.bl_tree),Ne(L,ve-3,3)):(we(L,O,L.bl_tree),Ne(L,ve-11,7));ge=te,nt=(ve=0)===je?(Oe=138,3):te===je?(Oe=6,3):(Oe=7,4)}}u(J);var ie=!1;function z(L,$,ue,he){Ne(L,(f<<1)+(he?1:0),3),function(te,ge,je,ve){Ue(te),Ce(te,je),Ce(te,~je),l.arraySet(te.pending_buf,te.window,ge,je,te.pending),te.pending+=je}(L,$,ue)}a._tr_init=function(L){ie||(function(){var $,ue,he,te,ge,je=new Array(w+1);for(te=he=0;te<p-1;te++)for(T[te]=he,$=0;$<1<<I[te];$++)k[he++]=te;for(k[he-1]=te,te=ge=0;te<16;te++)for(J[te]=ge,$=0;$<1<<G[te];$++)H[ge++]=te;for(ge>>=7;te<y;te++)for(J[te]=ge<<7,$=0;$<1<<G[te]-7;$++)H[256+ge++]=te;for(ue=0;ue<=w;ue++)je[ue]=0;for($=0;$<=143;)re[2*$+1]=8,$++,je[8]++;for(;$<=255;)re[2*$+1]=9,$++,je[9]++;for(;$<=279;)re[2*$+1]=7,$++,je[7]++;for(;$<=287;)re[2*$+1]=8,$++,je[8]++;for(gt(re,x+1,je),$=0;$<y;$++)D[2*$+1]=5,D[2*$]=ot($,5);Z=new V(re,I,m+1,x,w),W=new V(D,G,0,y,w),ee=new V(new Array(0),F,0,S,_)}(),ie=!0),L.l_desc=new U(L.dyn_ltree,Z),L.d_desc=new U(L.dyn_dtree,W),L.bl_desc=new U(L.bl_tree,ee),L.bi_buf=0,L.bi_valid=0,Ge(L)},a._tr_stored_block=z,a._tr_flush_block=function(L,$,ue,he){var te,ge,je=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(ve){var Oe,nt=4093624447;for(Oe=0;Oe<=31;Oe++,nt>>>=1)if(1&nt&&ve.dyn_ltree[2*Oe]!==0)return c;if(ve.dyn_ltree[18]!==0||ve.dyn_ltree[20]!==0||ve.dyn_ltree[26]!==0)return d;for(Oe=32;Oe<m;Oe++)if(ve.dyn_ltree[2*Oe]!==0)return d;return c}(L)),Je(L,L.l_desc),Je(L,L.d_desc),je=function(ve){var Oe;for(P(ve,ve.dyn_ltree,ve.l_desc.max_code),P(ve,ve.dyn_dtree,ve.d_desc.max_code),Je(ve,ve.bl_desc),Oe=S-1;3<=Oe&&ve.bl_tree[2*Y[Oe]+1]===0;Oe--);return ve.opt_len+=3*(Oe+1)+5+5+4,Oe}(L),te=L.opt_len+3+7>>>3,(ge=L.static_len+3+7>>>3)<=te&&(te=ge)):te=ge=ue+5,ue+4<=te&&$!==-1?z(L,$,ue,he):L.strategy===4||ge===te?(Ne(L,2+(he?1:0),3),At(L,re,D)):(Ne(L,4+(he?1:0),3),function(ve,Oe,nt,Ye){var Et;for(Ne(ve,Oe-257,5),Ne(ve,nt-1,5),Ne(ve,Ye-4,4),Et=0;Et<Ye;Et++)Ne(ve,ve.bl_tree[2*Y[Et]+1],3);ce(ve,ve.dyn_ltree,Oe-1),ce(ve,ve.dyn_dtree,nt-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,je+1),At(L,L.dyn_ltree,L.dyn_dtree)),Ge(L),he&&Ue(L)},a._tr_tally=function(L,$,ue){return L.pending_buf[L.d_buf+2*L.last_lit]=$>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&$,L.pending_buf[L.l_buf+L.last_lit]=255&ue,L.last_lit++,$===0?L.dyn_ltree[2*ue]++:(L.matches++,$--,L.dyn_ltree[2*(k[ue]+m+1)]++,L.dyn_dtree[2*X($)]++),L.last_lit===L.lit_bufsize-1},a._tr_align=function(L){Ne(L,2,3),we(L,N,re),function($){$.bi_valid===16?(Ce($,$.bi_buf),$.bi_buf=0,$.bi_valid=0):8<=$.bi_valid&&($.pending_buf[$.pending++]=255&$.bi_buf,$.bi_buf>>=8,$.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(t,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,a){(function(l){(function(c,d){if(!c.setImmediate){var u,f,p,m,x=1,y={},S=!1,v=c.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(c);w=w&&w.setTimeout?w:c,u={}.toString.call(c.process)==="[object process]"?function(E){process.nextTick(function(){_(E)})}:function(){if(c.postMessage&&!c.importScripts){var E=!0,R=c.onmessage;return c.onmessage=function(){E=!1},c.postMessage("","*"),c.onmessage=R,E}}()?(m="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",N,!1):c.attachEvent("onmessage",N),function(E){c.postMessage(m+E,"*")}):c.MessageChannel?((p=new MessageChannel).port1.onmessage=function(E){_(E.data)},function(E){p.port2.postMessage(E)}):v&&"onreadystatechange"in v.createElement("script")?(f=v.documentElement,function(E){var R=v.createElement("script");R.onreadystatechange=function(){_(E),R.onreadystatechange=null,f.removeChild(R),R=null},f.appendChild(R)}):function(E){setTimeout(_,0,E)},w.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var R=new Array(arguments.length-1),O=0;O<R.length;O++)R[O]=arguments[O+1];var I={callback:E,args:R};return y[x]=I,u(x),x++},w.clearImmediate=C}function C(E){delete y[E]}function _(E){if(S)setTimeout(_,0,E);else{var R=y[E];if(R){S=!0;try{(function(O){var I=O.callback,G=O.args;switch(G.length){case 0:I();break;case 1:I(G[0]);break;case 2:I(G[0],G[1]);break;case 3:I(G[0],G[1],G[2]);break;default:I.apply(d,G)}})(R)}finally{C(E),S=!1}}}}function N(E){E.source===c&&typeof E.data=="string"&&E.data.indexOf(m)===0&&_(+E.data.slice(m.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof So<"u"?So:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(B0);var z4=B0.exports;const B4=Sm(z4);async function G4(r,e){const t=new B4,n=t.folder("deckforge-designs");if(!n)throw new Error("Failed to create ZIP folder");for(let l=0;l<r.length;l++){const c=r[l];e==null||e(l+1,r.length);try{const d=await im(c.canvas_data.objects,{scale:3,format:"png",includeBackground:!0}),f=`${c.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${c.id.slice(0,8)}.png`;n.file(f,d)}catch(d){console.error(`Failed to export design ${c.name}:`,d)}}return await t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}})}function H4(r,e){const t=URL.createObjectURL(r),n=document.createElement("a");n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}const Zs="http://localhost:3000",Eo={async list(){const r=localStorage.getItem("token");return(await dr.get(`${Zs}/folders`,{headers:{Authorization:`Bearer ${r}`}})).data.folders},async create(r,e){const t=localStorage.getItem("token");return(await dr.post(`${Zs}/folders`,{name:r,color:e},{headers:{Authorization:`Bearer ${t}`}})).data.folder},async update(r,e){const t=localStorage.getItem("token");return(await dr.patch(`${Zs}/folders/${r}`,e,{headers:{Authorization:`Bearer ${t}`}})).data.folder},async delete(r){const e=localStorage.getItem("token");await dr.delete(`${Zs}/folders/${r}`,{headers:{Authorization:`Bearer ${e}`}})},async moveDesign(r,e){const t=localStorage.getItem("token");await dr.post(`${Zs}/folders/${r}/designs/${e}`,{},{headers:{Authorization:`Bearer ${t}`}})},async removeDesign(r,e){const t=localStorage.getItem("token");await dr.delete(`${Zs}/folders/${r}/designs/${e}`,{headers:{Authorization:`Bearer ${t}`}})}},ap=["#ccff00","#00ffff","#ff00ff","#ff6600","#00ff00","#ff0000","#0000ff","#ffff00"];function U4({selectedFolder:r,onFolderSelect:e}){const[t,n]=A.useState([]),[a,l]=A.useState(!0),[c,d]=A.useState(!1),[u,f]=A.useState(""),[p,m]=A.useState(null),[x,y]=A.useState("");A.useEffect(()=>{S()},[]);const S=async()=>{l(!0);try{const _=await Eo.list();n(_)}catch(_){console.error("Failed to load folders:",_)}finally{l(!1)}},v=async()=>{var _,N;if(u.trim())try{const E=ap[Math.floor(Math.random()*ap.length)],R=await Eo.create(u.trim(),E);n([...t,R]),f(""),d(!1),Mt({title:" Folder created",description:`${R.name} is ready`})}catch(E){Mt({title:"Failed to create folder",description:((N=(_=E.response)==null?void 0:_.data)==null?void 0:N.error)||"Please try again",variant:"destructive"})}},w=async _=>{if(x.trim())try{const N=await Eo.update(_,{name:x.trim()});n(t.map(E=>E.id===_?N:E)),m(null),Mt({title:" Folder renamed"})}catch{Mt({title:"Failed to rename",variant:"destructive"})}},C=async(_,N)=>{if(confirm(`Delete folder "${N}"? Designs will be moved to "All Designs".`))try{await Eo.delete(_),n(t.filter(E=>E.id!==_)),r===_&&e(null),Mt({title:" Folder deleted"})}catch{Mt({title:"Failed to delete",variant:"destructive"})}};return s.jsxs("div",{className:"w-64 bg-card border-r border-border h-full flex flex-col",children:[s.jsxs("div",{className:"p-3 border-b border-border",children:[s.jsx("h3",{className:"font-display text-xs uppercase tracking-wider mb-3",children:"Folders"}),s.jsxs(le,{size:"sm",variant:"outline",onClick:()=>d(!c),className:"w-full gap-2",children:[s.jsx(vy,{className:"w-4 h-4"}),"New Folder"]})]}),s.jsx(Qn,{className:"flex-1",children:s.jsxs("div",{className:"p-3 space-y-1",children:[s.jsxs("button",{onClick:()=>e(null),className:`w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors ${r===null?"bg-primary/10 text-primary border border-primary":"hover:bg-secondary border border-transparent"}`,children:[s.jsx(Cm,{className:"w-4 h-4"}),s.jsx("span",{className:"flex-1 text-left",children:"All Designs"})]}),c&&s.jsxs("div",{className:"py-2 space-y-2",children:[s.jsx(dt,{placeholder:"Folder name...",value:u,onChange:_=>f(_.target.value),onKeyDown:_=>{_.key==="Enter"&&v(),_.key==="Escape"&&d(!1)},autoFocus:!0,className:"h-8 text-sm"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(le,{size:"sm",onClick:v,disabled:!u.trim(),className:"flex-1",children:"Create"}),s.jsx(le,{size:"sm",variant:"ghost",onClick:()=>d(!1),children:"Cancel"})]})]}),a&&s.jsx("div",{className:"flex justify-center py-4",children:s.jsx(ur,{className:"w-5 h-5 animate-spin text-muted-foreground"})}),t.map(_=>s.jsx("div",{className:`group flex items-center gap-2 px-3 py-2 text-sm transition-colors ${r===_.id?"bg-primary/10 text-primary border border-primary":"hover:bg-secondary border border-transparent"}`,children:p===_.id?s.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[s.jsx(dt,{value:x,onChange:N=>y(N.target.value),onKeyDown:N=>{N.key==="Enter"&&w(_.id),N.key==="Escape"&&m(null)},className:"h-7 text-sm",autoFocus:!0}),s.jsx(le,{size:"sm",variant:"ghost",onClick:()=>w(_.id),className:"h-7 px-2",children:"Save"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>e(_.id),className:"flex-1 flex items-center gap-2",children:[s.jsx(wy,{className:"w-4 h-4",style:{color:_.color}}),s.jsx("span",{className:"truncate",children:_.name})]}),s.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex gap-1",children:[s.jsx("button",{onClick:()=>{m(_.id),y(_.name)},className:"p-1 hover:bg-secondary",children:s.jsx(Wd,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>C(_.id,_.name),className:"p-1 hover:bg-destructive/10 text-destructive",children:s.jsx(kn,{className:"w-3 h-3"})})]})]})},_.id))]})})]})}function W4({message:r="Loading...",fullScreen:e=!1}){const t=e?"fixed inset-0 flex items-center justify-center bg-background/80 backdrop-blur-sm z-50":"flex items-center justify-center py-20";return s.jsx("div",{className:t,children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(ur,{className:"w-8 h-8 animate-spin text-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r})]})})}function G0({icon:r,title:e,description:t,action:n}){return s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4 text-center",children:[r&&s.jsx("div",{className:"mb-4 rounded-full bg-muted p-4",children:s.jsx(r,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:e}),t&&s.jsx("p",{className:"text-sm text-muted-foreground max-w-md mb-6",children:t}),n&&s.jsx(le,{onClick:n.onClick,size:"lg",children:n.label})]})}function V4(){const[r,e]=A.useState([]),[t,n]=A.useState(!0),[a,l]=A.useState(new Set),[c,d]=A.useState(!1),[u,f]=A.useState({current:0,total:0}),[p,m]=A.useState(null),{isAuthenticated:x,logout:y}=jn(),{loadDesign:S,resetCanvas:v}=_t(),w=Rr(),C=p?r.filter(D=>D.folder_id===p):r;A.useEffect(()=>{if(!x){w("/auth");return}_()},[x]);const _=async()=>{n(!0);try{const D=await qo.list();e(D.designs||[])}catch(D){console.error("Failed to load designs:",D)}finally{n(!1)}},N=D=>{S(D.canvas_data),w("/")},E=async(D,H)=>{if(H.stopPropagation(),!!confirm("Delete this design? This cannot be undone."))try{await qo.delete(D),l(k=>{const T=new Set(k);return T.delete(D),T}),await _()}catch(k){console.error("Delete failed:",k),alert("Failed to delete design")}},R=(D,H)=>{H.stopPropagation(),l(k=>{const T=new Set(k);return T.has(D)?T.delete(D):T.add(D),T})},O=()=>{a.size===C.length?l(new Set):l(new Set(C.map(D=>D.id)))},I=async(D,H,k)=>{k.stopPropagation();const T="http://localhost:3000",Z=localStorage.getItem("token");try{await dr.patch(`${T}/gallery/${D}/visibility`,{is_public:!H},{headers:{Authorization:`Bearer ${Z}`}}),e(W=>W.map(ee=>ee.id===D?{...ee,is_public:!H}:ee)),Mt({title:H?" Design unpublished":" Design published",description:H?"Your design has been removed from the gallery":"Your design is now visible in the public gallery"})}catch(W){console.error("Toggle public failed:",W),Mt({title:"Failed to update visibility",description:"Please try again",variant:"destructive"})}},G=async()=>{const D=r.filter(H=>a.has(H.id));if(D.length===0){Mt({title:"No designs selected",description:"Please select at least one design to export.",variant:"destructive"});return}d(!0),f({current:0,total:D.length});try{const H=await G4(D,(Z,W)=>{f({current:Z,total:W})}),T=`deckforge_designs_${Date.now()}.zip`;H4(H,T),Mt({title:" Batch export complete",description:`${D.length} design${D.length!==1?"s":""} exported successfully.`}),l(new Set)}catch(H){console.error("Batch export failed:",H),Mt({title:"Export failed",description:"Failed to export designs. Please try again.",variant:"destructive"})}finally{d(!1),f({current:0,total:0})}},F=()=>{v(),w("/")},Y=async()=>{await y(),w("/auth")};if(!x)return null;const re=a.size>0;return s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card shrink-0",children:[s.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest",children:["My ",s.jsx("span",{className:"text-primary",children:"Designs"})]}),s.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[re&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.size," selected"]}),s.jsx(le,{size:"sm",variant:"outline",onClick:G,disabled:c,className:"gap-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx(ur,{className:"w-4 h-4 animate-spin"}),"Exporting ",u.current,"/",u.total]}):s.jsxs(s.Fragment,{children:[s.jsx(Hr,{className:"w-4 h-4"}),"Export Selected"]})})]}),s.jsxs(le,{size:"sm",variant:"outline",onClick:F,className:"gap-2",children:[s.jsx(pa,{className:"w-4 h-4"}),"New Design"]}),s.jsx(le,{size:"sm",variant:"ghost",onClick:Y,children:"Logout"})]})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsx(U4,{selectedFolder:p,onFolderSelect:m}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsx("div",{className:"container mx-auto px-6 py-8",children:t?s.jsx(W4,{message:"Loading your designs..."}):C.length===0?s.jsx(G0,{icon:pa,title:p?"No designs in this folder":"No Designs Yet",description:p?"This folder is empty. Create a design or move existing ones here.":"Create your first custom deck design!",action:{label:"Create Design",onClick:F}}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx(le,{size:"sm",variant:"outline",onClick:O,className:"gap-2",children:a.size===C.length?s.jsxs(s.Fragment,{children:[s.jsx(jf,{className:"w-4 h-4"}),"Deselect All"]}):s.jsxs(s.Fragment,{children:[s.jsx(Zo,{className:"w-4 h-4"}),"Select All"]})}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[C.length," design",C.length!==1?"s":"",p&&" in folder"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:C.map(D=>{const H=a.has(D.id);return s.jsxs("div",{className:`group border transition-all duration-200 bg-card overflow-hidden cursor-pointer relative ${H?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary/50 hover:shadow-xl hover:-translate-y-1"}`,onClick:()=>N(D),children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",onClick:k=>R(D.id,k),children:s.jsx("div",{className:`w-6 h-6 border-2 flex items-center justify-center transition-colors cursor-pointer ${H?"bg-primary border-primary":"bg-background border-border hover:border-primary"}`,children:H&&s.jsx(jf,{className:"w-5 h-5 text-primary-foreground"})})}),s.jsx("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden",children:D.thumbnail_url?s.jsx("img",{src:D.thumbnail_url,alt:D.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):s.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:D.name})}),D.is_public&&s.jsx("div",{className:"absolute top-2 right-2 z-10",children:s.jsxs("div",{className:"bg-primary text-primary-foreground px-2 py-1 rounded text-[10px] uppercase tracking-wider flex items-center gap-1",children:[s.jsx(kf,{className:"w-3 h-3"}),"Public"]})}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-display text-sm uppercase tracking-widest truncate",children:D.name}),D.description&&s.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:D.description}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 uppercase tracking-widest",children:new Date(D.updated_at).toLocaleDateString()})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsxs(le,{size:"sm",variant:"outline",className:"flex-1 gap-1",onClick:k=>{k.stopPropagation(),N(D)},children:[s.jsx(Zn,{className:"w-3 h-3"}),"Open"]}),s.jsx(le,{size:"sm",variant:D.is_public?"default":"outline",onClick:k=>I(D.id,D.is_public,k),title:D.is_public?"Make Private":"Publish to Gallery",children:D.is_public?s.jsx(kf,{className:"w-3 h-3"}):s.jsx(cl,{className:"w-3 h-3"})}),s.jsx(le,{size:"sm",variant:"destructive",onClick:k=>E(D.id,k),children:s.jsx(kn,{className:"w-3 h-3"})})]})})]})]},D.id)})})]})})})]})]})}const Pd=[{id:"skull-flames",name:"Skull & Flames",description:"Classic skate punk aesthetic with skull and flame stickers",tags:["punk","edgy","classic"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#000000"},{type:"shape",shapeType:"rect",x:0,y:120,width:96,height:54,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ff0000"},{type:"sticker",x:28,y:80,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Skull",fill:"#ffffff",strokeWidth:0,solidFill:!0},{type:"sticker",x:10,y:200,width:30,height:30,rotation:-15,opacity:1,scaleX:1,scaleY:1,iconName:"Flame",fill:"#ff4500",strokeWidth:0,solidFill:!0},{type:"sticker",x:56,y:200,width:30,height:30,rotation:15,opacity:1,scaleX:1,scaleY:1,iconName:"Flame",fill:"#ff4500",strokeWidth:0,solidFill:!0}]},{id:"gradient-fade",name:"Gradient Fade",description:"Modern gradient design with smooth color transitions",tags:["modern","gradient","clean"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fillType:"linear-gradient",gradientStops:[{offset:0,color:"#667eea"},{offset:.5,color:"#764ba2"},{offset:1,color:"#f093fb"}],gradientAngle:180},{type:"shape",shapeType:"circle",x:23,y:122,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff",glow:{enabled:!0,radius:20,color:"#ffffff",intensity:.8}}]},{id:"retro-vinyl",name:"Retro Vinyl",description:"Vintage music-inspired design with record and music icons",tags:["retro","music","vintage"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#f4e8d8"},{type:"shape",shapeType:"rect",x:0,y:140,width:96,height:14,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#8b4513"},{type:"sticker",x:23,y:60,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Disc",fill:"#2c2c2c",strokeWidth:0,solidFill:!0},{type:"sticker",x:12,y:200,width:25,height:25,rotation:-10,opacity:1,scaleX:1,scaleY:1,iconName:"Music",fill:"#8b4513",strokeWidth:0,solidFill:!0},{type:"sticker",x:59,y:195,width:25,height:25,rotation:10,opacity:1,scaleX:1,scaleY:1,iconName:"Music",fill:"#8b4513",strokeWidth:0,solidFill:!0}]},{id:"neon-lightning",name:"Neon Lightning",description:"Electric neon design with lightning bolts",tags:["neon","electric","bold"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#1a1a2e"},{type:"sticker",x:18,y:90,width:60,height:60,rotation:15,opacity:1,scaleX:1,scaleY:1,iconName:"Zap",fill:"#00ff88",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:15,color:"#00ff88",intensity:1}},{type:"sticker",x:8,y:180,width:40,height:40,rotation:-25,opacity:.7,scaleX:1,scaleY:1,iconName:"Zap",fill:"#ff00ff",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:12,color:"#ff00ff",intensity:.9}},{type:"sticker",x:48,y:170,width:40,height:40,rotation:30,opacity:.7,scaleX:1,scaleY:1,iconName:"Zap",fill:"#00ddff",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:12,color:"#00ddff",intensity:.9}}]},{id:"minimalist-shapes",name:"Minimalist Shapes",description:"Clean geometric design with simple shapes",tags:["minimal","geometric","clean"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff"},{type:"shape",shapeType:"circle",x:8,y:70,width:80,height:80,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#000000"},{type:"sticker",x:28,y:180,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Triangle",fill:"#ff0000",strokeWidth:0,solidFill:!0}]},{id:"blank",name:"Blank Canvas",description:"Start from scratch with a clean white deck",tags:["blank","custom"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff"}]}];function Y4(r){if(!r)return Pd;const e=r.toLowerCase();return Pd.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.tags.some(n=>n.toLowerCase().includes(e)))}function $4(){const[r,e]=A.useState(""),{loadDesign:t}=_t(),n=Rr(),a=Y4(r),l=c=>{const d=Pd.find(u=>u.id===c);d&&(t({objects:d.objects,name:d.name}),n("/"))};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card",children:[s.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest flex items-center gap-2",children:[s.jsx(cr,{className:"w-5 h-5 text-primary"}),s.jsx("span",{children:"Templates"})]}),s.jsx("div",{className:"ml-auto flex items-center gap-4",children:s.jsx(le,{size:"sm",variant:"outline",onClick:()=>n("/"),children:"Back to Editor"})})]}),s.jsxs("div",{className:"container mx-auto px-6 py-8",children:[s.jsx("div",{className:"max-w-md mb-8",children:s.jsxs("div",{className:"relative",children:[s.jsx(Nm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(dt,{type:"text",placeholder:"Search templates...",value:r,onChange:c=>e(c.target.value),className:"pl-10"})]})}),a.length===0?s.jsx("div",{className:"text-center py-20",children:s.jsx("p",{className:"text-muted-foreground",children:"No templates found"})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(c=>s.jsxs("div",{className:"group border border-border hover:border-primary transition-colors bg-card overflow-hidden cursor-pointer",onClick:()=>l(c.id),children:[s.jsxs("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden relative",children:[c.thumbnail?s.jsx("img",{src:c.thumbnail,alt:c.name,className:"w-full h-full object-cover"}):s.jsxs("div",{className:"text-center p-4",children:[s.jsx(cr,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:c.name})]}),s.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:s.jsx(le,{size:"sm",variant:"default",children:"Use Template"})})]}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx("h3",{className:"font-display text-sm uppercase tracking-widest",children:c.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:c.description}),s.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:c.tags.map(d=>s.jsx("span",{className:"px-2 py-0.5 text-[10px] uppercase tracking-wider bg-primary/10 text-primary rounded",children:d},d))})]})]},c.id))})]})]})}const td="http://localhost:3000";function X4({designId:r}){const[e,t]=A.useState([]),[n,a]=A.useState(""),[l,c]=A.useState(!0),[d,u]=A.useState(!1),{isAuthenticated:f}=jn();A.useEffect(()=>{p()},[r]);const p=async()=>{c(!0);try{const y=await dr.get(`${td}/comments/${r}`);t(y.data.comments||[])}catch(y){console.error("Failed to load comments:",y)}finally{c(!1)}},m=async y=>{var S,v;if(y.preventDefault(),!f){Mt({title:"Login required",description:"Please login to comment",variant:"destructive"});return}if(n.trim()){u(!0);try{const w=localStorage.getItem("token"),C=await dr.post(`${td}/comments/${r}`,{content:n},{headers:{Authorization:`Bearer ${w}`}});t([...e,C.data.comment]),a(""),Mt({title:" Comment posted",description:"Your comment has been added"})}catch(w){console.error("Failed to post comment:",w),Mt({title:"Failed to post comment",description:((v=(S=w.response)==null?void 0:S.data)==null?void 0:v.error)||"Please try again",variant:"destructive"})}finally{u(!1)}}},x=async y=>{if(confirm("Delete this comment?"))try{const S=localStorage.getItem("token");await dr.delete(`${td}/comments/${y}`,{headers:{Authorization:`Bearer ${S}`}}),t(e.filter(v=>v.id!==y)),Mt({title:" Comment deleted",description:"Your comment has been removed"})}catch(S){console.error("Failed to delete comment:",S),Mt({title:"Failed to delete",description:"Please try again",variant:"destructive"})}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(by,{className:"w-5 h-5"}),s.jsxs("h3",{className:"font-display text-sm uppercase tracking-wider",children:["Comments (",e.length,")"]})]}),f?s.jsxs("form",{onSubmit:m,className:"space-y-2",children:[s.jsx(Hd,{value:n,onChange:y=>a(y.target.value),placeholder:"Add a comment...",className:"min-h-[80px] resize-none",disabled:d}),s.jsx("div",{className:"flex justify-end",children:s.jsx(le,{type:"submit",size:"sm",disabled:!n.trim()||d,className:"gap-2",children:d?s.jsxs(s.Fragment,{children:[s.jsx(ur,{className:"w-3 h-3 animate-spin"}),"Posting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_y,{className:"w-3 h-3"}),"Post Comment"]})})})]}):s.jsx("div",{className:"border border-border p-4 text-center text-sm text-muted-foreground",children:"Please login to comment"}),s.jsx("div",{className:"space-y-3",children:l?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(ur,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):e.length===0?s.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No comments yet. Be the first to comment!"}):e.map(y=>s.jsxs("div",{className:"border border-border p-3 space-y-2 bg-secondary/50",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:y.content})}),f&&y.user_id===localStorage.getItem("userId")&&s.jsx(le,{size:"sm",variant:"ghost",onClick:()=>x(y.id),className:"shrink-0",children:s.jsx(kn,{className:"w-3 h-3"})})]}),s.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:s.jsx("span",{children:new Date(y.created_at).toLocaleString()})})]},y.id))})]})}const Po="http://localhost:3000";function q4(){const[r,e]=A.useState([]),[t,n]=A.useState(!0),[a,l]=A.useState("recent"),[c,d]=A.useState(new Set),[u,f]=A.useState(null),{isAuthenticated:p}=jn(),{loadDesign:m}=_t(),x=Rr();A.useEffect(()=>{y()},[a]);const y=async()=>{n(!0);try{const w=await dr.get(`${Po}/gallery?sort=${a}&limit=50`);if(e(w.data.designs||[]),p){const C=new Set;for(const _ of w.data.designs||[])try{const N=localStorage.getItem("token");(await dr.get(`${Po}/gallery/${_.id}/liked`,{headers:{Authorization:`Bearer ${N}`}})).data.liked&&C.add(_.id)}catch{}d(C)}}catch(w){console.error("Failed to load gallery:",w)}finally{n(!1)}},S=async(w,C)=>{var E,R;if(C.stopPropagation(),!p){Mt({title:"Login required",description:"Please login to like designs",variant:"destructive"}),x("/auth");return}const _=localStorage.getItem("token"),N=c.has(w);try{N?(await dr.delete(`${Po}/gallery/${w}/like`,{headers:{Authorization:`Bearer ${_}`}}),d(O=>{const I=new Set(O);return I.delete(w),I}),e(O=>O.map(I=>I.id===w?{...I,like_count:I.like_count-1}:I))):(await dr.post(`${Po}/gallery/${w}/like`,{},{headers:{Authorization:`Bearer ${_}`}}),d(O=>new Set(O).add(w)),e(O=>O.map(I=>I.id===w?{...I,like_count:I.like_count+1}:I)))}catch(O){console.error("Like failed:",O),Mt({title:"Action failed",description:((R=(E=O.response)==null?void 0:E.data)==null?void 0:R.error)||"Please try again",variant:"destructive"})}},v=(w,C)=>{C.stopPropagation(),m(w.canvas_data),x("/"),Mt({title:" Design loaded",description:"Remix and make it your own!"})};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card",children:[s.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest",children:["Design ",s.jsx("span",{className:"text-primary",children:"Gallery"})]}),s.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(le,{size:"sm",variant:a==="recent"?"default":"outline",onClick:()=>l("recent"),className:"gap-2",children:[s.jsx(qd,{className:"w-4 h-4"}),"Recent"]}),s.jsxs(le,{size:"sm",variant:a==="popular"?"default":"outline",onClick:()=>l("popular"),className:"gap-2",children:[s.jsx(Kd,{className:"w-4 h-4"}),"Popular"]}),s.jsxs(le,{size:"sm",variant:a==="liked"?"default":"outline",onClick:()=>l("liked"),className:"gap-2",children:[s.jsx(Sy,{className:"w-4 h-4"}),"Most Liked"]})]}),s.jsx(le,{size:"sm",variant:"outline",onClick:()=>x("/"),children:"Create Design"}),!p&&s.jsx(le,{size:"sm",variant:"ghost",onClick:()=>x("/auth"),children:"Login"})]})]}),s.jsx("div",{className:"container mx-auto px-6 py-8",children:t?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(ur,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):r.length===0?s.jsxs("div",{className:"text-center py-20 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-display uppercase tracking-widest mb-2",children:"No Public Designs Yet"}),s.jsx("p",{className:"text-muted-foreground",children:"Be the first to share a design with the community!"})]}),s.jsx(le,{onClick:()=>x("/"),size:"lg",children:"Create & Share"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," design",r.length!==1?"s":"","  Community creations"]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(w=>{const C=c.has(w.id);return s.jsxs("div",{className:"group border border-border hover:border-primary transition-colors bg-card overflow-hidden cursor-pointer",onClick:()=>f(w),children:[s.jsxs("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden relative",children:[w.thumbnail_url?s.jsx("img",{src:w.thumbnail_url,alt:w.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:w.name}),s.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[s.jsxs("div",{className:"bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white flex items-center gap-1",children:[s.jsx(Zn,{className:"w-3 h-3"}),w.view_count]}),s.jsxs("div",{className:"bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white flex items-center gap-1",children:[s.jsx(sn,{className:"w-3 h-3"}),w.like_count]})]})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-display text-sm uppercase tracking-widest truncate",children:w.name}),w.description&&s.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:w.description}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 uppercase tracking-widest",children:new Date(w.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(le,{size:"sm",variant:"outline",className:"flex-1 gap-1",onClick:_=>v(w,_),children:[s.jsx(Ef,{className:"w-3 h-3"}),"Remix"]}),s.jsx(le,{size:"sm",variant:C?"default":"outline",onClick:_=>S(w.id,_),className:C?"text-red-500":"",children:s.jsx(sn,{className:`w-3 h-3 ${C?"fill-current":""}`})})]})]})]},w.id)})})]})}),u&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>f(null)}),s.jsxs("div",{className:"relative bg-card border-2 border-border shadow-xl w-full max-w-4xl max-h-[90vh] overflow-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between z-10",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"font-display text-lg uppercase tracking-wider",children:u.name}),u.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:u.description})]}),s.jsx("button",{onClick:()=>f(null),className:"text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(Ca,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden border border-border",children:u.thumbnail_url?s.jsx("img",{src:u.thumbnail_url,alt:u.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:u.name})}),s.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-border",children:[s.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Zn,{className:"w-4 h-4"}),u.view_count," views"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(sn,{className:"w-4 h-4"}),u.like_count," likes"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(le,{size:"sm",variant:"outline",onClick:w=>{w.stopPropagation(),v(u,w),f(null)},className:"gap-2",children:[s.jsx(Ef,{className:"w-4 h-4"}),"Remix"]}),s.jsx(le,{size:"sm",variant:c.has(u.id)?"default":"outline",onClick:w=>S(u.id,w),children:s.jsx(sn,{className:`w-4 h-4 ${c.has(u.id)?"fill-current":""}`})})]})]}),s.jsx(X4,{designId:u.id})]})]})]})]})}function K4(){const{token:r}=Em(),e=Rr(),{loadDesign:t}=_t(),[n,a]=A.useState(null),[l,c]=A.useState(!0),[d,u]=A.useState(null);A.useEffect(()=>{r&&f()},[r]);const f=async()=>{var p,m;if(r){c(!0),u(null);try{const x=await t2.getSharedDesign(r);a(x),t(x.canvas_data)}catch(x){console.error("Failed to load shared design:",x),u(((m=(p=x.response)==null?void 0:p.data)==null?void 0:m.error)||"Failed to load shared design")}finally{c(!1)}}};return l?s.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx(ur,{className:"w-12 h-12 mx-auto animate-spin text-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading shared design..."})]})}):d||!n?s.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[s.jsx(jm,{className:"w-12 h-12 mx-auto text-destructive"}),s.jsx("h2",{className:"font-display text-xl uppercase tracking-wider",children:"Design Not Found"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:d||"This shared design link may have been revoked or does not exist."}),s.jsxs(le,{onClick:()=>e("/"),className:"gap-2",children:[s.jsx(Cy,{className:"w-4 h-4"}),"Go to DeckForge"]})]})}):s.jsxs("div",{className:"h-screen w-screen flex flex-col bg-background overflow-hidden",children:[s.jsxs("header",{className:"h-12 border-b border-border flex items-center px-4 bg-card shrink-0",children:[s.jsxs("h1",{className:"font-display text-lg uppercase tracking-widest text-foreground",children:["Deck",s.jsx("span",{className:"text-primary",children:"Forge"})]}),s.jsx("div",{className:"ml-4 flex items-center gap-2",children:s.jsx("span",{className:"tag-brutal",children:"Shared"})}),s.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[s.jsxs("div",{className:"text-right hidden sm:block",children:[s.jsx("h2",{className:"text-sm font-medium",children:n.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["View only  Created ",new Date(n.created_at).toLocaleDateString()]})]}),s.jsx(le,{size:"sm",variant:"outline",onClick:()=>e("/"),className:"gap-2",children:"Create Your Own"})]})]}),s.jsx("div",{className:"flex-1 flex overflow-hidden",children:s.jsx(dd,{})}),s.jsx("footer",{className:"h-10 border-t border-border flex items-center justify-center px-4 bg-card shrink-0",children:s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Made with ",s.jsx("span",{className:"text-primary",children:"DeckForge"}),"  Fingerboard Graphics Editor"]})})]})}const on={async browseDesigns(r){let e=Qe.from("marketplace_designs").select(`
        *,
        designer:designer_profiles!inner(bio, verified)
      `).eq("published",!0);r.category&&r.category!=="all"&&(e=e.eq("category",r.category)),r.search&&(e=e.or(`title.ilike.%${r.search}%,description.ilike.%${r.search}%`)),r.priceMin!==void 0&&(e=e.gte("price",r.priceMin)),r.priceMax!==void 0&&(e=e.lte("price",r.priceMax)),r.tags&&r.tags.length>0&&(e=e.contains("tags",r.tags)),r.sortBy==="newest"?e=e.order("created_at",{ascending:!1}):r.sortBy==="popular"?e=e.order("downloads",{ascending:!1}):r.sortBy==="trending"&&(e=e.gte("created_at",new Date(Date.now()-7*24*60*60*1e3).toISOString()).order("downloads",{ascending:!1})),e=e.range(r.offset||0,(r.offset||0)+(r.limit||20)-1);const{data:t,error:n}=await e;if(n)throw n;return t},async getDesign(r){const{data:e,error:t}=await Qe.from("marketplace_designs").select(`
        *,
        designer:designer_profiles!inner(bio, verified)
      `).eq("id",r).single();if(t)throw t;await Qe.rpc("increment_views",{design_id:r});const{data:n}=await Qe.auth.getSession();if(n.session){const{data:a}=await Qe.from("marketplace_favorites").select("design_id").eq("user_id",n.session.user.id).eq("design_id",r).single();e.is_favorited=!!a;const{data:l}=await Qe.from("marketplace_purchases").select("design_id").eq("buyer_id",n.session.user.id).eq("design_id",r).single();e.is_purchased=!!l}return e},async uploadDesign(r){const{data:e}=await Qe.auth.getSession();if(!e.session)throw new Error("Not authenticated");const n=`${e.session.user.id}/${Date.now()}.deckforge`,{data:a,error:l}=await Qe.storage.from("marketplace-designs").upload(n,r.file);if(l)throw l;const d=`${e.session.user.id}/${Date.now()}_thumb.png`,{data:u,error:f}=await Qe.storage.from("marketplace-designs").upload(d,r.thumbnail);if(f)throw f;const{data:{publicUrl:p}}=Qe.storage.from("marketplace-designs").getPublicUrl(n),{data:{publicUrl:m}}=Qe.storage.from("marketplace-designs").getPublicUrl(d),{data:x,error:y}=await Qe.from("marketplace_designs").insert({user_id:e.session.user.id,title:r.title,description:r.description,file_url:p,thumbnail_url:m,price:r.price,license_type:r.license_type,tags:r.tags,category:r.category,published:!0}).select().single();if(y)throw y;return x},async purchaseDesign(r){const{data:e}=await Qe.auth.getSession();if(!e.session)throw new Error("Not authenticated");const{data:t,error:n}=await Qe.from("marketplace_designs").select("price, user_id").eq("id",r).single();if(n)throw n;if(t.user_id===e.session.user.id)throw new Error("Cannot purchase your own design");const{data:a}=await Qe.from("marketplace_purchases").select("id").eq("buyer_id",e.session.user.id).eq("design_id",r).single();if(a)throw new Error("Already purchased");const{data:l,error:c}=await Qe.from("marketplace_purchases").insert({design_id:r,buyer_id:e.session.user.id,price_paid:t.price}).select().single();if(c)throw c;return l},async getMyPurchases(){const{data:r}=await Qe.auth.getSession();if(!r.session)throw new Error("Not authenticated");const{data:e,error:t}=await Qe.from("marketplace_purchases").select(`
        *,
        design:marketplace_designs(*)
      `).eq("buyer_id",r.session.user.id).order("purchased_at",{ascending:!1});if(t)throw t;return e},async toggleFavorite(r){const{data:e}=await Qe.auth.getSession();if(!e.session)throw new Error("Not authenticated");const{data:t}=await Qe.from("marketplace_favorites").select("design_id").eq("user_id",e.session.user.id).eq("design_id",r).single();if(t){const{error:n}=await Qe.from("marketplace_favorites").delete().eq("user_id",e.session.user.id).eq("design_id",r);if(n)throw n;return!1}else{const{error:n}=await Qe.from("marketplace_favorites").insert({user_id:e.session.user.id,design_id:r});if(n)throw n;return!0}},async getDesignerProfile(r){const{data:e,error:t}=await Qe.from("designer_profiles").select("*").eq("user_id",r).single();if(t)throw t;return e},async updateDesignerProfile(r){const{data:e}=await Qe.auth.getSession();if(!e.session)throw new Error("Not authenticated");const{data:t}=await Qe.from("designer_profiles").select("id").eq("user_id",e.session.user.id).single();if(t){const{data:n,error:a}=await Qe.from("designer_profiles").update(r).eq("user_id",e.session.user.id).select().single();if(a)throw a;return n}else{const{data:n,error:a}=await Qe.from("designer_profiles").insert({user_id:e.session.user.id,...r}).select().single();if(a)throw a;return n}},async getDesignerDesigns(r){const{data:e,error:t}=await Qe.from("marketplace_designs").select("*").eq("user_id",r).eq("published",!0).order("created_at",{ascending:!1});if(t)throw t;return e}};function vs({className:r,...e}){return s.jsx("div",{className:at("animate-pulse rounded-md bg-muted",r),...e})}function Q4({title:r="Something went wrong",message:e="We encountered an error while loading this content. Please try again.",onRetry:t}){return s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4 text-center",children:[s.jsx("div",{className:"mb-4 rounded-full bg-destructive/10 p-4",children:s.jsx(jm,{className:"w-8 h-8 text-destructive"})}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:r}),s.jsx("p",{className:"text-sm text-muted-foreground max-w-md mb-6",children:e}),t&&s.jsxs(le,{onClick:t,variant:"outline",className:"gap-2",children:[s.jsx(am,{className:"w-4 h-4"}),"Try Again"]})]})}function Z4(){const r=Rr(),[e,t]=A.useState([]),[n,a]=A.useState(!0),[l,c]=A.useState(null),[d,u]=A.useState(""),[f,p]=A.useState("all"),[m,x]=A.useState("trending"),[y,S]=A.useState("all");A.useEffect(()=>{v()},[f,m,y]);const v=async()=>{a(!0),c(null);try{const _={category:f!=="all"?f:void 0,sortBy:m,limit:50};y==="free"?(_.priceMin=0,_.priceMax=0):y==="paid"&&(_.priceMin=.01),d&&(_.search=d);const N=await on.browseDesigns(_);t(N)}catch(_){console.error("Failed to load designs:",_),c(_.message||"Failed to load marketplace designs")}finally{a(!1)}},w=_=>{_.preventDefault(),v()},C=[{value:"all",label:"All",icon:""},{value:"street",label:"Street",icon:""},{value:"edgy",label:"Edgy",icon:""},{value:"retro",label:"Retro",icon:""},{value:"minimal",label:"Minimal",icon:""},{value:"pro",label:"Pro",icon:""}];return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-card",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Design Marketplace"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Discover and download custom fingerboard graphics"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(le,{onClick:()=>r("/marketplace/dashboard"),variant:"outline",className:"gap-2",children:[s.jsx(Kd,{className:"w-4 h-4"}),"Dashboard"]}),s.jsxs(le,{onClick:()=>r("/marketplace/upload"),className:"gap-2",children:[s.jsx(cr,{className:"w-4 h-4"}),"Upload Design"]})]})]}),s.jsx("form",{onSubmit:w,className:"mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Nm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(dt,{type:"text",placeholder:"Search designs...",value:d,onChange:_=>u(_.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:C.map(_=>s.jsxs("button",{onClick:()=>p(_.value),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${f===_.value?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[s.jsx("span",{children:_.icon}),_.label]},_.value))}),s.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Sort:"}),s.jsxs("select",{value:m,onChange:_=>x(_.target.value),className:"px-3 py-1.5 rounded-lg text-sm bg-secondary border-border",children:[s.jsx("option",{value:"trending",children:" Trending"}),s.jsx("option",{value:"newest",children:" Newest"}),s.jsx("option",{value:"popular",children:" Popular"})]})]}),s.jsxs("select",{value:y,onChange:_=>S(_.target.value),className:"px-3 py-1.5 rounded-lg text-sm bg-secondary border-border",children:[s.jsx("option",{value:"all",children:"All Prices"}),s.jsx("option",{value:"free",children:"Free"}),s.jsx("option",{value:"paid",children:"Paid"})]})]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:n?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((_,N)=>s.jsxs("div",{className:"border border-border rounded-lg overflow-hidden",children:[s.jsx(vs,{className:"aspect-[3/8] w-full"}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsx(vs,{className:"h-5 w-3/4"}),s.jsx(vs,{className:"h-4 w-full"}),s.jsx(vs,{className:"h-4 w-2/3"}),s.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[s.jsx(vs,{className:"h-3 w-12"}),s.jsx(vs,{className:"h-3 w-12"})]}),s.jsx(vs,{className:"h-6 w-16 mt-2"})]})]},N))}):l?s.jsx(Q4,{title:"Failed to load designs",message:l,onRetry:v}):e.length===0?s.jsx(G0,{icon:Ny,title:"No designs found",description:d?`No results for "${d}". Try adjusting your search or filters.`:"No designs available yet. Check back soon!"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(_=>s.jsx(J4,{design:_},_.id))})})]})}function J4({design:r}){const e=Rr(),[t,n]=A.useState(r.is_favorited||!1),a=async l=>{l.stopPropagation();try{const c=await on.toggleFavorite(r.id);n(c),de.success(c?"Added to favorites":"Removed from favorites")}catch(c){de.error(c.message||"Failed to toggle favorite")}};return s.jsxs("div",{onClick:()=>e(`/marketplace/design/${r.id}`),className:"group border border-border rounded-lg overflow-hidden hover:shadow-xl hover:border-primary/50 hover:-translate-y-1 transition-all duration-200 cursor-pointer bg-card",children:[s.jsxs("div",{className:"aspect-[3/8] bg-gradient-to-br from-muted to-muted/50 relative overflow-hidden",children:[r.thumbnail_url?s.jsx("img",{src:r.thumbnail_url,alt:r.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-6xl",children:""}),s.jsxs(ii,{children:[s.jsx(ai,{asChild:!0,children:s.jsx("button",{onClick:a,className:"absolute top-2 right-2 w-8 h-8 rounded-full bg-background/80 backdrop-blur-sm flex items-center justify-center hover:bg-background hover:scale-110 transition-all",children:s.jsx(sn,{className:`w-4 h-4 ${t?"fill-red-500 text-red-500":"text-foreground"}`})})}),s.jsx(Ps,{children:s.jsx("p",{children:t?"Remove from favorites":"Add to favorites"})})]}),r.featured_until&&new Date(r.featured_until)>new Date&&s.jsxs("div",{className:"absolute top-2 left-2 bg-yellow-400 text-yellow-900 px-2 py-1 rounded-full flex items-center gap-1 text-xs font-bold",children:[s.jsx(cr,{className:"w-3 h-3"}),"Featured"]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-foreground group-hover:text-primary transition-colors truncate",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:r.description}),s.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Hr,{className:"w-3 h-3"}),r.downloads]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(sn,{className:"w-3 h-3"}),r.favorites]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-border",children:[r.price===0?s.jsx("span",{className:"text-sm font-bold text-green-600",children:"FREE"}):s.jsxs("span",{className:"text-sm font-bold text-foreground flex items-center gap-1",children:[s.jsx(Qd,{className:"w-4 h-4"}),r.price.toFixed(2)]}),r.designer&&r.designer.verified&&s.jsx("span",{className:"text-xs bg-blue-500/10 text-blue-500 px-2 py-1 rounded-full font-medium",children:"Verified"})]})]})]})}function eb(){var C,_;const{id:r}=Em(),e=Rr(),{isAuthenticated:t}=jn(),[n,a]=A.useState(null),[l,c]=A.useState(!0),[d,u]=A.useState(!1),[f,p]=A.useState(!1);A.useEffect(()=>{m()},[r]);const m=async()=>{if(r){c(!0);try{const N=await on.getDesign(r);a(N),p(N.is_favorited||!1)}catch(N){de.error("Failed to load design"),console.error(N)}finally{c(!1)}}},x=async()=>{if(!t){de.error("Please sign in to favorite designs"),e("/auth");return}try{const N=await on.toggleFavorite(r);p(N),de.success(N?"Added to favorites":"Removed from favorites"),n&&a({...n,favorites:N?n.favorites+1:n.favorites-1})}catch(N){de.error(N.message||"Failed to toggle favorite")}},y=async()=>{if(!t){de.error("Please sign in to purchase"),e("/auth");return}if(n){if(n.price===0){S();return}u(!0);try{await on.purchaseDesign(r),de.success("Purchase successful! Downloading now..."),S(),m()}catch(N){de.error(N.message||"Purchase failed")}finally{u(!1)}}},S=()=>{if(!n)return;const N=document.createElement("a");N.href=n.file_url,N.download=`${n.title}.deckforge`,document.body.appendChild(N),N.click(),document.body.removeChild(N),de.success("Design downloaded!")},v=()=>{n&&de.info("Opening in editor...",{description:"This feature is coming soon!"})},w=()=>{navigator.share?navigator.share({title:n==null?void 0:n.title,text:(n==null?void 0:n.description)||"",url:window.location.href}):(navigator.clipboard.writeText(window.location.href),de.success("Link copied to clipboard!"))};return l?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx(ur,{className:"w-8 h-8 animate-spin text-primary"})}):n?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-card",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:s.jsx(le,{variant:"ghost",onClick:()=>e("/marketplace"),className:"mb-4",children:" Back to Marketplace"})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"aspect-[3/8] bg-gradient-to-br from-muted to-muted/50 rounded-lg overflow-hidden relative",children:[n.thumbnail_url?s.jsx("img",{src:n.thumbnail_url,alt:n.title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-8xl",children:""}),n.featured_until&&new Date(n.featured_until)>new Date&&s.jsxs("div",{className:"absolute top-4 left-4 bg-yellow-400 text-yellow-900 px-3 py-1.5 rounded-full flex items-center gap-2 text-sm font-bold",children:[s.jsx(Xd,{className:"w-4 h-4 fill-current"}),"Featured"]})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:n.title}),s.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Zn,{className:"w-4 h-4"}),n.views," views"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Hr,{className:"w-4 h-4"}),n.downloads," downloads"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(sn,{className:"w-4 h-4"}),n.favorites," favorites"]})]}),n.description&&s.jsx("p",{className:"text-muted-foreground mt-4 whitespace-pre-wrap",children:n.description})]}),n.tags&&n.tags.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(N=>s.jsx("span",{className:"px-3 py-1 rounded-full bg-secondary text-secondary-foreground text-sm",children:N},N))})]}),s.jsxs("div",{className:"border border-border rounded-lg p-4 bg-card",children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"License"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.license_type==="personal"&&s.jsx("p",{children:"Personal use only. Cannot be used for commercial purposes."}),n.license_type==="commercial"&&s.jsx("p",{children:"Commercial use allowed. Can be used for business purposes."}),n.license_type==="unlimited"&&s.jsx("p",{children:"Unlimited use. Use however you want, including resale."})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-border rounded-lg p-6 bg-card sticky top-4",children:[s.jsxs("div",{className:"mb-6",children:[n.price===0?s.jsx("div",{className:"text-3xl font-bold text-green-600",children:"FREE"}):s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:"text-3xl font-bold text-foreground",children:["$",n.price.toFixed(2)]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"USD"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[n.license_type.charAt(0).toUpperCase()+n.license_type.slice(1)," License"]})]}),s.jsxs("div",{className:"space-y-3",children:[n.is_purchased?s.jsxs(s.Fragment,{children:[s.jsxs(le,{onClick:S,className:"w-full gap-2",size:"lg",children:[s.jsx(Hr,{className:"w-4 h-4"}),"Download Again"]}),s.jsxs(le,{onClick:v,variant:"outline",className:"w-full gap-2",size:"lg",children:[s.jsx(jy,{className:"w-4 h-4"}),"Open in Editor"]})]}):s.jsxs(s.Fragment,{children:[s.jsx(le,{onClick:y,className:"w-full gap-2",size:"lg",disabled:d,children:d?s.jsxs(s.Fragment,{children:[s.jsx(ur,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):s.jsx(s.Fragment,{children:n.price===0?s.jsxs(s.Fragment,{children:[s.jsx(Hr,{className:"w-4 h-4"}),"Download Free"]}):s.jsxs(s.Fragment,{children:[s.jsx(km,{className:"w-4 h-4"}),"Purchase & Download"]})})}),s.jsxs(le,{onClick:x,variant:"outline",className:"w-full gap-2",size:"lg",children:[s.jsx(sn,{className:`w-4 h-4 ${f?"fill-red-500 text-red-500":""}`}),f?"Favorited":"Add to Favorites"]})]}),s.jsxs(le,{onClick:w,variant:"ghost",className:"w-full gap-2",size:"sm",children:[s.jsx(_m,{className:"w-4 h-4"}),"Share"]})]})]}),n.designer&&s.jsxs("div",{className:"border border-border rounded-lg p-4 bg-card",children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Designer"}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-primary/50 flex items-center justify-center text-xl font-bold text-primary-foreground",children:((_=(C=n.designer.email)==null?void 0:C[0])==null?void 0:_.toUpperCase())||"D"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-foreground truncate",children:n.designer.email}),n.designer.verified&&s.jsx("span",{className:"text-xs bg-blue-500/10 text-blue-500 px-2 py-0.5 rounded-full font-medium",children:"Verified"})]}),n.designer.bio&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:n.designer.bio})]})]}),s.jsx(le,{onClick:()=>e(`/marketplace/designer/${n.user_id}`),variant:"outline",className:"w-full mt-4",size:"sm",children:"View Profile"})]}),s.jsxs("div",{className:"border border-border rounded-lg p-4 bg-card",children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Category"}),s.jsx("span",{className:"inline-block px-3 py-1.5 rounded-lg bg-primary/10 text-primary text-sm font-medium",children:n.category.charAt(0).toUpperCase()+n.category.slice(1)})]})]})]})})]}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Design not found"}),s.jsx(le,{onClick:()=>e("/marketplace"),className:"mt-4",children:"Back to Marketplace"})]})})}function tb(){const r=Rr(),{isAuthenticated:e}=jn(),[t,n]=A.useState(!1),[a,l]=A.useState(""),[c,d]=A.useState(""),[u,f]=A.useState("0"),[p,m]=A.useState("personal"),[x,y]=A.useState("street"),[S,v]=A.useState(""),[w,C]=A.useState(null),[_,N]=A.useState(null),E=I=>{var F;const G=(F=I.target.files)==null?void 0:F[0];if(G){if(!G.name.endsWith(".deckforge")){de.error("Please upload a .deckforge file");return}C(G)}},R=I=>{var F;const G=(F=I.target.files)==null?void 0:F[0];if(G){if(!G.type.startsWith("image/")){de.error("Please upload an image file");return}N(G)}},O=async I=>{if(I.preventDefault(),!e){de.error("Please sign in to upload designs"),r("/auth");return}if(!a.trim()){de.error("Please enter a title");return}if(!w){de.error("Please upload a design file");return}if(!_){de.error("Please upload a thumbnail image");return}const G=parseFloat(u);if(isNaN(G)||G<0){de.error("Please enter a valid price");return}if(G>100){de.error("Maximum price is $100");return}n(!0);try{const F=S.split(",").map(Y=>Y.trim()).filter(Y=>Y.length>0);await on.uploadDesign({title:a.trim(),description:c.trim(),file:w,thumbnail:_,price:G,license_type:p,tags:F,category:x}),de.success("Design uploaded successfully!"),r("/marketplace")}catch(F){de.error(F.message||"Failed to upload design"),console.error(F)}finally{n(!1)}};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-card",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-6",children:[s.jsx(le,{variant:"ghost",onClick:()=>r("/marketplace"),className:"mb-4",children:" Back to Marketplace"}),s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Upload Design"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Share your design with the community"})]})}),s.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:s.jsxs("form",{onSubmit:O,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{htmlFor:"title",children:"Title *"}),s.jsx(dt,{id:"title",placeholder:"My Awesome Deck Design",value:a,onChange:I=>l(I.target.value),maxLength:100}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.length,"/100 characters"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{htmlFor:"description",children:"Description"}),s.jsx(Hd,{id:"description",placeholder:"Tell people about your design...",value:c,onChange:I=>d(I.target.value),rows:4,maxLength:500}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.length,"/500 characters"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{htmlFor:"design-file",children:"Design File (.deckforge) *"}),s.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 hover:border-primary transition-colors",children:[s.jsx("input",{type:"file",id:"design-file",accept:".deckforge",onChange:E,className:"hidden"}),s.jsxs("label",{htmlFor:"design-file",className:"flex flex-col items-center cursor-pointer",children:[s.jsx(Ko,{className:"w-8 h-8 text-muted-foreground mb-2"}),w?s.jsx("p",{className:"text-sm text-foreground font-medium",children:w.name}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-foreground font-medium",children:"Click to upload design file"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:".deckforge file from DeckForge editor"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{htmlFor:"thumbnail",children:"Preview Image *"}),s.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 hover:border-primary transition-colors",children:[s.jsx("input",{type:"file",id:"thumbnail",accept:"image/png,image/jpeg,image/jpg",onChange:R,className:"hidden"}),s.jsxs("label",{htmlFor:"thumbnail",className:"flex flex-col items-center cursor-pointer",children:[s.jsx($d,{className:"w-8 h-8 text-muted-foreground mb-2"}),_?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-foreground font-medium",children:_.name}),s.jsx("img",{src:URL.createObjectURL(_),alt:"Preview",className:"mt-4 max-h-48 rounded-lg"})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-foreground font-medium",children:"Click to upload preview image"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PNG or JPG, recommended 750x2450px"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{htmlFor:"category",children:"Category *"}),s.jsxs("select",{id:"category",value:x,onChange:I=>y(I.target.value),className:"w-full h-10 px-3 rounded-md border border-border bg-background",children:[s.jsx("option",{value:"street",children:"Street"}),s.jsx("option",{value:"edgy",children:"Edgy"}),s.jsx("option",{value:"retro",children:"Retro"}),s.jsx("option",{value:"minimal",children:"Minimal"}),s.jsx("option",{value:"pro",children:"Pro"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{htmlFor:"tags",children:"Tags"}),s.jsx(dt,{id:"tags",placeholder:"graffiti, urban, colorful (comma separated)",value:S,onChange:I=>v(I.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Separate tags with commas. Max 10 tags."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{htmlFor:"price",children:"Price (USD) *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Qd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(dt,{id:"price",type:"number",step:"0.01",min:"0",max:"100",placeholder:"0.00",value:u,onChange:I=>f(I.target.value),className:"pl-8"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Set to $0.00 for free. You'll receive 80% of paid sales."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{children:"License Type *"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-start gap-3 p-4 border border-border rounded-lg cursor-pointer hover:border-primary transition-colors",children:[s.jsx("input",{type:"radio",name:"license",value:"personal",checked:p==="personal",onChange:I=>m(I.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-foreground",children:"Personal Use"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Buyer can use for personal projects only"})]})]}),s.jsxs("label",{className:"flex items-start gap-3 p-4 border border-border rounded-lg cursor-pointer hover:border-primary transition-colors",children:[s.jsx("input",{type:"radio",name:"license",value:"commercial",checked:p==="commercial",onChange:I=>m(I.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-foreground",children:"Commercial Use"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Buyer can use for commercial projects"})]})]}),s.jsxs("label",{className:"flex items-start gap-3 p-4 border border-border rounded-lg cursor-pointer hover:border-primary transition-colors",children:[s.jsx("input",{type:"radio",name:"license",value:"unlimited",checked:p==="unlimited",onChange:I=>m(I.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-foreground",children:"Unlimited"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Buyer can use however they want, including resale"})]})]})]})]}),s.jsxs("div",{className:"border border-blue-500/20 bg-blue-500/10 rounded-lg p-4 flex gap-3",children:[s.jsx(um,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-foreground",children:[s.jsx("p",{className:"font-medium mb-1",children:"Before uploading:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[s.jsx("li",{children:"Ensure your design is original or you have rights to sell it"}),s.jsx("li",{children:"No copyrighted logos or trademarks without permission"}),s.jsx("li",{children:"Create a high-quality preview image"}),s.jsx("li",{children:"Choose appropriate tags for discoverability"})]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(le,{type:"submit",disabled:t,className:"flex-1",size:"lg",children:t?s.jsxs(s.Fragment,{children:[s.jsx(ur,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ko,{className:"w-4 h-4 mr-2"}),"Upload Design"]})}),s.jsx(le,{type:"button",variant:"outline",onClick:()=>r("/marketplace"),disabled:t,size:"lg",children:"Cancel"})]})]})})]})}function rb(){const r=Rr(),{isAuthenticated:e,user:t}=jn(),[n,a]=A.useState(null),[l,c]=A.useState([]),[d,u]=A.useState(!0);A.useEffect(()=>{if(!e){r("/auth");return}f()},[e]);const f=async()=>{u(!0);try{if(t!=null&&t.id){try{const w=await on.getDesignerProfile(t.id);a(w)}catch{const C=await on.updateDesignerProfile({bio:"",social_links:{}});a(C)}const v=await on.getDesignerDesigns(t.id);c(v)}}catch(v){de.error("Failed to load dashboard"),console.error(v)}finally{u(!1)}},p=async v=>{if(confirm("Are you sure you want to delete this design?"))try{await fetch(`undefined/rest/v1/marketplace_designs?id=eq.${v}`,{method:"DELETE",headers:{apikey:void 0,Authorization:`Bearer ${(await on).supabase.auth.getSession()}`}}),de.success("Design deleted"),f()}catch{de.error("Failed to delete design")}};if(d)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx(ur,{className:"w-8 h-8 animate-spin text-primary"})});const m=(n==null?void 0:n.total_earnings)||0,x=(n==null?void 0:n.total_sales)||0,y=l.length,S=l.reduce((v,w)=>v+w.downloads,0);return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-card",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Designer Dashboard"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your designs and track your earnings"})]}),s.jsxs(le,{onClick:()=>r("/marketplace/upload"),className:"gap-2",children:[s.jsx(pa,{className:"w-4 h-4"}),"Upload New Design"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ao,{icon:Qd,label:"Total Earnings",value:`$${m.toFixed(2)}`,description:"80% of sales",color:"text-green-600"}),s.jsx(Ao,{icon:Kd,label:"Total Sales",value:x.toString(),description:"Completed purchases",color:"text-blue-600"}),s.jsx(Ao,{icon:Pf,label:"Designs",value:y.toString(),description:"Published designs",color:"text-purple-600"}),s.jsx(Ao,{icon:Hr,label:"Downloads",value:S.toString(),description:"All-time downloads",color:"text-orange-600"})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Your Designs"}),s.jsx(le,{variant:"outline",onClick:()=>r("/marketplace"),children:"View Marketplace"})]}),l.length===0?s.jsxs("div",{className:"text-center py-20 border border-dashed border-border rounded-lg",children:[s.jsx(Pf,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No designs yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Upload your first design to start earning"}),s.jsxs(le,{onClick:()=>r("/marketplace/upload"),children:[s.jsx(pa,{className:"w-4 h-4 mr-2"}),"Upload Design"]})]}):s.jsx("div",{className:"space-y-4",children:l.map(v=>s.jsx(nb,{design:v,onDelete:()=>p(v.id)},v.id))})]})]})}function Ao({icon:r,label:e,value:t,description:n,color:a}){return s.jsx("div",{className:"border border-border rounded-lg p-4 bg-card",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full bg-muted flex items-center justify-center ${a}`,children:s.jsx(r,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:e}),s.jsx("p",{className:"text-2xl font-bold text-foreground",children:t}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n})]})]})})}function nb({design:r,onDelete:e}){const t=Rr();return s.jsx("div",{className:"border border-border rounded-lg p-4 bg-card hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-32 bg-gradient-to-br from-muted to-muted/50 rounded overflow-hidden flex-shrink-0 cursor-pointer",onClick:()=>t(`/marketplace/design/${r.id}`),children:r.thumbnail_url?s.jsx("img",{src:r.thumbnail_url,alt:r.title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl",children:""})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-foreground truncate cursor-pointer hover:text-primary",onClick:()=>t(`/marketplace/design/${r.id}`),children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:r.description})]}),s.jsxs("div",{className:"ml-4 text-right",children:[r.price===0?s.jsx("span",{className:"text-sm font-bold text-green-600",children:"FREE"}):s.jsxs("span",{className:"text-sm font-bold text-foreground",children:["$",r.price.toFixed(2)]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:r.license_type})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-3",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Zn,{className:"w-3 h-3"}),r.views]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Hr,{className:"w-3 h-3"}),r.downloads]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(sn,{className:"w-3 h-3"}),r.favorites]}),s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-primary/10 text-primary text-[10px] font-medium",children:r.category}),!r.published&&s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-yellow-500/10 text-yellow-600 text-[10px] font-medium",children:"Draft"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>t(`/marketplace/design/${r.id}`),className:"gap-1",children:[s.jsx(Zn,{className:"w-3 h-3"}),"View"]}),s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>de.info("Edit feature coming soon!"),className:"gap-1",children:[s.jsx(ky,{className:"w-3 h-3"}),"Edit"]}),s.jsxs(le,{variant:"outline",size:"sm",onClick:e,className:"gap-1 text-red-600 hover:text-red-700 hover:border-red-600",children:[s.jsx(kn,{className:"w-3 h-3"}),"Delete"]})]})]})]})})}const sb=Math.PI/180;function ib(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const _s=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},_e={_global:_s,version:"10.2.0",isBrowser:ib(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return _e.angleDeg?r*sb:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return _e.DD.isDragging},isTransforming(){var r,e;return(e=(r=_e.Transformer)===null||r===void 0?void 0:r.isTransforming())!==null&&e!==void 0?e:!1},isDragReady(){return!!_e.DD.node},releaseCanvasOnDestroy:!0,document:_s.document,_injectGlobal(r){typeof _s.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),_s.Konva=r}},Nt=r=>{_e[r.prototype.getClassName()]=r};_e._injectGlobal(_e);const ab=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,op=()=>{if(typeof document>"u")throw new Error(ab)};class mr{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new mr(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),a=this.m[0]*t+this.m[2]*n,l=this.m[1]*t+this.m[3]*n,c=this.m[0]*-n+this.m[2]*t,d=this.m[1]*-n+this.m[3]*t;return this.m[0]=a,this.m[1]=l,this.m[2]=c,this.m[3]=d,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){const n=this.m[0]+this.m[2]*t,a=this.m[1]+this.m[3]*t,l=this.m[2]+this.m[0]*e,c=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=a,this.m[2]=l,this.m[3]=c,this}multiply(e){const t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],a=this.m[0]*e.m[2]+this.m[2]*e.m[3],l=this.m[1]*e.m[2]+this.m[3]*e.m[3],c=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],d=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=a,this.m[3]=l,this.m[4]=c,this.m[5]=d,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,a=-this.m[2]*e,l=this.m[0]*e,c=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),d=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=a,this.m[3]=l,this.m[4]=c,this.m[5]=d,this}getMatrix(){return this.m}decompose(){const e=this.m[0],t=this.m[1],n=this.m[2],a=this.m[3],l=this.m[4],c=this.m[5],d=e*a-t*n,u={x:l,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||t!=0){const f=Math.sqrt(e*e+t*t);u.rotation=t>0?Math.acos(e/f):-Math.acos(e/f),u.scaleX=f,u.scaleY=d/f,u.skewX=(e*n+t*a)/d,u.skewY=0}else if(n!=0||a!=0){const f=Math.sqrt(n*n+a*a);u.rotation=Math.PI/2-(a>0?Math.acos(-n/f):-Math.acos(n/f)),u.scaleX=d/f,u.scaleY=f,u.skewX=0,u.skewY=(e*n+t*a)/d}return u.rotation=K._getRotation(u.rotation),u}}const ob="[object Array]",lb="[object Number]",cb="[object String]",db="[object Boolean]",ub=Math.PI/180,hb=180/Math.PI,Xi="#",fb="",pb="0",mb="Konva warning: ",lp="Konva error: ",gb="rgb(",rd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},xb=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let To=[],qi=null;const yb=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(r){setTimeout(r,16)},K={_isElement(r){return!!(r&&r.nodeType==1)},_isFunction(r){return!!(r&&r.constructor&&r.call&&r.apply)},_isPlainObject(r){return!!r&&r.constructor===Object},_isArray(r){return Object.prototype.toString.call(r)===ob},_isNumber(r){return Object.prototype.toString.call(r)===lb&&!isNaN(r)&&isFinite(r)},_isString(r){return Object.prototype.toString.call(r)===cb},_isBoolean(r){return Object.prototype.toString.call(r)===db},isObject(r){return r instanceof Object},isValidSelector(r){if(typeof r!="string")return!1;const e=r[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(r){return r===0||r>0?1:-1},requestAnimFrame(r){To.push(r),To.length===1&&yb(function(){const e=To;To=[],e.forEach(function(t){t()})})},createCanvasElement(){op();const r=document.createElement("canvas");try{r.style=r.style||{}}catch{}return r},createImageElement(){return op(),document.createElement("img")},_isInDocument(r){for(;r=r.parentNode;)if(r==document)return!0;return!1},_urlToImage(r,e){const t=K.createImageElement();t.onload=function(){e(t)},t.src=r},_rgbToHex(r,e,t){return((1<<24)+(r<<16)+(e<<8)+t).toString(16).slice(1)},_hexToRgb(r){r=r.replace(Xi,fb);const e=parseInt(r,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let r=(Math.random()*16777215<<0).toString(16);for(;r.length<6;)r=pb+r;return Xi+r},isCanvasFarblingActive(){if(qi!==null)return qi;if(typeof document>"u")return qi=!1,!1;const r=this.createCanvasElement();r.width=10,r.height=10;const e=r.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,10,10),e.fillStyle="#282828",e.fillRect(0,0,10,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let a=0;a<100;a++)if(t[a*4]!==40||t[a*4+1]!==40||t[a*4+2]!==40||t[a*4+3]!==255){n=!0;break}return qi=n,this.releaseCanvas(r),qi},getHitColor(){const r=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(r):r},getHitColorKey(r,e,t){return this.isCanvasFarblingActive()&&(r=Math.round(r/5)*5,e=Math.round(e/5)*5,t=Math.round(t/5)*5),Xi+this._rgbToHex(r,e,t)},getSnappedHexColor(r){const e=this._hexToRgb(r);return Xi+this._rgbToHex(Math.round(e.r/5)*5,Math.round(e.g/5)*5,Math.round(e.b/5)*5)},getRGB(r){let e;return r in rd?(e=rd[r],{r:e[0],g:e[1],b:e[2]}):r[0]===Xi?this._hexToRgb(r.substring(1)):r.substr(0,4)===gb?(e=xb.exec(r.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(r){return r=r||"black",K._namedColorToRBA(r)||K._hex3ColorToRGBA(r)||K._hex4ColorToRGBA(r)||K._hex6ColorToRGBA(r)||K._hex8ColorToRGBA(r)||K._rgbColorToRGBA(r)||K._rgbaColorToRGBA(r)||K._hslColorToRGBA(r)},_namedColorToRBA(r){const e=rd[r.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(r){if(r.indexOf("rgb(")===0){r=r.match(/rgb\(([^)]+)\)/)[1];const e=r.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(r){if(r.indexOf("rgba(")===0){r=r.match(/rgba\(([^)]+)\)/)[1];const e=r.split(/ *, */).map((t,n)=>t.slice(-1)==="%"?n===3?parseInt(t)/100:parseInt(t)/100*255:Number(t));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(r){if(r[0]==="#"&&r.length===9)return{r:parseInt(r.slice(1,3),16),g:parseInt(r.slice(3,5),16),b:parseInt(r.slice(5,7),16),a:parseInt(r.slice(7,9),16)/255}},_hex6ColorToRGBA(r){if(r[0]==="#"&&r.length===7)return{r:parseInt(r.slice(1,3),16),g:parseInt(r.slice(3,5),16),b:parseInt(r.slice(5,7),16),a:1}},_hex4ColorToRGBA(r){if(r[0]==="#"&&r.length===5)return{r:parseInt(r[1]+r[1],16),g:parseInt(r[2]+r[2],16),b:parseInt(r[3]+r[3],16),a:parseInt(r[4]+r[4],16)/255}},_hex3ColorToRGBA(r){if(r[0]==="#"&&r.length===4)return{r:parseInt(r[1]+r[1],16),g:parseInt(r[2]+r[2],16),b:parseInt(r[3]+r[3],16),a:1}},_hslColorToRGBA(r){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(r)){const[e,...t]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(r),n=Number(t[0])/360,a=Number(t[1])/100,l=Number(t[2])/100;let c,d,u;if(a===0)return u=l*255,{r:Math.round(u),g:Math.round(u),b:Math.round(u),a:1};l<.5?c=l*(1+a):c=l+a-l*a;const f=2*l-c,p=[0,0,0];for(let m=0;m<3;m++)d=n+1/3*-(m-1),d<0&&d++,d>1&&d--,6*d<1?u=f+(c-f)*6*d:2*d<1?u=c:3*d<2?u=f+(c-f)*(2/3-d)*6:u=f,p[m]=u*255;return{r:Math.round(p[0]),g:Math.round(p[1]),b:Math.round(p[2]),a:1}}},haveIntersection(r,e){return!(e.x>r.x+r.width||e.x+e.width<r.x||e.y>r.y+r.height||e.y+e.height<r.y)},cloneObject(r){const e={};for(const t in r)this._isPlainObject(r[t])?e[t]=this.cloneObject(r[t]):this._isArray(r[t])?e[t]=this.cloneArray(r[t]):e[t]=r[t];return e},cloneArray(r){return r.slice(0)},degToRad(r){return r*ub},radToDeg(r){return r*hb},_degToRad(r){return K.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),K.degToRad(r)},_radToDeg(r){return K.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),K.radToDeg(r)},_getRotation(r){return _e.angleDeg?K.radToDeg(r):r},_capitalize(r){return r.charAt(0).toUpperCase()+r.slice(1)},throw(r){throw new Error(lp+r)},error(r){console.error(lp+r)},warn(r){_e.showWarnings&&console.warn(mb+r)},each(r,e){for(const t in r)e(t,r[t])},_inRange(r,e,t){return e<=r&&r<t},_getProjectionToSegment(r,e,t,n,a,l){let c,d,u;const f=(r-t)*(r-t)+(e-n)*(e-n);if(f==0)c=r,d=e,u=(a-t)*(a-t)+(l-n)*(l-n);else{const p=((a-r)*(t-r)+(l-e)*(n-e))/f;p<0?(c=r,d=e,u=(r-a)*(r-a)+(e-l)*(e-l)):p>1?(c=t,d=n,u=(t-a)*(t-a)+(n-l)*(n-l)):(c=r+p*(t-r),d=e+p*(n-e),u=(c-a)*(c-a)+(d-l)*(d-l))}return[c,d,u]},_getProjectionToLine(r,e,t){const n=K.cloneObject(r);let a=Number.MAX_VALUE;return e.forEach(function(l,c){if(!t&&c===e.length-1)return;const d=e[(c+1)%e.length],u=K._getProjectionToSegment(l.x,l.y,d.x,d.y,r.x,r.y),f=u[0],p=u[1],m=u[2];m<a&&(n.x=f,n.y=p,a=m)}),n},_prepareArrayForTween(r,e,t){const n=[],a=[];if(r.length>e.length){const c=e;e=r,r=c}for(let c=0;c<r.length;c+=2)n.push({x:r[c],y:r[c+1]});for(let c=0;c<e.length;c+=2)a.push({x:e[c],y:e[c+1]});const l=[];return a.forEach(function(c){const d=K._getProjectionToLine(c,n,t);l.push(d.x),l.push(d.y)}),l},_prepareToStringify(r){let e;r.visitedByCircularReferenceRemoval=!0;for(const t in r)if(r.hasOwnProperty(t)&&r[t]&&typeof r[t]=="object"){if(e=Object.getOwnPropertyDescriptor(r,t),r[t].visitedByCircularReferenceRemoval||K._isElement(r[t]))if(e.configurable)delete r[t];else return null;else if(K._prepareToStringify(r[t])===null)if(e.configurable)delete r[t];else return null}return delete r.visitedByCircularReferenceRemoval,r},_assign(r,e){for(const t in e)r[t]=e[t];return r},_getFirstPointerId(r){return r.touches?r.changedTouches[0].identifier:r.pointerId||999},releaseCanvas(...r){_e.releaseCanvasOnDestroy&&r.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(r,e,t,n){let a=e<0?e:0,l=t<0?t:0;e=Math.abs(e),t=Math.abs(t);let c=0,d=0,u=0,f=0;typeof n=="number"?c=d=u=f=Math.min(n,e/2,t/2):(c=Math.min(n[0]||0,e/2,t/2),d=Math.min(n[1]||0,e/2,t/2),f=Math.min(n[2]||0,e/2,t/2),u=Math.min(n[3]||0,e/2,t/2)),r.moveTo(a+c,l),r.lineTo(a+e-d,l),r.arc(a+e-d,l+d,d,Math.PI*3/2,0,!1),r.lineTo(a+e,l+t-f),r.arc(a+e-f,l+t-f,f,0,Math.PI/2,!1),r.lineTo(a+u,l+t),r.arc(a+u,l+t-u,u,Math.PI/2,Math.PI,!1),r.lineTo(a,l+c),r.arc(a+c,l+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(r,e,t,n,a){n=Math.abs(n);for(let l=0;l<t;l++){const c=e[(l-1+t)%t],d=e[l],u=e[(l+1)%t],f={x:d.x-c.x,y:d.y-c.y},p={x:u.x-d.x,y:u.y-d.y},m=Math.hypot(f.x,f.y),x=Math.hypot(p.x,p.y);let y;typeof a=="number"?y=a:y=l<a.length?a[l]:0,y=n*Math.cos(Math.PI/t)*Math.min(1,y/n*2);const v={x:f.x/m,y:f.y/m},w={x:p.x/x,y:p.y/x},C={x:d.x-v.x*y,y:d.y-v.y*y},_={x:d.x+w.x*y,y:d.y+w.y*y};l===0?r.moveTo(C.x,C.y):r.lineTo(C.x,C.y),r.arcTo(d.x,d.y,_.x,_.y,y)}}};function vb(r){const e=[],t=r.length,n=K;for(let a=0;a<t;a++){let l=r[a];n._isNumber(l)?l=Math.round(l*1e3)/1e3:n._isString(l)||(l=l+""),e.push(l)}return e}const cp=",",wb="(",bb=")",_b="([",Sb="])",Cb=";",Nb="()",jb="=",dp=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],kb=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],Eb=100;let Ro=null;function up(){if(Ro!==null)return Ro;try{const e=K.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(Ro=!1,!1)}catch{return Ro=!1,!1}}class Pl{constructor(e){this.canvas=e,_e.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){let n=this.traceArr,a=n.length,l="",c,d,u,f;for(c=0;c<a;c++)d=n[c],u=d.method,u?(f=d.args,l+=u,e?l+=Nb:K._isArray(f[0])?l+=_b+f.join(cp)+Sb:(t&&(f=f.map(p=>typeof p=="number"?Math.floor(p):p)),l+=wb+f.join(cp)+bb)):(l+=d.property,e||(l+=jb+d.val)),l+=Cb;return l}clearTrace(){this.traceArr=[]}_trace(e){let t=this.traceArr,n;t.push(e),n=t.length,n>=Eb&&t.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}_applyMiterLimit(e){const t=e.attrs.miterLimit;t!=null&&this.setAttr("miterLimit",t)}setAttr(e,t){this._context[e]=t}arc(e,t,n,a,l,c){this._context.arc(e,t,n,a,l,c)}arcTo(e,t,n,a,l){this._context.arcTo(e,t,n,a,l)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,n,a,l,c){this._context.bezierCurveTo(e,t,n,a,l,c)}clearRect(e,t,n,a){this._context.clearRect(e,t,n,a)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const n=arguments;if(n.length===2)return this._context.createImageData(e,t);if(n.length===1)return this._context.createImageData(e)}createLinearGradient(e,t,n,a){return this._context.createLinearGradient(e,t,n,a)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,n,a,l,c){return this._context.createRadialGradient(e,t,n,a,l,c)}drawImage(e,t,n,a,l,c,d,u,f){const p=arguments,m=this._context;p.length===3?m.drawImage(e,t,n):p.length===5?m.drawImage(e,t,n,a,l):p.length===9&&m.drawImage(e,t,n,a,l,c,d,u,f)}ellipse(e,t,n,a,l,c,d,u){this._context.ellipse(e,t,n,a,l,c,d,u)}isPointInPath(e,t,n,a){return n?this._context.isPointInPath(n,e,t,a):this._context.isPointInPath(e,t,a)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,n,a){this._context.fillRect(e,t,n,a)}strokeRect(e,t,n,a){this._context.strokeRect(e,t,n,a)}fillText(e,t,n,a){a?this._context.fillText(e,t,n,a):this._context.fillText(e,t,n)}measureText(e){return this._context.measureText(e)}getImageData(e,t,n,a){return this._context.getImageData(e,t,n,a)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,n,a){this._context.rect(e,t,n,a)}roundRect(e,t,n,a,l){this._context.roundRect(e,t,n,a,l)}putImageData(e,t,n){this._context.putImageData(e,t,n)}quadraticCurveTo(e,t,n,a){this._context.quadraticCurveTo(e,t,n,a)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,n,a,l,c){this._context.setTransform(e,t,n,a,l,c)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,n,a){this._context.strokeText(e,t,n,a)}transform(e,t,n,a,l,c){this._context.transform(e,t,n,a,l,c)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let e=this,t=dp.length,n=this.setAttr,a,l;const c=function(d){let u=e[d],f;e[d]=function(){return l=vb(Array.prototype.slice.call(arguments,0)),f=u.apply(e,arguments),e._trace({method:d,args:l}),f}};for(a=0;a<t;a++)c(dp[a]);e.setAttr=function(){n.apply(e,arguments);const d=arguments[0];let u=arguments[1];(d==="shadowOffsetX"||d==="shadowOffsetY"||d==="shadowBlur")&&(u=u/this.canvas.getPixelRatio()),e._trace({property:d,val:u})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||t==="source-over"||this.setAttr("globalCompositeOperation",t)}}kb.forEach(function(r){Object.defineProperty(Pl.prototype,r,{get(){return this._context[r]},set(e){this._context[r]=e}})});class Pb extends Pl{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),n=e.getFillPriority();if(t&&n==="color"){this._fillColor(e);return}const a=e.getFillPatternImage();if(a&&n==="pattern"){this._fillPattern(e);return}const l=e.getFillLinearGradientColorStops();if(l&&n==="linear-gradient"){this._fillLinearGradient(e);return}const c=e.getFillRadialGradientColorStops();if(c&&n==="radial-gradient"){this._fillRadialGradient(e);return}t?this._fillColor(e):a?this._fillPattern(e):l?this._fillLinearGradient(e):c&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),a=e.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(t.x,t.y,n.x,n.y);if(a){for(let c=0;c<a.length;c+=2)l.addColorStop(a[c],a[c+1]);this.setAttr("strokeStyle",l)}}_stroke(e){const t=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();const l=this.getCanvas().getPixelRatio();this.setTransform(l,0,0,l,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var t,n,a;const l=(t=e.getShadowRGBA())!==null&&t!==void 0?t:"black",c=(n=e.getShadowBlur())!==null&&n!==void 0?n:5,d=(a=e.getShadowOffset())!==null&&a!==void 0?a:{x:0,y:0},u=e.getAbsoluteScale(),f=this.canvas.getPixelRatio(),p=u.x*f,m=u.y*f;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",c*Math.min(Math.abs(p),Math.abs(m))),this.setAttr("shadowOffsetX",d.x*p),this.setAttr("shadowOffsetY",d.y*m)}}class Ab extends Pl{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const l=this.getCanvas().getPixelRatio();this.setTransform(l,0,0,l,0,0)}this._applyLineCap(e);const n=e.hitStrokeWidth(),a=n==="auto"?e.strokeWidth():n;this.setAttr("lineWidth",a),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}}let Do;function Tb(){if(Do)return Do;const r=K.createCanvasElement(),e=r.getContext("2d");return Do=function(){const t=_e._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}(),K.releaseCanvas(r),Do}class Su{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const n=(e||{}).pixelRatio||_e.pixelRatio||Tb();this.pixelRatio=n,this._canvas=K.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(a){return K.error("Unable to get data URL. "+a.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Wn extends Su{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new Pb(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}class Cu extends Su{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new Ab(this),this.setSize(e.width,e.height)}}const st={get isDragging(){let r=!1;return st._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return st._dragElements.forEach(e=>{r=e.node}),r},_dragElements:new Map,_drag(r){const e=[];st._dragElements.forEach((t,n)=>{const{node:a}=t,l=a.getStage();l.setPointersPositions(r),t.pointerId===void 0&&(t.pointerId=K._getFirstPointerId(r));const c=l._changedPointerPositions.find(d=>d.id===t.pointerId);if(c){if(t.dragStatus!=="dragging"){const d=a.dragDistance();if(Math.max(Math.abs(c.x-t.startPointerPos.x),Math.abs(c.y-t.startPointerPos.y))<d||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,t),e.push(a)}}),e.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:r},!0)})},_endDragBefore(r){const e=[];st._dragElements.forEach(t=>{const{node:n}=t,a=n.getStage();if(r&&a.setPointersPositions(r),!a._changedPointerPositions.find(d=>d.id===t.pointerId))return;(t.dragStatus==="dragging"||t.dragStatus==="stopped")&&(st.justDragged=!0,_e._mouseListenClick=!1,_e._touchListenClick=!1,_e._pointerListenClick=!1,t.dragStatus="stopped");const c=t.node.getLayer()||t.node instanceof _e.Stage&&t.node;c&&e.indexOf(c)===-1&&e.push(c)}),e.forEach(t=>{t.draw()})},_endDragAfter(r){st._dragElements.forEach((e,t)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:r},!0),e.dragStatus!=="dragging"&&st._dragElements.delete(t)})}};_e.isBrowser&&(window.addEventListener("mouseup",st._endDragBefore,!0),window.addEventListener("touchend",st._endDragBefore,!0),window.addEventListener("touchcancel",st._endDragBefore,!0),window.addEventListener("mousemove",st._drag),window.addEventListener("touchmove",st._drag),window.addEventListener("mouseup",st._endDragAfter,!1),window.addEventListener("touchend",st._endDragAfter,!1),window.addEventListener("touchcancel",st._endDragAfter,!1));function ns(r){return K._isString(r)?'"'+r+'"':Object.prototype.toString.call(r)==="[object Number]"||K._isBoolean(r)?r:Object.prototype.toString.call(r)}function H0(r){return r>255?255:r<0?0:Math.round(r)}function ye(){if(_e.isUnminified)return function(r,e){return K._isNumber(r)||K.warn(ns(r)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),r}}function Al(r){if(_e.isUnminified)return function(e,t){let n=K._isNumber(e),a=K._isArray(e)&&e.length==r;return!n&&!a&&K.warn(ns(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+r+")"),e}}function Nu(){if(_e.isUnminified)return function(r,e){return K._isNumber(r)||r==="auto"||K.warn(ns(r)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),r}}function Rs(){if(_e.isUnminified)return function(r,e){return K._isString(r)||K.warn(ns(r)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),r}}function U0(){if(_e.isUnminified)return function(r,e){const t=K._isString(r),n=Object.prototype.toString.call(r)==="[object CanvasGradient]"||r&&r.addColorStop;return t||n||K.warn(ns(r)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),r}}function Rb(){if(_e.isUnminified)return function(r,e){const t=Int8Array?Object.getPrototypeOf(Int8Array):null;return t&&r instanceof t||(K._isArray(r)?r.forEach(function(n){K._isNumber(n)||K.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):K.warn(ns(r)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),r}}function Yr(){if(_e.isUnminified)return function(r,e){return r===!0||r===!1||K.warn(ns(r)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),r}}function Db(r){if(_e.isUnminified)return function(e,t){return e==null||K.isObject(e)||K.warn(ns(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+r),e}}const Ki="get",Qi="set",B={addGetterSetter(r,e,t,n,a){B.addGetter(r,e,t),B.addSetter(r,e,n,a),B.addOverloadedGetterSetter(r,e)},addGetter(r,e,t){const n=Ki+K._capitalize(e);r.prototype[n]=r.prototype[n]||function(){const a=this.attrs[e];return a===void 0?t:a}},addSetter(r,e,t,n){const a=Qi+K._capitalize(e);r.prototype[a]||B.overWriteSetter(r,e,t,n)},overWriteSetter(r,e,t,n){const a=Qi+K._capitalize(e);r.prototype[a]=function(l){return t&&l!==void 0&&l!==null&&(l=t.call(this,l,e)),this._setAttr(e,l),n&&n.call(this),this}},addComponentsGetterSetter(r,e,t,n,a){const l=t.length,c=K._capitalize,d=Ki+c(e),u=Qi+c(e);r.prototype[d]=function(){const p={};for(let m=0;m<l;m++){const x=t[m];p[x]=this.getAttr(e+c(x))}return p};const f=Db(t);r.prototype[u]=function(p){const m=this.attrs[e];n&&(p=n.call(this,p,e)),f&&f.call(this,p,e);for(const x in p)p.hasOwnProperty(x)&&this._setAttr(e+c(x),p[x]);return p||t.forEach(x=>{this._setAttr(e+c(x),void 0)}),this._fireChangeEvent(e,m,p),a&&a.call(this),this},B.addOverloadedGetterSetter(r,e)},addOverloadedGetterSetter(r,e){const t=K._capitalize(e),n=Qi+t,a=Ki+t;r.prototype[e]=function(){return arguments.length?(this[n](arguments[0]),this):this[a]()}},addDeprecatedGetterSetter(r,e,t,n){K.error("Adding deprecated "+e);const a=Ki+K._capitalize(e),l=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[a]=function(){K.error(l);const c=this.attrs[e];return c===void 0?t:c},B.addSetter(r,e,n,function(){K.error(l)}),B.addOverloadedGetterSetter(r,e)},backCompat(r,e){K.each(e,function(t,n){const a=r.prototype[n],l=Ki+K._capitalize(t),c=Qi+K._capitalize(t);function d(){a.apply(this,arguments),K.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}r.prototype[t]=d,r.prototype[l]=d,r.prototype[c]=d})},afterSetFilter(){this._filterUpToDate=!1}};function Ob(r){const e=/(\w+)\(([^)]+)\)/g;let t;for(;(t=e.exec(r))!==null;){const[,n,a]=t;switch(n){case"blur":{const l=parseFloat(a.replace("px",""));return function(c){this.blurRadius(l*.5);const d=_e.Filters;d&&d.Blur&&d.Blur.call(this,c)}}case"brightness":{const l=a.includes("%")?parseFloat(a)/100:parseFloat(a);return function(c){this.brightness(l);const d=_e.Filters;d&&d.Brightness&&d.Brightness.call(this,c)}}case"contrast":{const l=parseFloat(a);return function(c){const d=100*(Math.sqrt(l)-1);this.contrast(d);const u=_e.Filters;u&&u.Contrast&&u.Contrast.call(this,c)}}case"grayscale":return function(l){const c=_e.Filters;c&&c.Grayscale&&c.Grayscale.call(this,l)};case"sepia":return function(l){const c=_e.Filters;c&&c.Sepia&&c.Sepia.call(this,l)};case"invert":return function(l){const c=_e.Filters;c&&c.Invert&&c.Invert.call(this,l)};default:K.warn(`CSS filter "${n}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const $o="absoluteOpacity",hp="allEventListeners",bn="absoluteTransform",fp="absoluteScale",ws="canvas",Ib="Change",Mb="children",Lb="konva",Ad="listening",Fb="mouseenter",zb="mouseleave",Bb="pointerenter",Gb="pointerleave",Hb="touchenter",Ub="touchleave",pp="set",mp="Shape",Xo=" ",gp="stage",Hn="transform",Wb="Stage",Td="visible",Vb=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Xo);let Yb=1,be=class ta{constructor(e){this._id=Yb++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Hn||e===bn)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){let n=this._cache.get(e);return(n===void 0||(e===Hn||e===bn)&&n.dirty===!0)&&(n=t.call(this),this._cache.set(e,n)),n}_calculate(e,t,n){if(!this._attachedDepsListeners.get(e)){const a=t.map(l=>l+"Change.konva").join(Xo);this.on(a,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(ws)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===bn&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(ws)){const{scene:e,filter:t,hit:n}=this._cache.get(ws);K.releaseCanvas(e._canvas,t._canvas,n._canvas),this._cache.delete(ws)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const t=e||{};let n={};(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let a=Math.ceil(t.width||n.width),l=Math.ceil(t.height||n.height),c=t.pixelRatio,d=t.x===void 0?Math.floor(n.x):t.x,u=t.y===void 0?Math.floor(n.y):t.y,f=t.offset||0,p=t.drawBorder||!1,m=t.hitCanvasPixelRatio||1;if(!a||!l){K.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const x=Math.abs(Math.round(n.x)-d)>.5?1:0,y=Math.abs(Math.round(n.y)-u)>.5?1:0;a+=f*2+x,l+=f*2+y,d-=f,u-=f;const S=new Wn({pixelRatio:c,width:a,height:l}),v=new Wn({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),w=new Cu({pixelRatio:m,width:a,height:l}),C=S.getContext(),_=w.getContext(),N=new Wn({width:S.width/S.pixelRatio+Math.abs(d),height:S.height/S.pixelRatio+Math.abs(u),pixelRatio:S.pixelRatio}),E=N.getContext();return w.isCache=!0,S.isCache=!0,this._cache.delete(ws),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(S.getContext()._context.imageSmoothingEnabled=!1,v.getContext()._context.imageSmoothingEnabled=!1),C.save(),_.save(),E.save(),C.translate(-d,-u),_.translate(-d,-u),E.translate(-d,-u),N.x=d,N.y=u,this._isUnderCache=!0,this._clearSelfAndDescendantCache($o),this._clearSelfAndDescendantCache(fp),this.drawScene(S,this,N),this.drawHit(w,this),this._isUnderCache=!1,C.restore(),_.restore(),p&&(C.save(),C.beginPath(),C.rect(0,0,a,l),C.closePath(),C.setAttr("strokeStyle","red"),C.setAttr("lineWidth",5),C.stroke(),C.restore()),K.releaseCanvas(N._canvas),this._cache.set(ws,{scene:S,filter:v,hit:w,x:d,y:u}),this._requestDraw(),this}isCached(){return this._cache.has(ws)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let a=1/0,l=1/0,c=-1/0,d=-1/0;const u=this.getAbsoluteTransform(t);return n.forEach(function(f){const p=u.point(f);a===void 0&&(a=c=p.x,l=d=p.y),a=Math.min(a,p.x),l=Math.min(l,p.y),c=Math.max(c,p.x),d=Math.max(d,p.y)}),{x:a,y:l,width:c-a,height:d-l}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const n=this._getCachedSceneCanvas(),a=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/a,n.height/a),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),n=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),t=this._getCanvasCache(),n=t.scene,a=t.filter,l=a.getContext(),c,d,u,f;if(!e||e.length===0)return n;if(this._filterUpToDate)return a;let p=!0;for(let x=0;x<e.length;x++)if(typeof e[x]=="string"&&up(),typeof e[x]!="string"||!up()){p=!1;break}const m=n.pixelRatio;if(a.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio),p){const x=e.join(" ");return l.save(),l.setAttr("filter",x),l.drawImage(n._canvas,0,0,n.getWidth()/m,n.getHeight()/m),l.restore(),this._filterUpToDate=!0,a}try{for(c=e.length,l.clear(),l.drawImage(n._canvas,0,0,n.getWidth()/m,n.getHeight()/m),d=l.getImageData(0,0,a.getWidth(),a.getHeight()),u=0;u<c;u++)f=e[u],typeof f=="string"&&(f=Ob(f)),f.call(this,d),l.putImageData(d,0,0)}catch(x){K.error("Unable to apply filter. "+x.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,a}on(e,t){if(this._cache&&this._cache.delete(hp),arguments.length===3)return this._delegate.apply(this,arguments);const n=e.split(Xo);for(let a=0;a<n.length;a++){const c=n[a].split("."),d=c[0],u=c[1]||"";this.eventListeners[d]||(this.eventListeners[d]=[]),this.eventListeners[d].push({name:u,handler:t})}return this}off(e,t){let n=(e||"").split(Xo),a=n.length,l,c,d,u,f,p;if(this._cache&&this._cache.delete(hp),!e)for(c in this.eventListeners)this._off(c);for(l=0;l<a;l++)if(d=n[l],u=d.split("."),f=u[0],p=u[1],f)this.eventListeners[f]&&this._off(f,p,t);else for(c in this.eventListeners)this._off(c,p,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(n){t.call(this,n.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,n){const a=this;this.on(e,function(l){const c=l.target.findAncestors(t,!0,a);for(let d=0;d<c.length;d++)l=K.cloneObject(l),l.currentTarget=c[d],n.call(c[d],l)})}remove(){return this.isDragging()&&this.stopDrag(),st._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(bn),this._clearSelfAndDescendantCache($o),this._clearSelfAndDescendantCache(fp),this._clearSelfAndDescendantCache(gp),this._clearSelfAndDescendantCache(Td),this._clearSelfAndDescendantCache(Ad)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+K._capitalize(e);return K._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,n;if(!e)return this;for(t in e)t!==Mb&&(n=pp+K._capitalize(t),K._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(Ad,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(Td,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);const n=this.getLayer();let a=!1;st._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===n)&&(a=!0)});const l=!t&&!_e.hitOnDragEnabled&&(a||_e.isTransforming());return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),t=this,n=0,a,l,c,d;function u(p){for(a=[],l=p.length,c=0;c<l;c++)d=p[c],n++,d.nodeType!==mp&&(a=a.concat(d.getChildren().slice())),d._id===t._id&&(c=l);a.length>0&&a[0].getDepth()<=e&&u(a)}const f=this.getStage();return t.nodeType!==Wb&&f&&u(f.getChildren()),n}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Hn),this._clearSelfAndDescendantCache(bn)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(t)}getAbsolutePosition(e){let t=!1,n=this.parent;for(;n;){if(n.isCached()){t=!0;break}n=n.parent}t&&!e&&(e=!0);const a=this.getAbsoluteTransform(e).getMatrix(),l=new mr,c=this.offset();return l.m=a.slice(),l.translate(c.x,c.y),l.getTranslation()}setAbsolutePosition(e){const{x:t,y:n,...a}=this._clearTransform();this.attrs.x=t,this.attrs.y=n,this._clearCache(Hn);const l=this._getAbsoluteTransform().copy();return l.invert(),l.translate(e.x,e.y),e={x:this.attrs.x+l.getTranslation().x,y:this.attrs.y+l.getTranslation().y},this._setTransform(a),this.setPosition({x:e.x,y:e.y}),this._clearCache(Hn),this._clearSelfAndDescendantCache(bn),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,n=e.y,a=this.x(),l=this.y();return t!==void 0&&(a+=t),n!==void 0&&(l+=n),this.setPosition({x:a,y:l}),this}_eachAncestorReverse(e,t){let n=[],a=this.getParent(),l,c;if(!(t&&t._id===this._id)){for(n.unshift(this);a&&(!t||a._id!==t._id);)n.unshift(a),a=a.parent;for(l=n.length,c=0;c<l;c++)e(n[c])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return K.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return K.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return K.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return K.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return K.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&K.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache($o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),t,n,a,l,c;const d={attrs:{},className:this.getClassName()};for(t in e)n=e[t],c=K.isObject(n)&&!K._isPlainObject(n)&&!K._isArray(n),!c&&(a=typeof this[t]=="function"&&this[t],delete e[t],l=a?a.call(this):null,e[t]=n,l!==n&&(d.attrs[t]=n));return K._prepareToStringify(d)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,n){const a=[];t&&this._isMatch(e)&&a.push(this);let l=this.parent;for(;l;){if(l===n)return a;l._isMatch(e)&&a.push(l),l=l.parent}return a}isAncestorOf(e){return!1}findAncestor(e,t,n){return this.findAncestors(e,t,n)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let t=e.replace(/ /g,"").split(","),n=t.length,a,l;for(a=0;a<n;a++)if(l=t[a],K.isValidSelector(l)||(K.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),K.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),K.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(gp,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},n){return t.target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(bn,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new mr,this._eachAncestorReverse(function(n){const a=n.transformsEnabled();a==="all"?t.multiply(n.getTransform()):a==="position"&&t.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},e),t;{t=this._cache.get(bn)||new mr,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const n=this.transformsEnabled();if(n==="all")t.multiply(this.getTransform());else if(n==="position"){const a=this.attrs.x||0,l=this.attrs.y||0,c=this.attrs.offsetX||0,d=this.attrs.offsetY||0;t.translate(a-c,l-d)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const a=this.getAbsoluteTransform(e).decompose();return{x:a.scaleX,y:a.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Hn,this._getTransform)}_getTransform(){var e,t;const n=this._cache.get(Hn)||new mr;n.reset();const a=this.x(),l=this.y(),c=_e.getAngle(this.rotation()),d=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,u=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,f=this.attrs.skewX||0,p=this.attrs.skewY||0,m=this.attrs.offsetX||0,x=this.attrs.offsetY||0;return(a!==0||l!==0)&&n.translate(a,l),c!==0&&n.rotate(c),(f!==0||p!==0)&&n.skew(f,p),(d!==1||u!==1)&&n.scale(d,u),(m!==0||x!==0)&&n.translate(-1*m,-1*x),n.dirty=!1,n}clone(e){let t=K.cloneObject(this.attrs),n,a,l,c,d;for(n in e)t[n]=e[n];const u=new this.constructor(t);for(n in this.eventListeners)for(a=this.eventListeners[n],l=a.length,c=0;c<l;c++)d=a[c],d.name.indexOf(Lb)<0&&(u.eventListeners[n]||(u.eventListeners[n]=[]),u.eventListeners[n].push(d));return u}_toKonvaCanvas(e){e=e||{};const t=this.getClientRect(),n=this.getStage(),a=e.x!==void 0?e.x:Math.floor(t.x),l=e.y!==void 0?e.y:Math.floor(t.y),c=e.pixelRatio||1,d=new Wn({width:e.width||Math.ceil(t.width)||(n?n.width():0),height:e.height||Math.ceil(t.height)||(n?n.height():0),pixelRatio:c}),u=d.getContext(),f=new Wn({width:d.width/d.pixelRatio+Math.abs(a),height:d.height/d.pixelRatio+Math.abs(l),pixelRatio:d.pixelRatio});return e.imageSmoothingEnabled===!1&&(u._context.imageSmoothingEnabled=!1),u.save(),(a||l)&&u.translate(-1*a,-1*l),this.drawScene(d,void 0,f),u.restore(),d}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const t=e.mimeType||null,n=e.quality||null,a=this._toKonvaCanvas(e).toDataURL(t,n);return e.callback&&e.callback(a),a}toImage(e){return new Promise((t,n)=>{try{const a=e==null?void 0:e.callback;a&&delete e.callback,K._urlToImage(this.toDataURL(e),function(l){t(l),a==null||a(l)})}catch(a){n(a)}})}toBlob(e){return new Promise((t,n)=>{try{const a=e==null?void 0:e.callback;a&&delete e.callback,this.toCanvas(e).toBlob(l=>{t(l),a==null||a(l)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(a){n(a)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():_e.dragDistance}_off(e,t,n){let a=this.eventListeners[e],l,c,d;for(l=0;l<a.length;l++)if(c=a[l].name,d=a[l].handler,(c!=="konva"||t==="konva")&&(!t||c===t)&&(!n||n===d)){if(a.splice(l,1),a.length===0){delete this.eventListeners[e];break}l--}}_fireChangeEvent(e,t,n){this._fire(e+Ib,{oldVal:t,newVal:n})}addName(e){if(!this.hasName(e)){const t=this.name(),n=t?t+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const t=this.name();return t?(t||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return n!==-1&&(t.splice(n,1),this.name(t.join(" "))),this}setAttr(e,t){const n=this[pp+K._capitalize(e)];return K._isFunction(n)?n.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(_e.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,t){const n=this.attrs[e];n===t&&!K.isObject(t)||(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,t),this._requestDraw())}_setComponentAttr(e,t,n){let a;n!==void 0&&(a=this.attrs[e],a||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,a,n))}_fireAndBubble(e,t,n){t&&this.nodeType===mp&&(t.target=this);const a=[Fb,zb,Bb,Gb,Hb,Ub];if(!(a.indexOf(e)!==-1&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n))){this._fire(e,t);const c=a.indexOf(e)!==-1&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!c&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,n;const{nodeType:a}=this,l=ta.protoListenerMap.get(a)||{};let c=l==null?void 0:l[e];if(c===void 0){c=[];let d=Object.getPrototypeOf(this);for(;d;){const u=(n=(t=d.eventListeners)===null||t===void 0?void 0:t[e])!==null&&n!==void 0?n:[];c.push(...u),d=Object.getPrototypeOf(d)}l[e]=c,ta.protoListenerMap.set(a,l)}return c}_fire(e,t){t=t||{},t.currentTarget=this,t.type=e;const n=this._getProtoListeners(e);if(n)for(let l=0;l<n.length;l++)n[l].handler.call(this,t);const a=this.eventListeners[e];if(a)for(let l=0;l<a.length;l++)a[l].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const t=e?e.pointerId:void 0,n=this.getStage(),a=this.getAbsolutePosition();if(!n)return;const l=n._getPointerById(t)||n._changedPointerPositions[0]||a;st._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-a.x,y:l.y-a.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){st._dragElements.has(this._id)||this._createDragElement(e);const n=st._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const n=this.getStage()._getPointerById(t.pointerId);if(!n)return;let a={x:n.x-t.offset.x,y:n.y-t.offset.y};const l=this.dragBoundFunc();if(l!==void 0){const c=l.call(this,a,e);c?a=c:K.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==a.x||this._lastPos.y!==a.y)&&(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}stopDrag(e){const t=st._dragElements.get(this._id);t&&(t.dragStatus="stopped"),st._endDragBefore(e),st._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=st._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||_e.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let a=!1;st._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(a=!0)}),a||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=st._dragElements.get(this._id),n=t&&t.dragStatus==="dragging",a=t&&t.dragStatus==="ready";n?this.stopDrag():a&&st._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const n={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return K.haveIntersection(n,this.getClientRect())}static create(e,t){return K._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let n=ta.prototype.getClassName.call(e),a=e.children,l,c,d;t&&(e.attrs.container=t),_e[n]||(K.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const u=_e[n];if(l=new u(e.attrs),a)for(c=a.length,d=0;d<c;d++)l.add(ta._createNode(a[d]));return l}};be.protoListenerMap=new Map;be.prototype.nodeType="Node";be.prototype._attrsAffectingSize=[];be.prototype.eventListeners={};be.prototype.on.call(be.prototype,Vb,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Hn),this._clearSelfAndDescendantCache(bn)});be.prototype.on.call(be.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Td)});be.prototype.on.call(be.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Ad)});be.prototype.on.call(be.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache($o)});const ut=B.addGetterSetter;ut(be,"zIndex");ut(be,"absolutePosition");ut(be,"position");ut(be,"x",0,ye());ut(be,"y",0,ye());ut(be,"globalCompositeOperation","source-over",Rs());ut(be,"opacity",1,ye());ut(be,"name","",Rs());ut(be,"id","",Rs());ut(be,"rotation",0,ye());B.addComponentsGetterSetter(be,"scale",["x","y"]);ut(be,"scaleX",1,ye());ut(be,"scaleY",1,ye());B.addComponentsGetterSetter(be,"skew",["x","y"]);ut(be,"skewX",0,ye());ut(be,"skewY",0,ye());B.addComponentsGetterSetter(be,"offset",["x","y"]);ut(be,"offsetX",0,ye());ut(be,"offsetY",0,ye());ut(be,"dragDistance",void 0,ye());ut(be,"width",0,ye());ut(be,"height",0,ye());ut(be,"listening",!0,Yr());ut(be,"preventDefault",!0,Yr());ut(be,"filters",void 0,function(r){return this._filterUpToDate=!1,r});ut(be,"visible",!0,Yr());ut(be,"transformsEnabled","all",Rs());ut(be,"size");ut(be,"dragBoundFunc");ut(be,"draggable",!1,Yr());B.backCompat(be,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class xr extends be{constructor(){super(...arguments),this.children=[]}getChildren(e){const t=this.children||[];return e?t.filter(e):t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let n=0;n<e.length;n++)this.add(e[n]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const n=[];return this._descendants(a=>{const l=a._isMatch(e);return l&&n.push(a),!!(l&&t)}),n}_descendants(e){let t=!1;const n=this.getChildren();for(const a of n){if(t=e(a),t)return!0;if(a.hasChildren()&&(t=a._descendants(e),t))return!0}return!1}toObject(){const e=be.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const t=be.prototype.clone.call(this,e);return this.getChildren().forEach(function(n){t.add(n.clone())}),t}getAllIntersections(e){const t=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(e)&&t.push(n)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),!this.isCached()&&((t=this.children)===null||t===void 0||t.forEach(function(n){n._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,n){t.index=n}),this._requestDraw()}drawScene(e,t,n){const a=this.getLayer(),l=e||a&&a.getCanvas(),c=l&&l.getContext(),d=this._getCanvasCache(),u=d&&d.scene,f=l&&l.isCache;if(!this.isVisible()&&!f)return this;if(u){c.save();const p=this.getAbsoluteTransform(t).getMatrix();c.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,t,n);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const n=this.getLayer(),a=e||n&&n.hitCanvas,l=a&&a.getContext(),c=this._getCanvasCache();if(c&&c.hit){l.save();const u=this.getAbsoluteTransform(t).getMatrix();l.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",a,t);return this}_drawChildren(e,t,n,a){var l;const c=t&&t.getContext(),d=this.clipWidth(),u=this.clipHeight(),f=this.clipFunc(),p=typeof d=="number"&&typeof u=="number"||f,m=n===this;if(p){c.save();const y=this.getAbsoluteTransform(n);let S=y.getMatrix();c.transform(S[0],S[1],S[2],S[3],S[4],S[5]),c.beginPath();let v;if(f)v=f.call(this,c,this);else{const w=this.clipX(),C=this.clipY();c.rect(w||0,C||0,d,u)}c.clip.apply(c,v),S=y.copy().invert().getMatrix(),c.transform(S[0],S[1],S[2],S[3],S[4],S[5])}const x=!m&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";x&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(y){y[e](t,n,a)}),x&&c.restore(),p&&c.restore()}getClientRect(e={}){var t;const n=e.skipTransform,a=e.relativeTo;let l,c,d,u,f={x:1/0,y:1/0,width:0,height:0};const p=this;(t=this.children)===null||t===void 0||t.forEach(function(y){if(!y.visible())return;const S=y.getClientRect({relativeTo:p,skipShadow:e.skipShadow,skipStroke:e.skipStroke});S.width===0&&S.height===0||(l===void 0?(l=S.x,c=S.y,d=S.x+S.width,u=S.y+S.height):(l=Math.min(l,S.x),c=Math.min(c,S.y),d=Math.max(d,S.x+S.width),u=Math.max(u,S.y+S.height)))});const m=this.find("Shape");let x=!1;for(let y=0;y<m.length;y++)if(m[y]._isVisible(this)){x=!0;break}return x&&l!==void 0?f={x:l,y:c,width:d-l,height:u-c}:f={x:0,y:0,width:0,height:0},n?f:this._transformedRect(f,a)}}B.addComponentsGetterSetter(xr,"clip",["x","y","width","height"]);B.addGetterSetter(xr,"clipX",void 0,ye());B.addGetterSetter(xr,"clipY",void 0,ye());B.addGetterSetter(xr,"clipWidth",void 0,ye());B.addGetterSetter(xr,"clipHeight",void 0,ye());B.addGetterSetter(xr,"clipFunc");const va=new Map,W0=_e._global.PointerEvent!==void 0;function nd(r){return va.get(r)}function ju(r){return{evt:r,pointerId:r.pointerId}}function V0(r,e){return va.get(r)===e}function Y0(r,e){la(r),e.getStage()&&(va.set(r,e),W0&&e._fire("gotpointercapture",ju(new PointerEvent("gotpointercapture"))))}function la(r,e){const t=va.get(r);if(!t)return;const n=t.getStage();n&&n.content,va.delete(r),W0&&t._fire("lostpointercapture",ju(new PointerEvent("lostpointercapture")))}const $b="Stage",Xb="string",xp="px",qb="mouseout",$0="mouseleave",X0="mouseover",q0="mouseenter",K0="mousemove",Q0="mousedown",Z0="mouseup",ra="pointermove",na="pointerdown",ni="pointerup",sa="pointercancel",Kb="lostpointercapture",Oo="pointerout",ia="pointerleave",Io="pointerover",Mo="pointerenter",Rd="contextmenu",J0="touchstart",ex="touchend",tx="touchmove",rx="touchcancel",Dd="wheel",Qb=5,Zb=[[q0,"_pointerenter"],[Q0,"_pointerdown"],[K0,"_pointermove"],[Z0,"_pointerup"],[$0,"_pointerleave"],[J0,"_pointerdown"],[tx,"_pointermove"],[ex,"_pointerup"],[rx,"_pointercancel"],[X0,"_pointerover"],[Dd,"_wheel"],[Rd,"_contextmenu"],[na,"_pointerdown"],[ra,"_pointermove"],[ni,"_pointerup"],[sa,"_pointercancel"],[ia,"_pointerleave"],[Kb,"_lostpointercapture"]],sd={mouse:{[Oo]:qb,[ia]:$0,[Io]:X0,[Mo]:q0,[ra]:K0,[na]:Q0,[ni]:Z0,[sa]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Oo]:"touchout",[ia]:"touchleave",[Io]:"touchover",[Mo]:"touchenter",[ra]:tx,[na]:J0,[ni]:ex,[sa]:rx,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Oo]:Oo,[ia]:ia,[Io]:Io,[Mo]:Mo,[ra]:ra,[na]:na,[ni]:ni,[sa]:sa,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},aa=r=>r.indexOf("pointer")>=0?"pointer":r.indexOf("touch")>=0?"touch":"mouse",Js=r=>{const e=aa(r);if(e==="pointer")return _e.pointerEventsEnabled&&sd.pointer;if(e==="touch")return sd.touch;if(e==="mouse")return sd.mouse};function yp(r={}){return(r.clipFunc||r.clipWidth||r.clipHeight)&&K.warn("Stage does not support clipping. Please use clip for Layers or Groups."),r}const Jb="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",ca=[];let Tl=class extends xr{constructor(e){super(yp(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),ca.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{yp(this.attrs)}),this._checkVisibility()}_validateAdd(e){const t=e.getType()==="Layer",n=e.getType()==="FastLayer";t||n||K.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Xb){let t;if(e.charAt(0)==="."){const n=e.slice(1);e=document.getElementsByClassName(n)[0]}else e.charAt(0)!=="#"?t=e:t=e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,t=e.length;for(let n=0;n<t;n++)e[n].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),xr.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&K._isInDocument(e)&&this.container().removeChild(e);const t=ca.indexOf(this);return t>-1&&ca.splice(t,1),K.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(K.warn(Jb),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e={...e},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const t=new Wn({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=t.getContext()._context,a=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),a.forEach(function(l){if(!l.isVisible())return;const c=l._toKonvaCanvas(e);n.drawImage(c._canvas,e.x,e.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),t}getIntersection(e){if(!e)return null;const t=this.children,n=t.length,a=n-1;for(let l=a;l>=0;l--){const c=t[l].getIntersection(e);if(c)return c}return null}_resizeDOM(){const e=this.width(),t=this.height();this.content&&(this.content.style.width=e+xp,this.content.style.height=t+xp),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(n=>{n.setSize({width:e,height:t}),n.draw()})}add(e,...t){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.add(arguments[a]);return this}super.add(e);const n=this.children.length;return n>Qb&&K.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),_e.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return V0(e,this)}setPointerCapture(e){Y0(e,this)}releaseCapture(e){la(e)}getLayers(){return this.children}_bindContentEvents(){_e.isBrowser&&Zb.forEach(([e,t])=>{this.content.addEventListener(e,n=>{this[t](n)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const t=Js(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=Js(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=Js(e.type),n=aa(e.type);if(!t)return;this.setPointersPositions(e);const a=this._getTargetShape(n),l=!(_e.isDragging()||_e.isTransforming())||_e.hitOnDragEnabled;a&&l?(a._fireAndBubble(t.pointerout,{evt:e}),a._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):l&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const t=Js(e.type),n=aa(e.type);if(!t)return;this.setPointersPositions(e);let a=!1;this._changedPointerPositions.forEach(l=>{const c=this.getIntersection(l);if(st.justDragged=!1,_e["_"+n+"ListenClick"]=!0,!c||!c.isListening()){this[n+"ClickStartShape"]=void 0;return}_e.capturePointerEventsEnabled&&c.setPointerCapture(l.id),this[n+"ClickStartShape"]=c,c._fireAndBubble(t.pointerdown,{evt:e,pointerId:l.id}),a=!0;const d=e.type.indexOf("touch")>=0;c.preventDefault()&&e.cancelable&&d&&e.preventDefault()}),a||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const t=Js(e.type),n=aa(e.type);if(!t)return;const a=e.type.indexOf("touch")>=0||e.pointerType==="touch";if(_e.isDragging()&&st.node.preventDefault()&&e.cancelable&&a&&e.preventDefault(),this.setPointersPositions(e),!(!(_e.isDragging()||_e.isTransforming())||_e.hitOnDragEnabled))return;const c={};let d=!1;const u=this._getTargetShape(n);this._changedPointerPositions.forEach(f=>{const p=nd(f.id)||this.getIntersection(f),m=f.id,x={evt:e,pointerId:m},y=u!==p;if(y&&u&&(u._fireAndBubble(t.pointerout,{...x},p),u._fireAndBubble(t.pointerleave,{...x},p)),p){if(c[p._id])return;c[p._id]=!0}p&&p.isListening()?(d=!0,y&&(p._fireAndBubble(t.pointerover,{...x},u),p._fireAndBubble(t.pointerenter,{...x},u),this[n+"targetShape"]=p),p._fireAndBubble(t.pointermove,{...x})):u&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:m}),this[n+"targetShape"]=null)}),d||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=Js(e.type),n=aa(e.type);if(!t)return;this.setPointersPositions(e);const a=this[n+"ClickStartShape"],l=this[n+"ClickEndShape"],c={};let d=!1;this._changedPointerPositions.forEach(u=>{const f=nd(u.id)||this.getIntersection(u);if(f){if(f.releaseCapture(u.id),c[f._id])return;c[f._id]=!0}const p=u.id,m={evt:e,pointerId:p};let x=!1;_e["_"+n+"InDblClickWindow"]?(x=!0,clearTimeout(this[n+"DblTimeout"])):st.justDragged||(_e["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){_e["_"+n+"InDblClickWindow"]=!1},_e.dblClickWindow),f&&f.isListening()?(d=!0,this[n+"ClickEndShape"]=f,f._fireAndBubble(t.pointerup,{...m}),_e["_"+n+"ListenClick"]&&a&&a===f&&(f._fireAndBubble(t.pointerclick,{...m}),x&&l&&l===f&&f._fireAndBubble(t.pointerdblclick,{...m}))):(this[n+"ClickEndShape"]=null,d||(this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),d=!0),_e["_"+n+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:p}),x&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:p}))}),d||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),_e["_"+n+"ListenClick"]=!1,e.cancelable&&n!=="touch"&&n!=="pointer"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(Rd,{evt:e}):this._fire(Rd,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(Dd,{evt:e}):this._fire(Dd,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=nd(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(ni,ju(e)),la(e.pointerId)}_lostpointercapture(e){la(e.pointerId)}setPointersPositions(e){const t=this._getContentPosition();let n=null,a=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,l=>{this._pointerPositions.push({id:l.identifier,x:(l.clientX-t.left)/t.scaleX,y:(l.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,l=>{this._changedPointerPositions.push({id:l.identifier,x:(l.clientX-t.left)/t.scaleX,y:(l.clientY-t.top)/t.scaleY})})):(n=(e.clientX-t.left)/t.scaleX,a=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:n,y:a},this._pointerPositions=[{x:n,y:a,id:K._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:a,id:K._getFirstPointerId(e)}])}_setPointerPosition(e){K.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Wn({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Cu({pixelRatio:1,width:this.width(),height:this.height()}),!_e.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return K.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Tl.prototype.nodeType=$b;Nt(Tl);B.addGetterSetter(Tl,"container");_e.isBrowser&&document.addEventListener("visibilitychange",()=>{ca.forEach(r=>{r.batchDraw()})});const nx="hasShadow",sx="shadowRGBA",ix="patternImage",ax="linearGradient",ox="radialGradient";let Lo;function id(){return Lo||(Lo=K.createCanvasElement().getContext("2d"),Lo)}const da={};function e6(r){const e=this.attrs.fillRule;e?r.fill(e):r.fill()}function t6(r){r.stroke()}function r6(r){const e=this.attrs.fillRule;e?r.fill(e):r.fill()}function n6(r){r.stroke()}function s6(){this._clearCache(nx)}function i6(){this._clearCache(sx)}function a6(){this._clearCache(ix)}function o6(){this._clearCache(ax)}function l6(){this._clearCache(ox)}class pe extends be{constructor(e){super(e);let t,n=0;for(;t=K.getHitColor(),!(t&&!(t in da));)if(n++,n>=1e4){K.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),t=K.getRandomColor();break}this.colorKey=t,da[t]=this}getContext(){return K.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return K.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(nx,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(ix,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=id().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const n=new mr;n.translate(this.fillPatternX(),this.fillPatternY()),n.rotate(_e.getAngle(this.fillPatternRotation())),n.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),n.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const a=n.getMatrix(),l=typeof DOMMatrix>"u"?{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}:new DOMMatrix(a);t.setTransform(l)}return t}}_getLinearGradient(){return this._getCache(ax,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const t=id(),n=this.fillLinearGradientStartPoint(),a=this.fillLinearGradientEndPoint(),l=t.createLinearGradient(n.x,n.y,a.x,a.y);for(let c=0;c<e.length;c+=2)l.addColorStop(e[c],e[c+1]);return l}}_getRadialGradient(){return this._getCache(ox,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const t=id(),n=this.fillRadialGradientStartPoint(),a=this.fillRadialGradientEndPoint(),l=t.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),a.x,a.y,this.fillRadialGradientEndRadius());for(let c=0;c<e.length;c+=2)l.addColorStop(e[c],e[c+1]);return l}}getShadowRGBA(){return this._getCache(sx,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=K.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const t=this.getStage();if(!t)return!1;const n=t.bufferHitCanvas;return n.getContext().clear(),this.drawHit(n,void 0,!0),n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return be.prototype.destroy.call(this),delete da[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!((t=this.attrs.perfectDrawEnabled)!==null&&t!==void 0?t:!0))return!1;const a=e||this.hasFill(),l=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(a&&l&&c)return!0;const d=this.hasShadow(),u=this.shadowForStrokeEnabled();return!!(a&&l&&d&&u)}setStrokeHitEnabled(e){K.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=!1,n=this.getParent();for(;n;){if(n.isCached()){t=!0;break}n=n.getParent()}const a=e.skipTransform,l=e.relativeTo||t&&this.getStage()||void 0,c=this.getSelfRect(),u=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,f=c.width+u,p=c.height+u,m=!e.skipShadow&&this.hasShadow(),x=m?this.shadowOffsetX():0,y=m?this.shadowOffsetY():0,S=f+Math.abs(x),v=p+Math.abs(y),w=m&&this.shadowBlur()||0,C=S+w*2,_=v+w*2,N={width:C,height:_,x:-(u/2+w)+Math.min(x,0)+c.x,y:-(u/2+w)+Math.min(y,0)+c.y};return a?N:this._transformedRect(N,l)}drawScene(e,t,n){const a=this.getLayer(),l=e||a.getCanvas(),c=l.getContext(),d=this._getCanvasCache(),u=this.getSceneFunc(),f=this.hasShadow();let p;const m=t===this;if(!this.isVisible()&&!m)return this;if(d){c.save();const x=this.getAbsoluteTransform(t).getMatrix();return c.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!u)return this;if(c.save(),this._useBufferCanvas()){p=this.getStage();const x=n||p.bufferCanvas,y=x.getContext();n?(y.save(),y.setTransform(1,0,0,1,0,0),y.clearRect(0,0,x.width,x.height),y.restore()):y.clear(),y.save(),y._applyLineJoin(this),y._applyMiterLimit(this);const S=this.getAbsoluteTransform(t).getMatrix();y.transform(S[0],S[1],S[2],S[3],S[4],S[5]),u.call(this,y,this),y.restore();const v=x.pixelRatio;f&&c._applyShadow(this),m||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c.drawImage(x._canvas,x.x||0,x.y||0,x.width/v,x.height/v)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!m){const x=this.getAbsoluteTransform(t).getMatrix();c.transform(x[0],x[1],x[2],x[3],x[4],x[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}f&&c._applyShadow(this),u.call(this,c,this)}return c.restore(),this}drawHit(e,t,n=!1){if(!this.shouldDrawHit(t,n))return this;const a=this.getLayer(),l=e||a.hitCanvas,c=l&&l.getContext(),d=this.hitFunc()||this.sceneFunc(),u=this._getCanvasCache(),f=u&&u.hit;if(this.colorKey||K.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),f){c.save();const m=this.getAbsoluteTransform(t).getMatrix();return c.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!d)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===t)){const m=this.getAbsoluteTransform(t).getMatrix();c.transform(m[0],m[1],m[2],m[3],m[4],m[5])}return d.call(this,c,this),c.restore(),this}drawHitFromCache(e=0){const t=this._getCanvasCache(),n=this._getCachedSceneCanvas(),a=t.hit,l=a.getContext(),c=a.getWidth(),d=a.getHeight();l.clear(),l.drawImage(n._canvas,0,0,c,d);try{const u=l.getImageData(0,0,c,d),f=u.data,p=f.length,m=K._hexToRgb(this.colorKey);for(let x=0;x<p;x+=4)f[x+3]>e?(f[x]=m.r,f[x+1]=m.g,f[x+2]=m.b,f[x+3]=255):f[x+3]=0;l.putImageData(u,0,0)}catch(u){K.error("Unable to draw hit graph from cached scene canvas. "+u.message)}return this}hasPointerCapture(e){return V0(e,this)}setPointerCapture(e){Y0(e,this)}releaseCapture(e){la(e)}}pe.prototype._fillFunc=e6;pe.prototype._strokeFunc=t6;pe.prototype._fillFuncHit=r6;pe.prototype._strokeFuncHit=n6;pe.prototype._centroid=!1;pe.prototype.nodeType="Shape";Nt(pe);pe.prototype.eventListeners={};pe.prototype.on.call(pe.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",s6);pe.prototype.on.call(pe.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",i6);pe.prototype.on.call(pe.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",a6);pe.prototype.on.call(pe.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",o6);pe.prototype.on.call(pe.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",l6);B.addGetterSetter(pe,"stroke",void 0,U0());B.addGetterSetter(pe,"strokeWidth",2,ye());B.addGetterSetter(pe,"fillAfterStrokeEnabled",!1);B.addGetterSetter(pe,"hitStrokeWidth","auto",Nu());B.addGetterSetter(pe,"strokeHitEnabled",!0,Yr());B.addGetterSetter(pe,"perfectDrawEnabled",!0,Yr());B.addGetterSetter(pe,"shadowForStrokeEnabled",!0,Yr());B.addGetterSetter(pe,"lineJoin");B.addGetterSetter(pe,"lineCap");B.addGetterSetter(pe,"miterLimit");B.addGetterSetter(pe,"sceneFunc");B.addGetterSetter(pe,"hitFunc");B.addGetterSetter(pe,"dash");B.addGetterSetter(pe,"dashOffset",0,ye());B.addGetterSetter(pe,"shadowColor",void 0,Rs());B.addGetterSetter(pe,"shadowBlur",0,ye());B.addGetterSetter(pe,"shadowOpacity",1,ye());B.addComponentsGetterSetter(pe,"shadowOffset",["x","y"]);B.addGetterSetter(pe,"shadowOffsetX",0,ye());B.addGetterSetter(pe,"shadowOffsetY",0,ye());B.addGetterSetter(pe,"fillPatternImage");B.addGetterSetter(pe,"fill",void 0,U0());B.addGetterSetter(pe,"fillPatternX",0,ye());B.addGetterSetter(pe,"fillPatternY",0,ye());B.addGetterSetter(pe,"fillLinearGradientColorStops");B.addGetterSetter(pe,"strokeLinearGradientColorStops");B.addGetterSetter(pe,"fillRadialGradientStartRadius",0);B.addGetterSetter(pe,"fillRadialGradientEndRadius",0);B.addGetterSetter(pe,"fillRadialGradientColorStops");B.addGetterSetter(pe,"fillPatternRepeat","repeat");B.addGetterSetter(pe,"fillEnabled",!0);B.addGetterSetter(pe,"strokeEnabled",!0);B.addGetterSetter(pe,"shadowEnabled",!0);B.addGetterSetter(pe,"dashEnabled",!0);B.addGetterSetter(pe,"strokeScaleEnabled",!0);B.addGetterSetter(pe,"fillPriority","color");B.addComponentsGetterSetter(pe,"fillPatternOffset",["x","y"]);B.addGetterSetter(pe,"fillPatternOffsetX",0,ye());B.addGetterSetter(pe,"fillPatternOffsetY",0,ye());B.addComponentsGetterSetter(pe,"fillPatternScale",["x","y"]);B.addGetterSetter(pe,"fillPatternScaleX",1,ye());B.addGetterSetter(pe,"fillPatternScaleY",1,ye());B.addComponentsGetterSetter(pe,"fillLinearGradientStartPoint",["x","y"]);B.addComponentsGetterSetter(pe,"strokeLinearGradientStartPoint",["x","y"]);B.addGetterSetter(pe,"fillLinearGradientStartPointX",0);B.addGetterSetter(pe,"strokeLinearGradientStartPointX",0);B.addGetterSetter(pe,"fillLinearGradientStartPointY",0);B.addGetterSetter(pe,"strokeLinearGradientStartPointY",0);B.addComponentsGetterSetter(pe,"fillLinearGradientEndPoint",["x","y"]);B.addComponentsGetterSetter(pe,"strokeLinearGradientEndPoint",["x","y"]);B.addGetterSetter(pe,"fillLinearGradientEndPointX",0);B.addGetterSetter(pe,"strokeLinearGradientEndPointX",0);B.addGetterSetter(pe,"fillLinearGradientEndPointY",0);B.addGetterSetter(pe,"strokeLinearGradientEndPointY",0);B.addComponentsGetterSetter(pe,"fillRadialGradientStartPoint",["x","y"]);B.addGetterSetter(pe,"fillRadialGradientStartPointX",0);B.addGetterSetter(pe,"fillRadialGradientStartPointY",0);B.addComponentsGetterSetter(pe,"fillRadialGradientEndPoint",["x","y"]);B.addGetterSetter(pe,"fillRadialGradientEndPointX",0);B.addGetterSetter(pe,"fillRadialGradientEndPointY",0);B.addGetterSetter(pe,"fillPatternRotation",0);B.addGetterSetter(pe,"fillRule",void 0,Rs());B.backCompat(pe,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const c6="beforeDraw",d6="draw",lx=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],u6=lx.length;let Ds=class extends xr{constructor(e){super(e),this.canvas=new Wn,this.hitCanvas=new Cu({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){be.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!be.prototype.moveUp.call(this))return!1;const t=this.getStage();return!t||!t.content?!1:(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(be.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(be.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return be.prototype.remove.call(this),e&&e.parentNode&&K._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&K.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e={...e},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),be.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){K.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){K.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,K.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,n=!1;for(;;){for(let a=0;a<u6;a++){const l=lx[a],c=this._getIntersection({x:e.x+l.x*t,y:e.y+l.y*t}),d=c.shape;if(d)return d;if(n=!!c.antialiased,!c.antialiased)break}if(n)t+=1;else return null}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,a=n[3];if(a===255){const l=K.getHitColorKey(n[0],n[1],n[2]),c=da[l];return c?{shape:c}:{antialiased:!0}}else if(a>0)return{antialiased:!0};return{}}drawScene(e,t,n){const a=this.getLayer(),l=e||a&&a.getCanvas();return this._fire(c6,{node:this}),this.clearBeforeDraw()&&l.getContext().clear(),xr.prototype.drawScene.call(this,l,t,n),this._fire(d6,{node:this}),this}drawHit(e,t){const n=this.getLayer(),a=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),xr.prototype.drawHit.call(this,a,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){K.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return K.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return K.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ds.prototype.nodeType="Layer";Nt(Ds);B.addGetterSetter(Ds,"imageSmoothingEnabled",!0);B.addGetterSetter(Ds,"clearBeforeDraw",!0);B.addGetterSetter(Ds,"hitGraphEnabled",!0,Yr());class ku extends Ds{constructor(e){super(e),this.listening(!1),K.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}ku.prototype.nodeType="FastLayer";Nt(ku);let Si=class extends xr{_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&K.throw("You may only add groups and shapes to groups.")}};Si.prototype.nodeType="Group";Nt(Si);const ad=function(){return _s.performance&&_s.performance.now?function(){return _s.performance.now()}:function(){return new Date().getTime()}}();class Ar{constructor(e,t){this.id=Ar.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:ad(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,n=t.length;for(let a=0;a<n;a++)if(t[a]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const t=Ar.animations,n=t.length;for(let a=0;a<n;a++)if(t[a].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=ad(),Ar._addAnimation(this),this}stop(){return Ar._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,n=this.animations,a=n.length;for(let l=0;l<a;l++)if(n[l].id===t){this.animations.splice(l,1);break}}static _runFrames(){const e={},t=this.animations;for(let n=0;n<t.length;n++){const a=t[n],l=a.layers,c=a.func;a._updateFrameObject(ad());const d=l.length;let u;if(c?u=c.call(a,a.frame)!==!1:u=!0,!!u)for(let f=0;f<d;f++){const p=l[f];p._id!==void 0&&(e[p._id]=p)}}for(const n in e)e.hasOwnProperty(n)&&e[n].batchDraw()}static _animationLoop(){const e=Ar;e.animations.length?(e._runFrames(),K.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,K.requestAnimFrame(this._animationLoop))}}Ar.animations=[];Ar.animIdCounter=0;Ar.animRunning=!1;const h6={node:1,duration:1,easing:1,onFinish:1,yoyo:1},f6=1,vp=2,wp=3,bp=["fill","stroke","shadowColor"];let p6=0;class m6{constructor(e,t,n,a,l,c,d){this.prop=e,this.propFunc=t,this.begin=a,this._pos=a,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=d,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=l-this.begin,this.pause()}fire(e){const t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=vp,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=wp,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;this.state===vp?this.setTime(e):this.state===wp&&this.setTime(this.duration-e)}pause(){this.state=f6,this.fire("onPause")}getTimer(){return new Date().getTime()}}class ft{constructor(e){const t=this,n=e.node,a=n._id,l=e.easing||ua.Linear,c=!!e.yoyo;let d,u;typeof e.duration>"u"?d=.3:e.duration===0?d=.001:d=e.duration,this.node=n,this._id=p6++;const f=n.getLayer()||(n instanceof _e.Stage?n.getLayers():null);f||K.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Ar(function(){t.tween.onEnterFrame()},f),this.tween=new m6(u,function(p){t._tweenFunc(p)},l,0,1,d*1e3,c),this._addListeners(),ft.attrs[a]||(ft.attrs[a]={}),ft.attrs[a][this._id]||(ft.attrs[a][this._id]={}),ft.tweens[a]||(ft.tweens[a]={});for(u in e)h6[u]===void 0&&this._addAttr(u,e[u]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){const n=this.node,a=n._id;let l,c,d,u,f;const p=ft.tweens[a][e];p&&delete ft.attrs[a][p][e];let m=n.getAttr(e);if(K._isArray(t))if(l=[],c=Math.max(t.length,m.length),e==="points"&&t.length!==m.length&&(t.length>m.length?(u=m,m=K._prepareArrayForTween(m,t,n.closed())):(d=t,t=K._prepareArrayForTween(t,m,n.closed()))),e.indexOf("fill")===0)for(let x=0;x<c;x++)if(x%2===0)l.push(t[x]-m[x]);else{const y=K.colorToRGBA(m[x]);f=K.colorToRGBA(t[x]),m[x]=y,l.push({r:f.r-y.r,g:f.g-y.g,b:f.b-y.b,a:f.a-y.a})}else for(let x=0;x<c;x++)l.push(t[x]-m[x]);else bp.indexOf(e)!==-1?(m=K.colorToRGBA(m),f=K.colorToRGBA(t),l={r:f.r-m.r,g:f.g-m.g,b:f.b-m.b,a:f.a-m.a}):l=t-m;ft.attrs[a][this._id][e]={start:m,diff:l,end:t,trueEnd:d,trueStart:u},ft.tweens[a][e]=this._id}_tweenFunc(e){const t=this.node,n=ft.attrs[t._id][this._id];let a,l,c,d,u,f,p,m;for(a in n){if(l=n[a],c=l.start,d=l.diff,m=l.end,K._isArray(c))if(u=[],p=Math.max(c.length,m.length),a.indexOf("fill")===0)for(f=0;f<p;f++)f%2===0?u.push((c[f]||0)+d[f]*e):u.push("rgba("+Math.round(c[f].r+d[f].r*e)+","+Math.round(c[f].g+d[f].g*e)+","+Math.round(c[f].b+d[f].b*e)+","+(c[f].a+d[f].a*e)+")");else for(f=0;f<p;f++)u.push((c[f]||0)+d[f]*e);else bp.indexOf(a)!==-1?u="rgba("+Math.round(c.r+d.r*e)+","+Math.round(c.g+d.g*e)+","+Math.round(c.b+d.b*e)+","+(c.a+d.a*e)+")":u=c+d*e;t.setAttr(a,u)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,t=ft.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,t=ft.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,t=this._id,n=ft.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const a in n)delete ft.tweens[e][a];delete ft.attrs[e][t],ft.tweens[e]&&(Object.keys(ft.tweens[e]).length===0&&delete ft.tweens[e],Object.keys(ft.attrs[e]).length===0&&delete ft.attrs[e])}}ft.attrs={};ft.tweens={};be.prototype.to=function(r){const e=r.onFinish;r.node=this,r.onFinish=function(){this.destroy(),e&&e()},new ft(r).play()};const ua={BackEaseIn(r,e,t,n){return t*(r/=n)*r*((1.70158+1)*r-1.70158)+e},BackEaseOut(r,e,t,n){return t*((r=r/n-1)*r*((1.70158+1)*r+1.70158)+1)+e},BackEaseInOut(r,e,t,n){let a=1.70158;return(r/=n/2)<1?t/2*(r*r*(((a*=1.525)+1)*r-a))+e:t/2*((r-=2)*r*(((a*=1.525)+1)*r+a)+2)+e},ElasticEaseIn(r,e,t,n,a,l){let c=0;return r===0?e:(r/=n)===1?e+t:(l||(l=n*.3),!a||a<Math.abs(t)?(a=t,c=l/4):c=l/(2*Math.PI)*Math.asin(t/a),-(a*Math.pow(2,10*(r-=1))*Math.sin((r*n-c)*(2*Math.PI)/l))+e)},ElasticEaseOut(r,e,t,n,a,l){let c=0;return r===0?e:(r/=n)===1?e+t:(l||(l=n*.3),!a||a<Math.abs(t)?(a=t,c=l/4):c=l/(2*Math.PI)*Math.asin(t/a),a*Math.pow(2,-10*r)*Math.sin((r*n-c)*(2*Math.PI)/l)+t+e)},ElasticEaseInOut(r,e,t,n,a,l){let c=0;return r===0?e:(r/=n/2)===2?e+t:(l||(l=n*(.3*1.5)),!a||a<Math.abs(t)?(a=t,c=l/4):c=l/(2*Math.PI)*Math.asin(t/a),r<1?-.5*(a*Math.pow(2,10*(r-=1))*Math.sin((r*n-c)*(2*Math.PI)/l))+e:a*Math.pow(2,-10*(r-=1))*Math.sin((r*n-c)*(2*Math.PI)/l)*.5+t+e)},BounceEaseOut(r,e,t,n){return(r/=n)<1/2.75?t*(7.5625*r*r)+e:r<2/2.75?t*(7.5625*(r-=1.5/2.75)*r+.75)+e:r<2.5/2.75?t*(7.5625*(r-=2.25/2.75)*r+.9375)+e:t*(7.5625*(r-=2.625/2.75)*r+.984375)+e},BounceEaseIn(r,e,t,n){return t-ua.BounceEaseOut(n-r,0,t,n)+e},BounceEaseInOut(r,e,t,n){return r<n/2?ua.BounceEaseIn(r*2,0,t,n)*.5+e:ua.BounceEaseOut(r*2-n,0,t,n)*.5+t*.5+e},EaseIn(r,e,t,n){return t*(r/=n)*r+e},EaseOut(r,e,t,n){return-t*(r/=n)*(r-2)+e},EaseInOut(r,e,t,n){return(r/=n/2)<1?t/2*r*r+e:-t/2*(--r*(r-2)-1)+e},StrongEaseIn(r,e,t,n){return t*(r/=n)*r*r*r*r+e},StrongEaseOut(r,e,t,n){return t*((r=r/n-1)*r*r*r*r+1)+e},StrongEaseInOut(r,e,t,n){return(r/=n/2)<1?t/2*r*r*r*r*r+e:t/2*((r-=2)*r*r*r*r+2)+e},Linear(r,e,t,n){return t*r/n+e}},Ts=K._assign(_e,{Util:K,Transform:mr,Node:be,Container:xr,Stage:Tl,stages:ca,Layer:Ds,FastLayer:ku,Group:Si,DD:st,Shape:pe,shapes:da,Animation:Ar,Tween:ft,Easings:ua,Context:Pl,Canvas:Su});class En extends pe{_sceneFunc(e){const t=_e.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,n),e.arc(0,0,this.innerRadius(),t,0,!n),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),n=this.clockwise(),a=_e.getAngle(n?360-this.angle():this.angle()),l=Math.cos(Math.min(a,Math.PI)),c=1,d=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),u=Math.sin(Math.min(a,Math.PI/2)),f=l*(l>0?e:t),p=c*t,m=d*(d>0?e:t),x=u*(u>0?t:e);return{x:f,y:n?-1*x:m,width:p-f,height:x-m}}}En.prototype._centroid=!0;En.prototype.className="Arc";En.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Nt(En);B.addGetterSetter(En,"innerRadius",0,ye());B.addGetterSetter(En,"outerRadius",0,ye());B.addGetterSetter(En,"angle",0,ye());B.addGetterSetter(En,"clockwise",!1,Yr());function Od(r,e,t,n,a,l,c){const d=Math.sqrt(Math.pow(t-r,2)+Math.pow(n-e,2)),u=Math.sqrt(Math.pow(a-t,2)+Math.pow(l-n,2)),f=c*d/(d+u),p=c*u/(d+u),m=t-f*(a-r),x=n-f*(l-e),y=t+p*(a-r),S=n+p*(l-e);return[m,x,y,S]}function _p(r,e){const t=r.length,n=[];for(let a=2;a<t-2;a+=2){const l=Od(r[a-2],r[a-1],r[a],r[a+1],r[a+2],r[a+3],e);isNaN(l[0])||(n.push(l[0]),n.push(l[1]),n.push(r[a]),n.push(r[a+1]),n.push(l[2]),n.push(l[3]))}return n}function g6(r){const e=[[r[0],r[2],r[4],r[6]],[r[1],r[3],r[5],r[7]]],t=[];for(const n of e){const a=-3*n[0]+9*n[1]-9*n[2]+3*n[3];if(a!==0){const l=6*n[0]-12*n[1]+6*n[2],c=-3*n[0]+3*n[1],d=l*l-4*a*c;if(d>=0){const u=Math.sqrt(d);t.push((-l+u)/(2*a)),t.push((-l-u)/(2*a))}}}return t.filter(n=>n>0&&n<1).flatMap(n=>e.map(a=>{const l=1-n;return l*l*l*a[0]+3*l*l*n*a[1]+3*l*n*n*a[2]+n*n*n*a[3]}))}let Pn=class extends pe{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const t=this.points(),n=t.length,a=this.tension(),l=this.closed(),c=this.bezier();if(!n)return;let d=0;if(e.beginPath(),e.moveTo(t[0],t[1]),a!==0&&n>4){const u=this.getTensionPoints(),f=u.length;for(d=l?0:4,l||e.quadraticCurveTo(u[0],u[1],u[2],u[3]);d<f-2;)e.bezierCurveTo(u[d++],u[d++],u[d++],u[d++],u[d++],u[d++]);l||e.quadraticCurveTo(u[f-2],u[f-1],t[n-2],t[n-1])}else if(c)for(d=2;d<n;)e.bezierCurveTo(t[d++],t[d++],t[d++],t[d++],t[d++],t[d++]);else for(d=2;d<n;d+=2)e.lineTo(t[d],t[d+1]);l?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():_p(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),t=e.length,n=this.tension(),a=Od(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),l=Od(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),c=_p(e,n);return[a[2],a[3]].concat(c).concat([l[0],l[1],e[t-2],e[t-1],l[2],l[3],a[0],a[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.bezier()?e=[e[0],e[1],...g6(this.points()),e[e.length-2],e[e.length-1]]:e=this.points();let t=e[0],n=e[0],a=e[1],l=e[1],c,d;for(let u=0;u<e.length/2;u++)c=e[u*2],d=e[u*2+1],t=Math.min(t,c),n=Math.max(n,c),a=Math.min(a,d),l=Math.max(l,d);return{x:t,y:a,width:n-t,height:l-a}}};Pn.prototype.className="Line";Pn.prototype._attrsAffectingSize=["points","bezier","tension"];Nt(Pn);B.addGetterSetter(Pn,"closed",!1);B.addGetterSetter(Pn,"bezier",!1);B.addGetterSetter(Pn,"tension",0,ye());B.addGetterSetter(Pn,"points",[],Rb());const x6=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],y6=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],v6=[[1],[1,1],[1,2,1],[1,3,3,1]],Sp=(r,e,t)=>{let n,a;const c=t/2;n=0;for(let d=0;d<20;d++)a=c*x6[20][d]+c,n+=y6[20][d]*w6(r,e,a);return c*n},Cp=(r,e,t)=>{t===void 0&&(t=1);const n=r[0]-2*r[1]+r[2],a=e[0]-2*e[1]+e[2],l=2*r[1]-2*r[0],c=2*e[1]-2*e[0],d=4*(n*n+a*a),u=4*(n*l+a*c),f=l*l+c*c;if(d===0)return t*Math.sqrt(Math.pow(r[2]-r[0],2)+Math.pow(e[2]-e[0],2));const p=u/(2*d),m=f/d,x=t+p,y=m-p*p,S=x*x+y>0?Math.sqrt(x*x+y):0,v=p*p+y>0?Math.sqrt(p*p+y):0,w=p+Math.sqrt(p*p+y)!==0?y*Math.log(Math.abs((x+S)/(p+v))):0;return Math.sqrt(d)/2*(x*S-p*v+w)};function w6(r,e,t){const n=Id(1,t,r),a=Id(1,t,e),l=n*n+a*a;return Math.sqrt(l)}const Id=(r,e,t)=>{const n=t.length-1;let a,l;if(n===0)return 0;if(r===0){l=0;for(let c=0;c<=n;c++)l+=v6[n][c]*Math.pow(1-e,n-c)*Math.pow(e,c)*t[c];return l}else{a=new Array(n);for(let c=0;c<n;c++)a[c]=n*(t[c+1]-t[c]);return Id(r-1,e,a)}},Np=(r,e,t)=>{let n=1,a=r/e,l=(r-t(a))/e,c=0;for(;n>.001;){const d=t(a+l),u=Math.abs(r-d)/e;if(u<n)n=u,a+=l;else{const f=t(a-l),p=Math.abs(r-f)/e;p<n?(n=p,a-=l):l/=2}if(c++,c>500)break}return a};class pt extends pe{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=pt.parsePathData(this.data()),this.pathLength=pt.getPathLength(this.dataArray)}_sceneFunc(e){const t=this.dataArray;e.beginPath();let n=!1;for(let a=0;a<t.length;a++){const l=t[a].command,c=t[a].points;switch(l){case"L":e.lineTo(c[0],c[1]);break;case"M":e.moveTo(c[0],c[1]);break;case"C":e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":e.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const d=c[0],u=c[1],f=c[2],p=c[3],m=c[4],x=c[5],y=c[6],S=c[7],v=f>p?f:p,w=f>p?1:f/p,C=f>p?p/f:1;e.translate(d,u),e.rotate(y),e.scale(w,C),e.arc(0,0,v,m,m+x,1-S),e.scale(1/w,1/C),e.rotate(-y),e.translate(-d,-u);break;case"z":n=!0,e.closePath();break}}!n&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(u){if(u.command==="A"){const f=u.points[4],p=u.points[5],m=u.points[4]+p;let x=Math.PI/180;if(Math.abs(f-m)<x&&(x=Math.abs(f-m)),p<0)for(let y=f-x;y>m;y-=x){const S=pt.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],y,0);e.push(S.x,S.y)}else for(let y=f+x;y<m;y+=x){const S=pt.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],y,0);e.push(S.x,S.y)}}else if(u.command==="C")for(let f=0;f<=1;f+=.01){const p=pt.getPointOnCubicBezier(f,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);e.push(p.x,p.y)}else e=e.concat(u.points)});let t=e[0],n=e[0],a=e[1],l=e[1],c,d;for(let u=0;u<e.length/2;u++)c=e[u*2],d=e[u*2+1],isNaN(c)||(t=Math.min(t,c),n=Math.max(n,c)),isNaN(d)||(a=Math.min(a,d),l=Math.max(l,d));return{x:t,y:a,width:n-t,height:l-a}}getLength(){return this.pathLength}getPointAtLength(e){return pt.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,n,a){return Math.sqrt((n-e)*(n-e)+(a-t)*(a-t))}static getPathLength(e){let t=0;for(let n=0;n<e.length;++n)t+=e[n].pathLength;return t}static getPointAtLengthOfDataArray(e,t){let n,a=0,l=t.length;if(!l)return null;for(;a<l&&e>t[a].pathLength;)e-=t[a].pathLength,++a;if(a===l)return n=t[a-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return t[a].command==="M"?(n=t[a].points.slice(0,2),{x:n[0],y:n[1]}):{x:t[a].start.x,y:t[a].start.y};const c=t[a],d=c.points;switch(c.command){case"L":return pt.getPointOnLine(e,c.start.x,c.start.y,d[0],d[1]);case"C":return pt.getPointOnCubicBezier(Np(e,pt.getPathLength(t),v=>Sp([c.start.x,d[0],d[2],d[4]],[c.start.y,d[1],d[3],d[5]],v)),c.start.x,c.start.y,d[0],d[1],d[2],d[3],d[4],d[5]);case"Q":return pt.getPointOnQuadraticBezier(Np(e,pt.getPathLength(t),v=>Cp([c.start.x,d[0],d[2]],[c.start.y,d[1],d[3]],v)),c.start.x,c.start.y,d[0],d[1],d[2],d[3]);case"A":const u=d[0],f=d[1],p=d[2],m=d[3],x=d[5],y=d[6];let S=d[4];return S+=x*e/c.pathLength,pt.getPointOnEllipticalArc(u,f,p,m,S,y)}return null}static getPointOnLine(e,t,n,a,l,c,d){c=c??t,d=d??n;const u=this.getLineLength(t,n,a,l);if(u<1e-10)return{x:t,y:n};if(a===t)return{x:c,y:d+(l>n?e:-e)};const f=(l-n)/(a-t),p=Math.sqrt(e*e/(1+f*f))*(a<t?-1:1),m=f*p;if(Math.abs(d-n-f*(c-t))<1e-10)return{x:c+p,y:d+m};const x=((c-t)*(a-t)+(d-n)*(l-n))/(u*u),y=t+x*(a-t),S=n+x*(l-n),v=this.getLineLength(c,d,y,S),w=Math.sqrt(e*e-v*v),C=Math.sqrt(w*w/(1+f*f))*(a<t?-1:1),_=f*C;return{x:y+C,y:S+_}}static getPointOnCubicBezier(e,t,n,a,l,c,d,u,f){function p(w){return w*w*w}function m(w){return 3*w*w*(1-w)}function x(w){return 3*w*(1-w)*(1-w)}function y(w){return(1-w)*(1-w)*(1-w)}const S=u*p(e)+c*m(e)+a*x(e)+t*y(e),v=f*p(e)+d*m(e)+l*x(e)+n*y(e);return{x:S,y:v}}static getPointOnQuadraticBezier(e,t,n,a,l,c,d){function u(y){return y*y}function f(y){return 2*y*(1-y)}function p(y){return(1-y)*(1-y)}const m=c*u(e)+a*f(e)+t*p(e),x=d*u(e)+l*f(e)+n*p(e);return{x:m,y:x}}static getPointOnEllipticalArc(e,t,n,a,l,c){const d=Math.cos(c),u=Math.sin(c),f={x:n*Math.cos(l),y:a*Math.sin(l)};return{x:e+(f.x*d-f.y*u),y:t+(f.x*u+f.y*d)}}static parsePathData(e){if(!e)return[];let t=e;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(let m=0;m<n.length;m++)t=t.replace(new RegExp(n[m],"g"),"|"+n[m]);const a=t.split("|"),l=[],c=[];let d=0,u=0;const f=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let p;for(let m=1;m<a.length;m++){let x=a[m],y=x.charAt(0);for(x=x.slice(1),c.length=0;p=f.exec(x);)c.push(p[0]);let S=[],v=y==="A"||y==="a"?0:-1;for(let w=0,C=c.length;w<C;w++){const _=c[w];if(_==="00"){S.push(0,0),v>=0&&(v+=2,v>=7&&(v-=7));continue}if(v>=0){if(v===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(_)){S.push(parseInt(_[0],10)),S.push(parseInt(_[1],10)),S.push(parseFloat(_.slice(2))),v+=3,v>=7&&(v-=7);continue}if(_==="11"||_==="10"||_==="01"){S.push(parseInt(_[0],10)),S.push(parseInt(_[1],10)),v+=2,v>=7&&(v-=7);continue}if(_==="0"||_==="1"){S.push(parseInt(_,10)),v+=1,v>=7&&(v-=7);continue}}else if(v===4){if(/^[01]\d+(?:\.\d+)?$/.test(_)){S.push(parseInt(_[0],10)),S.push(parseFloat(_.slice(1))),v+=2,v>=7&&(v-=7);continue}if(_==="0"||_==="1"){S.push(parseInt(_,10)),v+=1,v>=7&&(v-=7);continue}}const N=parseFloat(_);isNaN(N)?S.push(0):S.push(N),v+=1,v>=7&&(v-=7)}else{const N=parseFloat(_);isNaN(N)?S.push(0):S.push(N)}}for(;S.length>0&&!isNaN(S[0]);){let w="",C=[];const _=d,N=u;let E,R,O,I,G,F,Y,re,D,H;switch(y){case"l":d+=S.shift(),u+=S.shift(),w="L",C.push(d,u);break;case"L":d=S.shift(),u=S.shift(),C.push(d,u);break;case"m":const k=S.shift(),T=S.shift();if(d+=k,u+=T,w="M",l.length>2&&l[l.length-1].command==="z"){for(let Z=l.length-2;Z>=0;Z--)if(l[Z].command==="M"){d=l[Z].points[0]+k,u=l[Z].points[1]+T;break}}C.push(d,u),y="l";break;case"M":d=S.shift(),u=S.shift(),w="M",C.push(d,u),y="L";break;case"h":d+=S.shift(),w="L",C.push(d,u);break;case"H":d=S.shift(),w="L",C.push(d,u);break;case"v":u+=S.shift(),w="L",C.push(d,u);break;case"V":u=S.shift(),w="L",C.push(d,u);break;case"C":C.push(S.shift(),S.shift(),S.shift(),S.shift()),d=S.shift(),u=S.shift(),C.push(d,u);break;case"c":C.push(d+S.shift(),u+S.shift(),d+S.shift(),u+S.shift()),d+=S.shift(),u+=S.shift(),w="C",C.push(d,u);break;case"S":R=d,O=u,E=l[l.length-1],E.command==="C"&&(R=d+(d-E.points[2]),O=u+(u-E.points[3])),C.push(R,O,S.shift(),S.shift()),d=S.shift(),u=S.shift(),w="C",C.push(d,u);break;case"s":R=d,O=u,E=l[l.length-1],E.command==="C"&&(R=d+(d-E.points[2]),O=u+(u-E.points[3])),C.push(R,O,d+S.shift(),u+S.shift()),d+=S.shift(),u+=S.shift(),w="C",C.push(d,u);break;case"Q":C.push(S.shift(),S.shift()),d=S.shift(),u=S.shift(),C.push(d,u);break;case"q":C.push(d+S.shift(),u+S.shift()),d+=S.shift(),u+=S.shift(),w="Q",C.push(d,u);break;case"T":R=d,O=u,E=l[l.length-1],E.command==="Q"&&(R=d+(d-E.points[0]),O=u+(u-E.points[1])),d=S.shift(),u=S.shift(),w="Q",C.push(R,O,d,u);break;case"t":R=d,O=u,E=l[l.length-1],E.command==="Q"&&(R=d+(d-E.points[0]),O=u+(u-E.points[1])),d+=S.shift(),u+=S.shift(),w="Q",C.push(R,O,d,u);break;case"A":I=S.shift(),G=S.shift(),F=S.shift(),Y=S.shift(),re=S.shift(),D=d,H=u,d=S.shift(),u=S.shift(),w="A",C=this.convertEndpointToCenterParameterization(D,H,d,u,Y,re,I,G,F);break;case"a":I=S.shift(),G=S.shift(),F=S.shift(),Y=S.shift(),re=S.shift(),D=d,H=u,d+=S.shift(),u+=S.shift(),w="A",C=this.convertEndpointToCenterParameterization(D,H,d,u,Y,re,I,G,F);break}l.push({command:w||y,points:C,start:{x:_,y:N},pathLength:this.calcLength(_,N,w||y,C)})}(y==="z"||y==="Z")&&l.push({command:"z",points:[],start:void 0,pathLength:0})}return l}static calcLength(e,t,n,a){let l,c,d,u;const f=pt;switch(n){case"L":return f.getLineLength(e,t,a[0],a[1]);case"C":return Sp([e,a[0],a[2],a[4]],[t,a[1],a[3],a[5]],1);case"Q":return Cp([e,a[0],a[2]],[t,a[1],a[3]],1);case"A":l=0;const p=a[4],m=a[5],x=a[4]+m;let y=Math.PI/180;if(Math.abs(p-x)<y&&(y=Math.abs(p-x)),c=f.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],p,0),m<0)for(u=p-y;u>x;u-=y)d=f.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],u,0),l+=f.getLineLength(c.x,c.y,d.x,d.y),c=d;else for(u=p+y;u<x;u+=y)d=f.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],u,0),l+=f.getLineLength(c.x,c.y,d.x,d.y),c=d;return d=f.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],x,0),l+=f.getLineLength(c.x,c.y,d.x,d.y),l}return 0}static convertEndpointToCenterParameterization(e,t,n,a,l,c,d,u,f){const p=f*(Math.PI/180),m=Math.cos(p)*(e-n)/2+Math.sin(p)*(t-a)/2,x=-1*Math.sin(p)*(e-n)/2+Math.cos(p)*(t-a)/2,y=m*m/(d*d)+x*x/(u*u);y>1&&(d*=Math.sqrt(y),u*=Math.sqrt(y));let S=Math.sqrt((d*d*(u*u)-d*d*(x*x)-u*u*(m*m))/(d*d*(x*x)+u*u*(m*m)));l===c&&(S*=-1),isNaN(S)&&(S=0);const v=S*d*x/u,w=S*-u*m/d,C=(e+n)/2+Math.cos(p)*v-Math.sin(p)*w,_=(t+a)/2+Math.sin(p)*v+Math.cos(p)*w,N=function(Y){return Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1])},E=function(Y,re){return(Y[0]*re[0]+Y[1]*re[1])/(N(Y)*N(re))},R=function(Y,re){return(Y[0]*re[1]<Y[1]*re[0]?-1:1)*Math.acos(E(Y,re))},O=R([1,0],[(m-v)/d,(x-w)/u]),I=[(m-v)/d,(x-w)/u],G=[(-1*m-v)/d,(-1*x-w)/u];let F=R(I,G);return E(I,G)<=-1&&(F=Math.PI),E(I,G)>=1&&(F=0),c===0&&F>0&&(F=F-2*Math.PI),c===1&&F<0&&(F=F+2*Math.PI),[C,_,d,u,O,F,p,c]}}pt.prototype.className="Path";pt.prototype._attrsAffectingSize=["data"];Nt(pt);B.addGetterSetter(pt,"data");class Os extends Pn{_sceneFunc(e){super._sceneFunc(e);const t=Math.PI*2,n=this.points();let a=n;const l=this.tension()!==0&&n.length>4;l&&(a=this.getTensionPoints());const c=this.pointerLength(),d=n.length;let u,f;if(l){const x=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],n[d-2],n[d-1]],y=pt.calcLength(a[a.length-4],a[a.length-3],"C",x),S=pt.getPointOnQuadraticBezier(Math.min(1,1-c/y),x[0],x[1],x[2],x[3],x[4],x[5]);u=n[d-2]-S.x,f=n[d-1]-S.y}else u=n[d-2]-n[d-4],f=n[d-1]-n[d-3];const p=(Math.atan2(f,u)+t)%t,m=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[d-2],n[d-1]),e.rotate(p),e.moveTo(0,0),e.lineTo(-c,m/2),e.lineTo(-c,-m/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),l?(u=(a[0]+a[2])/2-n[0],f=(a[1]+a[3])/2-n[1]):(u=n[2]-n[0],f=n[3]-n[1]),e.rotate((Math.atan2(-f,-u)+t)%t),e.moveTo(0,0),e.lineTo(-c,m/2),e.lineTo(-c,-m/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x,y:e.y-t,width:e.width,height:e.height+t*2}}}Os.prototype.className="Arrow";Nt(Os);B.addGetterSetter(Os,"pointerLength",10,ye());B.addGetterSetter(Os,"pointerWidth",10,ye());B.addGetterSetter(Os,"pointerAtBeginning",!1);B.addGetterSetter(Os,"pointerAtEnding",!0);class ki extends pe{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}ki.prototype._centroid=!0;ki.prototype.className="Circle";ki.prototype._attrsAffectingSize=["radius"];Nt(ki);B.addGetterSetter(ki,"radius",0,ye());class ss extends pe{_sceneFunc(e){const t=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),t!==n&&e.scale(1,n/t),e.arc(0,0,t,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}ss.prototype.className="Ellipse";ss.prototype._centroid=!0;ss.prototype._attrsAffectingSize=["radiusX","radiusY"];Nt(ss);B.addComponentsGetterSetter(ss,"radius",["x","y"]);B.addGetterSetter(ss,"radiusX",0,ye());B.addGetterSetter(ss,"radiusY",0,ye());class yr extends pe{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",t=>{this._removeImageLoad(t.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),t=this.hasShadow();return e&&t?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),n=this.getHeight(),a=this.cornerRadius(),l=this.attrs.image;let c;if(l){const d=this.attrs.cropWidth,u=this.attrs.cropHeight;d&&u?c=[l,this.cropX(),this.cropY(),d,u,0,0,t,n]:c=[l,0,0,t,n]}(this.hasFill()||this.hasStroke()||a)&&(e.beginPath(),a?K.drawRoundedRectPath(e,t,n,a):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)),l&&(a&&e.clip(),e.drawImage.apply(e,c))}_hitFunc(e){const t=this.width(),n=this.height(),a=this.cornerRadius();e.beginPath(),a?K.drawRoundedRectPath(e,t,n,a):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t,n;return(n=(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width)!==null&&n!==void 0?n:0}getHeight(){var e,t,n;return(n=(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height)!==null&&n!==void 0?n:0}static fromURL(e,t,n=null){const a=K.createImageElement();a.onload=function(){const l=new yr({image:a});t(l)},a.onerror=n,a.crossOrigin="Anonymous",a.src=e}}yr.prototype.className="Image";yr.prototype._attrsAffectingSize=["image"];Nt(yr);B.addGetterSetter(yr,"cornerRadius",0,Al(4));B.addGetterSetter(yr,"image");B.addComponentsGetterSetter(yr,"crop",["x","y","width","height"]);B.addGetterSetter(yr,"cropX",0,ye());B.addGetterSetter(yr,"cropY",0,ye());B.addGetterSetter(yr,"cropWidth",0,ye());B.addGetterSetter(yr,"cropHeight",0,ye());const cx=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],b6="Change.konva",_6="none",Md="up",Ld="right",Fd="down",zd="left",S6=cx.length;class Eu extends Si{constructor(e){super(e),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let t=this,n;const a=function(){t._sync()};for(n=0;n<S6;n++)e.on(cx[n]+b6,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),t=this.getTag(),n,a,l,c,d,u,f;if(e&&t){switch(n=e.width(),a=e.height(),l=t.pointerDirection(),c=t.pointerWidth(),f=t.pointerHeight(),d=0,u=0,l){case Md:d=n/2,u=-1*f;break;case Ld:d=n+c,u=a/2;break;case Fd:d=n/2,u=a+f;break;case zd:d=-1*c,u=a/2;break}t.setAttrs({x:-1*d,y:-1*u,width:n,height:a}),e.setAttrs({x:-1*d,y:-1*u})}}}Eu.prototype.className="Label";Nt(Eu);class Is extends pe{_sceneFunc(e){const t=this.width(),n=this.height(),a=this.pointerDirection(),l=this.pointerWidth(),c=this.pointerHeight(),d=this.cornerRadius();let u=0,f=0,p=0,m=0;typeof d=="number"?u=f=p=m=Math.min(d,t/2,n/2):(u=Math.min(d[0]||0,t/2,n/2),f=Math.min(d[1]||0,t/2,n/2),m=Math.min(d[2]||0,t/2,n/2),p=Math.min(d[3]||0,t/2,n/2)),e.beginPath(),e.moveTo(u,0),a===Md&&(e.lineTo((t-l)/2,0),e.lineTo(t/2,-1*c),e.lineTo((t+l)/2,0)),e.lineTo(t-f,0),e.arc(t-f,f,f,Math.PI*3/2,0,!1),a===Ld&&(e.lineTo(t,(n-c)/2),e.lineTo(t+l,n/2),e.lineTo(t,(n+c)/2)),e.lineTo(t,n-m),e.arc(t-m,n-m,m,0,Math.PI/2,!1),a===Fd&&(e.lineTo((t+l)/2,n),e.lineTo(t/2,n+c),e.lineTo((t-l)/2,n)),e.lineTo(p,n),e.arc(p,n-p,p,Math.PI/2,Math.PI,!1),a===zd&&(e.lineTo(0,(n+c)/2),e.lineTo(-1*l,n/2),e.lineTo(0,(n-c)/2)),e.lineTo(0,u),e.arc(u,u,u,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,t=0,n=this.pointerWidth(),a=this.pointerHeight(),l=this.pointerDirection(),c=this.width(),d=this.height();return l===Md?(t-=a,d+=a):l===Fd?d+=a:l===zd?(e-=n*1.5,c+=n):l===Ld&&(c+=n*1.5),{x:e,y:t,width:c,height:d}}}Is.prototype.className="Tag";Nt(Is);B.addGetterSetter(Is,"pointerDirection",_6);B.addGetterSetter(Is,"pointerWidth",0,ye());B.addGetterSetter(Is,"pointerHeight",0,ye());B.addGetterSetter(Is,"cornerRadius",0,Al(4));let Ea=class extends pe{_sceneFunc(e){const t=this.cornerRadius(),n=this.width(),a=this.height();e.beginPath(),t?K.drawRoundedRectPath(e,n,a,t):e.rect(0,0,n,a),e.closePath(),e.fillStrokeShape(this)}};Ea.prototype.className="Rect";Nt(Ea);B.addGetterSetter(Ea,"cornerRadius",0,Al(4));class is extends pe{_sceneFunc(e){const t=this._getPoints(),n=this.radius(),a=this.sides(),l=this.cornerRadius();if(e.beginPath(),l)K.drawRoundedPolygonPath(e,t,a,n,l);else{e.moveTo(t[0].x,t[0].y);for(let c=1;c<t.length;c++)e.lineTo(t[c].x,t[c].y)}e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,n=[];for(let a=0;a<e;a++)n.push({x:t*Math.sin(a*2*Math.PI/e),y:-1*t*Math.cos(a*2*Math.PI/e)});return n}getSelfRect(){const e=this._getPoints();let t=e[0].x,n=e[0].x,a=e[0].y,l=e[0].y;return e.forEach(c=>{t=Math.min(t,c.x),n=Math.max(n,c.x),a=Math.min(a,c.y),l=Math.max(l,c.y)}),{x:t,y:a,width:n-t,height:l-a}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}is.prototype.className="RegularPolygon";is.prototype._centroid=!0;is.prototype._attrsAffectingSize=["radius"];Nt(is);B.addGetterSetter(is,"radius",0,ye());B.addGetterSetter(is,"sides",0,ye());B.addGetterSetter(is,"cornerRadius",0,Al(4));const jp=Math.PI*2;class Ms extends pe{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,jp,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),jp,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Ms.prototype.className="Ring";Ms.prototype._centroid=!0;Ms.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Nt(Ms);B.addGetterSetter(Ms,"innerRadius",0,ye());B.addGetterSetter(Ms,"outerRadius",0,ye());class un extends pe{constructor(e){super(e),this._updated=!0,this.anim=new Ar(()=>{const t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const t=this.animation(),n=this.frameIndex(),a=n*4,l=this.animations()[t],c=this.frameOffsets(),d=l[a+0],u=l[a+1],f=l[a+2],p=l[a+3],m=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,f,p),e.closePath(),e.fillStrokeShape(this)),m)if(c){const x=c[t],y=n*2;e.drawImage(m,d,u,f,p,x[y+0],x[y+1],f,p)}else e.drawImage(m,d,u,f,p,0,0,f,p)}_hitFunc(e){const t=this.animation(),n=this.frameIndex(),a=n*4,l=this.animations()[t],c=this.frameOffsets(),d=l[a+2],u=l[a+3];if(e.beginPath(),c){const f=c[t],p=n*2;e.rect(f[p+0],f[p+1],d,u)}else e.rect(0,0,d,u);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),t=this.animation(),n=this.animations(),a=n[t],l=a.length/4;e<l-1?this.frameIndex(e+1):this.frameIndex(0)}}un.prototype.className="Sprite";Nt(un);B.addGetterSetter(un,"animation");B.addGetterSetter(un,"animations");B.addGetterSetter(un,"frameOffsets");B.addGetterSetter(un,"image");B.addGetterSetter(un,"frameIndex",0,ye());B.addGetterSetter(un,"frameRate",17,ye());B.backCompat(un,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class as extends pe{_sceneFunc(e){const t=this.innerRadius(),n=this.outerRadius(),a=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(let l=1;l<a*2;l++){const c=l%2===0?n:t,d=c*Math.sin(l*Math.PI/a),u=-1*c*Math.cos(l*Math.PI/a);e.lineTo(d,u)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}as.prototype.className="Star";as.prototype._centroid=!0;as.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Nt(as);B.addGetterSetter(as,"numPoints",5,ye());B.addGetterSetter(as,"innerRadius",0,ye());B.addGetterSetter(as,"outerRadius",0,ye());function Un(r){return[...r].reduce((e,t,n,a)=>{if(new RegExp("\\p{Emoji}","u").test(t)){const l=a[n+1];l&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(l)?(e.push(t+l),a[n+1]=""):e.push(t)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(t+(a[n+1]||""))?e.push(t+a[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}const ei="auto",C6="center",dx="inherit",Zi="justify",N6="Change.konva",j6="2d",kp="-",ux="left",k6="text",E6="Text",P6="top",A6="bottom",Ep="middle",hx="normal",T6="px ",Fo=" ",R6="right",Pp="rtl",D6="word",O6="char",Ap="none",od="",fx=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],I6=fx.length;function M6(r){return r.split(",").map(e=>{e=e.trim();const t=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e}).join(", ")}let zo;function ld(){return zo||(zo=K.createCanvasElement().getContext(j6),zo)}function L6(r){r.fillText(this._partialText,this._partialTextX,this._partialTextY)}function F6(r){r.setAttr("miterLimit",2),r.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function z6(r){return r=r||{},!r.fillLinearGradientColorStops&&!r.fillRadialGradientColorStops&&!r.fillPatternImage&&(r.fill=r.fill||"black"),r}let mt=class extends pe{constructor(e){super(z6(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<I6;t++)this.on(fx[t]+N6,this._setTextData);this._setTextData()}_sceneFunc(e){var t,n;const a=this.textArr,l=a.length;if(!this.text())return;let c=this.padding(),d=this.fontSize(),u=this.lineHeight()*d,f=this.verticalAlign(),p=this.direction(),m=0,x=this.align(),y=this.getWidth(),S=this.letterSpacing(),v=this.charRenderFunc(),w=this.fill(),C=this.textDecoration(),_=this.underlineOffset(),N=C.indexOf("underline")!==-1,E=C.indexOf("line-through")!==-1,R;p=p===dx?e.direction:p;let O=u/2,I=Ep;if(!_e.legacyTextRendering){const G=this.measureSize("M");I="alphabetic";const F=(t=G.fontBoundingBoxAscent)!==null&&t!==void 0?t:G.actualBoundingBoxAscent,Y=(n=G.fontBoundingBoxDescent)!==null&&n!==void 0?n:G.actualBoundingBoxDescent;O=(F-Y)/2+u/2}for(p===Pp&&e.setAttr("direction",p),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",I),e.setAttr("textAlign",ux),f===Ep?m=(this.getHeight()-l*u-c*2)/2:f===A6&&(m=this.getHeight()-l*u-c*2),e.translate(c,m+c),R=0;R<l;R++){let G=0,F=0;const Y=a[R],re=Y.text,D=Y.width,H=Y.lastInParagraph;if(e.save(),x===R6?G+=y-D-c*2:x===C6&&(G+=(y-D-c*2)/2),N){e.save(),e.beginPath();const T=_??(_e.legacyTextRendering?Math.round(d/2):Math.round(d/4)),Z=G,W=O+F+T;e.moveTo(Z,W);const ee=x===Zi&&!H?y-c*2:D;e.lineTo(Z+Math.round(ee),W),e.lineWidth=d/15;const J=this._getLinearGradient();e.strokeStyle=J||w,e.stroke(),e.restore()}const k=G;if(p!==Pp&&(S!==0||x===Zi||v)){const T=re.split(" ").length-1,Z=Un(re);for(let W=0;W<Z.length;W++){const ee=Z[W];if(ee===" "&&!H&&x===Zi&&(G+=(y-c*2-D)/T),this._partialTextX=G,this._partialTextY=O+F,this._partialText=ee,v){e.save();const V=a.slice(0,R).reduce((X,Ce)=>X+Un(Ce.text).length,0),U=W+V;v({char:ee,index:U,x:G,y:O+F,lineIndex:R,column:W,isLastInLine:H,width:this.measureSize(ee).width,context:e})}e.fillStrokeShape(this),v&&e.restore(),G+=this.measureSize(ee).width+S}}else S!==0&&e.setAttr("letterSpacing",`${S}px`),this._partialTextX=G,this._partialTextY=O+F,this._partialText=re,e.fillStrokeShape(this);if(E){e.save(),e.beginPath();const T=_e.legacyTextRendering?0:-Math.round(d/4),Z=k;e.moveTo(Z,O+F+T);const W=x===Zi&&!H?y-c*2:D;e.lineTo(Z+Math.round(W),O+F+T),e.lineWidth=d/15;const ee=this._getLinearGradient();e.strokeStyle=ee||w,e.stroke(),e.restore()}e.restore(),l>1&&(O+=u)}}_hitFunc(e){const t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(e){const t=K._isString(e)?e:e==null?"":e+"";return this._setAttr(k6,t),this}getWidth(){return this.attrs.width===ei||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===ei||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return K.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n,a,l,c,d,u,f,p,m,x;let y=ld(),S=this.fontSize(),v;y.save(),y.font=this._getContextFont(),v=y.measureText(e),y.restore();const w=S/100;return{actualBoundingBoxAscent:(t=v.actualBoundingBoxAscent)!==null&&t!==void 0?t:71.58203125*w,actualBoundingBoxDescent:(n=v.actualBoundingBoxDescent)!==null&&n!==void 0?n:0,actualBoundingBoxLeft:(a=v.actualBoundingBoxLeft)!==null&&a!==void 0?a:-7.421875*w,actualBoundingBoxRight:(l=v.actualBoundingBoxRight)!==null&&l!==void 0?l:75.732421875*w,alphabeticBaseline:(c=v.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(d=v.emHeightAscent)!==null&&d!==void 0?d:100*w,emHeightDescent:(u=v.emHeightDescent)!==null&&u!==void 0?u:-20*w,fontBoundingBoxAscent:(f=v.fontBoundingBoxAscent)!==null&&f!==void 0?f:91*w,fontBoundingBoxDescent:(p=v.fontBoundingBoxDescent)!==null&&p!==void 0?p:21*w,hangingBaseline:(m=v.hangingBaseline)!==null&&m!==void 0?m:72.80000305175781*w,ideographicBaseline:(x=v.ideographicBaseline)!==null&&x!==void 0?x:-21*w,width:v.width,height:S}}_getContextFont(){return this.fontStyle()+Fo+this.fontVariant()+Fo+(this.fontSize()+T6)+M6(this.fontFamily())}_addTextLine(e){this.align()===Zi&&(e=e.trim());const n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),n=e.length;return ld().measureText(e).width+t*n}_setTextData(){let e=this.text().split(`
`),t=+this.fontSize(),n=0,a=this.lineHeight()*t,l=this.attrs.width,c=this.attrs.height,d=l!==ei&&l!==void 0,u=c!==ei&&c!==void 0,f=this.padding(),p=l-f*2,m=c-f*2,x=0,y=this.wrap(),S=y!==Ap,v=y!==O6&&S,w=this.ellipsis();this.textArr=[],ld().font=this._getContextFont();const C=w?this._getTextWidth(od):0;for(let _=0,N=e.length;_<N;++_){let E=e[_],R=this._getTextWidth(E);if(d&&R>p)for(;E.length>0;){let O=0,I=Un(E).length,G="",F=0;for(;O<I;){const Y=O+I>>>1,re=Un(E),D=re.slice(0,Y+1).join(""),H=this._getTextWidth(D);(w&&u&&x+a>m?H+C:H)<=p?(O=Y+1,G=D,F=H):I=Y}if(G){if(v){const D=Un(E),H=Un(G),k=D[H.length],T=k===Fo||k===kp;let Z;if(T&&F<=p)Z=H.length;else{const W=H.lastIndexOf(Fo),ee=H.lastIndexOf(kp);Z=Math.max(W,ee)+1}Z>0&&(O=Z,G=D.slice(0,O).join(""),F=this._getTextWidth(G))}if(G=G.trimRight(),this._addTextLine(G),n=Math.max(n,F),x+=a,this._shouldHandleEllipsis(x)){this._tryToAddEllipsisToLastLine();break}if(E=Un(E).slice(O).join("").trimLeft(),E.length>0&&(R=this._getTextWidth(E),R<=p)){this._addTextLine(E),x+=a,n=Math.max(n,R);break}}else break}else this._addTextLine(E),x+=a,n=Math.max(n,R),this._shouldHandleEllipsis(x)&&_<N-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),u&&x+a>m)break}this.textHeight=t,this.textWidth=n}_shouldHandleEllipsis(e){const t=+this.fontSize(),n=this.lineHeight()*t,a=this.attrs.height,l=a!==ei&&a!==void 0,c=this.padding(),d=a-c*2;return!(this.wrap()!==Ap)||l&&e+n>d}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==ei&&e!==void 0,n=this.padding(),a=e-n*2,l=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!l||(t&&(this._getTextWidth(c.text+od)<a||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+od))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,t=this.hasShadow();return e&&t?!0:super._useBufferCanvas()}};mt.prototype._fillFunc=L6;mt.prototype._strokeFunc=F6;mt.prototype.className=E6;mt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Nt(mt);B.overWriteSetter(mt,"width",Nu());B.overWriteSetter(mt,"height",Nu());B.addGetterSetter(mt,"direction",dx);B.addGetterSetter(mt,"fontFamily","Arial");B.addGetterSetter(mt,"fontSize",12,ye());B.addGetterSetter(mt,"fontStyle",hx);B.addGetterSetter(mt,"fontVariant",hx);B.addGetterSetter(mt,"padding",0,ye());B.addGetterSetter(mt,"align",ux);B.addGetterSetter(mt,"verticalAlign",P6);B.addGetterSetter(mt,"lineHeight",1,ye());B.addGetterSetter(mt,"wrap",D6);B.addGetterSetter(mt,"ellipsis",!1,Yr());B.addGetterSetter(mt,"letterSpacing",0,ye());B.addGetterSetter(mt,"text","",Rs());B.addGetterSetter(mt,"textDecoration","");B.addGetterSetter(mt,"underlineOffset",void 0,ye());B.addGetterSetter(mt,"charRenderFunc",void 0);const B6="",px="normal";function mx(r){r.fillText(this.partialText,0,0)}function gx(r){r.strokeText(this.partialText,0,0)}class Lt extends pe{constructor(e){super(e),this.dummyCanvas=K.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return pt.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const t=this.pathLength;return e>t?null:pt.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=pt.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const t=this.textDecoration(),n=this.fill(),a=this.fontSize(),l=this.glyphInfo,c=t.indexOf("underline")!==-1,d=t.indexOf("line-through")!==-1;c&&e.beginPath();for(let u=0;u<l.length;u++){e.save();const f=l[u].p0;e.translate(f.x,f.y),e.rotate(l[u].rotation),this.partialText=l[u].text,e.fillStrokeShape(this),c&&(u===0&&e.moveTo(0,a/2+1),e.lineTo(l[u].width,a/2+1)),e.restore()}if(c&&(e.strokeStyle=n,e.lineWidth=a/20,e.stroke()),d){e.beginPath();for(let u=0;u<l.length;u++){e.save();const f=l[u].p0;e.translate(f.x,f.y),e.rotate(l[u].rotation),u===0&&e.moveTo(0,0),e.lineTo(l[u].width,0),e.restore()}e.strokeStyle=n,e.lineWidth=a/20,e.stroke()}e.restore()}_hitFunc(e){e.beginPath();const t=this.glyphInfo;if(t.length>=1){const n=t[0].p0;e.moveTo(n.x,n.y)}for(let n=0;n<t.length;n++){const a=t[n].p1;e.lineTo(a.x,a.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return K.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return mt.prototype.setText.call(this,e)}_getContextFont(){return mt.prototype._getContextFont.call(this)}_getTextSize(e){const n=this.dummyCanvas.getContext("2d");n.save(),n.font=this._getContextFont();const a=n.measureText(e);return n.restore(),{width:a.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const e=Un(this.text()),t=[];let n=0;for(let m=0;m<e.length;m++)t.push({char:e[m],width:this._getTextSize(e[m]).width}),n+=t[m].width;const{height:a}=this._getTextSize(this.attrs.text);if(this.textWidth=n,this.textHeight=a,this.glyphInfo=[],!this.attrs.data)return null;const l=this.letterSpacing(),c=this.align(),d=this.kerningFunc(),u=Math.max(this.textWidth+((this.attrs.text||"").length-1)*l,0);let f=0;c==="center"&&(f=Math.max(0,this.pathLength/2-u/2)),c==="right"&&(f=Math.max(0,this.pathLength-u));let p=f;for(let m=0;m<t.length;m++){const x=this._getPointAtLength(p);if(!x)return;const y=t[m].char;let S=t[m].width+l;if(y===" "&&c==="justify"){const E=this.text().split(" ").length-1;S+=(this.pathLength-u)/E}const v=this._getPointAtLength(p+S);if(!v)return;const w=pt.getLineLength(x.x,x.y,v.x,v.y);let C=0;if(d)try{C=d(t[m-1].char,y)*this.fontSize()}catch{C=0}x.x+=C,v.x+=C,this.textWidth+=C;const _=pt.getPointOnLine(C+w/2,x.x,x.y,v.x,v.y),N=Math.atan2(v.y-x.y,v.x-x.x);this.glyphInfo.push({transposeX:_.x,transposeY:_.y,text:e[m],rotation:N,p0:x,p1:v,width:w}),p+=S}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(f){e.push(f.p0.x),e.push(f.p0.y),e.push(f.p1.x),e.push(f.p1.y)});let t=e[0]||0,n=e[0]||0,a=e[1]||0,l=e[1]||0,c,d;for(let f=0;f<e.length/2;f++)c=e[f*2],d=e[f*2+1],t=Math.min(t,c),n=Math.max(n,c),a=Math.min(a,d),l=Math.max(l,d);const u=this.fontSize();return{x:t-u/2,y:a-u/2,width:n-t+u,height:l-a+u}}destroy(){return K.releaseCanvas(this.dummyCanvas),super.destroy()}}Lt.prototype._fillFunc=mx;Lt.prototype._strokeFunc=gx;Lt.prototype._fillFuncHit=mx;Lt.prototype._strokeFuncHit=gx;Lt.prototype.className="TextPath";Lt.prototype._attrsAffectingSize=["text","fontSize","data"];Nt(Lt);B.addGetterSetter(Lt,"data");B.addGetterSetter(Lt,"fontFamily","Arial");B.addGetterSetter(Lt,"fontSize",12,ye());B.addGetterSetter(Lt,"fontStyle",px);B.addGetterSetter(Lt,"align","left");B.addGetterSetter(Lt,"letterSpacing",0,ye());B.addGetterSetter(Lt,"textBaseline","middle");B.addGetterSetter(Lt,"fontVariant",px);B.addGetterSetter(Lt,"text",B6);B.addGetterSetter(Lt,"textDecoration","");B.addGetterSetter(Lt,"kerningFunc",void 0);const xx="tr-konva",G6=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(r=>r+`.${xx}`).join(" "),Tp="nodesRect",H6=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],U6={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},W6="ontouchstart"in _e._global;function V6(r,e,t){if(r==="rotater")return t;e+=K.degToRad(U6[r]||0);const n=(K.radToDeg(e)%360+360)%360;return K._inRange(n,315+22.5,360)||K._inRange(n,0,22.5)?"ns-resize":K._inRange(n,45-22.5,45+22.5)?"nesw-resize":K._inRange(n,90-22.5,90+22.5)?"ew-resize":K._inRange(n,135-22.5,135+22.5)?"nwse-resize":K._inRange(n,180-22.5,180+22.5)?"ns-resize":K._inRange(n,225-22.5,225+22.5)?"nesw-resize":K._inRange(n,270-22.5,270+22.5)?"ew-resize":K._inRange(n,315-22.5,315+22.5)?"nwse-resize":(K.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}const al=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Y6(r){return{x:r.x+r.width/2*Math.cos(r.rotation)+r.height/2*Math.sin(-r.rotation),y:r.y+r.height/2*Math.cos(r.rotation)+r.width/2*Math.sin(r.rotation)}}function yx(r,e,t){const n=t.x+(r.x-t.x)*Math.cos(e)-(r.y-t.y)*Math.sin(e),a=t.y+(r.x-t.x)*Math.sin(e)+(r.y-t.y)*Math.cos(e);return{...r,rotation:r.rotation+e,x:n,y:a}}function $6(r,e){const t=Y6(r);return yx(r,e,t)}function X6(r,e,t){let n=e;for(let a=0;a<r.length;a++){const l=_e.getAngle(r[a]),c=Math.abs(l-e)%(Math.PI*2);Math.min(c,Math.PI*2-c)<t&&(n=l)}return n}let Bd=0;class Xe extends Si{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(G6,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return K.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return xx+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter(a=>a.isAncestorOf(this)?(K.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=t,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(a=>{const l=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(a._attrsAffectingSize.length){const c=a._attrsAffectingSize.map(d=>d+"Change."+this._getEventNamespace()).join(" ");a.on(c,l)}a.on(H6.map(c=>c+`.${this._getEventNamespace()}`).join(" "),l),a.on(`absoluteTransformChange.${this._getEventNamespace()}`,l),this._proxyDrag(a)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,n=>{t=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(n,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!t)return;const a=e.getAbsolutePosition(),l=a.x-t.x,c=a.y-t.y;this.nodes().forEach(d=>{if(d===e||d.isDragging())return;const u=d.getAbsolutePosition();d.setAbsolutePosition({x:u.x+l,y:u.y+c}),d.startDrag(n)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Tp),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Tp,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),n){const a=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=e.getAbsoluteScale(n),c=e.getAbsolutePosition(n),d=a.x*l.x-e.offsetX()*l.x,u=a.y*l.y-e.offsetY()*l.y,f=(_e.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),p={x:c.x+d*Math.cos(f)+u*Math.sin(-f),y:c.y+u*Math.cos(f)+d*Math.sin(f),width:a.width*l.x,height:a.height*l.y,rotation:f};return yx(p,-_e.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map(f=>{const p=f.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),m=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}],x=f.getAbsoluteTransform();m.forEach(function(y){const S=x.point(y);t.push(S)})});const n=new mr;n.rotate(-_e.getAngle(this.rotation()));let a=1/0,l=1/0,c=-1/0,d=-1/0;t.forEach(function(f){const p=n.point(f);a===void 0&&(a=c=p.x,l=d=p.y),a=Math.min(a,p.x),l=Math.min(l,p.y),c=Math.max(c,p.x),d=Math.max(d,p.y)}),n.invert();const u=n.point({x:a,y:l});return{x:u.x,y:u.y,width:c-a,height:d-l,rotation:_e.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),al.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const t=new Ea({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:W6?10:"auto"}),n=this;t.on("mousedown touchstart",function(a){n._handleMouseDown(a)}),t.on("dragstart",a=>{t.stopDrag(),a.cancelBubble=!0}),t.on("dragend",a=>{a.cancelBubble=!0}),t.on("mouseenter",()=>{const a=_e.getAngle(this.rotation()),l=this.rotateAnchorCursor(),c=V6(e,a,l);t.getStage().content&&(t.getStage().content.style.cursor=c),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){const e=new pe({name:"back",width:0,height:0,sceneFunc(t,n){const a=n.getParent(),l=a.padding(),c=n.width(),d=n.height();if(t.beginPath(),t.rect(-l,-l,c+l*2,d+l*2),a.rotateEnabled()&&a.rotateLineVisible()){const u=a.rotateAnchorAngle(),f=a.rotateAnchorOffset(),p=K.degToRad(u),m=Math.sin(p),x=-Math.cos(p),y=c/2,S=d/2;let v=1/0;x<0?v=Math.min(v,-S/x):x>0&&(v=Math.min(v,(d-S)/x)),m<0?v=Math.min(v,-y/m):m>0&&(v=Math.min(v,(c-y)/m));const w=y+m*v,C=S+x*v,_=K._sign(d),N=w+m*f*_,E=C+x*f*_;t.moveTo(w,C),t.lineTo(N,E)}t.fillStrokeShape(n)},hitFunc:(t,n)=>{if(!this.shouldOverdrawWholeArea())return;const a=this.padding();t.beginPath(),t.rect(-a,-a,n.width()+a*2,n.height()+a*2),t.fillStrokeShape(n)}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const t=this._getNodeRect(),n=t.width,a=t.height,l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2));this.sin=Math.abs(a/l),this.cos=Math.abs(n/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=e.target.getAbsolutePosition(),d=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:d.x-c.x,y:d.y-c.y},Bd++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(u=>{u._fire("transformstart",{evt:e.evt,target:u})})}_handleMouseMove(e){let t,n,a;const l=this.findOne("."+this._movingAnchorName),c=l.getStage();c.setPointersPositions(e);const d=c.getPointerPosition();let u={x:d.x-this._anchorDragOffset.x,y:d.y-this._anchorDragOffset.y};const f=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(u=this.anchorDragBoundFunc()(f,u,e)),l.setAbsolutePosition(u);const p=l.getAbsolutePosition();if(f.x===p.x&&f.y===p.y)return;if(this._movingAnchorName==="rotater"){const _=this._getNodeRect();t=l.x()-_.width/2,n=-l.y()+_.height/2;const N=_e.getAngle(this.rotateAnchorAngle());let E=Math.atan2(-n,t)+Math.PI/2-N;_.height<0&&(E-=Math.PI);const O=_e.getAngle(this.rotation())+E,I=_e.getAngle(this.rotationSnapTolerance()),F=X6(this.rotationSnaps(),O,I)-_.rotation,Y=$6(_,F);this._fitNodesInto(Y,e);return}const m=this.shiftBehavior();let x;m==="inverted"?x=this.keepRatio()&&!e.shiftKey:m==="none"?x=this.keepRatio():x=this.keepRatio()||e.shiftKey;let y=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(x){const _=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};a=Math.sqrt(Math.pow(_.x-l.x(),2)+Math.pow(_.y-l.y(),2));const N=this.findOne(".top-left").x()>_.x?-1:1,E=this.findOne(".top-left").y()>_.y?-1:1;t=a*this.cos*N,n=a*this.sin*E,this.findOne(".top-left").x(_.x-t),this.findOne(".top-left").y(_.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(x){const _=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};a=Math.sqrt(Math.pow(l.x()-_.x,2)+Math.pow(_.y-l.y(),2));const N=this.findOne(".top-right").x()<_.x?-1:1,E=this.findOne(".top-right").y()>_.y?-1:1;t=a*this.cos*N,n=a*this.sin*E,this.findOne(".top-right").x(_.x+t),this.findOne(".top-right").y(_.y-n)}var S=l.position();this.findOne(".top-left").y(S.y),this.findOne(".bottom-right").x(S.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(x){const _=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};a=Math.sqrt(Math.pow(_.x-l.x(),2)+Math.pow(l.y()-_.y,2));const N=_.x<l.x()?-1:1,E=l.y()<_.y?-1:1;t=a*this.cos*N,n=a*this.sin*E,l.x(_.x-t),l.y(_.y+n)}S=l.position(),this.findOne(".top-left").x(S.x),this.findOne(".bottom-right").y(S.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(x){const _=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};a=Math.sqrt(Math.pow(l.x()-_.x,2)+Math.pow(l.y()-_.y,2));const N=this.findOne(".bottom-right").x()<_.x?-1:1,E=this.findOne(".bottom-right").y()<_.y?-1:1;t=a*this.cos*N,n=a*this.sin*E,this.findOne(".bottom-right").x(_.x+t),this.findOne(".bottom-right").y(_.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(y=this.centeredScaling()||e.altKey,y){const _=this.findOne(".top-left"),N=this.findOne(".bottom-right"),E=_.x(),R=_.y(),O=this.getWidth()-N.x(),I=this.getHeight()-N.y();N.move({x:-E,y:-R}),_.move({x:O,y:I})}const v=this.findOne(".top-left").getAbsolutePosition();t=v.x,n=v.y;const w=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),C=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:n,width:w,height:C,rotation:_e.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();Bd--,this._fire("transformend",{evt:e,target:n}),(t=this.getLayer())===null||t===void 0||t.batchDraw(),n&&this._nodes.forEach(a=>{var l;a._fire("transformend",{evt:e,target:a}),(l=a.getLayer())===null||l===void 0||l.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,t){const n=this._getNodeRect(),a=1;if(K._inRange(e.width,-this.padding()*2-a,a)){this.update();return}if(K._inRange(e.height,-this.padding()*2-a,a)){this.update();return}const l=new mr;if(l.rotate(_e.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const x=l.point({x:-this.padding()*2,y:0});e.x+=x.x,e.y+=x.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const x=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const x=l.point({x:0,y:-this.padding()*2});e.x+=x.x,e.y+=x.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const x=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const x=this.boundBoxFunc()(n,e);x?e=x:K.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,d=new mr;d.translate(n.x,n.y),d.rotate(n.rotation),d.scale(n.width/c,n.height/c);const u=new mr,f=e.width/c,p=e.height/c;this.flipEnabled()===!1?(u.translate(e.x,e.y),u.rotate(e.rotation),u.translate(e.width<0?e.width:0,e.height<0?e.height:0),u.scale(Math.abs(f),Math.abs(p))):(u.translate(e.x,e.y),u.rotate(e.rotation),u.scale(f,p));const m=u.multiply(d.invert());this._nodes.forEach(x=>{var y;if(!x.getStage())return;const S=x.getParent().getAbsoluteTransform(),v=x.getTransform().copy();v.translate(x.offsetX(),x.offsetY());const w=new mr;w.multiply(S.copy().invert()).multiply(m).multiply(S).multiply(v);const C=w.decompose();x.setAttrs(C),(y=x.getLayer())===null||y===void 0||y.batchDraw()}),this.rotation(K._getRotation(e.rotation)),this._nodes.forEach(x=>{this._fire("transform",{evt:t,target:x}),x._fire("transform",{evt:t,target:x})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e;const t=this._getNodeRect();this.rotation(K._getRotation(t.rotation));const n=t.width,a=t.height,l=this.enabledAnchors(),c=this.resizeEnabled(),d=this.padding(),u=this.anchorSize(),f=this.find("._anchor");f.forEach(O=>{O.setAttrs({width:u,height:u,offsetX:u/2,offsetY:u/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:u/2+d,offsetY:u/2+d,visible:c&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:u/2+d,visible:c&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:u/2-d,offsetY:u/2+d,visible:c&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:a/2,offsetX:u/2+d,visible:c&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:a/2,offsetX:u/2-d,visible:c&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:a,offsetX:u/2+d,offsetY:u/2-d,visible:c&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:a,offsetY:u/2-d,visible:c&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:a,offsetX:u/2-d,offsetY:u/2-d,visible:c&&l.indexOf("bottom-right")>=0});const p=this.rotateAnchorAngle(),m=this.rotateAnchorOffset(),x=K.degToRad(p),y=Math.sin(x),S=-Math.cos(x),v=n/2,w=a/2;let C=1/0;S<0?C=Math.min(C,-w/S):S>0&&(C=Math.min(C,(a-w)/S)),y<0?C=Math.min(C,-v/y):y>0&&(C=Math.min(C,(n-v)/y));const _=v+y*C,N=w+S*C,E=K._sign(a);this._batchChangeChild(".rotater",{x:_+y*m*E,y:N+S*m*E-d*S,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:a,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(O=>O.draggable()),x:0,y:0});const R=this.anchorStyleFunc();R&&f.forEach(O=>{R(O)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Si.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return be.prototype.toObject.call(this)}clone(e){return be.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Xe.isTransforming=()=>Bd>0;function q6(r){return r instanceof Array||K.warn("enabledAnchors value should be an array"),r instanceof Array&&r.forEach(function(e){al.indexOf(e)===-1&&K.warn("Unknown anchor name: "+e+". Available names are: "+al.join(", "))}),r||[]}Xe.prototype.className="Transformer";Nt(Xe);B.addGetterSetter(Xe,"enabledAnchors",al,q6);B.addGetterSetter(Xe,"flipEnabled",!0,Yr());B.addGetterSetter(Xe,"resizeEnabled",!0);B.addGetterSetter(Xe,"anchorSize",10,ye());B.addGetterSetter(Xe,"rotateEnabled",!0);B.addGetterSetter(Xe,"rotateLineVisible",!0);B.addGetterSetter(Xe,"rotationSnaps",[]);B.addGetterSetter(Xe,"rotateAnchorOffset",50,ye());B.addGetterSetter(Xe,"rotateAnchorAngle",0,ye());B.addGetterSetter(Xe,"rotateAnchorCursor","crosshair");B.addGetterSetter(Xe,"rotationSnapTolerance",5,ye());B.addGetterSetter(Xe,"borderEnabled",!0);B.addGetterSetter(Xe,"anchorStroke","rgb(0, 161, 255)");B.addGetterSetter(Xe,"anchorStrokeWidth",1,ye());B.addGetterSetter(Xe,"anchorFill","white");B.addGetterSetter(Xe,"anchorCornerRadius",0,ye());B.addGetterSetter(Xe,"borderStroke","rgb(0, 161, 255)");B.addGetterSetter(Xe,"borderStrokeWidth",1,ye());B.addGetterSetter(Xe,"borderDash");B.addGetterSetter(Xe,"keepRatio",!0);B.addGetterSetter(Xe,"shiftBehavior","default");B.addGetterSetter(Xe,"centeredScaling",!1);B.addGetterSetter(Xe,"ignoreStroke",!1);B.addGetterSetter(Xe,"padding",0,ye());B.addGetterSetter(Xe,"nodes");B.addGetterSetter(Xe,"node");B.addGetterSetter(Xe,"boundBoxFunc");B.addGetterSetter(Xe,"anchorDragBoundFunc");B.addGetterSetter(Xe,"anchorStyleFunc");B.addGetterSetter(Xe,"shouldOverdrawWholeArea",!1);B.addGetterSetter(Xe,"useSingleNodeRotation",!0);B.backCompat(Xe,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class An extends pe{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,_e.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}An.prototype.className="Wedge";An.prototype._centroid=!0;An.prototype._attrsAffectingSize=["radius"];Nt(An);B.addGetterSetter(An,"radius",0,ye());B.addGetterSetter(An,"angle",0,ye());B.addGetterSetter(An,"clockwise",!1);B.backCompat(An,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Rp(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const K6=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Q6=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Z6(r,e){const t=r.data,n=r.width,a=r.height;let l,c,d,u,f,p,m,x,y,S,v,w,C,_,N,E,R,O,I,G;const F=e+e+1,Y=n-1,re=a-1,D=e+1,H=D*(D+1)/2,k=new Rp,T=K6[e],Z=Q6[e];let W=null,ee=k,J=null,V=null;for(let U=1;U<F;U++)ee=ee.next=new Rp,U===D&&(W=ee);ee.next=k,d=c=0;for(let U=0;U<a;U++){w=C=_=N=u=f=p=m=0,x=D*(E=t[c]),y=D*(R=t[c+1]),S=D*(O=t[c+2]),v=D*(I=t[c+3]),u+=H*E,f+=H*R,p+=H*O,m+=H*I,ee=k;for(let X=0;X<D;X++)ee.r=E,ee.g=R,ee.b=O,ee.a=I,ee=ee.next;for(let X=1;X<D;X++)l=c+((Y<X?Y:X)<<2),u+=(ee.r=E=t[l])*(G=D-X),f+=(ee.g=R=t[l+1])*G,p+=(ee.b=O=t[l+2])*G,m+=(ee.a=I=t[l+3])*G,w+=E,C+=R,_+=O,N+=I,ee=ee.next;J=k,V=W;for(let X=0;X<n;X++)t[c+3]=I=m*T>>Z,I!==0?(I=255/I,t[c]=(u*T>>Z)*I,t[c+1]=(f*T>>Z)*I,t[c+2]=(p*T>>Z)*I):t[c]=t[c+1]=t[c+2]=0,u-=x,f-=y,p-=S,m-=v,x-=J.r,y-=J.g,S-=J.b,v-=J.a,l=d+((l=X+e+1)<Y?l:Y)<<2,w+=J.r=t[l],C+=J.g=t[l+1],_+=J.b=t[l+2],N+=J.a=t[l+3],u+=w,f+=C,p+=_,m+=N,J=J.next,x+=E=V.r,y+=R=V.g,S+=O=V.b,v+=I=V.a,w-=E,C-=R,_-=O,N-=I,V=V.next,c+=4;d+=n}for(let U=0;U<n;U++){C=_=N=w=f=p=m=u=0,c=U<<2,x=D*(E=t[c]),y=D*(R=t[c+1]),S=D*(O=t[c+2]),v=D*(I=t[c+3]),u+=H*E,f+=H*R,p+=H*O,m+=H*I,ee=k;for(let Ce=0;Ce<D;Ce++)ee.r=E,ee.g=R,ee.b=O,ee.a=I,ee=ee.next;let X=n;for(let Ce=1;Ce<=e;Ce++)c=X+U<<2,u+=(ee.r=E=t[c])*(G=D-Ce),f+=(ee.g=R=t[c+1])*G,p+=(ee.b=O=t[c+2])*G,m+=(ee.a=I=t[c+3])*G,w+=E,C+=R,_+=O,N+=I,ee=ee.next,Ce<re&&(X+=n);c=U,J=k,V=W;for(let Ce=0;Ce<a;Ce++)l=c<<2,t[l+3]=I=m*T>>Z,I>0?(I=255/I,t[l]=(u*T>>Z)*I,t[l+1]=(f*T>>Z)*I,t[l+2]=(p*T>>Z)*I):t[l]=t[l+1]=t[l+2]=0,u-=x,f-=y,p-=S,m-=v,x-=J.r,y-=J.g,S-=J.b,v-=J.a,l=U+((l=Ce+D)<re?l:re)*n<<2,u+=w+=J.r=t[l],f+=C+=J.g=t[l+1],p+=_+=J.b=t[l+2],m+=N+=J.a=t[l+3],J=J.next,x+=E=V.r,y+=R=V.g,S+=O=V.b,v+=I=V.a,w-=E,C-=R,_-=O,N-=I,V=V.next,c+=n}}const J6=function(e){const t=Math.round(this.blurRadius());t>0&&Z6(e,t)};B.addGetterSetter(be,"blurRadius",0,ye(),B.afterSetFilter);const e8=function(r){const e=this.brightness()*255,t=r.data,n=t.length;for(let a=0;a<n;a+=4)t[a]+=e,t[a+1]+=e,t[a+2]+=e};B.addGetterSetter(be,"brightness",0,ye(),B.afterSetFilter);const t8=function(r){const e=this.brightness(),t=r.data,n=t.length;for(let a=0;a<n;a+=4)t[a]=Math.min(255,t[a]*e),t[a+1]=Math.min(255,t[a+1]*e),t[a+2]=Math.min(255,t[a+2]*e)},r8=function(r){const e=Math.pow((this.contrast()+100)/100,2),t=r.data,n=t.length;let a=150,l=150,c=150;for(let d=0;d<n;d+=4)a=t[d],l=t[d+1],c=t[d+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,c/=255,c-=.5,c*=e,c+=.5,c*=255,a=a<0?0:a>255?255:a,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,t[d]=a,t[d+1]=l,t[d+2]=c};B.addGetterSetter(be,"contrast",0,ye(),B.afterSetFilter);const n8=function(r){var e,t,n,a,l,c,d,u,f;const p=r.data,m=r.width,x=r.height,y=Math.min(1,Math.max(0,(t=(e=this.embossStrength)===null||e===void 0?void 0:e.call(this))!==null&&t!==void 0?t:.5)),S=Math.min(1,Math.max(0,(a=(n=this.embossWhiteLevel)===null||n===void 0?void 0:n.call(this))!==null&&a!==void 0?a:.5)),w=(d={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(l=this.embossDirection)===null||l===void 0?void 0:l.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&d!==void 0?d:315,C=!!((f=(u=this.embossBlend)===null||u===void 0?void 0:u.call(this))!==null&&f!==void 0&&f),_=y*10,N=S*255,E=w*Math.PI/180,R=Math.cos(E),O=Math.sin(E),I=128/1020*_,G=new Uint8ClampedArray(p),F=new Float32Array(m*x);for(let k=0,T=0;T<p.length;T+=4,k++)F[k]=.2126*G[T]+.7152*G[T+1]+.0722*G[T+2];const Y=[-1,0,1,-2,0,2,-1,0,1],re=[-1,-2,-1,0,0,0,1,2,1],D=[-m-1,-m,-m+1,-1,0,1,m-1,m,m+1],H=k=>k<0?0:k>255?255:k;for(let k=1;k<x-1;k++)for(let T=1;T<m-1;T++){const Z=k*m+T;let W=0,ee=0;W+=F[Z+D[0]]*Y[0],ee+=F[Z+D[0]]*re[0],W+=F[Z+D[1]]*Y[1],ee+=F[Z+D[1]]*re[1],W+=F[Z+D[2]]*Y[2],ee+=F[Z+D[2]]*re[2],W+=F[Z+D[3]]*Y[3],ee+=F[Z+D[3]]*re[3],W+=F[Z+D[5]]*Y[5],ee+=F[Z+D[5]]*re[5],W+=F[Z+D[6]]*Y[6],ee+=F[Z+D[6]]*re[6],W+=F[Z+D[7]]*Y[7],ee+=F[Z+D[7]]*re[7],W+=F[Z+D[8]]*Y[8],ee+=F[Z+D[8]]*re[8];const J=R*W+O*ee,V=H(N+J*I),U=Z*4;if(C){const X=V-N;p[U]=H(G[U]+X),p[U+1]=H(G[U+1]+X),p[U+2]=H(G[U+2]+X),p[U+3]=G[U+3]}else p[U]=p[U+1]=p[U+2]=V,p[U+3]=G[U+3]}for(let k=0;k<m;k++){let T=k*4,Z=((x-1)*m+k)*4;p[T]=G[T],p[T+1]=G[T+1],p[T+2]=G[T+2],p[T+3]=G[T+3],p[Z]=G[Z],p[Z+1]=G[Z+1],p[Z+2]=G[Z+2],p[Z+3]=G[Z+3]}for(let k=1;k<x-1;k++){let T=k*m*4,Z=(k*m+(m-1))*4;p[T]=G[T],p[T+1]=G[T+1],p[T+2]=G[T+2],p[T+3]=G[T+3],p[Z]=G[Z],p[Z+1]=G[Z+1],p[Z+2]=G[Z+2],p[Z+3]=G[Z+3]}return r};B.addGetterSetter(be,"embossStrength",.5,ye(),B.afterSetFilter);B.addGetterSetter(be,"embossWhiteLevel",.5,ye(),B.afterSetFilter);B.addGetterSetter(be,"embossDirection","top-left",void 0,B.afterSetFilter);B.addGetterSetter(be,"embossBlend",!1,void 0,B.afterSetFilter);function cd(r,e,t,n,a){const l=t-e,c=a-n;if(l===0)return n+c/2;if(c===0)return n;let d=(r-e)/l;return d=c*d+n,d}const s8=function(r){const e=r.data,t=e.length;let n=e[0],a=n,l,c=e[1],d=c,u,f=e[2],p=f,m;const x=this.enhance();if(x===0)return;for(let N=0;N<t;N+=4)l=e[N+0],l<n?n=l:l>a&&(a=l),u=e[N+1],u<c?c=u:u>d&&(d=u),m=e[N+2],m<f?f=m:m>p&&(p=m);a===n&&(a=255,n=0),d===c&&(d=255,c=0),p===f&&(p=255,f=0);let y,S,v,w,C,_;if(x>0)y=a+x*(255-a),S=n-x*(n-0),v=d+x*(255-d),w=c-x*(c-0),C=p+x*(255-p),_=f-x*(f-0);else{const N=(a+n)*.5;y=a+x*(a-N),S=n+x*(n-N);const E=(d+c)*.5;v=d+x*(d-E),w=c+x*(c-E);const R=(p+f)*.5;C=p+x*(p-R),_=f+x*(f-R)}for(let N=0;N<t;N+=4)e[N+0]=cd(e[N+0],n,a,S,y),e[N+1]=cd(e[N+1],c,d,w,v),e[N+2]=cd(e[N+2],f,p,_,C)};B.addGetterSetter(be,"enhance",0,ye(),B.afterSetFilter);const i8=function(r){const e=r.data,t=e.length;for(let n=0;n<t;n+=4){const a=.34*e[n]+.5*e[n+1]+.16*e[n+2];e[n]=a,e[n+1]=a,e[n+2]=a}};B.addGetterSetter(be,"hue",0,ye(),B.afterSetFilter);B.addGetterSetter(be,"saturation",0,ye(),B.afterSetFilter);B.addGetterSetter(be,"luminance",0,ye(),B.afterSetFilter);const a8=function(r){const e=r.data,t=e.length,n=1,a=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,d=n*a*Math.cos(l*Math.PI/180),u=n*a*Math.sin(l*Math.PI/180),f=.299*n+.701*d+.167*u,p=.587*n-.587*d+.33*u,m=.114*n-.114*d-.497*u,x=.299*n-.299*d-.328*u,y=.587*n+.413*d+.035*u,S=.114*n-.114*d+.293*u,v=.299*n-.3*d+1.25*u,w=.587*n-.586*d-1.05*u,C=.114*n+.886*d-.2*u;let _,N,E,R;for(let O=0;O<t;O+=4)_=e[O+0],N=e[O+1],E=e[O+2],R=e[O+3],e[O+0]=f*_+p*N+m*E+c,e[O+1]=x*_+y*N+S*E+c,e[O+2]=v*_+w*N+C*E+c,e[O+3]=R},o8=function(r){const e=r.data,t=e.length,n=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=n*a*Math.cos(l*Math.PI/180),d=n*a*Math.sin(l*Math.PI/180),u=.299*n+.701*c+.167*d,f=.587*n-.587*c+.33*d,p=.114*n-.114*c-.497*d,m=.299*n-.299*c-.328*d,x=.587*n+.413*c+.035*d,y=.114*n-.114*c+.293*d,S=.299*n-.3*c+1.25*d,v=.587*n-.586*c-1.05*d,w=.114*n+.886*c-.2*d;for(let C=0;C<t;C+=4){const _=e[C+0],N=e[C+1],E=e[C+2],R=e[C+3];e[C+0]=u*_+f*N+p*E,e[C+1]=m*_+x*N+y*E,e[C+2]=S*_+v*N+w*E,e[C+3]=R}};B.addGetterSetter(be,"hue",0,ye(),B.afterSetFilter);B.addGetterSetter(be,"saturation",0,ye(),B.afterSetFilter);B.addGetterSetter(be,"value",0,ye(),B.afterSetFilter);const l8=function(r){const e=r.data,t=e.length;for(let n=0;n<t;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]},c8=function(r,e,t){const n=r.data,a=e.data,l=r.width,c=r.height,d=t.polarCenterX||l/2,u=t.polarCenterY||c/2;let f=Math.sqrt(d*d+u*u),p=l-d,m=c-u;const x=Math.sqrt(p*p+m*m);f=x>f?x:f;const y=c,S=l,v=360/S*Math.PI/180;for(let w=0;w<S;w+=1){const C=Math.sin(w*v),_=Math.cos(w*v);for(let N=0;N<y;N+=1){p=Math.floor(d+f*N/y*_),m=Math.floor(u+f*N/y*C);let E=(m*l+p)*4;const R=n[E+0],O=n[E+1],I=n[E+2],G=n[E+3];E=(w+N*l)*4,a[E+0]=R,a[E+1]=O,a[E+2]=I,a[E+3]=G}}},d8=function(r,e,t){const n=r.data,a=e.data,l=r.width,c=r.height,d=t.polarCenterX||l/2,u=t.polarCenterY||c/2;let f=Math.sqrt(d*d+u*u),p=l-d,m=c-u;const x=Math.sqrt(p*p+m*m);f=x>f?x:f;const y=c,S=l,v=0;let w,C;for(p=0;p<l;p+=1)for(m=0;m<c;m+=1){const _=p-d,N=m-u,E=Math.sqrt(_*_+N*N)*y/f;let R=(Math.atan2(N,_)*180/Math.PI+360+v)%360;R=R*S/360,w=Math.floor(R),C=Math.floor(E);let O=(C*l+w)*4;const I=n[O+0],G=n[O+1],F=n[O+2],Y=n[O+3];O=(m*l+p)*4,a[O+0]=I,a[O+1]=G,a[O+2]=F,a[O+3]=Y}},u8=function(r){const e=r.width,t=r.height;let n,a,l,c,d,u,f,p,m,x,y=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),v=Math.floor(e*(S%360)/360);if(y<1)return;const w=K.createCanvasElement();w.width=e,w.height=t;const C=w.getContext("2d").getImageData(0,0,e,t);K.releaseCanvas(w),c8(r,C,{polarCenterX:e/2,polarCenterY:t/2});let _=e/Math.pow(2,y);for(;_<=8;)_=_*2,y-=1;_=Math.ceil(_);let N=_,E=0,R=N,O=1;for(v+_>e&&(E=N,R=0,O=-1),a=0;a<t;a+=1)for(n=E;n!==R;n+=O)l=Math.round(n+v)%e,m=(e*a+l)*4,d=C.data[m+0],u=C.data[m+1],f=C.data[m+2],p=C.data[m+3],x=(e*a+n)*4,C.data[x+0]=d,C.data[x+1]=u,C.data[x+2]=f,C.data[x+3]=p;for(a=0;a<t;a+=1)for(N=Math.floor(_),c=0;c<y;c+=1){for(n=0;n<N+1;n+=1)m=(e*a+n)*4,d=C.data[m+0],u=C.data[m+1],f=C.data[m+2],p=C.data[m+3],x=(e*a+N*2-n-1)*4,C.data[x+0]=d,C.data[x+1]=u,C.data[x+2]=f,C.data[x+3]=p;N*=2}d8(C,r,{})};B.addGetterSetter(be,"kaleidoscopePower",2,ye(),B.afterSetFilter);B.addGetterSetter(be,"kaleidoscopeAngle",0,ye(),B.afterSetFilter);function Bo(r,e,t){let n=(t*r.width+e)*4;const a=[];return a.push(r.data[n++],r.data[n++],r.data[n++],r.data[n++]),a}function Ji(r,e){return Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2))}function h8(r){const e=[0,0,0];for(let t=0;t<r.length;t++)e[0]+=r[t][0],e[1]+=r[t][1],e[2]+=r[t][2];return e[0]/=r.length,e[1]/=r.length,e[2]/=r.length,e}function f8(r,e){const t=Bo(r,0,0),n=Bo(r,r.width-1,0),a=Bo(r,0,r.height-1),l=Bo(r,r.width-1,r.height-1),c=e||10;if(Ji(t,n)<c&&Ji(n,l)<c&&Ji(l,a)<c&&Ji(a,t)<c){const d=h8([n,t,l,a]),u=[];for(let f=0;f<r.width*r.height;f++){const p=Ji(d,[r.data[f*4],r.data[f*4+1],r.data[f*4+2]]);u[f]=p<c?0:255}return u}}function p8(r,e){for(let t=0;t<r.width*r.height;t++)r.data[4*t+3]=e[t]}function m8(r,e,t){const n=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(n.length)),l=Math.floor(a/2),c=[];for(let d=0;d<t;d++)for(let u=0;u<e;u++){const f=d*e+u;let p=0;for(let m=0;m<a;m++)for(let x=0;x<a;x++){const y=d+m-l,S=u+x-l;if(y>=0&&y<t&&S>=0&&S<e){const v=y*e+S,w=n[m*a+x];p+=r[v]*w}}c[f]=p===255*8?255:0}return c}function g8(r,e,t){const n=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(n.length)),l=Math.floor(a/2),c=[];for(let d=0;d<t;d++)for(let u=0;u<e;u++){const f=d*e+u;let p=0;for(let m=0;m<a;m++)for(let x=0;x<a;x++){const y=d+m-l,S=u+x-l;if(y>=0&&y<t&&S>=0&&S<e){const v=y*e+S,w=n[m*a+x];p+=r[v]*w}}c[f]=p>=255*4?255:0}return c}function x8(r,e,t){const n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(n.length)),l=Math.floor(a/2),c=[];for(let d=0;d<t;d++)for(let u=0;u<e;u++){const f=d*e+u;let p=0;for(let m=0;m<a;m++)for(let x=0;x<a;x++){const y=d+m-l,S=u+x-l;if(y>=0&&y<t&&S>=0&&S<e){const v=y*e+S,w=n[m*a+x];p+=r[v]*w}}c[f]=p}return c}const y8=function(r){const e=this.threshold();let t=f8(r,e);return t&&(t=m8(t,r.width,r.height),t=g8(t,r.width,r.height),t=x8(t,r.width,r.height),p8(r,t)),r};B.addGetterSetter(be,"threshold",0,ye(),B.afterSetFilter);const v8=function(r){const e=this.noise()*255,t=r.data,n=t.length,a=e/2;for(let l=0;l<n;l+=4)t[l+0]+=a-2*a*Math.random(),t[l+1]+=a-2*a*Math.random(),t[l+2]+=a-2*a*Math.random()};B.addGetterSetter(be,"noise",.2,ye(),B.afterSetFilter);const w8=function(r){let e=Math.ceil(this.pixelSize()),t=r.width,n=r.height,a=Math.ceil(t/e),l=Math.ceil(n/e),c=r.data;if(e<=0){K.error("pixelSize value can not be <= 0");return}for(let d=0;d<a;d+=1)for(let u=0;u<l;u+=1){let f=0,p=0,m=0,x=0;const y=d*e,S=y+e,v=u*e,w=v+e;let C=0;for(let _=y;_<S;_+=1)if(!(_>=t))for(let N=v;N<w;N+=1){if(N>=n)continue;const E=(t*N+_)*4;f+=c[E+0],p+=c[E+1],m+=c[E+2],x+=c[E+3],C+=1}f=f/C,p=p/C,m=m/C,x=x/C;for(let _=y;_<S;_+=1)if(!(_>=t))for(let N=v;N<w;N+=1){if(N>=n)continue;const E=(t*N+_)*4;c[E+0]=f,c[E+1]=p,c[E+2]=m,c[E+3]=x}}};B.addGetterSetter(be,"pixelSize",8,ye(),B.afterSetFilter);const b8=function(r){const e=Math.round(this.levels()*254)+1,t=r.data,n=t.length,a=255/e;for(let l=0;l<n;l+=1)t[l]=Math.floor(t[l]/a)*a};B.addGetterSetter(be,"levels",.5,ye(),B.afterSetFilter);const _8=function(r){const e=r.data,t=e.length,n=this.red(),a=this.green(),l=this.blue();for(let c=0;c<t;c+=4){const d=(.34*e[c]+.5*e[c+1]+.16*e[c+2])/255;e[c]=d*n,e[c+1]=d*a,e[c+2]=d*l,e[c+3]=e[c+3]}};B.addGetterSetter(be,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});B.addGetterSetter(be,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});B.addGetterSetter(be,"blue",0,H0,B.afterSetFilter);const S8=function(r){const e=r.data,t=e.length,n=this.red(),a=this.green(),l=this.blue(),c=this.alpha();for(let d=0;d<t;d+=4){const u=1-c;e[d]=n*c+e[d]*u,e[d+1]=a*c+e[d+1]*u,e[d+2]=l*c+e[d+2]*u}};B.addGetterSetter(be,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});B.addGetterSetter(be,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});B.addGetterSetter(be,"blue",0,H0,B.afterSetFilter);B.addGetterSetter(be,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r});const C8=function(r){const e=r.data,t=e.length;for(let n=0;n<t;n+=4){const a=e[n+0],l=e[n+1],c=e[n+2];e[n+0]=Math.min(255,a*.393+l*.769+c*.189),e[n+1]=Math.min(255,a*.349+l*.686+c*.168),e[n+2]=Math.min(255,a*.272+l*.534+c*.131)}},N8=function(r){const t=r.data;for(let n=0;n<t.length;n+=4){const a=t[n],l=t[n+1],c=t[n+2];.2126*a+.7152*l+.0722*c>=128&&(t[n]=255-a,t[n+1]=255-l,t[n+2]=255-c)}return r},j8=function(r){const e=this.threshold()*255,t=r.data,n=t.length;for(let a=0;a<n;a+=1)t[a]=t[a]<e?0:255};B.addGetterSetter(be,"threshold",.5,ye(),B.afterSetFilter);Ts.Util._assign(Ts,{Arc:En,Arrow:Os,Circle:ki,Ellipse:ss,Image:yr,Label:Eu,Tag:Is,Line:Pn,Path:pt,Rect:Ea,RegularPolygon:is,Ring:Ms,Sprite:un,Star:as,Text:mt,TextPath:Lt,Transformer:Xe,Wedge:An,Filters:{Blur:J6,Brightness:t8,Brighten:e8,Contrast:r8,Emboss:n8,Enhance:s8,Grayscale:i8,HSL:a8,HSV:o8,Invert:l8,Kaleidoscope:u8,Mask:y8,Noise:v8,Pixelate:w8,Posterize:b8,RGB:_8,RGBA:S8,Sepia:C8,Solarize:N8,Threshold:j8}});var vx={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k8=function(e){var t={},n=A,a=Vo,l=Object.assign;function c(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),f=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),S=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),R=Symbol.iterator;function O(i){return i===null||typeof i!="object"?null:(i=R&&i[R]||i["@@iterator"],typeof i=="function"?i:null)}function I(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case p:return"Fragment";case f:return"Portal";case x:return"Profiler";case m:return"StrictMode";case w:return"Suspense";case C:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case S:return(i.displayName||"Context")+".Consumer";case y:return(i._context.displayName||"Context")+".Provider";case v:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case _:return o=i.displayName||null,o!==null?o:I(i.type)||"Memo";case N:o=i._payload,i=i._init;try{return I(i(o))}catch{}}return null}function G(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(o);case 8:return o===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function F(i){var o=i,h=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(h=o.return),i=o.return;while(i)}return o.tag===3?h:null}function Y(i){if(F(i)!==i)throw Error(c(188))}function re(i){var o=i.alternate;if(!o){if(o=F(i),o===null)throw Error(c(188));return o!==i?null:i}for(var h=i,g=o;;){var b=h.return;if(b===null)break;var j=b.alternate;if(j===null){if(g=b.return,g!==null){h=g;continue}break}if(b.child===j.child){for(j=b.child;j;){if(j===h)return Y(b),i;if(j===g)return Y(b),o;j=j.sibling}throw Error(c(188))}if(h.return!==g.return)h=b,g=j;else{for(var M=!1,q=b.child;q;){if(q===h){M=!0,h=b,g=j;break}if(q===g){M=!0,g=b,h=j;break}q=q.sibling}if(!M){for(q=j.child;q;){if(q===h){M=!0,h=j,g=b;break}if(q===g){M=!0,g=j,h=b;break}q=q.sibling}if(!M)throw Error(c(189))}}if(h.alternate!==g)throw Error(c(190))}if(h.tag!==3)throw Error(c(188));return h.stateNode.current===h?i:o}function D(i){return i=re(i),i!==null?H(i):null}function H(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=H(i);if(o!==null)return o;i=i.sibling}return null}function k(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){if(i.tag!==4){var o=k(i);if(o!==null)return o}i=i.sibling}return null}var T=Array.isArray,Z=e.getPublicInstance,W=e.getRootHostContext,ee=e.getChildHostContext,J=e.prepareForCommit,V=e.resetAfterCommit,U=e.createInstance,X=e.appendInitialChild,Ce=e.finalizeInitialChildren,Ne=e.prepareUpdate,we=e.shouldSetTextContent,ot=e.createTextInstance,gt=e.scheduleTimeout,Ge=e.cancelTimeout,Ue=e.noTimeout,lt=e.isPrimaryRenderer,We=e.supportsMutation,At=e.supportsPersistence,Je=e.supportsHydration,P=e.getInstanceFromNode,ce=e.preparePortalMount,ie=e.getCurrentEventPriority,z=e.detachDeletedInstance,L=e.supportsMicrotasks,$=e.scheduleMicrotask,ue=e.supportsTestSelectors,he=e.findFiberRoot,te=e.getBoundingRect,ge=e.getTextContent,je=e.isHiddenSubtree,ve=e.matchAccessibilityRole,Oe=e.setFocusIfFocusable,nt=e.setupIntersectionObserver,Ye=e.appendChild,Et=e.appendChildToContainer,vr=e.commitTextUpdate,$t=e.commitMount,hn=e.commitUpdate,De=e.insertBefore,Se=e.insertInContainerBefore,Re=e.removeChild,Me=e.removeChildFromContainer,qe=e.resetTextContent,Ft=e.hideInstance,me=e.hideTextInstance,Pe=e.unhideInstance,Fe=e.unhideTextInstance,Wt=e.clearContainer,jt=e.cloneInstance,Tu=e.createContainerChildSet,Ru=e.appendChildToContainerChildSet,kx=e.finalizeContainerChildren,Dl=e.replaceContainerChildren,Du=e.cloneHiddenInstance,Ou=e.cloneHiddenTextInstance,Ex=e.canHydrateInstance,Px=e.canHydrateTextInstance,Ax=e.canHydrateSuspenseInstance,Iu=e.isSuspenseInstancePending,Ol=e.isSuspenseInstanceFallback,Tx=e.getSuspenseInstanceFallbackErrorDetails,Rx=e.registerSuspenseInstanceRetry,Pa=e.getNextHydratableSibling,Dx=e.getFirstHydratableChild,Ox=e.getFirstHydratableChildWithinContainer,Ix=e.getFirstHydratableChildWithinSuspenseInstance,Mx=e.hydrateInstance,Lx=e.hydrateTextInstance,Fx=e.hydrateSuspenseInstance,zx=e.getNextHydratableInstanceAfterSuspenseInstance,Bx=e.commitHydratedContainer,Gx=e.commitHydratedSuspenseInstance,Hx=e.clearSuspenseBoundary,Ux=e.clearSuspenseBoundaryFromContainer,Wx=e.shouldDeleteUnhydratedTailInstances,Vx=e.didNotMatchHydratedContainerTextInstance,Yx=e.didNotMatchHydratedTextInstance,Il;function Ei(i){if(Il===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);Il=o&&o[1]||""}return`
`+Il+i}var Ml=!1;function Ll(i,o){if(!i||Ml)return"";Ml=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(xe){var g=xe}Reflect.construct(i,[],o)}else{try{o.call()}catch(xe){g=xe}i.call(o.prototype)}else{try{throw Error()}catch(xe){g=xe}i()}}catch(xe){if(xe&&g&&typeof xe.stack=="string"){for(var b=xe.stack.split(`
`),j=g.stack.split(`
`),M=b.length-1,q=j.length-1;1<=M&&0<=q&&b[M]!==j[q];)q--;for(;1<=M&&0<=q;M--,q--)if(b[M]!==j[q]){if(M!==1||q!==1)do if(M--,q--,0>q||b[M]!==j[q]){var se=`
`+b[M].replace(" at new "," at ");return i.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",i.displayName)),se}while(1<=M&&0<=q);break}}}finally{Ml=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?Ei(i):""}var $x=Object.prototype.hasOwnProperty,Fl=[],Fs=-1;function Tn(i){return{current:i}}function xt(i){0>Fs||(i.current=Fl[Fs],Fl[Fs]=null,Fs--)}function ht(i,o){Fs++,Fl[Fs]=i.current,i.current=o}var Rn={},Xt=Tn(Rn),nr=Tn(!1),ls=Rn;function zs(i,o){var h=i.type.contextTypes;if(!h)return Rn;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var b={},j;for(j in h)b[j]=o[j];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=b),b}function sr(i){return i=i.childContextTypes,i!=null}function Aa(){xt(nr),xt(Xt)}function Mu(i,o,h){if(Xt.current!==Rn)throw Error(c(168));ht(Xt,o),ht(nr,h)}function Lu(i,o,h){var g=i.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var b in g)if(!(b in o))throw Error(c(108,G(i)||"Unknown",b));return l({},h,g)}function Ta(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Rn,ls=Xt.current,ht(Xt,i),ht(nr,nr.current),!0}function Fu(i,o,h){var g=i.stateNode;if(!g)throw Error(c(169));h?(i=Lu(i,o,ls),g.__reactInternalMemoizedMergedChildContext=i,xt(nr),xt(Xt),ht(Xt,i)):xt(nr),ht(nr,h)}var Dr=Math.clz32?Math.clz32:Kx,Xx=Math.log,qx=Math.LN2;function Kx(i){return i>>>=0,i===0?32:31-(Xx(i)/qx|0)|0}var Ra=64,Da=4194304;function Pi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Oa(i,o){var h=i.pendingLanes;if(h===0)return 0;var g=0,b=i.suspendedLanes,j=i.pingedLanes,M=h&268435455;if(M!==0){var q=M&~b;q!==0?g=Pi(q):(j&=M,j!==0&&(g=Pi(j)))}else M=h&~b,M!==0?g=Pi(M):j!==0&&(g=Pi(j));if(g===0)return 0;if(o!==0&&o!==g&&!(o&b)&&(b=g&-g,j=o&-o,b>=j||b===16&&(j&4194240)!==0))return o;if(g&4&&(g|=h&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=g;0<o;)h=31-Dr(o),b=1<<h,g|=i[h],o&=~b;return g}function Qx(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zx(i,o){for(var h=i.suspendedLanes,g=i.pingedLanes,b=i.expirationTimes,j=i.pendingLanes;0<j;){var M=31-Dr(j),q=1<<M,se=b[M];se===-1?(!(q&h)||q&g)&&(b[M]=Qx(q,o)):se<=o&&(i.expiredLanes|=q),j&=~q}}function zl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function zu(){var i=Ra;return Ra<<=1,!(Ra&4194240)&&(Ra=64),i}function Bl(i){for(var o=[],h=0;31>h;h++)o.push(i);return o}function Ai(i,o,h){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Dr(o),i[o]=h}function Jx(i,o){var h=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<h;){var b=31-Dr(h),j=1<<b;o[b]=0,g[b]=-1,i[b]=-1,h&=~j}}function Gl(i,o){var h=i.entangledLanes|=o;for(i=i.entanglements;h;){var g=31-Dr(h),b=1<<g;b&o|i[g]&o&&(i[g]|=o),h&=~b}}var et=0;function Bu(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Hl=a.unstable_scheduleCallback,Gu=a.unstable_cancelCallback,e1=a.unstable_shouldYield,t1=a.unstable_requestPaint,zt=a.unstable_now,Ul=a.unstable_ImmediatePriority,r1=a.unstable_UserBlockingPriority,Wl=a.unstable_NormalPriority,n1=a.unstable_IdlePriority,Ia=null,$r=null;function s1(i){if($r&&typeof $r.onCommitFiberRoot=="function")try{$r.onCommitFiberRoot(Ia,i,void 0,(i.current.flags&128)===128)}catch{}}function i1(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Or=typeof Object.is=="function"?Object.is:i1,fn=null,Ma=!1,Vl=!1;function Hu(i){fn===null?fn=[i]:fn.push(i)}function a1(i){Ma=!0,Hu(i)}function Xr(){if(!Vl&&fn!==null){Vl=!0;var i=0,o=et;try{var h=fn;for(et=1;i<h.length;i++){var g=h[i];do g=g(!0);while(g!==null)}fn=null,Ma=!1}catch(b){throw fn!==null&&(fn=fn.slice(i+1)),Hl(Ul,Xr),b}finally{et=o,Vl=!1}}return null}var Bs=[],Gs=0,La=null,Fa=0,wr=[],br=0,cs=null,pn=1,mn="";function ds(i,o){Bs[Gs++]=Fa,Bs[Gs++]=La,La=i,Fa=o}function Uu(i,o,h){wr[br++]=pn,wr[br++]=mn,wr[br++]=cs,cs=i;var g=pn;i=mn;var b=32-Dr(g)-1;g&=~(1<<b),h+=1;var j=32-Dr(o)+b;if(30<j){var M=b-b%5;j=(g&(1<<M)-1).toString(32),g>>=M,b-=M,pn=1<<32-Dr(o)+b|h<<b|g,mn=j+i}else pn=1<<j|h<<b|g,mn=i}function Yl(i){i.return!==null&&(ds(i,1),Uu(i,1,0))}function $l(i){for(;i===La;)La=Bs[--Gs],Bs[Gs]=null,Fa=Bs[--Gs],Bs[Gs]=null;for(;i===cs;)cs=wr[--br],wr[br]=null,mn=wr[--br],wr[br]=null,pn=wr[--br],wr[br]=null}var hr=null,_r=null,wt=!1,Ti=!1,Ir=null;function Wu(i,o){var h=kr(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=i,o=i.deletions,o===null?(i.deletions=[h],i.flags|=16):o.push(h)}function Vu(i,o){switch(i.tag){case 5:return o=Ex(o,i.type,i.pendingProps),o!==null?(i.stateNode=o,hr=i,_r=Dx(o),!0):!1;case 6:return o=Px(o,i.pendingProps),o!==null?(i.stateNode=o,hr=i,_r=null,!0):!1;case 13:if(o=Ax(o),o!==null){var h=cs!==null?{id:pn,overflow:mn}:null;return i.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=kr(18,null,null,0),h.stateNode=o,h.return=i,i.child=h,hr=i,_r=null,!0}return!1;default:return!1}}function Xl(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ql(i){if(wt){var o=_r;if(o){var h=o;if(!Vu(i,o)){if(Xl(i))throw Error(c(418));o=Pa(h);var g=hr;o&&Vu(i,o)?Wu(g,h):(i.flags=i.flags&-4097|2,wt=!1,hr=i)}}else{if(Xl(i))throw Error(c(418));i.flags=i.flags&-4097|2,wt=!1,hr=i}}}function Yu(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;hr=i}function za(i){if(!Je||i!==hr)return!1;if(!wt)return Yu(i),wt=!0,!1;if(i.tag!==3&&(i.tag!==5||Wx(i.type)&&!we(i.type,i.memoizedProps))){var o=_r;if(o){if(Xl(i))throw $u(),Error(c(418));for(;o;)Wu(i,o),o=Pa(o)}}if(Yu(i),i.tag===13){if(!Je)throw Error(c(316));if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(c(317));_r=zx(i)}else _r=hr?Pa(i.stateNode):null;return!0}function $u(){for(var i=_r;i;)i=Pa(i)}function Hs(){Je&&(_r=hr=null,Ti=wt=!1)}function Kl(i){Ir===null?Ir=[i]:Ir.push(i)}var o1=d.ReactCurrentBatchConfig;function Ba(i,o){if(Or(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var h=Object.keys(i),g=Object.keys(o);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var b=h[g];if(!$x.call(o,b)||!Or(i[b],o[b]))return!1}return!0}function l1(i){switch(i.tag){case 5:return Ei(i.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 2:case 15:return i=Ll(i.type,!1),i;case 11:return i=Ll(i.type.render,!1),i;case 1:return i=Ll(i.type,!0),i;default:return""}}function Ri(i,o,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(c(309));var g=h.stateNode}if(!g)throw Error(c(147,i));var b=g,j=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===j?o.ref:(o=function(M){var q=b.refs;M===null?delete q[j]:q[j]=M},o._stringRef=j,o)}if(typeof i!="string")throw Error(c(284));if(!h._owner)throw Error(c(290,i))}return i}function Ga(i,o){throw i=Object.prototype.toString.call(o),Error(c(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Xu(i){var o=i._init;return o(i._payload)}function qu(i){function o(ne,Q){if(i){var ae=ne.deletions;ae===null?(ne.deletions=[Q],ne.flags|=16):ae.push(Q)}}function h(ne,Q){if(!i)return null;for(;Q!==null;)o(ne,Q),Q=Q.sibling;return null}function g(ne,Q){for(ne=new Map;Q!==null;)Q.key!==null?ne.set(Q.key,Q):ne.set(Q.index,Q),Q=Q.sibling;return ne}function b(ne,Q){return ne=zn(ne,Q),ne.index=0,ne.sibling=null,ne}function j(ne,Q,ae){return ne.index=ae,i?(ae=ne.alternate,ae!==null?(ae=ae.index,ae<Q?(ne.flags|=2,Q):ae):(ne.flags|=2,Q)):(ne.flags|=1048576,Q)}function M(ne){return i&&ne.alternate===null&&(ne.flags|=2),ne}function q(ne,Q,ae,Ee){return Q===null||Q.tag!==6?(Q=Vc(ae,ne.mode,Ee),Q.return=ne,Q):(Q=b(Q,ae),Q.return=ne,Q)}function se(ne,Q,ae,Ee){var Ie=ae.type;return Ie===p?Te(ne,Q,ae.props.children,Ee,ae.key):Q!==null&&(Q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===N&&Xu(Ie)===Q.type)?(Ee=b(Q,ae.props),Ee.ref=Ri(ne,Q,ae),Ee.return=ne,Ee):(Ee=vo(ae.type,ae.key,ae.props,null,ne.mode,Ee),Ee.ref=Ri(ne,Q,ae),Ee.return=ne,Ee)}function xe(ne,Q,ae,Ee){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ae.containerInfo||Q.stateNode.implementation!==ae.implementation?(Q=Yc(ae,ne.mode,Ee),Q.return=ne,Q):(Q=b(Q,ae.children||[]),Q.return=ne,Q)}function Te(ne,Q,ae,Ee,Ie){return Q===null||Q.tag!==7?(Q=xs(ae,ne.mode,Ee,Ie),Q.return=ne,Q):(Q=b(Q,ae),Q.return=ne,Q)}function ze(ne,Q,ae){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Vc(""+Q,ne.mode,ae),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case u:return ae=vo(Q.type,Q.key,Q.props,null,ne.mode,ae),ae.ref=Ri(ne,null,Q),ae.return=ne,ae;case f:return Q=Yc(Q,ne.mode,ae),Q.return=ne,Q;case N:var Ee=Q._init;return ze(ne,Ee(Q._payload),ae)}if(T(Q)||O(Q))return Q=xs(Q,ne.mode,ae,null),Q.return=ne,Q;Ga(ne,Q)}return null}function ke(ne,Q,ae,Ee){var Ie=Q!==null?Q.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return Ie!==null?null:q(ne,Q,""+ae,Ee);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case u:return ae.key===Ie?se(ne,Q,ae,Ee):null;case f:return ae.key===Ie?xe(ne,Q,ae,Ee):null;case N:return Ie=ae._init,ke(ne,Q,Ie(ae._payload),Ee)}if(T(ae)||O(ae))return Ie!==null?null:Te(ne,Q,ae,Ee,null);Ga(ne,ae)}return null}function yt(ne,Q,ae,Ee,Ie){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return ne=ne.get(ae)||null,q(Q,ne,""+Ee,Ie);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case u:return ne=ne.get(Ee.key===null?ae:Ee.key)||null,se(Q,ne,Ee,Ie);case f:return ne=ne.get(Ee.key===null?ae:Ee.key)||null,xe(Q,ne,Ee,Ie);case N:var Ve=Ee._init;return yt(ne,Q,ae,Ve(Ee._payload),Ie)}if(T(Ee)||O(Ee))return ne=ne.get(ae)||null,Te(Q,ne,Ee,Ie,null);Ga(Q,Ee)}return null}function ct(ne,Q,ae,Ee){for(var Ie=null,Ve=null,Be=Q,tt=Q=0,Ht=null;Be!==null&&tt<ae.length;tt++){Be.index>tt?(Ht=Be,Be=null):Ht=Be.sibling;var rt=ke(ne,Be,ae[tt],Ee);if(rt===null){Be===null&&(Be=Ht);break}i&&Be&&rt.alternate===null&&o(ne,Be),Q=j(rt,Q,tt),Ve===null?Ie=rt:Ve.sibling=rt,Ve=rt,Be=Ht}if(tt===ae.length)return h(ne,Be),wt&&ds(ne,tt),Ie;if(Be===null){for(;tt<ae.length;tt++)Be=ze(ne,ae[tt],Ee),Be!==null&&(Q=j(Be,Q,tt),Ve===null?Ie=Be:Ve.sibling=Be,Ve=Be);return wt&&ds(ne,tt),Ie}for(Be=g(ne,Be);tt<ae.length;tt++)Ht=yt(Be,ne,tt,ae[tt],Ee),Ht!==null&&(i&&Ht.alternate!==null&&Be.delete(Ht.key===null?tt:Ht.key),Q=j(Ht,Q,tt),Ve===null?Ie=Ht:Ve.sibling=Ht,Ve=Ht);return i&&Be.forEach(function(Bn){return o(ne,Bn)}),wt&&ds(ne,tt),Ie}function lr(ne,Q,ae,Ee){var Ie=O(ae);if(typeof Ie!="function")throw Error(c(150));if(ae=Ie.call(ae),ae==null)throw Error(c(151));for(var Ve=Ie=null,Be=Q,tt=Q=0,Ht=null,rt=ae.next();Be!==null&&!rt.done;tt++,rt=ae.next()){Be.index>tt?(Ht=Be,Be=null):Ht=Be.sibling;var Bn=ke(ne,Be,rt.value,Ee);if(Bn===null){Be===null&&(Be=Ht);break}i&&Be&&Bn.alternate===null&&o(ne,Be),Q=j(Bn,Q,tt),Ve===null?Ie=Bn:Ve.sibling=Bn,Ve=Bn,Be=Ht}if(rt.done)return h(ne,Be),wt&&ds(ne,tt),Ie;if(Be===null){for(;!rt.done;tt++,rt=ae.next())rt=ze(ne,rt.value,Ee),rt!==null&&(Q=j(rt,Q,tt),Ve===null?Ie=rt:Ve.sibling=rt,Ve=rt);return wt&&ds(ne,tt),Ie}for(Be=g(ne,Be);!rt.done;tt++,rt=ae.next())rt=yt(Be,ne,tt,rt.value,Ee),rt!==null&&(i&&rt.alternate!==null&&Be.delete(rt.key===null?tt:rt.key),Q=j(rt,Q,tt),Ve===null?Ie=rt:Ve.sibling=rt,Ve=rt);return i&&Be.forEach(function(F1){return o(ne,F1)}),wt&&ds(ne,tt),Ie}function vn(ne,Q,ae,Ee){if(typeof ae=="object"&&ae!==null&&ae.type===p&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case u:e:{for(var Ie=ae.key,Ve=Q;Ve!==null;){if(Ve.key===Ie){if(Ie=ae.type,Ie===p){if(Ve.tag===7){h(ne,Ve.sibling),Q=b(Ve,ae.props.children),Q.return=ne,ne=Q;break e}}else if(Ve.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===N&&Xu(Ie)===Ve.type){h(ne,Ve.sibling),Q=b(Ve,ae.props),Q.ref=Ri(ne,Ve,ae),Q.return=ne,ne=Q;break e}h(ne,Ve);break}else o(ne,Ve);Ve=Ve.sibling}ae.type===p?(Q=xs(ae.props.children,ne.mode,Ee,ae.key),Q.return=ne,ne=Q):(Ee=vo(ae.type,ae.key,ae.props,null,ne.mode,Ee),Ee.ref=Ri(ne,Q,ae),Ee.return=ne,ne=Ee)}return M(ne);case f:e:{for(Ve=ae.key;Q!==null;){if(Q.key===Ve)if(Q.tag===4&&Q.stateNode.containerInfo===ae.containerInfo&&Q.stateNode.implementation===ae.implementation){h(ne,Q.sibling),Q=b(Q,ae.children||[]),Q.return=ne,ne=Q;break e}else{h(ne,Q);break}else o(ne,Q);Q=Q.sibling}Q=Yc(ae,ne.mode,Ee),Q.return=ne,ne=Q}return M(ne);case N:return Ve=ae._init,vn(ne,Q,Ve(ae._payload),Ee)}if(T(ae))return ct(ne,Q,ae,Ee);if(O(ae))return lr(ne,Q,ae,Ee);Ga(ne,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,Q!==null&&Q.tag===6?(h(ne,Q.sibling),Q=b(Q,ae),Q.return=ne,ne=Q):(h(ne,Q),Q=Vc(ae,ne.mode,Ee),Q.return=ne,ne=Q),M(ne)):h(ne,Q)}return vn}var Us=qu(!0),Ku=qu(!1),Ha=Tn(null),Ua=null,Ws=null,Ql=null;function Zl(){Ql=Ws=Ua=null}function Qu(i,o,h){lt?(ht(Ha,o._currentValue),o._currentValue=h):(ht(Ha,o._currentValue2),o._currentValue2=h)}function Jl(i){var o=Ha.current;xt(Ha),lt?i._currentValue=o:i._currentValue2=o}function ec(i,o,h){for(;i!==null;){var g=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),i===h)break;i=i.return}}function Vs(i,o){Ua=i,Ql=Ws=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(ir=!0),i.firstContext=null)}function Sr(i){var o=lt?i._currentValue:i._currentValue2;if(Ql!==i)if(i={context:i,memoizedValue:o,next:null},Ws===null){if(Ua===null)throw Error(c(308));Ws=i,Ua.dependencies={lanes:0,firstContext:i}}else Ws=Ws.next=i;return o}var us=null;function tc(i){us===null?us=[i]:us.push(i)}function Zu(i,o,h,g){var b=o.interleaved;return b===null?(h.next=h,tc(o)):(h.next=b.next,b.next=h),o.interleaved=h,qr(i,g)}function qr(i,o){i.lanes|=o;var h=i.alternate;for(h!==null&&(h.lanes|=o),h=i,i=i.return;i!==null;)i.childLanes|=o,h=i.alternate,h!==null&&(h.childLanes|=o),h=i,i=i.return;return h.tag===3?h.stateNode:null}var Dn=!1;function rc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ju(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function gn(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function On(i,o,h){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,$e&2){var b=g.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),g.pending=o,qr(i,h)}return b=g.interleaved,b===null?(o.next=o,tc(g)):(o.next=b.next,b.next=o),g.interleaved=o,qr(i,h)}function Wa(i,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var g=o.lanes;g&=i.pendingLanes,h|=g,o.lanes=h,Gl(i,h)}}function eh(i,o){var h=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var b=null,j=null;if(h=h.firstBaseUpdate,h!==null){do{var M={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};j===null?b=j=M:j=j.next=M,h=h.next}while(h!==null);j===null?b=j=o:j=j.next=o}else b=j=o;h={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:j,shared:g.shared,effects:g.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=o:i.next=o,h.lastBaseUpdate=o}function Va(i,o,h,g){var b=i.updateQueue;Dn=!1;var j=b.firstBaseUpdate,M=b.lastBaseUpdate,q=b.shared.pending;if(q!==null){b.shared.pending=null;var se=q,xe=se.next;se.next=null,M===null?j=xe:M.next=xe,M=se;var Te=i.alternate;Te!==null&&(Te=Te.updateQueue,q=Te.lastBaseUpdate,q!==M&&(q===null?Te.firstBaseUpdate=xe:q.next=xe,Te.lastBaseUpdate=se))}if(j!==null){var ze=b.baseState;M=0,Te=xe=se=null,q=j;do{var ke=q.lane,yt=q.eventTime;if((g&ke)===ke){Te!==null&&(Te=Te.next={eventTime:yt,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var ct=i,lr=q;switch(ke=o,yt=h,lr.tag){case 1:if(ct=lr.payload,typeof ct=="function"){ze=ct.call(yt,ze,ke);break e}ze=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=lr.payload,ke=typeof ct=="function"?ct.call(yt,ze,ke):ct,ke==null)break e;ze=l({},ze,ke);break e;case 2:Dn=!0}}q.callback!==null&&q.lane!==0&&(i.flags|=64,ke=b.effects,ke===null?b.effects=[q]:ke.push(q))}else yt={eventTime:yt,lane:ke,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Te===null?(xe=Te=yt,se=ze):Te=Te.next=yt,M|=ke;if(q=q.next,q===null){if(q=b.shared.pending,q===null)break;ke=q,q=ke.next,ke.next=null,b.lastBaseUpdate=ke,b.shared.pending=null}}while(!0);if(Te===null&&(se=ze),b.baseState=se,b.firstBaseUpdate=xe,b.lastBaseUpdate=Te,o=b.shared.interleaved,o!==null){b=o;do M|=b.lane,b=b.next;while(b!==o)}else j===null&&(b.shared.lanes=0);fs|=M,i.lanes=M,i.memoizedState=ze}}function th(i,o,h){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var g=i[o],b=g.callback;if(b!==null){if(g.callback=null,g=h,typeof b!="function")throw Error(c(191,b));b.call(g)}}}var Di={},Cr=Tn(Di),Oi=Tn(Di),Ys=Tn(Di);function Kr(i){if(i===Di)throw Error(c(174));return i}function nc(i,o){ht(Ys,o),ht(Oi,i),ht(Cr,Di),i=W(o),xt(Cr),ht(Cr,i)}function $s(){xt(Cr),xt(Oi),xt(Ys)}function rh(i){var o=Kr(Ys.current),h=Kr(Cr.current);o=ee(h,i.type,o),h!==o&&(ht(Oi,i),ht(Cr,o))}function sc(i){Oi.current===i&&(xt(Cr),xt(Oi))}var St=Tn(0);function Ya(i){for(var o=i;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Iu(h)||Ol(h)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ic=[];function ac(){for(var i=0;i<ic.length;i++){var o=ic[i];lt?o._workInProgressVersionPrimary=null:o._workInProgressVersionSecondary=null}ic.length=0}var $a=d.ReactCurrentDispatcher,oc=d.ReactCurrentBatchConfig,hs=0,Ct=null,Ot=null,Bt=null,Xa=!1,Ii=!1,Mi=0,c1=0;function qt(){throw Error(c(321))}function lc(i,o){if(o===null)return!1;for(var h=0;h<o.length&&h<i.length;h++)if(!Or(i[h],o[h]))return!1;return!0}function cc(i,o,h,g,b,j){if(hs=j,Ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$a.current=i===null||i.memoizedState===null?f1:p1,i=h(g,b),Ii){j=0;do{if(Ii=!1,Mi=0,25<=j)throw Error(c(301));j+=1,Bt=Ot=null,o.updateQueue=null,$a.current=m1,i=h(g,b)}while(Ii)}if($a.current=Qa,o=Ot!==null&&Ot.next!==null,hs=0,Bt=Ot=Ct=null,Xa=!1,o)throw Error(c(300));return i}function dc(){var i=Mi!==0;return Mi=0,i}function Qr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Ct.memoizedState=Bt=i:Bt=Bt.next=i,Bt}function Nr(){if(Ot===null){var i=Ct.alternate;i=i!==null?i.memoizedState:null}else i=Ot.next;var o=Bt===null?Ct.memoizedState:Bt.next;if(o!==null)Bt=o,Ot=i;else{if(i===null)throw Error(c(310));Ot=i,i={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Bt===null?Ct.memoizedState=Bt=i:Bt=Bt.next=i}return Bt}function Li(i,o){return typeof o=="function"?o(i):o}function uc(i){var o=Nr(),h=o.queue;if(h===null)throw Error(c(311));h.lastRenderedReducer=i;var g=Ot,b=g.baseQueue,j=h.pending;if(j!==null){if(b!==null){var M=b.next;b.next=j.next,j.next=M}g.baseQueue=b=j,h.pending=null}if(b!==null){j=b.next,g=g.baseState;var q=M=null,se=null,xe=j;do{var Te=xe.lane;if((hs&Te)===Te)se!==null&&(se=se.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),g=xe.hasEagerState?xe.eagerState:i(g,xe.action);else{var ze={lane:Te,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};se===null?(q=se=ze,M=g):se=se.next=ze,Ct.lanes|=Te,fs|=Te}xe=xe.next}while(xe!==null&&xe!==j);se===null?M=g:se.next=q,Or(g,o.memoizedState)||(ir=!0),o.memoizedState=g,o.baseState=M,o.baseQueue=se,h.lastRenderedState=g}if(i=h.interleaved,i!==null){b=i;do j=b.lane,Ct.lanes|=j,fs|=j,b=b.next;while(b!==i)}else b===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function hc(i){var o=Nr(),h=o.queue;if(h===null)throw Error(c(311));h.lastRenderedReducer=i;var g=h.dispatch,b=h.pending,j=o.memoizedState;if(b!==null){h.pending=null;var M=b=b.next;do j=i(j,M.action),M=M.next;while(M!==b);Or(j,o.memoizedState)||(ir=!0),o.memoizedState=j,o.baseQueue===null&&(o.baseState=j),h.lastRenderedState=j}return[j,g]}function nh(){}function sh(i,o){var h=Ct,g=Nr(),b=o(),j=!Or(g.memoizedState,b);if(j&&(g.memoizedState=b,ir=!0),g=g.queue,fc(oh.bind(null,h,g,i),[i]),g.getSnapshot!==o||j||Bt!==null&&Bt.memoizedState.tag&1){if(h.flags|=2048,Fi(9,ah.bind(null,h,g,b,o),void 0,null),Gt===null)throw Error(c(349));hs&30||ih(h,o,b)}return b}function ih(i,o,h){i.flags|=16384,i={getSnapshot:o,value:h},o=Ct.updateQueue,o===null?(o={lastEffect:null,stores:null},Ct.updateQueue=o,o.stores=[i]):(h=o.stores,h===null?o.stores=[i]:h.push(i))}function ah(i,o,h,g){o.value=h,o.getSnapshot=g,lh(o)&&ch(i)}function oh(i,o,h){return h(function(){lh(o)&&ch(i)})}function lh(i){var o=i.getSnapshot;i=i.value;try{var h=o();return!Or(i,h)}catch{return!0}}function ch(i){var o=qr(i,1);o!==null&&jr(o,i,1,-1)}function dh(i){var o=Qr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:i},o.queue=i,i=i.dispatch=h1.bind(null,Ct,i),[o.memoizedState,i]}function Fi(i,o,h,g){return i={tag:i,create:o,destroy:h,deps:g,next:null},o=Ct.updateQueue,o===null?(o={lastEffect:null,stores:null},Ct.updateQueue=o,o.lastEffect=i.next=i):(h=o.lastEffect,h===null?o.lastEffect=i.next=i:(g=h.next,h.next=i,i.next=g,o.lastEffect=i)),i}function uh(){return Nr().memoizedState}function qa(i,o,h,g){var b=Qr();Ct.flags|=i,b.memoizedState=Fi(1|o,h,void 0,g===void 0?null:g)}function Ka(i,o,h,g){var b=Nr();g=g===void 0?null:g;var j=void 0;if(Ot!==null){var M=Ot.memoizedState;if(j=M.destroy,g!==null&&lc(g,M.deps)){b.memoizedState=Fi(o,h,j,g);return}}Ct.flags|=i,b.memoizedState=Fi(1|o,h,j,g)}function hh(i,o){return qa(8390656,8,i,o)}function fc(i,o){return Ka(2048,8,i,o)}function fh(i,o){return Ka(4,2,i,o)}function ph(i,o){return Ka(4,4,i,o)}function mh(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function gh(i,o,h){return h=h!=null?h.concat([i]):null,Ka(4,4,mh.bind(null,o,i),h)}function pc(){}function xh(i,o){var h=Nr();o=o===void 0?null:o;var g=h.memoizedState;return g!==null&&o!==null&&lc(o,g[1])?g[0]:(h.memoizedState=[i,o],i)}function yh(i,o){var h=Nr();o=o===void 0?null:o;var g=h.memoizedState;return g!==null&&o!==null&&lc(o,g[1])?g[0]:(i=i(),h.memoizedState=[i,o],i)}function vh(i,o,h){return hs&21?(Or(h,o)||(h=zu(),Ct.lanes|=h,fs|=h,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,ir=!0),i.memoizedState=h)}function d1(i,o){var h=et;et=h!==0&&4>h?h:4,i(!0);var g=oc.transition;oc.transition={};try{i(!1),o()}finally{et=h,oc.transition=g}}function wh(){return Nr().memoizedState}function u1(i,o,h){var g=Ln(i);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},bh(i))_h(o,h);else if(h=Zu(i,o,h,g),h!==null){var b=Zt();jr(h,i,g,b),Sh(h,o,g)}}function h1(i,o,h){var g=Ln(i),b={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(bh(i))_h(o,b);else{var j=i.alternate;if(i.lanes===0&&(j===null||j.lanes===0)&&(j=o.lastRenderedReducer,j!==null))try{var M=o.lastRenderedState,q=j(M,h);if(b.hasEagerState=!0,b.eagerState=q,Or(q,M)){var se=o.interleaved;se===null?(b.next=b,tc(o)):(b.next=se.next,se.next=b),o.interleaved=b;return}}catch{}finally{}h=Zu(i,o,b,g),h!==null&&(b=Zt(),jr(h,i,g,b),Sh(h,o,g))}}function bh(i){var o=i.alternate;return i===Ct||o!==null&&o===Ct}function _h(i,o){Ii=Xa=!0;var h=i.pending;h===null?o.next=o:(o.next=h.next,h.next=o),i.pending=o}function Sh(i,o,h){if(h&4194240){var g=o.lanes;g&=i.pendingLanes,h|=g,o.lanes=h,Gl(i,h)}}var Qa={readContext:Sr,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},f1={readContext:Sr,useCallback:function(i,o){return Qr().memoizedState=[i,o===void 0?null:o],i},useContext:Sr,useEffect:hh,useImperativeHandle:function(i,o,h){return h=h!=null?h.concat([i]):null,qa(4194308,4,mh.bind(null,o,i),h)},useLayoutEffect:function(i,o){return qa(4194308,4,i,o)},useInsertionEffect:function(i,o){return qa(4,2,i,o)},useMemo:function(i,o){var h=Qr();return o=o===void 0?null:o,i=i(),h.memoizedState=[i,o],i},useReducer:function(i,o,h){var g=Qr();return o=h!==void 0?h(o):o,g.memoizedState=g.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},g.queue=i,i=i.dispatch=u1.bind(null,Ct,i),[g.memoizedState,i]},useRef:function(i){var o=Qr();return i={current:i},o.memoizedState=i},useState:dh,useDebugValue:pc,useDeferredValue:function(i){return Qr().memoizedState=i},useTransition:function(){var i=dh(!1),o=i[0];return i=d1.bind(null,i[1]),Qr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,h){var g=Ct,b=Qr();if(wt){if(h===void 0)throw Error(c(407));h=h()}else{if(h=o(),Gt===null)throw Error(c(349));hs&30||ih(g,o,h)}b.memoizedState=h;var j={value:h,getSnapshot:o};return b.queue=j,hh(oh.bind(null,g,j,i),[i]),g.flags|=2048,Fi(9,ah.bind(null,g,j,h,o),void 0,null),h},useId:function(){var i=Qr(),o=Gt.identifierPrefix;if(wt){var h=mn,g=pn;h=(g&~(1<<32-Dr(g)-1)).toString(32)+h,o=":"+o+"R"+h,h=Mi++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=c1++,o=":"+o+"r"+h.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},p1={readContext:Sr,useCallback:xh,useContext:Sr,useEffect:fc,useImperativeHandle:gh,useInsertionEffect:fh,useLayoutEffect:ph,useMemo:yh,useReducer:uc,useRef:uh,useState:function(){return uc(Li)},useDebugValue:pc,useDeferredValue:function(i){var o=Nr();return vh(o,Ot.memoizedState,i)},useTransition:function(){var i=uc(Li)[0],o=Nr().memoizedState;return[i,o]},useMutableSource:nh,useSyncExternalStore:sh,useId:wh,unstable_isNewReconciler:!1},m1={readContext:Sr,useCallback:xh,useContext:Sr,useEffect:fc,useImperativeHandle:gh,useInsertionEffect:fh,useLayoutEffect:ph,useMemo:yh,useReducer:hc,useRef:uh,useState:function(){return hc(Li)},useDebugValue:pc,useDeferredValue:function(i){var o=Nr();return Ot===null?o.memoizedState=i:vh(o,Ot.memoizedState,i)},useTransition:function(){var i=hc(Li)[0],o=Nr().memoizedState;return[i,o]},useMutableSource:nh,useSyncExternalStore:sh,useId:wh,unstable_isNewReconciler:!1};function Mr(i,o){if(i&&i.defaultProps){o=l({},o),i=i.defaultProps;for(var h in i)o[h]===void 0&&(o[h]=i[h]);return o}return o}function mc(i,o,h,g){o=i.memoizedState,h=h(g,o),h=h==null?o:l({},o,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var Za={isMounted:function(i){return(i=i._reactInternals)?F(i)===i:!1},enqueueSetState:function(i,o,h){i=i._reactInternals;var g=Zt(),b=Ln(i),j=gn(g,b);j.payload=o,h!=null&&(j.callback=h),o=On(i,j,b),o!==null&&(jr(o,i,b,g),Wa(o,i,b))},enqueueReplaceState:function(i,o,h){i=i._reactInternals;var g=Zt(),b=Ln(i),j=gn(g,b);j.tag=1,j.payload=o,h!=null&&(j.callback=h),o=On(i,j,b),o!==null&&(jr(o,i,b,g),Wa(o,i,b))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var h=Zt(),g=Ln(i),b=gn(h,g);b.tag=2,o!=null&&(b.callback=o),o=On(i,b,g),o!==null&&(jr(o,i,g,h),Wa(o,i,g))}};function Ch(i,o,h,g,b,j,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,j,M):o.prototype&&o.prototype.isPureReactComponent?!Ba(h,g)||!Ba(b,j):!0}function Nh(i,o,h){var g=!1,b=Rn,j=o.contextType;return typeof j=="object"&&j!==null?j=Sr(j):(b=sr(o)?ls:Xt.current,g=o.contextTypes,j=(g=g!=null)?zs(i,b):Rn),o=new o(h,j),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Za,i.stateNode=o,o._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=b,i.__reactInternalMemoizedMaskedChildContext=j),o}function jh(i,o,h,g){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,g),o.state!==i&&Za.enqueueReplaceState(o,o.state,null)}function gc(i,o,h,g){var b=i.stateNode;b.props=h,b.state=i.memoizedState,b.refs={},rc(i);var j=o.contextType;typeof j=="object"&&j!==null?b.context=Sr(j):(j=sr(o)?ls:Xt.current,b.context=zs(i,j)),b.state=i.memoizedState,j=o.getDerivedStateFromProps,typeof j=="function"&&(mc(i,o,j,h),b.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(o=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),o!==b.state&&Za.enqueueReplaceState(b,b.state,null),Va(i,h,b,g),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308)}function Xs(i,o){try{var h="",g=o;do h+=l1(g),g=g.return;while(g);var b=h}catch(j){b=`
Error generating stack: `+j.message+`
`+j.stack}return{value:i,source:o,stack:b,digest:null}}function xc(i,o,h){return{value:i,source:null,stack:h??null,digest:o??null}}function yc(i,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var g1=typeof WeakMap=="function"?WeakMap:Map;function kh(i,o,h){h=gn(-1,h),h.tag=3,h.payload={element:null};var g=o.value;return h.callback=function(){fo||(fo=!0,Fc=g),yc(i,o)},h}function Eh(i,o,h){h=gn(-1,h),h.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var b=o.value;h.payload=function(){return g(b)},h.callback=function(){yc(i,o)}}var j=i.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(h.callback=function(){yc(i,o),typeof g!="function"&&(In===null?In=new Set([this]):In.add(this));var M=o.stack;this.componentDidCatch(o.value,{componentStack:M!==null?M:""})}),h}function Ph(i,o,h){var g=i.pingCache;if(g===null){g=i.pingCache=new g1;var b=new Set;g.set(o,b)}else b=g.get(o),b===void 0&&(b=new Set,g.set(o,b));b.has(h)||(b.add(h),i=A1.bind(null,i,o,h),o.then(i,i))}function Ah(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Th(i,o,h,g,b){return i.mode&1?(i.flags|=65536,i.lanes=b,i):(i===o?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=gn(-1,1),o.tag=2,On(h,o,1))),h.lanes|=1),i)}var x1=d.ReactCurrentOwner,ir=!1;function tr(i,o,h,g){o.child=i===null?Ku(o,null,h,g):Us(o,i.child,h,g)}function Rh(i,o,h,g,b){h=h.render;var j=o.ref;return Vs(o,b),g=cc(i,o,h,g,j,b),h=dc(),i!==null&&!ir?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~b,xn(i,o,b)):(wt&&h&&Yl(o),o.flags|=1,tr(i,o,g,b),o.child)}function Dh(i,o,h,g,b){if(i===null){var j=h.type;return typeof j=="function"&&!Wc(j)&&j.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=j,Oh(i,o,j,g,b)):(i=vo(h.type,null,g,o,o.mode,b),i.ref=o.ref,i.return=o,o.child=i)}if(j=i.child,!(i.lanes&b)){var M=j.memoizedProps;if(h=h.compare,h=h!==null?h:Ba,h(M,g)&&i.ref===o.ref)return xn(i,o,b)}return o.flags|=1,i=zn(j,g),i.ref=o.ref,i.return=o,o.child=i}function Oh(i,o,h,g,b){if(i!==null){var j=i.memoizedProps;if(Ba(j,g)&&i.ref===o.ref)if(ir=!1,o.pendingProps=g=j,(i.lanes&b)!==0)i.flags&131072&&(ir=!0);else return o.lanes=i.lanes,xn(i,o,b)}return vc(i,o,h,g,b)}function Ih(i,o,h){var g=o.pendingProps,b=g.children,j=i!==null?i.memoizedState:null;if(g.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Ks,fr),fr|=h;else{if(!(h&1073741824))return i=j!==null?j.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,ht(Ks,fr),fr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=j!==null?j.baseLanes:h,ht(Ks,fr),fr|=g}else j!==null?(g=j.baseLanes|h,o.memoizedState=null):g=h,ht(Ks,fr),fr|=g;return tr(i,o,b,h),o.child}function Mh(i,o){var h=o.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function vc(i,o,h,g,b){var j=sr(h)?ls:Xt.current;return j=zs(o,j),Vs(o,b),h=cc(i,o,h,g,j,b),g=dc(),i!==null&&!ir?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~b,xn(i,o,b)):(wt&&g&&Yl(o),o.flags|=1,tr(i,o,h,b),o.child)}function Lh(i,o,h,g,b){if(sr(h)){var j=!0;Ta(o)}else j=!1;if(Vs(o,b),o.stateNode===null)eo(i,o),Nh(o,h,g),gc(o,h,g,b),g=!0;else if(i===null){var M=o.stateNode,q=o.memoizedProps;M.props=q;var se=M.context,xe=h.contextType;typeof xe=="object"&&xe!==null?xe=Sr(xe):(xe=sr(h)?ls:Xt.current,xe=zs(o,xe));var Te=h.getDerivedStateFromProps,ze=typeof Te=="function"||typeof M.getSnapshotBeforeUpdate=="function";ze||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(q!==g||se!==xe)&&jh(o,M,g,xe),Dn=!1;var ke=o.memoizedState;M.state=ke,Va(o,g,M,b),se=o.memoizedState,q!==g||ke!==se||nr.current||Dn?(typeof Te=="function"&&(mc(o,h,Te,g),se=o.memoizedState),(q=Dn||Ch(o,h,q,g,ke,se,xe))?(ze||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(o.flags|=4194308)):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=se),M.props=g,M.state=se,M.context=xe,g=q):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{M=o.stateNode,Ju(i,o),q=o.memoizedProps,xe=o.type===o.elementType?q:Mr(o.type,q),M.props=xe,ze=o.pendingProps,ke=M.context,se=h.contextType,typeof se=="object"&&se!==null?se=Sr(se):(se=sr(h)?ls:Xt.current,se=zs(o,se));var yt=h.getDerivedStateFromProps;(Te=typeof yt=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(q!==ze||ke!==se)&&jh(o,M,g,se),Dn=!1,ke=o.memoizedState,M.state=ke,Va(o,g,M,b);var ct=o.memoizedState;q!==ze||ke!==ct||nr.current||Dn?(typeof yt=="function"&&(mc(o,h,yt,g),ct=o.memoizedState),(xe=Dn||Ch(o,h,xe,g,ke,ct,se)||!1)?(Te||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(g,ct,se),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(g,ct,se)),typeof M.componentDidUpdate=="function"&&(o.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof M.componentDidUpdate!="function"||q===i.memoizedProps&&ke===i.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&ke===i.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=ct),M.props=g,M.state=ct,M.context=se,g=xe):(typeof M.componentDidUpdate!="function"||q===i.memoizedProps&&ke===i.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&ke===i.memoizedState||(o.flags|=1024),g=!1)}return wc(i,o,h,g,j,b)}function wc(i,o,h,g,b,j){Mh(i,o);var M=(o.flags&128)!==0;if(!g&&!M)return b&&Fu(o,h,!1),xn(i,o,j);g=o.stateNode,x1.current=o;var q=M&&typeof h.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,i!==null&&M?(o.child=Us(o,i.child,null,j),o.child=Us(o,null,q,j)):tr(i,o,q,j),o.memoizedState=g.state,b&&Fu(o,h,!0),o.child}function Fh(i){var o=i.stateNode;o.pendingContext?Mu(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Mu(i,o.context,!1),nc(i,o.containerInfo)}function zh(i,o,h,g,b){return Hs(),Kl(b),o.flags|=256,tr(i,o,h,g),o.child}var bc={dehydrated:null,treeContext:null,retryLane:0};function _c(i){return{baseLanes:i,cachePool:null,transitions:null}}function Bh(i,o,h){var g=o.pendingProps,b=St.current,j=!1,M=(o.flags&128)!==0,q;if((q=M)||(q=i!==null&&i.memoizedState===null?!1:(b&2)!==0),q?(j=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(b|=1),ht(St,b&1),i===null)return ql(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?Ol(i)?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(M=g.children,i=g.fallback,j?(g=o.mode,j=o.child,M={mode:"hidden",children:M},!(g&1)&&j!==null?(j.childLanes=0,j.pendingProps=M):j=wo(M,g,0,null),i=xs(i,g,h,null),j.return=o,i.return=o,j.sibling=i,o.child=j,o.child.memoizedState=_c(h),o.memoizedState=bc,i):Sc(o,M));if(b=i.memoizedState,b!==null&&(q=b.dehydrated,q!==null))return y1(i,o,M,g,q,b,h);if(j){j=g.fallback,M=o.mode,b=i.child,q=b.sibling;var se={mode:"hidden",children:g.children};return!(M&1)&&o.child!==b?(g=o.child,g.childLanes=0,g.pendingProps=se,o.deletions=null):(g=zn(b,se),g.subtreeFlags=b.subtreeFlags&14680064),q!==null?j=zn(q,j):(j=xs(j,M,h,null),j.flags|=2),j.return=o,g.return=o,g.sibling=j,o.child=g,g=j,j=o.child,M=i.child.memoizedState,M=M===null?_c(h):{baseLanes:M.baseLanes|h,cachePool:null,transitions:M.transitions},j.memoizedState=M,j.childLanes=i.childLanes&~h,o.memoizedState=bc,g}return j=i.child,i=j.sibling,g=zn(j,{mode:"visible",children:g.children}),!(o.mode&1)&&(g.lanes=h),g.return=o,g.sibling=null,i!==null&&(h=o.deletions,h===null?(o.deletions=[i],o.flags|=16):h.push(i)),o.child=g,o.memoizedState=null,g}function Sc(i,o){return o=wo({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Ja(i,o,h,g){return g!==null&&Kl(g),Us(o,i.child,null,h),i=Sc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function y1(i,o,h,g,b,j,M){if(h)return o.flags&256?(o.flags&=-257,g=xc(Error(c(422))),Ja(i,o,M,g)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(j=g.fallback,b=o.mode,g=wo({mode:"visible",children:g.children},b,0,null),j=xs(j,b,M,null),j.flags|=2,g.return=o,j.return=o,g.sibling=j,o.child=g,o.mode&1&&Us(o,i.child,null,M),o.child.memoizedState=_c(M),o.memoizedState=bc,j);if(!(o.mode&1))return Ja(i,o,M,null);if(Ol(b))return g=Tx(b).digest,j=Error(c(419)),g=xc(j,g,void 0),Ja(i,o,M,g);if(h=(M&i.childLanes)!==0,ir||h){if(g=Gt,g!==null){switch(M&-M){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=b&(g.suspendedLanes|M)?0:b,b!==0&&b!==j.retryLane&&(j.retryLane=b,qr(i,b),jr(g,i,b,-1))}return Uc(),g=xc(Error(c(421))),Ja(i,o,M,g)}return Iu(b)?(o.flags|=128,o.child=i.child,o=T1.bind(null,i),Rx(b,o),null):(i=j.treeContext,Je&&(_r=Ix(b),hr=o,wt=!0,Ir=null,Ti=!1,i!==null&&(wr[br++]=pn,wr[br++]=mn,wr[br++]=cs,pn=i.id,mn=i.overflow,cs=o)),o=Sc(o,g.children),o.flags|=4096,o)}function Gh(i,o,h){i.lanes|=o;var g=i.alternate;g!==null&&(g.lanes|=o),ec(i.return,o,h)}function Cc(i,o,h,g,b){var j=i.memoizedState;j===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:b}:(j.isBackwards=o,j.rendering=null,j.renderingStartTime=0,j.last=g,j.tail=h,j.tailMode=b)}function Hh(i,o,h){var g=o.pendingProps,b=g.revealOrder,j=g.tail;if(tr(i,o,g.children,h),g=St.current,g&2)g=g&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Gh(i,h,o);else if(i.tag===19)Gh(i,h,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(ht(St,g),!(o.mode&1))o.memoizedState=null;else switch(b){case"forwards":for(h=o.child,b=null;h!==null;)i=h.alternate,i!==null&&Ya(i)===null&&(b=h),h=h.sibling;h=b,h===null?(b=o.child,o.child=null):(b=h.sibling,h.sibling=null),Cc(o,!1,b,h,j);break;case"backwards":for(h=null,b=o.child,o.child=null;b!==null;){if(i=b.alternate,i!==null&&Ya(i)===null){o.child=b;break}i=b.sibling,b.sibling=h,h=b,b=i}Cc(o,!0,h,null,j);break;case"together":Cc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function eo(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function xn(i,o,h){if(i!==null&&(o.dependencies=i.dependencies),fs|=o.lanes,!(h&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(c(153));if(o.child!==null){for(i=o.child,h=zn(i,i.pendingProps),o.child=h,h.return=o;i.sibling!==null;)i=i.sibling,h=h.sibling=zn(i,i.pendingProps),h.return=o;h.sibling=null}return o.child}function v1(i,o,h){switch(o.tag){case 3:Fh(o),Hs();break;case 5:rh(o);break;case 1:sr(o.type)&&Ta(o);break;case 4:nc(o,o.stateNode.containerInfo);break;case 10:Qu(o,o.type._context,o.memoizedProps.value);break;case 13:var g=o.memoizedState;if(g!==null)return g.dehydrated!==null?(ht(St,St.current&1),o.flags|=128,null):h&o.child.childLanes?Bh(i,o,h):(ht(St,St.current&1),i=xn(i,o,h),i!==null?i.sibling:null);ht(St,St.current&1);break;case 19:if(g=(h&o.childLanes)!==0,i.flags&128){if(g)return Hh(i,o,h);o.flags|=128}var b=o.memoizedState;if(b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ht(St,St.current),g)break;return null;case 22:case 23:return o.lanes=0,Ih(i,o,h)}return xn(i,o,h)}function Zr(i){i.flags|=4}function Uh(i,o){if(i!==null&&i.child===o.child)return!0;if(o.flags&16)return!1;for(i=o.child;i!==null;){if(i.flags&12854||i.subtreeFlags&12854)return!1;i=i.sibling}return!0}var zi,Bi,to,ro;if(We)zi=function(i,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)X(i,h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Bi=function(){},to=function(i,o,h,g,b){if(i=i.memoizedProps,i!==g){var j=o.stateNode,M=Kr(Cr.current);h=Ne(j,h,i,g,b,M),(o.updateQueue=h)&&Zr(o)}},ro=function(i,o,h,g){h!==g&&Zr(o)};else if(At){zi=function(i,o,h,g){for(var b=o.child;b!==null;){if(b.tag===5){var j=b.stateNode;h&&g&&(j=Du(j,b.type,b.memoizedProps,b)),X(i,j)}else if(b.tag===6)j=b.stateNode,h&&g&&(j=Ou(j,b.memoizedProps,b)),X(i,j);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)j=b.child,j!==null&&(j.return=b),zi(i,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===o)break;for(;b.sibling===null;){if(b.return===null||b.return===o)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};var Wh=function(i,o,h,g){for(var b=o.child;b!==null;){if(b.tag===5){var j=b.stateNode;h&&g&&(j=Du(j,b.type,b.memoizedProps,b)),Ru(i,j)}else if(b.tag===6)j=b.stateNode,h&&g&&(j=Ou(j,b.memoizedProps,b)),Ru(i,j);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)j=b.child,j!==null&&(j.return=b),Wh(i,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===o)break;for(;b.sibling===null;){if(b.return===null||b.return===o)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};Bi=function(i,o){var h=o.stateNode;if(!Uh(i,o)){i=h.containerInfo;var g=Tu(i);Wh(g,o,!1,!1),h.pendingChildren=g,Zr(o),kx(i,g)}},to=function(i,o,h,g,b){var j=i.stateNode,M=i.memoizedProps;if((i=Uh(i,o))&&M===g)o.stateNode=j;else{var q=o.stateNode,se=Kr(Cr.current),xe=null;M!==g&&(xe=Ne(q,h,M,g,b,se)),i&&xe===null?o.stateNode=j:(j=jt(j,xe,h,M,g,o,i,q),Ce(j,h,g,b,se)&&Zr(o),o.stateNode=j,i?Zr(o):zi(j,o,!1,!1))}},ro=function(i,o,h,g){h!==g?(i=Kr(Ys.current),h=Kr(Cr.current),o.stateNode=ot(g,i,h,o),Zr(o)):o.stateNode=i.stateNode}}else Bi=function(){},to=function(){},ro=function(){};function Gi(i,o){if(!wt)switch(i.tailMode){case"hidden":o=i.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function Kt(i){var o=i.alternate!==null&&i.alternate.child===i.child,h=0,g=0;if(o)for(var b=i.child;b!==null;)h|=b.lanes|b.childLanes,g|=b.subtreeFlags&14680064,g|=b.flags&14680064,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)h|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=g,i.childLanes=h,o}function w1(i,o,h){var g=o.pendingProps;switch($l(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(o),null;case 1:return sr(o.type)&&Aa(),Kt(o),null;case 3:return h=o.stateNode,$s(),xt(nr),xt(Xt),ac(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(za(o)?Zr(o):i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Ir!==null&&(Gc(Ir),Ir=null))),Bi(i,o),Kt(o),null;case 5:sc(o),h=Kr(Ys.current);var b=o.type;if(i!==null&&o.stateNode!=null)to(i,o,b,g,h),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(c(166));return Kt(o),null}if(i=Kr(Cr.current),za(o)){if(!Je)throw Error(c(175));i=Mx(o.stateNode,o.type,o.memoizedProps,h,i,o,!Ti),o.updateQueue=i,i!==null&&Zr(o)}else{var j=U(b,g,h,i,o);zi(j,o,!1,!1),o.stateNode=j,Ce(j,b,g,h,i)&&Zr(o)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Kt(o),null;case 6:if(i&&o.stateNode!=null)ro(i,o,i.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(c(166));if(i=Kr(Ys.current),h=Kr(Cr.current),za(o)){if(!Je)throw Error(c(176));if(i=o.stateNode,h=o.memoizedProps,(g=Lx(i,h,o,!Ti))&&(b=hr,b!==null))switch(b.tag){case 3:Vx(b.stateNode.containerInfo,i,h,(b.mode&1)!==0);break;case 5:Yx(b.type,b.memoizedProps,b.stateNode,i,h,(b.mode&1)!==0)}g&&Zr(o)}else o.stateNode=ot(g,i,h,o)}return Kt(o),null;case 13:if(xt(St),g=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(wt&&_r!==null&&o.mode&1&&!(o.flags&128))$u(),Hs(),o.flags|=98560,b=!1;else if(b=za(o),g!==null&&g.dehydrated!==null){if(i===null){if(!b)throw Error(c(318));if(!Je)throw Error(c(344));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(c(317));Fx(b,o)}else Hs(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Kt(o),b=!1}else Ir!==null&&(Gc(Ir),Ir=null),b=!0;if(!b)return o.flags&65536?o:null}return o.flags&128?(o.lanes=h,o):(h=g!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,o.mode&1&&(i===null||St.current&1?It===0&&(It=3):Uc())),o.updateQueue!==null&&(o.flags|=4),Kt(o),null);case 4:return $s(),Bi(i,o),i===null&&ce(o.stateNode.containerInfo),Kt(o),null;case 10:return Jl(o.type._context),Kt(o),null;case 17:return sr(o.type)&&Aa(),Kt(o),null;case 19:if(xt(St),b=o.memoizedState,b===null)return Kt(o),null;if(g=(o.flags&128)!==0,j=b.rendering,j===null)if(g)Gi(b,!1);else{if(It!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(j=Ya(i),j!==null){for(o.flags|=128,Gi(b,!1),i=j.updateQueue,i!==null&&(o.updateQueue=i,o.flags|=4),o.subtreeFlags=0,i=h,h=o.child;h!==null;)g=h,b=i,g.flags&=14680066,j=g.alternate,j===null?(g.childLanes=0,g.lanes=b,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=j.childLanes,g.lanes=j.lanes,g.child=j.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=j.memoizedProps,g.memoizedState=j.memoizedState,g.updateQueue=j.updateQueue,g.type=j.type,b=j.dependencies,g.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),h=h.sibling;return ht(St,St.current&1|2),o.child}i=i.sibling}b.tail!==null&&zt()>Lc&&(o.flags|=128,g=!0,Gi(b,!1),o.lanes=4194304)}else{if(!g)if(i=Ya(j),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,i!==null&&(o.updateQueue=i,o.flags|=4),Gi(b,!0),b.tail===null&&b.tailMode==="hidden"&&!j.alternate&&!wt)return Kt(o),null}else 2*zt()-b.renderingStartTime>Lc&&h!==1073741824&&(o.flags|=128,g=!0,Gi(b,!1),o.lanes=4194304);b.isBackwards?(j.sibling=o.child,o.child=j):(i=b.last,i!==null?i.sibling=j:o.child=j,b.last=j)}return b.tail!==null?(o=b.tail,b.rendering=o,b.tail=o.sibling,b.renderingStartTime=zt(),o.sibling=null,i=St.current,ht(St,g?i&1|2:i&1),o):(Kt(o),null);case 22:case 23:return Hc(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&o.mode&1?fr&1073741824&&(Kt(o),We&&o.subtreeFlags&6&&(o.flags|=8192)):Kt(o),null;case 24:return null;case 25:return null}throw Error(c(156,o.tag))}function b1(i,o){switch($l(o),o.tag){case 1:return sr(o.type)&&Aa(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return $s(),xt(nr),xt(Xt),ac(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return sc(o),null;case 13:if(xt(St),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(c(340));Hs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return xt(St),null;case 4:return $s(),null;case 10:return Jl(o.type._context),null;case 22:case 23:return Hc(),null;case 24:return null;default:return null}}var no=!1,Qt=!1,_1=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function qs(i,o){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){bt(i,o,g)}else h.current=null}function Nc(i,o,h){try{h()}catch(g){bt(i,o,g)}}var Vh=!1;function S1(i,o){for(J(i.containerInfo),Ae=o;Ae!==null;)if(i=Ae,o=i.child,(i.subtreeFlags&1028)!==0&&o!==null)o.return=i,Ae=o;else for(;Ae!==null;){i=Ae;try{var h=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var g=h.memoizedProps,b=h.memoizedState,j=i.stateNode,M=j.getSnapshotBeforeUpdate(i.elementType===i.type?g:Mr(i.type,g),b);j.__reactInternalSnapshotBeforeUpdate=M}break;case 3:We&&Wt(i.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(q){bt(i,i.return,q)}if(o=i.sibling,o!==null){o.return=i.return,Ae=o;break}Ae=i.return}return h=Vh,Vh=!1,h}function Hi(i,o,h){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var b=g=g.next;do{if((b.tag&i)===i){var j=b.destroy;b.destroy=void 0,j!==void 0&&Nc(o,h,j)}b=b.next}while(b!==g)}}function so(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&i)===i){var g=h.create;h.destroy=g()}h=h.next}while(h!==o)}}function jc(i){var o=i.ref;if(o!==null){var h=i.stateNode;switch(i.tag){case 5:i=Z(h);break;default:i=h}typeof o=="function"?o(i):o.current=i}}function Yh(i){var o=i.alternate;o!==null&&(i.alternate=null,Yh(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&z(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function $h(i){return i.tag===5||i.tag===3||i.tag===4}function Xh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||$h(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function kc(i,o,h){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?Se(h,i,o):Et(h,i);else if(g!==4&&(i=i.child,i!==null))for(kc(i,o,h),i=i.sibling;i!==null;)kc(i,o,h),i=i.sibling}function Ec(i,o,h){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?De(h,i,o):Ye(h,i);else if(g!==4&&(i=i.child,i!==null))for(Ec(i,o,h),i=i.sibling;i!==null;)Ec(i,o,h),i=i.sibling}var Vt=null,Lr=!1;function Jr(i,o,h){for(h=h.child;h!==null;)Pc(i,o,h),h=h.sibling}function Pc(i,o,h){if($r&&typeof $r.onCommitFiberUnmount=="function")try{$r.onCommitFiberUnmount(Ia,h)}catch{}switch(h.tag){case 5:Qt||qs(h,o);case 6:if(We){var g=Vt,b=Lr;Vt=null,Jr(i,o,h),Vt=g,Lr=b,Vt!==null&&(Lr?Me(Vt,h.stateNode):Re(Vt,h.stateNode))}else Jr(i,o,h);break;case 18:We&&Vt!==null&&(Lr?Ux(Vt,h.stateNode):Hx(Vt,h.stateNode));break;case 4:We?(g=Vt,b=Lr,Vt=h.stateNode.containerInfo,Lr=!0,Jr(i,o,h),Vt=g,Lr=b):(At&&(g=h.stateNode.containerInfo,b=Tu(g),Dl(g,b)),Jr(i,o,h));break;case 0:case 11:case 14:case 15:if(!Qt&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){b=g=g.next;do{var j=b,M=j.destroy;j=j.tag,M!==void 0&&(j&2||j&4)&&Nc(h,o,M),b=b.next}while(b!==g)}Jr(i,o,h);break;case 1:if(!Qt&&(qs(h,o),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(q){bt(h,o,q)}Jr(i,o,h);break;case 21:Jr(i,o,h);break;case 22:h.mode&1?(Qt=(g=Qt)||h.memoizedState!==null,Jr(i,o,h),Qt=g):Jr(i,o,h);break;default:Jr(i,o,h)}}function qh(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new _1),o.forEach(function(g){var b=R1.bind(null,i,g);h.has(g)||(h.add(g),g.then(b,b))})}}function Fr(i,o){var h=o.deletions;if(h!==null)for(var g=0;g<h.length;g++){var b=h[g];try{var j=i,M=o;if(We){var q=M;e:for(;q!==null;){switch(q.tag){case 5:Vt=q.stateNode,Lr=!1;break e;case 3:Vt=q.stateNode.containerInfo,Lr=!0;break e;case 4:Vt=q.stateNode.containerInfo,Lr=!0;break e}q=q.return}if(Vt===null)throw Error(c(160));Pc(j,M,b),Vt=null,Lr=!1}else Pc(j,M,b);var se=b.alternate;se!==null&&(se.return=null),b.return=null}catch(xe){bt(b,o,xe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Kh(o,i),o=o.sibling}function Kh(i,o){var h=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Fr(o,i),en(i),g&4){try{Hi(3,i,i.return),so(3,i)}catch(ke){bt(i,i.return,ke)}try{Hi(5,i,i.return)}catch(ke){bt(i,i.return,ke)}}break;case 1:Fr(o,i),en(i),g&512&&h!==null&&qs(h,h.return);break;case 5:if(Fr(o,i),en(i),g&512&&h!==null&&qs(h,h.return),We){if(i.flags&32){var b=i.stateNode;try{qe(b)}catch(ke){bt(i,i.return,ke)}}if(g&4&&(b=i.stateNode,b!=null)){var j=i.memoizedProps;if(h=h!==null?h.memoizedProps:j,g=i.type,o=i.updateQueue,i.updateQueue=null,o!==null)try{hn(b,o,g,h,j,i)}catch(ke){bt(i,i.return,ke)}}}break;case 6:if(Fr(o,i),en(i),g&4&&We){if(i.stateNode===null)throw Error(c(162));b=i.stateNode,j=i.memoizedProps,h=h!==null?h.memoizedProps:j;try{vr(b,h,j)}catch(ke){bt(i,i.return,ke)}}break;case 3:if(Fr(o,i),en(i),g&4){if(We&&Je&&h!==null&&h.memoizedState.isDehydrated)try{Bx(o.containerInfo)}catch(ke){bt(i,i.return,ke)}if(At){b=o.containerInfo,j=o.pendingChildren;try{Dl(b,j)}catch(ke){bt(i,i.return,ke)}}}break;case 4:if(Fr(o,i),en(i),g&4&&At){j=i.stateNode,b=j.containerInfo,j=j.pendingChildren;try{Dl(b,j)}catch(ke){bt(i,i.return,ke)}}break;case 13:Fr(o,i),en(i),b=i.child,b.flags&8192&&(j=b.memoizedState!==null,b.stateNode.isHidden=j,!j||b.alternate!==null&&b.alternate.memoizedState!==null||(Mc=zt())),g&4&&qh(i);break;case 22:var M=h!==null&&h.memoizedState!==null;if(i.mode&1?(Qt=(h=Qt)||M,Fr(o,i),Qt=h):Fr(o,i),en(i),g&8192){if(h=i.memoizedState!==null,(i.stateNode.isHidden=h)&&!M&&i.mode&1)for(Ae=i,g=i.child;g!==null;){for(o=Ae=g;Ae!==null;){M=Ae;var q=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Hi(4,M,M.return);break;case 1:qs(M,M.return);var se=M.stateNode;if(typeof se.componentWillUnmount=="function"){var xe=M,Te=M.return;try{var ze=xe;se.props=ze.memoizedProps,se.state=ze.memoizedState,se.componentWillUnmount()}catch(ke){bt(xe,Te,ke)}}break;case 5:qs(M,M.return);break;case 22:if(M.memoizedState!==null){Jh(o);continue}}q!==null?(q.return=M,Ae=q):Jh(o)}g=g.sibling}if(We){e:if(g=null,We)for(o=i;;){if(o.tag===5){if(g===null){g=o;try{b=o.stateNode,h?Ft(b):Pe(o.stateNode,o.memoizedProps)}catch(ke){bt(i,i.return,ke)}}}else if(o.tag===6){if(g===null)try{j=o.stateNode,h?me(j):Fe(j,o.memoizedProps)}catch(ke){bt(i,i.return,ke)}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;g===o&&(g=null),o=o.return}g===o&&(g=null),o.sibling.return=o.return,o=o.sibling}}}break;case 19:Fr(o,i),en(i),g&4&&qh(i);break;case 21:break;default:Fr(o,i),en(i)}}function en(i){var o=i.flags;if(o&2){try{if(We){e:{for(var h=i.return;h!==null;){if($h(h)){var g=h;break e}h=h.return}throw Error(c(160))}switch(g.tag){case 5:var b=g.stateNode;g.flags&32&&(qe(b),g.flags&=-33);var j=Xh(i);Ec(i,j,b);break;case 3:case 4:var M=g.stateNode.containerInfo,q=Xh(i);kc(i,q,M);break;default:throw Error(c(161))}}}catch(se){bt(i,i.return,se)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function C1(i,o,h){Ae=i,Qh(i)}function Qh(i,o,h){for(var g=(i.mode&1)!==0;Ae!==null;){var b=Ae,j=b.child;if(b.tag===22&&g){var M=b.memoizedState!==null||no;if(!M){var q=b.alternate,se=q!==null&&q.memoizedState!==null||Qt;q=no;var xe=Qt;if(no=M,(Qt=se)&&!xe)for(Ae=b;Ae!==null;)M=Ae,se=M.child,M.tag===22&&M.memoizedState!==null?ef(b):se!==null?(se.return=M,Ae=se):ef(b);for(;j!==null;)Ae=j,Qh(j),j=j.sibling;Ae=b,no=q,Qt=xe}Zh(i)}else b.subtreeFlags&8772&&j!==null?(j.return=b,Ae=j):Zh(i)}}function Zh(i){for(;Ae!==null;){var o=Ae;if(o.flags&8772){var h=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Qt||so(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!Qt)if(h===null)g.componentDidMount();else{var b=o.elementType===o.type?h.memoizedProps:Mr(o.type,h.memoizedProps);g.componentDidUpdate(b,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var j=o.updateQueue;j!==null&&th(o,j,g);break;case 3:var M=o.updateQueue;if(M!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=Z(o.child.stateNode);break;case 1:h=o.child.stateNode}th(o,M,h)}break;case 5:var q=o.stateNode;h===null&&o.flags&4&&$t(q,o.type,o.memoizedProps,o);break;case 6:break;case 4:break;case 12:break;case 13:if(Je&&o.memoizedState===null){var se=o.alternate;if(se!==null){var xe=se.memoizedState;if(xe!==null){var Te=xe.dehydrated;Te!==null&&Gx(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}Qt||o.flags&512&&jc(o)}catch(ze){bt(o,o.return,ze)}}if(o===i){Ae=null;break}if(h=o.sibling,h!==null){h.return=o.return,Ae=h;break}Ae=o.return}}function Jh(i){for(;Ae!==null;){var o=Ae;if(o===i){Ae=null;break}var h=o.sibling;if(h!==null){h.return=o.return,Ae=h;break}Ae=o.return}}function ef(i){for(;Ae!==null;){var o=Ae;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{so(4,o)}catch(se){bt(o,h,se)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var b=o.return;try{g.componentDidMount()}catch(se){bt(o,b,se)}}var j=o.return;try{jc(o)}catch(se){bt(o,j,se)}break;case 5:var M=o.return;try{jc(o)}catch(se){bt(o,M,se)}}}catch(se){bt(o,o.return,se)}if(o===i){Ae=null;break}var q=o.sibling;if(q!==null){q.return=o.return,Ae=q;break}Ae=o.return}}var io=0,ao=1,oo=2,lo=3,co=4;if(typeof Symbol=="function"&&Symbol.for){var Ui=Symbol.for;io=Ui("selector.component"),ao=Ui("selector.has_pseudo_class"),oo=Ui("selector.role"),lo=Ui("selector.test_id"),co=Ui("selector.text")}function Ac(i){var o=P(i);if(o!=null){if(typeof o.memoizedProps["data-testname"]!="string")throw Error(c(364));return o}if(i=he(i),i===null)throw Error(c(362));return i.stateNode.current}function Tc(i,o){switch(o.$$typeof){case io:if(i.type===o.value)return!0;break;case ao:e:{o=o.value,i=[i,0];for(var h=0;h<i.length;){var g=i[h++],b=i[h++],j=o[b];if(g.tag!==5||!je(g)){for(;j!=null&&Tc(g,j);)b++,j=o[b];if(b===o.length){o=!0;break e}else for(g=g.child;g!==null;)i.push(g,b),g=g.sibling}}o=!1}return o;case oo:if(i.tag===5&&ve(i.stateNode,o.value))return!0;break;case co:if((i.tag===5||i.tag===6)&&(i=ge(i),i!==null&&0<=i.indexOf(o.value)))return!0;break;case lo:if(i.tag===5&&(i=i.memoizedProps["data-testname"],typeof i=="string"&&i.toLowerCase()===o.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function Rc(i){switch(i.$$typeof){case io:return"<"+(I(i.value)||"Unknown")+">";case ao:return":has("+(Rc(i)||"")+")";case oo:return'[role="'+i.value+'"]';case co:return'"'+i.value+'"';case lo:return'[data-testname="'+i.value+'"]';default:throw Error(c(365))}}function tf(i,o){var h=[];i=[i,0];for(var g=0;g<i.length;){var b=i[g++],j=i[g++],M=o[j];if(b.tag!==5||!je(b)){for(;M!=null&&Tc(b,M);)j++,M=o[j];if(j===o.length)h.push(b);else for(b=b.child;b!==null;)i.push(b,j),b=b.sibling}}return h}function Dc(i,o){if(!ue)throw Error(c(363));i=Ac(i),i=tf(i,o),o=[],i=Array.from(i);for(var h=0;h<i.length;){var g=i[h++];if(g.tag===5)je(g)||o.push(g.stateNode);else for(g=g.child;g!==null;)i.push(g),g=g.sibling}return o}var N1=Math.ceil,uo=d.ReactCurrentDispatcher,Oc=d.ReactCurrentOwner,Pt=d.ReactCurrentBatchConfig,$e=0,Gt=null,Tt=null,Yt=0,fr=0,Ks=Tn(0),It=0,Wi=null,fs=0,ho=0,Ic=0,Vi=null,ar=null,Mc=0,Lc=1/0,yn=null;function Qs(){Lc=zt()+500}var fo=!1,Fc=null,In=null,po=!1,Mn=null,mo=0,Yi=0,zc=null,go=-1,xo=0;function Zt(){return $e&6?zt():go!==-1?go:go=zt()}function Ln(i){return i.mode&1?$e&2&&Yt!==0?Yt&-Yt:o1.transition!==null?(xo===0&&(xo=zu()),xo):(i=et,i!==0?i:ie()):1}function jr(i,o,h,g){if(50<Yi)throw Yi=0,zc=null,Error(c(185));Ai(i,h,g),(!($e&2)||i!==Gt)&&(i===Gt&&(!($e&2)&&(ho|=h),It===4&&Fn(i,Yt)),or(i,g),h===1&&$e===0&&!(o.mode&1)&&(Qs(),Ma&&Xr()))}function or(i,o){var h=i.callbackNode;Zx(i,o);var g=Oa(i,i===Gt?Yt:0);if(g===0)h!==null&&Gu(h),i.callbackNode=null,i.callbackPriority=0;else if(o=g&-g,i.callbackPriority!==o){if(h!=null&&Gu(h),o===1)i.tag===0?a1(nf.bind(null,i)):Hu(nf.bind(null,i)),L?$(function(){!($e&6)&&Xr()}):Hl(Ul,Xr),h=null;else{switch(Bu(g)){case 1:h=Ul;break;case 4:h=r1;break;case 16:h=Wl;break;case 536870912:h=n1;break;default:h=Wl}h=ff(h,rf.bind(null,i))}i.callbackPriority=o,i.callbackNode=h}}function rf(i,o){if(go=-1,xo=0,$e&6)throw Error(c(327));var h=i.callbackNode;if(gs()&&i.callbackNode!==h)return null;var g=Oa(i,i===Gt?Yt:0);if(g===0)return null;if(g&30||g&i.expiredLanes||o)o=yo(i,g);else{o=g;var b=$e;$e|=2;var j=of();(Gt!==i||Yt!==o)&&(yn=null,Qs(),ps(i,o));do try{E1();break}catch(q){af(i,q)}while(!0);Zl(),uo.current=j,$e=b,Tt!==null?o=0:(Gt=null,Yt=0,o=It)}if(o!==0){if(o===2&&(b=zl(i),b!==0&&(g=b,o=Bc(i,b))),o===1)throw h=Wi,ps(i,0),Fn(i,g),or(i,zt()),h;if(o===6)Fn(i,g);else{if(b=i.current.alternate,!(g&30)&&!j1(b)&&(o=yo(i,g),o===2&&(j=zl(i),j!==0&&(g=j,o=Bc(i,j))),o===1))throw h=Wi,ps(i,0),Fn(i,g),or(i,zt()),h;switch(i.finishedWork=b,i.finishedLanes=g,o){case 0:case 1:throw Error(c(345));case 2:ms(i,ar,yn);break;case 3:if(Fn(i,g),(g&130023424)===g&&(o=Mc+500-zt(),10<o)){if(Oa(i,0)!==0)break;if(b=i.suspendedLanes,(b&g)!==g){Zt(),i.pingedLanes|=i.suspendedLanes&b;break}i.timeoutHandle=gt(ms.bind(null,i,ar,yn),o);break}ms(i,ar,yn);break;case 4:if(Fn(i,g),(g&4194240)===g)break;for(o=i.eventTimes,b=-1;0<g;){var M=31-Dr(g);j=1<<M,M=o[M],M>b&&(b=M),g&=~j}if(g=b,g=zt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*N1(g/1960))-g,10<g){i.timeoutHandle=gt(ms.bind(null,i,ar,yn),g);break}ms(i,ar,yn);break;case 5:ms(i,ar,yn);break;default:throw Error(c(329))}}}return or(i,zt()),i.callbackNode===h?rf.bind(null,i):null}function Bc(i,o){var h=Vi;return i.current.memoizedState.isDehydrated&&(ps(i,o).flags|=256),i=yo(i,o),i!==2&&(o=ar,ar=h,o!==null&&Gc(o)),i}function Gc(i){ar===null?ar=i:ar.push.apply(ar,i)}function j1(i){for(var o=i;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var b=h[g],j=b.getSnapshot;b=b.value;try{if(!Or(j(),b))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fn(i,o){for(o&=~Ic,o&=~ho,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var h=31-Dr(o),g=1<<h;i[h]=-1,o&=~g}}function nf(i){if($e&6)throw Error(c(327));gs();var o=Oa(i,0);if(!(o&1))return or(i,zt()),null;var h=yo(i,o);if(i.tag!==0&&h===2){var g=zl(i);g!==0&&(o=g,h=Bc(i,g))}if(h===1)throw h=Wi,ps(i,0),Fn(i,o),or(i,zt()),h;if(h===6)throw Error(c(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,ms(i,ar,yn),or(i,zt()),null}function sf(i){Mn!==null&&Mn.tag===0&&!($e&6)&&gs();var o=$e;$e|=1;var h=Pt.transition,g=et;try{if(Pt.transition=null,et=1,i)return i()}finally{et=g,Pt.transition=h,$e=o,!($e&6)&&Xr()}}function Hc(){fr=Ks.current,xt(Ks)}function ps(i,o){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==Ue&&(i.timeoutHandle=Ue,Ge(h)),Tt!==null)for(h=Tt.return;h!==null;){var g=h;switch($l(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Aa();break;case 3:$s(),xt(nr),xt(Xt),ac();break;case 5:sc(g);break;case 4:$s();break;case 13:xt(St);break;case 19:xt(St);break;case 10:Jl(g.type._context);break;case 22:case 23:Hc()}h=h.return}if(Gt=i,Tt=i=zn(i.current,null),Yt=fr=o,It=0,Wi=null,Ic=ho=fs=0,ar=Vi=null,us!==null){for(o=0;o<us.length;o++)if(h=us[o],g=h.interleaved,g!==null){h.interleaved=null;var b=g.next,j=h.pending;if(j!==null){var M=j.next;j.next=b,g.next=M}h.pending=g}us=null}return i}function af(i,o){do{var h=Tt;try{if(Zl(),$a.current=Qa,Xa){for(var g=Ct.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}Xa=!1}if(hs=0,Bt=Ot=Ct=null,Ii=!1,Mi=0,Oc.current=null,h===null||h.return===null){It=1,Wi=o,Tt=null;break}e:{var j=i,M=h.return,q=h,se=o;if(o=Yt,q.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var xe=se,Te=q,ze=Te.tag;if(!(Te.mode&1)&&(ze===0||ze===11||ze===15)){var ke=Te.alternate;ke?(Te.updateQueue=ke.updateQueue,Te.memoizedState=ke.memoizedState,Te.lanes=ke.lanes):(Te.updateQueue=null,Te.memoizedState=null)}var yt=Ah(M);if(yt!==null){yt.flags&=-257,Th(yt,M,q,j,o),yt.mode&1&&Ph(j,xe,o),o=yt,se=xe;var ct=o.updateQueue;if(ct===null){var lr=new Set;lr.add(se),o.updateQueue=lr}else ct.add(se);break e}else{if(!(o&1)){Ph(j,xe,o),Uc();break e}se=Error(c(426))}}else if(wt&&q.mode&1){var vn=Ah(M);if(vn!==null){!(vn.flags&65536)&&(vn.flags|=256),Th(vn,M,q,j,o),Kl(Xs(se,q));break e}}j=se=Xs(se,q),It!==4&&(It=2),Vi===null?Vi=[j]:Vi.push(j),j=M;do{switch(j.tag){case 3:j.flags|=65536,o&=-o,j.lanes|=o;var ne=kh(j,se,o);eh(j,ne);break e;case 1:q=se;var Q=j.type,ae=j.stateNode;if(!(j.flags&128)&&(typeof Q.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(In===null||!In.has(ae)))){j.flags|=65536,o&=-o,j.lanes|=o;var Ee=Eh(j,q,o);eh(j,Ee);break e}}j=j.return}while(j!==null)}cf(h)}catch(Ie){o=Ie,Tt===h&&h!==null&&(Tt=h=h.return);continue}break}while(!0)}function of(){var i=uo.current;return uo.current=Qa,i===null?Qa:i}function Uc(){(It===0||It===3||It===2)&&(It=4),Gt===null||!(fs&268435455)&&!(ho&268435455)||Fn(Gt,Yt)}function yo(i,o){var h=$e;$e|=2;var g=of();(Gt!==i||Yt!==o)&&(yn=null,ps(i,o));do try{k1();break}catch(b){af(i,b)}while(!0);if(Zl(),$e=h,uo.current=g,Tt!==null)throw Error(c(261));return Gt=null,Yt=0,It}function k1(){for(;Tt!==null;)lf(Tt)}function E1(){for(;Tt!==null&&!e1();)lf(Tt)}function lf(i){var o=hf(i.alternate,i,fr);i.memoizedProps=i.pendingProps,o===null?cf(i):Tt=o,Oc.current=null}function cf(i){var o=i;do{var h=o.alternate;if(i=o.return,o.flags&32768){if(h=b1(h,o),h!==null){h.flags&=32767,Tt=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{It=6,Tt=null;return}}else if(h=w1(h,o,fr),h!==null){Tt=h;return}if(o=o.sibling,o!==null){Tt=o;return}Tt=o=i}while(o!==null);It===0&&(It=5)}function ms(i,o,h){var g=et,b=Pt.transition;try{Pt.transition=null,et=1,P1(i,o,h,g)}finally{Pt.transition=b,et=g}return null}function P1(i,o,h,g){do gs();while(Mn!==null);if($e&6)throw Error(c(327));h=i.finishedWork;var b=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(c(177));i.callbackNode=null,i.callbackPriority=0;var j=h.lanes|h.childLanes;if(Jx(i,j),i===Gt&&(Tt=Gt=null,Yt=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||po||(po=!0,ff(Wl,function(){return gs(),null})),j=(h.flags&15990)!==0,h.subtreeFlags&15990||j){j=Pt.transition,Pt.transition=null;var M=et;et=1;var q=$e;$e|=4,Oc.current=null,S1(i,h),Kh(h,i),V(i.containerInfo),i.current=h,C1(h),t1(),$e=q,et=M,Pt.transition=j}else i.current=h;if(po&&(po=!1,Mn=i,mo=b),j=i.pendingLanes,j===0&&(In=null),s1(h.stateNode),or(i,zt()),o!==null)for(g=i.onRecoverableError,h=0;h<o.length;h++)b=o[h],g(b.value,{componentStack:b.stack,digest:b.digest});if(fo)throw fo=!1,i=Fc,Fc=null,i;return mo&1&&i.tag!==0&&gs(),j=i.pendingLanes,j&1?i===zc?Yi++:(Yi=0,zc=i):Yi=0,Xr(),null}function gs(){if(Mn!==null){var i=Bu(mo),o=Pt.transition,h=et;try{if(Pt.transition=null,et=16>i?16:i,Mn===null)var g=!1;else{if(i=Mn,Mn=null,mo=0,$e&6)throw Error(c(331));var b=$e;for($e|=4,Ae=i.current;Ae!==null;){var j=Ae,M=j.child;if(Ae.flags&16){var q=j.deletions;if(q!==null){for(var se=0;se<q.length;se++){var xe=q[se];for(Ae=xe;Ae!==null;){var Te=Ae;switch(Te.tag){case 0:case 11:case 15:Hi(8,Te,j)}var ze=Te.child;if(ze!==null)ze.return=Te,Ae=ze;else for(;Ae!==null;){Te=Ae;var ke=Te.sibling,yt=Te.return;if(Yh(Te),Te===xe){Ae=null;break}if(ke!==null){ke.return=yt,Ae=ke;break}Ae=yt}}}var ct=j.alternate;if(ct!==null){var lr=ct.child;if(lr!==null){ct.child=null;do{var vn=lr.sibling;lr.sibling=null,lr=vn}while(lr!==null)}}Ae=j}}if(j.subtreeFlags&2064&&M!==null)M.return=j,Ae=M;else e:for(;Ae!==null;){if(j=Ae,j.flags&2048)switch(j.tag){case 0:case 11:case 15:Hi(9,j,j.return)}var ne=j.sibling;if(ne!==null){ne.return=j.return,Ae=ne;break e}Ae=j.return}}var Q=i.current;for(Ae=Q;Ae!==null;){M=Ae;var ae=M.child;if(M.subtreeFlags&2064&&ae!==null)ae.return=M,Ae=ae;else e:for(M=Q;Ae!==null;){if(q=Ae,q.flags&2048)try{switch(q.tag){case 0:case 11:case 15:so(9,q)}}catch(Ie){bt(q,q.return,Ie)}if(q===M){Ae=null;break e}var Ee=q.sibling;if(Ee!==null){Ee.return=q.return,Ae=Ee;break e}Ae=q.return}}if($e=b,Xr(),$r&&typeof $r.onPostCommitFiberRoot=="function")try{$r.onPostCommitFiberRoot(Ia,i)}catch{}g=!0}return g}finally{et=h,Pt.transition=o}}return!1}function df(i,o,h){o=Xs(h,o),o=kh(i,o,1),i=On(i,o,1),o=Zt(),i!==null&&(Ai(i,1,o),or(i,o))}function bt(i,o,h){if(i.tag===3)df(i,i,h);else for(;o!==null;){if(o.tag===3){df(o,i,h);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(In===null||!In.has(g))){i=Xs(h,i),i=Eh(o,i,1),o=On(o,i,1),i=Zt(),o!==null&&(Ai(o,1,i),or(o,i));break}}o=o.return}}function A1(i,o,h){var g=i.pingCache;g!==null&&g.delete(o),o=Zt(),i.pingedLanes|=i.suspendedLanes&h,Gt===i&&(Yt&h)===h&&(It===4||It===3&&(Yt&130023424)===Yt&&500>zt()-Mc?ps(i,0):Ic|=h),or(i,o)}function uf(i,o){o===0&&(i.mode&1?(o=Da,Da<<=1,!(Da&130023424)&&(Da=4194304)):o=1);var h=Zt();i=qr(i,o),i!==null&&(Ai(i,o,h),or(i,h))}function T1(i){var o=i.memoizedState,h=0;o!==null&&(h=o.retryLane),uf(i,h)}function R1(i,o){var h=0;switch(i.tag){case 13:var g=i.stateNode,b=i.memoizedState;b!==null&&(h=b.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(c(314))}g!==null&&g.delete(o),uf(i,h)}var hf;hf=function(i,o,h){if(i!==null)if(i.memoizedProps!==o.pendingProps||nr.current)ir=!0;else{if(!(i.lanes&h)&&!(o.flags&128))return ir=!1,v1(i,o,h);ir=!!(i.flags&131072)}else ir=!1,wt&&o.flags&1048576&&Uu(o,Fa,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;eo(i,o),i=o.pendingProps;var b=zs(o,Xt.current);Vs(o,h),b=cc(null,o,g,i,b,h);var j=dc();return o.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,sr(g)?(j=!0,Ta(o)):j=!1,o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,rc(o),b.updater=Za,o.stateNode=b,b._reactInternals=o,gc(o,g,i,h),o=wc(null,o,g,!0,j,h)):(o.tag=0,wt&&j&&Yl(o),tr(null,o,b,h),o=o.child),o;case 16:g=o.elementType;e:{switch(eo(i,o),i=o.pendingProps,b=g._init,g=b(g._payload),o.type=g,b=o.tag=O1(g),i=Mr(g,i),b){case 0:o=vc(null,o,g,i,h);break e;case 1:o=Lh(null,o,g,i,h);break e;case 11:o=Rh(null,o,g,i,h);break e;case 14:o=Dh(null,o,g,Mr(g.type,i),h);break e}throw Error(c(306,g,""))}return o;case 0:return g=o.type,b=o.pendingProps,b=o.elementType===g?b:Mr(g,b),vc(i,o,g,b,h);case 1:return g=o.type,b=o.pendingProps,b=o.elementType===g?b:Mr(g,b),Lh(i,o,g,b,h);case 3:e:{if(Fh(o),i===null)throw Error(c(387));g=o.pendingProps,j=o.memoizedState,b=j.element,Ju(i,o),Va(o,g,null,h);var M=o.memoizedState;if(g=M.element,Je&&j.isDehydrated)if(j={element:g,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},o.updateQueue.baseState=j,o.memoizedState=j,o.flags&256){b=Xs(Error(c(423)),o),o=zh(i,o,g,h,b);break e}else if(g!==b){b=Xs(Error(c(424)),o),o=zh(i,o,g,h,b);break e}else for(Je&&(_r=Ox(o.stateNode.containerInfo),hr=o,wt=!0,Ir=null,Ti=!1),h=Ku(o,null,g,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Hs(),g===b){o=xn(i,o,h);break e}tr(i,o,g,h)}o=o.child}return o;case 5:return rh(o),i===null&&ql(o),g=o.type,b=o.pendingProps,j=i!==null?i.memoizedProps:null,M=b.children,we(g,b)?M=null:j!==null&&we(g,j)&&(o.flags|=32),Mh(i,o),tr(i,o,M,h),o.child;case 6:return i===null&&ql(o),null;case 13:return Bh(i,o,h);case 4:return nc(o,o.stateNode.containerInfo),g=o.pendingProps,i===null?o.child=Us(o,null,g,h):tr(i,o,g,h),o.child;case 11:return g=o.type,b=o.pendingProps,b=o.elementType===g?b:Mr(g,b),Rh(i,o,g,b,h);case 7:return tr(i,o,o.pendingProps,h),o.child;case 8:return tr(i,o,o.pendingProps.children,h),o.child;case 12:return tr(i,o,o.pendingProps.children,h),o.child;case 10:e:{if(g=o.type._context,b=o.pendingProps,j=o.memoizedProps,M=b.value,Qu(o,g,M),j!==null)if(Or(j.value,M)){if(j.children===b.children&&!nr.current){o=xn(i,o,h);break e}}else for(j=o.child,j!==null&&(j.return=o);j!==null;){var q=j.dependencies;if(q!==null){M=j.child;for(var se=q.firstContext;se!==null;){if(se.context===g){if(j.tag===1){se=gn(-1,h&-h),se.tag=2;var xe=j.updateQueue;if(xe!==null){xe=xe.shared;var Te=xe.pending;Te===null?se.next=se:(se.next=Te.next,Te.next=se),xe.pending=se}}j.lanes|=h,se=j.alternate,se!==null&&(se.lanes|=h),ec(j.return,h,o),q.lanes|=h;break}se=se.next}}else if(j.tag===10)M=j.type===o.type?null:j.child;else if(j.tag===18){if(M=j.return,M===null)throw Error(c(341));M.lanes|=h,q=M.alternate,q!==null&&(q.lanes|=h),ec(M,h,o),M=j.sibling}else M=j.child;if(M!==null)M.return=j;else for(M=j;M!==null;){if(M===o){M=null;break}if(j=M.sibling,j!==null){j.return=M.return,M=j;break}M=M.return}j=M}tr(i,o,b.children,h),o=o.child}return o;case 9:return b=o.type,g=o.pendingProps.children,Vs(o,h),b=Sr(b),g=g(b),o.flags|=1,tr(i,o,g,h),o.child;case 14:return g=o.type,b=Mr(g,o.pendingProps),b=Mr(g.type,b),Dh(i,o,g,b,h);case 15:return Oh(i,o,o.type,o.pendingProps,h);case 17:return g=o.type,b=o.pendingProps,b=o.elementType===g?b:Mr(g,b),eo(i,o),o.tag=1,sr(g)?(i=!0,Ta(o)):i=!1,Vs(o,h),Nh(o,g,b),gc(o,g,b,h),wc(null,o,g,!0,i,h);case 19:return Hh(i,o,h);case 22:return Ih(i,o,h)}throw Error(c(156,o.tag))};function ff(i,o){return Hl(i,o)}function D1(i,o,h,g){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(i,o,h,g){return new D1(i,o,h,g)}function Wc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function O1(i){if(typeof i=="function")return Wc(i)?1:0;if(i!=null){if(i=i.$$typeof,i===v)return 11;if(i===_)return 14}return 2}function zn(i,o){var h=i.alternate;return h===null?(h=kr(i.tag,o,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=o,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,o=i.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function vo(i,o,h,g,b,j){var M=2;if(g=i,typeof i=="function")Wc(i)&&(M=1);else if(typeof i=="string")M=5;else e:switch(i){case p:return xs(h.children,b,j,o);case m:M=8,b|=8;break;case x:return i=kr(12,h,o,b|2),i.elementType=x,i.lanes=j,i;case w:return i=kr(13,h,o,b),i.elementType=w,i.lanes=j,i;case C:return i=kr(19,h,o,b),i.elementType=C,i.lanes=j,i;case E:return wo(h,b,j,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case y:M=10;break e;case S:M=9;break e;case v:M=11;break e;case _:M=14;break e;case N:M=16,g=null;break e}throw Error(c(130,i==null?i:typeof i,""))}return o=kr(M,h,o,b),o.elementType=i,o.type=g,o.lanes=j,o}function xs(i,o,h,g){return i=kr(7,i,g,o),i.lanes=h,i}function wo(i,o,h,g){return i=kr(22,i,g,o),i.elementType=E,i.lanes=h,i.stateNode={isHidden:!1},i}function Vc(i,o,h){return i=kr(6,i,null,o),i.lanes=h,i}function Yc(i,o,h){return o=kr(4,i.children!==null?i.children:[],i.key,o),o.lanes=h,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function I1(i,o,h,g,b){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ue,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bl(0),this.expirationTimes=Bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.identifierPrefix=g,this.onRecoverableError=b,Je&&(this.mutableSourceEagerHydrationData=null)}function pf(i,o,h,g,b,j,M,q,se){return i=new I1(i,o,h,q,se),o===1?(o=1,j===!0&&(o|=8)):o=0,j=kr(3,null,null,o),i.current=j,j.stateNode=i,j.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},rc(j),i}function mf(i){if(!i)return Rn;i=i._reactInternals;e:{if(F(i)!==i||i.tag!==1)throw Error(c(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(sr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(c(171))}if(i.tag===1){var h=i.type;if(sr(h))return Lu(i,h,o)}return o}function gf(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(c(188)):(i=Object.keys(i).join(","),Error(c(268,i)));return i=D(o),i===null?null:i.stateNode}function xf(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<o?h:o}}function bo(i,o){xf(i,o),(i=i.alternate)&&xf(i,o)}function M1(i){return i=D(i),i===null?null:i.stateNode}function L1(){return null}return t.attemptContinuousHydration=function(i){if(i.tag===13){var o=qr(i,134217728);if(o!==null){var h=Zt();jr(o,i,134217728,h)}bo(i,134217728)}},t.attemptDiscreteHydration=function(i){if(i.tag===13){var o=qr(i,1);if(o!==null){var h=Zt();jr(o,i,1,h)}bo(i,1)}},t.attemptHydrationAtCurrentPriority=function(i){if(i.tag===13){var o=Ln(i),h=qr(i,o);if(h!==null){var g=Zt();jr(h,i,o,g)}bo(i,o)}},t.attemptSynchronousHydration=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var h=Pi(o.pendingLanes);h!==0&&(Gl(o,h|1),or(o,zt()),!($e&6)&&(Qs(),Xr()))}break;case 13:sf(function(){var g=qr(i,1);if(g!==null){var b=Zt();jr(g,i,1,b)}}),bo(i,1)}},t.batchedUpdates=function(i,o){var h=$e;$e|=1;try{return i(o)}finally{$e=h,$e===0&&(Qs(),Ma&&Xr())}},t.createComponentSelector=function(i){return{$$typeof:io,value:i}},t.createContainer=function(i,o,h,g,b,j,M){return pf(i,o,!1,null,h,g,b,j,M)},t.createHasPseudoClassSelector=function(i){return{$$typeof:ao,value:i}},t.createHydrationContainer=function(i,o,h,g,b,j,M,q,se){return i=pf(h,g,!0,i,b,j,M,q,se),i.context=mf(null),h=i.current,g=Zt(),b=Ln(h),j=gn(g,b),j.callback=o??null,On(h,j,b),i.current.lanes=b,Ai(i,b,g),or(i,g),i},t.createPortal=function(i,o,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:g==null?null:""+g,children:i,containerInfo:o,implementation:h}},t.createRoleSelector=function(i){return{$$typeof:oo,value:i}},t.createTestNameSelector=function(i){return{$$typeof:lo,value:i}},t.createTextSelector=function(i){return{$$typeof:co,value:i}},t.deferredUpdates=function(i){var o=et,h=Pt.transition;try{return Pt.transition=null,et=16,i()}finally{et=o,Pt.transition=h}},t.discreteUpdates=function(i,o,h,g,b){var j=et,M=Pt.transition;try{return Pt.transition=null,et=1,i(o,h,g,b)}finally{et=j,Pt.transition=M,$e===0&&Qs()}},t.findAllNodes=Dc,t.findBoundingRects=function(i,o){if(!ue)throw Error(c(363));o=Dc(i,o),i=[];for(var h=0;h<o.length;h++)i.push(te(o[h]));for(o=i.length-1;0<o;o--){h=i[o];for(var g=h.x,b=g+h.width,j=h.y,M=j+h.height,q=o-1;0<=q;q--)if(o!==q){var se=i[q],xe=se.x,Te=xe+se.width,ze=se.y,ke=ze+se.height;if(g>=xe&&j>=ze&&b<=Te&&M<=ke){i.splice(o,1);break}else if(g!==xe||h.width!==se.width||ke<j||ze>M){if(!(j!==ze||h.height!==se.height||Te<g||xe>b)){xe>g&&(se.width+=xe-g,se.x=g),Te<b&&(se.width=b-xe),i.splice(o,1);break}}else{ze>j&&(se.height+=ze-j,se.y=j),ke<M&&(se.height=M-ze),i.splice(o,1);break}}}return i},t.findHostInstance=gf,t.findHostInstanceWithNoPortals=function(i){return i=re(i),i=i!==null?k(i):null,i===null?null:i.stateNode},t.findHostInstanceWithWarning=function(i){return gf(i)},t.flushControlled=function(i){var o=$e;$e|=1;var h=Pt.transition,g=et;try{Pt.transition=null,et=1,i()}finally{et=g,Pt.transition=h,$e=o,$e===0&&(Qs(),Xr())}},t.flushPassiveEffects=gs,t.flushSync=sf,t.focusWithin=function(i,o){if(!ue)throw Error(c(363));for(i=Ac(i),o=tf(i,o),o=Array.from(o),i=0;i<o.length;){var h=o[i++];if(!je(h)){if(h.tag===5&&Oe(h.stateNode))return!0;for(h=h.child;h!==null;)o.push(h),h=h.sibling}}return!1},t.getCurrentUpdatePriority=function(){return et},t.getFindAllNodesFailureDescription=function(i,o){if(!ue)throw Error(c(363));var h=0,g=[];i=[Ac(i),0];for(var b=0;b<i.length;){var j=i[b++],M=i[b++],q=o[M];if((j.tag!==5||!je(j))&&(Tc(j,q)&&(g.push(Rc(q)),M++,M>h&&(h=M)),M<o.length))for(j=j.child;j!==null;)i.push(j,M),j=j.sibling}if(h<o.length){for(i=[];h<o.length;h++)i.push(Rc(o[h]));return`findAllNodes was able to match part of the selector:
  `+(g.join(" > ")+`

No matching component was found for:
  `)+i.join(" > ")}return null},t.getPublicRootInstance=function(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return Z(i.child.stateNode);default:return i.child.stateNode}},t.injectIntoDevTools=function(i){if(i={bundleType:i.bundleType,version:i.version,rendererPackageName:i.rendererPackageName,rendererConfig:i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:d.ReactCurrentDispatcher,findHostInstanceByFiber:M1,findFiberByHostInstance:i.findFiberByHostInstance||L1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")i=!1;else{var o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(o.isDisabled||!o.supportsFiber)i=!0;else{try{Ia=o.inject(i),$r=o}catch{}i=!!o.checkDCE}}return i},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(i,o,h,g){if(!ue)throw Error(c(363));i=Dc(i,o);var b=nt(i,h,g).disconnect;return{disconnect:function(){b()}}},t.registerMutableSourceForHydration=function(i,o){var h=o._getVersion;h=h(o._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[o,h]:i.mutableSourceEagerHydrationData.push(o,h)},t.runWithPriority=function(i,o){var h=et;try{return et=i,o()}finally{et=h}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(i,o,h,g){var b=o.current,j=Zt(),M=Ln(b);return h=mf(h),o.context===null?o.context=h:o.pendingContext=h,o=gn(j,M),o.payload={element:i},g=g===void 0?null:g,g!==null&&(o.callback=g),i=On(b,o,M),i!==null&&(jr(i,b,M,j),Wa(i,b,M)),M},t};vx.exports=k8;var E8=vx.exports;const P8=Sm(E8);var wx={exports:{}},Ls={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ls.ConcurrentRoot=1;Ls.ContinuousEventPriority=4;Ls.DefaultEventPriority=16;Ls.DiscreteEventPriority=1;Ls.IdleEventPriority=536870912;Ls.LegacyRoot=0;wx.exports=Ls;var bx=wx.exports;const Dp={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Op=!1,Ip=!1;const Pu=".react-konva-event",A8=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,T8=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,R8={};function Rl(r,e,t=R8){if(!Op&&"zIndex"in e&&(console.warn(T8),Op=!0),!Ip&&e.draggable){var n=e.x!==void 0||e.y!==void 0,a=e.onDragEnd||e.onDragMove;n&&!a&&(console.warn(A8),Ip=!0)}for(var l in t)if(!Dp[l]){var c=l.slice(0,2)==="on",d=t[l]!==e[l];if(c&&d){var u=l.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),r.off(u,t[l])}var f=!e.hasOwnProperty(l);f&&r.setAttr(l,void 0)}var p=e._useStrictMode,m={},x=!1;const y={};for(var l in e)if(!Dp[l]){var c=l.slice(0,2)==="on",S=t[l]!==e[l];if(c&&S){var u=l.substr(2).toLowerCase();u.substr(0,7)==="content"&&(u="content"+u.substr(7,1).toUpperCase()+u.substr(8)),e[l]&&(y[u]=e[l])}!c&&(e[l]!==t[l]||p&&e[l]!==r.getAttr(l))&&(x=!0,m[l]=e[l])}x&&(r.setAttrs(m),os(r));for(var u in y)r.on(u+Pu,y[u])}function os(r){if(!_e.autoDrawEnabled){var e=r.getLayer()||r.getStage();e&&e.batchDraw()}}const _x={},D8={};Ts.Node.prototype._applyProps=Rl;function O8(r,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}r.add(e),os(r)}function I8(r,e,t){let n=Ts[r];n||(console.error(`Konva has no node with the type ${r}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${r}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=Ts.Group);const a={},l={};for(var c in e){var d=c.slice(0,2)==="on";d?l[c]=e[c]:a[c]=e[c]}const u=new n(a);return Rl(u,l),u}function M8(r,e,t){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${r}"`)}function L8(r,e,t){return!1}function F8(r){return r}function z8(){return null}function B8(){return null}function G8(r,e,t,n){return D8}function H8(){}function U8(r){}function W8(r,e){return!1}function V8(){return _x}function Y8(){return _x}const $8=setTimeout,X8=clearTimeout,q8=-1;function K8(r,e){return!1}const Q8=!1,Z8=!0,J8=!0;function e_(r,e){e.parent===r?e.moveToTop():r.add(e),os(r)}function t_(r,e){e.parent===r?e.moveToTop():r.add(e),os(r)}function Sx(r,e,t){e._remove(),r.add(e),e.setZIndex(t.getZIndex()),os(r)}function r_(r,e,t){Sx(r,e,t)}function n_(r,e){e.destroy(),e.off(Pu),os(r)}function s_(r,e){e.destroy(),e.off(Pu),os(r)}function i_(r,e,t){console.error(`Text components are not yet supported in ReactKonva. You text is: "${t}"`)}function a_(r,e,t){}function o_(r,e,t,n,a){Rl(r,a,n)}function l_(r){r.hide(),os(r)}function c_(r){}function d_(r,e){(e.visible==null||e.visible)&&r.show()}function u_(r,e){}function h_(r){}function f_(){}const p_=()=>bx.DefaultEventPriority,m_=Object.freeze(Object.defineProperty({__proto__:null,appendChild:e_,appendChildToContainer:t_,appendInitialChild:O8,cancelTimeout:X8,clearContainer:h_,commitMount:a_,commitTextUpdate:i_,commitUpdate:o_,createInstance:I8,createTextInstance:M8,detachDeletedInstance:f_,finalizeInitialChildren:L8,getChildHostContext:Y8,getCurrentEventPriority:p_,getPublicInstance:F8,getRootHostContext:V8,hideInstance:l_,hideTextInstance:c_,idlePriority:Vo.unstable_IdlePriority,insertBefore:Sx,insertInContainerBefore:r_,isPrimaryRenderer:Q8,noTimeout:q8,now:Vo.unstable_now,prepareForCommit:z8,preparePortalMount:B8,prepareUpdate:G8,removeChild:n_,removeChildFromContainer:s_,resetAfterCommit:H8,resetTextContent:U8,run:Vo.unstable_runWithPriority,scheduleTimeout:$8,shouldDeprioritizeSubtree:W8,shouldSetTextContent:K8,supportsMutation:J8,unhideInstance:d_,unhideTextInstance:u_,warnsIfNotActing:Z8},Symbol.toStringTag,{value:"Module"}));var g_=Object.defineProperty,x_=Object.defineProperties,y_=Object.getOwnPropertyDescriptors,Mp=Object.getOwnPropertySymbols,v_=Object.prototype.hasOwnProperty,w_=Object.prototype.propertyIsEnumerable,Lp=(r,e,t)=>e in r?g_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Fp=(r,e)=>{for(var t in e||(e={}))v_.call(e,t)&&Lp(r,t,e[t]);if(Mp)for(var t of Mp(e))w_.call(e,t)&&Lp(r,t,e[t]);return r},b_=(r,e)=>x_(r,y_(e)),zp,Bp;typeof window<"u"&&((zp=window.document)!=null&&zp.createElement||((Bp=window.navigator)==null?void 0:Bp.product)==="ReactNative")?A.useLayoutEffect:A.useEffect;function Cx(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const a=Cx(n,e,t);if(a)return a;n=n.sibling}}function Nx(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const Gp=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=Gp;return}return Gp.apply(this,arguments)};const Au=Nx(A.createContext(null));class jx extends A.Component{render(){return A.createElement(Au.Provider,{value:this._reactInternals},this.props.children)}}function __(){const r=A.useContext(Au);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=A.useId();return A.useMemo(()=>{for(const n of[r,r==null?void 0:r.alternate]){if(!n)continue;const a=Cx(n,!1,l=>{let c=l.memoizedState;for(;c;){if(c.memoizedState===e)return!0;c=c.next}});if(a)return a}},[r,e])}function S_(){const r=__(),[e]=A.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const a=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;a&&a!==Au&&!e.has(a)&&e.set(a,A.useContext(Nx(a)))}t=t.return}return e}function C_(){const r=S_();return A.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>A.createElement(e,null,A.createElement(t.Provider,b_(Fp({},n),{value:r.get(t)}))),e=>A.createElement(jx,Fp({},e))),[r])}function N_(r){const e=Ze.useRef({});return Ze.useLayoutEffect(()=>{e.current=r}),Ze.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const j_=r=>{const e=Ze.useRef(null),t=Ze.useRef(null),n=Ze.useRef(null),a=N_(r),l=C_(),c=d=>{const{forwardedRef:u}=r;u&&(typeof u=="function"?u(d):u.current=d)};return Ze.useLayoutEffect(()=>(t.current=new Ts.Stage({width:r.width,height:r.height,container:e.current}),c(t.current),n.current=oa.createContainer(t.current,bx.LegacyRoot,!1,null),oa.updateContainer(Ze.createElement(l,{},r.children),n.current),()=>{Ts.isBrowser&&(c(null),oa.updateContainer(null,n.current,null),t.current.destroy())}),[]),Ze.useLayoutEffect(()=>{c(t.current),Rl(t.current,r,a),oa.updateContainer(Ze.createElement(l,{},r.children),n.current,null)}),Ze.createElement("div",{ref:e,id:r.id,accessKey:r.accessKey,className:r.className,role:r.role,style:r.style,tabIndex:r.tabIndex,title:r.title})},k_="Layer",Hp="Group",E_="Rect",Up="Line",P_="Text",oa=P8(m_);oa.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Ze.version,rendererPackageName:"react-konva"});const A_=Ze.forwardRef((r,e)=>Ze.createElement(jx,{},Ze.createElement(j_,{...r,forwardedRef:e})));async function T_(r,e,t,n=!1,a){try{const{data:{user:l}}=await Qe.auth.getUser();if(!l)return{success:!1,error:"Not authenticated"};const c={name:r,description:t,objects:e,is_public:n,user_id:l.id,updated_at:new Date().toISOString()};if(a){const{error:d}=await Qe.from("fingerpark_projects").update(c).eq("id",a);if(d)throw d;return{success:!0,projectId:a}}else{const{data:d,error:u}=await Qe.from("fingerpark_projects").insert([c]).select().single();if(u)throw u;return{success:!0,projectId:d.id}}}catch(l){return console.error("Save project error:",l),{success:!1,error:l.message}}}async function R_(r){try{const{data:e,error:t}=await Qe.from("fingerpark_projects").select("*").eq("id",r).single();if(t)throw t;return e}catch(e){return console.error("Load project error:",e),null}}async function D_(){try{const{data:{user:r}}=await Qe.auth.getUser();if(!r)return[];const{data:e,error:t}=await Qe.from("fingerpark_projects").select("*").eq("user_id",r.id).order("updated_at",{ascending:!1});if(t)throw t;return e||[]}catch(r){return console.error("Get my projects error:",r),[]}}async function O_(r){try{const{error:e}=await Qe.from("fingerpark_projects").delete().eq("id",r);if(e)throw e;return!0}catch(e){return console.error("Delete project error:",e),!1}}function I_(r){let u=0,f=0,p=0;r.forEach(E=>{const R=E.length/20,O=E.width/20,I=E.height,G=R*O;u+=G;const F=2*(R+O),Y=4*I;f+=F+Y;const re=Math.ceil(F/6);p+=re+16});const m=Math.ceil(u/4608),x=Math.ceil(f/96),y=Math.ceil(p/100),S=Math.max(3,r.length),v=m*35,w=x*8,C=y*12,_=S*3,N=v+w+C+_;return{plywood:{sheets:m,type:`1/2" plywood (4'  8')`,cost:v},lumber:{boards:x,type:"24 lumber (8')",cost:w},screws:{count:p,type:'2" wood screws',cost:C},sandpaper:{sheets:S,cost:_},total:N}}const Rt=20,ti=48*Rt,ri=36*Rt,ea={rails:[{id:"flat-rail",name:"Flat Rail",icon:"",defaultWidth:8,defaultLength:12,defaultHeight:2},{id:"round-rail",name:"Round Rail",icon:"",defaultWidth:8,defaultLength:12,defaultHeight:2},{id:"kinked-rail",name:"Kinked Rail",icon:"",defaultWidth:8,defaultLength:12,defaultHeight:2}],ledges:[{id:"flat-ledge",name:"Flat Ledge",icon:"",defaultWidth:12,defaultLength:16,defaultHeight:3},{id:"angled-ledge",name:"Angled Ledge",icon:"",defaultWidth:12,defaultLength:16,defaultHeight:3}],stairs:[{id:"stair-set",name:"Stair Set",icon:"",defaultWidth:12,defaultLength:12,defaultHeight:4},{id:"gap",name:"Gap",icon:"",defaultWidth:12,defaultLength:8,defaultHeight:2}],ramps:[{id:"quarter-pipe",name:"Quarter Pipe",icon:"",defaultWidth:12,defaultLength:8,defaultHeight:6},{id:"bank-ramp",name:"Bank Ramp",icon:"",defaultWidth:12,defaultLength:8,defaultHeight:4},{id:"launch-ramp",name:"Launch Ramp",icon:"",defaultWidth:10,defaultLength:6,defaultHeight:3}],boxes:[{id:"flat-box",name:"Flat Box",icon:"",defaultWidth:12,defaultLength:12,defaultHeight:3},{id:"pyramid",name:"Pyramid",icon:"",defaultWidth:12,defaultLength:12,defaultHeight:4},{id:"manual-pad",name:"Manual Pad",icon:"",defaultWidth:16,defaultLength:4,defaultHeight:2}]};function M_(){const[r,e]=A.useState([]),[t,n]=A.useState(null),[a,l]=A.useState(!0),[c,d]=A.useState("My Fingerpark Setup"),u=A.useRef(null),[f,p]=A.useState(null),[m,x]=A.useState(!1),[y,S]=A.useState(!1),[v,w]=A.useState(!1),[C,_]=A.useState(""),[N,E]=A.useState(!1),[R,O]=A.useState([]),[I,G]=A.useState(null),F=V=>{const U={id:`${V.id}-${Date.now()}`,type:V.id.includes("rail")?"rail":V.id.includes("ledge")?"ledge":V.id.includes("stair")||V.id.includes("gap")?"stairs":V.id.includes("ramp")||V.id.includes("quarter")||V.id.includes("bank")||V.id.includes("launch")?"ramp":"box",subtype:V.id,x:ti/2-V.defaultLength*Rt/2,y:ri/2-V.defaultWidth*Rt/2,width:V.defaultWidth*Rt,length:V.defaultLength*Rt,height:V.defaultHeight,rotation:0,color:"#8B4513"};e([...r,U]),n(U.id),de.success(`Added ${V.name}`)},Y=(V,U)=>{e(r.map(X=>X.id===V?{...X,...U}:X))},re=()=>{t&&(e(r.filter(V=>V.id!==t)),n(null),de.success("Obstacle deleted"))},D=()=>{confirm("Clear all obstacles?")&&(e([]),n(null),de.success("Canvas cleared"))},H=()=>{if(!u.current)return;const V=u.current.toDataURL({pixelRatio:2}),U=document.createElement("a");U.download=`${c.replace(/[^a-z0-9]/gi,"_")}_blueprint.png`,U.href=V,document.body.appendChild(U),U.click(),document.body.removeChild(U),de.success("Blueprint exported!")},k=async()=>{const V=await T_(c,r,C,N,f||void 0);V.success?(p(V.projectId||null),x(!1),de.success("Project saved!"),_(""),E(!1)):de.error(V.error||"Failed to save project")},T=async V=>{const U=await R_(V);U?(e(U.objects),d(U.name),p(U.id),S(!1),de.success(`Loaded "${U.name}"`)):de.error("Failed to load project")},Z=async V=>{if(!confirm("Delete this project?"))return;await O_(V)?(de.success("Project deleted"),W()):de.error("Failed to delete project")},W=async()=>{const V=await D_();O(V)},ee=()=>{const V=I_(r);G(V),w(!0)},J=r.find(V=>V.id===t);return s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx("div",{className:"border-b border-border bg-card px-4 py-3",children:s.jsxs("div",{className:"max-w-[1800px] mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Fingerpark Builder"}),s.jsx(dt,{value:c,onChange:V=>d(V.target.value),className:"w-64 h-8",placeholder:"Park name..."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>l(!a),className:"gap-2",children:[s.jsx(Vd,{className:"w-4 h-4"}),a?"Hide":"Show"," Grid"]}),s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>{W(),S(!0)},className:"gap-2",children:[s.jsx(Cm,{className:"w-4 h-4"}),"Load"]}),s.jsxs(le,{variant:"outline",size:"sm",onClick:()=>x(!0),className:"gap-2",children:[s.jsx(Jo,{className:"w-4 h-4"}),"Save"]}),s.jsxs(le,{variant:"outline",size:"sm",onClick:ee,className:"gap-2",disabled:r.length===0,children:[s.jsx(km,{className:"w-4 h-4"}),"Materials List"]}),s.jsxs(le,{variant:"outline",size:"sm",onClick:D,className:"gap-2",children:[s.jsx(pm,{className:"w-4 h-4"}),"Clear"]}),s.jsxs(le,{variant:"outline",size:"sm",onClick:H,className:"gap-2",children:[s.jsx(Hr,{className:"w-4 h-4"}),"Export Blueprint"]})]})]})}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsx("div",{className:"w-64 border-r border-border bg-card overflow-y-auto",children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2 uppercase tracking-wider",children:"Rails"}),s.jsx("div",{className:"space-y-1",children:ea.rails.map(V=>s.jsxs("button",{onClick:()=>F(V),className:"w-full text-left px-3 py-2 rounded bg-secondary hover:bg-secondary/80 transition-colors flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-lg",children:V.icon}),s.jsx("span",{children:V.name})]},V.id))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2 uppercase tracking-wider",children:"Ledges"}),s.jsx("div",{className:"space-y-1",children:ea.ledges.map(V=>s.jsxs("button",{onClick:()=>F(V),className:"w-full text-left px-3 py-2 rounded bg-secondary hover:bg-secondary/80 transition-colors flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-lg",children:V.icon}),s.jsx("span",{children:V.name})]},V.id))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2 uppercase tracking-wider",children:"Stairs"}),s.jsx("div",{className:"space-y-1",children:ea.stairs.map(V=>s.jsxs("button",{onClick:()=>F(V),className:"w-full text-left px-3 py-2 rounded bg-secondary hover:bg-secondary/80 transition-colors flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-lg",children:V.icon}),s.jsx("span",{children:V.name})]},V.id))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2 uppercase tracking-wider",children:"Ramps"}),s.jsx("div",{className:"space-y-1",children:ea.ramps.map(V=>s.jsxs("button",{onClick:()=>F(V),className:"w-full text-left px-3 py-2 rounded bg-secondary hover:bg-secondary/80 transition-colors flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-lg",children:V.icon}),s.jsx("span",{children:V.name})]},V.id))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2 uppercase tracking-wider",children:"Boxes"}),s.jsx("div",{className:"space-y-1",children:ea.boxes.map(V=>s.jsxs("button",{onClick:()=>F(V),className:"w-full text-left px-3 py-2 rounded bg-secondary hover:bg-secondary/80 transition-colors flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-lg",children:V.icon}),s.jsx("span",{children:V.name})]},V.id))})]})]})}),s.jsxs("div",{className:"flex-1 flex flex-col bg-muted/20 overflow-auto",children:[s.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:s.jsx("div",{className:"bg-white rounded-lg shadow-lg",style:{width:ti,height:ri},children:s.jsx(A_,{ref:u,width:ti,height:ri,onClick:V=>{V.target===V.target.getStage()&&n(null)},children:s.jsxs(k_,{children:[a&&s.jsxs(Hp,{children:[Array.from({length:Math.ceil(ti/Rt)+1}).map((V,U)=>s.jsx(Up,{points:[U*Rt,0,U*Rt,ri],stroke:"#e0e0e0",strokeWidth:U%5===0?1.5:.5},`v-${U}`)),Array.from({length:Math.ceil(ri/Rt)+1}).map((V,U)=>s.jsx(Up,{points:[0,U*Rt,ti,U*Rt],stroke:"#e0e0e0",strokeWidth:U%5===0?1.5:.5},`h-${U}`))]}),r.map(V=>s.jsxs(Hp,{x:V.x,y:V.y,rotation:V.rotation,draggable:!0,onClick:()=>n(V.id),onDragEnd:U=>{Y(V.id,{x:U.target.x(),y:U.target.y()})},children:[s.jsx(E_,{width:V.length,height:V.width,fill:V.color,stroke:t===V.id?"#3b82f6":"#666",strokeWidth:t===V.id?3:1,shadowColor:"black",shadowBlur:5,shadowOpacity:.3,shadowOffsetY:2}),s.jsx(P_,{text:`${(V.length/Rt).toFixed(1)}"  ${(V.width/Rt).toFixed(1)}"`,fontSize:10,fill:"white",align:"center",verticalAlign:"middle",width:V.length,height:V.width})]},V.id))]})})})}),s.jsx("div",{className:"border-t border-border bg-card px-4 py-2 text-sm text-muted-foreground",children:s.jsxs("div",{className:"max-w-[1800px] mx-auto flex items-center justify-between",children:[s.jsxs("div",{children:["Canvas: ",ti/Rt,'"  ',ri/Rt,'" | Grid: ',a?"On":"Off"]}),s.jsxs("div",{children:["Objects: ",r.length," | Selected: ",t?"Yes":"None"]})]})})]}),J&&s.jsx("div",{className:"w-64 border-l border-border bg-card p-4 overflow-y-auto",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{children:s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3 uppercase tracking-wider",children:"Properties"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-xs",children:"Length (inches)"}),s.jsx(dt,{type:"number",value:(J.length/Rt).toFixed(1),onChange:V=>Y(t,{length:parseFloat(V.target.value)*Rt}),step:"0.5",className:"h-8"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-xs",children:"Width (inches)"}),s.jsx(dt,{type:"number",value:(J.width/Rt).toFixed(1),onChange:V=>Y(t,{width:parseFloat(V.target.value)*Rt}),step:"0.5",className:"h-8"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-xs",children:"Height (inches)"}),s.jsx(dt,{type:"number",value:J.height,onChange:V=>Y(t,{height:parseFloat(V.target.value)}),step:"0.5",className:"h-8"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-xs",children:"Rotation (degrees)"}),s.jsx(dt,{type:"number",value:J.rotation,onChange:V=>Y(t,{rotation:parseFloat(V.target.value)}),step:"15",className:"h-8"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{className:"text-xs",children:"Color"}),s.jsx("input",{type:"color",value:J.color,onChange:V=>Y(t,{color:V.target.value}),className:"w-full h-8 border border-border rounded"})]}),s.jsxs(le,{onClick:re,variant:"destructive",className:"w-full gap-2",size:"sm",children:[s.jsx(kn,{className:"w-4 h-4"}),"Delete Obstacle"]})]})})]}),s.jsx(Go,{open:m,onOpenChange:x,children:s.jsxs(Ho,{children:[s.jsxs(Uo,{children:[s.jsx(Wo,{children:"Save Fingerpark Project"}),s.jsx(qc,{children:"Save your park setup to load later or share with others"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{children:"Project Name"}),s.jsx(dt,{value:c,onChange:V=>d(V.target.value),placeholder:"My awesome park setup..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{children:"Description (optional)"}),s.jsx(Hd,{value:C,onChange:V=>_(V.target.value),placeholder:"Describe your park setup...",rows:3})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"public",checked:N,onChange:V=>E(V.target.checked),className:"w-4 h-4"}),s.jsx(fe,{htmlFor:"public",className:"cursor-pointer",children:"Make this project public (others can view and use it)"})]})]}),s.jsxs(wf,{children:[s.jsx(le,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),s.jsxs(le,{onClick:k,children:[s.jsx(Jo,{className:"w-4 h-4 mr-2"}),"Save Project"]})]})]})}),s.jsx(Go,{open:y,onOpenChange:S,children:s.jsxs(Ho,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsxs(Uo,{children:[s.jsx(Wo,{children:"Load Fingerpark Project"}),s.jsx(qc,{children:"Select a saved project to load"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:R.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No saved projects yet. Create your first park setup!"}):s.jsx("div",{className:"space-y-2",children:R.map(V=>s.jsx("div",{className:"border border-border rounded-lg p-4 hover:bg-secondary/50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:V.name}),V.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:V.description}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[s.jsxs("span",{children:[V.objects.length," obstacles"]}),s.jsxs("span",{children:["Updated ",new Date(V.updated_at).toLocaleDateString()]}),V.is_public&&s.jsx("span",{className:"text-blue-500",children:"Public"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(le,{size:"sm",onClick:()=>T(V.id),children:"Load"}),s.jsx(le,{size:"sm",variant:"destructive",onClick:()=>Z(V.id),children:"Delete"})]})]})},V.id))})})]})}),s.jsx(Go,{open:v,onOpenChange:w,children:s.jsxs(Ho,{className:"max-w-lg",children:[s.jsxs(Uo,{children:[s.jsx(Wo,{children:"Materials Estimate"}),s.jsx(qc,{children:"Estimated materials needed to build this park setup"})]}),I&&s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"bg-secondary/30 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center border-b border-border pb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-foreground",children:"Plywood"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:I.plywood.type})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold",children:[I.plywood.sheets," sheets"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["$",I.plywood.cost.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-between items-center border-b border-border pb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-foreground",children:"Lumber"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:I.lumber.type})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold",children:[I.lumber.boards," boards"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["$",I.lumber.cost.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-between items-center border-b border-border pb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-foreground",children:"Screws"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:I.screws.type})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold",children:["~",I.screws.count," screws"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["$",I.screws.cost.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-between items-center border-b border-border pb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-foreground",children:"Sandpaper"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"120-220 grit"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold",children:[I.sandpaper.sheets," sheets"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["$",I.sandpaper.cost.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t-2 border-border",children:[s.jsx("div",{className:"font-bold text-lg text-foreground",children:"Estimated Total"}),s.jsxs("div",{className:"font-bold text-lg text-foreground",children:["$",I.total.toFixed(2)]})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 rounded p-3",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Note:"}),s.jsx("p",{children:"Prices are estimates and may vary by location. This list includes basic materials. You may also need: wood glue, paint/stain, measuring tools, saw, drill, and safety equipment."})]})]}),s.jsx(wf,{children:s.jsx(le,{onClick:()=>w(!1),children:"Close"})})]})})]})}const L_=()=>{const r=Ey();return A.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",r.pathname)},[r.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},F_=new N5,z_=()=>s.jsx(E5,{children:s.jsx(k5,{client:F_,children:s.jsxs(Zw,{children:[s.jsx(av,{}),s.jsx(uv,{}),s.jsx(Py,{children:s.jsxs(Ay,{children:[s.jsx(Er,{path:"/",element:s.jsx(L4,{})}),s.jsx(Er,{path:"/auth",element:s.jsx(F4,{})}),s.jsx(Er,{path:"/designs",element:s.jsx(V4,{})}),s.jsx(Er,{path:"/templates",element:s.jsx($4,{})}),s.jsx(Er,{path:"/gallery",element:s.jsx(q4,{})}),s.jsx(Er,{path:"/marketplace",element:s.jsx(Z4,{})}),s.jsx(Er,{path:"/marketplace/design/:id",element:s.jsx(eb,{})}),s.jsx(Er,{path:"/marketplace/upload",element:s.jsx(tb,{})}),s.jsx(Er,{path:"/marketplace/dashboard",element:s.jsx(rb,{})}),s.jsx(Er,{path:"/fingerpark",element:s.jsx(M_,{})}),s.jsx(Er,{path:"/share/:token",element:s.jsx(K4,{})}),s.jsx(Er,{path:"*",element:s.jsx(L_,{})})]})})]})})});Pm(document.getElementById("root")).render(s.jsx(z_,{}));export{jx as F,He as S,C_ as u};
