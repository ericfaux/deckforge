const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/modals-CMZDM3pG.js","assets/vendor-ui-Cxa-s06X.js","assets/vendor-supabase-CoxeBSpk.js","assets/AnimationPreview-CXRsK7qX.js","assets/vendor-react-D-gR2YAX.js","assets/TemplateGalleryModal-BNTGTzAs.js"])))=>i.map(i=>d[i]);
var Qo=Object.defineProperty;var xn=t=>{throw TypeError(t)};var Jo=(t,r,s)=>r in t?Qo(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;var rr=(t,r,s)=>Jo(t,typeof r!="symbol"?r+"":r,s),os=(t,r,s)=>r.has(t)||xn("Cannot "+s);var B=(t,r,s)=>(os(t,r,"read from private field"),s?s.call(t):r.get(t)),xe=(t,r,s)=>r.has(t)?xn("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,s),fe=(t,r,s,n)=>(os(t,r,"write to private field"),n?n.call(t,s):r.set(t,s),s),Fe=(t,r,s)=>(os(t,r,"access private method"),s);var vr=(t,r,s,n)=>({set _(a){fe(t,r,a,s)},get _(){return B(t,r,n)}});import{j as e,c as fa,a as dt,u as Re,P as Ne,B as el,b as jt,d as hr,e as ye,f as nr,R as tl,g as ha,h as ar,i as rl,k as be,l as sl,m as nl,D as pa,n as Lr,o as te,p as Se,S as vt,q as ma,r as xa,s as Wt,t as Gt,v as Zt,w as ls,x as al,L as ce,I as Ie,y as il,z as ol,A as ll,F as cl,C as ga,E as dl,G as ul,H as fl,J as hl,K as pl,M as ml,N as xl,W as ms,O as Er,Q as ya,T as gn,U as gl,V as Be,X as Oe,Y as yl,Z as vl}from"./modals-CMZDM3pG.js";import{a as Is,r as C,b as Pe,X as pr,am as bl,an as yn,ao as wl,ap as jl,aa as Fs,aq as va,ar as ba,af as wa,as as zs,at as ja,ae as Mr,a5 as Na,au as Ar,av as Nl,aw as kl,ax as Cl,ay as _l,az as Sl,aA as El,aB as Al,V as vn,aC as Tl,aD as Pl,aE as Rl,aF as Ol,g as Ls,aG as Dl,aH as Il,aI as Fl,p as zl,D as Ll,F as Ml,B as $l,o as Bl,n as Ul,aJ as Hl,aK as Vl,z as Wl,y as Gl,x as ka,w as Tr,t as Ca,s as sr,q as it,H as Kl,Q as Yl,P as ql,O as Zl,N as Xl,K as Ql,J as Jl,I as _a,A as ec,aL as tc,aM as rc,aN as sc,aO as nc,a2 as ac,a1 as ic,a0 as oc,$ as lc,_ as cc,Y as dc,E as Pr,aP as uc,aQ as fc,aR as hc,aS as pc,u as ie,a3 as ot,T as Dt,aT as mc,aU as xc,aV as gc,aW as yc,aX as xs,ad as Sa,aY as vc,j as Ea,ah as $r,L as bc,aZ as wc,a_ as jc,k as Nc,l as kc,a9 as Cc,a$ as _c,b0 as Sc,b1 as Ec,b2 as Ac,b3 as Tc,b4 as Pc,b5 as Rc,b6 as Oc,m as Dc,G as Ic,i as Fc,b7 as Aa,U as Ta,c as Pa,b8 as zc,a6 as Ms,a7 as Ra,b9 as bn,ab as Lc,ba as Mc,bb as wn,bc as $c,bd as br,be as Bc,bf as Uc,bg as Hc,bh as Vc,bi as jn,bj as Nn,bk as Wc,bl as Gc,bm as Kc,bn as Yc,bo as qc,C as kn,bp as Zc,bq as Xc}from"./vendor-ui-Cxa-s06X.js";import{u as Xt,a as Qc,b as Jc,B as ed,R as td,c as kt}from"./vendor-react-D-gR2YAX.js";import"./vendor-supabase-CoxeBSpk.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Oa,Cn=Is;Oa=Cn.createRoot,Cn.hydrateRoot;function _n(t){const r=rd(t),s=C.forwardRef((n,a)=>{const{children:i,...l}=n,o=C.Children.toArray(i),c=o.find(nd);if(c){const f=c.props.children,h=o.map(p=>p===c?C.Children.count(f)>1?C.Children.only(null):C.isValidElement(f)?f.props.children:null:p);return e.jsx(r,{...l,ref:a,children:C.isValidElement(f)?C.cloneElement(f,void 0,h):null})}return e.jsx(r,{...l,ref:a,children:i})});return s.displayName=`${t}.Slot`,s}function rd(t){const r=C.forwardRef((s,n)=>{const{children:a,...i}=s;if(C.isValidElement(a)){const l=id(a),o=ad(i,a.props);return a.type!==C.Fragment&&(o.ref=n?fa(n,l):l),C.cloneElement(a,o)}return C.Children.count(a)>1?C.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var sd=Symbol("radix.slottable");function nd(t){return C.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===sd}function ad(t,r){const s={...r};for(const n in r){const a=t[n],i=r[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...t,...s}}function id(t){var n,a;let r=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function $s(t){const r=t+"CollectionProvider",[s,n]=dt(r),[a,i]=s(r,{collectionRef:{current:null},itemMap:new Map}),l=d=>{const{scope:m,children:g}=d,x=Pe.useRef(null),N=Pe.useRef(new Map).current;return e.jsx(a,{scope:m,itemMap:N,collectionRef:x,children:g})};l.displayName=r;const o=t+"CollectionSlot",c=_n(o),f=Pe.forwardRef((d,m)=>{const{scope:g,children:x}=d,N=i(o,g),k=Re(m,N.collectionRef);return e.jsx(c,{ref:k,children:x})});f.displayName=o;const h=t+"CollectionItemSlot",p="data-radix-collection-item",b=_n(h),u=Pe.forwardRef((d,m)=>{const{scope:g,children:x,...N}=d,k=Pe.useRef(null),j=Re(m,k),A=i(h,g);return Pe.useEffect(()=>(A.itemMap.set(k,{ref:k,...N}),()=>void A.itemMap.delete(k))),e.jsx(b,{[p]:"",ref:j,children:x})});u.displayName=h;function w(d){const m=i(t+"CollectionConsumer",d);return Pe.useCallback(()=>{const x=m.collectionRef.current;if(!x)return[];const N=Array.from(x.querySelectorAll(`[${p}]`));return Array.from(m.itemMap.values()).sort((A,T)=>N.indexOf(A.ref.current)-N.indexOf(T.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:l,Slot:f,ItemSlot:u},w,n]}var od=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ld="VisuallyHidden",Br=C.forwardRef((t,r)=>e.jsx(Ne.span,{...t,ref:r,style:{...od,...t.style}}));Br.displayName=ld;var cd=Br,Bs="ToastProvider",[Us,dd,ud]=$s("Toast"),[Da]=dt("Toast",[ud]),[fd,Ur]=Da(Bs),Ia=t=>{const{__scopeToast:r,label:s="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=t,[o,c]=C.useState(null),[f,h]=C.useState(0),p=C.useRef(!1),b=C.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${Bs}\`. Expected non-empty \`string\`.`),e.jsx(Us.Provider,{scope:r,children:e.jsx(fd,{scope:r,label:s,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:f,viewport:o,onViewportChange:c,onToastAdd:C.useCallback(()=>h(u=>u+1),[]),onToastRemove:C.useCallback(()=>h(u=>u-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:b,children:l})})};Ia.displayName=Bs;var Fa="ToastViewport",hd=["F8"],gs="toast.viewportPause",ys="toast.viewportResume",za=C.forwardRef((t,r)=>{const{__scopeToast:s,hotkey:n=hd,label:a="Notifications ({hotkey})",...i}=t,l=Ur(Fa,s),o=dd(s),c=C.useRef(null),f=C.useRef(null),h=C.useRef(null),p=C.useRef(null),b=Re(r,p,l.onViewportChange),u=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=l.toastCount>0;C.useEffect(()=>{const m=g=>{var N;n.length!==0&&n.every(k=>g[k]||g.code===k)&&((N=p.current)==null||N.focus())};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[n]),C.useEffect(()=>{const m=c.current,g=p.current;if(w&&m&&g){const x=()=>{if(!l.isClosePausedRef.current){const A=new CustomEvent(gs);g.dispatchEvent(A),l.isClosePausedRef.current=!0}},N=()=>{if(l.isClosePausedRef.current){const A=new CustomEvent(ys);g.dispatchEvent(A),l.isClosePausedRef.current=!1}},k=A=>{!m.contains(A.relatedTarget)&&N()},j=()=>{m.contains(document.activeElement)||N()};return m.addEventListener("focusin",x),m.addEventListener("focusout",k),m.addEventListener("pointermove",x),m.addEventListener("pointerleave",j),window.addEventListener("blur",x),window.addEventListener("focus",N),()=>{m.removeEventListener("focusin",x),m.removeEventListener("focusout",k),m.removeEventListener("pointermove",x),m.removeEventListener("pointerleave",j),window.removeEventListener("blur",x),window.removeEventListener("focus",N)}}},[w,l.isClosePausedRef]);const d=C.useCallback(({tabbingDirection:m})=>{const x=o().map(N=>{const k=N.ref.current,j=[k,..._d(k)];return m==="forwards"?j:j.reverse()});return(m==="forwards"?x.reverse():x).flat()},[o]);return C.useEffect(()=>{const m=p.current;if(m){const g=x=>{var j,A,T;const N=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!N){const L=document.activeElement,O=x.shiftKey;if(x.target===m&&O){(j=f.current)==null||j.focus();return}const _=d({tabbingDirection:O?"backwards":"forwards"}),R=_.findIndex(y=>y===L);cs(_.slice(R+1))?x.preventDefault():O?(A=f.current)==null||A.focus():(T=h.current)==null||T.focus()}};return m.addEventListener("keydown",g),()=>m.removeEventListener("keydown",g)}},[o,d]),e.jsxs(el,{ref:c,role:"region","aria-label":a.replace("{hotkey}",u),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&e.jsx(vs,{ref:f,onFocusFromOutsideViewport:()=>{const m=d({tabbingDirection:"forwards"});cs(m)}}),e.jsx(Us.Slot,{scope:s,children:e.jsx(Ne.ol,{tabIndex:-1,...i,ref:b})}),w&&e.jsx(vs,{ref:h,onFocusFromOutsideViewport:()=>{const m=d({tabbingDirection:"backwards"});cs(m)}})]})});za.displayName=Fa;var La="ToastFocusProxy",vs=C.forwardRef((t,r)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...a}=t,i=Ur(La,s);return e.jsx(Br,{tabIndex:0,...a,ref:r,style:{position:"fixed"},onFocus:l=>{var f;const o=l.relatedTarget;!((f=i.viewport)!=null&&f.contains(o))&&n()}})});vs.displayName=La;var mr="Toast",pd="toast.swipeStart",md="toast.swipeMove",xd="toast.swipeCancel",gd="toast.swipeEnd",Ma=C.forwardRef((t,r)=>{const{forceMount:s,open:n,defaultOpen:a,onOpenChange:i,...l}=t,[o,c]=jt({prop:n,defaultProp:a??!0,onChange:i,caller:mr});return e.jsx(hr,{present:s||o,children:e.jsx(bd,{open:o,...l,ref:r,onClose:()=>c(!1),onPause:nr(t.onPause),onResume:nr(t.onResume),onSwipeStart:ye(t.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ye(t.onSwipeMove,f=>{const{x:h,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:ye(t.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ye(t.onSwipeEnd,f=>{const{x:h,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),c(!1)})})})});Ma.displayName=mr;var[yd,vd]=Da(mr,{onClose(){}}),bd=C.forwardRef((t,r)=>{const{__scopeToast:s,type:n="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:f,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:b,onSwipeEnd:u,...w}=t,d=Ur(mr,s),[m,g]=C.useState(null),x=Re(r,y=>g(y)),N=C.useRef(null),k=C.useRef(null),j=a||d.duration,A=C.useRef(0),T=C.useRef(j),L=C.useRef(0),{onToastAdd:O,onToastRemove:U}=d,Y=nr(()=>{var D;(m==null?void 0:m.contains(document.activeElement))&&((D=d.viewport)==null||D.focus()),l()}),_=C.useCallback(y=>{!y||y===1/0||(window.clearTimeout(L.current),A.current=new Date().getTime(),L.current=window.setTimeout(Y,y))},[Y]);C.useEffect(()=>{const y=d.viewport;if(y){const D=()=>{_(T.current),f==null||f()},Q=()=>{const M=new Date().getTime()-A.current;T.current=T.current-M,window.clearTimeout(L.current),c==null||c()};return y.addEventListener(gs,Q),y.addEventListener(ys,D),()=>{y.removeEventListener(gs,Q),y.removeEventListener(ys,D)}}},[d.viewport,j,c,f,_]),C.useEffect(()=>{i&&!d.isClosePausedRef.current&&_(j)},[i,j,d.isClosePausedRef,_]),C.useEffect(()=>(O(),()=>U()),[O,U]);const R=C.useMemo(()=>m?Ga(m):null,[m]);return d.viewport?e.jsxs(e.Fragment,{children:[R&&e.jsx(wd,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:R}),e.jsx(yd,{scope:s,onClose:Y,children:Is.createPortal(e.jsx(Us.ItemSlot,{scope:s,children:e.jsx(tl,{asChild:!0,onEscapeKeyDown:ye(o,()=>{d.isFocusedToastEscapeKeyDownRef.current||Y(),d.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Ne.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":d.swipeDirection,...w,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ye(t.onKeyDown,y=>{y.key==="Escape"&&(o==null||o(y.nativeEvent),y.nativeEvent.defaultPrevented||(d.isFocusedToastEscapeKeyDownRef.current=!0,Y()))}),onPointerDown:ye(t.onPointerDown,y=>{y.button===0&&(N.current={x:y.clientX,y:y.clientY})}),onPointerMove:ye(t.onPointerMove,y=>{if(!N.current)return;const D=y.clientX-N.current.x,Q=y.clientY-N.current.y,M=!!k.current,Z=["left","right"].includes(d.swipeDirection),H=["left","up"].includes(d.swipeDirection)?Math.min:Math.max,ne=Z?H(0,D):0,z=Z?0:H(0,Q),F=y.pointerType==="touch"?10:2,oe={x:ne,y:z},re={originalEvent:y,delta:oe};M?(k.current=oe,wr(md,p,re,{discrete:!1})):Sn(oe,d.swipeDirection,F)?(k.current=oe,wr(pd,h,re,{discrete:!1}),y.target.setPointerCapture(y.pointerId)):(Math.abs(D)>F||Math.abs(Q)>F)&&(N.current=null)}),onPointerUp:ye(t.onPointerUp,y=>{const D=k.current,Q=y.target;if(Q.hasPointerCapture(y.pointerId)&&Q.releasePointerCapture(y.pointerId),k.current=null,N.current=null,D){const M=y.currentTarget,Z={originalEvent:y,delta:D};Sn(D,d.swipeDirection,d.swipeThreshold)?wr(gd,u,Z,{discrete:!0}):wr(xd,b,Z,{discrete:!0}),M.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),d.viewport)})]}):null}),wd=t=>{const{__scopeToast:r,children:s,...n}=t,a=Ur(mr,r),[i,l]=C.useState(!1),[o,c]=C.useState(!1);return kd(()=>l(!0)),C.useEffect(()=>{const f=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(f)},[]),o?null:e.jsx(ha,{asChild:!0,children:e.jsx(Br,{...n,children:i&&e.jsxs(e.Fragment,{children:[a.label," ",s]})})})},jd="ToastTitle",$a=C.forwardRef((t,r)=>{const{__scopeToast:s,...n}=t;return e.jsx(Ne.div,{...n,ref:r})});$a.displayName=jd;var Nd="ToastDescription",Ba=C.forwardRef((t,r)=>{const{__scopeToast:s,...n}=t;return e.jsx(Ne.div,{...n,ref:r})});Ba.displayName=Nd;var Ua="ToastAction",Ha=C.forwardRef((t,r)=>{const{altText:s,...n}=t;return s.trim()?e.jsx(Wa,{altText:s,asChild:!0,children:e.jsx(Hs,{...n,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ua}\`. Expected non-empty \`string\`.`),null)});Ha.displayName=Ua;var Va="ToastClose",Hs=C.forwardRef((t,r)=>{const{__scopeToast:s,...n}=t,a=vd(Va,s);return e.jsx(Wa,{asChild:!0,children:e.jsx(Ne.button,{type:"button",...n,ref:r,onClick:ye(t.onClick,a.onClose)})})});Hs.displayName=Va;var Wa=C.forwardRef((t,r)=>{const{__scopeToast:s,altText:n,...a}=t;return e.jsx(Ne.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:r})});function Ga(t){const r=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&r.push(n.textContent),Cd(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=n.dataset.radixToastAnnounceAlt;l&&r.push(l)}else r.push(...Ga(n))}}),r}function wr(t,r,s,{discrete:n}){const a=s.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});r&&a.addEventListener(t,r,{once:!0}),n?rl(a,i):a.dispatchEvent(i)}var Sn=(t,r,s=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),i=n>a;return r==="left"||r==="right"?i&&n>s:!i&&a>s};function kd(t=()=>{}){const r=nr(t);ar(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(r)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[r])}function Cd(t){return t.nodeType===t.ELEMENT_NODE}function _d(t){const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function cs(t){const r=document.activeElement;return t.some(s=>s===r?!0:(s.focus(),document.activeElement!==r))}var Sd=Ia,Ka=za,Ya=Ma,qa=$a,Za=Ba,Xa=Ha,Qa=Hs;const Ed=Sd,Ja=C.forwardRef(({className:t,...r},s)=>e.jsx(Ka,{ref:s,className:be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...r}));Ja.displayName=Ka.displayName;const Ad=sl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ei=C.forwardRef(({className:t,variant:r,...s},n)=>e.jsx(Ya,{ref:n,className:be(Ad({variant:r}),t),...s}));ei.displayName=Ya.displayName;const Td=C.forwardRef(({className:t,...r},s)=>e.jsx(Xa,{ref:s,className:be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...r}));Td.displayName=Xa.displayName;const ti=C.forwardRef(({className:t,...r},s)=>e.jsx(Qa,{ref:s,className:be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...r,children:e.jsx(pr,{className:"h-4 w-4"})}));ti.displayName=Qa.displayName;const ri=C.forwardRef(({className:t,...r},s)=>e.jsx(qa,{ref:s,className:be("text-sm font-semibold",t),...r}));ri.displayName=qa.displayName;const si=C.forwardRef(({className:t,...r},s)=>e.jsx(Za,{ref:s,className:be("text-sm opacity-90",t),...r}));si.displayName=Za.displayName;function Pd(){const{toasts:t}=nl();return e.jsxs(Ed,{children:[t.map(function({id:r,title:s,description:n,action:a,...i}){return e.jsxs(ei,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(ri,{children:s}),n&&e.jsx(si,{children:n})]}),a,e.jsx(ti,{})]},r)}),e.jsx(Ja,{})]})}var En=["light","dark"],Rd="(prefers-color-scheme: dark)",Od=C.createContext(void 0),Dd={setTheme:t=>{},themes:[]},Id=()=>{var t;return(t=C.useContext(Od))!=null?t:Dd};C.memo(({forcedTheme:t,storageKey:r,attribute:s,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:l,attrs:o,nonce:c})=>{let f=i==="system",h=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,p=a?En.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",b=(w,d=!1,m=!0)=>{let g=l?l[w]:w,x=d?w+"|| ''":`'${g}'`,N="";return a&&m&&!d&&En.includes(w)&&(N+=`d.style.colorScheme = '${w}';`),s==="class"?d||g?N+=`c.add(${x})`:N+="null":g&&(N+=`d[s](n,${x})`),N},u=t?`!function(){${h}${b(t)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${r}');if('system'===e||(!e&&${f})){var t='${Rd}',m=window.matchMedia(t);if(m.media!==t||m.matches){${b("dark")}}else{${b("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${b(l?"x[e]":"e",!0)}}${f?"":"else{"+b(i,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${r}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${b(l?"x[e]":"e",!0)}}else{${b(i,!1,!1)};}${p}}catch(t){}}();`;return C.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:u}})});const Fd=({...t})=>{const{theme:r="system"}=Id();return e.jsx(bl,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},zd=["top","right","bottom","left"],bt=Math.min,Ue=Math.max,Rr=Math.round,jr=Math.floor,tt=t=>({x:t,y:t}),Ld={left:"right",right:"left",bottom:"top",top:"bottom"},Md={start:"end",end:"start"};function bs(t,r,s){return Ue(t,bt(r,s))}function lt(t,r){return typeof t=="function"?t(r):t}function ct(t){return t.split("-")[0]}function Qt(t){return t.split("-")[1]}function Vs(t){return t==="x"?"y":"x"}function Ws(t){return t==="y"?"height":"width"}const $d=new Set(["top","bottom"]);function et(t){return $d.has(ct(t))?"y":"x"}function Gs(t){return Vs(et(t))}function Bd(t,r,s){s===void 0&&(s=!1);const n=Qt(t),a=Gs(t),i=Ws(a);let l=a==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return r.reference[i]>r.floating[i]&&(l=Or(l)),[l,Or(l)]}function Ud(t){const r=Or(t);return[ws(t),r,ws(r)]}function ws(t){return t.replace(/start|end/g,r=>Md[r])}const An=["left","right"],Tn=["right","left"],Hd=["top","bottom"],Vd=["bottom","top"];function Wd(t,r,s){switch(t){case"top":case"bottom":return s?r?Tn:An:r?An:Tn;case"left":case"right":return r?Hd:Vd;default:return[]}}function Gd(t,r,s,n){const a=Qt(t);let i=Wd(ct(t),s==="start",n);return a&&(i=i.map(l=>l+"-"+a),r&&(i=i.concat(i.map(ws)))),i}function Or(t){return t.replace(/left|right|bottom|top/g,r=>Ld[r])}function Kd(t){return{top:0,right:0,bottom:0,left:0,...t}}function ni(t){return typeof t!="number"?Kd(t):{top:t,right:t,bottom:t,left:t}}function Dr(t){const{x:r,y:s,width:n,height:a}=t;return{width:n,height:a,top:s,left:r,right:r+n,bottom:s+a,x:r,y:s}}function Pn(t,r,s){let{reference:n,floating:a}=t;const i=et(r),l=Gs(r),o=Ws(l),c=ct(r),f=i==="y",h=n.x+n.width/2-a.width/2,p=n.y+n.height/2-a.height/2,b=n[o]/2-a[o]/2;let u;switch(c){case"top":u={x:h,y:n.y-a.height};break;case"bottom":u={x:h,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:p};break;case"left":u={x:n.x-a.width,y:p};break;default:u={x:n.x,y:n.y}}switch(Qt(r)){case"start":u[l]-=b*(s&&f?-1:1);break;case"end":u[l]+=b*(s&&f?-1:1);break}return u}async function Yd(t,r){var s;r===void 0&&(r={});const{x:n,y:a,platform:i,rects:l,elements:o,strategy:c}=t,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:b=!1,padding:u=0}=lt(r,t),w=ni(u),m=o[b?p==="floating"?"reference":"floating":p],g=Dr(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(m)))==null||s?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:f,rootBoundary:h,strategy:c})),x=p==="floating"?{x:n,y:a,width:l.floating.width,height:l.floating.height}:l.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),k=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},j=Dr(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:N,strategy:c}):x);return{top:(g.top-j.top+w.top)/k.y,bottom:(j.bottom-g.bottom+w.bottom)/k.y,left:(g.left-j.left+w.left)/k.x,right:(j.right-g.right+w.right)/k.x}}const qd=async(t,r,s)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:l}=s,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(r));let f=await l.getElementRects({reference:t,floating:r,strategy:a}),{x:h,y:p}=Pn(f,n,c),b=n,u={},w=0;for(let m=0;m<o.length;m++){var d;const{name:g,fn:x}=o[m],{x:N,y:k,data:j,reset:A}=await x({x:h,y:p,initialPlacement:n,placement:b,strategy:a,middlewareData:u,rects:f,platform:{...l,detectOverflow:(d=l.detectOverflow)!=null?d:Yd},elements:{reference:t,floating:r}});h=N??h,p=k??p,u={...u,[g]:{...u[g],...j}},A&&w<=50&&(w++,typeof A=="object"&&(A.placement&&(b=A.placement),A.rects&&(f=A.rects===!0?await l.getElementRects({reference:t,floating:r,strategy:a}):A.rects),{x:h,y:p}=Pn(f,b,c)),m=-1)}return{x:h,y:p,placement:b,strategy:a,middlewareData:u}},Zd=t=>({name:"arrow",options:t,async fn(r){const{x:s,y:n,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=r,{element:f,padding:h=0}=lt(t,r)||{};if(f==null)return{};const p=ni(h),b={x:s,y:n},u=Gs(a),w=Ws(u),d=await l.getDimensions(f),m=u==="y",g=m?"top":"left",x=m?"bottom":"right",N=m?"clientHeight":"clientWidth",k=i.reference[w]+i.reference[u]-b[u]-i.floating[w],j=b[u]-i.reference[u],A=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let T=A?A[N]:0;(!T||!await(l.isElement==null?void 0:l.isElement(A)))&&(T=o.floating[N]||i.floating[w]);const L=k/2-j/2,O=T/2-d[w]/2-1,U=bt(p[g],O),Y=bt(p[x],O),_=U,R=T-d[w]-Y,y=T/2-d[w]/2+L,D=bs(_,y,R),Q=!c.arrow&&Qt(a)!=null&&y!==D&&i.reference[w]/2-(y<_?U:Y)-d[w]/2<0,M=Q?y<_?y-_:y-R:0;return{[u]:b[u]+M,data:{[u]:D,centerOffset:y-D-M,...Q&&{alignmentOffset:M}},reset:Q}}}),Xd=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(r){var s,n;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:f}=r,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:b,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:d=!0,...m}=lt(t,r);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const g=ct(a),x=et(o),N=ct(o)===o,k=await(c.isRTL==null?void 0:c.isRTL(f.floating)),j=b||(N||!d?[Or(o)]:Ud(o)),A=w!=="none";!b&&A&&j.push(...Gd(o,d,w,k));const T=[o,...j],L=await c.detectOverflow(r,m),O=[];let U=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&O.push(L[g]),p){const y=Bd(a,l,k);O.push(L[y[0]],L[y[1]])}if(U=[...U,{placement:a,overflows:O}],!O.every(y=>y<=0)){var Y,_;const y=(((Y=i.flip)==null?void 0:Y.index)||0)+1,D=T[y];if(D&&(!(p==="alignment"?x!==et(D):!1)||U.every(Z=>et(Z.placement)===x?Z.overflows[0]>0:!0)))return{data:{index:y,overflows:U},reset:{placement:D}};let Q=(_=U.filter(M=>M.overflows[0]<=0).sort((M,Z)=>M.overflows[1]-Z.overflows[1])[0])==null?void 0:_.placement;if(!Q)switch(u){case"bestFit":{var R;const M=(R=U.filter(Z=>{if(A){const H=et(Z.placement);return H===x||H==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(H=>H>0).reduce((H,ne)=>H+ne,0)]).sort((Z,H)=>Z[1]-H[1])[0])==null?void 0:R[0];M&&(Q=M);break}case"initialPlacement":Q=o;break}if(a!==Q)return{reset:{placement:Q}}}return{}}}};function Rn(t,r){return{top:t.top-r.height,right:t.right-r.width,bottom:t.bottom-r.height,left:t.left-r.width}}function On(t){return zd.some(r=>t[r]>=0)}const Qd=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(r){const{rects:s,platform:n}=r,{strategy:a="referenceHidden",...i}=lt(t,r);switch(a){case"referenceHidden":{const l=await n.detectOverflow(r,{...i,elementContext:"reference"}),o=Rn(l,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:On(o)}}}case"escaped":{const l=await n.detectOverflow(r,{...i,altBoundary:!0}),o=Rn(l,s.floating);return{data:{escapedOffsets:o,escaped:On(o)}}}default:return{}}}}},ai=new Set(["left","top"]);async function Jd(t,r){const{placement:s,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),l=ct(s),o=Qt(s),c=et(s)==="y",f=ai.has(l)?-1:1,h=i&&c?-1:1,p=lt(r,t);let{mainAxis:b,crossAxis:u,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return o&&typeof w=="number"&&(u=o==="end"?w*-1:w),c?{x:u*h,y:b*f}:{x:b*f,y:u*h}}const eu=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(r){var s,n;const{x:a,y:i,placement:l,middlewareData:o}=r,c=await Jd(r,t);return l===((s=o.offset)==null?void 0:s.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},tu=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(r){const{x:s,y:n,placement:a,platform:i}=r,{mainAxis:l=!0,crossAxis:o=!1,limiter:c={fn:g=>{let{x,y:N}=g;return{x,y:N}}},...f}=lt(t,r),h={x:s,y:n},p=await i.detectOverflow(r,f),b=et(ct(a)),u=Vs(b);let w=h[u],d=h[b];if(l){const g=u==="y"?"top":"left",x=u==="y"?"bottom":"right",N=w+p[g],k=w-p[x];w=bs(N,w,k)}if(o){const g=b==="y"?"top":"left",x=b==="y"?"bottom":"right",N=d+p[g],k=d-p[x];d=bs(N,d,k)}const m=c.fn({...r,[u]:w,[b]:d});return{...m,data:{x:m.x-s,y:m.y-n,enabled:{[u]:l,[b]:o}}}}}},ru=function(t){return t===void 0&&(t={}),{options:t,fn(r){const{x:s,y:n,placement:a,rects:i,middlewareData:l}=r,{offset:o=0,mainAxis:c=!0,crossAxis:f=!0}=lt(t,r),h={x:s,y:n},p=et(a),b=Vs(p);let u=h[b],w=h[p];const d=lt(o,r),m=typeof d=="number"?{mainAxis:d,crossAxis:0}:{mainAxis:0,crossAxis:0,...d};if(c){const N=b==="y"?"height":"width",k=i.reference[b]-i.floating[N]+m.mainAxis,j=i.reference[b]+i.reference[N]-m.mainAxis;u<k?u=k:u>j&&(u=j)}if(f){var g,x;const N=b==="y"?"width":"height",k=ai.has(ct(a)),j=i.reference[p]-i.floating[N]+(k&&((g=l.offset)==null?void 0:g[p])||0)+(k?0:m.crossAxis),A=i.reference[p]+i.reference[N]+(k?0:((x=l.offset)==null?void 0:x[p])||0)-(k?m.crossAxis:0);w<j?w=j:w>A&&(w=A)}return{[b]:u,[p]:w}}}},su=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(r){var s,n;const{placement:a,rects:i,platform:l,elements:o}=r,{apply:c=()=>{},...f}=lt(t,r),h=await l.detectOverflow(r,f),p=ct(a),b=Qt(a),u=et(a)==="y",{width:w,height:d}=i.floating;let m,g;p==="top"||p==="bottom"?(m=p,g=b===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(g=p,m=b==="end"?"top":"bottom");const x=d-h.top-h.bottom,N=w-h.left-h.right,k=bt(d-h[m],x),j=bt(w-h[g],N),A=!r.middlewareData.shift;let T=k,L=j;if((s=r.middlewareData.shift)!=null&&s.enabled.x&&(L=N),(n=r.middlewareData.shift)!=null&&n.enabled.y&&(T=x),A&&!b){const U=Ue(h.left,0),Y=Ue(h.right,0),_=Ue(h.top,0),R=Ue(h.bottom,0);u?L=w-2*(U!==0||Y!==0?U+Y:Ue(h.left,h.right)):T=d-2*(_!==0||R!==0?_+R:Ue(h.top,h.bottom))}await c({...r,availableWidth:L,availableHeight:T});const O=await l.getDimensions(o.floating);return w!==O.width||d!==O.height?{reset:{rects:!0}}:{}}}};function Hr(){return typeof window<"u"}function Jt(t){return ii(t)?(t.nodeName||"").toLowerCase():"#document"}function He(t){var r;return(t==null||(r=t.ownerDocument)==null?void 0:r.defaultView)||window}function st(t){var r;return(r=(ii(t)?t.ownerDocument:t.document)||window.document)==null?void 0:r.documentElement}function ii(t){return Hr()?t instanceof Node||t instanceof He(t).Node:!1}function Ye(t){return Hr()?t instanceof Element||t instanceof He(t).Element:!1}function rt(t){return Hr()?t instanceof HTMLElement||t instanceof He(t).HTMLElement:!1}function Dn(t){return!Hr()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof He(t).ShadowRoot}const nu=new Set(["inline","contents"]);function xr(t){const{overflow:r,overflowX:s,overflowY:n,display:a}=qe(t);return/auto|scroll|overlay|hidden|clip/.test(r+n+s)&&!nu.has(a)}const au=new Set(["table","td","th"]);function iu(t){return au.has(Jt(t))}const ou=[":popover-open",":modal"];function Vr(t){return ou.some(r=>{try{return t.matches(r)}catch{return!1}})}const lu=["transform","translate","scale","rotate","perspective"],cu=["transform","translate","scale","rotate","perspective","filter"],du=["paint","layout","strict","content"];function Ks(t){const r=Ys(),s=Ye(t)?qe(t):t;return lu.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!r&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!r&&(s.filter?s.filter!=="none":!1)||cu.some(n=>(s.willChange||"").includes(n))||du.some(n=>(s.contain||"").includes(n))}function uu(t){let r=wt(t);for(;rt(r)&&!Kt(r);){if(Ks(r))return r;if(Vr(r))return null;r=wt(r)}return null}function Ys(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const fu=new Set(["html","body","#document"]);function Kt(t){return fu.has(Jt(t))}function qe(t){return He(t).getComputedStyle(t)}function Wr(t){return Ye(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function wt(t){if(Jt(t)==="html")return t;const r=t.assignedSlot||t.parentNode||Dn(t)&&t.host||st(t);return Dn(r)?r.host:r}function oi(t){const r=wt(t);return Kt(r)?t.ownerDocument?t.ownerDocument.body:t.body:rt(r)&&xr(r)?r:oi(r)}function ir(t,r,s){var n;r===void 0&&(r=[]),s===void 0&&(s=!0);const a=oi(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),l=He(a);if(i){const o=js(l);return r.concat(l,l.visualViewport||[],xr(a)?a:[],o&&s?ir(o):[])}return r.concat(a,ir(a,[],s))}function js(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function li(t){const r=qe(t);let s=parseFloat(r.width)||0,n=parseFloat(r.height)||0;const a=rt(t),i=a?t.offsetWidth:s,l=a?t.offsetHeight:n,o=Rr(s)!==i||Rr(n)!==l;return o&&(s=i,n=l),{width:s,height:n,$:o}}function qs(t){return Ye(t)?t:t.contextElement}function Ft(t){const r=qs(t);if(!rt(r))return tt(1);const s=r.getBoundingClientRect(),{width:n,height:a,$:i}=li(r);let l=(i?Rr(s.width):s.width)/n,o=(i?Rr(s.height):s.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const hu=tt(0);function ci(t){const r=He(t);return!Ys()||!r.visualViewport?hu:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function pu(t,r,s){return r===void 0&&(r=!1),!s||r&&s!==He(t)?!1:r}function Ot(t,r,s,n){r===void 0&&(r=!1),s===void 0&&(s=!1);const a=t.getBoundingClientRect(),i=qs(t);let l=tt(1);r&&(n?Ye(n)&&(l=Ft(n)):l=Ft(t));const o=pu(i,s,n)?ci(i):tt(0);let c=(a.left+o.x)/l.x,f=(a.top+o.y)/l.y,h=a.width/l.x,p=a.height/l.y;if(i){const b=He(i),u=n&&Ye(n)?He(n):n;let w=b,d=js(w);for(;d&&n&&u!==w;){const m=Ft(d),g=d.getBoundingClientRect(),x=qe(d),N=g.left+(d.clientLeft+parseFloat(x.paddingLeft))*m.x,k=g.top+(d.clientTop+parseFloat(x.paddingTop))*m.y;c*=m.x,f*=m.y,h*=m.x,p*=m.y,c+=N,f+=k,w=He(d),d=js(w)}}return Dr({width:h,height:p,x:c,y:f})}function Gr(t,r){const s=Wr(t).scrollLeft;return r?r.left+s:Ot(st(t)).left+s}function di(t,r){const s=t.getBoundingClientRect(),n=s.left+r.scrollLeft-Gr(t,s),a=s.top+r.scrollTop;return{x:n,y:a}}function mu(t){let{elements:r,rect:s,offsetParent:n,strategy:a}=t;const i=a==="fixed",l=st(n),o=r?Vr(r.floating):!1;if(n===l||o&&i)return s;let c={scrollLeft:0,scrollTop:0},f=tt(1);const h=tt(0),p=rt(n);if((p||!p&&!i)&&((Jt(n)!=="body"||xr(l))&&(c=Wr(n)),rt(n))){const u=Ot(n);f=Ft(n),h.x=u.x+n.clientLeft,h.y=u.y+n.clientTop}const b=l&&!p&&!i?di(l,c):tt(0);return{width:s.width*f.x,height:s.height*f.y,x:s.x*f.x-c.scrollLeft*f.x+h.x+b.x,y:s.y*f.y-c.scrollTop*f.y+h.y+b.y}}function xu(t){return Array.from(t.getClientRects())}function gu(t){const r=st(t),s=Wr(t),n=t.ownerDocument.body,a=Ue(r.scrollWidth,r.clientWidth,n.scrollWidth,n.clientWidth),i=Ue(r.scrollHeight,r.clientHeight,n.scrollHeight,n.clientHeight);let l=-s.scrollLeft+Gr(t);const o=-s.scrollTop;return qe(n).direction==="rtl"&&(l+=Ue(r.clientWidth,n.clientWidth)-a),{width:a,height:i,x:l,y:o}}const In=25;function yu(t,r){const s=He(t),n=st(t),a=s.visualViewport;let i=n.clientWidth,l=n.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const h=Ys();(!h||h&&r==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}const f=Gr(n);if(f<=0){const h=n.ownerDocument,p=h.body,b=getComputedStyle(p),u=h.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,w=Math.abs(n.clientWidth-p.clientWidth-u);w<=In&&(i-=w)}else f<=In&&(i+=f);return{width:i,height:l,x:o,y:c}}const vu=new Set(["absolute","fixed"]);function bu(t,r){const s=Ot(t,!0,r==="fixed"),n=s.top+t.clientTop,a=s.left+t.clientLeft,i=rt(t)?Ft(t):tt(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,c=a*i.x,f=n*i.y;return{width:l,height:o,x:c,y:f}}function Fn(t,r,s){let n;if(r==="viewport")n=yu(t,s);else if(r==="document")n=gu(st(t));else if(Ye(r))n=bu(r,s);else{const a=ci(t);n={x:r.x-a.x,y:r.y-a.y,width:r.width,height:r.height}}return Dr(n)}function ui(t,r){const s=wt(t);return s===r||!Ye(s)||Kt(s)?!1:qe(s).position==="fixed"||ui(s,r)}function wu(t,r){const s=r.get(t);if(s)return s;let n=ir(t,[],!1).filter(o=>Ye(o)&&Jt(o)!=="body"),a=null;const i=qe(t).position==="fixed";let l=i?wt(t):t;for(;Ye(l)&&!Kt(l);){const o=qe(l),c=Ks(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&vu.has(a.position)||xr(l)&&!c&&ui(t,l))?n=n.filter(h=>h!==l):a=o,l=wt(l)}return r.set(t,n),n}function ju(t){let{element:r,boundary:s,rootBoundary:n,strategy:a}=t;const l=[...s==="clippingAncestors"?Vr(r)?[]:wu(r,this._c):[].concat(s),n],o=l[0],c=l.reduce((f,h)=>{const p=Fn(r,h,a);return f.top=Ue(p.top,f.top),f.right=bt(p.right,f.right),f.bottom=bt(p.bottom,f.bottom),f.left=Ue(p.left,f.left),f},Fn(r,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Nu(t){const{width:r,height:s}=li(t);return{width:r,height:s}}function ku(t,r,s){const n=rt(r),a=st(r),i=s==="fixed",l=Ot(t,!0,i,r);let o={scrollLeft:0,scrollTop:0};const c=tt(0);function f(){c.x=Gr(a)}if(n||!n&&!i)if((Jt(r)!=="body"||xr(a))&&(o=Wr(r)),n){const u=Ot(r,!0,i,r);c.x=u.x+r.clientLeft,c.y=u.y+r.clientTop}else a&&f();i&&!n&&a&&f();const h=a&&!n&&!i?di(a,o):tt(0),p=l.left+o.scrollLeft-c.x-h.x,b=l.top+o.scrollTop-c.y-h.y;return{x:p,y:b,width:l.width,height:l.height}}function ds(t){return qe(t).position==="static"}function zn(t,r){if(!rt(t)||qe(t).position==="fixed")return null;if(r)return r(t);let s=t.offsetParent;return st(t)===s&&(s=s.ownerDocument.body),s}function fi(t,r){const s=He(t);if(Vr(t))return s;if(!rt(t)){let a=wt(t);for(;a&&!Kt(a);){if(Ye(a)&&!ds(a))return a;a=wt(a)}return s}let n=zn(t,r);for(;n&&iu(n)&&ds(n);)n=zn(n,r);return n&&Kt(n)&&ds(n)&&!Ks(n)?s:n||uu(t)||s}const Cu=async function(t){const r=this.getOffsetParent||fi,s=this.getDimensions,n=await s(t.floating);return{reference:ku(t.reference,await r(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function _u(t){return qe(t).direction==="rtl"}const Su={convertOffsetParentRelativeRectToViewportRelativeRect:mu,getDocumentElement:st,getClippingRect:ju,getOffsetParent:fi,getElementRects:Cu,getClientRects:xu,getDimensions:Nu,getScale:Ft,isElement:Ye,isRTL:_u};function hi(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}function Eu(t,r){let s=null,n;const a=st(t);function i(){var o;clearTimeout(n),(o=s)==null||o.disconnect(),s=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const f=t.getBoundingClientRect(),{left:h,top:p,width:b,height:u}=f;if(o||r(),!b||!u)return;const w=jr(p),d=jr(a.clientWidth-(h+b)),m=jr(a.clientHeight-(p+u)),g=jr(h),N={rootMargin:-w+"px "+-d+"px "+-m+"px "+-g+"px",threshold:Ue(0,bt(1,c))||1};let k=!0;function j(A){const T=A[0].intersectionRatio;if(T!==c){if(!k)return l();T?l(!1,T):n=setTimeout(()=>{l(!1,1e-7)},1e3)}T===1&&!hi(f,t.getBoundingClientRect())&&l(),k=!1}try{s=new IntersectionObserver(j,{...N,root:a.ownerDocument})}catch{s=new IntersectionObserver(j,N)}s.observe(t)}return l(!0),i}function Au(t,r,s,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,f=qs(t),h=a||i?[...f?ir(f):[],...ir(r)]:[];h.forEach(g=>{a&&g.addEventListener("scroll",s,{passive:!0}),i&&g.addEventListener("resize",s)});const p=f&&o?Eu(f,s):null;let b=-1,u=null;l&&(u=new ResizeObserver(g=>{let[x]=g;x&&x.target===f&&u&&(u.unobserve(r),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var N;(N=u)==null||N.observe(r)})),s()}),f&&!c&&u.observe(f),u.observe(r));let w,d=c?Ot(t):null;c&&m();function m(){const g=Ot(t);d&&!hi(d,g)&&s(),d=g,w=requestAnimationFrame(m)}return s(),()=>{var g;h.forEach(x=>{a&&x.removeEventListener("scroll",s),i&&x.removeEventListener("resize",s)}),p==null||p(),(g=u)==null||g.disconnect(),u=null,c&&cancelAnimationFrame(w)}}const Tu=eu,Pu=tu,Ru=Xd,Ou=su,Du=Qd,Ln=Zd,Iu=ru,Fu=(t,r,s)=>{const n=new Map,a={platform:Su,...s},i={...a.platform,_c:n};return qd(t,r,{...a,platform:i})};var zu=typeof document<"u",Lu=function(){},Sr=zu?C.useLayoutEffect:Lu;function Ir(t,r){if(t===r)return!0;if(typeof t!=typeof r)return!1;if(typeof t=="function"&&t.toString()===r.toString())return!0;let s,n,a;if(t&&r&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==r.length)return!1;for(n=s;n--!==0;)if(!Ir(t[n],r[n]))return!1;return!0}if(a=Object.keys(t),s=a.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(r,a[n]))return!1;for(n=s;n--!==0;){const i=a[n];if(!(i==="_owner"&&t.$$typeof)&&!Ir(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}function pi(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Mn(t,r){const s=pi(t);return Math.round(r*s)/s}function us(t){const r=C.useRef(t);return Sr(()=>{r.current=t}),r}function Mu(t){t===void 0&&(t={});const{placement:r="bottom",strategy:s="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:f}=t,[h,p]=C.useState({x:0,y:0,strategy:s,placement:r,middlewareData:{},isPositioned:!1}),[b,u]=C.useState(n);Ir(b,n)||u(n);const[w,d]=C.useState(null),[m,g]=C.useState(null),x=C.useCallback(Z=>{Z!==A.current&&(A.current=Z,d(Z))},[]),N=C.useCallback(Z=>{Z!==T.current&&(T.current=Z,g(Z))},[]),k=i||w,j=l||m,A=C.useRef(null),T=C.useRef(null),L=C.useRef(h),O=c!=null,U=us(c),Y=us(a),_=us(f),R=C.useCallback(()=>{if(!A.current||!T.current)return;const Z={placement:r,strategy:s,middleware:b};Y.current&&(Z.platform=Y.current),Fu(A.current,T.current,Z).then(H=>{const ne={...H,isPositioned:_.current!==!1};y.current&&!Ir(L.current,ne)&&(L.current=ne,Is.flushSync(()=>{p(ne)}))})},[b,r,s,Y,_]);Sr(()=>{f===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,p(Z=>({...Z,isPositioned:!1})))},[f]);const y=C.useRef(!1);Sr(()=>(y.current=!0,()=>{y.current=!1}),[]),Sr(()=>{if(k&&(A.current=k),j&&(T.current=j),k&&j){if(U.current)return U.current(k,j,R);R()}},[k,j,R,U,O]);const D=C.useMemo(()=>({reference:A,floating:T,setReference:x,setFloating:N}),[x,N]),Q=C.useMemo(()=>({reference:k,floating:j}),[k,j]),M=C.useMemo(()=>{const Z={position:s,left:0,top:0};if(!Q.floating)return Z;const H=Mn(Q.floating,h.x),ne=Mn(Q.floating,h.y);return o?{...Z,transform:"translate("+H+"px, "+ne+"px)",...pi(Q.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:H,top:ne}},[s,o,Q.floating,h.x,h.y]);return C.useMemo(()=>({...h,update:R,refs:D,elements:Q,floatingStyles:M}),[h,R,D,Q,M])}const $u=t=>{function r(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:n,padding:a}=typeof t=="function"?t(s):t;return n&&r(n)?n.current!=null?Ln({element:n.current,padding:a}).fn(s):{}:n?Ln({element:n,padding:a}).fn(s):{}}}},Bu=(t,r)=>({...Tu(t),options:[t,r]}),Uu=(t,r)=>({...Pu(t),options:[t,r]}),Hu=(t,r)=>({...Iu(t),options:[t,r]}),Vu=(t,r)=>({...Ru(t),options:[t,r]}),Wu=(t,r)=>({...Ou(t),options:[t,r]}),Gu=(t,r)=>({...Du(t),options:[t,r]}),Ku=(t,r)=>({...$u(t),options:[t,r]});var Yu="Arrow",mi=C.forwardRef((t,r)=>{const{children:s,width:n=10,height:a=5,...i}=t;return e.jsx(Ne.svg,{...i,ref:r,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});mi.displayName=Yu;var qu=mi;function Zs(t){const[r,s]=C.useState(void 0);return ar(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,f=Array.isArray(c)?c[0]:c;l=f.inlineSize,o=f.blockSize}else l=t.offsetWidth,o=t.offsetHeight;s({width:l,height:o})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else s(void 0)},[t]),r}var Xs="Popper",[xi,Kr]=dt(Xs),[Zu,gi]=xi(Xs),yi=t=>{const{__scopePopper:r,children:s}=t,[n,a]=C.useState(null);return e.jsx(Zu,{scope:r,anchor:n,onAnchorChange:a,children:s})};yi.displayName=Xs;var vi="PopperAnchor",bi=C.forwardRef((t,r)=>{const{__scopePopper:s,virtualRef:n,...a}=t,i=gi(vi,s),l=C.useRef(null),o=Re(r,l),c=C.useRef(null);return C.useEffect(()=>{const f=c.current;c.current=(n==null?void 0:n.current)||l.current,f!==c.current&&i.onAnchorChange(c.current)}),n?null:e.jsx(Ne.div,{...a,ref:o})});bi.displayName=vi;var Qs="PopperContent",[Xu,Qu]=xi(Qs),wi=C.forwardRef((t,r)=>{var Ce,he,me,ke,we,Le;const{__scopePopper:s,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:b=!1,updatePositionStrategy:u="optimized",onPlaced:w,...d}=t,m=gi(Qs,s),[g,x]=C.useState(null),N=Re(r,Ee=>x(Ee)),[k,j]=C.useState(null),A=Zs(k),T=(A==null?void 0:A.width)??0,L=(A==null?void 0:A.height)??0,O=n+(i!=="center"?"-"+i:""),U=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},Y=Array.isArray(f)?f:[f],_=Y.length>0,R={padding:U,boundary:Y.filter(ef),altBoundary:_},{refs:y,floatingStyles:D,placement:Q,isPositioned:M,middlewareData:Z}=Mu({strategy:"fixed",placement:O,whileElementsMounted:(...Ee)=>Au(...Ee,{animationFrame:u==="always"}),elements:{reference:m.anchor},middleware:[Bu({mainAxis:a+L,alignmentAxis:l}),c&&Uu({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?Hu():void 0,...R}),c&&Vu({...R}),Wu({...R,apply:({elements:Ee,rects:v,availableWidth:V,availableHeight:$})=>{const{width:E,height:S}=v.reference,P=Ee.floating.style;P.setProperty("--radix-popper-available-width",`${V}px`),P.setProperty("--radix-popper-available-height",`${$}px`),P.setProperty("--radix-popper-anchor-width",`${E}px`),P.setProperty("--radix-popper-anchor-height",`${S}px`)}}),k&&Ku({element:k,padding:o}),tf({arrowWidth:T,arrowHeight:L}),b&&Gu({strategy:"referenceHidden",...R})]}),[H,ne]=ki(Q),z=nr(w);ar(()=>{M&&(z==null||z())},[M,z]);const F=(Ce=Z.arrow)==null?void 0:Ce.x,oe=(he=Z.arrow)==null?void 0:he.y,re=((me=Z.arrow)==null?void 0:me.centerOffset)!==0,[ee,je]=C.useState();return ar(()=>{g&&je(window.getComputedStyle(g).zIndex)},[g]),e.jsx("div",{ref:y.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:M?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(ke=Z.transformOrigin)==null?void 0:ke.x,(we=Z.transformOrigin)==null?void 0:we.y].join(" "),...((Le=Z.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Xu,{scope:s,placedSide:H,onArrowChange:j,arrowX:F,arrowY:oe,shouldHideArrow:re,children:e.jsx(Ne.div,{"data-side":H,"data-align":ne,...d,ref:N,style:{...d.style,animation:M?void 0:"none"}})})})});wi.displayName=Qs;var ji="PopperArrow",Ju={top:"bottom",right:"left",bottom:"top",left:"right"},Ni=C.forwardRef(function(r,s){const{__scopePopper:n,...a}=r,i=Qu(ji,n),l=Ju[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(qu,{...a,ref:s,style:{...a.style,display:"block"}})})});Ni.displayName=ji;function ef(t){return t!==null}var tf=t=>({name:"transformOrigin",options:t,fn(r){var m,g,x;const{placement:s,rects:n,middlewareData:a}=r,l=((m=a.arrow)==null?void 0:m.centerOffset)!==0,o=l?0:t.arrowWidth,c=l?0:t.arrowHeight,[f,h]=ki(s),p={start:"0%",center:"50%",end:"100%"}[h],b=(((g=a.arrow)==null?void 0:g.x)??0)+o/2,u=(((x=a.arrow)==null?void 0:x.y)??0)+c/2;let w="",d="";return f==="bottom"?(w=l?p:`${b}px`,d=`${-c}px`):f==="top"?(w=l?p:`${b}px`,d=`${n.floating.height+c}px`):f==="right"?(w=`${-c}px`,d=l?p:`${u}px`):f==="left"&&(w=`${n.floating.width+c}px`,d=l?p:`${u}px`),{data:{x:w,y:d}}}});function ki(t){const[r,s="center"]=t.split("-");return[r,s]}var Ci=yi,Js=bi,_i=wi,Si=Ni,rf=Symbol("radix.slottable");function sf(t){const r=({children:s})=>e.jsx(e.Fragment,{children:s});return r.displayName=`${t}.Slottable`,r.__radixId=rf,r}var[Yr]=dt("Tooltip",[Kr]),qr=Kr(),Ei="TooltipProvider",nf=700,Ns="tooltip.open",[af,en]=Yr(Ei),Ai=t=>{const{__scopeTooltip:r,delayDuration:s=nf,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=t,l=C.useRef(!0),o=C.useRef(!1),c=C.useRef(0);return C.useEffect(()=>{const f=c.current;return()=>window.clearTimeout(f)},[]),e.jsx(af,{scope:r,isOpenDelayedRef:l,delayDuration:s,onOpen:C.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:C.useCallback(f=>{o.current=f},[]),disableHoverableContent:a,children:i})};Ai.displayName=Ei;var or="Tooltip",[of,Zr]=Yr(or),Ti=t=>{const{__scopeTooltip:r,children:s,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:l,delayDuration:o}=t,c=en(or,t.__scopeTooltip),f=qr(r),[h,p]=C.useState(null),b=Lr(),u=C.useRef(0),w=l??c.disableHoverableContent,d=o??c.delayDuration,m=C.useRef(!1),[g,x]=jt({prop:n,defaultProp:a??!1,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent(Ns))):c.onClose(),i==null||i(T)},caller:or}),N=C.useMemo(()=>g?m.current?"delayed-open":"instant-open":"closed",[g]),k=C.useCallback(()=>{window.clearTimeout(u.current),u.current=0,m.current=!1,x(!0)},[x]),j=C.useCallback(()=>{window.clearTimeout(u.current),u.current=0,x(!1)},[x]),A=C.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>{m.current=!0,x(!0),u.current=0},d)},[d,x]);return C.useEffect(()=>()=>{u.current&&(window.clearTimeout(u.current),u.current=0)},[]),e.jsx(Ci,{...f,children:e.jsx(of,{scope:r,contentId:b,open:g,stateAttribute:N,trigger:h,onTriggerChange:p,onTriggerEnter:C.useCallback(()=>{c.isOpenDelayedRef.current?A():k()},[c.isOpenDelayedRef,A,k]),onTriggerLeave:C.useCallback(()=>{w?j():(window.clearTimeout(u.current),u.current=0)},[j,w]),onOpen:k,onClose:j,disableHoverableContent:w,children:s})})};Ti.displayName=or;var ks="TooltipTrigger",Pi=C.forwardRef((t,r)=>{const{__scopeTooltip:s,...n}=t,a=Zr(ks,s),i=en(ks,s),l=qr(s),o=C.useRef(null),c=Re(r,o,a.onTriggerChange),f=C.useRef(!1),h=C.useRef(!1),p=C.useCallback(()=>f.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),e.jsx(Js,{asChild:!0,...l,children:e.jsx(Ne.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:ye(t.onPointerMove,b=>{b.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),h.current=!0)}),onPointerLeave:ye(t.onPointerLeave,()=>{a.onTriggerLeave(),h.current=!1}),onPointerDown:ye(t.onPointerDown,()=>{a.open&&a.onClose(),f.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:ye(t.onFocus,()=>{f.current||a.onOpen()}),onBlur:ye(t.onBlur,a.onClose),onClick:ye(t.onClick,a.onClose)})})});Pi.displayName=ks;var lf="TooltipPortal",[Em,cf]=Yr(lf,{forceMount:void 0}),Yt="TooltipContent",Ri=C.forwardRef((t,r)=>{const s=cf(Yt,t.__scopeTooltip),{forceMount:n=s.forceMount,side:a="top",...i}=t,l=Zr(Yt,t.__scopeTooltip);return e.jsx(hr,{present:n||l.open,children:l.disableHoverableContent?e.jsx(Oi,{side:a,...i,ref:r}):e.jsx(df,{side:a,...i,ref:r})})}),df=C.forwardRef((t,r)=>{const s=Zr(Yt,t.__scopeTooltip),n=en(Yt,t.__scopeTooltip),a=C.useRef(null),i=Re(r,a),[l,o]=C.useState(null),{trigger:c,onClose:f}=s,h=a.current,{onPointerInTransitChange:p}=n,b=C.useCallback(()=>{o(null),p(!1)},[p]),u=C.useCallback((w,d)=>{const m=w.currentTarget,g={x:w.clientX,y:w.clientY},x=mf(g,m.getBoundingClientRect()),N=xf(g,x),k=gf(d.getBoundingClientRect()),j=vf([...N,...k]);o(j),p(!0)},[p]);return C.useEffect(()=>()=>b(),[b]),C.useEffect(()=>{if(c&&h){const w=m=>u(m,h),d=m=>u(m,c);return c.addEventListener("pointerleave",w),h.addEventListener("pointerleave",d),()=>{c.removeEventListener("pointerleave",w),h.removeEventListener("pointerleave",d)}}},[c,h,u,b]),C.useEffect(()=>{if(l){const w=d=>{const m=d.target,g={x:d.clientX,y:d.clientY},x=(c==null?void 0:c.contains(m))||(h==null?void 0:h.contains(m)),N=!yf(g,l);x?b():N&&(b(),f())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,h,l,f,b]),e.jsx(Oi,{...t,ref:i})}),[uf,ff]=Yr(or,{isInside:!1}),hf=sf("TooltipContent"),Oi=C.forwardRef((t,r)=>{const{__scopeTooltip:s,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=t,c=Zr(Yt,s),f=qr(s),{onClose:h}=c;return C.useEffect(()=>(document.addEventListener(Ns,h),()=>document.removeEventListener(Ns,h)),[h]),C.useEffect(()=>{if(c.trigger){const p=b=>{const u=b.target;u!=null&&u.contains(c.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,h]),e.jsx(pa,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:e.jsxs(_i,{"data-state":c.stateAttribute,...f,...o,ref:r,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(hf,{children:n}),e.jsx(uf,{scope:s,isInside:!0,children:e.jsx(cd,{id:c.contentId,role:"tooltip",children:a||n})})]})})});Ri.displayName=Yt;var Di="TooltipArrow",pf=C.forwardRef((t,r)=>{const{__scopeTooltip:s,...n}=t,a=qr(s);return ff(Di,s).isInside?null:e.jsx(Si,{...a,...n,ref:r})});pf.displayName=Di;function mf(t,r){const s=Math.abs(r.top-t.y),n=Math.abs(r.bottom-t.y),a=Math.abs(r.right-t.x),i=Math.abs(r.left-t.x);switch(Math.min(s,n,a,i)){case i:return"left";case a:return"right";case s:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function xf(t,r,s=5){const n=[];switch(r){case"top":n.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":n.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":n.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":n.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return n}function gf(t){const{top:r,right:s,bottom:n,left:a}=t;return[{x:a,y:r},{x:s,y:r},{x:s,y:n},{x:a,y:n}]}function yf(t,r){const{x:s,y:n}=t;let a=!1;for(let i=0,l=r.length-1;i<r.length;l=i++){const o=r[i],c=r[l],f=o.x,h=o.y,p=c.x,b=c.y;h>n!=b>n&&s<(p-f)*(n-h)/(b-h)+f&&(a=!a)}return a}function vf(t){const r=t.slice();return r.sort((s,n)=>s.x<n.x?-1:s.x>n.x?1:s.y<n.y?-1:s.y>n.y?1:0),bf(r)}function bf(t){if(t.length<=1)return t.slice();const r=[];for(let n=0;n<t.length;n++){const a=t[n];for(;r.length>=2;){const i=r[r.length-1],l=r[r.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}r.pop();const s=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;s.length>=2;){const i=s[s.length-1],l=s[s.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))s.pop();else break}s.push(a)}return s.pop(),r.length===1&&s.length===1&&r[0].x===s[0].x&&r[0].y===s[0].y?r:r.concat(s)}var wf=Ai,jf=Ti,Nf=Pi,Ii=Ri;const kf=wf,tn=jf,rn=Nf,Xr=C.forwardRef(({className:t,sideOffset:r=4,...s},n)=>e.jsx(Ii,{ref:n,sideOffset:r,className:be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));Xr.displayName=Ii.displayName;var Qr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Cf={setTimeout:(t,r)=>setTimeout(t,r),clearTimeout:t=>clearTimeout(t),setInterval:(t,r)=>setInterval(t,r),clearInterval:t=>clearInterval(t)},ht,Ds,sa,_f=(sa=class{constructor(){xe(this,ht,Cf);xe(this,Ds,!1)}setTimeoutProvider(t){fe(this,ht,t)}setTimeout(t,r){return B(this,ht).setTimeout(t,r)}clearTimeout(t){B(this,ht).clearTimeout(t)}setInterval(t,r){return B(this,ht).setInterval(t,r)}clearInterval(t){B(this,ht).clearInterval(t)}},ht=new WeakMap,Ds=new WeakMap,sa),Cs=new _f;function Sf(t){setTimeout(t,0)}var Jr=typeof window>"u"||"Deno"in globalThis;function We(){}function Ef(t,r){return typeof t=="function"?t(r):t}function Af(t){return typeof t=="number"&&t>=0&&t!==1/0}function Tf(t,r){return Math.max(t+(r||0)-Date.now(),0)}function _s(t,r){return typeof t=="function"?t(r):t}function Pf(t,r){return typeof t=="function"?t(r):t}function $n(t,r){const{type:s="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:o}=t;if(l){if(n){if(r.queryHash!==sn(l,r.options))return!1}else if(!cr(r.queryKey,l))return!1}if(s!=="all"){const c=r.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof o=="boolean"&&r.isStale()!==o||a&&a!==r.state.fetchStatus||i&&!i(r))}function Bn(t,r){const{exact:s,status:n,predicate:a,mutationKey:i}=t;if(i){if(!r.options.mutationKey)return!1;if(s){if(lr(r.options.mutationKey)!==lr(i))return!1}else if(!cr(r.options.mutationKey,i))return!1}return!(n&&r.state.status!==n||a&&!a(r))}function sn(t,r){return((r==null?void 0:r.queryKeyHashFn)||lr)(t)}function lr(t){return JSON.stringify(t,(r,s)=>Ss(s)?Object.keys(s).sort().reduce((n,a)=>(n[a]=s[a],n),{}):s)}function cr(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?Object.keys(r).every(s=>cr(t[s],r[s])):!1}var Rf=Object.prototype.hasOwnProperty;function Fi(t,r,s=0){if(t===r)return t;if(s>500)return r;const n=Un(t)&&Un(r);if(!n&&!(Ss(t)&&Ss(r)))return r;const i=(n?t:Object.keys(t)).length,l=n?r:Object.keys(r),o=l.length,c=n?new Array(o):{};let f=0;for(let h=0;h<o;h++){const p=n?h:l[h],b=t[p],u=r[p];if(b===u){c[p]=b,(n?h<i:Rf.call(t,p))&&f++;continue}if(b===null||u===null||typeof b!="object"||typeof u!="object"){c[p]=u;continue}const w=Fi(b,u,s+1);c[p]=w,w===b&&f++}return i===o&&f===i?t:c}function Un(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ss(t){if(!Hn(t))return!1;const r=t.constructor;if(r===void 0)return!0;const s=r.prototype;return!(!Hn(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Hn(t){return Object.prototype.toString.call(t)==="[object Object]"}function Of(t){return new Promise(r=>{Cs.setTimeout(r,t)})}function Df(t,r,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,r):s.structuralSharing!==!1?Fi(t,r):r}function If(t,r,s=0){const n=[...t,r];return s&&n.length>s?n.slice(1):n}function Ff(t,r,s=0){const n=[r,...t];return s&&n.length>s?n.slice(0,-1):n}var nn=Symbol();function zi(t,r){return!t.queryFn&&(r!=null&&r.initialPromise)?()=>r.initialPromise:!t.queryFn||t.queryFn===nn?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function zf(t,r,s){let n=!1,a;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(a??(a=r()),n||(n=!0,a.aborted?s():a.addEventListener("abort",s,{once:!0})),a)}),t}var St,pt,zt,na,Lf=(na=class extends Qr{constructor(){super();xe(this,St);xe(this,pt);xe(this,zt);fe(this,zt,r=>{if(!Jr&&window.addEventListener){const s=()=>r();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){B(this,pt)||this.setEventListener(B(this,zt))}onUnsubscribe(){var r;this.hasListeners()||((r=B(this,pt))==null||r.call(this),fe(this,pt,void 0))}setEventListener(r){var s;fe(this,zt,r),(s=B(this,pt))==null||s.call(this),fe(this,pt,r(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(r){B(this,St)!==r&&(fe(this,St,r),this.onFocus())}onFocus(){const r=this.isFocused();this.listeners.forEach(s=>{s(r)})}isFocused(){var r;return typeof B(this,St)=="boolean"?B(this,St):((r=globalThis.document)==null?void 0:r.visibilityState)!=="hidden"}},St=new WeakMap,pt=new WeakMap,zt=new WeakMap,na),Li=new Lf;function Mf(){let t,r;const s=new Promise((a,i)=>{t=a,r=i});s.status="pending",s.catch(()=>{});function n(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},s.reject=a=>{n({status:"rejected",reason:a}),r(a)},s}var $f=Sf;function Bf(){let t=[],r=0,s=o=>{o()},n=o=>{o()},a=$f;const i=o=>{r?t.push(o):a(()=>{s(o)})},l=()=>{const o=t;t=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{s(c)})})})};return{batch:o=>{let c;r++;try{c=o()}finally{r--,r||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var $e=Bf(),Lt,mt,Mt,aa,Uf=(aa=class extends Qr{constructor(){super();xe(this,Lt,!0);xe(this,mt);xe(this,Mt);fe(this,Mt,r=>{if(!Jr&&window.addEventListener){const s=()=>r(!0),n=()=>r(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){B(this,mt)||this.setEventListener(B(this,Mt))}onUnsubscribe(){var r;this.hasListeners()||((r=B(this,mt))==null||r.call(this),fe(this,mt,void 0))}setEventListener(r){var s;fe(this,Mt,r),(s=B(this,mt))==null||s.call(this),fe(this,mt,r(this.setOnline.bind(this)))}setOnline(r){B(this,Lt)!==r&&(fe(this,Lt,r),this.listeners.forEach(n=>{n(r)}))}isOnline(){return B(this,Lt)}},Lt=new WeakMap,mt=new WeakMap,Mt=new WeakMap,aa),Fr=new Uf;function Hf(t){return Math.min(1e3*2**t,3e4)}function Mi(t){return(t??"online")==="online"?Fr.isOnline():!0}var Es=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function $i(t){let r=!1,s=0,n;const a=Mf(),i=()=>a.status!=="pending",l=d=>{var m;if(!i()){const g=new Es(d);b(g),(m=t.onCancel)==null||m.call(t,g)}},o=()=>{r=!0},c=()=>{r=!1},f=()=>Li.isFocused()&&(t.networkMode==="always"||Fr.isOnline())&&t.canRun(),h=()=>Mi(t.networkMode)&&t.canRun(),p=d=>{i()||(n==null||n(),a.resolve(d))},b=d=>{i()||(n==null||n(),a.reject(d))},u=()=>new Promise(d=>{var m;n=g=>{(i()||f())&&d(g)},(m=t.onPause)==null||m.call(t)}).then(()=>{var d;n=void 0,i()||(d=t.onContinue)==null||d.call(t)}),w=()=>{if(i())return;let d;const m=s===0?t.initialPromise:void 0;try{d=m??t.fn()}catch(g){d=Promise.reject(g)}Promise.resolve(d).then(p).catch(g=>{var A;if(i())return;const x=t.retry??(Jr?0:3),N=t.retryDelay??Hf,k=typeof N=="function"?N(s,g):N,j=x===!0||typeof x=="number"&&s<x||typeof x=="function"&&x(s,g);if(r||!j){b(g);return}s++,(A=t.onFail)==null||A.call(t,s,g),Of(k).then(()=>f()?void 0:u()).then(()=>{r?b(g):w()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:h,start:()=>(h()?w():u().then(w),a)}}var Et,ia,Bi=(ia=class{constructor(){xe(this,Et)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Af(this.gcTime)&&fe(this,Et,Cs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Jr?1/0:5*60*1e3))}clearGcTimeout(){B(this,Et)&&(Cs.clearTimeout(B(this,Et)),fe(this,Et,void 0))}},Et=new WeakMap,ia),At,$t,Ve,Tt,De,dr,Pt,Ge,nt,oa,Vf=(oa=class extends Bi{constructor(r){super();xe(this,Ge);xe(this,At);xe(this,$t);xe(this,Ve);xe(this,Tt);xe(this,De);xe(this,dr);xe(this,Pt);fe(this,Pt,!1),fe(this,dr,r.defaultOptions),this.setOptions(r.options),this.observers=[],fe(this,Tt,r.client),fe(this,Ve,B(this,Tt).getQueryCache()),this.queryKey=r.queryKey,this.queryHash=r.queryHash,fe(this,At,Wn(this.options)),this.state=r.state??B(this,At),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var r;return(r=B(this,De))==null?void 0:r.promise}setOptions(r){if(this.options={...B(this,dr),...r},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Wn(this.options);s.data!==void 0&&(this.setState(Vn(s.data,s.dataUpdatedAt)),fe(this,At,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,Ve).remove(this)}setData(r,s){const n=Df(this.state.data,r,this.options);return Fe(this,Ge,nt).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(r,s){Fe(this,Ge,nt).call(this,{type:"setState",state:r,setStateOptions:s})}cancel(r){var n,a;const s=(n=B(this,De))==null?void 0:n.promise;return(a=B(this,De))==null||a.cancel(r),s?s.then(We).catch(We):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,At))}isActive(){return this.observers.some(r=>Pf(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===nn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>_s(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!Tf(this.state.dataUpdatedAt,r)}onFocus(){var s;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r==null||r.refetch({cancelRefetch:!1}),(s=B(this,De))==null||s.continue()}onOnline(){var s;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r==null||r.refetch({cancelRefetch:!1}),(s=B(this,De))==null||s.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),B(this,Ve).notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(s=>s!==r),this.observers.length||(B(this,De)&&(B(this,Pt)?B(this,De).cancel({revert:!0}):B(this,De).cancelRetry()),this.scheduleGc()),B(this,Ve).notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fe(this,Ge,nt).call(this,{type:"invalidate"})}async fetch(r,s){var c,f,h,p,b,u,w,d,m,g,x,N;if(this.state.fetchStatus!=="idle"&&((c=B(this,De))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(B(this,De))return B(this,De).continueRetry(),B(this,De).promise}if(r&&this.setOptions(r),!this.options.queryFn){const k=this.observers.find(j=>j.options.queryFn);k&&this.setOptions(k.options)}const n=new AbortController,a=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(fe(this,Pt,!0),n.signal)})},i=()=>{const k=zi(this.options,s),A=(()=>{const T={client:B(this,Tt),queryKey:this.queryKey,meta:this.meta};return a(T),T})();return fe(this,Pt,!1),this.options.persister?this.options.persister(k,A,this):k(A)},o=(()=>{const k={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:B(this,Tt),state:this.state,fetchFn:i};return a(k),k})();(f=this.options.behavior)==null||f.onFetch(o,this),fe(this,$t,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&Fe(this,Ge,nt).call(this,{type:"fetch",meta:(p=o.fetchOptions)==null?void 0:p.meta}),fe(this,De,$i({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,onCancel:k=>{k instanceof Es&&k.revert&&this.setState({...B(this,$t),fetchStatus:"idle"}),n.abort()},onFail:(k,j)=>{Fe(this,Ge,nt).call(this,{type:"failed",failureCount:k,error:j})},onPause:()=>{Fe(this,Ge,nt).call(this,{type:"pause"})},onContinue:()=>{Fe(this,Ge,nt).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const k=await B(this,De).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(u=(b=B(this,Ve).config).onSuccess)==null||u.call(b,k,this),(d=(w=B(this,Ve).config).onSettled)==null||d.call(w,k,this.state.error,this),k}catch(k){if(k instanceof Es){if(k.silent)return B(this,De).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Fe(this,Ge,nt).call(this,{type:"error",error:k}),(g=(m=B(this,Ve).config).onError)==null||g.call(m,k,this),(N=(x=B(this,Ve).config).onSettled)==null||N.call(x,this.state.data,k,this),k}finally{this.scheduleGc()}}},At=new WeakMap,$t=new WeakMap,Ve=new WeakMap,Tt=new WeakMap,De=new WeakMap,dr=new WeakMap,Pt=new WeakMap,Ge=new WeakSet,nt=function(r){const s=n=>{switch(r.type){case"failed":return{...n,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Wf(n.data,this.options),fetchMeta:r.meta??null};case"success":const a={...n,...Vn(r.data,r.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return fe(this,$t,r.manual?a:void 0),a;case"error":const i=r.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...r.state}}};this.state=s(this.state),$e.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),B(this,Ve).notify({query:this,type:"updated",action:r})})},oa);function Wf(t,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Mi(r.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Vn(t,r){return{data:t,dataUpdatedAt:r??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Wn(t){const r=typeof t.initialData=="function"?t.initialData():t.initialData,s=r!==void 0,n=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}function Gn(t){return{onFetch:(r,s)=>{var h,p,b,u,w;const n=r.options,a=(b=(p=(h=r.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:b.direction,i=((u=r.state.data)==null?void 0:u.pages)||[],l=((w=r.state.data)==null?void 0:w.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const f=async()=>{let d=!1;const m=N=>{zf(N,()=>r.signal,()=>d=!0)},g=zi(r.options,r.fetchOptions),x=async(N,k,j)=>{if(d)return Promise.reject();if(k==null&&N.pages.length)return Promise.resolve(N);const T=(()=>{const Y={client:r.client,queryKey:r.queryKey,pageParam:k,direction:j?"backward":"forward",meta:r.options.meta};return m(Y),Y})(),L=await g(T),{maxPages:O}=r.options,U=j?Ff:If;return{pages:U(N.pages,L,O),pageParams:U(N.pageParams,k,O)}};if(a&&i.length){const N=a==="backward",k=N?Gf:Kn,j={pages:i,pageParams:l},A=k(n,j);o=await x(j,A,N)}else{const N=t??i.length;do{const k=c===0?l[0]??n.initialPageParam:Kn(n,o);if(c>0&&k==null)break;o=await x(o,k),c++}while(c<N)}return o};r.options.persister?r.fetchFn=()=>{var d,m;return(m=(d=r.options).persister)==null?void 0:m.call(d,f,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},s)}:r.fetchFn=f}}}function Kn(t,{pages:r,pageParams:s}){const n=r.length-1;return r.length>0?t.getNextPageParam(r[n],r,s[n],s):void 0}function Gf(t,{pages:r,pageParams:s}){var n;return r.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,r[0],r,s[0],s):void 0}var ur,Xe,ze,Rt,Qe,ft,la,Kf=(la=class extends Bi{constructor(r){super();xe(this,Qe);xe(this,ur);xe(this,Xe);xe(this,ze);xe(this,Rt);fe(this,ur,r.client),this.mutationId=r.mutationId,fe(this,ze,r.mutationCache),fe(this,Xe,[]),this.state=r.state||Yf(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){B(this,Xe).includes(r)||(B(this,Xe).push(r),this.clearGcTimeout(),B(this,ze).notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){fe(this,Xe,B(this,Xe).filter(s=>s!==r)),this.scheduleGc(),B(this,ze).notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){B(this,Xe).length||(this.state.status==="pending"?this.scheduleGc():B(this,ze).remove(this))}continue(){var r;return((r=B(this,Rt))==null?void 0:r.continue())??this.execute(this.state.variables)}async execute(r){var l,o,c,f,h,p,b,u,w,d,m,g,x,N,k,j,A,T;const s=()=>{Fe(this,Qe,ft).call(this,{type:"continue"})},n={client:B(this,ur),meta:this.options.meta,mutationKey:this.options.mutationKey};fe(this,Rt,$i({fn:()=>this.options.mutationFn?this.options.mutationFn(r,n):Promise.reject(new Error("No mutationFn found")),onFail:(L,O)=>{Fe(this,Qe,ft).call(this,{type:"failed",failureCount:L,error:O})},onPause:()=>{Fe(this,Qe,ft).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,ze).canRun(this)}));const a=this.state.status==="pending",i=!B(this,Rt).canStart();try{if(a)s();else{Fe(this,Qe,ft).call(this,{type:"pending",variables:r,isPaused:i}),B(this,ze).config.onMutate&&await B(this,ze).config.onMutate(r,this,n);const O=await((o=(l=this.options).onMutate)==null?void 0:o.call(l,r,n));O!==this.state.context&&Fe(this,Qe,ft).call(this,{type:"pending",context:O,variables:r,isPaused:i})}const L=await B(this,Rt).start();return await((f=(c=B(this,ze).config).onSuccess)==null?void 0:f.call(c,L,r,this.state.context,this,n)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,L,r,this.state.context,n)),await((u=(b=B(this,ze).config).onSettled)==null?void 0:u.call(b,L,null,this.state.variables,this.state.context,this,n)),await((d=(w=this.options).onSettled)==null?void 0:d.call(w,L,null,r,this.state.context,n)),Fe(this,Qe,ft).call(this,{type:"success",data:L}),L}catch(L){try{await((g=(m=B(this,ze).config).onError)==null?void 0:g.call(m,L,r,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((N=(x=this.options).onError)==null?void 0:N.call(x,L,r,this.state.context,n))}catch(O){Promise.reject(O)}try{await((j=(k=B(this,ze).config).onSettled)==null?void 0:j.call(k,void 0,L,this.state.variables,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((T=(A=this.options).onSettled)==null?void 0:T.call(A,void 0,L,r,this.state.context,n))}catch(O){Promise.reject(O)}throw Fe(this,Qe,ft).call(this,{type:"error",error:L}),L}finally{B(this,ze).runNext(this)}}},ur=new WeakMap,Xe=new WeakMap,ze=new WeakMap,Rt=new WeakMap,Qe=new WeakSet,ft=function(r){const s=n=>{switch(r.type){case"failed":return{...n,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...n,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:r.error,failureCount:n.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=s(this.state),$e.batch(()=>{B(this,Xe).forEach(n=>{n.onMutationUpdate(r)}),B(this,ze).notify({mutation:this,type:"updated",action:r})})},la);function Yf(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var at,Ke,fr,ca,qf=(ca=class extends Qr{constructor(r={}){super();xe(this,at);xe(this,Ke);xe(this,fr);this.config=r,fe(this,at,new Set),fe(this,Ke,new Map),fe(this,fr,0)}build(r,s,n){const a=new Kf({client:r,mutationCache:this,mutationId:++vr(this,fr)._,options:r.defaultMutationOptions(s),state:n});return this.add(a),a}add(r){B(this,at).add(r);const s=Nr(r);if(typeof s=="string"){const n=B(this,Ke).get(s);n?n.push(r):B(this,Ke).set(s,[r])}this.notify({type:"added",mutation:r})}remove(r){if(B(this,at).delete(r)){const s=Nr(r);if(typeof s=="string"){const n=B(this,Ke).get(s);if(n)if(n.length>1){const a=n.indexOf(r);a!==-1&&n.splice(a,1)}else n[0]===r&&B(this,Ke).delete(s)}}this.notify({type:"removed",mutation:r})}canRun(r){const s=Nr(r);if(typeof s=="string"){const n=B(this,Ke).get(s),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===r}else return!0}runNext(r){var n;const s=Nr(r);if(typeof s=="string"){const a=(n=B(this,Ke).get(s))==null?void 0:n.find(i=>i!==r&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$e.batch(()=>{B(this,at).forEach(r=>{this.notify({type:"removed",mutation:r})}),B(this,at).clear(),B(this,Ke).clear()})}getAll(){return Array.from(B(this,at))}find(r){const s={exact:!0,...r};return this.getAll().find(n=>Bn(s,n))}findAll(r={}){return this.getAll().filter(s=>Bn(r,s))}notify(r){$e.batch(()=>{this.listeners.forEach(s=>{s(r)})})}resumePausedMutations(){const r=this.getAll().filter(s=>s.state.isPaused);return $e.batch(()=>Promise.all(r.map(s=>s.continue().catch(We))))}},at=new WeakMap,Ke=new WeakMap,fr=new WeakMap,ca);function Nr(t){var r;return(r=t.options.scope)==null?void 0:r.id}var Je,da,Zf=(da=class extends Qr{constructor(r={}){super();xe(this,Je);this.config=r,fe(this,Je,new Map)}build(r,s,n){const a=s.queryKey,i=s.queryHash??sn(a,s);let l=this.get(i);return l||(l=new Vf({client:r,queryKey:a,queryHash:i,options:r.defaultQueryOptions(s),state:n,defaultOptions:r.getQueryDefaults(a)}),this.add(l)),l}add(r){B(this,Je).has(r.queryHash)||(B(this,Je).set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){const s=B(this,Je).get(r.queryHash);s&&(r.destroy(),s===r&&B(this,Je).delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){$e.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return B(this,Je).get(r)}getAll(){return[...B(this,Je).values()]}find(r){const s={exact:!0,...r};return this.getAll().find(n=>$n(s,n))}findAll(r={}){const s=this.getAll();return Object.keys(r).length>0?s.filter(n=>$n(r,n)):s}notify(r){$e.batch(()=>{this.listeners.forEach(s=>{s(r)})})}onFocus(){$e.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){$e.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}},Je=new WeakMap,da),_e,xt,gt,Bt,Ut,yt,Ht,Vt,ua,Xf=(ua=class{constructor(t={}){xe(this,_e);xe(this,xt);xe(this,gt);xe(this,Bt);xe(this,Ut);xe(this,yt);xe(this,Ht);xe(this,Vt);fe(this,_e,t.queryCache||new Zf),fe(this,xt,t.mutationCache||new qf),fe(this,gt,t.defaultOptions||{}),fe(this,Bt,new Map),fe(this,Ut,new Map),fe(this,yt,0)}mount(){vr(this,yt)._++,B(this,yt)===1&&(fe(this,Ht,Li.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,_e).onFocus())})),fe(this,Vt,Fr.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,_e).onOnline())})))}unmount(){var t,r;vr(this,yt)._--,B(this,yt)===0&&((t=B(this,Ht))==null||t.call(this),fe(this,Ht,void 0),(r=B(this,Vt))==null||r.call(this),fe(this,Vt,void 0))}isFetching(t){return B(this,_e).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return B(this,xt).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const r=this.defaultQueryOptions({queryKey:t});return(s=B(this,_e).get(r.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const r=this.defaultQueryOptions(t),s=B(this,_e).build(this,r),n=s.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(_s(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(n))}getQueriesData(t){return B(this,_e).findAll(t).map(({queryKey:r,state:s})=>{const n=s.data;return[r,n]})}setQueryData(t,r,s){const n=this.defaultQueryOptions({queryKey:t}),a=B(this,_e).get(n.queryHash),i=a==null?void 0:a.state.data,l=Ef(r,i);if(l!==void 0)return B(this,_e).build(this,n).setData(l,{...s,manual:!0})}setQueriesData(t,r,s){return $e.batch(()=>B(this,_e).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,r,s)]))}getQueryState(t){var s;const r=this.defaultQueryOptions({queryKey:t});return(s=B(this,_e).get(r.queryHash))==null?void 0:s.state}removeQueries(t){const r=B(this,_e);$e.batch(()=>{r.findAll(t).forEach(s=>{r.remove(s)})})}resetQueries(t,r){const s=B(this,_e);return $e.batch(()=>(s.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},r)))}cancelQueries(t,r={}){const s={revert:!0,...r},n=$e.batch(()=>B(this,_e).findAll(t).map(a=>a.cancel(s)));return Promise.all(n).then(We).catch(We)}invalidateQueries(t,r={}){return $e.batch(()=>(B(this,_e).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},r)))}refetchQueries(t,r={}){const s={...r,cancelRefetch:r.cancelRefetch??!0},n=$e.batch(()=>B(this,_e).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(We)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(We)}fetchQuery(t){const r=this.defaultQueryOptions(t);r.retry===void 0&&(r.retry=!1);const s=B(this,_e).build(this,r);return s.isStaleByTime(_s(r.staleTime,s))?s.fetch(r):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(We).catch(We)}fetchInfiniteQuery(t){return t.behavior=Gn(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(We).catch(We)}ensureInfiniteQueryData(t){return t.behavior=Gn(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Fr.isOnline()?B(this,xt).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,_e)}getMutationCache(){return B(this,xt)}getDefaultOptions(){return B(this,gt)}setDefaultOptions(t){fe(this,gt,t)}setQueryDefaults(t,r){B(this,Bt).set(lr(t),{queryKey:t,defaultOptions:r})}getQueryDefaults(t){const r=[...B(this,Bt).values()],s={};return r.forEach(n=>{cr(t,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(t,r){B(this,Ut).set(lr(t),{mutationKey:t,defaultOptions:r})}getMutationDefaults(t){const r=[...B(this,Ut).values()],s={};return r.forEach(n=>{cr(t,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const r={...B(this,gt).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return r.queryHash||(r.queryHash=sn(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===nn&&(r.enabled=!1),r}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...B(this,gt).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){B(this,_e).clear(),B(this,xt).clear()}},_e=new WeakMap,xt=new WeakMap,gt=new WeakMap,Bt=new WeakMap,Ut=new WeakMap,yt=new WeakMap,Ht=new WeakMap,Vt=new WeakMap,ua),Qf=C.createContext(void 0),Jf=({client:t,children:r})=>(C.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(Qf.Provider,{value:t,children:r}));class eh extends C.Component{constructor(){super(...arguments);rr(this,"state",{hasError:!1,error:null,errorInfo:null});rr(this,"handleReload",()=>{window.location.reload()});rr(this,"handleGoHome",()=>{window.location.href="/"});rr(this,"handleReportBug",()=>{var a,i,l;const s=`Error: ${(a=this.state.error)==null?void 0:a.message}

Stack: ${(i=this.state.error)==null?void 0:i.stack}

Component Stack: ${(l=this.state.errorInfo)==null?void 0:l.componentStack}`,n=`mailto:support@deckforge.com?subject=DeckForge Error Report&body=${encodeURIComponent(s)}`;window.location.href=n})}static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,n){console.error("ErrorBoundary caught an error:",s,n),this.setState({error:s,errorInfo:n});try{const a=localStorage.getItem("deckforge-autosave");if(a){const i={timestamp:new Date().toISOString(),state:a};localStorage.setItem("deckforge-crash-backup",JSON.stringify(i))}}catch(a){console.error("Failed to save crash backup:",a)}}render(){var s,n;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:e.jsx("div",{className:"max-w-2xl w-full",children:e.jsxs("div",{className:"bg-card border-2 border-destructive p-8 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-destructive/20 flex items-center justify-center",children:e.jsx(yn,{className:"w-10 h-10 text-destructive"})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"font-display text-2xl uppercase tracking-widest",children:"Something Went Wrong"}),e.jsx("p",{className:"text-muted-foreground",children:"DeckForge encountered an unexpected error"})]}),e.jsxs("details",{className:"bg-secondary p-4 rounded border border-border",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-mono text-muted-foreground hover:text-foreground transition-colors",children:"Technical Details (click to expand)"}),e.jsx("div",{className:"mt-4 space-y-2",children:e.jsxs("div",{className:"text-xs font-mono bg-background p-3 rounded overflow-auto max-h-40",children:[e.jsx("p",{className:"text-destructive font-semibold",children:(s=this.state.error)==null?void 0:s.message}),((n=this.state.error)==null?void 0:n.stack)&&e.jsx("pre",{className:"mt-2 text-muted-foreground text-[10px] whitespace-pre-wrap",children:this.state.error.stack})]})})]}),e.jsx("div",{className:"bg-accent/10 border border-accent/30 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Your work may be saved!"})," We automatically backed up your design before the crash. Try reloading the page to recover it."]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[e.jsxs(te,{onClick:this.handleReload,className:"gap-2",children:[e.jsx(wl,{className:"w-4 h-4"}),"Reload Page"]}),e.jsxs(te,{onClick:this.handleGoHome,variant:"outline",className:"gap-2",children:[e.jsx(jl,{className:"w-4 h-4"}),"Go to Dashboard"]}),e.jsxs(te,{onClick:this.handleReportBug,variant:"outline",className:"gap-2",children:[e.jsx(yn,{className:"w-4 h-4"}),"Report Bug"]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:["If this keeps happening,"," ",e.jsx("a",{href:"/designs",className:"text-accent hover:underline",children:"try starting a new design"})," ","or"," ",e.jsx("a",{href:"mailto:support@deckforge.com",className:"text-accent hover:underline",children:"contact support"})]})})]})})}):this.props.children}}const th="modulepreload",rh=function(t){return"/"+t},Yn={},ut=function(r,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(s.map(c=>{if(c=rh(c),c in Yn)return;Yn[c]=!0;const f=c.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":th,f||(p.as="script"),p.crossOrigin="",p.href=c,o&&p.setAttribute("nonce",o),document.head.appendChild(p),f)return new Promise((b,u)=>{p.addEventListener("load",b),p.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return r().catch(i)})},fs=[{id:"pen",icon:Fs,label:"Pen Tool",shortcut:"P",description:"Draw custom shapes with click-to-point or free draw"},{id:"stickers",icon:va,label:"Stickers",shortcut:"S",description:"Add vector icons and decals from library"},{id:"lines",icon:ba,label:"Lines",shortcut:"L",description:"Draw straight, curved, and decorative lines"},{id:"patterns",icon:wa,label:"Patterns",description:"Apply procedural patterns (checkerboard, stripes, etc.)"},{id:"textures",icon:zs,label:"Textures",description:"Add realistic texture overlays (concrete, rust, graffiti)"},{id:"graphics",icon:ja,label:"Graphics",shortcut:"G",description:"Basic shapes (circle, square, star)"},{id:"text",icon:Mr,label:"Text",shortcut:"T",description:"Add text with custom fonts and styling"},{id:"uploads",icon:Na,label:"Uploads",shortcut:"U",description:"Upload your own images, SVGs, and assets"},{id:"finishes",icon:Ar,label:"Finishes",description:"Apply print textures (scratched wood, grip tape, halftone)"}];function qn(){const{activeTool:t,setActiveTool:r}=Se();return C.useEffect(()=>{const s=n=>{if(n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.ctrlKey||n.metaKey||n.altKey)return;const a=n.key.toLowerCase(),i=fs.find(l=>{var o;return((o=l.shortcut)==null?void 0:o.toLowerCase())===a});i&&(n.preventDefault(),r(t===i.id?null:i.id))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t,r]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden md:flex flex-col w-14 bg-card border-r border-border h-full",children:[e.jsx("div",{className:"py-4 px-2 border-b border-border",children:e.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground block text-center",children:"Tools"})}),e.jsx(vt,{className:"flex-1",children:e.jsx("div",{className:"flex flex-col gap-1 p-2",children:fs.map(s=>{const n=s.icon,a=t===s.id;return e.jsxs(tn,{delayDuration:300,children:[e.jsx(rn,{asChild:!0,children:e.jsx("button",{onClick:()=>r(a?null:s.id),className:be("w-10 h-10 flex items-center justify-center border border-transparent","hover:border-border hover:bg-secondary transition-colors duration-75",a&&"tool-active border-primary"),children:e.jsx(n,{className:"w-5 h-5",strokeWidth:1.5})})}),e.jsx(Xr,{side:"right",className:"max-w-xs",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"font-semibold",children:s.label}),s.shortcut&&e.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted border border-border rounded font-mono",children:s.shortcut})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]})})]},s.id)})})})]}),e.jsx("div",{className:"md:hidden w-full bg-card border-b border-border",children:e.jsx(vt,{className:"w-full",orientation:"horizontal",children:e.jsx("div",{className:"flex gap-1 p-2",children:fs.map(s=>{const n=s.icon,a=t===s.id;return e.jsxs("button",{onClick:()=>r(a?null:s.id),className:be("min-w-[64px] h-16 flex flex-col items-center justify-center gap-1 border border-transparent shrink-0","active:bg-secondary/80 active:scale-95 transition-all duration-75 touch-manipulation",a&&"tool-active border-primary bg-primary/10"),children:[e.jsx(n,{className:"w-5 h-5",strokeWidth:1.5}),e.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:s.label})]},s.id)})})})})]})}function Ui(t){const r=C.useRef({value:t,previous:t});return C.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}var Hi=["PageUp","PageDown"],Vi=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Wi={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},er="Slider",[As,sh,nh]=$s(er),[Gi]=dt(er,[nh]),[ah,es]=Gi(er),Ki=C.forwardRef((t,r)=>{const{name:s,min:n=0,max:a=100,step:i=1,orientation:l="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:f=[n],value:h,onValueChange:p=()=>{},onValueCommit:b=()=>{},inverted:u=!1,form:w,...d}=t,m=C.useRef(new Set),g=C.useRef(0),N=l==="horizontal"?ih:oh,[k=[],j]=jt({prop:h,defaultProp:f,onChange:Y=>{var R;(R=[...m.current][g.current])==null||R.focus(),p(Y)}}),A=C.useRef(k);function T(Y){const _=fh(k,Y);U(Y,_)}function L(Y){U(Y,g.current)}function O(){const Y=A.current[g.current];k[g.current]!==Y&&b(k)}function U(Y,_,{commit:R}={commit:!1}){const y=xh(i),D=gh(Math.round((Y-n)/i)*i+n,y),Q=xa(D,[n,a]);j((M=[])=>{const Z=dh(M,Q,_);if(mh(Z,c*i)){g.current=Z.indexOf(Q);const H=String(Z)!==String(M);return H&&R&&b(Z),H?Z:M}else return M})}return e.jsx(ah,{scope:t.__scopeSlider,name:s,disabled:o,min:n,max:a,valueIndexToChangeRef:g,thumbs:m.current,values:k,orientation:l,form:w,children:e.jsx(As.Provider,{scope:t.__scopeSlider,children:e.jsx(As.Slot,{scope:t.__scopeSlider,children:e.jsx(N,{"aria-disabled":o,"data-disabled":o?"":void 0,...d,ref:r,onPointerDown:ye(d.onPointerDown,()=>{o||(A.current=k)}),min:n,max:a,inverted:u,onSlideStart:o?void 0:T,onSlideMove:o?void 0:L,onSlideEnd:o?void 0:O,onHomeKeyDown:()=>!o&&U(n,0,{commit:!0}),onEndKeyDown:()=>!o&&U(a,k.length-1,{commit:!0}),onStepKeyDown:({event:Y,direction:_})=>{if(!o){const D=Hi.includes(Y.key)||Y.shiftKey&&Vi.includes(Y.key)?10:1,Q=g.current,M=k[Q],Z=i*D*_;U(M+Z,Q,{commit:!0})}}})})})})});Ki.displayName=er;var[Yi,qi]=Gi(er,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ih=C.forwardRef((t,r)=>{const{min:s,max:n,dir:a,inverted:i,onSlideStart:l,onSlideMove:o,onSlideEnd:c,onStepKeyDown:f,...h}=t,[p,b]=C.useState(null),u=Re(r,N=>b(N)),w=C.useRef(void 0),d=ma(a),m=d==="ltr",g=m&&!i||!m&&i;function x(N){const k=w.current||p.getBoundingClientRect(),j=[0,k.width],T=an(j,g?[s,n]:[n,s]);return w.current=k,T(N-k.left)}return e.jsx(Yi,{scope:t.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:e.jsx(Zi,{dir:d,"data-orientation":"horizontal",...h,ref:u,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const k=x(N.clientX);l==null||l(k)},onSlideMove:N=>{const k=x(N.clientX);o==null||o(k)},onSlideEnd:()=>{w.current=void 0,c==null||c()},onStepKeyDown:N=>{const j=Wi[g?"from-left":"from-right"].includes(N.key);f==null||f({event:N,direction:j?-1:1})}})})}),oh=C.forwardRef((t,r)=>{const{min:s,max:n,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:o,onStepKeyDown:c,...f}=t,h=C.useRef(null),p=Re(r,h),b=C.useRef(void 0),u=!a;function w(d){const m=b.current||h.current.getBoundingClientRect(),g=[0,m.height],N=an(g,u?[n,s]:[s,n]);return b.current=m,N(d-m.top)}return e.jsx(Yi,{scope:t.__scopeSlider,startEdge:u?"bottom":"top",endEdge:u?"top":"bottom",size:"height",direction:u?1:-1,children:e.jsx(Zi,{"data-orientation":"vertical",...f,ref:p,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:d=>{const m=w(d.clientY);i==null||i(m)},onSlideMove:d=>{const m=w(d.clientY);l==null||l(m)},onSlideEnd:()=>{b.current=void 0,o==null||o()},onStepKeyDown:d=>{const g=Wi[u?"from-bottom":"from-top"].includes(d.key);c==null||c({event:d,direction:g?-1:1})}})})}),Zi=C.forwardRef((t,r)=>{const{__scopeSlider:s,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:o,onStepKeyDown:c,...f}=t,h=es(er,s);return e.jsx(Ne.span,{...f,ref:r,onKeyDown:ye(t.onKeyDown,p=>{p.key==="Home"?(l(p),p.preventDefault()):p.key==="End"?(o(p),p.preventDefault()):Hi.concat(Vi).includes(p.key)&&(c(p),p.preventDefault())}),onPointerDown:ye(t.onPointerDown,p=>{const b=p.target;b.setPointerCapture(p.pointerId),p.preventDefault(),h.thumbs.has(b)?b.focus():n(p)}),onPointerMove:ye(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&a(p)}),onPointerUp:ye(t.onPointerUp,p=>{const b=p.target;b.hasPointerCapture(p.pointerId)&&(b.releasePointerCapture(p.pointerId),i(p))})})}),Xi="SliderTrack",Qi=C.forwardRef((t,r)=>{const{__scopeSlider:s,...n}=t,a=es(Xi,s);return e.jsx(Ne.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:r})});Qi.displayName=Xi;var Ts="SliderRange",Ji=C.forwardRef((t,r)=>{const{__scopeSlider:s,...n}=t,a=es(Ts,s),i=qi(Ts,s),l=C.useRef(null),o=Re(r,l),c=a.values.length,f=a.values.map(b=>ro(b,a.min,a.max)),h=c>1?Math.min(...f):0,p=100-Math.max(...f);return e.jsx(Ne.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:o,style:{...t.style,[i.startEdge]:h+"%",[i.endEdge]:p+"%"}})});Ji.displayName=Ts;var Ps="SliderThumb",eo=C.forwardRef((t,r)=>{const s=sh(t.__scopeSlider),[n,a]=C.useState(null),i=Re(r,o=>a(o)),l=C.useMemo(()=>n?s().findIndex(o=>o.ref.current===n):-1,[s,n]);return e.jsx(lh,{...t,ref:i,index:l})}),lh=C.forwardRef((t,r)=>{const{__scopeSlider:s,index:n,name:a,...i}=t,l=es(Ps,s),o=qi(Ps,s),[c,f]=C.useState(null),h=Re(r,x=>f(x)),p=c?l.form||!!c.closest("form"):!0,b=Zs(c),u=l.values[n],w=u===void 0?0:ro(u,l.min,l.max),d=uh(n,l.values.length),m=b==null?void 0:b[o.size],g=m?hh(m,w,o.direction):0;return C.useEffect(()=>{if(c)return l.thumbs.add(c),()=>{l.thumbs.delete(c)}},[c,l.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${w}% + ${g}px)`},children:[e.jsx(As.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(Ne.span,{role:"slider","aria-label":t["aria-label"]||d,"aria-valuemin":l.min,"aria-valuenow":u,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:h,style:u===void 0?{display:"none"}:t.style,onFocus:ye(t.onFocus,()=>{l.valueIndexToChangeRef.current=n})})}),p&&e.jsx(to,{name:a??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:u},n)]})});eo.displayName=Ps;var ch="RadioBubbleInput",to=C.forwardRef(({__scopeSlider:t,value:r,...s},n)=>{const a=C.useRef(null),i=Re(a,n),l=Ui(r);return C.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==r&&h){const p=new Event("input",{bubbles:!0});h.call(o,r),o.dispatchEvent(p)}},[l,r]),e.jsx(Ne.input,{style:{display:"none"},...s,ref:i,defaultValue:r})});to.displayName=ch;function dh(t=[],r,s){const n=[...t];return n[s]=r,n.sort((a,i)=>a-i)}function ro(t,r,s){const i=100/(s-r)*(t-r);return xa(i,[0,100])}function uh(t,r){return r>2?`Value ${t+1} of ${r}`:r===2?["Minimum","Maximum"][t]:void 0}function fh(t,r){if(t.length===1)return 0;const s=t.map(a=>Math.abs(a-r)),n=Math.min(...s);return s.indexOf(n)}function hh(t,r,s){const n=t/2,i=an([0,50],[0,n]);return(n-i(r)*s)*s}function ph(t){return t.slice(0,-1).map((r,s)=>t[s+1]-r)}function mh(t,r){if(r>0){const s=ph(t);return Math.min(...s)>=r}return!0}function an(t,r){return s=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(t[1]-t[0]);return r[0]+n*(s-t[0])}}function xh(t){return(String(t).split(".")[1]||"").length}function gh(t,r){const s=Math.pow(10,r);return Math.round(t*s)/s}var so=Ki,yh=Qi,vh=Ji,bh=eo;const ve=C.forwardRef(({className:t,...r},s)=>e.jsxs(so,{ref:s,className:be("relative flex w-full touch-none select-none items-center",t),...r,children:[e.jsx(yh,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(vh,{className:"absolute h-full bg-primary"})}),e.jsx(bh,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ve.displayName=so.displayName;async function wh(t){const r=await t.text(),n=new DOMParser().parseFromString(r,"image/svg+xml");if(n.querySelector("parsererror"))throw new Error("Invalid SVG file");const i=n.querySelector("svg");if(!i)throw new Error("No SVG element found");const l=i.getAttribute("viewBox");let o=parseFloat(i.getAttribute("width")||"100"),c=parseFloat(i.getAttribute("height")||"100");if(l){const[,,p,b]=l.split(/\s+/).map(parseFloat);o=p||o,c=b||c}const f=[];if(i.querySelectorAll("rect, circle, ellipse, path, polygon, polyline, line").forEach(p=>{const b=jh(p,o,c);b&&f.push(b)}),f.length===0){const p=new XMLSerializer().serializeToString(i),b=new Blob([p],{type:"image/svg+xml"}),u=URL.createObjectURL(b);f.push({type:"image",x:0,y:0,width:Math.min(o,200),height:Math.min(c,200),rotation:0,opacity:1,scaleX:1,scaleY:1,src:u})}return f}function jh(t,r,s){const n=t.tagName.toLowerCase(),a=t.getAttribute("fill")||"#000000",i=t.getAttribute("stroke")||"",l=parseFloat(t.getAttribute("stroke-width")||"0"),o=parseFloat(t.getAttribute("opacity")||"1");if(a==="none"&&!i)return null;switch(n){case"rect":return Nh(t,a,i,l,o);case"circle":return kh(t,a,i,l,o);case"ellipse":return Ch(t,a,i,l,o);case"line":return _h(t,i||a,l,o);case"path":case"polygon":case"polyline":return Sh(t,r,s,o);default:return null}}function Nh(t,r,s,n,a){const i=parseFloat(t.getAttribute("x")||"0"),l=parseFloat(t.getAttribute("y")||"0"),o=parseFloat(t.getAttribute("width")||"100"),c=parseFloat(t.getAttribute("height")||"100");return{type:"shape",shapeType:"rect",x:i,y:l,width:o,height:c,rotation:0,opacity:a,scaleX:1,scaleY:1,fill:r!=="none"?r:void 0,stroke:s||void 0,strokeWidth:n}}function kh(t,r,s,n,a){const i=parseFloat(t.getAttribute("cx")||"50"),l=parseFloat(t.getAttribute("cy")||"50"),o=parseFloat(t.getAttribute("r")||"25");return{type:"shape",shapeType:"circle",x:i-o,y:l-o,width:o*2,height:o*2,rotation:0,opacity:a,scaleX:1,scaleY:1,fill:r!=="none"?r:void 0,stroke:s||void 0,strokeWidth:n}}function Ch(t,r,s,n,a){const i=parseFloat(t.getAttribute("cx")||"50"),l=parseFloat(t.getAttribute("cy")||"50"),o=parseFloat(t.getAttribute("rx")||"25"),c=parseFloat(t.getAttribute("ry")||"25");return{type:"shape",shapeType:"circle",x:i-o,y:l-c,width:o*2,height:c*2,rotation:0,opacity:a,scaleX:1,scaleY:c/o,fill:r!=="none"?r:void 0,stroke:s||void 0,strokeWidth:n}}function _h(t,r,s,n){const a=parseFloat(t.getAttribute("x1")||"0"),i=parseFloat(t.getAttribute("y1")||"0"),l=parseFloat(t.getAttribute("x2")||"100"),o=parseFloat(t.getAttribute("y2")||"100");return{type:"line",x:a,y:i,width:Math.abs(l-a),height:Math.abs(o-i),rotation:0,opacity:n,scaleX:1,scaleY:1,lineType:"straight",lineEndX:l-a,lineEndY:o-i,stroke:r||"#000000",strokeWidth:s||2,lineCapStyle:"round"}}function Sh(t,r,s,n){let a={x:0,y:0,width:100,height:100};try{const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.style.position="absolute",h.style.visibility="hidden";const p=t.cloneNode(!0);if(h.appendChild(p),document.body.appendChild(h),p.getBBox){const b=p.getBBox();a={x:b.x,y:b.y,width:b.width,height:b.height}}document.body.removeChild(h)}catch(h){console.warn("Failed to get accurate bounding box, using defaults",h)}const i=t.cloneNode(!0),l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("viewBox",`${a.x} ${a.y} ${a.width} ${a.height}`),l.setAttribute("width",String(a.width)),l.setAttribute("height",String(a.height)),l.appendChild(i);const o=new XMLSerializer().serializeToString(l),c=new Blob([o],{type:"image/svg+xml"}),f=URL.createObjectURL(c);return{type:"image",x:a.x,y:a.y,width:a.width,height:a.height,rotation:0,opacity:n,scaleX:1,scaleY:1,src:f}}function Eh(t){const r=["image/svg+xml","image/svg","text/xml"],s=[".svg"],n=r.includes(t.type),a=s.some(i=>t.name.toLowerCase().endsWith(i));return n||a}const Zn={edgy:[{name:"Skull",icon:ac},{name:"Flame",icon:ic},{name:"Zap",icon:oc},{name:"Sword",icon:lc},{name:"Ghost",icon:cc},{name:"Bug",icon:dc},{name:"Eye",icon:Pr},{name:"Target",icon:vn},{name:"Bomb",icon:uc},{name:"Swords",icon:fc},{name:"Shield",icon:hc},{name:"Crosshair",icon:pc}],retro:[{name:"Radio",icon:Yl},{name:"Disc",icon:ql},{name:"Music",icon:Zl},{name:"Rocket",icon:Xl},{name:"Crown",icon:Ql},{name:"Anchor",icon:Jl},{name:"Sun",icon:_a},{name:"Moon",icon:ec},{name:"Camera",icon:tc},{name:"Gamepad",icon:rc},{name:"Headphones",icon:sc},{name:"Watch",icon:nc}],shapes:[{name:"Triangle",icon:Wl},{name:"Hexagon",icon:Gl},{name:"Circle",icon:ka},{name:"Square",icon:Tr},{name:"Star",icon:Ca},{name:"Heart",icon:sr},{name:"Sparkles",icon:it},{name:"Hand",icon:Kl}],nature:[{name:"Cat",icon:zl},{name:"Dog",icon:Ll},{name:"Fish",icon:Ml},{name:"Bird",icon:$l},{name:"Leaf",icon:Bl},{name:"Cloud",icon:Ul},{name:"Mountain",icon:zs},{name:"Waves",icon:Hl},{name:"Feather",icon:Vl}],street:[{name:"Pizza",icon:Tl},{name:"Coffee",icon:Pl},{name:"Cherry",icon:Rl},{name:"Glasses",icon:Ol},{name:"Lock",icon:Ls},{name:"Key",icon:Dl},{name:"Fingerprint",icon:Il},{name:"Compass",icon:Fl}],sports:[{name:"Trophy",icon:_l},{name:"Award",icon:Sl},{name:"Medal",icon:El},{name:"Dumbbell",icon:Al},{name:"Target",icon:vn}],emoji:[{name:"Laugh",icon:Nl},{name:"Smile",icon:kl},{name:"Frown",icon:Cl}]},Ah=[{id:"checkerboard",name:"Checkerboard",description:"Vans style"},{id:"speed-lines",name:"Speed Lines",description:"Racing stripes"},{id:"halftone",name:"Halftone",description:"Comic book dots"},{id:"noise",name:"Noise",description:"Grainy texture"},{id:"tie-dye",name:"Tie-Dye",description:"Psychedelic swirl"},{id:"diagonal-stripes",name:"Diagonal Stripes",description:"Bold lines"},{id:"hexagons",name:"Hexagons",description:"Honeycomb pattern"},{id:"crosshatch",name:"Crosshatch",description:"Grid overlay"}],Th=[{id:"concrete",name:"Concrete",query:"concrete texture"},{id:"rust",name:"Rust",query:"rust metal texture"},{id:"graffiti",name:"Graffiti",query:"graffiti wall"},{id:"wood",name:"Wood Grain",query:"wood grain texture"},{id:"sticker-bomb",name:"Sticker Bomb",query:"sticker collage"},{id:"asphalt",name:"Asphalt",query:"asphalt pavement"},{id:"brick",name:"Brick Wall",query:"red brick wall"},{id:"marble",name:"Marble",query:"white marble texture"},{id:"carbon-fiber",name:"Carbon Fiber",query:"carbon fiber weave"},{id:"splatter",name:"Paint Splatter",query:"paint splatter drips"}],Ph=[{id:"g1",label:"Circle",shapeType:"circle"},{id:"g2",label:"Square",shapeType:"rect"},{id:"g4",label:"Star",shapeType:"star"}],Rh={"scratched-wood":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Cpath d='M5 10 L55 8 M10 25 L50 27 M8 40 L52 38 M15 52 L45 55' stroke='%23444' stroke-width='0.5' fill='none'/%3E%3Cpath d='M20 5 L22 55 M35 8 L37 52 M48 3 L50 57' stroke='%23333' stroke-width='0.3' fill='none'/%3E%3C/svg%3E","grip-tape-dust":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Ccircle cx='10' cy='15' r='1' fill='%23555'/%3E%3Ccircle cx='25' cy='8' r='0.5' fill='%23444'/%3E%3Ccircle cx='45' cy='20' r='1.5' fill='%23555'/%3E%3Ccircle cx='15' cy='35' r='0.8' fill='%23444'/%3E%3Ccircle cx='50' cy='45' r='1' fill='%23555'/%3E%3Ccircle cx='30' cy='50' r='0.6' fill='%23444'/%3E%3Ccircle cx='8' cy='55' r='1.2' fill='%23555'/%3E%3Ccircle cx='40' cy='30' r='0.7' fill='%23444'/%3E%3C/svg%3E","halftone-dots":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Ccircle cx='10' cy='10' r='3' fill='%23444'/%3E%3Ccircle cx='30' cy='10' r='2' fill='%23444'/%3E%3Ccircle cx='50' cy='10' r='3' fill='%23444'/%3E%3Ccircle cx='20' cy='30' r='2.5' fill='%23444'/%3E%3Ccircle cx='40' cy='30' r='2' fill='%23444'/%3E%3Ccircle cx='10' cy='50' r='2' fill='%23444'/%3E%3Ccircle cx='30' cy='50' r='3' fill='%23444'/%3E%3Ccircle cx='50' cy='50' r='2.5' fill='%23444'/%3E%3C/svg%3E"};function Oh({onAddObject:t,deckCenterX:r,deckCenterY:s}){const[n,a]=C.useState("edgy"),i=l=>{t({type:"sticker",x:r-20,y:s-20,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:l,strokeWidth:3,stroke:"#ffffff",solidFill:!1})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Vector stickers from Lucide icons. Click to add as large decals."}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(Zn).map(l=>e.jsx("button",{onClick:()=>a(l),className:be("px-2 py-1 text-[9px] uppercase tracking-wider border transition-colors",n===l?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"),children:l},l))}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Zn[n].map(l=>{const o=l.icon;return e.jsx("button",{onClick:()=>i(l.name),className:"aspect-square border border-border bg-secondary hover:border-primary transition-colors flex items-center justify-center",title:l.name,children:e.jsx(o,{className:"w-6 h-6",strokeWidth:3})},l.name)})}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:'Tip: Use the Inspector to toggle "Solid Fill" and adjust stroke width.'})]})}function Dh({onAddObject:t,deckCenterX:r,deckCenterY:s}){const[n,a]=C.useState("#1e3a8a"),[i,l]=C.useState("#3b82f6"),[o,c]=C.useState(20),f=p=>{switch(p){case"checkerboard":return`conic-gradient(from 90deg at 1px 1px, ${i} 90deg, ${n} 0) 0 0/${o}px ${o}px`;case"speed-lines":return`repeating-linear-gradient(90deg, ${n} 0px, ${n} ${o/4}px, ${i} ${o/4}px, ${i} ${o/2}px)`;case"halftone":return`radial-gradient(${n} ${o/6}px, ${i} ${o/6}px)`;case"noise":return i;case"tie-dye":return`radial-gradient(ellipse at 30% 30%, ${n}, transparent 50%), radial-gradient(ellipse at 70% 70%, ${i}, transparent 50%), ${n}`;case"diagonal-stripes":return`repeating-linear-gradient(45deg, ${n} 0px, ${n} ${o}px, ${i} ${o}px, ${i} ${o*2}px)`;case"hexagons":return`repeating-conic-gradient(from 30deg, ${n} 0deg 60deg, ${i} 60deg 120deg, ${n} 120deg 180deg, ${i} 180deg 240deg, ${n} 240deg 300deg, ${i} 300deg 360deg) 0 0/${o*2}px ${o*2}px`;case"crosshatch":return`repeating-linear-gradient(0deg, transparent, transparent ${o}px, ${i} ${o}px, ${i} ${o+2}px), repeating-linear-gradient(90deg, transparent, transparent ${o}px, ${n} ${o}px, ${n} ${o+2}px)`;default:return n}},h=p=>{t({type:"shape",x:0,y:0,width:Gt,height:Wt,rotation:0,opacity:1,scaleX:1,scaleY:1,shapeType:"rect",patternType:p,patternPrimaryColor:n,patternSecondaryColor:i,patternScale:o,fill:n})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Procedural patterns using CSS gradients. Infinite color combinations."}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Primary"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:n,onChange:p=>a(p.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),e.jsx("span",{className:"text-[9px] font-mono",children:n})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Secondary"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:i,onChange:p=>l(p.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),e.jsx("span",{className:"text-[9px] font-mono",children:i})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Scale"}),e.jsxs("span",{className:"text-[10px] font-mono",children:[o,"px"]})]}),e.jsx(ve,{value:[o],onValueChange:([p])=>c(p),min:5,max:50,step:5})]}),e.jsx("div",{className:"space-y-2",children:Ah.map(p=>e.jsxs("button",{onClick:()=>h(p.id),className:"w-full border border-border hover:border-primary transition-colors p-2 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 border border-border flex-shrink-0",style:{background:f(p.id),backgroundSize:`${o}px ${o}px`}}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"text-xs font-mono block",children:p.name}),e.jsx("span",{className:"text-[9px] text-muted-foreground",children:p.description})]})]},p.id))})]})}function Ih({onAddObject:t,deckCenterX:r,deckCenterY:s}){const n=(a,i)=>{const l=`https://picsum.photos/seed/${a.replace(/\s/g,"")}-${i}/200/300`;t({type:"texture",x:0,y:0,width:Gt,height:Wt,rotation:0,opacity:.6,scaleX:1,scaleY:1,textureUrl:l,blendMode:"multiply"})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Realistic textures applied with blend modes. Click to add as overlay."}),Th.map(a=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:a.name}),e.jsx("div",{className:"grid grid-cols-3 gap-1",children:[0,1,2].map(i=>e.jsx("button",{onClick:()=>n(a.query,i),className:"aspect-square border border-border hover:border-primary transition-colors overflow-hidden bg-secondary",children:e.jsx("img",{src:`https://picsum.photos/seed/${a.query.replace(/\s/g,"")}-${i}/100/100`,alt:a.name,className:"w-full h-full object-cover opacity-70 hover:opacity-100 transition-opacity",loading:"lazy"})},i))})]},a.id)),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Textures use multiply blend by default. Change in Inspector."})]})}const Fh=[{id:"straight",name:"Straight",description:"Clean straight line",icon:""},{id:"curved",name:"Curved",description:"Smooth bezier curve",icon:""},{id:"zigzag",name:"Zigzag",description:"Sharp angles",icon:""},{id:"dashed",name:"Dashed",description:"Dotted line",icon:""}];function zh({onAddObject:t,deckCenterX:r,deckCenterY:s}){const[n,a]=C.useState("#ffffff"),[i,l]=C.useState(3),o=c=>{t({type:"line",x:r-30,y:s,width:60,height:60,rotation:0,opacity:1,scaleX:1,scaleY:1,lineType:c,lineEndX:60,lineEndY:c==="curved"?-30:0,lineCurve:c==="curved"?50:0,strokeWidth:i,stroke:n,lineCapStyle:"round"})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Draw lines and curves. Click to add, then drag endpoints in canvas."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Stroke Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:n,onChange:c=>a(c.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),e.jsx("div",{className:"flex gap-1",children:["#ffffff","#ccff00","#ff6600","#00ffff","#ff00ff","#000000"].map(c=>e.jsx("button",{onClick:()=>a(c),className:`w-5 h-5 border ${n===c?"border-primary":"border-border"}`,style:{backgroundColor:c}},c))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),e.jsxs("span",{className:"text-[10px] font-mono",children:[i,"px"]})]}),e.jsx(ve,{value:[i],onValueChange:([c])=>l(c),min:1,max:12,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Line Types"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Fh.map(c=>e.jsxs("button",{onClick:()=>o(c.id),className:"border border-border hover:border-primary transition-colors p-3 flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-2xl leading-none",style:{color:n},children:c.icon}),e.jsx("span",{className:"text-[9px] font-mono",children:c.name})]},c.id))})]}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Tip: Use Inspector to adjust curve amount and endpoints."})]})}function Lh({onAddObject:t,deckCenterX:r,deckCenterY:s}){const[n,a]=C.useState([]),[i,l]=C.useState(!1),[o,c]=C.useState(!1),f=C.useRef(null),{isAuthenticated:h}=Zt();C.useState(()=>{h&&p()});const p=async()=>{if(h){l(!0);try{const d=await ls.list();a(d.assets||[])}catch(d){console.error("Failed to load assets:",d)}finally{l(!1)}}},b=async d=>{const m=d.target.files;if(!m||m.length===0)return;c(!0);let g=0,x=0,N=0;try{for(const k of Array.from(m))if(Eh(k))try{const j=await wh(k);j.forEach(A=>t(A)),g++,N+=j.length,j.length>0?ie.success(`Imported ${k.name}`,{description:`${j.length} shape${j.length!==1?"s":""} added to canvas`,duration:3e3}):ie.warning(`${k.name} imported but no shapes found`,{description:"The SVG may be empty or use unsupported features",duration:3e3})}catch(j){console.error("SVG import failed:",j),ie.error(`Failed to import ${k.name}`,{description:"Invalid SVG file or unsupported format",duration:4e3})}else try{const{url:j,width:A,height:T}=await ls.upload(k);x++,ie.success(`Uploaded ${k.name}`,{description:"Image added to your library"}),await p()}catch(j){console.error("Image upload failed:",j),ie.error(`Failed to upload ${k.name}`,{description:"Please try again or check file format"})}if(m.length>1){const k=[];g>0&&k.push(`${g} SVG${g!==1?"s":""} (${N} shapes)`),x>0&&k.push(`${x} image${x!==1?"s":""}`),k.length>0&&ie.success("Batch upload complete",{description:k.join(" + ")})}}catch(k){console.error("Upload failed:",k),ie.error("Upload failed",{description:"Please try again or check your files"})}finally{c(!1),f.current&&(f.current.value="")}},u=d=>{const g=Math.min(120/d.width,120/d.height),x=d.width*g,N=d.height*g;t({type:"image",x:r-x/2,y:s-N/2,width:d.width,height:d.height,rotation:0,opacity:1,scaleX:g,scaleY:g,src:d.file_url})},w=async d=>{if(confirm("Delete this asset?"))try{await ls.delete(d),await p()}catch(m){console.error("Delete failed:",m)}};return h?e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{ref:f,type:"file",accept:"image/*,.svg",multiple:!0,className:"hidden",onChange:b}),e.jsx("div",{onClick:()=>{var d;return(d=f.current)==null?void 0:d.click()},className:"border-2 border-dashed border-border p-6 text-center hover:border-primary transition-colors cursor-pointer",children:o?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-6 h-6 mx-auto mb-2 animate-spin text-primary"}),e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Na,{className:"w-6 h-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground block mb-1",children:"Upload Images"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"PNG, JPG, SVG"})]})}),i?e.jsx("div",{className:"text-center py-4",children:e.jsx(ot,{className:"w-5 h-5 mx-auto animate-spin text-muted-foreground"})}):n.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map(d=>e.jsxs("div",{className:"relative group border border-border hover:border-primary transition-colors overflow-hidden aspect-square cursor-pointer",onClick:()=>u(d),children:[e.jsx("img",{src:d.file_url,alt:d.name,className:"w-full h-full object-cover"}),e.jsx("button",{onClick:m=>{m.stopPropagation(),w(d.id)},className:"absolute top-1 right-1 p-1 bg-destructive text-destructive-foreground rounded opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Dt,{className:"w-3 h-3"})})]},d.id))}):e.jsx("p",{className:"text-center text-xs text-muted-foreground py-4",children:"No uploads yet. Click above to upload!"})]}):e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Login to upload custom images"}),e.jsx(te,{size:"sm",onClick:()=>window.location.href="/auth",children:"Login"})]})}function Mh(){const{textureOverlays:t,toggleTexture:r,updateTexture:s}=Se();return e.jsxs("div",{className:"space-y-4",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground block",children:"Texture Overlays"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Add realistic print textures that blend over your design."}),t.map(n=>e.jsxs("div",{className:be("border p-3 space-y-3 transition-colors",n.enabled?"border-primary bg-secondary/50":"border-border"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r(n.id),className:be("w-12 h-12 border flex-shrink-0 bg-cover bg-center",n.enabled?"border-primary":"border-border"),style:{backgroundImage:`url("${Rh[n.id]}")`}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-mono text-xs",children:n.name}),e.jsx("button",{onClick:()=>r(n.id),className:be("w-8 h-4 rounded-full transition-colors relative",n.enabled?"bg-primary":"bg-muted"),children:e.jsx("span",{className:be("absolute top-0.5 w-3 h-3 rounded-full bg-white transition-transform",n.enabled?"translate-x-4":"translate-x-0.5")})})]}),e.jsx("span",{className:"text-[9px] text-muted-foreground uppercase tracking-wider",children:n.blendMode})]})]}),n.enabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Opacity"}),e.jsxs("span",{className:"font-mono text-[10px]",children:[Math.round(n.opacity*100),"%"]})]}),e.jsx(ve,{value:[n.opacity*100],onValueChange:([a])=>s(n.id,{opacity:a/100}),min:5,max:100,step:5,className:"w-full"})]})]},n.id))]})}function $h({tool:t,onAddObject:r,deckCenterX:s,deckCenterY:n}){const a=(o,c)=>{o.dataTransfer.setData("application/json",JSON.stringify(c)),o.dataTransfer.effectAllowed="copy"},i=()=>{r({type:"text",x:s-25,y:n,width:50,height:24,rotation:0,opacity:1,scaleX:1,scaleY:1,text:"SKATE",fontSize:18,fontFamily:"Oswald",fill:"#ffffff"}),ie.success("Text added to center of deck",{description:"Double-click text to edit, or use Inspector panel to customize",duration:3e3})},l=o=>{r({type:"shape",x:s-15,y:n-15,width:30,height:30,rotation:0,opacity:1,scaleX:1,scaleY:1,shapeType:o,fill:"#ffffff"})};if(t==="stickers")return e.jsx(Oh,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(t==="patterns")return e.jsx(Dh,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(t==="textures")return e.jsx(Ih,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(t==="lines")return e.jsx(zh,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(t==="graphics")return e.jsxs("div",{className:"space-y-3",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Click to add or drag to canvas"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Ph.map(o=>e.jsxs("button",{draggable:!0,onDragStart:c=>a(c,{type:"shape",shapeType:o.shapeType,width:30,height:30,fill:"#ffffff"}),onClick:()=>l(o.shapeType),className:"aspect-square border border-border bg-secondary hover:border-primary transition-colors flex items-center justify-center cursor-grab active:cursor-grabbing",children:[o.shapeType==="circle"&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-white"}),o.shapeType==="rect"&&e.jsx("div",{className:"w-8 h-8 bg-white"}),o.shapeType==="star"&&e.jsx("span",{className:"text-white text-2xl",children:""})]},o.id))})]});if(t==="pen"){const o=()=>{r({type:"path",x:s-30,y:n-30,width:60,height:60,rotation:0,opacity:1,scaleX:1,scaleY:1,stroke:"#ffffff",strokeWidth:3,solidFill:!1,pathPoints:[{x:0,y:30},{x:30,y:0,cp1x:10,cp1y:30,cp2x:20,cp2y:0},{x:60,y:30,cp1x:40,cp1y:0,cp2x:50,cp2y:30}],pathClosed:!1})},c=()=>{r({type:"path",x:s-25,y:n-25,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ccff00",stroke:"#ffffff",strokeWidth:2,solidFill:!0,pathPoints:[{x:25,y:0},{x:50,y:43,cp1x:50,cp1y:15,cp2x:50,cp2y:28},{x:0,y:43,cp1x:0,cp1y:28,cp2x:0,cp2y:15}],pathClosed:!0})};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Quick Start"}),e.jsx("button",{onClick:o,className:"w-full btn-brutal text-left",children:"+ Curved Path"}),e.jsx("button",{onClick:c,className:"w-full btn-brutal text-left",children:"+ Closed Shape"})]}),e.jsxs("div",{className:"space-y-2 pt-3 border-t border-border",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Instructions"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Select a path"})," to see anchor points (blue) and control handles (orange)."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Drag"})," the path to move it around the canvas."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Edit points"})," in the Inspector panel to add/remove anchors or adjust curves."]}),e.jsxs("p",{children:["Use ",e.jsx("strong",{children:"Transform tools"})," to scale and rotate paths."]})]})]})]})}return t==="text"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Add custom text to your deck. Text appears in the center and is immediately selected for editing."}),e.jsxs("button",{onClick:i,className:"w-full btn-brutal text-left flex items-center justify-between group",children:[e.jsx("span",{children:"+ Add Text"}),e.jsx("span",{className:"text-[9px] text-muted-foreground group-hover:text-foreground transition-colors",children:"Click to add"})]}),e.jsx("div",{className:"p-3 border border-accent/30 bg-accent/10 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent text-lg",children:""}),e.jsxs("div",{className:"text-[10px] text-muted-foreground space-y-1",children:[e.jsx("p",{children:e.jsx("strong",{children:"After adding:"})}),e.jsx("p",{children:" Edit text in Inspector panel"}),e.jsx("p",{children:" Change font, size, color"}),e.jsx("p",{children:" Drag to reposition"}),e.jsx("p",{children:" Use transform handles to resize/rotate"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Popular Styles"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[e.jsx("span",{className:"font-display text-base font-bold",children:"BOLD IMPACT"}),e.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"High visibility branding"})]}),e.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[e.jsx("span",{className:"font-display text-base italic",children:"Stylish Script"}),e.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Elegant cursive look"})]}),e.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[e.jsx("span",{className:"font-mono text-sm",children:"TECHNICAL MONO"}),e.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Clean modern aesthetic"})]})]})]})]}):t==="uploads"?e.jsx(Lh,{onAddObject:r,deckCenterX:s,deckCenterY:n}):t==="finishes"?e.jsx(Mh,{}):e.jsx("div",{className:"text-center py-8",children:e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Use Stickers, Patterns, or Textures for assets."})})}const Bh={templates:"Templates",graphics:"Graphics",text:"Text",uploads:"Uploads",background:"Background",finishes:"Finishes",stickers:"Stickers",patterns:"Patterns",textures:"Textures",lines:"Lines",pen:"Pen Tool"};function Xn(){const{activeTool:t,drawerOpen:r,toggleDrawer:s,addObject:n}=Se();if(!r||!t||t==="pen")return null;const a=Gt/2,i=Wt/2;return e.jsxs("div",{className:"w-56 bg-card border-r border-border h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 px-3 border-b border-border",children:[e.jsx("span",{className:"font-display text-xs uppercase tracking-widest",children:Bh[t]}),e.jsx("button",{onClick:()=>s(!1),className:"w-6 h-6 flex items-center justify-center hover:bg-secondary transition-colors",children:e.jsx(pr,{className:"w-4 h-4"})})]}),e.jsx(vt,{className:"flex-1 p-3",children:e.jsx($h,{tool:t,onAddObject:n,deckCenterX:a,deckCenterY:i})})]})}function Uh(t){return t.type==="text"?Mr:t.type==="image"?ja:t.type==="sticker"?va:t.type==="line"?ba:t.type==="path"?Fs:t.type==="texture"?zs:t.type==="shape"?t.shapeType==="circle"?ka:t.shapeType==="star"?Ca:Tr:Tr}function Qn(t){return t.type==="text"&&t.text?t.text.length>15?t.text.slice(0,15)+"...":t.text:t.type==="sticker"&&t.iconName?`${t.iconName} Sticker`:t.type==="shape"&&t.shapeType?`${t.shapeType.charAt(0).toUpperCase()+t.shapeType.slice(1)} Shape`:t.type==="line"&&t.lineType?`${t.lineType.charAt(0).toUpperCase()+t.lineType.slice(1)} Line`:t.type==="path"?t.pathClosed?"Closed Path":"Open Path":t.type==="texture"?"Texture Overlay":t.type==="image"?"Image":t.type.charAt(0).toUpperCase()+t.type.slice(1)}function Hh({obj:t,index:r,isSelected:s,onSelect:n,onDelete:a}){const i=Uh(t);return e.jsxs("div",{onClick:n,className:be("flex items-center gap-2 px-2 py-1.5 border-b border-border cursor-pointer group","hover:bg-secondary transition-colors",s&&"bg-primary/10 border-l-2 border-l-primary"),children:[e.jsx(xc,{className:"w-3 h-3 text-muted-foreground cursor-grab"}),e.jsx(i,{className:"w-4 h-4 text-foreground"}),e.jsx("span",{className:"flex-1 text-xs truncate font-medium",children:Qn(t)}),e.jsxs(tn,{children:[e.jsx(rn,{asChild:!0,children:e.jsx("button",{onClick:l=>{l.stopPropagation();const o=Qn(t);a(),ie.success(`Deleted "${o}"`,{description:"Use Layers panel to manage or remove items",duration:2e3})},className:"w-6 h-6 flex items-center justify-center hover:bg-destructive hover:text-destructive-foreground transition-colors rounded opacity-0 group-hover:opacity-100",title:"Delete layer",children:e.jsx(Dt,{className:"w-3.5 h-3.5"})})}),e.jsx(Xr,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Delete this layer"})})]})]})}function no(){const{objects:t,selectedId:r,selectObject:s,deleteObject:n,moveLayer:a}=Se(),i=[...t].reverse();return e.jsxs("div",{className:"border-t border-border",children:[e.jsxs("div",{className:"py-2 px-3 border-b border-border bg-accent/10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ar,{className:"w-4 h-4 text-accent"}),e.jsxs("span",{className:"font-display text-xs uppercase tracking-widest text-foreground font-semibold",children:["Layers ",t.length>0&&`(${t.length})`]})]}),e.jsxs(tn,{children:[e.jsx(rn,{asChild:!0,children:e.jsx("button",{className:"w-4 h-4 flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(mc,{className:"w-3.5 h-3.5"})})}),e.jsxs(Xr,{side:"left",className:"max-w-xs",children:[e.jsx("p",{className:"text-xs font-semibold mb-1",children:"Layers Panel"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Shows all elements on your deck. Click to select, hover to reveal delete button."})]})]})]}),t.length>0&&e.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Click layer to select  Hover to delete"})]}),e.jsx(vt,{className:"h-48",children:i.length===0?e.jsxs("div",{className:"p-6 text-center space-y-2",children:[e.jsx(Ar,{className:"w-8 h-8 mx-auto text-muted-foreground opacity-50"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"No layers yet"}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Add text, shapes, or images to see them here"})]})]}):i.map((l,o)=>{const c=t.length-1-o;return e.jsx(Hh,{obj:l,index:c,isSelected:r===l.id,onSelect:()=>s(l.id),onDelete:()=>n(l.id),onMoveUp:()=>a(l.id,"up"),onMoveDown:()=>a(l.id,"down"),isFirst:o===0,isLast:o===i.length-1},l.id)})})]})}var ts="Switch",[Vh]=dt(ts),[Wh,Gh]=Vh(ts),ao=C.forwardRef((t,r)=>{const{__scopeSwitch:s,name:n,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:f,form:h,...p}=t,[b,u]=C.useState(null),w=Re(r,N=>u(N)),d=C.useRef(!1),m=b?h||!!b.closest("form"):!0,[g,x]=jt({prop:a,defaultProp:i??!1,onChange:f,caller:ts});return e.jsxs(Wh,{scope:s,checked:g,disabled:o,children:[e.jsx(Ne.button,{type:"button",role:"switch","aria-checked":g,"aria-required":l,"data-state":co(g),"data-disabled":o?"":void 0,disabled:o,value:c,...p,ref:w,onClick:ye(t.onClick,N=>{x(k=>!k),m&&(d.current=N.isPropagationStopped(),d.current||N.stopPropagation())})}),m&&e.jsx(lo,{control:b,bubbles:!d.current,name:n,value:c,checked:g,required:l,disabled:o,form:h,style:{transform:"translateX(-100%)"}})]})});ao.displayName=ts;var io="SwitchThumb",oo=C.forwardRef((t,r)=>{const{__scopeSwitch:s,...n}=t,a=Gh(io,s);return e.jsx(Ne.span,{"data-state":co(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:r})});oo.displayName=io;var Kh="SwitchBubbleInput",lo=C.forwardRef(({__scopeSwitch:t,control:r,checked:s,bubbles:n=!0,...a},i)=>{const l=C.useRef(null),o=Re(l,i),c=Ui(s),f=Zs(r);return C.useEffect(()=>{const h=l.current;if(!h)return;const p=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==s&&u){const w=new Event("click",{bubbles:n});u.call(h,s),h.dispatchEvent(w)}},[c,s,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:o,style:{...a.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});lo.displayName=Kh;function co(t){return t?"checked":"unchecked"}var uo=ao,Yh=oo;const rs=C.forwardRef(({className:t,...r},s)=>e.jsx(uo,{className:be("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...r,ref:s,children:e.jsx(Yh,{className:be("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));rs.displayName=uo.displayName;var qh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Zh=qh.reduce((t,r)=>{const s=al(`Primitive.${r}`),n=C.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{}),Xh="Separator",Jn="horizontal",Qh=["horizontal","vertical"],fo=C.forwardRef((t,r)=>{const{decorative:s,orientation:n=Jn,...a}=t,i=Jh(n)?n:Jn,o=s?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(Zh.div,{"data-orientation":i,...o,...a,ref:r})});fo.displayName=Xh;function Jh(t){return Qh.includes(t)}var ho=fo;const _t=C.forwardRef(({className:t,orientation:r="horizontal",decorative:s=!0,...n},a)=>e.jsx(ho,{ref:a,decorative:s,orientation:r,className:be("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));_t.displayName=ho.displayName;function ep(){const{selectedId:t,objects:r,updateObject:s}=Se(),[n,a]=C.useState("gradient"),i=r.find(l=>l.id===t);return!t||!i?e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Select an object to add effects"}):i.type!=="shape"&&i.type!=="text"&&i.type!=="sticker"?e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Effects only available for shapes, text, and stickers"}):e.jsx(vt,{className:"h-full",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 border-b border-border pb-2",children:[e.jsxs(te,{variant:n==="gradient"?"default":"ghost",size:"sm",onClick:()=>a("gradient"),children:[e.jsx(it,{className:"w-3 h-3 mr-1"}),"Gradient"]}),e.jsxs(te,{variant:n==="shadow"?"default":"ghost",size:"sm",onClick:()=>a("shadow"),children:[e.jsx(gc,{className:"w-3 h-3 mr-1"}),"Shadow"]}),e.jsxs(te,{variant:n==="glow"?"default":"ghost",size:"sm",onClick:()=>a("glow"),children:[e.jsx(_a,{className:"w-3 h-3 mr-1"}),"Glow"]}),e.jsxs(te,{variant:n==="filters"?"default":"ghost",size:"sm",onClick:()=>a("filters"),children:[e.jsx(yc,{className:"w-3 h-3 mr-1"}),"Filters"]})]}),n==="gradient"&&e.jsx(tp,{object:i,updateObject:s}),n==="shadow"&&e.jsx(rp,{object:i,updateObject:s}),n==="glow"&&e.jsx(sp,{object:i,updateObject:s}),n==="filters"&&e.jsx(np,{object:i,updateObject:s})]})})}function tp({object:t,updateObject:r}){const s=t.fillType||"solid",n=t.gradientStops||[{offset:0,color:"#ff0000"},{offset:1,color:"#0000ff"}],a=t.gradientAngle||0,i=f=>{r(t.id,{fillType:f,gradientStops:f!=="solid"?n:void 0,gradientAngle:f==="linear-gradient"?a:void 0})},l=(f,h)=>{const p=[...n];p[f]={...p[f],...h},r(t.id,{gradientStops:p})},o=()=>{const f=[...n,{offset:.5,color:"#00ff00"}].sort((h,p)=>h.offset-p.offset);r(t.id,{gradientStops:f})},c=f=>{if(n.length<=2)return;const h=n.filter((p,b)=>b!==f);r(t.id,{gradientStops:h})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-xs",children:"Fill Type"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(te,{variant:s==="solid"?"default":"outline",size:"sm",onClick:()=>i("solid"),className:"text-xs",children:"Solid"}),e.jsx(te,{variant:s==="linear-gradient"?"default":"outline",size:"sm",onClick:()=>i("linear-gradient"),className:"text-xs",children:"Linear"}),e.jsx(te,{variant:s==="radial-gradient"?"default":"outline",size:"sm",onClick:()=>i("radial-gradient"),className:"text-xs",children:"Radial"})]})]}),s!=="solid"&&e.jsxs(e.Fragment,{children:[s==="linear-gradient"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Angle: ",a,""]}),e.jsx(ve,{value:[a],onValueChange:([f])=>r(t.id,{gradientAngle:f}),min:0,max:360,step:1})]}),e.jsx(_t,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-xs",children:"Color Stops"}),e.jsx(te,{size:"sm",variant:"ghost",onClick:o,children:e.jsx(xs,{className:"w-3 h-3"})})]}),n.map((f,h)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{type:"color",value:f.color,onChange:p=>l(h,{color:p.target.value}),className:"w-12 h-8 p-1 cursor-pointer"}),e.jsx(ve,{value:[f.offset*100],onValueChange:([p])=>l(h,{offset:p/100}),min:0,max:100,step:1,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-10 text-right",children:[Math.round(f.offset*100),"%"]}),n.length>2&&e.jsx(te,{size:"sm",variant:"ghost",onClick:()=>c(h),children:e.jsx(Dt,{className:"w-3 h-3"})})]},h))]})]})]})}function rp({object:t,updateObject:r}){const s=t.dropShadow||{enabled:!1,offsetX:4,offsetY:4,blur:8,color:"#000000",opacity:.5},n=a=>{r(t.id,{dropShadow:{...s,...a}})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-xs",children:"Drop Shadow"}),e.jsx(rs,{checked:s.enabled,onCheckedChange:a=>n({enabled:a})})]}),s.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Offset X: ",s.offsetX,"px"]}),e.jsx(ve,{value:[s.offsetX],onValueChange:([a])=>n({offsetX:a}),min:-50,max:50,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Offset Y: ",s.offsetY,"px"]}),e.jsx(ve,{value:[s.offsetY],onValueChange:([a])=>n({offsetY:a}),min:-50,max:50,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Blur: ",s.blur,"px"]}),e.jsx(ve,{value:[s.blur],onValueChange:([a])=>n({blur:a}),min:0,max:50,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Opacity: ",Math.round(s.opacity*100),"%"]}),e.jsx(ve,{value:[s.opacity*100],onValueChange:([a])=>n({opacity:a/100}),min:0,max:100,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-xs",children:"Color"}),e.jsx(Ie,{type:"color",value:s.color,onChange:a=>n({color:a.target.value}),className:"w-full h-10 cursor-pointer"})]})]})]})}function sp({object:t,updateObject:r}){const s=t.glow||{enabled:!1,radius:10,color:"#ffffff",intensity:.8},n=a=>{r(t.id,{glow:{...s,...a}})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-xs",children:"Glow Effect"}),e.jsx(rs,{checked:s.enabled,onCheckedChange:a=>n({enabled:a})})]}),s.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Radius: ",s.radius,"px"]}),e.jsx(ve,{value:[s.radius],onValueChange:([a])=>n({radius:a}),min:0,max:50,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Intensity: ",Math.round(s.intensity*100),"%"]}),e.jsx(ve,{value:[s.intensity*100],onValueChange:([a])=>n({intensity:a/100}),min:0,max:100,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-xs",children:"Color"}),e.jsx(Ie,{type:"color",value:s.color,onChange:a=>n({color:a.target.value}),className:"w-full h-10 cursor-pointer"})]})]})]})}function np({object:t,updateObject:r}){const s=t.duotone||{enabled:!1,color1:"#000000",color2:"#ccff00"},n=a=>{r(t.id,{duotone:{...s,...a}})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Blur: ",t.blur||0,"px"]}),e.jsx(ve,{value:[t.blur||0],onValueChange:([a])=>r(t.id,{blur:a}),min:0,max:20,step:.5}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Gaussian blur effect (0-20px)"})]}),e.jsx(_t,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Saturation: ",t.saturate||100,"%"]}),e.jsx(ve,{value:[t.saturate||100],onValueChange:([a])=>r(t.id,{saturate:a}),min:0,max:200,step:5}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"0% = grayscale, 100% = normal, 200% = hyper-saturated"})]}),e.jsx(_t,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Sepia: ",t.sepia||0,"%"]}),e.jsx(ve,{value:[t.sepia||0],onValueChange:([a])=>r(t.id,{sepia:a}),min:0,max:100,step:5}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Vintage photo tone effect"})]}),e.jsx(_t,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ce,{className:"text-xs",children:["Posterize: ",t.posterize||32," levels"]}),e.jsx(ve,{value:[t.posterize||32],onValueChange:([a])=>r(t.id,{posterize:a}),min:2,max:32,step:1}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Reduce color levels (lower = more posterized)"})]}),e.jsx(_t,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-xs",children:"Duotone Effect"}),e.jsx(rs,{checked:s.enabled,onCheckedChange:a=>n({enabled:a})})]}),s.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-xs",children:"Shadow Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{type:"color",value:s.color1,onChange:a=>n({color1:a.target.value}),className:"w-16 h-10 cursor-pointer"}),e.jsx("div",{className:"flex gap-1 flex-1",children:["#000000","#1a1a1a","#0000ff","#ff0000"].map(a=>e.jsx("button",{onClick:()=>n({color1:a}),className:"w-8 h-8 border border-border hover:border-primary transition-colors",style:{backgroundColor:a}},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-xs",children:"Highlight Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ie,{type:"color",value:s.color2,onChange:a=>n({color2:a.target.value}),className:"w-16 h-10 cursor-pointer"}),e.jsx("div",{className:"flex gap-1 flex-1",children:["#ccff00","#00ffff","#ff00ff","#ffff00"].map(a=>e.jsx("button",{onClick:()=>n({color2:a}),className:"w-8 h-8 border border-border hover:border-primary transition-colors",style:{backgroundColor:a}},a))})]})]}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Classic punk/skate magazine effect"})]})]}),e.jsx(_t,{}),e.jsx(te,{onClick:()=>r(t.id,{blur:0,saturate:100,sepia:0,posterize:32,duotone:{enabled:!1,color1:"#000000",color2:"#ccff00"}}),variant:"outline",size:"sm",className:"w-full",children:"Reset All Filters"})]})}const ap=[{id:"sunset",name:"Sunset",gradient:"linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #ee5a6f 100%)",stops:[{offset:0,color:"#ff6b6b"},{offset:.5,color:"#feca57"},{offset:1,color:"#ee5a6f"}],angle:135},{id:"ocean",name:"Ocean",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",stops:[{offset:0,color:"#667eea"},{offset:1,color:"#764ba2"}],angle:135},{id:"fire",name:"Fire",gradient:"linear-gradient(135deg, #f12711 0%, #f5af19 100%)",stops:[{offset:0,color:"#f12711"},{offset:1,color:"#f5af19"}],angle:135},{id:"mint",name:"Mint",gradient:"linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%)",stops:[{offset:0,color:"#00d2ff"},{offset:1,color:"#3a7bd5"}],angle:135},{id:"purple",name:"Purple Haze",gradient:"linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%)",stops:[{offset:0,color:"#8e2de2"},{offset:1,color:"#4a00e0"}],angle:135},{id:"neon",name:"Neon",gradient:"linear-gradient(135deg, #ccff00 0%, #00ffff 100%)",stops:[{offset:0,color:"#ccff00"},{offset:1,color:"#00ffff"}],angle:135}];function ip({currentFill:t,onApplyGradient:r,onApplySolid:s}){const[n,a]=C.useState(!1);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[e.jsx("input",{type:"color",value:t||"#ffffff",onChange:i=>s(i.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),e.jsx(Ie,{type:"text",value:t||"#ffffff",onChange:i=>s(i.target.value),className:"h-8 text-xs font-mono bg-secondary border-border flex-1"})]}),e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>a(!n),className:"gap-1.5 shrink-0",title:"Apply gradient fill",children:[e.jsx(it,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-[10px]",children:"Gradient"})]})]}),n&&e.jsxs("div",{className:"p-3 border border-accent/30 bg-accent/5 rounded space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground flex items-center gap-1.5",children:[e.jsx(Sa,{className:"w-3 h-3"}),"Gradient Presets"]}),e.jsx("button",{onClick:()=>a(!1),className:"text-[9px] text-muted-foreground hover:text-foreground",children:"Close"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ap.map(i=>e.jsxs("button",{onClick:()=>{r(i.stops,i.angle||0),ie.success(`Applied ${i.name} gradient`),a(!1)},className:"group space-y-1.5",children:[e.jsx("div",{className:be("h-12 rounded border border-border group-hover:border-primary transition-colors","group-hover:scale-105 transform transition-transform"),style:{background:i.gradient}}),e.jsx("span",{className:"text-[9px] text-muted-foreground group-hover:text-foreground transition-colors block text-center",children:i.name})]},i.id))}),e.jsx("div",{className:"pt-2 border-t border-border",children:e.jsx("p",{className:"text-[9px] text-muted-foreground",children:" Tip: After applying a gradient, adjust colors and angle in the Advanced panel below"})})]})]})}function op(t){const r=lp(t),s=C.forwardRef((n,a)=>{const{children:i,...l}=n,o=C.Children.toArray(i),c=o.find(dp);if(c){const f=c.props.children,h=o.map(p=>p===c?C.Children.count(f)>1?C.Children.only(null):C.isValidElement(f)?f.props.children:null:p);return e.jsx(r,{...l,ref:a,children:C.isValidElement(f)?C.cloneElement(f,void 0,h):null})}return e.jsx(r,{...l,ref:a,children:i})});return s.displayName=`${t}.Slot`,s}function lp(t){const r=C.forwardRef((s,n)=>{const{children:a,...i}=s;if(C.isValidElement(a)){const l=fp(a),o=up(i,a.props);return a.type!==C.Fragment&&(o.ref=n?fa(n,l):l),C.cloneElement(a,o)}return C.Children.count(a)>1?C.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var cp=Symbol("radix.slottable");function dp(t){return C.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===cp}function up(t,r){const s={...r};for(const n in r){const a=t[n],i=r[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...t,...s}}function fp(t){var n,a;let r=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var ss="Popover",[po]=dt(ss,[Kr]),gr=Kr(),[hp,Nt]=po(ss),mo=t=>{const{__scopePopover:r,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:l=!1}=t,o=gr(r),c=C.useRef(null),[f,h]=C.useState(!1),[p,b]=jt({prop:n,defaultProp:a??!1,onChange:i,caller:ss});return e.jsx(Ci,{...o,children:e.jsx(hp,{scope:r,contentId:Lr(),triggerRef:c,open:p,onOpenChange:b,onOpenToggle:C.useCallback(()=>b(u=>!u),[b]),hasCustomAnchor:f,onCustomAnchorAdd:C.useCallback(()=>h(!0),[]),onCustomAnchorRemove:C.useCallback(()=>h(!1),[]),modal:l,children:s})})};mo.displayName=ss;var xo="PopoverAnchor",pp=C.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,a=Nt(xo,s),i=gr(s),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=a;return C.useEffect(()=>(l(),()=>o()),[l,o]),e.jsx(Js,{...i,...n,ref:r})});pp.displayName=xo;var go="PopoverTrigger",yo=C.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,a=Nt(go,s),i=gr(s),l=Re(r,a.triggerRef),o=e.jsx(Ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":No(a.open),...n,ref:l,onClick:ye(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:e.jsx(Js,{asChild:!0,...i,children:o})});yo.displayName=go;var on="PopoverPortal",[mp,xp]=po(on,{forceMount:void 0}),vo=t=>{const{__scopePopover:r,forceMount:s,children:n,container:a}=t,i=Nt(on,r);return e.jsx(mp,{scope:r,forceMount:s,children:e.jsx(hr,{present:s||i.open,children:e.jsx(ha,{asChild:!0,container:a,children:n})})})};vo.displayName=on;var qt="PopoverContent",bo=C.forwardRef((t,r)=>{const s=xp(qt,t.__scopePopover),{forceMount:n=s.forceMount,...a}=t,i=Nt(qt,t.__scopePopover);return e.jsx(hr,{present:n||i.open,children:i.modal?e.jsx(yp,{...a,ref:r}):e.jsx(vp,{...a,ref:r})})});bo.displayName=qt;var gp=op("PopoverContent.RemoveScroll"),yp=C.forwardRef((t,r)=>{const s=Nt(qt,t.__scopePopover),n=C.useRef(null),a=Re(r,n),i=C.useRef(!1);return C.useEffect(()=>{const l=n.current;if(l)return il(l)},[]),e.jsx(ol,{as:gp,allowPinchZoom:!0,children:e.jsx(wo,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(t.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ye(t.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,f=o.button===2||c;i.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:ye(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),vp=C.forwardRef((t,r)=>{const s=Nt(qt,t.__scopePopover),n=C.useRef(!1),a=C.useRef(!1);return e.jsx(wo,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(n.current||(o=s.triggerRef.current)==null||o.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,f;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((f=s.triggerRef.current)==null?void 0:f.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),wo=C.forwardRef((t,r)=>{const{__scopePopover:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:f,onInteractOutside:h,...p}=t,b=Nt(qt,s),u=gr(s);return ll(),e.jsx(cl,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(pa,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:f,onDismiss:()=>b.onOpenChange(!1),children:e.jsx(_i,{"data-state":No(b.open),role:"dialog",id:b.contentId,...u,...p,ref:r,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),jo="PopoverClose",bp=C.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,a=Nt(jo,s);return e.jsx(Ne.button,{type:"button",...n,ref:r,onClick:ye(t.onClick,()=>a.onOpenChange(!1))})});bp.displayName=jo;var wp="PopoverArrow",jp=C.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,a=gr(s);return e.jsx(Si,{...a,...n,ref:r})});jp.displayName=wp;function No(t){return t?"open":"closed"}var Np=mo,kp=yo,Cp=vo,ko=bo;const _p=Np,Sp=kp,Co=C.forwardRef(({className:t,align:r="center",sideOffset:s=4,...n},a)=>e.jsx(Cp,{children:e.jsx(ko,{ref:a,align:r,sideOffset:s,className:be("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Co.displayName=ko.displayName;function Ct({value:t,onChange:r,label:s,showEyedropper:n=!0}){const[a,i]=C.useState(!1),{objects:l}=Se(),o=Array.from(new Set(l.flatMap(h=>[h.fill,h.stroke,h.colorize]).filter(h=>!!h&&h!=="none"))).slice(0,12),c=h=>{r(h),i(!1),ie.success("Color picked!",{description:h.toUpperCase()})},f=["#000000","#ffffff","#ccff00","#ff6600","#00ffff","#ff00ff","#ff0000","#00ff00"];return e.jsxs("div",{className:"space-y-2",children:[s&&e.jsx("label",{className:"text-[10px] uppercase tracking-widest text-muted-foreground font-medium block",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded border-2 border-border shadow-sm cursor-pointer hover:scale-105 transition-transform shrink-0",style:{backgroundColor:t},title:t}),e.jsx("input",{type:"color",value:t,onChange:h=>r(h.target.value),className:"flex-1 h-10 border border-border rounded cursor-pointer min-w-0"}),n&&o.length>0&&e.jsxs(_p,{open:a,onOpenChange:i,children:[e.jsx(Sp,{asChild:!0,children:e.jsx(te,{size:"sm",variant:"outline",className:"gap-2 shrink-0",title:"Pick color from canvas",children:e.jsx(vc,{className:"w-4 h-4"})})}),e.jsx(Co,{className:"w-64 p-3",align:"end",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Pick from canvas"}),e.jsx(te,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>i(!1),children:e.jsx(pr,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:o.map((h,p)=>e.jsx("button",{onClick:()=>c(h),className:`w-9 h-9 rounded border-2 transition-all hover:scale-110 ${t.toLowerCase()===h.toLowerCase()?"border-accent ring-2 ring-accent/30":"border-border/50 hover:border-accent/50"}`,style:{backgroundColor:h},title:h},`${h}-${p}`))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Colors from your design"})]})})]})]}),e.jsx("div",{className:"grid grid-cols-8 gap-1.5",children:f.map(h=>e.jsx("button",{onClick:()=>r(h),className:`w-8 h-8 rounded border-2 transition-all hover:scale-110 ${t.toLowerCase()===h.toLowerCase()?"border-accent ring-2 ring-accent/30":"border-border/50"}`,style:{backgroundColor:h},title:h},h))}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"text",value:t,onChange:h=>{const p=h.target.value;(/^#[0-9A-Fa-f]{0,6}$/.test(p)||p==="")&&r(p)},placeholder:"#000000",maxLength:7,className:"flex-1 h-8 px-2 text-xs font-mono border border-border rounded bg-background"})})]})}var ns="Collapsible",[Ep,_o]=dt(ns),[Ap,ln]=Ep(ns),So=C.forwardRef((t,r)=>{const{__scopeCollapsible:s,open:n,defaultOpen:a,disabled:i,onOpenChange:l,...o}=t,[c,f]=jt({prop:n,defaultProp:a??!1,onChange:l,caller:ns});return e.jsx(Ap,{scope:s,disabled:i,contentId:Lr(),open:c,onOpenToggle:C.useCallback(()=>f(h=>!h),[f]),children:e.jsx(Ne.div,{"data-state":dn(c),"data-disabled":i?"":void 0,...o,ref:r})})});So.displayName=ns;var Eo="CollapsibleTrigger",Ao=C.forwardRef((t,r)=>{const{__scopeCollapsible:s,...n}=t,a=ln(Eo,s);return e.jsx(Ne.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":dn(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:r,onClick:ye(t.onClick,a.onOpenToggle)})});Ao.displayName=Eo;var cn="CollapsibleContent",To=C.forwardRef((t,r)=>{const{forceMount:s,...n}=t,a=ln(cn,t.__scopeCollapsible);return e.jsx(hr,{present:s||a.open,children:({present:i})=>e.jsx(Tp,{...n,ref:r,present:i})})});To.displayName=cn;var Tp=C.forwardRef((t,r)=>{const{__scopeCollapsible:s,present:n,children:a,...i}=t,l=ln(cn,s),[o,c]=C.useState(n),f=C.useRef(null),h=Re(r,f),p=C.useRef(0),b=p.current,u=C.useRef(0),w=u.current,d=l.open||o,m=C.useRef(d),g=C.useRef(void 0);return C.useEffect(()=>{const x=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(x)},[]),ar(()=>{const x=f.current;if(x){g.current=g.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const N=x.getBoundingClientRect();p.current=N.height,u.current=N.width,m.current||(x.style.transitionDuration=g.current.transitionDuration,x.style.animationName=g.current.animationName),c(n)}},[l.open,n]),e.jsx(Ne.div,{"data-state":dn(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!d,...i,ref:h,style:{"--radix-collapsible-content-height":b?`${b}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...t.style},children:d&&a})});function dn(t){return t?"open":"closed"}var Pp=So,Rp=Ao,Op=To,Ze="Accordion",Dp=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[un,Ip,Fp]=$s(Ze),[as]=dt(Ze,[Fp,_o]),fn=_o(),Po=Pe.forwardRef((t,r)=>{const{type:s,...n}=t,a=n,i=n;return e.jsx(un.Provider,{scope:t.__scopeAccordion,children:s==="multiple"?e.jsx($p,{...i,ref:r}):e.jsx(Mp,{...a,ref:r})})});Po.displayName=Ze;var[Ro,zp]=as(Ze),[Oo,Lp]=as(Ze,{collapsible:!1}),Mp=Pe.forwardRef((t,r)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...l}=t,[o,c]=jt({prop:s,defaultProp:n??"",onChange:a,caller:Ze});return e.jsx(Ro,{scope:t.__scopeAccordion,value:Pe.useMemo(()=>o?[o]:[],[o]),onItemOpen:c,onItemClose:Pe.useCallback(()=>i&&c(""),[i,c]),children:e.jsx(Oo,{scope:t.__scopeAccordion,collapsible:i,children:e.jsx(Do,{...l,ref:r})})})}),$p=Pe.forwardRef((t,r)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},...i}=t,[l,o]=jt({prop:s,defaultProp:n??[],onChange:a,caller:Ze}),c=Pe.useCallback(h=>o((p=[])=>[...p,h]),[o]),f=Pe.useCallback(h=>o((p=[])=>p.filter(b=>b!==h)),[o]);return e.jsx(Ro,{scope:t.__scopeAccordion,value:l,onItemOpen:c,onItemClose:f,children:e.jsx(Oo,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(Do,{...i,ref:r})})})}),[Bp,is]=as(Ze),Do=Pe.forwardRef((t,r)=>{const{__scopeAccordion:s,disabled:n,dir:a,orientation:i="vertical",...l}=t,o=Pe.useRef(null),c=Re(o,r),f=Ip(s),p=ma(a)==="ltr",b=ye(t.onKeyDown,u=>{var L;if(!Dp.includes(u.key))return;const w=u.target,d=f().filter(O=>{var U;return!((U=O.ref.current)!=null&&U.disabled)}),m=d.findIndex(O=>O.ref.current===w),g=d.length;if(m===-1)return;u.preventDefault();let x=m;const N=0,k=g-1,j=()=>{x=m+1,x>k&&(x=N)},A=()=>{x=m-1,x<N&&(x=k)};switch(u.key){case"Home":x=N;break;case"End":x=k;break;case"ArrowRight":i==="horizontal"&&(p?j():A());break;case"ArrowDown":i==="vertical"&&j();break;case"ArrowLeft":i==="horizontal"&&(p?A():j());break;case"ArrowUp":i==="vertical"&&A();break}const T=x%g;(L=d[T].ref.current)==null||L.focus()});return e.jsx(Bp,{scope:s,disabled:n,direction:a,orientation:i,children:e.jsx(un.Slot,{scope:s,children:e.jsx(Ne.div,{...l,"data-orientation":i,ref:c,onKeyDown:n?void 0:b})})})}),zr="AccordionItem",[Up,hn]=as(zr),Io=Pe.forwardRef((t,r)=>{const{__scopeAccordion:s,value:n,...a}=t,i=is(zr,s),l=zp(zr,s),o=fn(s),c=Lr(),f=n&&l.value.includes(n)||!1,h=i.disabled||t.disabled;return e.jsx(Up,{scope:s,open:f,disabled:h,triggerId:c,children:e.jsx(Pp,{"data-orientation":i.orientation,"data-state":Bo(f),...o,...a,ref:r,disabled:h,open:f,onOpenChange:p=>{p?l.onItemOpen(n):l.onItemClose(n)}})})});Io.displayName=zr;var Fo="AccordionHeader",zo=Pe.forwardRef((t,r)=>{const{__scopeAccordion:s,...n}=t,a=is(Ze,s),i=hn(Fo,s);return e.jsx(Ne.h3,{"data-orientation":a.orientation,"data-state":Bo(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:r})});zo.displayName=Fo;var Rs="AccordionTrigger",Lo=Pe.forwardRef((t,r)=>{const{__scopeAccordion:s,...n}=t,a=is(Ze,s),i=hn(Rs,s),l=Lp(Rs,s),o=fn(s);return e.jsx(un.ItemSlot,{scope:s,children:e.jsx(Rp,{"aria-disabled":i.open&&!l.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...o,...n,ref:r})})});Lo.displayName=Rs;var Mo="AccordionContent",$o=Pe.forwardRef((t,r)=>{const{__scopeAccordion:s,...n}=t,a=is(Ze,s),i=hn(Mo,s),l=fn(s);return e.jsx(Op,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...l,...n,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});$o.displayName=Mo;function Bo(t){return t?"open":"closed"}var Hp=Po,Vp=Io,Wp=zo,Uo=Lo,Ho=$o;const Gp=Hp,Vo=C.forwardRef(({className:t,...r},s)=>e.jsx(Vp,{ref:s,className:be("border-b",t),...r}));Vo.displayName="AccordionItem";const Wo=C.forwardRef(({className:t,children:r,...s},n)=>e.jsx(Wp,{className:"flex",children:e.jsxs(Uo,{ref:n,className:be("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...s,children:[r,e.jsx(Ea,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Wo.displayName=Uo.displayName;const Go=C.forwardRef(({className:t,children:r,...s},n)=>e.jsx(Ho,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:e.jsx("div",{className:be("pb-4 pt-0",t),children:r})}));Go.displayName=Ho.displayName;function ea(){const{objects:t,selectedId:r,updateObject:s,saveToHistory:n,generatePattern:a,moveLayer:i,bringToFront:l,sendToBack:o}=Se(),c=t.find(j=>j.id===r),[f,h]=C.useState(5),[p,b]=C.useState(0),[u,w]=C.useState(!1),[d,m]=C.useState([]);C.useEffect(()=>{ga().then(m)},[]);const g=()=>{alert("Export feature coming soon! The deck design will be exported as a high-resolution PNG.")},x=j=>{r&&(n(),s(r,j))},{backgroundColor:N,setBackgroundColor:k}=Se();return e.jsxs("div",{className:"w-64 bg-card border-l border-border h-full flex flex-col",children:[e.jsx("div",{className:"p-3 border-b border-border",children:e.jsxs("button",{onClick:g,className:"w-full bg-accent text-accent-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-accent hover:bg-accent/90 transition-colors flex items-center justify-center gap-2",children:[e.jsx($r,{className:"w-4 h-4"}),"Export Print"]})}),e.jsx("div",{className:"p-3 border-b border-border space-y-2",children:e.jsx(Ct,{label:"Deck Background",value:N,onChange:k,showEyedropper:!0})}),e.jsx("div",{className:"flex-1 overflow-auto",children:c?e.jsxs("div",{className:"p-3 space-y-4",children:[e.jsxs("div",{className:"py-2 border-b border-border flex items-center justify-between",children:[e.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Properties"}),e.jsx("button",{onClick:()=>x({locked:!c.locked}),className:`flex items-center gap-1.5 px-2 py-1 text-xs transition-colors ${c.locked?"bg-destructive/20 text-destructive hover:bg-destructive/30":"bg-secondary text-muted-foreground hover:bg-secondary/80"}`,title:c.locked?"Unlock object":"Lock object",children:c.locked?e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-3 h-3"}),e.jsx("span",{className:"uppercase tracking-wider",children:"Locked"})]}):e.jsxs(e.Fragment,{children:[e.jsx(bc,{className:"w-3 h-3"}),e.jsx("span",{className:"uppercase tracking-wider",children:"Unlocked"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Layer Order"}),e.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[e.jsxs("button",{onClick:()=>{i(r,"up"),ie.success("Moved forward")},className:"flex items-center justify-center gap-1 px-2 py-1.5 text-xs bg-secondary hover:bg-secondary/80 border border-border transition-colors",title:"Bring forward (Ctrl+])",children:[e.jsx(wc,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-[9px] uppercase",children:"Forward"})]}),e.jsxs("button",{onClick:()=>{i(r,"down"),ie.success("Moved backward")},className:"flex items-center justify-center gap-1 px-2 py-1.5 text-xs bg-secondary hover:bg-secondary/80 border border-border transition-colors",title:"Send backward (Ctrl+[)",children:[e.jsx(jc,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-[9px] uppercase",children:"Back"})]}),e.jsxs("button",{onClick:()=>{l(r),ie.success("Brought to front")},className:"flex items-center justify-center gap-1 px-2 py-1.5 text-xs bg-secondary hover:bg-secondary/80 border border-border transition-colors",title:"Bring to front (Ctrl+Shift+])",children:[e.jsx(Nc,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-[9px] uppercase",children:"Front"})]}),e.jsxs("button",{onClick:()=>{o(r),ie.success("Sent to back")},className:"flex items-center justify-center gap-1 px-2 py-1.5 text-xs bg-secondary hover:bg-secondary/80 border border-border transition-colors",title:"Send to back (Ctrl+Shift+[)",children:[e.jsx(kc,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-[9px] uppercase",children:"Back"})]})]}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Move layer in front of or behind other objects"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Opacity"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.opacity*100],onValueChange:([j])=>x({opacity:j/100}),max:100,min:0,step:1,className:"flex-1"}),e.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[Math.round(c.opacity*100),"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Rotation"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{type:"number",value:Math.round(c.rotation),onChange:j=>x({rotation:Number(j.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"}),e.jsx("span",{className:"text-[11px] text-muted-foreground",children:"deg"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Scale"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"X"}),e.jsx(Ie,{type:"number",step:"0.1",value:c.scaleX.toFixed(2),onChange:j=>x({scaleX:Number(j.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Y"}),e.jsx(Ie,{type:"number",step:"0.1",value:c.scaleY.toFixed(2),onChange:j=>x({scaleY:Number(j.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]})]})]}),(c.type==="text"||c.type==="shape")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Color"}),e.jsx(ip,{currentFill:c.fill,onApplySolid:j=>x({fill:j}),onApplyGradient:(j,A)=>{x({gradientType:"linear",gradientStops:j,gradientAngle:A,fill:j[0].color})}})]}),c.type==="shape"&&c.patternType&&e.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[e.jsx("div",{className:"py-2",children:e.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pattern Settings"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pattern Type"}),e.jsxs("select",{value:c.patternType,onChange:j=>x({patternType:j.target.value}),className:"w-full h-8 text-xs bg-secondary border-border rounded px-2",children:[e.jsx("option",{value:"checkerboard",children:"Checkerboard"}),e.jsx("option",{value:"speed-lines",children:"Speed Lines"}),e.jsx("option",{value:"halftone",children:"Halftone"}),e.jsx("option",{value:"diagonal-stripes",children:"Diagonal Stripes"}),e.jsx("option",{value:"hexagons",children:"Hexagons"}),e.jsx("option",{value:"crosshatch",children:"Crosshatch"})]})]}),e.jsx(Ct,{label:"Primary Color",value:c.patternPrimaryColor||"#1e3a8a",onChange:j=>x({patternPrimaryColor:j}),showEyedropper:!0}),e.jsx(Ct,{label:"Secondary Color",value:c.patternSecondaryColor||"#3b82f6",onChange:j=>x({patternSecondaryColor:j}),showEyedropper:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pattern Scale"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.patternScale||20],onValueChange:([j])=>x({patternScale:j}),max:100,min:5,step:5,className:"flex-1"}),e.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[c.patternScale||20,"px"]})]})]})]}),(c.type==="image"||c.type==="path")&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Color Tint"}),e.jsx("button",{onClick:()=>x({colorize:c.colorize?null:"#ccff00"}),className:`px-2 py-1 text-[9px] uppercase tracking-wider border transition-colors rounded ${c.colorize?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:c.colorize?"On":"Off"})]}),c.colorize&&e.jsx(Ct,{label:"",value:c.colorize,onChange:j=>x({colorize:j}),showEyedropper:!0}),e.jsxs("p",{className:"text-[9px] text-muted-foreground",children:["Apply a color overlay to the ",c.type]})]}),c.type==="sticker"&&e.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[e.jsx("div",{className:"py-2",children:e.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Sticker Options"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Fill Color"}),e.jsx("button",{onClick:()=>x({colorize:c.colorize?null:"#ccff00"}),className:`px-2 py-1 text-[9px] uppercase tracking-wider border transition-colors rounded ${c.colorize?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:c.colorize?"On":"Off"})]}),c.colorize&&e.jsx(Ct,{label:"",value:c.colorize,onChange:j=>x({colorize:j}),showEyedropper:!0}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Tint the sticker with a solid color"})]}),e.jsx(Ct,{label:"Stroke Color",value:c.stroke||"#ffffff",onChange:j=>x({stroke:j}),showEyedropper:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.strokeWidth??3],onValueChange:([j])=>x({strokeWidth:j}),max:8,min:1,step:.5,className:"flex-1"}),e.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[c.strokeWidth??3,"px"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Style"}),e.jsx("div",{className:"grid grid-cols-3 gap-1",children:["solid","dashed","dotted"].map(j=>e.jsx("button",{onClick:()=>x({strokeDashStyle:j}),className:`px-2 py-1.5 text-[10px] uppercase tracking-wider border transition-colors ${(c.strokeDashStyle||"solid")===j?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:j==="solid"?"":j==="dashed"?"":""},j))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Solid Fill"}),e.jsx("button",{onClick:()=>x({solidFill:!c.solidFill}),className:`w-10 h-5 rounded-full transition-colors relative ${c.solidFill?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${c.solidFill?"translate-x-5":"translate-x-0.5"}`})})]}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Fill the icon with solid color instead of outline"})]})]}),c.type==="texture"&&e.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[e.jsx("div",{className:"py-2",children:e.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Texture Options"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Blend Mode"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:["multiply","overlay","soft-light","color-burn","normal"].map(j=>e.jsx("button",{onClick:()=>x({blendMode:j}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${c.blendMode===j?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:j},j))})]})]}),c.type==="line"&&e.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[e.jsx("div",{className:"py-2",children:e.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Options"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:["straight","curved","zigzag","dashed"].map(j=>e.jsx("button",{onClick:()=>x({lineType:j}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${c.lineType===j?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:j},j))})]}),e.jsx(Ct,{label:"Stroke Color",value:c.stroke||"#ffffff",onChange:j=>x({stroke:j}),showEyedropper:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.strokeWidth??3],onValueChange:([j])=>x({strokeWidth:j}),max:12,min:1,step:1,className:"flex-1"}),e.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[c.strokeWidth??3,"px"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Style"}),e.jsx("div",{className:"grid grid-cols-3 gap-1",children:["solid","dashed","dotted"].map(j=>e.jsx("button",{onClick:()=>x({strokeDashStyle:j}),className:`px-2 py-1.5 text-[10px] uppercase tracking-wider border transition-colors ${(c.strokeDashStyle||"solid")===j?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:j==="solid"?"":j==="dashed"?"":""},j))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Length (X)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.lineEndX??60],onValueChange:([j])=>x({lineEndX:j}),max:200,min:-200,step:5,className:"flex-1"}),e.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:c.lineEndX??60})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Length (Y)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.lineEndY??0],onValueChange:([j])=>x({lineEndY:j}),max:200,min:-200,step:5,className:"flex-1"}),e.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:c.lineEndY??0})]})]}),c.lineType==="curved"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Curve Amount"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.lineCurve??50],onValueChange:([j])=>x({lineCurve:j}),max:100,min:-100,step:5,className:"flex-1"}),e.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:c.lineCurve??50})]}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Negative = curve down, Positive = curve up"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Cap Style"}),e.jsx("div",{className:"grid grid-cols-3 gap-1",children:["butt","round","square"].map(j=>e.jsx("button",{onClick:()=>x({lineCapStyle:j}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${c.lineCapStyle===j?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:j},j))})]})]}),c.type==="text"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Text"}),e.jsx(Ie,{type:"text",value:c.text||"",onChange:j=>x({text:j.target.value}),className:"h-8 text-xs font-mono bg-secondary border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Font Family ",d.length>0&&e.jsxs("span",{className:"text-accent font-normal",children:["(",d.length," custom)"]})]}),e.jsxs("button",{onClick:()=>w(!0),className:"text-[10px] uppercase tracking-widest text-accent hover:text-accent/80 transition-colors flex items-center gap-1",children:[e.jsx(Mr,{className:"w-3 h-3"}),d.length>0?"Manage":"Upload"]})]}),e.jsxs("select",{value:c.fontFamily||"Arial",onChange:j=>x({fontFamily:j.target.value}),className:"w-full h-8 text-xs bg-secondary border border-border px-2 cursor-pointer hover:border-primary transition-colors",children:[d.length>0&&e.jsx("optgroup",{label:" Your Custom Fonts",children:d.map(j=>e.jsx("option",{value:j.font_family,children:j.name},j.id))}),e.jsxs("optgroup",{label:"System Fonts",children:[e.jsx("option",{value:"Arial",children:"Arial"}),e.jsx("option",{value:"Helvetica",children:"Helvetica"}),e.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),e.jsx("option",{value:"Courier New",children:"Courier New"}),e.jsx("option",{value:"Georgia",children:"Georgia"}),e.jsx("option",{value:"Verdana",children:"Verdana"}),e.jsx("option",{value:"Impact",children:"Impact"}),e.jsx("option",{value:"Comic Sans MS",children:"Comic Sans MS"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Font Size"}),e.jsx(Ie,{type:"number",value:c.fontSize||24,onChange:j=>x({fontSize:Number(j.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[e.jsx("div",{className:"py-2",children:e.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Filters"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Contrast"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.contrast??100],onValueChange:([j])=>x({contrast:j}),max:200,min:0,step:5,className:"flex-1"}),e.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[c.contrast??100,"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Brightness"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.brightness??100],onValueChange:([j])=>x({brightness:j}),max:200,min:0,step:5,className:"flex-1"}),e.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[c.brightness??100,"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Grayscale"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.grayscale??0],onValueChange:([j])=>x({grayscale:j}),max:100,min:0,step:5,className:"flex-1"}),e.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[c.grayscale??0,"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Threshold"}),e.jsx("button",{onClick:()=>x({threshold:!c.threshold}),className:`w-10 h-5 rounded-full transition-colors relative ${c.threshold?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${c.threshold?"translate-x-5":"translate-x-0.5"}`})})]}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"High-contrast black & white xerox effect"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Colorize"}),e.jsx("button",{onClick:()=>x({colorize:c.colorize?null:"#00ff00"}),className:`w-10 h-5 rounded-full transition-colors relative ${c.colorize?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${c.colorize?"translate-x-5":"translate-x-0.5"}`})})]}),c.colorize&&e.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[e.jsx("input",{type:"color",value:c.colorize,onChange:j=>x({colorize:j.target.value}),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),e.jsx("div",{className:"flex gap-1",children:["#ccff00","#ff6600","#00ffff","#ff00ff","#ffffff"].map(j=>e.jsx("button",{onClick:()=>x({colorize:j}),className:`w-6 h-6 border ${c.colorize===j?"border-primary":"border-border"}`,style:{backgroundColor:j}},j))})]}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Cast in a single punk zine color"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[e.jsx("div",{className:"py-2",children:e.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Remix Effects"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Hue Shift"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[c.hueRotate??0],onValueChange:([j])=>x({hueRotate:j}),max:360,min:0,step:15,className:"flex-1"}),e.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[c.hueRotate??0,""]})]}),e.jsx("div",{className:"h-3 w-full rounded",style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Invert"}),e.jsx("button",{onClick:()=>x({invert:!c.invert}),className:`w-10 h-5 rounded-full transition-colors relative ${c.invert?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${c.invert?"translate-x-5":"translate-x-0.5"}`})})]}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Flip colors to negative"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pixelate"}),e.jsx("button",{onClick:()=>x({pixelate:!c.pixelate}),className:`w-10 h-5 rounded-full transition-colors relative ${c.pixelate?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${c.pixelate?"translate-x-5":"translate-x-0.5"}`})})]}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Lo-fi 8-bit effect (images only)"})]}),e.jsxs("button",{onClick:()=>x({hueRotate:0,invert:!1,pixelate:!1,contrast:100,brightness:100,grayscale:0,threshold:!1,colorize:null}),className:"w-full border border-border hover:border-primary transition-colors py-1.5 px-3 text-[10px] uppercase tracking-wider flex items-center justify-center gap-2",children:[e.jsx(Cc,{className:"w-3 h-3"}),"Reset All Filters"]})]}),e.jsx(Gp,{type:"single",collapsible:!0,className:"border-t border-border",children:e.jsxs(Vo,{value:"effects",className:"border-none",children:[e.jsx(Wo,{className:"py-3 px-0 hover:no-underline",children:e.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Advanced Effects"})}),e.jsx(Go,{className:"pb-4",children:e.jsx(ep,{})})]})}),(c.type==="shape"||c.type==="image"||c.type==="sticker")&&e.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[e.jsx("div",{className:"py-2",children:e.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pattern Generator"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Gap (spacing)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[f],onValueChange:([j])=>h(j),max:30,min:0,step:1,className:"flex-1"}),e.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[f,"px"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Random Rotation"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{value:[p],onValueChange:([j])=>b(j),max:180,min:0,step:5,className:"flex-1"}),e.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[p,""]})]}),e.jsx("p",{className:"text-[9px] text-muted-foreground",children:"0 = neat grid, 180 = chaotic sticker bomb"})]}),e.jsxs("button",{onClick:()=>{r&&a(r,f,p,Gt,Wt)},className:"w-full bg-primary text-primary-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-primary hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[e.jsx(wa,{className:"w-4 h-4"}),"Make Pattern"]}),e.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Tiles the selected sticker across the entire deck"})]})]}):e.jsx("div",{className:"p-4 text-center",children:e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest",children:"Select an object"})})}),e.jsx(no,{}),e.jsx(dl,{isOpen:u,onClose:()=>w(!1),onFontUploaded:async j=>{m([...d,j]);try{await ul(j),ie.success(`Font "${j.name}" ready to use`,{description:"Select it from the font dropdown",duration:3e3}),c&&c.type==="text"&&(x({fontFamily:j.font_family}),ie.info("Applied to selected text",{duration:2e3}))}catch(A){console.error("Failed to load font:",A),ie.error("Font uploaded but failed to load",{description:"Try refreshing the page"})}}})]})}function Kp(){var f;const{selectedIds:t,objects:r,alignObjects:s,distributeObjects:n,groupObjects:a,ungroupObject:i}=Se();if(t.length<2)return null;const l=t.length===1&&((f=r.find(h=>h.id===t[0]))==null?void 0:f.type)==="group",o=h=>{s(h);const p={left:"Left",center:"Center",right:"Right",top:"Top",middle:"Middle",bottom:"Bottom"};ie.success(`Aligned ${t.length} objects`,{description:p[h]})},c=h=>{if(t.length<3){ie.error("Need at least 3 objects to distribute");return}n(h),ie.success(`Distributed ${t.length} objects`,{description:h==="horizontal"?"Horizontally":"Vertically"})};return e.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 bg-card border-2 border-primary shadow-2xl rounded-lg p-3 animate-in slide-in-from-bottom-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"px-3 py-1.5 bg-primary/10 rounded border border-primary/20",children:e.jsxs("span",{className:"text-sm font-medium text-primary",children:[t.length," selected"]})}),e.jsx("div",{className:"w-px h-8 bg-border"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:"Align:"}),e.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("left"),className:"h-8 w-8 p-0",title:"Align Left",children:e.jsx(_c,{className:"w-4 h-4"})}),e.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("center"),className:"h-8 w-8 p-0",title:"Align Center",children:e.jsx(Sc,{className:"w-4 h-4"})}),e.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("right"),className:"h-8 w-8 p-0",title:"Align Right",children:e.jsx(Ec,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"w-px h-8 bg-border"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("top"),className:"h-8 w-8 p-0",title:"Align Top",children:e.jsx(Ac,{className:"w-4 h-4"})}),e.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("middle"),className:"h-8 w-8 p-0",title:"Align Middle",children:e.jsx(Tc,{className:"w-4 h-4"})}),e.jsx(te,{size:"sm",variant:"outline",onClick:()=>o("bottom"),className:"h-8 w-8 p-0",title:"Align Bottom",children:e.jsx(Pc,{className:"w-4 h-4"})})]}),t.length>=3&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-px h-8 bg-border"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:"Distribute:"}),e.jsx(te,{size:"sm",variant:"outline",onClick:()=>c("horizontal"),className:"h-8 w-8 p-0",title:"Distribute Horizontally",children:e.jsx(Rc,{className:"w-4 h-4"})}),e.jsx(te,{size:"sm",variant:"outline",onClick:()=>c("vertical"),className:"h-8 w-8 p-0",title:"Distribute Vertically",children:e.jsx(Oc,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"w-px h-8 bg-border"}),l?e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>{i(t[0]),ie.success("Ungrouped objects")},className:"gap-2",title:"Ungroup (Ctrl+Shift+G)",children:[e.jsx(Dc,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Ungroup"})]}):e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>{a(t),ie.success(`Grouped ${t.length} objects`)},className:"gap-2",title:"Group (Ctrl+G)",children:[e.jsx(Ic,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Group"})]})]})})}function Yp({onSave:t,onExport:r,onOpenHistory:s,onOpenInspector:n,onOpenLayers:a,isSaving:i,isExporting:l}){const{undo:o,redo:c,past:f,future:h,selectedId:p,deleteObject:b}=Se(),[u,w]=C.useState(!1),d=(N=10)=>{"vibrate"in navigator&&navigator.vibrate(N)},m=()=>{d(10),o()},g=()=>{d(10),c()},x=()=>{p&&(d([10,50,10]),b(p))};return e.jsxs(e.Fragment,{children:[u&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:()=>w(!1)}),e.jsxs("div",{className:be("fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50 transition-all duration-300",u?"h-48":"h-14"),children:[e.jsx("button",{onClick:()=>w(!u),className:"absolute -top-8 right-4 w-12 h-8 bg-card border border-border border-b-0 rounded-t-lg flex items-center justify-center hover:bg-secondary transition-colors",children:u?e.jsx(Fc,{className:"w-4 h-4"}):e.jsx(Aa,{className:"w-4 h-4"})}),e.jsxs("div",{className:"h-14 flex items-center justify-around px-1",children:[e.jsxs("button",{onClick:m,disabled:f.length===0,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-transform",children:[e.jsx(Ta,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Undo"})]}),e.jsxs("button",{onClick:g,disabled:h.length===0,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-transform",children:[e.jsx(Pa,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Redo"})]}),p&&e.jsxs("button",{onClick:x,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] text-destructive active:scale-95 transition-transform",children:[e.jsx(Dt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Delete"})]}),e.jsxs("button",{onClick:()=>{d(10),a()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[e.jsx(Ar,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Layers"})]}),e.jsxs("button",{onClick:()=>{d(10),n()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[e.jsx(zc,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Props"})]}),e.jsxs("button",{onClick:()=>{d(10),s()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[e.jsx(Ms,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"History"})]})]}),u&&e.jsxs("div",{className:"border-t border-border p-3 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>{t(),w(!1)},disabled:i,className:"btn-brutal text-sm py-2.5 flex items-center justify-center gap-2",children:[e.jsx(Ra,{className:"w-4 h-4"}),i?"Saving...":"Save"]}),e.jsxs("button",{onClick:()=>{r(),w(!1)},disabled:l,className:"btn-brutal text-sm py-2.5 flex items-center justify-center gap-2",children:[e.jsx($r,{className:"w-4 h-4"}),l?"Exporting...":"Export"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Tap outside to close"})]})]})]})}function hs({isOpen:t,onClose:r,title:s,children:n}){return t?e.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),e.jsxs("div",{className:be("absolute bottom-0 left-0 right-0 bg-card border-t-2 border-border max-h-[80vh] flex flex-col","animate-in slide-in-from-bottom duration-300"),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border shrink-0",children:[e.jsx("h2",{className:"font-display text-sm uppercase tracking-wider",children:s}),e.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(pr,{className:"w-5 h-5"})})]}),e.jsx(vt,{className:"flex-1",children:e.jsx("div",{className:"p-4",children:n})})]})]}):null}const Ko=[{keys:["Click"],description:"Select object",category:"Selection"},{keys:["Shift","Click"],description:"Multi-select",category:"Selection"},{keys:["Esc"],description:"Deselect all",category:"Selection"},{keys:["Tab"],description:"Select next object",category:"Selection"},{keys:["Shift","Tab"],description:"Select previous object",category:"Selection"},{keys:["Delete"],description:"Delete selected",category:"Editing"},{keys:["Backspace"],description:"Delete selected",category:"Editing"},{keys:["Ctrl","Z"],description:"Undo",category:"Editing"},{keys:["Ctrl","Shift","Z"],description:"Redo",category:"Editing"},{keys:["Ctrl","D"],description:"Duplicate",category:"Editing"},{keys:["Ctrl","Shift","D"],description:"Array duplicate (custom grid)",category:"Editing"},{keys:["Ctrl","C"],description:"Copy to clipboard",category:"Editing"},{keys:["Ctrl","V"],description:"Paste from clipboard",category:"Editing"},{keys:["Ctrl","A"],description:"Select all (top object)",category:"Editing"},{keys:["Ctrl","L"],description:"Lock/unlock object",category:"Editing"},{keys:["Ctrl","G"],description:"Group selected objects",category:"Editing"},{keys:["Ctrl","Shift","G"],description:"Ungroup selected group",category:"Editing"},{keys:["Drag"],description:"Move object",category:"Transform"},{keys:["Shift","Drag"],description:"Move with snapping disabled",category:"Transform"},{keys:["Corner","Drag"],description:"Scale object",category:"Transform"},{keys:["Shift","Scale"],description:"Scale proportionally",category:"Transform"},{keys:["Alt","Scale"],description:"Scale from center",category:"Transform"},{keys:["Rotate","Handle"],description:"Rotate object",category:"Transform"},{keys:["Shift","Rotate"],description:"Rotate in 15 increments",category:"Transform"},{keys:["Ctrl","]"],description:"Bring forward",category:"Layers"},{keys:["Ctrl","["],description:"Send backward",category:"Layers"},{keys:["Ctrl","Shift","]"],description:"Bring to front",category:"Layers"},{keys:["Ctrl","Shift","["],description:"Send to back",category:"Layers"},{keys:["Alt","L"],description:"Align left",category:"Alignment"},{keys:["Alt","R"],description:"Align right",category:"Alignment"},{keys:["Alt","C"],description:"Align center",category:"Alignment"},{keys:["Alt","T"],description:"Align top",category:"Alignment"},{keys:["Alt","B"],description:"Align bottom",category:"Alignment"},{keys:["Alt","M"],description:"Align middle",category:"Alignment"},{keys:["Space","Drag"],description:"Pan canvas",category:"View"},{keys:["Scroll"],description:"Zoom in/out",category:"View"},{keys:["Ctrl","0"],description:"Reset zoom to 100%",category:"View"},{keys:["Ctrl","1"],description:"Zoom to fit",category:"View"},{keys:["Ctrl","Shift","R"],description:"Toggle rulers",category:"View"},{keys:["H"],description:"Toggle hardware guide",category:"View"},{keys:["T"],description:"Select text tool",category:"Tools"},{keys:["R"],description:"Select rectangle tool",category:"Tools"},{keys:["C"],description:"Select circle tool",category:"Tools"},{keys:["L"],description:"Select line tool",category:"Tools"},{keys:["V"],description:"Select move tool (default)",category:"Tools"},{keys:["Ctrl","S"],description:"Save design",category:"File"},{keys:["Ctrl","E"],description:"Export PNG",category:"File"},{keys:["Ctrl","N"],description:"New design",category:"File"},{keys:["Ctrl","O"],description:"Open design",category:"File"}],qp=[...new Set(Ko.map(t=>t.category))];function ta({text:t}){return e.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-muted border border-border rounded",children:t})}function Zp(){const[t,r]=C.useState(!1);return e.jsxs(fl,{open:t,onOpenChange:r,children:[e.jsx(hl,{asChild:!0,children:e.jsxs(te,{size:"sm",variant:"ghost",className:"gap-2",children:[e.jsx(bn,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Shortcuts"})]})}),e.jsxs(pl,{className:"max-w-3xl max-h-[80vh]",children:[e.jsx(ml,{children:e.jsxs(xl,{className:"font-display text-xl uppercase tracking-widest flex items-center gap-2",children:[e.jsx(bn,{className:"w-5 h-5"}),"Keyboard Shortcuts"]})}),e.jsx(vt,{className:"h-[60vh] pr-4",children:e.jsx("div",{className:"space-y-6",children:qp.map(s=>e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-sm uppercase tracking-widest text-primary mb-3",children:s}),e.jsx("div",{className:"space-y-2",children:Ko.filter(n=>n.category===s).map((n,a)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[e.jsx("span",{className:"text-sm text-foreground",children:n.description}),e.jsx("div",{className:"flex items-center gap-1",children:n.keys.map((i,l)=>e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ta,{text:i}),l<n.keys.length-1&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"+"})]},l))})]},a))})]},s))})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center pt-4 border-t",children:["Press ",e.jsx(ta,{text:"?"})," anytime to view shortcuts"]})]})]})}function Xp(){const[t,r]=C.useState(!1);return C.useEffect(()=>{const s=()=>{r(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),t}const Qp=C.lazy(()=>ut(()=>import("./modals-CMZDM3pG.js").then(t=>t.$),__vite__mapDeps([0,1,2])).then(t=>({default:t.VersionHistory}))),Jp=C.lazy(()=>ut(()=>import("./modals-CMZDM3pG.js").then(t=>t.a0),__vite__mapDeps([0,1,2])).then(t=>({default:t.ShareModal}))),em=C.lazy(()=>ut(()=>import("./AnimationPreview-CXRsK7qX.js"),__vite__mapDeps([3,0,1,2,4])).then(t=>({default:t.AnimationPreview}))),tm=C.lazy(()=>ut(()=>import("./modals-CMZDM3pG.js").then(t=>t.a1),__vite__mapDeps([0,1,2])).then(t=>({default:t.BrandKitModal}))),rm=C.lazy(()=>ut(()=>import("./modals-CMZDM3pG.js").then(t=>t._),__vite__mapDeps([0,1,2])).then(t=>({default:t.FontUploadModal}))),sm=C.lazy(()=>ut(()=>import("./modals-CMZDM3pG.js").then(t=>t.a2),__vite__mapDeps([0,1,2])).then(t=>({default:t.ArrayDuplicateModal}))),nm=C.lazy(()=>ut(()=>import("./modals-CMZDM3pG.js").then(t=>t.a3),__vite__mapDeps([0,1,2])).then(t=>({default:t.ExportPreview}))),am=C.lazy(()=>ut(()=>import("./modals-CMZDM3pG.js").then(t=>t.a4),__vite__mapDeps([0,1,2])).then(t=>({default:t.ExportPresetsModal}))),im=C.lazy(()=>ut(()=>import("./TemplateGalleryModal-BNTGTzAs.js"),__vite__mapDeps([5,0,1,2])).then(t=>({default:t.TemplateGalleryModal})));function om(){const{selectedId:t,selectedIds:r,deleteObject:s,undo:n,redo:a,getCanvasState:i,currentDesignId:l,setDesignId:o,setSaving:c,isSaving:f,objects:h,designName:p,createVersion:b,past:u,future:w,updateObject:d,saveToHistory:m,addObject:g,selectObject:x,setActiveTool:N,stageScale:k,setStageScale:j,arrayDuplicate:A,showRulers:T,toggleRulers:L,groupObjects:O,ungroupObject:U}=Se(),{isAuthenticated:Y}=Zt(),_=Xt(),R=Xp(),[y,D]=C.useState(""),[Q,M]=C.useState(!1),[Z,H]=C.useState(!1),[ne,z]=C.useState(!1),[F,oe]=C.useState(!1),[re,ee]=C.useState(!1),[je,Ce]=C.useState(!1),[he,me]=C.useState(!1),[ke,we]=C.useState(!1),[Le,Ee]=C.useState(!1),[v,V]=C.useState(!1),[$,E]=C.useState(!1),[S,P]=C.useState(!1),[W,G]=C.useState(!1),[I,X]=C.useState(!1),se=async()=>{if(!Y){_("/auth");return}c(!0),D("Saving...");try{const ae=i();if(l)await Er.update(l,{canvas_data:ae,name:ae.name}),D("Saved!"),ie.success("Design saved successfully");else{const K=await Er.create({name:ae.name,canvas_data:ae});o(K.design.id),D("Saved!"),ie.success("Design created successfully")}setTimeout(()=>D(""),2e3)}catch(ae){console.error("Save failed:",ae),D("Save failed"),ie.error("Failed to save design. Please try again."),setTimeout(()=>D(""),2e3)}finally{c(!1)}},J=async()=>{M(!0),D("Exporting PNG..."),H(!1);try{const ae=await ya(h,{scale:3,format:"png",includeBackground:!0}),K=`${p.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${Date.now()}.png`;gn(ae,K),D("Exported PNG!"),ie.success(`Exported as ${K}`),setTimeout(()=>D(""),2e3)}catch(ae){console.error("Export failed:",ae),D("Export failed"),ie.error("Failed to export PNG. Please try again."),setTimeout(()=>D(""),2e3)}finally{M(!1)}},de=async()=>{M(!0),D("Exporting SVG..."),H(!1);try{const ae=await gl(h,{includeBackground:!0}),K=`${p.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${Date.now()}.svg`;gn(ae,K),D("Exported SVG!"),ie.success(`Exported vector as ${K}`),setTimeout(()=>D(""),2e3)}catch(ae){console.error("SVG export failed:",ae),D("Export failed"),ie.error("Failed to export SVG. Please try again."),setTimeout(()=>D(""),2e3)}finally{M(!1)}};return C.useEffect(()=>{Y&&ga().catch(console.error)},[Y]),C.useEffect(()=>{if(h.length===0)return;const ae=setInterval(()=>{b(void 0,!0)},5*60*1e3);return()=>clearInterval(ae)},[h.length,b]),C.useEffect(()=>{const ae=K=>{if(K.target instanceof HTMLInputElement||K.target instanceof HTMLTextAreaElement)return;const le=K.key.toLowerCase(),pe=K.ctrlKey||K.metaKey,ge=K.shiftKey,Ae=K.altKey;if(pe&&le==="s"){K.preventDefault(),se();return}if(pe&&le==="e"){K.preventDefault(),J();return}if((le==="delete"||le==="backspace")&&t){K.preventDefault(),s(t);return}if(pe&&le==="z"&&!ge){K.preventDefault(),n();return}if(pe&&le==="z"&&ge){K.preventDefault(),a();return}if(pe&&le==="d"&&!ge&&t){K.preventDefault();const q=h.find(ue=>ue.id===t);if(q){const{id:ue,...Te}=q;g({...Te,x:q.x+10,y:q.y+10}),ie.success("Object duplicated")}return}if(pe&&ge&&le==="d"&&t){K.preventDefault(),we(!0);return}if(le==="t"&&!pe&&!Ae){K.preventDefault(),N("text");return}if(le==="p"&&!pe&&!Ae){K.preventDefault(),N("pen");return}if(le==="g"&&!pe&&!Ae){K.preventDefault(),N("graphics");return}if(le==="l"&&!pe&&!Ae){K.preventDefault(),N("lines");return}if(le==="s"&&!pe&&!Ae){K.preventDefault(),N("stickers");return}if(le==="u"&&!pe&&!Ae){K.preventDefault(),N("uploads");return}if(le==="escape"){K.preventDefault(),x(null),N(null);return}if(pe&&ge&&le==="r"){K.preventDefault(),Se.getState().toggleRulers();const q=Se.getState().showRulers;ie.success(q?"Rulers enabled":"Rulers disabled");return}if(pe&&le==="l"&&t){K.preventDefault();const q=h.find(ue=>ue.id===t);q&&(d(t,{locked:!q.locked}),ie.success(q.locked?"Object unlocked":"Object locked"));return}if(pe&&le==="g"&&!ge&&r.length>=2){K.preventDefault(),O(r),ie.success(`Grouped ${r.length} objects`);return}if(pe&&ge&&le==="g"&&r.length===1){K.preventDefault();const q=h.find(ue=>ue.id===r[0]);q&&q.type==="group"?(U(r[0]),ie.success("Ungrouped objects")):ie.error("Selected object is not a group");return}if(t&&["arrowup","arrowdown","arrowleft","arrowright"].includes(le)){K.preventDefault();const q=h.find(Me=>Me.id===t);if(!q)return;const ue=ge?10:1,Te={};le==="arrowup"&&(Te.y=q.y-ue),le==="arrowdown"&&(Te.y=q.y+ue),le==="arrowleft"&&(Te.x=q.x-ue),le==="arrowright"&&(Te.x=q.x+ue),d(t,Te);return}if(pe&&le==="c"&&t){K.preventDefault();const q=h.find(ue=>ue.id===t);q&&(sessionStorage.setItem("deckforge_clipboard",JSON.stringify(q)),ie.success("Copied to clipboard"));return}if(pe&&le==="v"){K.preventDefault();const q=sessionStorage.getItem("deckforge_clipboard");if(q)try{const ue=JSON.parse(q),{id:Te,...Me}=ue;g({...Me,x:ue.x+20,y:ue.y+20}),ie.success("Pasted from clipboard")}catch{ie.error("Failed to paste")}else ie.error("Nothing to paste");return}if(pe&&le==="a"){K.preventDefault(),h.length>0&&(x(h[h.length-1].id),ie.success(`Selected top object (${h.length} total)`));return}if(pe&&le==="0"){K.preventDefault(),j(1),ie.success("Zoom reset to 100%");return}if(pe&&le==="1"){K.preventDefault(),j(.8),ie.success("Zoom to fit");return}if(pe&&(le==="="||le==="+")){K.preventDefault();const q=Math.min(3,k*1.2);j(q),ie.success(`Zoom: ${Math.round(q*100)}%`);return}if(pe&&(le==="-"||le==="_")){K.preventDefault();const q=Math.max(.25,k/1.2);j(q),ie.success(`Zoom: ${Math.round(q*100)}%`);return}if(t){const q=h.findIndex(ue=>ue.id===t);if(q===-1)return;if(pe&&!ge&&le==="]"){if(K.preventDefault(),q<h.length-1){const ue=[...h];[ue[q],ue[q+1]]=[ue[q+1],ue[q]],Se.setState({objects:ue}),ie.success("Brought forward")}return}if(pe&&!ge&&le==="["){if(K.preventDefault(),q>0){const ue=[...h];[ue[q],ue[q-1]]=[ue[q-1],ue[q]],Se.setState({objects:ue}),ie.success("Sent backward")}return}if(pe&&ge&&le==="]"){K.preventDefault();const ue=h.filter(Te=>Te.id!==t);ue.push(h[q]),Se.setState({objects:ue}),ie.success("Brought to front");return}if(pe&&ge&&le==="["){K.preventDefault();const ue=h.filter(Te=>Te.id!==t);ue.unshift(h[q]),Se.setState({objects:ue}),ie.success("Sent to back");return}}if(t&&Ae){const q=h.find(Me=>Me.id===t);if(!q)return;const ue=(Gt-q.width*q.scaleX)/2,Te=(Wt-q.height*q.scaleY)/2;if(le==="l"){K.preventDefault(),d(t,{x:0}),ie.success("Aligned left");return}if(le==="r"){K.preventDefault(),d(t,{x:Gt-q.width*q.scaleX}),ie.success("Aligned right");return}if(le==="c"){K.preventDefault(),d(t,{x:ue}),ie.success("Aligned center");return}if(le==="t"){K.preventDefault(),d(t,{y:0}),ie.success("Aligned top");return}if(le==="b"){K.preventDefault(),d(t,{y:Wt-q.height*q.scaleY}),ie.success("Aligned bottom");return}if(le==="m"){K.preventDefault(),d(t,{y:Te}),ie.success("Aligned middle");return}}};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[t,s,n,a,h,se,J,g,x,N,d,k,j]),e.jsxs("div",{className:"h-screen w-screen flex flex-col bg-background overflow-hidden",children:[e.jsxs("header",{className:be("border-b border-border flex items-center px-4 bg-card shrink-0","h-12"),children:[e.jsxs("h1",{className:be("font-display uppercase tracking-widest text-foreground",R?"text-base":"text-lg"),children:["Deck",e.jsx("span",{className:"text-primary",children:"Forge"})]}),!R&&e.jsx("div",{className:"ml-4 flex items-center gap-2",children:e.jsx("span",{className:"tag-brutal",children:"v1.0"})}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[!R&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest hidden md:block mr-4",children:"Fingerboard Graphics Editor"}),y&&e.jsx("span",{className:"text-xs text-primary",children:y}),e.jsxs("div",{className:"flex items-center gap-1 border border-border rounded",children:[e.jsxs(te,{size:"sm",variant:"ghost",onClick:n,disabled:u.length===0,className:"gap-1.5 rounded-r-none border-r border-border",title:`Undo (Ctrl+Z) - ${u.length} action${u.length!==1?"s":""} available`,children:[e.jsx(Ta,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:u.length})]}),e.jsxs(te,{size:"sm",variant:"ghost",onClick:a,disabled:w.length===0,className:"gap-1.5 rounded-l-none",title:`Redo (Ctrl+Shift+Z) - ${w.length} action${w.length!==1?"s":""} available`,children:[e.jsx(Pa,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:w.length})]})]}),e.jsxs(te,{size:"sm",variant:"outline",onClick:se,disabled:f,className:"gap-2",children:[e.jsx(Ra,{className:"w-4 h-4"}),f?"Saving...":"Save"]}),e.jsxs("div",{className:"relative",children:[e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>H(!Z),disabled:Q,className:"gap-2",children:[e.jsx($r,{className:"w-4 h-4"}),Q?"Exporting...":"Export",e.jsx(Ea,{className:"w-3 h-3"})]}),Z&&!Q&&e.jsxs("div",{className:"absolute top-full mt-1 right-0 z-50 bg-card border border-border shadow-lg min-w-[180px] rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>{H(!1),V(!0)},className:"w-full px-4 py-2.5 text-left text-sm hover:bg-secondary transition-colors font-medium flex items-center gap-2",children:[e.jsx(it,{className:"w-4 h-4 text-primary"}),"Quick Export",e.jsx("span",{className:"ml-auto text-[9px] text-primary",children:"NEW"})]}),e.jsxs("button",{onClick:()=>{H(!1),Ee(!0)},className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary transition-colors border-t border-border",children:["PNG (High-Res)",e.jsx("span",{className:"ml-2 text-[9px] text-muted-foreground",children:"Preview first"})]}),e.jsxs("button",{onClick:de,className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary transition-colors border-t border-border",children:["SVG (Vector)",e.jsx("span",{className:"ml-2 text-[10px] text-accent",children:"PRO"})]})]})]}),e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>Ce(!0),className:"gap-2",children:[e.jsx(Sa,{className:"w-4 h-4"}),"Brand Kits",e.jsx("span",{className:"ml-1 text-[9px] text-accent",children:"PRO"})]}),e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>me(!0),className:"gap-2",children:[e.jsx(Mr,{className:"w-4 h-4"}),"Custom Fonts"]}),l&&e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>oe(!0),className:"gap-2",children:[e.jsx(Lc,{className:"w-4 h-4"}),"Share"]}),e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>z(!0),className:"gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"History"]}),e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>ee(!0),className:"gap-2",children:[e.jsx(Mc,{className:"w-4 h-4"}),"Preview"]}),e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>E(!0),className:"gap-2",children:[e.jsx(it,{className:"w-4 h-4"}),"Templates",e.jsx("span",{className:"ml-1 text-[9px] text-primary",children:"NEW"})]}),e.jsxs(te,{size:"sm",variant:"ghost",onClick:()=>_("/gallery"),className:"gap-2",children:[e.jsx(it,{className:"w-4 h-4"}),"Gallery"]}),e.jsxs(te,{size:"sm",variant:"ghost",onClick:()=>_(Y?"/designs":"/auth"),className:"gap-2",children:[e.jsx(wn,{className:"w-4 h-4"}),Y?"My Designs":"Login"]}),e.jsx(te,{size:"sm",variant:T?"default":"ghost",onClick:()=>{L(),ie.success(T?"Rulers hidden":"Rulers visible")},className:"gap-2",title:"Toggle rulers (Ctrl+Shift+R)",children:e.jsx($c,{className:"w-4 h-4"})}),e.jsx(Zp,{})]}),R&&e.jsx(te,{size:"sm",variant:"ghost",onClick:()=>X(!0),className:"gap-2",children:e.jsx(Aa,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:be("flex-1 flex overflow-hidden",R&&"pb-14"),children:[!R&&e.jsxs(e.Fragment,{children:[e.jsx(qn,{}),e.jsx(Xn,{}),e.jsx(ms,{}),e.jsx(ea,{})]}),R&&e.jsxs(e.Fragment,{children:[e.jsx(qn,{}),e.jsx(Xn,{}),e.jsx(ms,{})]})]}),R&&e.jsx(Yp,{onSave:se,onExport:J,onOpenHistory:()=>z(!0),onOpenInspector:()=>P(!0),onOpenLayers:()=>G(!0),isSaving:f,isExporting:Q}),e.jsx(hs,{isOpen:S,onClose:()=>P(!1),title:"Properties",children:e.jsx(ea,{})}),e.jsx(hs,{isOpen:W,onClose:()=>G(!1),title:"Layers",children:e.jsx(no,{})}),e.jsx(hs,{isOpen:I,onClose:()=>X(!1),title:"Menu",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>{_("/templates"),X(!1)},className:"w-full btn-brutal text-left py-3 flex items-center gap-2",children:[e.jsx(it,{className:"w-4 h-4"}),"Templates"]}),e.jsxs("button",{onClick:()=>{_(Y?"/designs":"/auth"),X(!1)},className:"w-full btn-brutal text-left py-3 flex items-center gap-2",children:[e.jsx(wn,{className:"w-4 h-4"}),Y?"My Designs":"Login"]}),y&&e.jsx("p",{className:"text-xs text-primary text-center py-2",children:y})]})}),e.jsxs(C.Suspense,{fallback:null,children:[e.jsx(Qp,{isOpen:ne,onClose:()=>z(!1)}),l&&e.jsx(Jp,{isOpen:F,onClose:()=>oe(!1),designId:l,designName:p}),e.jsx(em,{isOpen:re,onClose:()=>ee(!1)}),e.jsx(rm,{isOpen:he,onClose:()=>me(!1),onFontUploaded:ae=>{ie.success(`${ae.name} is now available!`,{description:"You can now use this font in your text objects."})}}),e.jsx(sm,{open:ke,onClose:()=>we(!1),onDuplicate:(ae,K,le,pe)=>{if(t){A(t,ae,K,le,pe);const ge=ae*K-1;ie.success(`Created ${ge} ${ge===1?"copy":"copies"} in ${ae}${K} grid`)}}})]}),e.jsx(tm,{isOpen:je,onClose:()=>Ce(!1),currentColors:(()=>{const ae=new Set;return h.forEach(K=>{K.fill&&ae.add(K.fill),K.stroke&&ae.add(K.stroke),K.colorize&&ae.add(K.colorize)}),Array.from(ae)})(),onApplyKit:ae=>{const K=new Set;h.forEach(q=>{q.fill&&q.fill!=="none"&&K.add(q.fill),q.stroke&&K.add(q.stroke),q.colorize&&K.add(q.colorize)});const le=Array.from(K),pe=ae.colors,ge=new Map;le.forEach((q,ue)=>{const Te=pe[ue%pe.length];ge.set(q,Te)}),m();let Ae=0;h.forEach(q=>{const ue={};q.fill&&ge.has(q.fill)&&(ue.fill=ge.get(q.fill),Ae++),q.stroke&&ge.has(q.stroke)&&(ue.stroke=ge.get(q.stroke),Ae++),q.colorize&&ge.has(q.colorize)&&(ue.colorize=ge.get(q.colorize),Ae++),Object.keys(ue).length>0&&d(q.id,ue)}),Ae>0?ie.success(`Applied "${ae.name}" - ${Ae} color${Ae!==1?"s":""} changed`):ie.info(`Applied "${ae.name}" - No matching colors found`)}}),e.jsxs(C.Suspense,{fallback:null,children:[e.jsx(nm,{isOpen:Le,onClose:()=>Ee(!1),objects:h,designName:p,onConfirmExport:()=>{ie.success("Design exported successfully")}}),e.jsx(am,{open:v,onClose:()=>V(!1)}),e.jsx(im,{isOpen:$,onClose:()=>E(!1)})]}),e.jsx(Kp,{})]})}function lm(){const[t,r]=C.useState(!0),[s,n]=C.useState(""),[a,i]=C.useState(""),[l,o]=C.useState(""),{signup:c,login:f,isLoading:h,error:p}=Zt(),b=Xt(),u=async w=>{w.preventDefault();try{t?await f(s,a):await c(s,a,l),b("/")}catch(d){console.error(d)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"font-display text-4xl uppercase tracking-widest",children:["Deck",e.jsx("span",{className:"text-primary",children:"Forge"})]}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground uppercase tracking-widest",children:"Fingerboard Graphics Editor"})]}),e.jsxs("div",{className:"border border-border bg-card p-8 space-y-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(te,{variant:t?"default":"outline",className:"flex-1",onClick:()=>r(!0),children:"Login"}),e.jsx(te,{variant:t?"outline":"default",className:"flex-1",onClick:()=>r(!1),children:"Sign Up"})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[!t&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{htmlFor:"username",children:"Username"}),e.jsx(Ie,{id:"username",type:"text",value:l,onChange:w=>o(w.target.value),placeholder:"fingerboarder123",required:!t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{htmlFor:"email",children:"Email"}),e.jsx(Ie,{id:"email",type:"email",value:s,onChange:w=>n(w.target.value),placeholder:"you@example.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{htmlFor:"password",children:"Password"}),e.jsx(Ie,{id:"password",type:"password",value:a,onChange:w=>i(w.target.value),placeholder:"",required:!0,minLength:6})]}),p&&e.jsx("div",{className:"text-sm text-destructive bg-destructive/10 border border-destructive/20 p-3 rounded",children:p}),e.jsx(te,{type:"submit",className:"w-full",disabled:h,children:h?"Loading...":t?"Login":"Create Account"})]}),e.jsx("div",{className:"text-center",children:e.jsx(te,{variant:"link",onClick:()=>b("/"),className:"text-xs uppercase tracking-widest",children:"Continue as Guest"})})]})]})})}function kr(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yo={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,r){(function(s){t.exports=s()})(function(){return function s(n,a,i){function l(f,h){if(!a[f]){if(!n[f]){var p=typeof kr=="function"&&kr;if(!h&&p)return p(f,!0);if(o)return o(f,!0);var b=new Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b}var u=a[f]={exports:{}};n[f][0].call(u.exports,function(w){var d=n[f][1][w];return l(d||w)},u,u.exports,s,n,a,i)}return a[f].exports}for(var o=typeof kr=="function"&&kr,c=0;c<i.length;c++)l(i[c]);return l}({1:[function(s,n,a){var i=s("./utils"),l=s("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(c){for(var f,h,p,b,u,w,d,m=[],g=0,x=c.length,N=x,k=i.getTypeOf(c)!=="string";g<c.length;)N=x-g,p=k?(f=c[g++],h=g<x?c[g++]:0,g<x?c[g++]:0):(f=c.charCodeAt(g++),h=g<x?c.charCodeAt(g++):0,g<x?c.charCodeAt(g++):0),b=f>>2,u=(3&f)<<4|h>>4,w=1<N?(15&h)<<2|p>>6:64,d=2<N?63&p:64,m.push(o.charAt(b)+o.charAt(u)+o.charAt(w)+o.charAt(d));return m.join("")},a.decode=function(c){var f,h,p,b,u,w,d=0,m=0,g="data:";if(c.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var x,N=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&N--,c.charAt(c.length-2)===o.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=l.uint8array?new Uint8Array(0|N):new Array(0|N);d<c.length;)f=o.indexOf(c.charAt(d++))<<2|(b=o.indexOf(c.charAt(d++)))>>4,h=(15&b)<<4|(u=o.indexOf(c.charAt(d++)))>>2,p=(3&u)<<6|(w=o.indexOf(c.charAt(d++))),x[m++]=f,u!==64&&(x[m++]=h),w!==64&&(x[m++]=p);return x}},{"./support":30,"./utils":32}],2:[function(s,n,a){var i=s("./external"),l=s("./stream/DataWorker"),o=s("./stream/Crc32Probe"),c=s("./stream/DataLengthProbe");function f(h,p,b,u,w){this.compressedSize=h,this.uncompressedSize=p,this.crc32=b,this.compression=u,this.compressedContent=w}f.prototype={getContentWorker:function(){var h=new l(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),p=this;return h.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new l(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(h,p,b){return h.pipe(new o).pipe(new c("uncompressedSize")).pipe(p.compressWorker(b)).pipe(new c("compressedSize")).withStreamInfo("compression",p)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,n,a){var i=s("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,n,a){var i=s("./utils"),l=function(){for(var o,c=[],f=0;f<256;f++){o=f;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;c[f]=o}return c}();n.exports=function(o,c){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(f,h,p,b){var u=l,w=b+p;f^=-1;for(var d=b;d<w;d++)f=f>>>8^u[255&(f^h[d])];return-1^f}(0|c,o,o.length,0):function(f,h,p,b){var u=l,w=b+p;f^=-1;for(var d=b;d<w;d++)f=f>>>8^u[255&(f^h.charCodeAt(d))];return-1^f}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(s,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(s,n,a){var i=null;i=typeof Promise<"u"?Promise:s("lie"),n.exports={Promise:i}},{lie:37}],7:[function(s,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=s("pako"),o=s("./utils"),c=s("./stream/GenericWorker"),f=i?"uint8array":"array";function h(p,b){c.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=b,this.meta={}}a.magic="\b\0",o.inherits(h,c),h.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(f,p.data),!1)},h.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(b){p.push({data:b,meta:p.meta})}},a.compressWorker=function(p){return new h("Deflate",p)},a.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,n,a){function i(u,w){var d,m="";for(d=0;d<w;d++)m+=String.fromCharCode(255&u),u>>>=8;return m}function l(u,w,d,m,g,x){var N,k,j=u.file,A=u.compression,T=x!==f.utf8encode,L=o.transformTo("string",x(j.name)),O=o.transformTo("string",f.utf8encode(j.name)),U=j.comment,Y=o.transformTo("string",x(U)),_=o.transformTo("string",f.utf8encode(U)),R=O.length!==j.name.length,y=_.length!==U.length,D="",Q="",M="",Z=j.dir,H=j.date,ne={crc32:0,compressedSize:0,uncompressedSize:0};w&&!d||(ne.crc32=u.crc32,ne.compressedSize=u.compressedSize,ne.uncompressedSize=u.uncompressedSize);var z=0;w&&(z|=8),T||!R&&!y||(z|=2048);var F=0,oe=0;Z&&(F|=16),g==="UNIX"?(oe=798,F|=function(ee,je){var Ce=ee;return ee||(Ce=je?16893:33204),(65535&Ce)<<16}(j.unixPermissions,Z)):(oe=20,F|=function(ee){return 63&(ee||0)}(j.dosPermissions)),N=H.getUTCHours(),N<<=6,N|=H.getUTCMinutes(),N<<=5,N|=H.getUTCSeconds()/2,k=H.getUTCFullYear()-1980,k<<=4,k|=H.getUTCMonth()+1,k<<=5,k|=H.getUTCDate(),R&&(Q=i(1,1)+i(h(L),4)+O,D+="up"+i(Q.length,2)+Q),y&&(M=i(1,1)+i(h(Y),4)+_,D+="uc"+i(M.length,2)+M);var re="";return re+=`
\0`,re+=i(z,2),re+=A.magic,re+=i(N,2),re+=i(k,2),re+=i(ne.crc32,4),re+=i(ne.compressedSize,4),re+=i(ne.uncompressedSize,4),re+=i(L.length,2),re+=i(D.length,2),{fileRecord:p.LOCAL_FILE_HEADER+re+L+D,dirRecord:p.CENTRAL_FILE_HEADER+i(oe,2)+re+i(Y.length,2)+"\0\0\0\0"+i(F,4)+i(m,4)+L+D+Y}}var o=s("../utils"),c=s("../stream/GenericWorker"),f=s("../utf8"),h=s("../crc32"),p=s("../signature");function b(u,w,d,m){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=d,this.encodeFileName=m,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(b,c),b.prototype.push=function(u){var w=u.meta.percent||0,d=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,c.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:d?(w+100*(d-m-1))/d:100}}))},b.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var w=this.streamFiles&&!u.file.dir;if(w){var d=l(u,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(u){this.accumulate=!1;var w=this.streamFiles&&!u.file.dir,d=l(u,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),w)this.push({data:function(m){return p.DATA_DESCRIPTOR+i(m.crc32,4)+i(m.compressedSize,4)+i(m.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var u=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var d=this.bytesWritten-u,m=function(g,x,N,k,j){var A=o.transformTo("string",j(k));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(x,4)+i(N,4)+i(A.length,2)+A}(this.dirRecords.length,d,u,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(u){this._sources.push(u);var w=this;return u.on("data",function(d){w.processChunk(d)}),u.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),u.on("error",function(d){w.error(d)}),this},b.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(u){var w=this._sources;if(!c.prototype.error.call(this,u))return!1;for(var d=0;d<w.length;d++)try{w[d].error(u)}catch{}return!0},b.prototype.lock=function(){c.prototype.lock.call(this);for(var u=this._sources,w=0;w<u.length;w++)u[w].lock()},n.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,n,a){var i=s("../compressions"),l=s("./ZipFileWorker");a.generateWorker=function(o,c,f){var h=new l(c.streamFiles,f,c.platform,c.encodeFileName),p=0;try{o.forEach(function(b,u){p++;var w=function(x,N){var k=x||N,j=i[k];if(!j)throw new Error(k+" is not a valid compression method !");return j}(u.options.compression,c.compression),d=u.options.compressionOptions||c.compressionOptions||{},m=u.dir,g=u.date;u._compressWorker(w,d).withStreamInfo("file",{name:b,dir:m,date:g,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(h)}),h.entriesCount=p}catch(b){h.error(b)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new i;for(var o in this)typeof this[o]!="function"&&(l[o]=this[o]);return l}}(i.prototype=s("./object")).loadAsync=s("./load"),i.support=s("./support"),i.defaults=s("./defaults"),i.version="3.10.1",i.loadAsync=function(l,o){return new i().loadAsync(l,o)},i.external=s("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,n,a){var i=s("./utils"),l=s("./external"),o=s("./utf8"),c=s("./zipEntries"),f=s("./stream/Crc32Probe"),h=s("./nodejsUtils");function p(b){return new l.Promise(function(u,w){var d=b.decompressed.getContentWorker().pipe(new f);d.on("error",function(m){w(m)}).on("end",function(){d.streamInfo.crc32!==b.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}n.exports=function(b,u){var w=this;return u=i.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),h.isNode&&h.isStream(b)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",b,!0,u.optimizedBinaryString,u.base64).then(function(d){var m=new c(u);return m.load(d),m}).then(function(d){var m=[l.Promise.resolve(d)],g=d.files;if(u.checkCRC32)for(var x=0;x<g.length;x++)m.push(p(g[x]));return l.Promise.all(m)}).then(function(d){for(var m=d.shift(),g=m.files,x=0;x<g.length;x++){var N=g[x],k=N.fileNameStr,j=i.resolve(N.fileNameStr);w.file(j,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:u.createFolders}),N.dir||(w.file(j).unsafeOriginalName=k)}return m.zipComment.length&&(w.comment=m.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,n,a){var i=s("../utils"),l=s("../stream/GenericWorker");function o(c,f){l.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}i.inherits(o,l),o.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(h){f.push({data:h,meta:{percent:0}})}).on("error",function(h){f.isPaused?this.generatedError=h:f.error(h)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},o.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,n,a){var i=s("readable-stream").Readable;function l(o,c,f){i.call(this,c),this._helper=o;var h=this;o.on("data",function(p,b){h.push(p)||h._helper.pause(),f&&f(b)}).on("error",function(p){h.emit("error",p)}).on("end",function(){h.push(null)})}s("../utils").inherits(l,i),l.prototype._read=function(){this._helper.resume()},n.exports=l},{"../utils":32,"readable-stream":16}],14:[function(s,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,l);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,l)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var l=new Buffer(i);return l.fill(0),l},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(s,n,a){function i(j,A,T){var L,O=o.getTypeOf(A),U=o.extend(T||{},h);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(j=g(j)),U.createFolders&&(L=m(j))&&x.call(this,L,!0);var Y=O==="string"&&U.binary===!1&&U.base64===!1;T&&T.binary!==void 0||(U.binary=!Y),(A instanceof p&&A.uncompressedSize===0||U.dir||!A||A.length===0)&&(U.base64=!1,U.binary=!0,A="",U.compression="STORE",O="string");var _=null;_=A instanceof p||A instanceof c?A:w.isNode&&w.isStream(A)?new d(j,A):o.prepareContent(j,A,U.binary,U.optimizedBinaryString,U.base64);var R=new b(j,_,U);this.files[j]=R}var l=s("./utf8"),o=s("./utils"),c=s("./stream/GenericWorker"),f=s("./stream/StreamHelper"),h=s("./defaults"),p=s("./compressedObject"),b=s("./zipObject"),u=s("./generate"),w=s("./nodejsUtils"),d=s("./nodejs/NodejsStreamInputAdapter"),m=function(j){j.slice(-1)==="/"&&(j=j.substring(0,j.length-1));var A=j.lastIndexOf("/");return 0<A?j.substring(0,A):""},g=function(j){return j.slice(-1)!=="/"&&(j+="/"),j},x=function(j,A){return A=A!==void 0?A:h.createFolders,j=g(j),this.files[j]||i.call(this,j,null,{dir:!0,createFolders:A}),this.files[j]};function N(j){return Object.prototype.toString.call(j)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(j){var A,T,L;for(A in this.files)L=this.files[A],(T=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&j(T,L)},filter:function(j){var A=[];return this.forEach(function(T,L){j(T,L)&&A.push(L)}),A},file:function(j,A,T){if(arguments.length!==1)return j=this.root+j,i.call(this,j,A,T),this;if(N(j)){var L=j;return this.filter(function(U,Y){return!Y.dir&&L.test(U)})}var O=this.files[this.root+j];return O&&!O.dir?O:null},folder:function(j){if(!j)return this;if(N(j))return this.filter(function(O,U){return U.dir&&j.test(O)});var A=this.root+j,T=x.call(this,A),L=this.clone();return L.root=T.name,L},remove:function(j){j=this.root+j;var A=this.files[j];if(A||(j.slice(-1)!=="/"&&(j+="/"),A=this.files[j]),A&&!A.dir)delete this.files[j];else for(var T=this.filter(function(O,U){return U.name.slice(0,j.length)===j}),L=0;L<T.length;L++)delete this.files[T[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(j){var A,T={};try{if((T=o.extend(j||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");o.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var L=T.comment||this.comment||"";A=u.generateWorker(this,T,L)}catch(O){(A=new c("error")).error(O)}return new f(A,T.type||"string",T.mimeType)},generateAsync:function(j,A){return this.generateInternalStream(j).accumulate(A)},generateNodeStream:function(j,A){return(j=j||{}).type||(j.type="nodebuffer"),this.generateInternalStream(j).toNodejsStream(A)}};n.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,n,a){n.exports=s("stream")},{stream:void 0}],17:[function(s,n,a){var i=s("./DataReader");function l(o){i.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}s("../utils").inherits(l,i),l.prototype.byteAt=function(o){return this.data[this.zero+o]},l.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),f=o.charCodeAt(1),h=o.charCodeAt(2),p=o.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===c&&this.data[b+1]===f&&this.data[b+2]===h&&this.data[b+3]===p)return b-this.zero;return-1},l.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),f=o.charCodeAt(1),h=o.charCodeAt(2),p=o.charCodeAt(3),b=this.readData(4);return c===b[0]&&f===b[1]&&h===b[2]&&p===b[3]},l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./DataReader":18}],18:[function(s,n,a){var i=s("../utils");function l(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,f=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=o,f},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=l},{"../utils":32}],19:[function(s,n,a){var i=s("./Uint8ArrayReader");function l(o){i.call(this,o)}s("../utils").inherits(l,i),l.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,n,a){var i=s("./DataReader");function l(o){i.call(this,o)}s("../utils").inherits(l,i),l.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},l.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},l.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},l.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./DataReader":18}],21:[function(s,n,a){var i=s("./ArrayReader");function l(o){i.call(this,o)}s("../utils").inherits(l,i),l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(s,n,a){var i=s("../utils"),l=s("../support"),o=s("./ArrayReader"),c=s("./StringReader"),f=s("./NodeBufferReader"),h=s("./Uint8ArrayReader");n.exports=function(p){var b=i.getTypeOf(p);return i.checkSupport(b),b!=="string"||l.uint8array?b==="nodebuffer"?new f(p):l.uint8array?new h(i.transformTo("uint8array",p)):new o(i.transformTo("array",p)):new c(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,n,a){var i=s("./GenericWorker"),l=s("../utils");function o(c){i.call(this,"ConvertWorker to "+c),this.destType=c}l.inherits(o,i),o.prototype.processChunk=function(c){this.push({data:l.transformTo(this.destType,c.data),meta:c.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(s,n,a){var i=s("./GenericWorker"),l=s("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(o,i),o.prototype.processChunk=function(c){this.streamInfo.crc32=l(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,n,a){var i=s("../utils"),l=s("./GenericWorker");function o(c){l.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(o,l),o.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}l.prototype.processChunk.call(this,c)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(s,n,a){var i=s("../utils"),l=s("./GenericWorker");function o(c){l.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(h){f.dataIsReady=!0,f.data=h,f.max=h&&h.length||0,f.type=i.getTypeOf(h),f.isPaused||f._tickAndRepeat()},function(h){f.error(h)})}i.inherits(o,l),o.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(s,n,a){function i(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,o){return this._listeners[l].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,o){if(this._listeners[l])for(var c=0;c<this._listeners[l].length;c++)this._listeners[l][c].call(this,o)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var o=this;return l.on("data",function(c){o.processChunk(c)}),l.on("end",function(){o.end()}),l.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,o){return this.extraStreamInfo[l]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},n.exports=i},{}],29:[function(s,n,a){var i=s("../utils"),l=s("./ConvertWorker"),o=s("./GenericWorker"),c=s("../base64"),f=s("../support"),h=s("../external"),p=null;if(f.nodestream)try{p=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(w,d){return new h.Promise(function(m,g){var x=[],N=w._internalType,k=w._outputType,j=w._mimeType;w.on("data",function(A,T){x.push(A),d&&d(T)}).on("error",function(A){x=[],g(A)}).on("end",function(){try{var A=function(T,L,O){switch(T){case"blob":return i.newBlob(i.transformTo("arraybuffer",L),O);case"base64":return c.encode(L);default:return i.transformTo(T,L)}}(k,function(T,L){var O,U=0,Y=null,_=0;for(O=0;O<L.length;O++)_+=L[O].length;switch(T){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(Y=new Uint8Array(_),O=0;O<L.length;O++)Y.set(L[O],U),U+=L[O].length;return Y;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+T+"'")}}(N,x),j);m(A)}catch(T){g(T)}x=[]}).resume()})}function u(w,d,m){var g=d;switch(d){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=d,this._mimeType=m,i.checkSupport(g),this._worker=w.pipe(new l(g)),w.lock()}catch(x){this._worker=new o("error"),this._worker.error(x)}}u.prototype={accumulate:function(w){return b(this,w)},on:function(w,d){var m=this;return w==="data"?this._worker.on(w,function(g){d.call(m,g.data,g.meta)}):this._worker.on(w,function(){i.delay(d,arguments,m)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},w)}},n.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(i),a.blob=l.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!s("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(s,n,a){for(var i=s("./utils"),l=s("./support"),o=s("./nodejsUtils"),c=s("./stream/GenericWorker"),f=new Array(256),h=0;h<256;h++)f[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;f[254]=f[254]=1;function p(){c.call(this,"utf-8 decode"),this.leftOver=null}function b(){c.call(this,"utf-8 encode")}a.utf8encode=function(u){return l.nodebuffer?o.newBufferFrom(u,"utf-8"):function(w){var d,m,g,x,N,k=w.length,j=0;for(x=0;x<k;x++)(64512&(m=w.charCodeAt(x)))==55296&&x+1<k&&(64512&(g=w.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),x++),j+=m<128?1:m<2048?2:m<65536?3:4;for(d=l.uint8array?new Uint8Array(j):new Array(j),x=N=0;N<j;x++)(64512&(m=w.charCodeAt(x)))==55296&&x+1<k&&(64512&(g=w.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),x++),m<128?d[N++]=m:(m<2048?d[N++]=192|m>>>6:(m<65536?d[N++]=224|m>>>12:(d[N++]=240|m>>>18,d[N++]=128|m>>>12&63),d[N++]=128|m>>>6&63),d[N++]=128|63&m);return d}(u)},a.utf8decode=function(u){return l.nodebuffer?i.transformTo("nodebuffer",u).toString("utf-8"):function(w){var d,m,g,x,N=w.length,k=new Array(2*N);for(d=m=0;d<N;)if((g=w[d++])<128)k[m++]=g;else if(4<(x=f[g]))k[m++]=65533,d+=x-1;else{for(g&=x===2?31:x===3?15:7;1<x&&d<N;)g=g<<6|63&w[d++],x--;1<x?k[m++]=65533:g<65536?k[m++]=g:(g-=65536,k[m++]=55296|g>>10&1023,k[m++]=56320|1023&g)}return k.length!==m&&(k.subarray?k=k.subarray(0,m):k.length=m),i.applyFromCharCode(k)}(u=i.transformTo(l.uint8array?"uint8array":"array",u))},i.inherits(p,c),p.prototype.processChunk=function(u){var w=i.transformTo(l.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var d=w;(w=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),w.set(d,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var m=function(x,N){var k;for((N=N||x.length)>x.length&&(N=x.length),k=N-1;0<=k&&(192&x[k])==128;)k--;return k<0||k===0?N:k+f[x[k]]>N?k:N}(w),g=w;m!==w.length&&(l.uint8array?(g=w.subarray(0,m),this.leftOver=w.subarray(m,w.length)):(g=w.slice(0,m),this.leftOver=w.slice(m,w.length))),this.push({data:a.utf8decode(g),meta:u.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=p,i.inherits(b,c),b.prototype.processChunk=function(u){this.push({data:a.utf8encode(u.data),meta:u.meta})},a.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,n,a){var i=s("./support"),l=s("./base64"),o=s("./nodejsUtils"),c=s("./external");function f(d){return d}function h(d,m){for(var g=0;g<d.length;++g)m[g]=255&d.charCodeAt(g);return m}s("setimmediate"),a.newBlob=function(d,m){a.checkSupport("blob");try{return new Blob([d],{type:m})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(d),g.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(d,m,g){var x=[],N=0,k=d.length;if(k<=g)return String.fromCharCode.apply(null,d);for(;N<k;)m==="array"||m==="nodebuffer"?x.push(String.fromCharCode.apply(null,d.slice(N,Math.min(N+g,k)))):x.push(String.fromCharCode.apply(null,d.subarray(N,Math.min(N+g,k)))),N+=g;return x.join("")},stringifyByChar:function(d){for(var m="",g=0;g<d.length;g++)m+=String.fromCharCode(d[g]);return m},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function b(d){var m=65536,g=a.getTypeOf(d),x=!0;if(g==="uint8array"?x=p.applyCanBeUsed.uint8array:g==="nodebuffer"&&(x=p.applyCanBeUsed.nodebuffer),x)for(;1<m;)try{return p.stringifyByChunk(d,g,m)}catch{m=Math.floor(m/2)}return p.stringifyByChar(d)}function u(d,m){for(var g=0;g<d.length;g++)m[g]=d[g];return m}a.applyFromCharCode=b;var w={};w.string={string:f,array:function(d){return h(d,new Array(d.length))},arraybuffer:function(d){return w.string.uint8array(d).buffer},uint8array:function(d){return h(d,new Uint8Array(d.length))},nodebuffer:function(d){return h(d,o.allocBuffer(d.length))}},w.array={string:b,array:f,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return o.newBufferFrom(d)}},w.arraybuffer={string:function(d){return b(new Uint8Array(d))},array:function(d){return u(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:f,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return o.newBufferFrom(new Uint8Array(d))}},w.uint8array={string:b,array:function(d){return u(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:f,nodebuffer:function(d){return o.newBufferFrom(d)}},w.nodebuffer={string:b,array:function(d){return u(d,new Array(d.length))},arraybuffer:function(d){return w.nodebuffer.uint8array(d).buffer},uint8array:function(d){return u(d,new Uint8Array(d.length))},nodebuffer:f},a.transformTo=function(d,m){if(m=m||"",!d)return m;a.checkSupport(d);var g=a.getTypeOf(m);return w[g][d](m)},a.resolve=function(d){for(var m=d.split("/"),g=[],x=0;x<m.length;x++){var N=m[x];N==="."||N===""&&x!==0&&x!==m.length-1||(N===".."?g.pop():g.push(N))}return g.join("/")},a.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(d)?"nodebuffer":i.uint8array&&d instanceof Uint8Array?"uint8array":i.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(d){if(!i[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(d){var m,g,x="";for(g=0;g<(d||"").length;g++)x+="\\x"+((m=d.charCodeAt(g))<16?"0":"")+m.toString(16).toUpperCase();return x},a.delay=function(d,m,g){setImmediate(function(){d.apply(g||null,m||[])})},a.inherits=function(d,m){function g(){}g.prototype=m.prototype,d.prototype=new g},a.extend=function(){var d,m,g={};for(d=0;d<arguments.length;d++)for(m in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],m)&&g[m]===void 0&&(g[m]=arguments[d][m]);return g},a.prepareContent=function(d,m,g,x,N){return c.Promise.resolve(m).then(function(k){return i.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new c.Promise(function(j,A){var T=new FileReader;T.onload=function(L){j(L.target.result)},T.onerror=function(L){A(L.target.error)},T.readAsArrayBuffer(k)}):k}).then(function(k){var j=a.getTypeOf(k);return j?(j==="arraybuffer"?k=a.transformTo("uint8array",k):j==="string"&&(N?k=l.decode(k):g&&x!==!0&&(k=function(A){return h(A,i.uint8array?new Uint8Array(A.length):new Array(A.length))}(k))),k):c.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,n,a){var i=s("./reader/readerFor"),l=s("./utils"),o=s("./signature"),c=s("./zipEntry"),f=s("./support");function h(p){this.files=[],this.loadOptions=p}h.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(b)+", expected "+l.pretty(p)+")")}},isSignature:function(p,b){var u=this.reader.index;this.reader.setIndex(p);var w=this.reader.readString(4)===b;return this.reader.setIndex(u),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),b=f.uint8array?"uint8array":"array",u=l.transformTo(b,p);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,b,u,w=this.zip64EndOfCentralSize-44;0<w;)p=this.reader.readInt(2),b=this.reader.readInt(4),u=this.reader.readData(b),this.zip64ExtensibleData[p]={id:p,length:b,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,b;for(p=0;p<this.files.length;p++)b=this.files[p],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(p=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var b=p;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var w=b-u;if(0<w)this.isSignature(b,o.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(p){this.reader=i(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,n,a){var i=s("./reader/readerFor"),l=s("./utils"),o=s("./compressedObject"),c=s("./crc32"),f=s("./utf8"),h=s("./compressions"),p=s("./support");function b(u,w){this.options=u,this.loadOptions=w}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var w,d;if(u.skip(22),this.fileNameLength=u.readInt(2),d=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(m){for(var g in h)if(Object.prototype.hasOwnProperty.call(h,g)&&h[g].magic===m)return h[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,w,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var w=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(w),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=i(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var w,d,m,g=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<g;)w=u.readInt(2),d=u.readInt(2),m=u.readData(d),this.extraFields[w]={id:w,length:d,value:m};u.setIndex(g)},handleUTF8:function(){var u=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var d=l.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var g=l.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var w=i(u.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:f.utf8decode(w.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var w=i(u.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:f.utf8decode(w.readData(u.length-5))}return null}},n.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,n,a){function i(w,d,m){this.name=w,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=d,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var l=s("./stream/StreamHelper"),o=s("./stream/DataWorker"),c=s("./utf8"),f=s("./compressedObject"),h=s("./stream/GenericWorker");i.prototype={internalStream:function(w){var d=null,m="string";try{if(!w)throw new Error("No output type specified.");var g=(m=w.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),d=this._decompressWorker();var x=!this._dataBinary;x&&!g&&(d=d.pipe(new c.Utf8EncodeWorker)),!x&&g&&(d=d.pipe(new c.Utf8DecodeWorker))}catch(N){(d=new h("error")).error(N)}return new l(d,m,"")},async:function(w,d){return this.internalStream(w).accumulate(d)},nodeStream:function(w,d){return this.internalStream(w||"nodebuffer").toNodejsStream(d)},_compressWorker:function(w,d){if(this._data instanceof f&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(m,w,d)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof h?this._data:new o(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<p.length;u++)i.prototype[p[u]]=b;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,n,a){(function(i){var l,o,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var f=0,h=new c(w),p=i.document.createTextNode("");h.observe(p,{characterData:!0}),l=function(){p.data=f=++f%2}}else if(i.setImmediate||i.MessageChannel===void 0)l="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var d=i.document.createElement("script");d.onreadystatechange=function(){w(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},i.document.documentElement.appendChild(d)}:function(){setTimeout(w,0)};else{var b=new i.MessageChannel;b.port1.onmessage=w,l=function(){b.port2.postMessage(0)}}var u=[];function w(){var d,m;o=!0;for(var g=u.length;g;){for(m=u,u=[],d=-1;++d<g;)m[d]();g=u.length}o=!1}n.exports=function(d){u.push(d)!==1||o||l()}}).call(this,typeof br<"u"?br:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,n,a){var i=s("immediate");function l(){}var o={},c=["REJECTED"],f=["FULFILLED"],h=["PENDING"];function p(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,g!==l&&d(this,g)}function b(g,x,N){this.promise=g,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function u(g,x,N){i(function(){var k;try{k=x(N)}catch(j){return o.reject(g,j)}k===g?o.reject(g,new TypeError("Cannot resolve promise with itself")):o.resolve(g,k)})}function w(g){var x=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof x=="function")return function(){x.apply(g,arguments)}}function d(g,x){var N=!1;function k(T){N||(N=!0,o.reject(g,T))}function j(T){N||(N=!0,o.resolve(g,T))}var A=m(function(){x(j,k)});A.status==="error"&&k(A.value)}function m(g,x){var N={};try{N.value=g(x),N.status="success"}catch(k){N.status="error",N.value=k}return N}(n.exports=p).prototype.finally=function(g){if(typeof g!="function")return this;var x=this.constructor;return this.then(function(N){return x.resolve(g()).then(function(){return N})},function(N){return x.resolve(g()).then(function(){throw N})})},p.prototype.catch=function(g){return this.then(null,g)},p.prototype.then=function(g,x){if(typeof g!="function"&&this.state===f||typeof x!="function"&&this.state===c)return this;var N=new this.constructor(l);return this.state!==h?u(N,this.state===f?g:x,this.outcome):this.queue.push(new b(N,g,x)),N},b.prototype.callFulfilled=function(g){o.resolve(this.promise,g)},b.prototype.otherCallFulfilled=function(g){u(this.promise,this.onFulfilled,g)},b.prototype.callRejected=function(g){o.reject(this.promise,g)},b.prototype.otherCallRejected=function(g){u(this.promise,this.onRejected,g)},o.resolve=function(g,x){var N=m(w,x);if(N.status==="error")return o.reject(g,N.value);var k=N.value;if(k)d(g,k);else{g.state=f,g.outcome=x;for(var j=-1,A=g.queue.length;++j<A;)g.queue[j].callFulfilled(x)}return g},o.reject=function(g,x){g.state=c,g.outcome=x;for(var N=-1,k=g.queue.length;++N<k;)g.queue[N].callRejected(x);return g},p.resolve=function(g){return g instanceof this?g:o.resolve(new this(l),g)},p.reject=function(g){var x=new this(l);return o.reject(x,g)},p.all=function(g){var x=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=g.length,k=!1;if(!N)return this.resolve([]);for(var j=new Array(N),A=0,T=-1,L=new this(l);++T<N;)O(g[T],T);return L;function O(U,Y){x.resolve(U).then(function(_){j[Y]=_,++A!==N||k||(k=!0,o.resolve(L,j))},function(_){k||(k=!0,o.reject(L,_))})}},p.race=function(g){var x=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=g.length,k=!1;if(!N)return this.resolve([]);for(var j=-1,A=new this(l);++j<N;)T=g[j],x.resolve(T).then(function(L){k||(k=!0,o.resolve(A,L))},function(L){k||(k=!0,o.reject(A,L))});var T;return A}},{immediate:36}],38:[function(s,n,a){var i={};(0,s("./lib/utils/common").assign)(i,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,n,a){var i=s("./zlib/deflate"),l=s("./utils/common"),o=s("./utils/strings"),c=s("./zlib/messages"),f=s("./zlib/zstream"),h=Object.prototype.toString,p=0,b=-1,u=0,w=8;function d(g){if(!(this instanceof d))return new d(g);this.options=l.assign({level:b,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},g||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var N=i.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(N!==p)throw new Error(c[N]);if(x.header&&i.deflateSetHeader(this.strm,x.header),x.dictionary){var k;if(k=typeof x.dictionary=="string"?o.string2buf(x.dictionary):h.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(N=i.deflateSetDictionary(this.strm,k))!==p)throw new Error(c[N]);this._dict_set=!0}}function m(g,x){var N=new d(x);if(N.push(g,!0),N.err)throw N.msg||c[N.err];return N.result}d.prototype.push=function(g,x){var N,k,j=this.strm,A=this.options.chunkSize;if(this.ended)return!1;k=x===~~x?x:x===!0?4:0,typeof g=="string"?j.input=o.string2buf(g):h.call(g)==="[object ArrayBuffer]"?j.input=new Uint8Array(g):j.input=g,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new l.Buf8(A),j.next_out=0,j.avail_out=A),(N=i.deflate(j,k))!==1&&N!==p)return this.onEnd(N),!(this.ended=!0);j.avail_out!==0&&(j.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(l.shrinkBuf(j.output,j.next_out))):this.onData(l.shrinkBuf(j.output,j.next_out)))}while((0<j.avail_in||j.avail_out===0)&&N!==1);return k===4?(N=i.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===p):k!==2||(this.onEnd(p),!(j.avail_out=0))},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},a.Deflate=d,a.deflate=m,a.deflateRaw=function(g,x){return(x=x||{}).raw=!0,m(g,x)},a.gzip=function(g,x){return(x=x||{}).gzip=!0,m(g,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,n,a){var i=s("./zlib/inflate"),l=s("./utils/common"),o=s("./utils/strings"),c=s("./zlib/constants"),f=s("./zlib/messages"),h=s("./zlib/zstream"),p=s("./zlib/gzheader"),b=Object.prototype.toString;function u(d){if(!(this instanceof u))return new u(d);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},d||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||d&&d.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,m.windowBits);if(g!==c.Z_OK)throw new Error(f[g]);this.header=new p,i.inflateGetHeader(this.strm,this.header)}function w(d,m){var g=new u(m);if(g.push(d,!0),g.err)throw g.msg||f[g.err];return g.result}u.prototype.push=function(d,m){var g,x,N,k,j,A,T=this.strm,L=this.options.chunkSize,O=this.options.dictionary,U=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof d=="string"?T.input=o.binstring2buf(d):b.call(d)==="[object ArrayBuffer]"?T.input=new Uint8Array(d):T.input=d,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new l.Buf8(L),T.next_out=0,T.avail_out=L),(g=i.inflate(T,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&O&&(A=typeof O=="string"?o.string2buf(O):b.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,g=i.inflateSetDictionary(this.strm,A)),g===c.Z_BUF_ERROR&&U===!0&&(g=c.Z_OK,U=!1),g!==c.Z_STREAM_END&&g!==c.Z_OK)return this.onEnd(g),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&g!==c.Z_STREAM_END&&(T.avail_in!==0||x!==c.Z_FINISH&&x!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=o.utf8border(T.output,T.next_out),k=T.next_out-N,j=o.buf2string(T.output,N),T.next_out=k,T.avail_out=L-k,k&&l.arraySet(T.output,T.output,N,k,0),this.onData(j)):this.onData(l.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(U=!0)}while((0<T.avail_in||T.avail_out===0)&&g!==c.Z_STREAM_END);return g===c.Z_STREAM_END&&(x=c.Z_FINISH),x===c.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===c.Z_OK):x!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(T.avail_out=0))},u.prototype.onData=function(d){this.chunks.push(d)},u.prototype.onEnd=function(d){d===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},a.Inflate=u,a.inflate=w,a.inflateRaw=function(d,m){return(m=m||{}).raw=!0,w(d,m)},a.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var h=f.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var p in h)h.hasOwnProperty(p)&&(c[p]=h[p])}}return c},a.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var l={arraySet:function(c,f,h,p,b){if(f.subarray&&c.subarray)c.set(f.subarray(h,h+p),b);else for(var u=0;u<p;u++)c[b+u]=f[h+u]},flattenChunks:function(c){var f,h,p,b,u,w;for(f=p=0,h=c.length;f<h;f++)p+=c[f].length;for(w=new Uint8Array(p),f=b=0,h=c.length;f<h;f++)u=c[f],w.set(u,b),b+=u.length;return w}},o={arraySet:function(c,f,h,p,b){for(var u=0;u<p;u++)c[b+u]=f[h+u]},flattenChunks:function(c){return[].concat.apply([],c)}};a.setTyped=function(c){c?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,l)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(s,n,a){var i=s("./common"),l=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new i.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function h(p,b){if(b<65537&&(p.subarray&&o||!p.subarray&&l))return String.fromCharCode.apply(null,i.shrinkBuf(p,b));for(var u="",w=0;w<b;w++)u+=String.fromCharCode(p[w]);return u}c[254]=c[254]=1,a.string2buf=function(p){var b,u,w,d,m,g=p.length,x=0;for(d=0;d<g;d++)(64512&(u=p.charCodeAt(d)))==55296&&d+1<g&&(64512&(w=p.charCodeAt(d+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),d++),x+=u<128?1:u<2048?2:u<65536?3:4;for(b=new i.Buf8(x),d=m=0;m<x;d++)(64512&(u=p.charCodeAt(d)))==55296&&d+1<g&&(64512&(w=p.charCodeAt(d+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),d++),u<128?b[m++]=u:(u<2048?b[m++]=192|u>>>6:(u<65536?b[m++]=224|u>>>12:(b[m++]=240|u>>>18,b[m++]=128|u>>>12&63),b[m++]=128|u>>>6&63),b[m++]=128|63&u);return b},a.buf2binstring=function(p){return h(p,p.length)},a.binstring2buf=function(p){for(var b=new i.Buf8(p.length),u=0,w=b.length;u<w;u++)b[u]=p.charCodeAt(u);return b},a.buf2string=function(p,b){var u,w,d,m,g=b||p.length,x=new Array(2*g);for(u=w=0;u<g;)if((d=p[u++])<128)x[w++]=d;else if(4<(m=c[d]))x[w++]=65533,u+=m-1;else{for(d&=m===2?31:m===3?15:7;1<m&&u<g;)d=d<<6|63&p[u++],m--;1<m?x[w++]=65533:d<65536?x[w++]=d:(d-=65536,x[w++]=55296|d>>10&1023,x[w++]=56320|1023&d)}return h(x,w)},a.utf8border=function(p,b){var u;for((b=b||p.length)>p.length&&(b=p.length),u=b-1;0<=u&&(192&p[u])==128;)u--;return u<0||u===0?b:u+c[p[u]]>b?u:b}},{"./common":41}],43:[function(s,n,a){n.exports=function(i,l,o,c){for(var f=65535&i|0,h=i>>>16&65535|0,p=0;o!==0;){for(o-=p=2e3<o?2e3:o;h=h+(f=f+l[c++]|0)|0,--p;);f%=65521,h%=65521}return f|h<<16|0}},{}],44:[function(s,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,n,a){var i=function(){for(var l,o=[],c=0;c<256;c++){l=c;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;o[c]=l}return o}();n.exports=function(l,o,c,f){var h=i,p=f+c;l^=-1;for(var b=f;b<p;b++)l=l>>>8^h[255&(l^o[b])];return-1^l}},{}],46:[function(s,n,a){var i,l=s("../utils/common"),o=s("./trees"),c=s("./adler32"),f=s("./crc32"),h=s("./messages"),p=0,b=4,u=0,w=-2,d=-1,m=4,g=2,x=8,N=9,k=286,j=30,A=19,T=2*k+1,L=15,O=3,U=258,Y=U+O+1,_=42,R=113,y=1,D=2,Q=3,M=4;function Z(v,V){return v.msg=h[V],V}function H(v){return(v<<1)-(4<v?9:0)}function ne(v){for(var V=v.length;0<=--V;)v[V]=0}function z(v){var V=v.state,$=V.pending;$>v.avail_out&&($=v.avail_out),$!==0&&(l.arraySet(v.output,V.pending_buf,V.pending_out,$,v.next_out),v.next_out+=$,V.pending_out+=$,v.total_out+=$,v.avail_out-=$,V.pending-=$,V.pending===0&&(V.pending_out=0))}function F(v,V){o._tr_flush_block(v,0<=v.block_start?v.block_start:-1,v.strstart-v.block_start,V),v.block_start=v.strstart,z(v.strm)}function oe(v,V){v.pending_buf[v.pending++]=V}function re(v,V){v.pending_buf[v.pending++]=V>>>8&255,v.pending_buf[v.pending++]=255&V}function ee(v,V){var $,E,S=v.max_chain_length,P=v.strstart,W=v.prev_length,G=v.nice_match,I=v.strstart>v.w_size-Y?v.strstart-(v.w_size-Y):0,X=v.window,se=v.w_mask,J=v.prev,de=v.strstart+U,ae=X[P+W-1],K=X[P+W];v.prev_length>=v.good_match&&(S>>=2),G>v.lookahead&&(G=v.lookahead);do if(X[($=V)+W]===K&&X[$+W-1]===ae&&X[$]===X[P]&&X[++$]===X[P+1]){P+=2,$++;do;while(X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&X[++P]===X[++$]&&P<de);if(E=U-(de-P),P=de-U,W<E){if(v.match_start=V,G<=(W=E))break;ae=X[P+W-1],K=X[P+W]}}while((V=J[V&se])>I&&--S!=0);return W<=v.lookahead?W:v.lookahead}function je(v){var V,$,E,S,P,W,G,I,X,se,J=v.w_size;do{if(S=v.window_size-v.lookahead-v.strstart,v.strstart>=J+(J-Y)){for(l.arraySet(v.window,v.window,J,J,0),v.match_start-=J,v.strstart-=J,v.block_start-=J,V=$=v.hash_size;E=v.head[--V],v.head[V]=J<=E?E-J:0,--$;);for(V=$=J;E=v.prev[--V],v.prev[V]=J<=E?E-J:0,--$;);S+=J}if(v.strm.avail_in===0)break;if(W=v.strm,G=v.window,I=v.strstart+v.lookahead,X=S,se=void 0,se=W.avail_in,X<se&&(se=X),$=se===0?0:(W.avail_in-=se,l.arraySet(G,W.input,W.next_in,se,I),W.state.wrap===1?W.adler=c(W.adler,G,se,I):W.state.wrap===2&&(W.adler=f(W.adler,G,se,I)),W.next_in+=se,W.total_in+=se,se),v.lookahead+=$,v.lookahead+v.insert>=O)for(P=v.strstart-v.insert,v.ins_h=v.window[P],v.ins_h=(v.ins_h<<v.hash_shift^v.window[P+1])&v.hash_mask;v.insert&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[P+O-1])&v.hash_mask,v.prev[P&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=P,P++,v.insert--,!(v.lookahead+v.insert<O)););}while(v.lookahead<Y&&v.strm.avail_in!==0)}function Ce(v,V){for(var $,E;;){if(v.lookahead<Y){if(je(v),v.lookahead<Y&&V===p)return y;if(v.lookahead===0)break}if($=0,v.lookahead>=O&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),$!==0&&v.strstart-$<=v.w_size-Y&&(v.match_length=ee(v,$)),v.match_length>=O)if(E=o._tr_tally(v,v.strstart-v.match_start,v.match_length-O),v.lookahead-=v.match_length,v.match_length<=v.max_lazy_match&&v.lookahead>=O){for(v.match_length--;v.strstart++,v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart,--v.match_length!=0;);v.strstart++}else v.strstart+=v.match_length,v.match_length=0,v.ins_h=v.window[v.strstart],v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+1])&v.hash_mask;else E=o._tr_tally(v,0,v.window[v.strstart]),v.lookahead--,v.strstart++;if(E&&(F(v,!1),v.strm.avail_out===0))return y}return v.insert=v.strstart<O-1?v.strstart:O-1,V===b?(F(v,!0),v.strm.avail_out===0?Q:M):v.last_lit&&(F(v,!1),v.strm.avail_out===0)?y:D}function he(v,V){for(var $,E,S;;){if(v.lookahead<Y){if(je(v),v.lookahead<Y&&V===p)return y;if(v.lookahead===0)break}if($=0,v.lookahead>=O&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),v.prev_length=v.match_length,v.prev_match=v.match_start,v.match_length=O-1,$!==0&&v.prev_length<v.max_lazy_match&&v.strstart-$<=v.w_size-Y&&(v.match_length=ee(v,$),v.match_length<=5&&(v.strategy===1||v.match_length===O&&4096<v.strstart-v.match_start)&&(v.match_length=O-1)),v.prev_length>=O&&v.match_length<=v.prev_length){for(S=v.strstart+v.lookahead-O,E=o._tr_tally(v,v.strstart-1-v.prev_match,v.prev_length-O),v.lookahead-=v.prev_length-1,v.prev_length-=2;++v.strstart<=S&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),--v.prev_length!=0;);if(v.match_available=0,v.match_length=O-1,v.strstart++,E&&(F(v,!1),v.strm.avail_out===0))return y}else if(v.match_available){if((E=o._tr_tally(v,0,v.window[v.strstart-1]))&&F(v,!1),v.strstart++,v.lookahead--,v.strm.avail_out===0)return y}else v.match_available=1,v.strstart++,v.lookahead--}return v.match_available&&(E=o._tr_tally(v,0,v.window[v.strstart-1]),v.match_available=0),v.insert=v.strstart<O-1?v.strstart:O-1,V===b?(F(v,!0),v.strm.avail_out===0?Q:M):v.last_lit&&(F(v,!1),v.strm.avail_out===0)?y:D}function me(v,V,$,E,S){this.good_length=v,this.max_lazy=V,this.nice_length=$,this.max_chain=E,this.func=S}function ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*T),this.dyn_dtree=new l.Buf16(2*(2*j+1)),this.bl_tree=new l.Buf16(2*(2*A+1)),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(L+1),this.heap=new l.Buf16(2*k+1),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*k+1),ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function we(v){var V;return v&&v.state?(v.total_in=v.total_out=0,v.data_type=g,(V=v.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?_:R,v.adler=V.wrap===2?0:1,V.last_flush=p,o._tr_init(V),u):Z(v,w)}function Le(v){var V=we(v);return V===u&&function($){$.window_size=2*$.w_size,ne($.head),$.max_lazy_match=i[$.level].max_lazy,$.good_match=i[$.level].good_length,$.nice_match=i[$.level].nice_length,$.max_chain_length=i[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=O-1,$.match_available=0,$.ins_h=0}(v.state),V}function Ee(v,V,$,E,S,P){if(!v)return w;var W=1;if(V===d&&(V=6),E<0?(W=0,E=-E):15<E&&(W=2,E-=16),S<1||N<S||$!==x||E<8||15<E||V<0||9<V||P<0||m<P)return Z(v,w);E===8&&(E=9);var G=new ke;return(v.state=G).strm=v,G.wrap=W,G.gzhead=null,G.w_bits=E,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=S+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+O-1)/O),G.window=new l.Buf8(2*G.w_size),G.head=new l.Buf16(G.hash_size),G.prev=new l.Buf16(G.w_size),G.lit_bufsize=1<<S+6,G.pending_buf_size=4*G.lit_bufsize,G.pending_buf=new l.Buf8(G.pending_buf_size),G.d_buf=1*G.lit_bufsize,G.l_buf=3*G.lit_bufsize,G.level=V,G.strategy=P,G.method=$,Le(v)}i=[new me(0,0,0,0,function(v,V){var $=65535;for($>v.pending_buf_size-5&&($=v.pending_buf_size-5);;){if(v.lookahead<=1){if(je(v),v.lookahead===0&&V===p)return y;if(v.lookahead===0)break}v.strstart+=v.lookahead,v.lookahead=0;var E=v.block_start+$;if((v.strstart===0||v.strstart>=E)&&(v.lookahead=v.strstart-E,v.strstart=E,F(v,!1),v.strm.avail_out===0)||v.strstart-v.block_start>=v.w_size-Y&&(F(v,!1),v.strm.avail_out===0))return y}return v.insert=0,V===b?(F(v,!0),v.strm.avail_out===0?Q:M):(v.strstart>v.block_start&&(F(v,!1),v.strm.avail_out),y)}),new me(4,4,8,4,Ce),new me(4,5,16,8,Ce),new me(4,6,32,32,Ce),new me(4,4,16,16,he),new me(8,16,32,32,he),new me(8,16,128,128,he),new me(8,32,128,256,he),new me(32,128,258,1024,he),new me(32,258,258,4096,he)],a.deflateInit=function(v,V){return Ee(v,V,x,15,8,0)},a.deflateInit2=Ee,a.deflateReset=Le,a.deflateResetKeep=we,a.deflateSetHeader=function(v,V){return v&&v.state?v.state.wrap!==2?w:(v.state.gzhead=V,u):w},a.deflate=function(v,V){var $,E,S,P;if(!v||!v.state||5<V||V<0)return v?Z(v,w):w;if(E=v.state,!v.output||!v.input&&v.avail_in!==0||E.status===666&&V!==b)return Z(v,v.avail_out===0?-5:w);if(E.strm=v,$=E.last_flush,E.last_flush=V,E.status===_)if(E.wrap===2)v.adler=0,oe(E,31),oe(E,139),oe(E,8),E.gzhead?(oe(E,(E.gzhead.text?1:0)+(E.gzhead.hcrc?2:0)+(E.gzhead.extra?4:0)+(E.gzhead.name?8:0)+(E.gzhead.comment?16:0)),oe(E,255&E.gzhead.time),oe(E,E.gzhead.time>>8&255),oe(E,E.gzhead.time>>16&255),oe(E,E.gzhead.time>>24&255),oe(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),oe(E,255&E.gzhead.os),E.gzhead.extra&&E.gzhead.extra.length&&(oe(E,255&E.gzhead.extra.length),oe(E,E.gzhead.extra.length>>8&255)),E.gzhead.hcrc&&(v.adler=f(v.adler,E.pending_buf,E.pending,0)),E.gzindex=0,E.status=69):(oe(E,0),oe(E,0),oe(E,0),oe(E,0),oe(E,0),oe(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),oe(E,3),E.status=R);else{var W=x+(E.w_bits-8<<4)<<8;W|=(2<=E.strategy||E.level<2?0:E.level<6?1:E.level===6?2:3)<<6,E.strstart!==0&&(W|=32),W+=31-W%31,E.status=R,re(E,W),E.strstart!==0&&(re(E,v.adler>>>16),re(E,65535&v.adler)),v.adler=1}if(E.status===69)if(E.gzhead.extra){for(S=E.pending;E.gzindex<(65535&E.gzhead.extra.length)&&(E.pending!==E.pending_buf_size||(E.gzhead.hcrc&&E.pending>S&&(v.adler=f(v.adler,E.pending_buf,E.pending-S,S)),z(v),S=E.pending,E.pending!==E.pending_buf_size));)oe(E,255&E.gzhead.extra[E.gzindex]),E.gzindex++;E.gzhead.hcrc&&E.pending>S&&(v.adler=f(v.adler,E.pending_buf,E.pending-S,S)),E.gzindex===E.gzhead.extra.length&&(E.gzindex=0,E.status=73)}else E.status=73;if(E.status===73)if(E.gzhead.name){S=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>S&&(v.adler=f(v.adler,E.pending_buf,E.pending-S,S)),z(v),S=E.pending,E.pending===E.pending_buf_size)){P=1;break}P=E.gzindex<E.gzhead.name.length?255&E.gzhead.name.charCodeAt(E.gzindex++):0,oe(E,P)}while(P!==0);E.gzhead.hcrc&&E.pending>S&&(v.adler=f(v.adler,E.pending_buf,E.pending-S,S)),P===0&&(E.gzindex=0,E.status=91)}else E.status=91;if(E.status===91)if(E.gzhead.comment){S=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>S&&(v.adler=f(v.adler,E.pending_buf,E.pending-S,S)),z(v),S=E.pending,E.pending===E.pending_buf_size)){P=1;break}P=E.gzindex<E.gzhead.comment.length?255&E.gzhead.comment.charCodeAt(E.gzindex++):0,oe(E,P)}while(P!==0);E.gzhead.hcrc&&E.pending>S&&(v.adler=f(v.adler,E.pending_buf,E.pending-S,S)),P===0&&(E.status=103)}else E.status=103;if(E.status===103&&(E.gzhead.hcrc?(E.pending+2>E.pending_buf_size&&z(v),E.pending+2<=E.pending_buf_size&&(oe(E,255&v.adler),oe(E,v.adler>>8&255),v.adler=0,E.status=R)):E.status=R),E.pending!==0){if(z(v),v.avail_out===0)return E.last_flush=-1,u}else if(v.avail_in===0&&H(V)<=H($)&&V!==b)return Z(v,-5);if(E.status===666&&v.avail_in!==0)return Z(v,-5);if(v.avail_in!==0||E.lookahead!==0||V!==p&&E.status!==666){var G=E.strategy===2?function(I,X){for(var se;;){if(I.lookahead===0&&(je(I),I.lookahead===0)){if(X===p)return y;break}if(I.match_length=0,se=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,se&&(F(I,!1),I.strm.avail_out===0))return y}return I.insert=0,X===b?(F(I,!0),I.strm.avail_out===0?Q:M):I.last_lit&&(F(I,!1),I.strm.avail_out===0)?y:D}(E,V):E.strategy===3?function(I,X){for(var se,J,de,ae,K=I.window;;){if(I.lookahead<=U){if(je(I),I.lookahead<=U&&X===p)return y;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=O&&0<I.strstart&&(J=K[de=I.strstart-1])===K[++de]&&J===K[++de]&&J===K[++de]){ae=I.strstart+U;do;while(J===K[++de]&&J===K[++de]&&J===K[++de]&&J===K[++de]&&J===K[++de]&&J===K[++de]&&J===K[++de]&&J===K[++de]&&de<ae);I.match_length=U-(ae-de),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=O?(se=o._tr_tally(I,1,I.match_length-O),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(se=o._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),se&&(F(I,!1),I.strm.avail_out===0))return y}return I.insert=0,X===b?(F(I,!0),I.strm.avail_out===0?Q:M):I.last_lit&&(F(I,!1),I.strm.avail_out===0)?y:D}(E,V):i[E.level].func(E,V);if(G!==Q&&G!==M||(E.status=666),G===y||G===Q)return v.avail_out===0&&(E.last_flush=-1),u;if(G===D&&(V===1?o._tr_align(E):V!==5&&(o._tr_stored_block(E,0,0,!1),V===3&&(ne(E.head),E.lookahead===0&&(E.strstart=0,E.block_start=0,E.insert=0))),z(v),v.avail_out===0))return E.last_flush=-1,u}return V!==b?u:E.wrap<=0?1:(E.wrap===2?(oe(E,255&v.adler),oe(E,v.adler>>8&255),oe(E,v.adler>>16&255),oe(E,v.adler>>24&255),oe(E,255&v.total_in),oe(E,v.total_in>>8&255),oe(E,v.total_in>>16&255),oe(E,v.total_in>>24&255)):(re(E,v.adler>>>16),re(E,65535&v.adler)),z(v),0<E.wrap&&(E.wrap=-E.wrap),E.pending!==0?u:1)},a.deflateEnd=function(v){var V;return v&&v.state?(V=v.state.status)!==_&&V!==69&&V!==73&&V!==91&&V!==103&&V!==R&&V!==666?Z(v,w):(v.state=null,V===R?Z(v,-3):u):w},a.deflateSetDictionary=function(v,V){var $,E,S,P,W,G,I,X,se=V.length;if(!v||!v.state||(P=($=v.state).wrap)===2||P===1&&$.status!==_||$.lookahead)return w;for(P===1&&(v.adler=c(v.adler,V,se,0)),$.wrap=0,se>=$.w_size&&(P===0&&(ne($.head),$.strstart=0,$.block_start=0,$.insert=0),X=new l.Buf8($.w_size),l.arraySet(X,V,se-$.w_size,$.w_size,0),V=X,se=$.w_size),W=v.avail_in,G=v.next_in,I=v.input,v.avail_in=se,v.next_in=0,v.input=V,je($);$.lookahead>=O;){for(E=$.strstart,S=$.lookahead-(O-1);$.ins_h=($.ins_h<<$.hash_shift^$.window[E+O-1])&$.hash_mask,$.prev[E&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=E,E++,--S;);$.strstart=E,$.lookahead=O-1,je($)}return $.strstart+=$.lookahead,$.block_start=$.strstart,$.insert=$.lookahead,$.lookahead=0,$.match_length=$.prev_length=O-1,$.match_available=0,v.next_in=G,v.input=I,v.avail_in=W,$.wrap=P,u},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,n,a){n.exports=function(i,l){var o,c,f,h,p,b,u,w,d,m,g,x,N,k,j,A,T,L,O,U,Y,_,R,y,D;o=i.state,c=i.next_in,y=i.input,f=c+(i.avail_in-5),h=i.next_out,D=i.output,p=h-(l-i.avail_out),b=h+(i.avail_out-257),u=o.dmax,w=o.wsize,d=o.whave,m=o.wnext,g=o.window,x=o.hold,N=o.bits,k=o.lencode,j=o.distcode,A=(1<<o.lenbits)-1,T=(1<<o.distbits)-1;e:do{N<15&&(x+=y[c++]<<N,N+=8,x+=y[c++]<<N,N+=8),L=k[x&A];t:for(;;){if(x>>>=O=L>>>24,N-=O,(O=L>>>16&255)===0)D[h++]=65535&L;else{if(!(16&O)){if(!(64&O)){L=k[(65535&L)+(x&(1<<O)-1)];continue t}if(32&O){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}U=65535&L,(O&=15)&&(N<O&&(x+=y[c++]<<N,N+=8),U+=x&(1<<O)-1,x>>>=O,N-=O),N<15&&(x+=y[c++]<<N,N+=8,x+=y[c++]<<N,N+=8),L=j[x&T];r:for(;;){if(x>>>=O=L>>>24,N-=O,!(16&(O=L>>>16&255))){if(!(64&O)){L=j[(65535&L)+(x&(1<<O)-1)];continue r}i.msg="invalid distance code",o.mode=30;break e}if(Y=65535&L,N<(O&=15)&&(x+=y[c++]<<N,(N+=8)<O&&(x+=y[c++]<<N,N+=8)),u<(Y+=x&(1<<O)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(x>>>=O,N-=O,(O=h-p)<Y){if(d<(O=Y-O)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(R=g,(_=0)===m){if(_+=w-O,O<U){for(U-=O;D[h++]=g[_++],--O;);_=h-Y,R=D}}else if(m<O){if(_+=w+m-O,(O-=m)<U){for(U-=O;D[h++]=g[_++],--O;);if(_=0,m<U){for(U-=O=m;D[h++]=g[_++],--O;);_=h-Y,R=D}}}else if(_+=m-O,O<U){for(U-=O;D[h++]=g[_++],--O;);_=h-Y,R=D}for(;2<U;)D[h++]=R[_++],D[h++]=R[_++],D[h++]=R[_++],U-=3;U&&(D[h++]=R[_++],1<U&&(D[h++]=R[_++]))}else{for(_=h-Y;D[h++]=D[_++],D[h++]=D[_++],D[h++]=D[_++],2<(U-=3););U&&(D[h++]=D[_++],1<U&&(D[h++]=D[_++]))}break}}break}}while(c<f&&h<b);c-=U=N>>3,x&=(1<<(N-=U<<3))-1,i.next_in=c,i.next_out=h,i.avail_in=c<f?f-c+5:5-(c-f),i.avail_out=h<b?b-h+257:257-(h-b),o.hold=x,o.bits=N}},{}],49:[function(s,n,a){var i=s("../utils/common"),l=s("./adler32"),o=s("./crc32"),c=s("./inffast"),f=s("./inftrees"),h=1,p=2,b=0,u=-2,w=1,d=852,m=592;function g(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(_){var R;return _&&_.state?(R=_.state,_.total_in=_.total_out=R.total=0,_.msg="",R.wrap&&(_.adler=1&R.wrap),R.mode=w,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new i.Buf32(d),R.distcode=R.distdyn=new i.Buf32(m),R.sane=1,R.back=-1,b):u}function k(_){var R;return _&&_.state?((R=_.state).wsize=0,R.whave=0,R.wnext=0,N(_)):u}function j(_,R){var y,D;return _&&_.state?(D=_.state,R<0?(y=0,R=-R):(y=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?u:(D.window!==null&&D.wbits!==R&&(D.window=null),D.wrap=y,D.wbits=R,k(_))):u}function A(_,R){var y,D;return _?(D=new x,(_.state=D).window=null,(y=j(_,R))!==b&&(_.state=null),y):u}var T,L,O=!0;function U(_){if(O){var R;for(T=new i.Buf32(512),L=new i.Buf32(32),R=0;R<144;)_.lens[R++]=8;for(;R<256;)_.lens[R++]=9;for(;R<280;)_.lens[R++]=7;for(;R<288;)_.lens[R++]=8;for(f(h,_.lens,0,288,T,0,_.work,{bits:9}),R=0;R<32;)_.lens[R++]=5;f(p,_.lens,0,32,L,0,_.work,{bits:5}),O=!1}_.lencode=T,_.lenbits=9,_.distcode=L,_.distbits=5}function Y(_,R,y,D){var Q,M=_.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new i.Buf8(M.wsize)),D>=M.wsize?(i.arraySet(M.window,R,y-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(D<(Q=M.wsize-M.wnext)&&(Q=D),i.arraySet(M.window,R,y-D,Q,M.wnext),(D-=Q)?(i.arraySet(M.window,R,y-D,D,0),M.wnext=D,M.whave=M.wsize):(M.wnext+=Q,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=Q))),0}a.inflateReset=k,a.inflateReset2=j,a.inflateResetKeep=N,a.inflateInit=function(_){return A(_,15)},a.inflateInit2=A,a.inflate=function(_,R){var y,D,Q,M,Z,H,ne,z,F,oe,re,ee,je,Ce,he,me,ke,we,Le,Ee,v,V,$,E,S=0,P=new i.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return u;(y=_.state).mode===12&&(y.mode=13),Z=_.next_out,Q=_.output,ne=_.avail_out,M=_.next_in,D=_.input,H=_.avail_in,z=y.hold,F=y.bits,oe=H,re=ne,V=b;e:for(;;)switch(y.mode){case w:if(y.wrap===0){y.mode=13;break}for(;F<16;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(2&y.wrap&&z===35615){P[y.check=0]=255&z,P[1]=z>>>8&255,y.check=o(y.check,P,2,0),F=z=0,y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&z)<<8)+(z>>8))%31){_.msg="incorrect header check",y.mode=30;break}if((15&z)!=8){_.msg="unknown compression method",y.mode=30;break}if(F-=4,v=8+(15&(z>>>=4)),y.wbits===0)y.wbits=v;else if(v>y.wbits){_.msg="invalid window size",y.mode=30;break}y.dmax=1<<v,_.adler=y.check=1,y.mode=512&z?10:12,F=z=0;break;case 2:for(;F<16;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(y.flags=z,(255&y.flags)!=8){_.msg="unknown compression method",y.mode=30;break}if(57344&y.flags){_.msg="unknown header flags set",y.mode=30;break}y.head&&(y.head.text=z>>8&1),512&y.flags&&(P[0]=255&z,P[1]=z>>>8&255,y.check=o(y.check,P,2,0)),F=z=0,y.mode=3;case 3:for(;F<32;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.head&&(y.head.time=z),512&y.flags&&(P[0]=255&z,P[1]=z>>>8&255,P[2]=z>>>16&255,P[3]=z>>>24&255,y.check=o(y.check,P,4,0)),F=z=0,y.mode=4;case 4:for(;F<16;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.head&&(y.head.xflags=255&z,y.head.os=z>>8),512&y.flags&&(P[0]=255&z,P[1]=z>>>8&255,y.check=o(y.check,P,2,0)),F=z=0,y.mode=5;case 5:if(1024&y.flags){for(;F<16;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.length=z,y.head&&(y.head.extra_len=z),512&y.flags&&(P[0]=255&z,P[1]=z>>>8&255,y.check=o(y.check,P,2,0)),F=z=0}else y.head&&(y.head.extra=null);y.mode=6;case 6:if(1024&y.flags&&(H<(ee=y.length)&&(ee=H),ee&&(y.head&&(v=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),i.arraySet(y.head.extra,D,M,ee,v)),512&y.flags&&(y.check=o(y.check,D,ee,M)),H-=ee,M+=ee,y.length-=ee),y.length))break e;y.length=0,y.mode=7;case 7:if(2048&y.flags){if(H===0)break e;for(ee=0;v=D[M+ee++],y.head&&v&&y.length<65536&&(y.head.name+=String.fromCharCode(v)),v&&ee<H;);if(512&y.flags&&(y.check=o(y.check,D,ee,M)),H-=ee,M+=ee,v)break e}else y.head&&(y.head.name=null);y.length=0,y.mode=8;case 8:if(4096&y.flags){if(H===0)break e;for(ee=0;v=D[M+ee++],y.head&&v&&y.length<65536&&(y.head.comment+=String.fromCharCode(v)),v&&ee<H;);if(512&y.flags&&(y.check=o(y.check,D,ee,M)),H-=ee,M+=ee,v)break e}else y.head&&(y.head.comment=null);y.mode=9;case 9:if(512&y.flags){for(;F<16;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(z!==(65535&y.check)){_.msg="header crc mismatch",y.mode=30;break}F=z=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),_.adler=y.check=0,y.mode=12;break;case 10:for(;F<32;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}_.adler=y.check=g(z),F=z=0,y.mode=11;case 11:if(y.havedict===0)return _.next_out=Z,_.avail_out=ne,_.next_in=M,_.avail_in=H,y.hold=z,y.bits=F,2;_.adler=y.check=1,y.mode=12;case 12:if(R===5||R===6)break e;case 13:if(y.last){z>>>=7&F,F-=7&F,y.mode=27;break}for(;F<3;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}switch(y.last=1&z,F-=1,3&(z>>>=1)){case 0:y.mode=14;break;case 1:if(U(y),y.mode=20,R!==6)break;z>>>=2,F-=2;break e;case 2:y.mode=17;break;case 3:_.msg="invalid block type",y.mode=30}z>>>=2,F-=2;break;case 14:for(z>>>=7&F,F-=7&F;F<32;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if((65535&z)!=(z>>>16^65535)){_.msg="invalid stored block lengths",y.mode=30;break}if(y.length=65535&z,F=z=0,y.mode=15,R===6)break e;case 15:y.mode=16;case 16:if(ee=y.length){if(H<ee&&(ee=H),ne<ee&&(ee=ne),ee===0)break e;i.arraySet(Q,D,M,ee,Z),H-=ee,M+=ee,ne-=ee,Z+=ee,y.length-=ee;break}y.mode=12;break;case 17:for(;F<14;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(y.nlen=257+(31&z),z>>>=5,F-=5,y.ndist=1+(31&z),z>>>=5,F-=5,y.ncode=4+(15&z),z>>>=4,F-=4,286<y.nlen||30<y.ndist){_.msg="too many length or distance symbols",y.mode=30;break}y.have=0,y.mode=18;case 18:for(;y.have<y.ncode;){for(;F<3;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.lens[W[y.have++]]=7&z,z>>>=3,F-=3}for(;y.have<19;)y.lens[W[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,$={bits:y.lenbits},V=f(0,y.lens,0,19,y.lencode,0,y.work,$),y.lenbits=$.bits,V){_.msg="invalid code lengths set",y.mode=30;break}y.have=0,y.mode=19;case 19:for(;y.have<y.nlen+y.ndist;){for(;me=(S=y.lencode[z&(1<<y.lenbits)-1])>>>16&255,ke=65535&S,!((he=S>>>24)<=F);){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(ke<16)z>>>=he,F-=he,y.lens[y.have++]=ke;else{if(ke===16){for(E=he+2;F<E;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(z>>>=he,F-=he,y.have===0){_.msg="invalid bit length repeat",y.mode=30;break}v=y.lens[y.have-1],ee=3+(3&z),z>>>=2,F-=2}else if(ke===17){for(E=he+3;F<E;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}F-=he,v=0,ee=3+(7&(z>>>=he)),z>>>=3,F-=3}else{for(E=he+7;F<E;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}F-=he,v=0,ee=11+(127&(z>>>=he)),z>>>=7,F-=7}if(y.have+ee>y.nlen+y.ndist){_.msg="invalid bit length repeat",y.mode=30;break}for(;ee--;)y.lens[y.have++]=v}}if(y.mode===30)break;if(y.lens[256]===0){_.msg="invalid code -- missing end-of-block",y.mode=30;break}if(y.lenbits=9,$={bits:y.lenbits},V=f(h,y.lens,0,y.nlen,y.lencode,0,y.work,$),y.lenbits=$.bits,V){_.msg="invalid literal/lengths set",y.mode=30;break}if(y.distbits=6,y.distcode=y.distdyn,$={bits:y.distbits},V=f(p,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,$),y.distbits=$.bits,V){_.msg="invalid distances set",y.mode=30;break}if(y.mode=20,R===6)break e;case 20:y.mode=21;case 21:if(6<=H&&258<=ne){_.next_out=Z,_.avail_out=ne,_.next_in=M,_.avail_in=H,y.hold=z,y.bits=F,c(_,re),Z=_.next_out,Q=_.output,ne=_.avail_out,M=_.next_in,D=_.input,H=_.avail_in,z=y.hold,F=y.bits,y.mode===12&&(y.back=-1);break}for(y.back=0;me=(S=y.lencode[z&(1<<y.lenbits)-1])>>>16&255,ke=65535&S,!((he=S>>>24)<=F);){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(me&&!(240&me)){for(we=he,Le=me,Ee=ke;me=(S=y.lencode[Ee+((z&(1<<we+Le)-1)>>we)])>>>16&255,ke=65535&S,!(we+(he=S>>>24)<=F);){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}z>>>=we,F-=we,y.back+=we}if(z>>>=he,F-=he,y.back+=he,y.length=ke,me===0){y.mode=26;break}if(32&me){y.back=-1,y.mode=12;break}if(64&me){_.msg="invalid literal/length code",y.mode=30;break}y.extra=15&me,y.mode=22;case 22:if(y.extra){for(E=y.extra;F<E;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.length+=z&(1<<y.extra)-1,z>>>=y.extra,F-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=23;case 23:for(;me=(S=y.distcode[z&(1<<y.distbits)-1])>>>16&255,ke=65535&S,!((he=S>>>24)<=F);){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(!(240&me)){for(we=he,Le=me,Ee=ke;me=(S=y.distcode[Ee+((z&(1<<we+Le)-1)>>we)])>>>16&255,ke=65535&S,!(we+(he=S>>>24)<=F);){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}z>>>=we,F-=we,y.back+=we}if(z>>>=he,F-=he,y.back+=he,64&me){_.msg="invalid distance code",y.mode=30;break}y.offset=ke,y.extra=15&me,y.mode=24;case 24:if(y.extra){for(E=y.extra;F<E;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}y.offset+=z&(1<<y.extra)-1,z>>>=y.extra,F-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){_.msg="invalid distance too far back",y.mode=30;break}y.mode=25;case 25:if(ne===0)break e;if(ee=re-ne,y.offset>ee){if((ee=y.offset-ee)>y.whave&&y.sane){_.msg="invalid distance too far back",y.mode=30;break}je=ee>y.wnext?(ee-=y.wnext,y.wsize-ee):y.wnext-ee,ee>y.length&&(ee=y.length),Ce=y.window}else Ce=Q,je=Z-y.offset,ee=y.length;for(ne<ee&&(ee=ne),ne-=ee,y.length-=ee;Q[Z++]=Ce[je++],--ee;);y.length===0&&(y.mode=21);break;case 26:if(ne===0)break e;Q[Z++]=y.length,ne--,y.mode=21;break;case 27:if(y.wrap){for(;F<32;){if(H===0)break e;H--,z|=D[M++]<<F,F+=8}if(re-=ne,_.total_out+=re,y.total+=re,re&&(_.adler=y.check=y.flags?o(y.check,Q,re,Z-re):l(y.check,Q,re,Z-re)),re=ne,(y.flags?z:g(z))!==y.check){_.msg="incorrect data check",y.mode=30;break}F=z=0}y.mode=28;case 28:if(y.wrap&&y.flags){for(;F<32;){if(H===0)break e;H--,z+=D[M++]<<F,F+=8}if(z!==(4294967295&y.total)){_.msg="incorrect length check",y.mode=30;break}F=z=0}y.mode=29;case 29:V=1;break e;case 30:V=-3;break e;case 31:return-4;case 32:default:return u}return _.next_out=Z,_.avail_out=ne,_.next_in=M,_.avail_in=H,y.hold=z,y.bits=F,(y.wsize||re!==_.avail_out&&y.mode<30&&(y.mode<27||R!==4))&&Y(_,_.output,_.next_out,re-_.avail_out)?(y.mode=31,-4):(oe-=_.avail_in,re-=_.avail_out,_.total_in+=oe,_.total_out+=re,y.total+=re,y.wrap&&re&&(_.adler=y.check=y.flags?o(y.check,Q,re,_.next_out-re):l(y.check,Q,re,_.next_out-re)),_.data_type=y.bits+(y.last?64:0)+(y.mode===12?128:0)+(y.mode===20||y.mode===15?256:0),(oe==0&&re===0||R===4)&&V===b&&(V=-5),V)},a.inflateEnd=function(_){if(!_||!_.state)return u;var R=_.state;return R.window&&(R.window=null),_.state=null,b},a.inflateGetHeader=function(_,R){var y;return _&&_.state&&2&(y=_.state).wrap?((y.head=R).done=!1,b):u},a.inflateSetDictionary=function(_,R){var y,D=R.length;return _&&_.state?(y=_.state).wrap!==0&&y.mode!==11?u:y.mode===11&&l(1,R,D,0)!==y.check?-3:Y(_,R,D,D)?(y.mode=31,-4):(y.havedict=1,b):u},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,n,a){var i=s("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(h,p,b,u,w,d,m,g){var x,N,k,j,A,T,L,O,U,Y=g.bits,_=0,R=0,y=0,D=0,Q=0,M=0,Z=0,H=0,ne=0,z=0,F=null,oe=0,re=new i.Buf16(16),ee=new i.Buf16(16),je=null,Ce=0;for(_=0;_<=15;_++)re[_]=0;for(R=0;R<u;R++)re[p[b+R]]++;for(Q=Y,D=15;1<=D&&re[D]===0;D--);if(D<Q&&(Q=D),D===0)return w[d++]=20971520,w[d++]=20971520,g.bits=1,0;for(y=1;y<D&&re[y]===0;y++);for(Q<y&&(Q=y),_=H=1;_<=15;_++)if(H<<=1,(H-=re[_])<0)return-1;if(0<H&&(h===0||D!==1))return-1;for(ee[1]=0,_=1;_<15;_++)ee[_+1]=ee[_]+re[_];for(R=0;R<u;R++)p[b+R]!==0&&(m[ee[p[b+R]]++]=R);if(T=h===0?(F=je=m,19):h===1?(F=l,oe-=257,je=o,Ce-=257,256):(F=c,je=f,-1),_=y,A=d,Z=R=z=0,k=-1,j=(ne=1<<(M=Q))-1,h===1&&852<ne||h===2&&592<ne)return 1;for(;;){for(L=_-Z,U=m[R]<T?(O=0,m[R]):m[R]>T?(O=je[Ce+m[R]],F[oe+m[R]]):(O=96,0),x=1<<_-Z,y=N=1<<M;w[A+(z>>Z)+(N-=x)]=L<<24|O<<16|U|0,N!==0;);for(x=1<<_-1;z&x;)x>>=1;if(x!==0?(z&=x-1,z+=x):z=0,R++,--re[_]==0){if(_===D)break;_=p[b+m[R]]}if(Q<_&&(z&j)!==k){for(Z===0&&(Z=Q),A+=y,H=1<<(M=_-Z);M+Z<D&&!((H-=re[M+Z])<=0);)M++,H<<=1;if(ne+=1<<M,h===1&&852<ne||h===2&&592<ne)return 1;w[k=z&j]=Q<<24|M<<16|A-d|0}}return z!==0&&(w[A+z]=_-Z<<24|64<<16|0),g.bits=Q,0}},{"../utils/common":41}],51:[function(s,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,n,a){var i=s("../utils/common"),l=0,o=1;function c(S){for(var P=S.length;0<=--P;)S[P]=0}var f=0,h=29,p=256,b=p+1+h,u=30,w=19,d=2*b+1,m=15,g=16,x=7,N=256,k=16,j=17,A=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(b+2));c(Y);var _=new Array(2*u);c(_);var R=new Array(512);c(R);var y=new Array(256);c(y);var D=new Array(h);c(D);var Q,M,Z,H=new Array(u);function ne(S,P,W,G,I){this.static_tree=S,this.extra_bits=P,this.extra_base=W,this.elems=G,this.max_length=I,this.has_stree=S&&S.length}function z(S,P){this.dyn_tree=S,this.max_code=0,this.stat_desc=P}function F(S){return S<256?R[S]:R[256+(S>>>7)]}function oe(S,P){S.pending_buf[S.pending++]=255&P,S.pending_buf[S.pending++]=P>>>8&255}function re(S,P,W){S.bi_valid>g-W?(S.bi_buf|=P<<S.bi_valid&65535,oe(S,S.bi_buf),S.bi_buf=P>>g-S.bi_valid,S.bi_valid+=W-g):(S.bi_buf|=P<<S.bi_valid&65535,S.bi_valid+=W)}function ee(S,P,W){re(S,W[2*P],W[2*P+1])}function je(S,P){for(var W=0;W|=1&S,S>>>=1,W<<=1,0<--P;);return W>>>1}function Ce(S,P,W){var G,I,X=new Array(m+1),se=0;for(G=1;G<=m;G++)X[G]=se=se+W[G-1]<<1;for(I=0;I<=P;I++){var J=S[2*I+1];J!==0&&(S[2*I]=je(X[J]++,J))}}function he(S){var P;for(P=0;P<b;P++)S.dyn_ltree[2*P]=0;for(P=0;P<u;P++)S.dyn_dtree[2*P]=0;for(P=0;P<w;P++)S.bl_tree[2*P]=0;S.dyn_ltree[2*N]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function me(S){8<S.bi_valid?oe(S,S.bi_buf):0<S.bi_valid&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function ke(S,P,W,G){var I=2*P,X=2*W;return S[I]<S[X]||S[I]===S[X]&&G[P]<=G[W]}function we(S,P,W){for(var G=S.heap[W],I=W<<1;I<=S.heap_len&&(I<S.heap_len&&ke(P,S.heap[I+1],S.heap[I],S.depth)&&I++,!ke(P,G,S.heap[I],S.depth));)S.heap[W]=S.heap[I],W=I,I<<=1;S.heap[W]=G}function Le(S,P,W){var G,I,X,se,J=0;if(S.last_lit!==0)for(;G=S.pending_buf[S.d_buf+2*J]<<8|S.pending_buf[S.d_buf+2*J+1],I=S.pending_buf[S.l_buf+J],J++,G===0?ee(S,I,P):(ee(S,(X=y[I])+p+1,P),(se=T[X])!==0&&re(S,I-=D[X],se),ee(S,X=F(--G),W),(se=L[X])!==0&&re(S,G-=H[X],se)),J<S.last_lit;);ee(S,N,P)}function Ee(S,P){var W,G,I,X=P.dyn_tree,se=P.stat_desc.static_tree,J=P.stat_desc.has_stree,de=P.stat_desc.elems,ae=-1;for(S.heap_len=0,S.heap_max=d,W=0;W<de;W++)X[2*W]!==0?(S.heap[++S.heap_len]=ae=W,S.depth[W]=0):X[2*W+1]=0;for(;S.heap_len<2;)X[2*(I=S.heap[++S.heap_len]=ae<2?++ae:0)]=1,S.depth[I]=0,S.opt_len--,J&&(S.static_len-=se[2*I+1]);for(P.max_code=ae,W=S.heap_len>>1;1<=W;W--)we(S,X,W);for(I=de;W=S.heap[1],S.heap[1]=S.heap[S.heap_len--],we(S,X,1),G=S.heap[1],S.heap[--S.heap_max]=W,S.heap[--S.heap_max]=G,X[2*I]=X[2*W]+X[2*G],S.depth[I]=(S.depth[W]>=S.depth[G]?S.depth[W]:S.depth[G])+1,X[2*W+1]=X[2*G+1]=I,S.heap[1]=I++,we(S,X,1),2<=S.heap_len;);S.heap[--S.heap_max]=S.heap[1],function(K,le){var pe,ge,Ae,q,ue,Te,Me=le.dyn_tree,pn=le.max_code,qo=le.stat_desc.static_tree,Zo=le.stat_desc.has_stree,Xo=le.stat_desc.extra_bits,mn=le.stat_desc.extra_base,tr=le.stat_desc.max_length,yr=0;for(q=0;q<=m;q++)K.bl_count[q]=0;for(Me[2*K.heap[K.heap_max]+1]=0,pe=K.heap_max+1;pe<d;pe++)tr<(q=Me[2*Me[2*(ge=K.heap[pe])+1]+1]+1)&&(q=tr,yr++),Me[2*ge+1]=q,pn<ge||(K.bl_count[q]++,ue=0,mn<=ge&&(ue=Xo[ge-mn]),Te=Me[2*ge],K.opt_len+=Te*(q+ue),Zo&&(K.static_len+=Te*(qo[2*ge+1]+ue)));if(yr!==0){do{for(q=tr-1;K.bl_count[q]===0;)q--;K.bl_count[q]--,K.bl_count[q+1]+=2,K.bl_count[tr]--,yr-=2}while(0<yr);for(q=tr;q!==0;q--)for(ge=K.bl_count[q];ge!==0;)pn<(Ae=K.heap[--pe])||(Me[2*Ae+1]!==q&&(K.opt_len+=(q-Me[2*Ae+1])*Me[2*Ae],Me[2*Ae+1]=q),ge--)}}(S,P),Ce(X,ae,S.bl_count)}function v(S,P,W){var G,I,X=-1,se=P[1],J=0,de=7,ae=4;for(se===0&&(de=138,ae=3),P[2*(W+1)+1]=65535,G=0;G<=W;G++)I=se,se=P[2*(G+1)+1],++J<de&&I===se||(J<ae?S.bl_tree[2*I]+=J:I!==0?(I!==X&&S.bl_tree[2*I]++,S.bl_tree[2*k]++):J<=10?S.bl_tree[2*j]++:S.bl_tree[2*A]++,X=I,ae=(J=0)===se?(de=138,3):I===se?(de=6,3):(de=7,4))}function V(S,P,W){var G,I,X=-1,se=P[1],J=0,de=7,ae=4;for(se===0&&(de=138,ae=3),G=0;G<=W;G++)if(I=se,se=P[2*(G+1)+1],!(++J<de&&I===se)){if(J<ae)for(;ee(S,I,S.bl_tree),--J!=0;);else I!==0?(I!==X&&(ee(S,I,S.bl_tree),J--),ee(S,k,S.bl_tree),re(S,J-3,2)):J<=10?(ee(S,j,S.bl_tree),re(S,J-3,3)):(ee(S,A,S.bl_tree),re(S,J-11,7));X=I,ae=(J=0)===se?(de=138,3):I===se?(de=6,3):(de=7,4)}}c(H);var $=!1;function E(S,P,W,G){re(S,(f<<1)+(G?1:0),3),function(I,X,se,J){me(I),oe(I,se),oe(I,~se),i.arraySet(I.pending_buf,I.window,X,se,I.pending),I.pending+=se}(S,P,W)}a._tr_init=function(S){$||(function(){var P,W,G,I,X,se=new Array(m+1);for(I=G=0;I<h-1;I++)for(D[I]=G,P=0;P<1<<T[I];P++)y[G++]=I;for(y[G-1]=I,I=X=0;I<16;I++)for(H[I]=X,P=0;P<1<<L[I];P++)R[X++]=I;for(X>>=7;I<u;I++)for(H[I]=X<<7,P=0;P<1<<L[I]-7;P++)R[256+X++]=I;for(W=0;W<=m;W++)se[W]=0;for(P=0;P<=143;)Y[2*P+1]=8,P++,se[8]++;for(;P<=255;)Y[2*P+1]=9,P++,se[9]++;for(;P<=279;)Y[2*P+1]=7,P++,se[7]++;for(;P<=287;)Y[2*P+1]=8,P++,se[8]++;for(Ce(Y,b+1,se),P=0;P<u;P++)_[2*P+1]=5,_[2*P]=je(P,5);Q=new ne(Y,T,p+1,b,m),M=new ne(_,L,0,u,m),Z=new ne(new Array(0),O,0,w,x)}(),$=!0),S.l_desc=new z(S.dyn_ltree,Q),S.d_desc=new z(S.dyn_dtree,M),S.bl_desc=new z(S.bl_tree,Z),S.bi_buf=0,S.bi_valid=0,he(S)},a._tr_stored_block=E,a._tr_flush_block=function(S,P,W,G){var I,X,se=0;0<S.level?(S.strm.data_type===2&&(S.strm.data_type=function(J){var de,ae=4093624447;for(de=0;de<=31;de++,ae>>>=1)if(1&ae&&J.dyn_ltree[2*de]!==0)return l;if(J.dyn_ltree[18]!==0||J.dyn_ltree[20]!==0||J.dyn_ltree[26]!==0)return o;for(de=32;de<p;de++)if(J.dyn_ltree[2*de]!==0)return o;return l}(S)),Ee(S,S.l_desc),Ee(S,S.d_desc),se=function(J){var de;for(v(J,J.dyn_ltree,J.l_desc.max_code),v(J,J.dyn_dtree,J.d_desc.max_code),Ee(J,J.bl_desc),de=w-1;3<=de&&J.bl_tree[2*U[de]+1]===0;de--);return J.opt_len+=3*(de+1)+5+5+4,de}(S),I=S.opt_len+3+7>>>3,(X=S.static_len+3+7>>>3)<=I&&(I=X)):I=X=W+5,W+4<=I&&P!==-1?E(S,P,W,G):S.strategy===4||X===I?(re(S,2+(G?1:0),3),Le(S,Y,_)):(re(S,4+(G?1:0),3),function(J,de,ae,K){var le;for(re(J,de-257,5),re(J,ae-1,5),re(J,K-4,4),le=0;le<K;le++)re(J,J.bl_tree[2*U[le]+1],3);V(J,J.dyn_ltree,de-1),V(J,J.dyn_dtree,ae-1)}(S,S.l_desc.max_code+1,S.d_desc.max_code+1,se+1),Le(S,S.dyn_ltree,S.dyn_dtree)),he(S),G&&me(S)},a._tr_tally=function(S,P,W){return S.pending_buf[S.d_buf+2*S.last_lit]=P>>>8&255,S.pending_buf[S.d_buf+2*S.last_lit+1]=255&P,S.pending_buf[S.l_buf+S.last_lit]=255&W,S.last_lit++,P===0?S.dyn_ltree[2*W]++:(S.matches++,P--,S.dyn_ltree[2*(y[W]+p+1)]++,S.dyn_dtree[2*F(P)]++),S.last_lit===S.lit_bufsize-1},a._tr_align=function(S){re(S,2,3),ee(S,N,Y),function(P){P.bi_valid===16?(oe(P,P.bi_buf),P.bi_buf=0,P.bi_valid=0):8<=P.bi_valid&&(P.pending_buf[P.pending++]=255&P.bi_buf,P.bi_buf>>=8,P.bi_valid-=8)}(S)}},{"../utils/common":41}],53:[function(s,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,n,a){(function(i){(function(l,o){if(!l.setImmediate){var c,f,h,p,b=1,u={},w=!1,d=l.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(l);m=m&&m.setTimeout?m:l,c={}.toString.call(l.process)==="[object process]"?function(k){process.nextTick(function(){x(k)})}:function(){if(l.postMessage&&!l.importScripts){var k=!0,j=l.onmessage;return l.onmessage=function(){k=!1},l.postMessage("","*"),l.onmessage=j,k}}()?(p="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",N,!1):l.attachEvent("onmessage",N),function(k){l.postMessage(p+k,"*")}):l.MessageChannel?((h=new MessageChannel).port1.onmessage=function(k){x(k.data)},function(k){h.port2.postMessage(k)}):d&&"onreadystatechange"in d.createElement("script")?(f=d.documentElement,function(k){var j=d.createElement("script");j.onreadystatechange=function(){x(k),j.onreadystatechange=null,f.removeChild(j),j=null},f.appendChild(j)}):function(k){setTimeout(x,0,k)},m.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var j=new Array(arguments.length-1),A=0;A<j.length;A++)j[A]=arguments[A+1];var T={callback:k,args:j};return u[b]=T,c(b),b++},m.clearImmediate=g}function g(k){delete u[k]}function x(k){if(w)setTimeout(x,0,k);else{var j=u[k];if(j){w=!0;try{(function(A){var T=A.callback,L=A.args;switch(L.length){case 0:T();break;case 1:T(L[0]);break;case 2:T(L[0],L[1]);break;case 3:T(L[0],L[1],L[2]);break;default:T.apply(o,L)}})(j)}finally{g(k),w=!1}}}}function N(k){k.source===l&&typeof k.data=="string"&&k.data.indexOf(p)===0&&x(+k.data.slice(p.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof br<"u"?br:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Yo);var cm=Yo.exports;const dm=Bc(cm);async function um(t,r){const s=new dm,n=s.folder("deckforge-designs");if(!n)throw new Error("Failed to create ZIP folder");for(let i=0;i<t.length;i++){const l=t[i];r==null||r(i+1,t.length);try{const o=await ya(l.canvas_data.objects,{scale:3,format:"png",includeBackground:!0}),f=`${l.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${l.id.slice(0,8)}.png`;n.file(f,o)}catch(o){console.error(`Failed to export design ${l.name}:`,o)}}return await s.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}})}function fm(t,r){const s=URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}const It="http://localhost:3000",Cr={async list(){const t=localStorage.getItem("token");return(await Be.get(`${It}/folders`,{headers:{Authorization:`Bearer ${t}`}})).data.folders},async create(t,r){const s=localStorage.getItem("token");return(await Be.post(`${It}/folders`,{name:t,color:r},{headers:{Authorization:`Bearer ${s}`}})).data.folder},async update(t,r){const s=localStorage.getItem("token");return(await Be.patch(`${It}/folders/${t}`,r,{headers:{Authorization:`Bearer ${s}`}})).data.folder},async delete(t){const r=localStorage.getItem("token");await Be.delete(`${It}/folders/${t}`,{headers:{Authorization:`Bearer ${r}`}})},async moveDesign(t,r){const s=localStorage.getItem("token");await Be.post(`${It}/folders/${t}/designs/${r}`,{},{headers:{Authorization:`Bearer ${s}`}})},async removeDesign(t,r){const s=localStorage.getItem("token");await Be.delete(`${It}/folders/${t}/designs/${r}`,{headers:{Authorization:`Bearer ${s}`}})}},ra=["#ccff00","#00ffff","#ff00ff","#ff6600","#00ff00","#ff0000","#0000ff","#ffff00"];function hm({selectedFolder:t,onFolderSelect:r}){const[s,n]=C.useState([]),[a,i]=C.useState(!0),[l,o]=C.useState(!1),[c,f]=C.useState(""),[h,p]=C.useState(null),[b,u]=C.useState("");C.useEffect(()=>{w()},[]);const w=async()=>{i(!0);try{const x=await Cr.list();n(x)}catch(x){console.error("Failed to load folders:",x)}finally{i(!1)}},d=async()=>{var x,N;if(c.trim())try{const k=ra[Math.floor(Math.random()*ra.length)],j=await Cr.create(c.trim(),k);n([...s,j]),f(""),o(!1),Oe({title:" Folder created",description:`${j.name} is ready`})}catch(k){Oe({title:"Failed to create folder",description:((N=(x=k.response)==null?void 0:x.data)==null?void 0:N.error)||"Please try again",variant:"destructive"})}},m=async x=>{if(b.trim())try{const N=await Cr.update(x,{name:b.trim()});n(s.map(k=>k.id===x?N:k)),p(null),Oe({title:" Folder renamed"})}catch{Oe({title:"Failed to rename",variant:"destructive"})}},g=async(x,N)=>{if(confirm(`Delete folder "${N}"? Designs will be moved to "All Designs".`))try{await Cr.delete(x),n(s.filter(k=>k.id!==x)),t===x&&r(null),Oe({title:" Folder deleted"})}catch{Oe({title:"Failed to delete",variant:"destructive"})}};return e.jsxs("div",{className:"w-64 bg-card border-r border-border h-full flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b border-border",children:[e.jsx("h3",{className:"font-display text-xs uppercase tracking-wider mb-3",children:"Folders"}),e.jsxs(te,{size:"sm",variant:"outline",onClick:()=>o(!l),className:"w-full gap-2",children:[e.jsx(Uc,{className:"w-4 h-4"}),"New Folder"]})]}),e.jsx(vt,{className:"flex-1",children:e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsxs("button",{onClick:()=>r(null),className:`w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors ${t===null?"bg-primary/10 text-primary border border-primary":"hover:bg-secondary border border-transparent"}`,children:[e.jsx(Hc,{className:"w-4 h-4"}),e.jsx("span",{className:"flex-1 text-left",children:"All Designs"})]}),l&&e.jsxs("div",{className:"py-2 space-y-2",children:[e.jsx(Ie,{placeholder:"Folder name...",value:c,onChange:x=>f(x.target.value),onKeyDown:x=>{x.key==="Enter"&&d(),x.key==="Escape"&&o(!1)},autoFocus:!0,className:"h-8 text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(te,{size:"sm",onClick:d,disabled:!c.trim(),className:"flex-1",children:"Create"}),e.jsx(te,{size:"sm",variant:"ghost",onClick:()=>o(!1),children:"Cancel"})]})]}),a&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(ot,{className:"w-5 h-5 animate-spin text-muted-foreground"})}),s.map(x=>e.jsx("div",{className:`group flex items-center gap-2 px-3 py-2 text-sm transition-colors ${t===x.id?"bg-primary/10 text-primary border border-primary":"hover:bg-secondary border border-transparent"}`,children:h===x.id?e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[e.jsx(Ie,{value:b,onChange:N=>u(N.target.value),onKeyDown:N=>{N.key==="Enter"&&m(x.id),N.key==="Escape"&&p(null)},className:"h-7 text-sm",autoFocus:!0}),e.jsx(te,{size:"sm",variant:"ghost",onClick:()=>m(x.id),className:"h-7 px-2",children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>r(x.id),className:"flex-1 flex items-center gap-2",children:[e.jsx(Vc,{className:"w-4 h-4",style:{color:x.color}}),e.jsx("span",{className:"truncate",children:x.name})]}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex gap-1",children:[e.jsx("button",{onClick:()=>{p(x.id),u(x.name)},className:"p-1 hover:bg-secondary",children:e.jsx(Fs,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>g(x.id,x.name),className:"p-1 hover:bg-destructive/10 text-destructive",children:e.jsx(Dt,{className:"w-3 h-3"})})]})]})},x.id))]})})]})}function pm(){const[t,r]=C.useState([]),[s,n]=C.useState(!0),[a,i]=C.useState(new Set),[l,o]=C.useState(!1),[c,f]=C.useState({current:0,total:0}),[h,p]=C.useState(null),{isAuthenticated:b,logout:u}=Zt(),{loadDesign:w,resetCanvas:d}=Se(),m=Xt(),g=h?t.filter(_=>_.folder_id===h):t;C.useEffect(()=>{if(!b){m("/auth");return}x()},[b]);const x=async()=>{n(!0);try{const _=await Er.list();r(_.designs||[])}catch(_){console.error("Failed to load designs:",_)}finally{n(!1)}},N=_=>{w(_.canvas_data),m("/")},k=async(_,R)=>{if(R.stopPropagation(),!!confirm("Delete this design? This cannot be undone."))try{await Er.delete(_),i(y=>{const D=new Set(y);return D.delete(_),D}),await x()}catch(y){console.error("Delete failed:",y),alert("Failed to delete design")}},j=(_,R)=>{R.stopPropagation(),i(y=>{const D=new Set(y);return D.has(_)?D.delete(_):D.add(_),D})},A=()=>{a.size===g.length?i(new Set):i(new Set(g.map(_=>_.id)))},T=async(_,R,y)=>{y.stopPropagation();const D="http://localhost:3000",Q=localStorage.getItem("token");try{await Be.patch(`${D}/gallery/${_}/visibility`,{is_public:!R},{headers:{Authorization:`Bearer ${Q}`}}),r(M=>M.map(Z=>Z.id===_?{...Z,is_public:!R}:Z)),Oe({title:R?" Design unpublished":" Design published",description:R?"Your design has been removed from the gallery":"Your design is now visible in the public gallery"})}catch(M){console.error("Toggle public failed:",M),Oe({title:"Failed to update visibility",description:"Please try again",variant:"destructive"})}},L=async()=>{const _=t.filter(R=>a.has(R.id));if(_.length===0){Oe({title:"No designs selected",description:"Please select at least one design to export.",variant:"destructive"});return}o(!0),f({current:0,total:_.length});try{const R=await um(_,(Q,M)=>{f({current:Q,total:M})}),D=`deckforge_designs_${Date.now()}.zip`;fm(R,D),Oe({title:" Batch export complete",description:`${_.length} design${_.length!==1?"s":""} exported successfully.`}),i(new Set)}catch(R){console.error("Batch export failed:",R),Oe({title:"Export failed",description:"Failed to export designs. Please try again.",variant:"destructive"})}finally{o(!1),f({current:0,total:0})}},O=()=>{d(),m("/")},U=async()=>{await u(),m("/auth")};if(!b)return null;const Y=a.size>0;return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card shrink-0",children:[e.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest",children:["My ",e.jsx("span",{className:"text-primary",children:"Designs"})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[Y&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.size," selected"]}),e.jsx(te,{size:"sm",variant:"outline",onClick:L,disabled:l,className:"gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-4 h-4 animate-spin"}),"Exporting ",c.current,"/",c.total]}):e.jsxs(e.Fragment,{children:[e.jsx($r,{className:"w-4 h-4"}),"Export Selected"]})})]}),e.jsxs(te,{size:"sm",variant:"outline",onClick:O,className:"gap-2",children:[e.jsx(xs,{className:"w-4 h-4"}),"New Design"]}),e.jsx(te,{size:"sm",variant:"ghost",onClick:U,children:"Logout"})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx(hm,{selectedFolder:h,onFolderSelect:p}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"container mx-auto px-6 py-8",children:s?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(ot,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):g.length===0?e.jsxs("div",{className:"text-center py-20 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-display uppercase tracking-widest mb-2",children:"No Designs Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Create your first custom deck design!"})]}),e.jsxs(te,{onClick:O,size:"lg",className:"gap-2",children:[e.jsx(xs,{className:"w-5 h-5"}),"Create Design"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx(te,{size:"sm",variant:"outline",onClick:A,className:"gap-2",children:a.size===g.length?e.jsxs(e.Fragment,{children:[e.jsx(jn,{className:"w-4 h-4"}),"Deselect All"]}):e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"w-4 h-4"}),"Select All"]})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[g.length," design",g.length!==1?"s":"",h&&" in folder"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(_=>{const R=a.has(_.id);return e.jsxs("div",{className:`group border transition-colors bg-card overflow-hidden cursor-pointer relative ${R?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary"}`,onClick:()=>N(_),children:[e.jsx("div",{className:"absolute top-2 left-2 z-10",onClick:y=>j(_.id,y),children:e.jsx("div",{className:`w-6 h-6 border-2 flex items-center justify-center transition-colors cursor-pointer ${R?"bg-primary border-primary":"bg-background border-border hover:border-primary"}`,children:R&&e.jsx(jn,{className:"w-5 h-5 text-primary-foreground"})})}),e.jsx("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden",children:_.thumbnail_url?e.jsx("img",{src:_.thumbnail_url,alt:_.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:_.name})}),_.is_public&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsxs("div",{className:"bg-primary text-primary-foreground px-2 py-1 rounded text-[10px] uppercase tracking-wider flex items-center gap-1",children:[e.jsx(Nn,{className:"w-3 h-3"}),"Public"]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-sm uppercase tracking-widest truncate",children:_.name}),_.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:_.description}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 uppercase tracking-widest",children:new Date(_.updated_at).toLocaleDateString()})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs(te,{size:"sm",variant:"outline",className:"flex-1 gap-1",onClick:y=>{y.stopPropagation(),N(_)},children:[e.jsx(Pr,{className:"w-3 h-3"}),"Open"]}),e.jsx(te,{size:"sm",variant:_.is_public?"default":"outline",onClick:y=>T(_.id,_.is_public,y),title:_.is_public?"Make Private":"Publish to Gallery",children:_.is_public?e.jsx(Nn,{className:"w-3 h-3"}):e.jsx(Ls,{className:"w-3 h-3"})}),e.jsx(te,{size:"sm",variant:"destructive",onClick:y=>k(_.id,y),children:e.jsx(Dt,{className:"w-3 h-3"})})]})})]})]},_.id)})})]})})})]})]})}const Os=[{id:"skull-flames",name:"Skull & Flames",description:"Classic skate punk aesthetic with skull and flame stickers",tags:["punk","edgy","classic"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#000000"},{type:"shape",shapeType:"rect",x:0,y:120,width:96,height:54,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ff0000"},{type:"sticker",x:28,y:80,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Skull",fill:"#ffffff",strokeWidth:0,solidFill:!0},{type:"sticker",x:10,y:200,width:30,height:30,rotation:-15,opacity:1,scaleX:1,scaleY:1,iconName:"Flame",fill:"#ff4500",strokeWidth:0,solidFill:!0},{type:"sticker",x:56,y:200,width:30,height:30,rotation:15,opacity:1,scaleX:1,scaleY:1,iconName:"Flame",fill:"#ff4500",strokeWidth:0,solidFill:!0}]},{id:"gradient-fade",name:"Gradient Fade",description:"Modern gradient design with smooth color transitions",tags:["modern","gradient","clean"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fillType:"linear-gradient",gradientStops:[{offset:0,color:"#667eea"},{offset:.5,color:"#764ba2"},{offset:1,color:"#f093fb"}],gradientAngle:180},{type:"shape",shapeType:"circle",x:23,y:122,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff",glow:{enabled:!0,radius:20,color:"#ffffff",intensity:.8}}]},{id:"retro-vinyl",name:"Retro Vinyl",description:"Vintage music-inspired design with record and music icons",tags:["retro","music","vintage"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#f4e8d8"},{type:"shape",shapeType:"rect",x:0,y:140,width:96,height:14,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#8b4513"},{type:"sticker",x:23,y:60,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Disc",fill:"#2c2c2c",strokeWidth:0,solidFill:!0},{type:"sticker",x:12,y:200,width:25,height:25,rotation:-10,opacity:1,scaleX:1,scaleY:1,iconName:"Music",fill:"#8b4513",strokeWidth:0,solidFill:!0},{type:"sticker",x:59,y:195,width:25,height:25,rotation:10,opacity:1,scaleX:1,scaleY:1,iconName:"Music",fill:"#8b4513",strokeWidth:0,solidFill:!0}]},{id:"neon-lightning",name:"Neon Lightning",description:"Electric neon design with lightning bolts",tags:["neon","electric","bold"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#1a1a2e"},{type:"sticker",x:18,y:90,width:60,height:60,rotation:15,opacity:1,scaleX:1,scaleY:1,iconName:"Zap",fill:"#00ff88",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:15,color:"#00ff88",intensity:1}},{type:"sticker",x:8,y:180,width:40,height:40,rotation:-25,opacity:.7,scaleX:1,scaleY:1,iconName:"Zap",fill:"#ff00ff",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:12,color:"#ff00ff",intensity:.9}},{type:"sticker",x:48,y:170,width:40,height:40,rotation:30,opacity:.7,scaleX:1,scaleY:1,iconName:"Zap",fill:"#00ddff",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:12,color:"#00ddff",intensity:.9}}]},{id:"minimalist-shapes",name:"Minimalist Shapes",description:"Clean geometric design with simple shapes",tags:["minimal","geometric","clean"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff"},{type:"shape",shapeType:"circle",x:8,y:70,width:80,height:80,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#000000"},{type:"sticker",x:28,y:180,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Triangle",fill:"#ff0000",strokeWidth:0,solidFill:!0}]},{id:"blank",name:"Blank Canvas",description:"Start from scratch with a clean white deck",tags:["blank","custom"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff"}]}];function mm(t){if(!t)return Os;const r=t.toLowerCase();return Os.filter(s=>s.name.toLowerCase().includes(r)||s.description.toLowerCase().includes(r)||s.tags.some(n=>n.toLowerCase().includes(r)))}function xm(){const[t,r]=C.useState(""),{loadDesign:s}=Se(),n=Xt(),a=mm(t),i=l=>{const o=Os.find(c=>c.id===l);o&&(s({objects:o.objects,name:o.name}),n("/"))};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card",children:[e.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"Templates"})]}),e.jsx("div",{className:"ml-auto flex items-center gap-4",children:e.jsx(te,{size:"sm",variant:"outline",onClick:()=>n("/"),children:"Back to Editor"})})]}),e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsx("div",{className:"max-w-md mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(Wc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Ie,{type:"text",placeholder:"Search templates...",value:t,onChange:l=>r(l.target.value),className:"pl-10"})]})}),a.length===0?e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-muted-foreground",children:"No templates found"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(l=>e.jsxs("div",{className:"group border border-border hover:border-primary transition-colors bg-card overflow-hidden cursor-pointer",onClick:()=>i(l.id),children:[e.jsxs("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden relative",children:[l.thumbnail?e.jsx("img",{src:l.thumbnail,alt:l.name,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center p-4",children:[e.jsx(it,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:l.name})]}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(te,{size:"sm",variant:"default",children:"Use Template"})})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("h3",{className:"font-display text-sm uppercase tracking-widest",children:l.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l.description}),e.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:l.tags.map(o=>e.jsx("span",{className:"px-2 py-0.5 text-[10px] uppercase tracking-wider bg-primary/10 text-primary rounded",children:o},o))})]})]},l.id))})]})]})}const ps="http://localhost:3000";function gm({designId:t}){const[r,s]=C.useState([]),[n,a]=C.useState(""),[i,l]=C.useState(!0),[o,c]=C.useState(!1),{isAuthenticated:f}=Zt();C.useEffect(()=>{h()},[t]);const h=async()=>{l(!0);try{const u=await Be.get(`${ps}/comments/${t}`);s(u.data.comments||[])}catch(u){console.error("Failed to load comments:",u)}finally{l(!1)}},p=async u=>{var w,d;if(u.preventDefault(),!f){Oe({title:"Login required",description:"Please login to comment",variant:"destructive"});return}if(n.trim()){c(!0);try{const m=localStorage.getItem("token"),g=await Be.post(`${ps}/comments/${t}`,{content:n},{headers:{Authorization:`Bearer ${m}`}});s([...r,g.data.comment]),a(""),Oe({title:" Comment posted",description:"Your comment has been added"})}catch(m){console.error("Failed to post comment:",m),Oe({title:"Failed to post comment",description:((d=(w=m.response)==null?void 0:w.data)==null?void 0:d.error)||"Please try again",variant:"destructive"})}finally{c(!1)}}},b=async u=>{if(confirm("Delete this comment?"))try{const w=localStorage.getItem("token");await Be.delete(`${ps}/comments/${u}`,{headers:{Authorization:`Bearer ${w}`}}),s(r.filter(d=>d.id!==u)),Oe({title:" Comment deleted",description:"Your comment has been removed"})}catch(w){console.error("Failed to delete comment:",w),Oe({title:"Failed to delete",description:"Please try again",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gc,{className:"w-5 h-5"}),e.jsxs("h3",{className:"font-display text-sm uppercase tracking-wider",children:["Comments (",r.length,")"]})]}),f?e.jsxs("form",{onSubmit:p,className:"space-y-2",children:[e.jsx(yl,{value:n,onChange:u=>a(u.target.value),placeholder:"Add a comment...",className:"min-h-[80px] resize-none",disabled:o}),e.jsx("div",{className:"flex justify-end",children:e.jsx(te,{type:"submit",size:"sm",disabled:!n.trim()||o,className:"gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-3 h-3 animate-spin"}),"Posting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Kc,{className:"w-3 h-3"}),"Post Comment"]})})})]}):e.jsx("div",{className:"border border-border p-4 text-center text-sm text-muted-foreground",children:"Please login to comment"}),e.jsx("div",{className:"space-y-3",children:i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ot,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):r.length===0?e.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No comments yet. Be the first to comment!"}):r.map(u=>e.jsxs("div",{className:"border border-border p-3 space-y-2 bg-secondary/50",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:u.content})}),f&&u.user_id===localStorage.getItem("userId")&&e.jsx(te,{size:"sm",variant:"ghost",onClick:()=>b(u.id),className:"shrink-0",children:e.jsx(Dt,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:e.jsx("span",{children:new Date(u.created_at).toLocaleString()})})]},u.id))})]})}const _r="http://localhost:3000";function ym(){const[t,r]=C.useState([]),[s,n]=C.useState(!0),[a,i]=C.useState("recent"),[l,o]=C.useState(new Set),[c,f]=C.useState(null),{isAuthenticated:h}=Zt(),{loadDesign:p}=Se(),b=Xt();C.useEffect(()=>{u()},[a]);const u=async()=>{n(!0);try{const m=await Be.get(`${_r}/gallery?sort=${a}&limit=50`);if(r(m.data.designs||[]),h){const g=new Set;for(const x of m.data.designs||[])try{const N=localStorage.getItem("token");(await Be.get(`${_r}/gallery/${x.id}/liked`,{headers:{Authorization:`Bearer ${N}`}})).data.liked&&g.add(x.id)}catch{}o(g)}}catch(m){console.error("Failed to load gallery:",m)}finally{n(!1)}},w=async(m,g)=>{var k,j;if(g.stopPropagation(),!h){Oe({title:"Login required",description:"Please login to like designs",variant:"destructive"}),b("/auth");return}const x=localStorage.getItem("token"),N=l.has(m);try{N?(await Be.delete(`${_r}/gallery/${m}/like`,{headers:{Authorization:`Bearer ${x}`}}),o(A=>{const T=new Set(A);return T.delete(m),T}),r(A=>A.map(T=>T.id===m?{...T,like_count:T.like_count-1}:T))):(await Be.post(`${_r}/gallery/${m}/like`,{},{headers:{Authorization:`Bearer ${x}`}}),o(A=>new Set(A).add(m)),r(A=>A.map(T=>T.id===m?{...T,like_count:T.like_count+1}:T)))}catch(A){console.error("Like failed:",A),Oe({title:"Action failed",description:((j=(k=A.response)==null?void 0:k.data)==null?void 0:j.error)||"Please try again",variant:"destructive"})}},d=(m,g)=>{g.stopPropagation(),p(m.canvas_data),b("/"),Oe({title:" Design loaded",description:"Remix and make it your own!"})};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card",children:[e.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest",children:["Design ",e.jsx("span",{className:"text-primary",children:"Gallery"})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(te,{size:"sm",variant:a==="recent"?"default":"outline",onClick:()=>i("recent"),className:"gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Recent"]}),e.jsxs(te,{size:"sm",variant:a==="popular"?"default":"outline",onClick:()=>i("popular"),className:"gap-2",children:[e.jsx(Yc,{className:"w-4 h-4"}),"Popular"]}),e.jsxs(te,{size:"sm",variant:a==="liked"?"default":"outline",onClick:()=>i("liked"),className:"gap-2",children:[e.jsx(qc,{className:"w-4 h-4"}),"Most Liked"]})]}),e.jsx(te,{size:"sm",variant:"outline",onClick:()=>b("/"),children:"Create Design"}),!h&&e.jsx(te,{size:"sm",variant:"ghost",onClick:()=>b("/auth"),children:"Login"})]})]}),e.jsx("div",{className:"container mx-auto px-6 py-8",children:s?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(ot,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):t.length===0?e.jsxs("div",{className:"text-center py-20 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-display uppercase tracking-widest mb-2",children:"No Public Designs Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Be the first to share a design with the community!"})]}),e.jsx(te,{onClick:()=>b("/"),size:"lg",children:"Create & Share"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.length," design",t.length!==1?"s":"","  Community creations"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(m=>{const g=l.has(m.id);return e.jsxs("div",{className:"group border border-border hover:border-primary transition-colors bg-card overflow-hidden cursor-pointer",onClick:()=>f(m),children:[e.jsxs("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden relative",children:[m.thumbnail_url?e.jsx("img",{src:m.thumbnail_url,alt:m.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:m.name}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[e.jsxs("div",{className:"bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white flex items-center gap-1",children:[e.jsx(Pr,{className:"w-3 h-3"}),m.view_count]}),e.jsxs("div",{className:"bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white flex items-center gap-1",children:[e.jsx(sr,{className:"w-3 h-3"}),m.like_count]})]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-sm uppercase tracking-widest truncate",children:m.name}),m.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:m.description}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 uppercase tracking-widest",children:new Date(m.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(te,{size:"sm",variant:"outline",className:"flex-1 gap-1",onClick:x=>d(m,x),children:[e.jsx(kn,{className:"w-3 h-3"}),"Remix"]}),e.jsx(te,{size:"sm",variant:g?"default":"outline",onClick:x=>w(m.id,x),className:g?"text-red-500":"",children:e.jsx(sr,{className:`w-3 h-3 ${g?"fill-current":""}`})})]})]})]},m.id)})})]})}),c&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>f(null)}),e.jsxs("div",{className:"relative bg-card border-2 border-border shadow-xl w-full max-w-4xl max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-lg uppercase tracking-wider",children:c.name}),c.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:c.description})]}),e.jsx("button",{onClick:()=>f(null),className:"text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(pr,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden border border-border",children:c.thumbnail_url?e.jsx("img",{src:c.thumbnail_url,alt:c.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:c.name})}),e.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-border",children:[e.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Pr,{className:"w-4 h-4"}),c.view_count," views"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(sr,{className:"w-4 h-4"}),c.like_count," likes"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(te,{size:"sm",variant:"outline",onClick:m=>{m.stopPropagation(),d(c,m),f(null)},className:"gap-2",children:[e.jsx(kn,{className:"w-4 h-4"}),"Remix"]}),e.jsx(te,{size:"sm",variant:l.has(c.id)?"default":"outline",onClick:m=>w(c.id,m),children:e.jsx(sr,{className:`w-4 h-4 ${l.has(c.id)?"fill-current":""}`})})]})]}),e.jsx(gm,{designId:c.id})]})]})]})]})}function vm(){const{token:t}=Qc(),r=Xt(),{loadDesign:s}=Se(),[n,a]=C.useState(null),[i,l]=C.useState(!0),[o,c]=C.useState(null);C.useEffect(()=>{t&&f()},[t]);const f=async()=>{var h,p;if(t){l(!0),c(null);try{const b=await vl.getSharedDesign(t);a(b),s(b.canvas_data)}catch(b){console.error("Failed to load shared design:",b),c(((p=(h=b.response)==null?void 0:h.data)==null?void 0:p.error)||"Failed to load shared design")}finally{l(!1)}}};return i?e.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(ot,{className:"w-12 h-12 mx-auto animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading shared design..."})]})}):o||!n?e.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[e.jsx(Zc,{className:"w-12 h-12 mx-auto text-destructive"}),e.jsx("h2",{className:"font-display text-xl uppercase tracking-wider",children:"Design Not Found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o||"This shared design link may have been revoked or does not exist."}),e.jsxs(te,{onClick:()=>r("/"),className:"gap-2",children:[e.jsx(Xc,{className:"w-4 h-4"}),"Go to DeckForge"]})]})}):e.jsxs("div",{className:"h-screen w-screen flex flex-col bg-background overflow-hidden",children:[e.jsxs("header",{className:"h-12 border-b border-border flex items-center px-4 bg-card shrink-0",children:[e.jsxs("h1",{className:"font-display text-lg uppercase tracking-widest text-foreground",children:["Deck",e.jsx("span",{className:"text-primary",children:"Forge"})]}),e.jsx("div",{className:"ml-4 flex items-center gap-2",children:e.jsx("span",{className:"tag-brutal",children:"Shared"})}),e.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("h2",{className:"text-sm font-medium",children:n.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["View only  Created ",new Date(n.created_at).toLocaleDateString()]})]}),e.jsx(te,{size:"sm",variant:"outline",onClick:()=>r("/"),className:"gap-2",children:"Create Your Own"})]})]}),e.jsx("div",{className:"flex-1 flex overflow-hidden",children:e.jsx(ms,{})}),e.jsx("footer",{className:"h-10 border-t border-border flex items-center justify-center px-4 bg-card shrink-0",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Made with ",e.jsx("span",{className:"text-primary",children:"DeckForge"}),"  Fingerboard Graphics Editor"]})})]})}const bm=()=>{const t=Jc();return C.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),e.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},wm=new Xf,jm=()=>e.jsx(eh,{children:e.jsx(Jf,{client:wm,children:e.jsxs(kf,{children:[e.jsx(Pd,{}),e.jsx(Fd,{}),e.jsx(ed,{children:e.jsxs(td,{children:[e.jsx(kt,{path:"/",element:e.jsx(om,{})}),e.jsx(kt,{path:"/auth",element:e.jsx(lm,{})}),e.jsx(kt,{path:"/designs",element:e.jsx(pm,{})}),e.jsx(kt,{path:"/templates",element:e.jsx(xm,{})}),e.jsx(kt,{path:"/gallery",element:e.jsx(ym,{})}),e.jsx(kt,{path:"/share/:token",element:e.jsx(vm,{})}),e.jsx(kt,{path:"*",element:e.jsx(bm,{})})]})})]})})});Oa(document.getElementById("root")).render(e.jsx(jm,{}));export{ve as S};
