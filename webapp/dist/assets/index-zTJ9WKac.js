const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/modals-CyytcF9U.js","assets/vendor-ui-VuZYH6Zg.js","assets/vendor-supabase-CoxeBSpk.js","assets/AnimationPreview-I3rKHruK.js","assets/vendor-react-CEz1CPY6.js"])))=>i.map(i=>d[i]);
var uc=Object.defineProperty;var Hn=e=>{throw TypeError(e)};var fc=(e,r,s)=>r in e?uc(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s;var ur=(e,r,s)=>fc(e,typeof r!="symbol"?r+"":r,s),Ns=(e,r,s)=>r.has(e)||Hn("Cannot "+s);var V=(e,r,s)=>(Ns(e,r,"read from private field"),s?s.call(e):r.get(e)),Ne=(e,r,s)=>r.has(e)?Hn("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,s),ge=(e,r,s,n)=>(Ns(e,r,"write to private field"),n?n.call(e,s):r.set(e,s),s),De=(e,r,s)=>(Ns(e,r,"access private method"),s);var Ar=(e,r,s,n)=>({set _(a){ge(e,r,a,s)},get _(){return V(e,r,n)}});import{j as t,c as nn,a as nt,u as ke,P as be,B as hc,b as rt,d as Nr,e as xe,f as Zt,R as pc,g as an,h as Be,i as mc,k as we,l as xc,m as gc,D as on,n as Mt,o as se,p as Ae,S as ct,q as ln,r as Lr,s as Xt,t as Qt,v as rr,w as Cs,x as Va,y as Ha,z as Wa,F as Ga,I as Ie,A as yc,L as he,C as Ka,E as vc,G as bc,H as wc,J as jc,K as Nc,M as Cc,N as kc,W as Rs,O as Mr,Q as Ya,T as Wn,U as Sc,V as Le,X as Re,Y as _c,Z as Ec}from"./modals-CyytcF9U.js";import{a as Cr,r as N,b as Pe,X as sr,am as Ac,an as Gn,ao as Tc,ap as Pc,aa as cn,aq as qa,ar as Za,af as Xa,as as dn,at as Qa,ae as qr,a5 as Ja,au as $r,av as Rc,aw as Oc,ax as Ic,ay as Dc,az as Fc,aA as zc,aB as Lc,V as Kn,aC as Mc,aD as $c,aE as Bc,aF as Uc,g as pr,aG as Vc,aH as Hc,aI as Wc,p as Gc,D as Kc,F as Yc,B as qc,o as Zc,n as Xc,aJ as Qc,aK as Jc,z as ed,y as td,x as ei,w as Br,t as ti,s as fr,q as bt,H as rd,Q as sd,P as nd,O as ad,N as id,K as od,J as ld,I as ri,A as cd,aL as dd,aM as ud,aN as fd,aO as hd,a2 as pd,a1 as md,a0 as xd,$ as gd,_ as yd,Y as vd,E as mr,aP as bd,aQ as wd,aR as jd,aS as Nd,u as de,a3 as dt,T as Nt,j as Zr,i as si,a8 as Cd,aT as ni,h as Yn,L as ai,aU as kd,aV as Sd,aW as Os,ad as ii,aX as _d,ah as Xr,a9 as Ed,aY as Ad,aZ as Td,a_ as Pd,a$ as Rd,b0 as Od,b1 as Id,b2 as Dd,b3 as Fd,m as zd,G as Ld,b4 as oi,U as li,c as ci,b5 as Md,a6 as un,a7 as di,b6 as $d,b7 as Bd,b8 as qn,ab as Ud,b9 as Vd,ba as Zn,bb as Hd,bc as Tr,bd as Wd,be as Gd,bf as Kd,bg as Yd,bh as Xn,bi as Qn,bj as qd,bk as Zd,bl as Xd,bm as Qd,C as Jn,bn as Jd,bo as eu}from"./vendor-ui-VuZYH6Zg.js";import{u as nr,a as tu,b as ru,B as su,R as nu,c as Et}from"./vendor-react-CEz1CPY6.js";import"./vendor-supabase-CoxeBSpk.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var ui,ea=Cr;ui=ea.createRoot,ea.hydrateRoot;function ta(e){const r=au(e),s=N.forwardRef((n,a)=>{const{children:i,...l}=n,o=N.Children.toArray(i),c=o.find(ou);if(c){const f=c.props.children,p=o.map(x=>x===c?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:x);return t.jsx(r,{...l,ref:a,children:N.isValidElement(f)?N.cloneElement(f,void 0,p):null})}return t.jsx(r,{...l,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}function au(e){const r=N.forwardRef((s,n)=>{const{children:a,...i}=s;if(N.isValidElement(a)){const l=cu(a),o=lu(i,a.props);return a.type!==N.Fragment&&(o.ref=n?nn(n,l):l),N.cloneElement(a,o)}return N.Children.count(a)>1?N.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var iu=Symbol("radix.slottable");function ou(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===iu}function lu(e,r){const s={...r};for(const n in r){const a=e[n],i=r[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function cu(e){var n,a;let r=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function Qr(e){const r=e+"CollectionProvider",[s,n]=nt(r),[a,i]=s(r,{collectionRef:{current:null},itemMap:new Map}),l=d=>{const{scope:h,children:g}=d,u=Pe.useRef(null),j=Pe.useRef(new Map).current;return t.jsx(a,{scope:h,itemMap:j,collectionRef:u,children:g})};l.displayName=r;const o=e+"CollectionSlot",c=ta(o),f=Pe.forwardRef((d,h)=>{const{scope:g,children:u}=d,j=i(o,g),C=ke(h,j.collectionRef);return t.jsx(c,{ref:C,children:u})});f.displayName=o;const p=e+"CollectionItemSlot",x="data-radix-collection-item",b=ta(p),m=Pe.forwardRef((d,h)=>{const{scope:g,children:u,...j}=d,C=Pe.useRef(null),S=ke(h,C),A=i(p,g);return Pe.useEffect(()=>(A.itemMap.set(C,{ref:C,...j}),()=>void A.itemMap.delete(C))),t.jsx(b,{[x]:"",ref:S,children:u})});m.displayName=p;function w(d){const h=i(e+"CollectionConsumer",d);return Pe.useCallback(()=>{const u=h.collectionRef.current;if(!u)return[];const j=Array.from(u.querySelectorAll(`[${x}]`));return Array.from(h.itemMap.values()).sort((A,T)=>j.indexOf(A.ref.current)-j.indexOf(T.ref.current))},[h.collectionRef,h.itemMap])}return[{Provider:l,Slot:f,ItemSlot:m},w,n]}var fi=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),du="VisuallyHidden",Jr=N.forwardRef((e,r)=>t.jsx(be.span,{...e,ref:r,style:{...fi,...e.style}}));Jr.displayName=du;var uu=Jr,fn="ToastProvider",[hn,fu,hu]=Qr("Toast"),[hi]=nt("Toast",[hu]),[pu,es]=hi(fn),pi=e=>{const{__scopeToast:r,label:s="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=e,[o,c]=N.useState(null),[f,p]=N.useState(0),x=N.useRef(!1),b=N.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${fn}\`. Expected non-empty \`string\`.`),t.jsx(hn.Provider,{scope:r,children:t.jsx(pu,{scope:r,label:s,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:f,viewport:o,onViewportChange:c,onToastAdd:N.useCallback(()=>p(m=>m+1),[]),onToastRemove:N.useCallback(()=>p(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:b,children:l})})};pi.displayName=fn;var mi="ToastViewport",mu=["F8"],Is="toast.viewportPause",Ds="toast.viewportResume",xi=N.forwardRef((e,r)=>{const{__scopeToast:s,hotkey:n=mu,label:a="Notifications ({hotkey})",...i}=e,l=es(mi,s),o=fu(s),c=N.useRef(null),f=N.useRef(null),p=N.useRef(null),x=N.useRef(null),b=ke(r,x,l.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=l.toastCount>0;N.useEffect(()=>{const h=g=>{var j;n.length!==0&&n.every(C=>g[C]||g.code===C)&&((j=x.current)==null||j.focus())};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[n]),N.useEffect(()=>{const h=c.current,g=x.current;if(w&&h&&g){const u=()=>{if(!l.isClosePausedRef.current){const A=new CustomEvent(Is);g.dispatchEvent(A),l.isClosePausedRef.current=!0}},j=()=>{if(l.isClosePausedRef.current){const A=new CustomEvent(Ds);g.dispatchEvent(A),l.isClosePausedRef.current=!1}},C=A=>{!h.contains(A.relatedTarget)&&j()},S=()=>{h.contains(document.activeElement)||j()};return h.addEventListener("focusin",u),h.addEventListener("focusout",C),h.addEventListener("pointermove",u),h.addEventListener("pointerleave",S),window.addEventListener("blur",u),window.addEventListener("focus",j),()=>{h.removeEventListener("focusin",u),h.removeEventListener("focusout",C),h.removeEventListener("pointermove",u),h.removeEventListener("pointerleave",S),window.removeEventListener("blur",u),window.removeEventListener("focus",j)}}},[w,l.isClosePausedRef]);const d=N.useCallback(({tabbingDirection:h})=>{const u=o().map(j=>{const C=j.ref.current,S=[C,...Eu(C)];return h==="forwards"?S:S.reverse()});return(h==="forwards"?u.reverse():u).flat()},[o]);return N.useEffect(()=>{const h=x.current;if(h){const g=u=>{var S,A,T;const j=u.altKey||u.ctrlKey||u.metaKey;if(u.key==="Tab"&&!j){const z=document.activeElement,O=u.shiftKey;if(u.target===h&&O){(S=f.current)==null||S.focus();return}const k=d({tabbingDirection:O?"backwards":"forwards"}),P=k.findIndex(y=>y===z);ks(k.slice(P+1))?u.preventDefault():O?(A=f.current)==null||A.focus():(T=p.current)==null||T.focus()}};return h.addEventListener("keydown",g),()=>h.removeEventListener("keydown",g)}},[o,d]),t.jsxs(hc,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&t.jsx(Fs,{ref:f,onFocusFromOutsideViewport:()=>{const h=d({tabbingDirection:"forwards"});ks(h)}}),t.jsx(hn.Slot,{scope:s,children:t.jsx(be.ol,{tabIndex:-1,...i,ref:b})}),w&&t.jsx(Fs,{ref:p,onFocusFromOutsideViewport:()=>{const h=d({tabbingDirection:"backwards"});ks(h)}})]})});xi.displayName=mi;var gi="ToastFocusProxy",Fs=N.forwardRef((e,r)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...a}=e,i=es(gi,s);return t.jsx(Jr,{tabIndex:0,...a,ref:r,style:{position:"fixed"},onFocus:l=>{var f;const o=l.relatedTarget;!((f=i.viewport)!=null&&f.contains(o))&&n()}})});Fs.displayName=gi;var kr="Toast",xu="toast.swipeStart",gu="toast.swipeMove",yu="toast.swipeCancel",vu="toast.swipeEnd",yi=N.forwardRef((e,r)=>{const{forceMount:s,open:n,defaultOpen:a,onOpenChange:i,...l}=e,[o,c]=rt({prop:n,defaultProp:a??!0,onChange:i,caller:kr});return t.jsx(Nr,{present:s||o,children:t.jsx(ju,{open:o,...l,ref:r,onClose:()=>c(!1),onPause:Zt(e.onPause),onResume:Zt(e.onResume),onSwipeStart:xe(e.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xe(e.onSwipeMove,f=>{const{x:p,y:x}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:xe(e.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xe(e.onSwipeEnd,f=>{const{x:p,y:x}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),c(!1)})})})});yi.displayName=kr;var[bu,wu]=hi(kr,{onClose(){}}),ju=N.forwardRef((e,r)=>{const{__scopeToast:s,type:n="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:f,onSwipeStart:p,onSwipeMove:x,onSwipeCancel:b,onSwipeEnd:m,...w}=e,d=es(kr,s),[h,g]=N.useState(null),u=ke(r,y=>g(y)),j=N.useRef(null),C=N.useRef(null),S=a||d.duration,A=N.useRef(0),T=N.useRef(S),z=N.useRef(0),{onToastAdd:O,onToastRemove:B}=d,K=Zt(()=>{var I;(h==null?void 0:h.contains(document.activeElement))&&((I=d.viewport)==null||I.focus()),l()}),k=N.useCallback(y=>{!y||y===1/0||(window.clearTimeout(z.current),A.current=new Date().getTime(),z.current=window.setTimeout(K,y))},[K]);N.useEffect(()=>{const y=d.viewport;if(y){const I=()=>{k(T.current),f==null||f()},X=()=>{const M=new Date().getTime()-A.current;T.current=T.current-M,window.clearTimeout(z.current),c==null||c()};return y.addEventListener(Is,X),y.addEventListener(Ds,I),()=>{y.removeEventListener(Is,X),y.removeEventListener(Ds,I)}}},[d.viewport,S,c,f,k]),N.useEffect(()=>{i&&!d.isClosePausedRef.current&&k(S)},[i,S,d.isClosePausedRef,k]),N.useEffect(()=>(O(),()=>B()),[O,B]);const P=N.useMemo(()=>h?ki(h):null,[h]);return d.viewport?t.jsxs(t.Fragment,{children:[P&&t.jsx(Nu,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:P}),t.jsx(bu,{scope:s,onClose:K,children:Cr.createPortal(t.jsx(hn.ItemSlot,{scope:s,children:t.jsx(pc,{asChild:!0,onEscapeKeyDown:xe(o,()=>{d.isFocusedToastEscapeKeyDownRef.current||K(),d.isFocusedToastEscapeKeyDownRef.current=!1}),children:t.jsx(be.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":d.swipeDirection,...w,ref:u,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:xe(e.onKeyDown,y=>{y.key==="Escape"&&(o==null||o(y.nativeEvent),y.nativeEvent.defaultPrevented||(d.isFocusedToastEscapeKeyDownRef.current=!0,K()))}),onPointerDown:xe(e.onPointerDown,y=>{y.button===0&&(j.current={x:y.clientX,y:y.clientY})}),onPointerMove:xe(e.onPointerMove,y=>{if(!j.current)return;const I=y.clientX-j.current.x,X=y.clientY-j.current.y,M=!!C.current,q=["left","right"].includes(d.swipeDirection),U=["left","up"].includes(d.swipeDirection)?Math.min:Math.max,ie=q?U(0,I):0,L=q?0:U(0,X),F=y.pointerType==="touch"?10:2,oe={x:ie,y:L},te={originalEvent:y,delta:oe};M?(C.current=oe,Pr(gu,x,te,{discrete:!1})):ra(oe,d.swipeDirection,F)?(C.current=oe,Pr(xu,p,te,{discrete:!1}),y.target.setPointerCapture(y.pointerId)):(Math.abs(I)>F||Math.abs(X)>F)&&(j.current=null)}),onPointerUp:xe(e.onPointerUp,y=>{const I=C.current,X=y.target;if(X.hasPointerCapture(y.pointerId)&&X.releasePointerCapture(y.pointerId),C.current=null,j.current=null,I){const M=y.currentTarget,q={originalEvent:y,delta:I};ra(I,d.swipeDirection,d.swipeThreshold)?Pr(vu,m,q,{discrete:!0}):Pr(yu,b,q,{discrete:!0}),M.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),d.viewport)})]}):null}),Nu=e=>{const{__scopeToast:r,children:s,...n}=e,a=es(kr,r),[i,l]=N.useState(!1),[o,c]=N.useState(!1);return Su(()=>l(!0)),N.useEffect(()=>{const f=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(f)},[]),o?null:t.jsx(an,{asChild:!0,children:t.jsx(Jr,{...n,children:i&&t.jsxs(t.Fragment,{children:[a.label," ",s]})})})},Cu="ToastTitle",vi=N.forwardRef((e,r)=>{const{__scopeToast:s,...n}=e;return t.jsx(be.div,{...n,ref:r})});vi.displayName=Cu;var ku="ToastDescription",bi=N.forwardRef((e,r)=>{const{__scopeToast:s,...n}=e;return t.jsx(be.div,{...n,ref:r})});bi.displayName=ku;var wi="ToastAction",ji=N.forwardRef((e,r)=>{const{altText:s,...n}=e;return s.trim()?t.jsx(Ci,{altText:s,asChild:!0,children:t.jsx(pn,{...n,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${wi}\`. Expected non-empty \`string\`.`),null)});ji.displayName=wi;var Ni="ToastClose",pn=N.forwardRef((e,r)=>{const{__scopeToast:s,...n}=e,a=wu(Ni,s);return t.jsx(Ci,{asChild:!0,children:t.jsx(be.button,{type:"button",...n,ref:r,onClick:xe(e.onClick,a.onClose)})})});pn.displayName=Ni;var Ci=N.forwardRef((e,r)=>{const{__scopeToast:s,altText:n,...a}=e;return t.jsx(be.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:r})});function ki(e){const r=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&r.push(n.textContent),_u(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=n.dataset.radixToastAnnounceAlt;l&&r.push(l)}else r.push(...ki(n))}}),r}function Pr(e,r,s,{discrete:n}){const a=s.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});r&&a.addEventListener(e,r,{once:!0}),n?mc(a,i):a.dispatchEvent(i)}var ra=(e,r,s=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return r==="left"||r==="right"?i&&n>s:!i&&a>s};function Su(e=()=>{}){const r=Zt(e);Be(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(r)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[r])}function _u(e){return e.nodeType===e.ELEMENT_NODE}function Eu(e){const r=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function ks(e){const r=document.activeElement;return e.some(s=>s===r?!0:(s.focus(),document.activeElement!==r))}var Au=pi,Si=xi,_i=yi,Ei=vi,Ai=bi,Ti=ji,Pi=pn;const Tu=Au,Ri=N.forwardRef(({className:e,...r},s)=>t.jsx(Si,{ref:s,className:we("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...r}));Ri.displayName=Si.displayName;const Pu=xc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Oi=N.forwardRef(({className:e,variant:r,...s},n)=>t.jsx(_i,{ref:n,className:we(Pu({variant:r}),e),...s}));Oi.displayName=_i.displayName;const Ru=N.forwardRef(({className:e,...r},s)=>t.jsx(Ti,{ref:s,className:we("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...r}));Ru.displayName=Ti.displayName;const Ii=N.forwardRef(({className:e,...r},s)=>t.jsx(Pi,{ref:s,className:we("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...r,children:t.jsx(sr,{className:"h-4 w-4"})}));Ii.displayName=Pi.displayName;const Di=N.forwardRef(({className:e,...r},s)=>t.jsx(Ei,{ref:s,className:we("text-sm font-semibold",e),...r}));Di.displayName=Ei.displayName;const Fi=N.forwardRef(({className:e,...r},s)=>t.jsx(Ai,{ref:s,className:we("text-sm opacity-90",e),...r}));Fi.displayName=Ai.displayName;function Ou(){const{toasts:e}=gc();return t.jsxs(Tu,{children:[e.map(function({id:r,title:s,description:n,action:a,...i}){return t.jsxs(Oi,{...i,children:[t.jsxs("div",{className:"grid gap-1",children:[s&&t.jsx(Di,{children:s}),n&&t.jsx(Fi,{children:n})]}),a,t.jsx(Ii,{})]},r)}),t.jsx(Ri,{})]})}var sa=["light","dark"],Iu="(prefers-color-scheme: dark)",Du=N.createContext(void 0),Fu={setTheme:e=>{},themes:[]},zu=()=>{var e;return(e=N.useContext(Du))!=null?e:Fu};N.memo(({forcedTheme:e,storageKey:r,attribute:s,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:l,attrs:o,nonce:c})=>{let f=i==="system",p=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,x=a?sa.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",b=(w,d=!1,h=!0)=>{let g=l?l[w]:w,u=d?w+"|| ''":`'${g}'`,j="";return a&&h&&!d&&sa.includes(w)&&(j+=`d.style.colorScheme = '${w}';`),s==="class"?d||g?j+=`c.add(${u})`:j+="null":g&&(j+=`d[s](n,${u})`),j},m=e?`!function(){${p}${b(e)}}()`:n?`!function(){try{${p}var e=localStorage.getItem('${r}');if('system'===e||(!e&&${f})){var t='${Iu}',m=window.matchMedia(t);if(m.media!==t||m.matches){${b("dark")}}else{${b("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${b(l?"x[e]":"e",!0)}}${f?"":"else{"+b(i,!1,!1)+"}"}${x}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${r}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${b(l?"x[e]":"e",!0)}}else{${b(i,!1,!1)};}${x}}catch(t){}}();`;return N.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});const Lu=({...e})=>{const{theme:r="system"}=zu();return t.jsx(Ac,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},Mu=["top","right","bottom","left"],wt=Math.min,Me=Math.max,Ur=Math.round,Rr=Math.floor,tt=e=>({x:e,y:e}),$u={left:"right",right:"left",bottom:"top",top:"bottom"},Bu={start:"end",end:"start"};function zs(e,r,s){return Me(e,wt(r,s))}function ut(e,r){return typeof e=="function"?e(r):e}function ft(e){return e.split("-")[0]}function ar(e){return e.split("-")[1]}function mn(e){return e==="x"?"y":"x"}function xn(e){return e==="y"?"height":"width"}const Uu=new Set(["top","bottom"]);function et(e){return Uu.has(ft(e))?"y":"x"}function gn(e){return mn(et(e))}function Vu(e,r,s){s===void 0&&(s=!1);const n=ar(e),a=gn(e),i=xn(a);let l=a==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return r.reference[i]>r.floating[i]&&(l=Vr(l)),[l,Vr(l)]}function Hu(e){const r=Vr(e);return[Ls(e),r,Ls(r)]}function Ls(e){return e.replace(/start|end/g,r=>Bu[r])}const na=["left","right"],aa=["right","left"],Wu=["top","bottom"],Gu=["bottom","top"];function Ku(e,r,s){switch(e){case"top":case"bottom":return s?r?aa:na:r?na:aa;case"left":case"right":return r?Wu:Gu;default:return[]}}function Yu(e,r,s,n){const a=ar(e);let i=Ku(ft(e),s==="start",n);return a&&(i=i.map(l=>l+"-"+a),r&&(i=i.concat(i.map(Ls)))),i}function Vr(e){return e.replace(/left|right|bottom|top/g,r=>$u[r])}function qu(e){return{top:0,right:0,bottom:0,left:0,...e}}function zi(e){return typeof e!="number"?qu(e):{top:e,right:e,bottom:e,left:e}}function Hr(e){const{x:r,y:s,width:n,height:a}=e;return{width:n,height:a,top:s,left:r,right:r+n,bottom:s+a,x:r,y:s}}function ia(e,r,s){let{reference:n,floating:a}=e;const i=et(r),l=gn(r),o=xn(l),c=ft(r),f=i==="y",p=n.x+n.width/2-a.width/2,x=n.y+n.height/2-a.height/2,b=n[o]/2-a[o]/2;let m;switch(c){case"top":m={x:p,y:n.y-a.height};break;case"bottom":m={x:p,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:x};break;case"left":m={x:n.x-a.width,y:x};break;default:m={x:n.x,y:n.y}}switch(ar(r)){case"start":m[l]-=b*(s&&f?-1:1);break;case"end":m[l]+=b*(s&&f?-1:1);break}return m}async function Zu(e,r){var s;r===void 0&&(r={});const{x:n,y:a,platform:i,rects:l,elements:o,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:x="floating",altBoundary:b=!1,padding:m=0}=ut(r,e),w=zi(m),h=o[b?x==="floating"?"reference":"floating":x],g=Hr(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(h)))==null||s?h:h.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:f,rootBoundary:p,strategy:c})),u=x==="floating"?{x:n,y:a,width:l.floating.width,height:l.floating.height}:l.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),C=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},S=Hr(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:u,offsetParent:j,strategy:c}):u);return{top:(g.top-S.top+w.top)/C.y,bottom:(S.bottom-g.bottom+w.bottom)/C.y,left:(g.left-S.left+w.left)/C.x,right:(S.right-g.right+w.right)/C.x}}const Xu=async(e,r,s)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:l}=s,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(r));let f=await l.getElementRects({reference:e,floating:r,strategy:a}),{x:p,y:x}=ia(f,n,c),b=n,m={},w=0;for(let h=0;h<o.length;h++){var d;const{name:g,fn:u}=o[h],{x:j,y:C,data:S,reset:A}=await u({x:p,y:x,initialPlacement:n,placement:b,strategy:a,middlewareData:m,rects:f,platform:{...l,detectOverflow:(d=l.detectOverflow)!=null?d:Zu},elements:{reference:e,floating:r}});p=j??p,x=C??x,m={...m,[g]:{...m[g],...S}},A&&w<=50&&(w++,typeof A=="object"&&(A.placement&&(b=A.placement),A.rects&&(f=A.rects===!0?await l.getElementRects({reference:e,floating:r,strategy:a}):A.rects),{x:p,y:x}=ia(f,b,c)),h=-1)}return{x:p,y:x,placement:b,strategy:a,middlewareData:m}},Qu=e=>({name:"arrow",options:e,async fn(r){const{x:s,y:n,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=r,{element:f,padding:p=0}=ut(e,r)||{};if(f==null)return{};const x=zi(p),b={x:s,y:n},m=gn(a),w=xn(m),d=await l.getDimensions(f),h=m==="y",g=h?"top":"left",u=h?"bottom":"right",j=h?"clientHeight":"clientWidth",C=i.reference[w]+i.reference[m]-b[m]-i.floating[w],S=b[m]-i.reference[m],A=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let T=A?A[j]:0;(!T||!await(l.isElement==null?void 0:l.isElement(A)))&&(T=o.floating[j]||i.floating[w]);const z=C/2-S/2,O=T/2-d[w]/2-1,B=wt(x[g],O),K=wt(x[u],O),k=B,P=T-d[w]-K,y=T/2-d[w]/2+z,I=zs(k,y,P),X=!c.arrow&&ar(a)!=null&&y!==I&&i.reference[w]/2-(y<k?B:K)-d[w]/2<0,M=X?y<k?y-k:y-P:0;return{[m]:b[m]+M,data:{[m]:I,centerOffset:y-I-M,...X&&{alignmentOffset:M}},reset:X}}}),Ju=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(r){var s,n;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:f}=r,{mainAxis:p=!0,crossAxis:x=!0,fallbackPlacements:b,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:d=!0,...h}=ut(e,r);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const g=ft(a),u=et(o),j=ft(o)===o,C=await(c.isRTL==null?void 0:c.isRTL(f.floating)),S=b||(j||!d?[Vr(o)]:Hu(o)),A=w!=="none";!b&&A&&S.push(...Yu(o,d,w,C));const T=[o,...S],z=await c.detectOverflow(r,h),O=[];let B=((n=i.flip)==null?void 0:n.overflows)||[];if(p&&O.push(z[g]),x){const y=Vu(a,l,C);O.push(z[y[0]],z[y[1]])}if(B=[...B,{placement:a,overflows:O}],!O.every(y=>y<=0)){var K,k;const y=(((K=i.flip)==null?void 0:K.index)||0)+1,I=T[y];if(I&&(!(x==="alignment"?u!==et(I):!1)||B.every(q=>et(q.placement)===u?q.overflows[0]>0:!0)))return{data:{index:y,overflows:B},reset:{placement:I}};let X=(k=B.filter(M=>M.overflows[0]<=0).sort((M,q)=>M.overflows[1]-q.overflows[1])[0])==null?void 0:k.placement;if(!X)switch(m){case"bestFit":{var P;const M=(P=B.filter(q=>{if(A){const U=et(q.placement);return U===u||U==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(U=>U>0).reduce((U,ie)=>U+ie,0)]).sort((q,U)=>q[1]-U[1])[0])==null?void 0:P[0];M&&(X=M);break}case"initialPlacement":X=o;break}if(a!==X)return{reset:{placement:X}}}return{}}}};function oa(e,r){return{top:e.top-r.height,right:e.right-r.width,bottom:e.bottom-r.height,left:e.left-r.width}}function la(e){return Mu.some(r=>e[r]>=0)}const ef=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(r){const{rects:s,platform:n}=r,{strategy:a="referenceHidden",...i}=ut(e,r);switch(a){case"referenceHidden":{const l=await n.detectOverflow(r,{...i,elementContext:"reference"}),o=oa(l,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:la(o)}}}case"escaped":{const l=await n.detectOverflow(r,{...i,altBoundary:!0}),o=oa(l,s.floating);return{data:{escapedOffsets:o,escaped:la(o)}}}default:return{}}}}},Li=new Set(["left","top"]);async function tf(e,r){const{placement:s,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),l=ft(s),o=ar(s),c=et(s)==="y",f=Li.has(l)?-1:1,p=i&&c?-1:1,x=ut(r,e);let{mainAxis:b,crossAxis:m,alignmentAxis:w}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return o&&typeof w=="number"&&(m=o==="end"?w*-1:w),c?{x:m*p,y:b*f}:{x:b*f,y:m*p}}const rf=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(r){var s,n;const{x:a,y:i,placement:l,middlewareData:o}=r,c=await tf(r,e);return l===((s=o.offset)==null?void 0:s.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},sf=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(r){const{x:s,y:n,placement:a,platform:i}=r,{mainAxis:l=!0,crossAxis:o=!1,limiter:c={fn:g=>{let{x:u,y:j}=g;return{x:u,y:j}}},...f}=ut(e,r),p={x:s,y:n},x=await i.detectOverflow(r,f),b=et(ft(a)),m=mn(b);let w=p[m],d=p[b];if(l){const g=m==="y"?"top":"left",u=m==="y"?"bottom":"right",j=w+x[g],C=w-x[u];w=zs(j,w,C)}if(o){const g=b==="y"?"top":"left",u=b==="y"?"bottom":"right",j=d+x[g],C=d-x[u];d=zs(j,d,C)}const h=c.fn({...r,[m]:w,[b]:d});return{...h,data:{x:h.x-s,y:h.y-n,enabled:{[m]:l,[b]:o}}}}}},nf=function(e){return e===void 0&&(e={}),{options:e,fn(r){const{x:s,y:n,placement:a,rects:i,middlewareData:l}=r,{offset:o=0,mainAxis:c=!0,crossAxis:f=!0}=ut(e,r),p={x:s,y:n},x=et(a),b=mn(x);let m=p[b],w=p[x];const d=ut(o,r),h=typeof d=="number"?{mainAxis:d,crossAxis:0}:{mainAxis:0,crossAxis:0,...d};if(c){const j=b==="y"?"height":"width",C=i.reference[b]-i.floating[j]+h.mainAxis,S=i.reference[b]+i.reference[j]-h.mainAxis;m<C?m=C:m>S&&(m=S)}if(f){var g,u;const j=b==="y"?"width":"height",C=Li.has(ft(a)),S=i.reference[x]-i.floating[j]+(C&&((g=l.offset)==null?void 0:g[x])||0)+(C?0:h.crossAxis),A=i.reference[x]+i.reference[j]+(C?0:((u=l.offset)==null?void 0:u[x])||0)-(C?h.crossAxis:0);w<S?w=S:w>A&&(w=A)}return{[b]:m,[x]:w}}}},af=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(r){var s,n;const{placement:a,rects:i,platform:l,elements:o}=r,{apply:c=()=>{},...f}=ut(e,r),p=await l.detectOverflow(r,f),x=ft(a),b=ar(a),m=et(a)==="y",{width:w,height:d}=i.floating;let h,g;x==="top"||x==="bottom"?(h=x,g=b===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(g=x,h=b==="end"?"top":"bottom");const u=d-p.top-p.bottom,j=w-p.left-p.right,C=wt(d-p[h],u),S=wt(w-p[g],j),A=!r.middlewareData.shift;let T=C,z=S;if((s=r.middlewareData.shift)!=null&&s.enabled.x&&(z=j),(n=r.middlewareData.shift)!=null&&n.enabled.y&&(T=u),A&&!b){const B=Me(p.left,0),K=Me(p.right,0),k=Me(p.top,0),P=Me(p.bottom,0);m?z=w-2*(B!==0||K!==0?B+K:Me(p.left,p.right)):T=d-2*(k!==0||P!==0?k+P:Me(p.top,p.bottom))}await c({...r,availableWidth:z,availableHeight:T});const O=await l.getDimensions(o.floating);return w!==O.width||d!==O.height?{reset:{rects:!0}}:{}}}};function ts(){return typeof window<"u"}function ir(e){return Mi(e)?(e.nodeName||"").toLowerCase():"#document"}function $e(e){var r;return(e==null||(r=e.ownerDocument)==null?void 0:r.defaultView)||window}function at(e){var r;return(r=(Mi(e)?e.ownerDocument:e.document)||window.document)==null?void 0:r.documentElement}function Mi(e){return ts()?e instanceof Node||e instanceof $e(e).Node:!1}function Ke(e){return ts()?e instanceof Element||e instanceof $e(e).Element:!1}function st(e){return ts()?e instanceof HTMLElement||e instanceof $e(e).HTMLElement:!1}function ca(e){return!ts()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $e(e).ShadowRoot}const of=new Set(["inline","contents"]);function Sr(e){const{overflow:r,overflowX:s,overflowY:n,display:a}=Ye(e);return/auto|scroll|overlay|hidden|clip/.test(r+n+s)&&!of.has(a)}const lf=new Set(["table","td","th"]);function cf(e){return lf.has(ir(e))}const df=[":popover-open",":modal"];function rs(e){return df.some(r=>{try{return e.matches(r)}catch{return!1}})}const uf=["transform","translate","scale","rotate","perspective"],ff=["transform","translate","scale","rotate","perspective","filter"],hf=["paint","layout","strict","content"];function yn(e){const r=vn(),s=Ke(e)?Ye(e):e;return uf.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!r&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!r&&(s.filter?s.filter!=="none":!1)||ff.some(n=>(s.willChange||"").includes(n))||hf.some(n=>(s.contain||"").includes(n))}function pf(e){let r=jt(e);for(;st(r)&&!Jt(r);){if(yn(r))return r;if(rs(r))return null;r=jt(r)}return null}function vn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mf=new Set(["html","body","#document"]);function Jt(e){return mf.has(ir(e))}function Ye(e){return $e(e).getComputedStyle(e)}function ss(e){return Ke(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function jt(e){if(ir(e)==="html")return e;const r=e.assignedSlot||e.parentNode||ca(e)&&e.host||at(e);return ca(r)?r.host:r}function $i(e){const r=jt(e);return Jt(r)?e.ownerDocument?e.ownerDocument.body:e.body:st(r)&&Sr(r)?r:$i(r)}function xr(e,r,s){var n;r===void 0&&(r=[]),s===void 0&&(s=!0);const a=$i(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),l=$e(a);if(i){const o=Ms(l);return r.concat(l,l.visualViewport||[],Sr(a)?a:[],o&&s?xr(o):[])}return r.concat(a,xr(a,[],s))}function Ms(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Bi(e){const r=Ye(e);let s=parseFloat(r.width)||0,n=parseFloat(r.height)||0;const a=st(e),i=a?e.offsetWidth:s,l=a?e.offsetHeight:n,o=Ur(s)!==i||Ur(n)!==l;return o&&(s=i,n=l),{width:s,height:n,$:o}}function bn(e){return Ke(e)?e:e.contextElement}function Bt(e){const r=bn(e);if(!st(r))return tt(1);const s=r.getBoundingClientRect(),{width:n,height:a,$:i}=Bi(r);let l=(i?Ur(s.width):s.width)/n,o=(i?Ur(s.height):s.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const xf=tt(0);function Ui(e){const r=$e(e);return!vn()||!r.visualViewport?xf:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function gf(e,r,s){return r===void 0&&(r=!1),!s||r&&s!==$e(e)?!1:r}function Ft(e,r,s,n){r===void 0&&(r=!1),s===void 0&&(s=!1);const a=e.getBoundingClientRect(),i=bn(e);let l=tt(1);r&&(n?Ke(n)&&(l=Bt(n)):l=Bt(e));const o=gf(i,s,n)?Ui(i):tt(0);let c=(a.left+o.x)/l.x,f=(a.top+o.y)/l.y,p=a.width/l.x,x=a.height/l.y;if(i){const b=$e(i),m=n&&Ke(n)?$e(n):n;let w=b,d=Ms(w);for(;d&&n&&m!==w;){const h=Bt(d),g=d.getBoundingClientRect(),u=Ye(d),j=g.left+(d.clientLeft+parseFloat(u.paddingLeft))*h.x,C=g.top+(d.clientTop+parseFloat(u.paddingTop))*h.y;c*=h.x,f*=h.y,p*=h.x,x*=h.y,c+=j,f+=C,w=$e(d),d=Ms(w)}}return Hr({width:p,height:x,x:c,y:f})}function ns(e,r){const s=ss(e).scrollLeft;return r?r.left+s:Ft(at(e)).left+s}function Vi(e,r){const s=e.getBoundingClientRect(),n=s.left+r.scrollLeft-ns(e,s),a=s.top+r.scrollTop;return{x:n,y:a}}function yf(e){let{elements:r,rect:s,offsetParent:n,strategy:a}=e;const i=a==="fixed",l=at(n),o=r?rs(r.floating):!1;if(n===l||o&&i)return s;let c={scrollLeft:0,scrollTop:0},f=tt(1);const p=tt(0),x=st(n);if((x||!x&&!i)&&((ir(n)!=="body"||Sr(l))&&(c=ss(n)),st(n))){const m=Ft(n);f=Bt(n),p.x=m.x+n.clientLeft,p.y=m.y+n.clientTop}const b=l&&!x&&!i?Vi(l,c):tt(0);return{width:s.width*f.x,height:s.height*f.y,x:s.x*f.x-c.scrollLeft*f.x+p.x+b.x,y:s.y*f.y-c.scrollTop*f.y+p.y+b.y}}function vf(e){return Array.from(e.getClientRects())}function bf(e){const r=at(e),s=ss(e),n=e.ownerDocument.body,a=Me(r.scrollWidth,r.clientWidth,n.scrollWidth,n.clientWidth),i=Me(r.scrollHeight,r.clientHeight,n.scrollHeight,n.clientHeight);let l=-s.scrollLeft+ns(e);const o=-s.scrollTop;return Ye(n).direction==="rtl"&&(l+=Me(r.clientWidth,n.clientWidth)-a),{width:a,height:i,x:l,y:o}}const da=25;function wf(e,r){const s=$e(e),n=at(e),a=s.visualViewport;let i=n.clientWidth,l=n.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const p=vn();(!p||p&&r==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}const f=ns(n);if(f<=0){const p=n.ownerDocument,x=p.body,b=getComputedStyle(x),m=p.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,w=Math.abs(n.clientWidth-x.clientWidth-m);w<=da&&(i-=w)}else f<=da&&(i+=f);return{width:i,height:l,x:o,y:c}}const jf=new Set(["absolute","fixed"]);function Nf(e,r){const s=Ft(e,!0,r==="fixed"),n=s.top+e.clientTop,a=s.left+e.clientLeft,i=st(e)?Bt(e):tt(1),l=e.clientWidth*i.x,o=e.clientHeight*i.y,c=a*i.x,f=n*i.y;return{width:l,height:o,x:c,y:f}}function ua(e,r,s){let n;if(r==="viewport")n=wf(e,s);else if(r==="document")n=bf(at(e));else if(Ke(r))n=Nf(r,s);else{const a=Ui(e);n={x:r.x-a.x,y:r.y-a.y,width:r.width,height:r.height}}return Hr(n)}function Hi(e,r){const s=jt(e);return s===r||!Ke(s)||Jt(s)?!1:Ye(s).position==="fixed"||Hi(s,r)}function Cf(e,r){const s=r.get(e);if(s)return s;let n=xr(e,[],!1).filter(o=>Ke(o)&&ir(o)!=="body"),a=null;const i=Ye(e).position==="fixed";let l=i?jt(e):e;for(;Ke(l)&&!Jt(l);){const o=Ye(l),c=yn(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&jf.has(a.position)||Sr(l)&&!c&&Hi(e,l))?n=n.filter(p=>p!==l):a=o,l=jt(l)}return r.set(e,n),n}function kf(e){let{element:r,boundary:s,rootBoundary:n,strategy:a}=e;const l=[...s==="clippingAncestors"?rs(r)?[]:Cf(r,this._c):[].concat(s),n],o=l[0],c=l.reduce((f,p)=>{const x=ua(r,p,a);return f.top=Me(x.top,f.top),f.right=wt(x.right,f.right),f.bottom=wt(x.bottom,f.bottom),f.left=Me(x.left,f.left),f},ua(r,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Sf(e){const{width:r,height:s}=Bi(e);return{width:r,height:s}}function _f(e,r,s){const n=st(r),a=at(r),i=s==="fixed",l=Ft(e,!0,i,r);let o={scrollLeft:0,scrollTop:0};const c=tt(0);function f(){c.x=ns(a)}if(n||!n&&!i)if((ir(r)!=="body"||Sr(a))&&(o=ss(r)),n){const m=Ft(r,!0,i,r);c.x=m.x+r.clientLeft,c.y=m.y+r.clientTop}else a&&f();i&&!n&&a&&f();const p=a&&!n&&!i?Vi(a,o):tt(0),x=l.left+o.scrollLeft-c.x-p.x,b=l.top+o.scrollTop-c.y-p.y;return{x,y:b,width:l.width,height:l.height}}function Ss(e){return Ye(e).position==="static"}function fa(e,r){if(!st(e)||Ye(e).position==="fixed")return null;if(r)return r(e);let s=e.offsetParent;return at(e)===s&&(s=s.ownerDocument.body),s}function Wi(e,r){const s=$e(e);if(rs(e))return s;if(!st(e)){let a=jt(e);for(;a&&!Jt(a);){if(Ke(a)&&!Ss(a))return a;a=jt(a)}return s}let n=fa(e,r);for(;n&&cf(n)&&Ss(n);)n=fa(n,r);return n&&Jt(n)&&Ss(n)&&!yn(n)?s:n||pf(e)||s}const Ef=async function(e){const r=this.getOffsetParent||Wi,s=this.getDimensions,n=await s(e.floating);return{reference:_f(e.reference,await r(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Af(e){return Ye(e).direction==="rtl"}const Tf={convertOffsetParentRelativeRectToViewportRelativeRect:yf,getDocumentElement:at,getClippingRect:kf,getOffsetParent:Wi,getElementRects:Ef,getClientRects:vf,getDimensions:Sf,getScale:Bt,isElement:Ke,isRTL:Af};function Gi(e,r){return e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height}function Pf(e,r){let s=null,n;const a=at(e);function i(){var o;clearTimeout(n),(o=s)==null||o.disconnect(),s=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const f=e.getBoundingClientRect(),{left:p,top:x,width:b,height:m}=f;if(o||r(),!b||!m)return;const w=Rr(x),d=Rr(a.clientWidth-(p+b)),h=Rr(a.clientHeight-(x+m)),g=Rr(p),j={rootMargin:-w+"px "+-d+"px "+-h+"px "+-g+"px",threshold:Me(0,wt(1,c))||1};let C=!0;function S(A){const T=A[0].intersectionRatio;if(T!==c){if(!C)return l();T?l(!1,T):n=setTimeout(()=>{l(!1,1e-7)},1e3)}T===1&&!Gi(f,e.getBoundingClientRect())&&l(),C=!1}try{s=new IntersectionObserver(S,{...j,root:a.ownerDocument})}catch{s=new IntersectionObserver(S,j)}s.observe(e)}return l(!0),i}function Rf(e,r,s,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,f=bn(e),p=a||i?[...f?xr(f):[],...xr(r)]:[];p.forEach(g=>{a&&g.addEventListener("scroll",s,{passive:!0}),i&&g.addEventListener("resize",s)});const x=f&&o?Pf(f,s):null;let b=-1,m=null;l&&(m=new ResizeObserver(g=>{let[u]=g;u&&u.target===f&&m&&(m.unobserve(r),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var j;(j=m)==null||j.observe(r)})),s()}),f&&!c&&m.observe(f),m.observe(r));let w,d=c?Ft(e):null;c&&h();function h(){const g=Ft(e);d&&!Gi(d,g)&&s(),d=g,w=requestAnimationFrame(h)}return s(),()=>{var g;p.forEach(u=>{a&&u.removeEventListener("scroll",s),i&&u.removeEventListener("resize",s)}),x==null||x(),(g=m)==null||g.disconnect(),m=null,c&&cancelAnimationFrame(w)}}const Of=rf,If=sf,Df=Ju,Ff=af,zf=ef,ha=Qu,Lf=nf,Mf=(e,r,s)=>{const n=new Map,a={platform:Tf,...s},i={...a.platform,_c:n};return Xu(e,r,{...a,platform:i})};var $f=typeof document<"u",Bf=function(){},zr=$f?N.useLayoutEffect:Bf;function Wr(e,r){if(e===r)return!0;if(typeof e!=typeof r)return!1;if(typeof e=="function"&&e.toString()===r.toString())return!0;let s,n,a;if(e&&r&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==r.length)return!1;for(n=s;n--!==0;)if(!Wr(e[n],r[n]))return!1;return!0}if(a=Object.keys(e),s=a.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(r,a[n]))return!1;for(n=s;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!Wr(e[i],r[i]))return!1}return!0}return e!==e&&r!==r}function Ki(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function pa(e,r){const s=Ki(e);return Math.round(r*s)/s}function _s(e){const r=N.useRef(e);return zr(()=>{r.current=e}),r}function Uf(e){e===void 0&&(e={});const{placement:r="bottom",strategy:s="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:f}=e,[p,x]=N.useState({x:0,y:0,strategy:s,placement:r,middlewareData:{},isPositioned:!1}),[b,m]=N.useState(n);Wr(b,n)||m(n);const[w,d]=N.useState(null),[h,g]=N.useState(null),u=N.useCallback(q=>{q!==A.current&&(A.current=q,d(q))},[]),j=N.useCallback(q=>{q!==T.current&&(T.current=q,g(q))},[]),C=i||w,S=l||h,A=N.useRef(null),T=N.useRef(null),z=N.useRef(p),O=c!=null,B=_s(c),K=_s(a),k=_s(f),P=N.useCallback(()=>{if(!A.current||!T.current)return;const q={placement:r,strategy:s,middleware:b};K.current&&(q.platform=K.current),Mf(A.current,T.current,q).then(U=>{const ie={...U,isPositioned:k.current!==!1};y.current&&!Wr(z.current,ie)&&(z.current=ie,Cr.flushSync(()=>{x(ie)}))})},[b,r,s,K,k]);zr(()=>{f===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,x(q=>({...q,isPositioned:!1})))},[f]);const y=N.useRef(!1);zr(()=>(y.current=!0,()=>{y.current=!1}),[]),zr(()=>{if(C&&(A.current=C),S&&(T.current=S),C&&S){if(B.current)return B.current(C,S,P);P()}},[C,S,P,B,O]);const I=N.useMemo(()=>({reference:A,floating:T,setReference:u,setFloating:j}),[u,j]),X=N.useMemo(()=>({reference:C,floating:S}),[C,S]),M=N.useMemo(()=>{const q={position:s,left:0,top:0};if(!X.floating)return q;const U=pa(X.floating,p.x),ie=pa(X.floating,p.y);return o?{...q,transform:"translate("+U+"px, "+ie+"px)",...Ki(X.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:U,top:ie}},[s,o,X.floating,p.x,p.y]);return N.useMemo(()=>({...p,update:P,refs:I,elements:X,floatingStyles:M}),[p,P,I,X,M])}const Vf=e=>{function r(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:n,padding:a}=typeof e=="function"?e(s):e;return n&&r(n)?n.current!=null?ha({element:n.current,padding:a}).fn(s):{}:n?ha({element:n,padding:a}).fn(s):{}}}},Hf=(e,r)=>({...Of(e),options:[e,r]}),Wf=(e,r)=>({...If(e),options:[e,r]}),Gf=(e,r)=>({...Lf(e),options:[e,r]}),Kf=(e,r)=>({...Df(e),options:[e,r]}),Yf=(e,r)=>({...Ff(e),options:[e,r]}),qf=(e,r)=>({...zf(e),options:[e,r]}),Zf=(e,r)=>({...Vf(e),options:[e,r]});var Xf="Arrow",Yi=N.forwardRef((e,r)=>{const{children:s,width:n=10,height:a=5,...i}=e;return t.jsx(be.svg,{...i,ref:r,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:t.jsx("polygon",{points:"0,0 30,0 15,10"})})});Yi.displayName=Xf;var Qf=Yi;function wn(e){const[r,s]=N.useState(void 0);return Be(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,f=Array.isArray(c)?c[0]:c;l=f.inlineSize,o=f.blockSize}else l=e.offsetWidth,o=e.offsetHeight;s({width:l,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else s(void 0)},[e]),r}var jn="Popper",[qi,or]=nt(jn),[Jf,Zi]=qi(jn),Xi=e=>{const{__scopePopper:r,children:s}=e,[n,a]=N.useState(null);return t.jsx(Jf,{scope:r,anchor:n,onAnchorChange:a,children:s})};Xi.displayName=jn;var Qi="PopperAnchor",Ji=N.forwardRef((e,r)=>{const{__scopePopper:s,virtualRef:n,...a}=e,i=Zi(Qi,s),l=N.useRef(null),o=ke(r,l),c=N.useRef(null);return N.useEffect(()=>{const f=c.current;c.current=(n==null?void 0:n.current)||l.current,f!==c.current&&i.onAnchorChange(c.current)}),n?null:t.jsx(be.div,{...a,ref:o})});Ji.displayName=Qi;var Nn="PopperContent",[eh,th]=qi(Nn),eo=N.forwardRef((e,r)=>{var le,ce,pe,me,fe,ye;const{__scopePopper:s,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:f=[],collisionPadding:p=0,sticky:x="partial",hideWhenDetached:b=!1,updatePositionStrategy:m="optimized",onPlaced:w,...d}=e,h=Zi(Nn,s),[g,u]=N.useState(null),j=ke(r,Se=>u(Se)),[C,S]=N.useState(null),A=wn(C),T=(A==null?void 0:A.width)??0,z=(A==null?void 0:A.height)??0,O=n+(i!=="center"?"-"+i:""),B=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},K=Array.isArray(f)?f:[f],k=K.length>0,P={padding:B,boundary:K.filter(sh),altBoundary:k},{refs:y,floatingStyles:I,placement:X,isPositioned:M,middlewareData:q}=Uf({strategy:"fixed",placement:O,whileElementsMounted:(...Se)=>Rf(...Se,{animationFrame:m==="always"}),elements:{reference:h.anchor},middleware:[Hf({mainAxis:a+z,alignmentAxis:l}),c&&Wf({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?Gf():void 0,...P}),c&&Kf({...P}),Yf({...P,apply:({elements:Se,rects:v,availableWidth:H,availableHeight:$})=>{const{width:E,height:_}=v.reference,R=Se.floating.style;R.setProperty("--radix-popper-available-width",`${H}px`),R.setProperty("--radix-popper-available-height",`${$}px`),R.setProperty("--radix-popper-anchor-width",`${E}px`),R.setProperty("--radix-popper-anchor-height",`${_}px`)}}),C&&Zf({element:C,padding:o}),nh({arrowWidth:T,arrowHeight:z}),b&&qf({strategy:"referenceHidden",...P})]}),[U,ie]=so(X),L=Zt(w);Be(()=>{M&&(L==null||L())},[M,L]);const F=(le=q.arrow)==null?void 0:le.x,oe=(ce=q.arrow)==null?void 0:ce.y,te=((pe=q.arrow)==null?void 0:pe.centerOffset)!==0,[J,Ce]=N.useState();return Be(()=>{g&&Ce(window.getComputedStyle(g).zIndex)},[g]),t.jsx("div",{ref:y.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:M?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(me=q.transformOrigin)==null?void 0:me.x,(fe=q.transformOrigin)==null?void 0:fe.y].join(" "),...((ye=q.hide)==null?void 0:ye.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:t.jsx(eh,{scope:s,placedSide:U,onArrowChange:S,arrowX:F,arrowY:oe,shouldHideArrow:te,children:t.jsx(be.div,{"data-side":U,"data-align":ie,...d,ref:j,style:{...d.style,animation:M?void 0:"none"}})})})});eo.displayName=Nn;var to="PopperArrow",rh={top:"bottom",right:"left",bottom:"top",left:"right"},ro=N.forwardRef(function(r,s){const{__scopePopper:n,...a}=r,i=th(to,n),l=rh[i.placedSide];return t.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:t.jsx(Qf,{...a,ref:s,style:{...a.style,display:"block"}})})});ro.displayName=to;function sh(e){return e!==null}var nh=e=>({name:"transformOrigin",options:e,fn(r){var h,g,u;const{placement:s,rects:n,middlewareData:a}=r,l=((h=a.arrow)==null?void 0:h.centerOffset)!==0,o=l?0:e.arrowWidth,c=l?0:e.arrowHeight,[f,p]=so(s),x={start:"0%",center:"50%",end:"100%"}[p],b=(((g=a.arrow)==null?void 0:g.x)??0)+o/2,m=(((u=a.arrow)==null?void 0:u.y)??0)+c/2;let w="",d="";return f==="bottom"?(w=l?x:`${b}px`,d=`${-c}px`):f==="top"?(w=l?x:`${b}px`,d=`${n.floating.height+c}px`):f==="right"?(w=`${-c}px`,d=l?x:`${m}px`):f==="left"&&(w=`${n.floating.width+c}px`,d=l?x:`${m}px`),{data:{x:w,y:d}}}});function so(e){const[r,s="center"]=e.split("-");return[r,s]}var Cn=Xi,as=Ji,kn=eo,Sn=ro,ah=Symbol("radix.slottable");function ih(e){const r=({children:s})=>t.jsx(t.Fragment,{children:s});return r.displayName=`${e}.Slottable`,r.__radixId=ah,r}var[is]=nt("Tooltip",[or]),os=or(),no="TooltipProvider",oh=700,$s="tooltip.open",[lh,_n]=is(no),ao=e=>{const{__scopeTooltip:r,delayDuration:s=oh,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,l=N.useRef(!0),o=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const f=c.current;return()=>window.clearTimeout(f)},[]),t.jsx(lh,{scope:r,isOpenDelayedRef:l,delayDuration:s,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:N.useCallback(f=>{o.current=f},[]),disableHoverableContent:a,children:i})};ao.displayName=no;var gr="Tooltip",[ch,ls]=is(gr),io=e=>{const{__scopeTooltip:r,children:s,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:l,delayDuration:o}=e,c=_n(gr,e.__scopeTooltip),f=os(r),[p,x]=N.useState(null),b=Mt(),m=N.useRef(0),w=l??c.disableHoverableContent,d=o??c.delayDuration,h=N.useRef(!1),[g,u]=rt({prop:n,defaultProp:a??!1,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent($s))):c.onClose(),i==null||i(T)},caller:gr}),j=N.useMemo(()=>g?h.current?"delayed-open":"instant-open":"closed",[g]),C=N.useCallback(()=>{window.clearTimeout(m.current),m.current=0,h.current=!1,u(!0)},[u]),S=N.useCallback(()=>{window.clearTimeout(m.current),m.current=0,u(!1)},[u]),A=N.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{h.current=!0,u(!0),m.current=0},d)},[d,u]);return N.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),t.jsx(Cn,{...f,children:t.jsx(ch,{scope:r,contentId:b,open:g,stateAttribute:j,trigger:p,onTriggerChange:x,onTriggerEnter:N.useCallback(()=>{c.isOpenDelayedRef.current?A():C()},[c.isOpenDelayedRef,A,C]),onTriggerLeave:N.useCallback(()=>{w?S():(window.clearTimeout(m.current),m.current=0)},[S,w]),onOpen:C,onClose:S,disableHoverableContent:w,children:s})})};io.displayName=gr;var Bs="TooltipTrigger",oo=N.forwardRef((e,r)=>{const{__scopeTooltip:s,...n}=e,a=ls(Bs,s),i=_n(Bs,s),l=os(s),o=N.useRef(null),c=ke(r,o,a.onTriggerChange),f=N.useRef(!1),p=N.useRef(!1),x=N.useCallback(()=>f.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),t.jsx(as,{asChild:!0,...l,children:t.jsx(be.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:xe(e.onPointerMove,b=>{b.pointerType!=="touch"&&!p.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),p.current=!0)}),onPointerLeave:xe(e.onPointerLeave,()=>{a.onTriggerLeave(),p.current=!1}),onPointerDown:xe(e.onPointerDown,()=>{a.open&&a.onClose(),f.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:xe(e.onFocus,()=>{f.current||a.onOpen()}),onBlur:xe(e.onBlur,a.onClose),onClick:xe(e.onClick,a.onClose)})})});oo.displayName=Bs;var dh="TooltipPortal",[mg,uh]=is(dh,{forceMount:void 0}),er="TooltipContent",lo=N.forwardRef((e,r)=>{const s=uh(er,e.__scopeTooltip),{forceMount:n=s.forceMount,side:a="top",...i}=e,l=ls(er,e.__scopeTooltip);return t.jsx(Nr,{present:n||l.open,children:l.disableHoverableContent?t.jsx(co,{side:a,...i,ref:r}):t.jsx(fh,{side:a,...i,ref:r})})}),fh=N.forwardRef((e,r)=>{const s=ls(er,e.__scopeTooltip),n=_n(er,e.__scopeTooltip),a=N.useRef(null),i=ke(r,a),[l,o]=N.useState(null),{trigger:c,onClose:f}=s,p=a.current,{onPointerInTransitChange:x}=n,b=N.useCallback(()=>{o(null),x(!1)},[x]),m=N.useCallback((w,d)=>{const h=w.currentTarget,g={x:w.clientX,y:w.clientY},u=gh(g,h.getBoundingClientRect()),j=yh(g,u),C=vh(d.getBoundingClientRect()),S=wh([...j,...C]);o(S),x(!0)},[x]);return N.useEffect(()=>()=>b(),[b]),N.useEffect(()=>{if(c&&p){const w=h=>m(h,p),d=h=>m(h,c);return c.addEventListener("pointerleave",w),p.addEventListener("pointerleave",d),()=>{c.removeEventListener("pointerleave",w),p.removeEventListener("pointerleave",d)}}},[c,p,m,b]),N.useEffect(()=>{if(l){const w=d=>{const h=d.target,g={x:d.clientX,y:d.clientY},u=(c==null?void 0:c.contains(h))||(p==null?void 0:p.contains(h)),j=!bh(g,l);u?b():j&&(b(),f())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,p,l,f,b]),t.jsx(co,{...e,ref:i})}),[hh,ph]=is(gr,{isInside:!1}),mh=ih("TooltipContent"),co=N.forwardRef((e,r)=>{const{__scopeTooltip:s,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=e,c=ls(er,s),f=os(s),{onClose:p}=c;return N.useEffect(()=>(document.addEventListener($s,p),()=>document.removeEventListener($s,p)),[p]),N.useEffect(()=>{if(c.trigger){const x=b=>{const m=b.target;m!=null&&m.contains(c.trigger)&&p()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[c.trigger,p]),t.jsx(on,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:x=>x.preventDefault(),onDismiss:p,children:t.jsxs(kn,{"data-state":c.stateAttribute,...f,...o,ref:r,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[t.jsx(mh,{children:n}),t.jsx(hh,{scope:s,isInside:!0,children:t.jsx(uu,{id:c.contentId,role:"tooltip",children:a||n})})]})})});lo.displayName=er;var uo="TooltipArrow",xh=N.forwardRef((e,r)=>{const{__scopeTooltip:s,...n}=e,a=os(s);return ph(uo,s).isInside?null:t.jsx(Sn,{...a,...n,ref:r})});xh.displayName=uo;function gh(e,r){const s=Math.abs(r.top-e.y),n=Math.abs(r.bottom-e.y),a=Math.abs(r.right-e.x),i=Math.abs(r.left-e.x);switch(Math.min(s,n,a,i)){case i:return"left";case a:return"right";case s:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function yh(e,r,s=5){const n=[];switch(r){case"top":n.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":n.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":n.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":n.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return n}function vh(e){const{top:r,right:s,bottom:n,left:a}=e;return[{x:a,y:r},{x:s,y:r},{x:s,y:n},{x:a,y:n}]}function bh(e,r){const{x:s,y:n}=e;let a=!1;for(let i=0,l=r.length-1;i<r.length;l=i++){const o=r[i],c=r[l],f=o.x,p=o.y,x=c.x,b=c.y;p>n!=b>n&&s<(x-f)*(n-p)/(b-p)+f&&(a=!a)}return a}function wh(e){const r=e.slice();return r.sort((s,n)=>s.x<n.x?-1:s.x>n.x?1:s.y<n.y?-1:s.y>n.y?1:0),jh(r)}function jh(e){if(e.length<=1)return e.slice();const r=[];for(let n=0;n<e.length;n++){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],l=r[r.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}r.pop();const s=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;s.length>=2;){const i=s[s.length-1],l=s[s.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))s.pop();else break}s.push(a)}return s.pop(),r.length===1&&s.length===1&&r[0].x===s[0].x&&r[0].y===s[0].y?r:r.concat(s)}var Nh=ao,Ch=io,kh=oo,fo=lo;const Sh=Nh,En=Ch,An=kh,cs=N.forwardRef(({className:e,sideOffset:r=4,...s},n)=>t.jsx(fo,{ref:n,sideOffset:r,className:we("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));cs.displayName=fo.displayName;var ds=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_h={setTimeout:(e,r)=>setTimeout(e,r),clearTimeout:e=>clearTimeout(e),setInterval:(e,r)=>setInterval(e,r),clearInterval:e=>clearInterval(e)},pt,sn,Ia,Eh=(Ia=class{constructor(){Ne(this,pt,_h);Ne(this,sn,!1)}setTimeoutProvider(e){ge(this,pt,e)}setTimeout(e,r){return V(this,pt).setTimeout(e,r)}clearTimeout(e){V(this,pt).clearTimeout(e)}setInterval(e,r){return V(this,pt).setInterval(e,r)}clearInterval(e){V(this,pt).clearInterval(e)}},pt=new WeakMap,sn=new WeakMap,Ia),Us=new Eh;function Ah(e){setTimeout(e,0)}var us=typeof window>"u"||"Deno"in globalThis;function He(){}function Th(e,r){return typeof e=="function"?e(r):e}function Ph(e){return typeof e=="number"&&e>=0&&e!==1/0}function Rh(e,r){return Math.max(e+(r||0)-Date.now(),0)}function Vs(e,r){return typeof e=="function"?e(r):e}function Oh(e,r){return typeof e=="function"?e(r):e}function ma(e,r){const{type:s="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:o}=e;if(l){if(n){if(r.queryHash!==Tn(l,r.options))return!1}else if(!vr(r.queryKey,l))return!1}if(s!=="all"){const c=r.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof o=="boolean"&&r.isStale()!==o||a&&a!==r.state.fetchStatus||i&&!i(r))}function xa(e,r){const{exact:s,status:n,predicate:a,mutationKey:i}=e;if(i){if(!r.options.mutationKey)return!1;if(s){if(yr(r.options.mutationKey)!==yr(i))return!1}else if(!vr(r.options.mutationKey,i))return!1}return!(n&&r.state.status!==n||a&&!a(r))}function Tn(e,r){return((r==null?void 0:r.queryKeyHashFn)||yr)(e)}function yr(e){return JSON.stringify(e,(r,s)=>Hs(s)?Object.keys(s).sort().reduce((n,a)=>(n[a]=s[a],n),{}):s)}function vr(e,r){return e===r?!0:typeof e!=typeof r?!1:e&&r&&typeof e=="object"&&typeof r=="object"?Object.keys(r).every(s=>vr(e[s],r[s])):!1}var Ih=Object.prototype.hasOwnProperty;function ho(e,r,s=0){if(e===r)return e;if(s>500)return r;const n=ga(e)&&ga(r);if(!n&&!(Hs(e)&&Hs(r)))return r;const i=(n?e:Object.keys(e)).length,l=n?r:Object.keys(r),o=l.length,c=n?new Array(o):{};let f=0;for(let p=0;p<o;p++){const x=n?p:l[p],b=e[x],m=r[x];if(b===m){c[x]=b,(n?p<i:Ih.call(e,x))&&f++;continue}if(b===null||m===null||typeof b!="object"||typeof m!="object"){c[x]=m;continue}const w=ho(b,m,s+1);c[x]=w,w===b&&f++}return i===o&&f===i?e:c}function ga(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Hs(e){if(!ya(e))return!1;const r=e.constructor;if(r===void 0)return!0;const s=r.prototype;return!(!ya(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ya(e){return Object.prototype.toString.call(e)==="[object Object]"}function Dh(e){return new Promise(r=>{Us.setTimeout(r,e)})}function Fh(e,r,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,r):s.structuralSharing!==!1?ho(e,r):r}function zh(e,r,s=0){const n=[...e,r];return s&&n.length>s?n.slice(1):n}function Lh(e,r,s=0){const n=[r,...e];return s&&n.length>s?n.slice(0,-1):n}var Pn=Symbol();function po(e,r){return!e.queryFn&&(r!=null&&r.initialPromise)?()=>r.initialPromise:!e.queryFn||e.queryFn===Pn?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Mh(e,r,s){let n=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=r()),n||(n=!0,a.aborted?s():a.addEventListener("abort",s,{once:!0})),a)}),e}var Tt,mt,Ut,Da,$h=(Da=class extends ds{constructor(){super();Ne(this,Tt);Ne(this,mt);Ne(this,Ut);ge(this,Ut,r=>{if(!us&&window.addEventListener){const s=()=>r();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){V(this,mt)||this.setEventListener(V(this,Ut))}onUnsubscribe(){var r;this.hasListeners()||((r=V(this,mt))==null||r.call(this),ge(this,mt,void 0))}setEventListener(r){var s;ge(this,Ut,r),(s=V(this,mt))==null||s.call(this),ge(this,mt,r(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(r){V(this,Tt)!==r&&(ge(this,Tt,r),this.onFocus())}onFocus(){const r=this.isFocused();this.listeners.forEach(s=>{s(r)})}isFocused(){var r;return typeof V(this,Tt)=="boolean"?V(this,Tt):((r=globalThis.document)==null?void 0:r.visibilityState)!=="hidden"}},Tt=new WeakMap,mt=new WeakMap,Ut=new WeakMap,Da),mo=new $h;function Bh(){let e,r;const s=new Promise((a,i)=>{e=a,r=i});s.status="pending",s.catch(()=>{});function n(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},s.reject=a=>{n({status:"rejected",reason:a}),r(a)},s}var Uh=Ah;function Vh(){let e=[],r=0,s=o=>{o()},n=o=>{o()},a=Uh;const i=o=>{r?e.push(o):a(()=>{s(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{s(c)})})})};return{batch:o=>{let c;r++;try{c=o()}finally{r--,r||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var ze=Vh(),Vt,xt,Ht,Fa,Hh=(Fa=class extends ds{constructor(){super();Ne(this,Vt,!0);Ne(this,xt);Ne(this,Ht);ge(this,Ht,r=>{if(!us&&window.addEventListener){const s=()=>r(!0),n=()=>r(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){V(this,xt)||this.setEventListener(V(this,Ht))}onUnsubscribe(){var r;this.hasListeners()||((r=V(this,xt))==null||r.call(this),ge(this,xt,void 0))}setEventListener(r){var s;ge(this,Ht,r),(s=V(this,xt))==null||s.call(this),ge(this,xt,r(this.setOnline.bind(this)))}setOnline(r){V(this,Vt)!==r&&(ge(this,Vt,r),this.listeners.forEach(n=>{n(r)}))}isOnline(){return V(this,Vt)}},Vt=new WeakMap,xt=new WeakMap,Ht=new WeakMap,Fa),Gr=new Hh;function Wh(e){return Math.min(1e3*2**e,3e4)}function xo(e){return(e??"online")==="online"?Gr.isOnline():!0}var Ws=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function go(e){let r=!1,s=0,n;const a=Bh(),i=()=>a.status!=="pending",l=d=>{var h;if(!i()){const g=new Ws(d);b(g),(h=e.onCancel)==null||h.call(e,g)}},o=()=>{r=!0},c=()=>{r=!1},f=()=>mo.isFocused()&&(e.networkMode==="always"||Gr.isOnline())&&e.canRun(),p=()=>xo(e.networkMode)&&e.canRun(),x=d=>{i()||(n==null||n(),a.resolve(d))},b=d=>{i()||(n==null||n(),a.reject(d))},m=()=>new Promise(d=>{var h;n=g=>{(i()||f())&&d(g)},(h=e.onPause)==null||h.call(e)}).then(()=>{var d;n=void 0,i()||(d=e.onContinue)==null||d.call(e)}),w=()=>{if(i())return;let d;const h=s===0?e.initialPromise:void 0;try{d=h??e.fn()}catch(g){d=Promise.reject(g)}Promise.resolve(d).then(x).catch(g=>{var A;if(i())return;const u=e.retry??(us?0:3),j=e.retryDelay??Wh,C=typeof j=="function"?j(s,g):j,S=u===!0||typeof u=="number"&&s<u||typeof u=="function"&&u(s,g);if(r||!S){b(g);return}s++,(A=e.onFail)==null||A.call(e,s,g),Dh(C).then(()=>f()?void 0:m()).then(()=>{r?b(g):w()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:p,start:()=>(p()?w():m().then(w),a)}}var Pt,za,yo=(za=class{constructor(){Ne(this,Pt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ph(this.gcTime)&&ge(this,Pt,Us.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(us?1/0:5*60*1e3))}clearGcTimeout(){V(this,Pt)&&(Us.clearTimeout(V(this,Pt)),ge(this,Pt,void 0))}},Pt=new WeakMap,za),Rt,Wt,Ue,Ot,Oe,br,It,We,ot,La,Gh=(La=class extends yo{constructor(r){super();Ne(this,We);Ne(this,Rt);Ne(this,Wt);Ne(this,Ue);Ne(this,Ot);Ne(this,Oe);Ne(this,br);Ne(this,It);ge(this,It,!1),ge(this,br,r.defaultOptions),this.setOptions(r.options),this.observers=[],ge(this,Ot,r.client),ge(this,Ue,V(this,Ot).getQueryCache()),this.queryKey=r.queryKey,this.queryHash=r.queryHash,ge(this,Rt,ba(this.options)),this.state=r.state??V(this,Rt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var r;return(r=V(this,Oe))==null?void 0:r.promise}setOptions(r){if(this.options={...V(this,br),...r},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=ba(this.options);s.data!==void 0&&(this.setState(va(s.data,s.dataUpdatedAt)),ge(this,Rt,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&V(this,Ue).remove(this)}setData(r,s){const n=Fh(this.state.data,r,this.options);return De(this,We,ot).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(r,s){De(this,We,ot).call(this,{type:"setState",state:r,setStateOptions:s})}cancel(r){var n,a;const s=(n=V(this,Oe))==null?void 0:n.promise;return(a=V(this,Oe))==null||a.cancel(r),s?s.then(He).catch(He):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,Rt))}isActive(){return this.observers.some(r=>Oh(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>Vs(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!Rh(this.state.dataUpdatedAt,r)}onFocus(){var s;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r==null||r.refetch({cancelRefetch:!1}),(s=V(this,Oe))==null||s.continue()}onOnline(){var s;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r==null||r.refetch({cancelRefetch:!1}),(s=V(this,Oe))==null||s.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),V(this,Ue).notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(s=>s!==r),this.observers.length||(V(this,Oe)&&(V(this,It)?V(this,Oe).cancel({revert:!0}):V(this,Oe).cancelRetry()),this.scheduleGc()),V(this,Ue).notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||De(this,We,ot).call(this,{type:"invalidate"})}async fetch(r,s){var c,f,p,x,b,m,w,d,h,g,u,j;if(this.state.fetchStatus!=="idle"&&((c=V(this,Oe))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(V(this,Oe))return V(this,Oe).continueRetry(),V(this,Oe).promise}if(r&&this.setOptions(r),!this.options.queryFn){const C=this.observers.find(S=>S.options.queryFn);C&&this.setOptions(C.options)}const n=new AbortController,a=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(ge(this,It,!0),n.signal)})},i=()=>{const C=po(this.options,s),A=(()=>{const T={client:V(this,Ot),queryKey:this.queryKey,meta:this.meta};return a(T),T})();return ge(this,It,!1),this.options.persister?this.options.persister(C,A,this):C(A)},o=(()=>{const C={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:V(this,Ot),state:this.state,fetchFn:i};return a(C),C})();(f=this.options.behavior)==null||f.onFetch(o,this),ge(this,Wt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=o.fetchOptions)==null?void 0:p.meta))&&De(this,We,ot).call(this,{type:"fetch",meta:(x=o.fetchOptions)==null?void 0:x.meta}),ge(this,Oe,go({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,onCancel:C=>{C instanceof Ws&&C.revert&&this.setState({...V(this,Wt),fetchStatus:"idle"}),n.abort()},onFail:(C,S)=>{De(this,We,ot).call(this,{type:"failed",failureCount:C,error:S})},onPause:()=>{De(this,We,ot).call(this,{type:"pause"})},onContinue:()=>{De(this,We,ot).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const C=await V(this,Oe).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(m=(b=V(this,Ue).config).onSuccess)==null||m.call(b,C,this),(d=(w=V(this,Ue).config).onSettled)==null||d.call(w,C,this.state.error,this),C}catch(C){if(C instanceof Ws){if(C.silent)return V(this,Oe).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw De(this,We,ot).call(this,{type:"error",error:C}),(g=(h=V(this,Ue).config).onError)==null||g.call(h,C,this),(j=(u=V(this,Ue).config).onSettled)==null||j.call(u,this.state.data,C,this),C}finally{this.scheduleGc()}}},Rt=new WeakMap,Wt=new WeakMap,Ue=new WeakMap,Ot=new WeakMap,Oe=new WeakMap,br=new WeakMap,It=new WeakMap,We=new WeakSet,ot=function(r){const s=n=>{switch(r.type){case"failed":return{...n,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Kh(n.data,this.options),fetchMeta:r.meta??null};case"success":const a={...n,...va(r.data,r.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ge(this,Wt,r.manual?a:void 0),a;case"error":const i=r.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...r.state}}};this.state=s(this.state),ze.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),V(this,Ue).notify({query:this,type:"updated",action:r})})},La);function Kh(e,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xo(r.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function va(e,r){return{data:e,dataUpdatedAt:r??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ba(e){const r=typeof e.initialData=="function"?e.initialData():e.initialData,s=r!==void 0,n=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}function wa(e){return{onFetch:(r,s)=>{var p,x,b,m,w;const n=r.options,a=(b=(x=(p=r.fetchOptions)==null?void 0:p.meta)==null?void 0:x.fetchMore)==null?void 0:b.direction,i=((m=r.state.data)==null?void 0:m.pages)||[],l=((w=r.state.data)==null?void 0:w.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const f=async()=>{let d=!1;const h=j=>{Mh(j,()=>r.signal,()=>d=!0)},g=po(r.options,r.fetchOptions),u=async(j,C,S)=>{if(d)return Promise.reject();if(C==null&&j.pages.length)return Promise.resolve(j);const T=(()=>{const K={client:r.client,queryKey:r.queryKey,pageParam:C,direction:S?"backward":"forward",meta:r.options.meta};return h(K),K})(),z=await g(T),{maxPages:O}=r.options,B=S?Lh:zh;return{pages:B(j.pages,z,O),pageParams:B(j.pageParams,C,O)}};if(a&&i.length){const j=a==="backward",C=j?Yh:ja,S={pages:i,pageParams:l},A=C(n,S);o=await u(S,A,j)}else{const j=e??i.length;do{const C=c===0?l[0]??n.initialPageParam:ja(n,o);if(c>0&&C==null)break;o=await u(o,C),c++}while(c<j)}return o};r.options.persister?r.fetchFn=()=>{var d,h;return(h=(d=r.options).persister)==null?void 0:h.call(d,f,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},s)}:r.fetchFn=f}}}function ja(e,{pages:r,pageParams:s}){const n=r.length-1;return r.length>0?e.getNextPageParam(r[n],r,s[n],s):void 0}function Yh(e,{pages:r,pageParams:s}){var n;return r.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,r[0],r,s[0],s):void 0}var wr,Xe,Fe,Dt,Qe,ht,Ma,qh=(Ma=class extends yo{constructor(r){super();Ne(this,Qe);Ne(this,wr);Ne(this,Xe);Ne(this,Fe);Ne(this,Dt);ge(this,wr,r.client),this.mutationId=r.mutationId,ge(this,Fe,r.mutationCache),ge(this,Xe,[]),this.state=r.state||Zh(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){V(this,Xe).includes(r)||(V(this,Xe).push(r),this.clearGcTimeout(),V(this,Fe).notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){ge(this,Xe,V(this,Xe).filter(s=>s!==r)),this.scheduleGc(),V(this,Fe).notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){V(this,Xe).length||(this.state.status==="pending"?this.scheduleGc():V(this,Fe).remove(this))}continue(){var r;return((r=V(this,Dt))==null?void 0:r.continue())??this.execute(this.state.variables)}async execute(r){var l,o,c,f,p,x,b,m,w,d,h,g,u,j,C,S,A,T;const s=()=>{De(this,Qe,ht).call(this,{type:"continue"})},n={client:V(this,wr),meta:this.options.meta,mutationKey:this.options.mutationKey};ge(this,Dt,go({fn:()=>this.options.mutationFn?this.options.mutationFn(r,n):Promise.reject(new Error("No mutationFn found")),onFail:(z,O)=>{De(this,Qe,ht).call(this,{type:"failed",failureCount:z,error:O})},onPause:()=>{De(this,Qe,ht).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,Fe).canRun(this)}));const a=this.state.status==="pending",i=!V(this,Dt).canStart();try{if(a)s();else{De(this,Qe,ht).call(this,{type:"pending",variables:r,isPaused:i}),V(this,Fe).config.onMutate&&await V(this,Fe).config.onMutate(r,this,n);const O=await((o=(l=this.options).onMutate)==null?void 0:o.call(l,r,n));O!==this.state.context&&De(this,Qe,ht).call(this,{type:"pending",context:O,variables:r,isPaused:i})}const z=await V(this,Dt).start();return await((f=(c=V(this,Fe).config).onSuccess)==null?void 0:f.call(c,z,r,this.state.context,this,n)),await((x=(p=this.options).onSuccess)==null?void 0:x.call(p,z,r,this.state.context,n)),await((m=(b=V(this,Fe).config).onSettled)==null?void 0:m.call(b,z,null,this.state.variables,this.state.context,this,n)),await((d=(w=this.options).onSettled)==null?void 0:d.call(w,z,null,r,this.state.context,n)),De(this,Qe,ht).call(this,{type:"success",data:z}),z}catch(z){try{await((g=(h=V(this,Fe).config).onError)==null?void 0:g.call(h,z,r,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((j=(u=this.options).onError)==null?void 0:j.call(u,z,r,this.state.context,n))}catch(O){Promise.reject(O)}try{await((S=(C=V(this,Fe).config).onSettled)==null?void 0:S.call(C,void 0,z,this.state.variables,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((T=(A=this.options).onSettled)==null?void 0:T.call(A,void 0,z,r,this.state.context,n))}catch(O){Promise.reject(O)}throw De(this,Qe,ht).call(this,{type:"error",error:z}),z}finally{V(this,Fe).runNext(this)}}},wr=new WeakMap,Xe=new WeakMap,Fe=new WeakMap,Dt=new WeakMap,Qe=new WeakSet,ht=function(r){const s=n=>{switch(r.type){case"failed":return{...n,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...n,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:r.error,failureCount:n.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=s(this.state),ze.batch(()=>{V(this,Xe).forEach(n=>{n.onMutationUpdate(r)}),V(this,Fe).notify({mutation:this,type:"updated",action:r})})},Ma);function Zh(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var lt,Ge,jr,$a,Xh=($a=class extends ds{constructor(r={}){super();Ne(this,lt);Ne(this,Ge);Ne(this,jr);this.config=r,ge(this,lt,new Set),ge(this,Ge,new Map),ge(this,jr,0)}build(r,s,n){const a=new qh({client:r,mutationCache:this,mutationId:++Ar(this,jr)._,options:r.defaultMutationOptions(s),state:n});return this.add(a),a}add(r){V(this,lt).add(r);const s=Or(r);if(typeof s=="string"){const n=V(this,Ge).get(s);n?n.push(r):V(this,Ge).set(s,[r])}this.notify({type:"added",mutation:r})}remove(r){if(V(this,lt).delete(r)){const s=Or(r);if(typeof s=="string"){const n=V(this,Ge).get(s);if(n)if(n.length>1){const a=n.indexOf(r);a!==-1&&n.splice(a,1)}else n[0]===r&&V(this,Ge).delete(s)}}this.notify({type:"removed",mutation:r})}canRun(r){const s=Or(r);if(typeof s=="string"){const n=V(this,Ge).get(s),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===r}else return!0}runNext(r){var n;const s=Or(r);if(typeof s=="string"){const a=(n=V(this,Ge).get(s))==null?void 0:n.find(i=>i!==r&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ze.batch(()=>{V(this,lt).forEach(r=>{this.notify({type:"removed",mutation:r})}),V(this,lt).clear(),V(this,Ge).clear()})}getAll(){return Array.from(V(this,lt))}find(r){const s={exact:!0,...r};return this.getAll().find(n=>xa(s,n))}findAll(r={}){return this.getAll().filter(s=>xa(r,s))}notify(r){ze.batch(()=>{this.listeners.forEach(s=>{s(r)})})}resumePausedMutations(){const r=this.getAll().filter(s=>s.state.isPaused);return ze.batch(()=>Promise.all(r.map(s=>s.continue().catch(He))))}},lt=new WeakMap,Ge=new WeakMap,jr=new WeakMap,$a);function Or(e){var r;return(r=e.options.scope)==null?void 0:r.id}var Je,Ba,Qh=(Ba=class extends ds{constructor(r={}){super();Ne(this,Je);this.config=r,ge(this,Je,new Map)}build(r,s,n){const a=s.queryKey,i=s.queryHash??Tn(a,s);let l=this.get(i);return l||(l=new Gh({client:r,queryKey:a,queryHash:i,options:r.defaultQueryOptions(s),state:n,defaultOptions:r.getQueryDefaults(a)}),this.add(l)),l}add(r){V(this,Je).has(r.queryHash)||(V(this,Je).set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){const s=V(this,Je).get(r.queryHash);s&&(r.destroy(),s===r&&V(this,Je).delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){ze.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return V(this,Je).get(r)}getAll(){return[...V(this,Je).values()]}find(r){const s={exact:!0,...r};return this.getAll().find(n=>ma(s,n))}findAll(r={}){const s=this.getAll();return Object.keys(r).length>0?s.filter(n=>ma(r,n)):s}notify(r){ze.batch(()=>{this.listeners.forEach(s=>{s(r)})})}onFocus(){ze.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){ze.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}},Je=new WeakMap,Ba),Ee,gt,yt,Gt,Kt,vt,Yt,qt,Ua,Jh=(Ua=class{constructor(e={}){Ne(this,Ee);Ne(this,gt);Ne(this,yt);Ne(this,Gt);Ne(this,Kt);Ne(this,vt);Ne(this,Yt);Ne(this,qt);ge(this,Ee,e.queryCache||new Qh),ge(this,gt,e.mutationCache||new Xh),ge(this,yt,e.defaultOptions||{}),ge(this,Gt,new Map),ge(this,Kt,new Map),ge(this,vt,0)}mount(){Ar(this,vt)._++,V(this,vt)===1&&(ge(this,Yt,mo.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,Ee).onFocus())})),ge(this,qt,Gr.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,Ee).onOnline())})))}unmount(){var e,r;Ar(this,vt)._--,V(this,vt)===0&&((e=V(this,Yt))==null||e.call(this),ge(this,Yt,void 0),(r=V(this,qt))==null||r.call(this),ge(this,qt,void 0))}isFetching(e){return V(this,Ee).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return V(this,gt).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const r=this.defaultQueryOptions({queryKey:e});return(s=V(this,Ee).get(r.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const r=this.defaultQueryOptions(e),s=V(this,Ee).build(this,r),n=s.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Vs(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(n))}getQueriesData(e){return V(this,Ee).findAll(e).map(({queryKey:r,state:s})=>{const n=s.data;return[r,n]})}setQueryData(e,r,s){const n=this.defaultQueryOptions({queryKey:e}),a=V(this,Ee).get(n.queryHash),i=a==null?void 0:a.state.data,l=Th(r,i);if(l!==void 0)return V(this,Ee).build(this,n).setData(l,{...s,manual:!0})}setQueriesData(e,r,s){return ze.batch(()=>V(this,Ee).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,r,s)]))}getQueryState(e){var s;const r=this.defaultQueryOptions({queryKey:e});return(s=V(this,Ee).get(r.queryHash))==null?void 0:s.state}removeQueries(e){const r=V(this,Ee);ze.batch(()=>{r.findAll(e).forEach(s=>{r.remove(s)})})}resetQueries(e,r){const s=V(this,Ee);return ze.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},r)))}cancelQueries(e,r={}){const s={revert:!0,...r},n=ze.batch(()=>V(this,Ee).findAll(e).map(a=>a.cancel(s)));return Promise.all(n).then(He).catch(He)}invalidateQueries(e,r={}){return ze.batch(()=>(V(this,Ee).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},r)))}refetchQueries(e,r={}){const s={...r,cancelRefetch:r.cancelRefetch??!0},n=ze.batch(()=>V(this,Ee).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(He)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(He)}fetchQuery(e){const r=this.defaultQueryOptions(e);r.retry===void 0&&(r.retry=!1);const s=V(this,Ee).build(this,r);return s.isStaleByTime(Vs(r.staleTime,s))?s.fetch(r):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(He).catch(He)}fetchInfiniteQuery(e){return e.behavior=wa(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(He).catch(He)}ensureInfiniteQueryData(e){return e.behavior=wa(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Gr.isOnline()?V(this,gt).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,Ee)}getMutationCache(){return V(this,gt)}getDefaultOptions(){return V(this,yt)}setDefaultOptions(e){ge(this,yt,e)}setQueryDefaults(e,r){V(this,Gt).set(yr(e),{queryKey:e,defaultOptions:r})}getQueryDefaults(e){const r=[...V(this,Gt).values()],s={};return r.forEach(n=>{vr(e,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(e,r){V(this,Kt).set(yr(e),{mutationKey:e,defaultOptions:r})}getMutationDefaults(e){const r=[...V(this,Kt).values()],s={};return r.forEach(n=>{vr(e,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const r={...V(this,yt).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return r.queryHash||(r.queryHash=Tn(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===Pn&&(r.enabled=!1),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...V(this,yt).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){V(this,Ee).clear(),V(this,gt).clear()}},Ee=new WeakMap,gt=new WeakMap,yt=new WeakMap,Gt=new WeakMap,Kt=new WeakMap,vt=new WeakMap,Yt=new WeakMap,qt=new WeakMap,Ua),ep=N.createContext(void 0),tp=({client:e,children:r})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),t.jsx(ep.Provider,{value:e,children:r}));class rp extends N.Component{constructor(){super(...arguments);ur(this,"state",{hasError:!1,error:null,errorInfo:null});ur(this,"handleReload",()=>{window.location.reload()});ur(this,"handleGoHome",()=>{window.location.href="/"});ur(this,"handleReportBug",()=>{var a,i,l;const s=`Error: ${(a=this.state.error)==null?void 0:a.message}

Stack: ${(i=this.state.error)==null?void 0:i.stack}

Component Stack: ${(l=this.state.errorInfo)==null?void 0:l.componentStack}`,n=`mailto:support@deckforge.com?subject=DeckForge Error Report&body=${encodeURIComponent(s)}`;window.location.href=n})}static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,n){console.error("ErrorBoundary caught an error:",s,n),this.setState({error:s,errorInfo:n});try{const a=localStorage.getItem("deckforge-autosave");if(a){const i={timestamp:new Date().toISOString(),state:a};localStorage.setItem("deckforge-crash-backup",JSON.stringify(i))}}catch(a){console.error("Failed to save crash backup:",a)}}render(){var s,n;return this.state.hasError?this.props.fallback?this.props.fallback:t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:t.jsx("div",{className:"max-w-2xl w-full",children:t.jsxs("div",{className:"bg-card border-2 border-destructive p-8 space-y-6",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"w-20 h-20 rounded-full bg-destructive/20 flex items-center justify-center",children:t.jsx(Gn,{className:"w-10 h-10 text-destructive"})})}),t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("h1",{className:"font-display text-2xl uppercase tracking-widest",children:"Something Went Wrong"}),t.jsx("p",{className:"text-muted-foreground",children:"DeckForge encountered an unexpected error"})]}),t.jsxs("details",{className:"bg-secondary p-4 rounded border border-border",children:[t.jsx("summary",{className:"cursor-pointer text-sm font-mono text-muted-foreground hover:text-foreground transition-colors",children:"Technical Details (click to expand)"}),t.jsx("div",{className:"mt-4 space-y-2",children:t.jsxs("div",{className:"text-xs font-mono bg-background p-3 rounded overflow-auto max-h-40",children:[t.jsx("p",{className:"text-destructive font-semibold",children:(s=this.state.error)==null?void 0:s.message}),((n=this.state.error)==null?void 0:n.stack)&&t.jsx("pre",{className:"mt-2 text-muted-foreground text-[10px] whitespace-pre-wrap",children:this.state.error.stack})]})})]}),t.jsx("div",{className:"bg-accent/10 border border-accent/30 p-4 rounded",children:t.jsxs("p",{className:"text-sm text-foreground flex items-start gap-2",children:[t.jsx("span",{className:"text-lg",children:""}),t.jsxs("span",{children:[t.jsx("strong",{children:"Your work may be saved!"})," We automatically backed up your design before the crash. Try reloading the page to recover it."]})]})}),t.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[t.jsxs(se,{onClick:this.handleReload,className:"gap-2",children:[t.jsx(Tc,{className:"w-4 h-4"}),"Reload Page"]}),t.jsxs(se,{onClick:this.handleGoHome,variant:"outline",className:"gap-2",children:[t.jsx(Pc,{className:"w-4 h-4"}),"Go to Dashboard"]}),t.jsxs(se,{onClick:this.handleReportBug,variant:"outline",className:"gap-2",children:[t.jsx(Gn,{className:"w-4 h-4"}),"Report Bug"]})]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-xs text-muted-foreground",children:["If this keeps happening,"," ",t.jsx("a",{href:"/designs",className:"text-accent hover:underline",children:"try starting a new design"})," ","or"," ",t.jsx("a",{href:"mailto:support@deckforge.com",className:"text-accent hover:underline",children:"contact support"})]})})]})})}):this.props.children}}const sp="modulepreload",np=function(e){return"/"+e},Na={},Ct=function(r,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(s.map(c=>{if(c=np(c),c in Na)return;Na[c]=!0;const f=c.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":sp,f||(x.as="script"),x.crossOrigin="",x.href=c,o&&x.setAttribute("nonce",o),document.head.appendChild(x),f)return new Promise((b,m)=>{x.addEventListener("load",b),x.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return r().catch(i)})},Es=[{id:"pen",icon:cn,label:"Pen Tool",shortcut:"P",description:"Draw custom shapes with click-to-point or free draw"},{id:"stickers",icon:qa,label:"Stickers",shortcut:"S",description:"Add vector icons and decals from library"},{id:"lines",icon:Za,label:"Lines",shortcut:"L",description:"Draw straight, curved, and decorative lines"},{id:"patterns",icon:Xa,label:"Patterns",description:"Apply procedural patterns (checkerboard, stripes, etc.)"},{id:"textures",icon:dn,label:"Textures",description:"Add realistic texture overlays (concrete, rust, graffiti)"},{id:"graphics",icon:Qa,label:"Graphics",shortcut:"G",description:"Basic shapes (circle, square, star)"},{id:"text",icon:qr,label:"Text",shortcut:"T",description:"Add text with custom fonts and styling"},{id:"uploads",icon:Ja,label:"Uploads",shortcut:"U",description:"Upload your own images, SVGs, and assets"},{id:"finishes",icon:$r,label:"Finishes",description:"Apply print textures (scratched wood, grip tape, halftone)"}];function Ca(){const{activeTool:e,setActiveTool:r}=Ae();return N.useEffect(()=>{const s=n=>{if(n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.ctrlKey||n.metaKey||n.altKey)return;const a=n.key.toLowerCase(),i=Es.find(l=>{var o;return((o=l.shortcut)==null?void 0:o.toLowerCase())===a});i&&(n.preventDefault(),r(e===i.id?null:i.id))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,r]),t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"hidden md:flex flex-col w-14 bg-card border-r border-border h-full",children:[t.jsx("div",{className:"py-4 px-2 border-b border-border",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground block text-center",children:"Tools"})}),t.jsx(ct,{className:"flex-1",children:t.jsx("div",{className:"flex flex-col gap-1 p-2",children:Es.map(s=>{const n=s.icon,a=e===s.id;return t.jsxs(En,{delayDuration:300,children:[t.jsx(An,{asChild:!0,children:t.jsx("button",{onClick:()=>r(a?null:s.id),className:we("w-10 h-10 flex items-center justify-center border border-transparent","hover:border-border hover:bg-secondary transition-colors duration-75",a&&"tool-active border-primary"),children:t.jsx(n,{className:"w-5 h-5",strokeWidth:1.5})})}),t.jsx(cs,{side:"right",className:"max-w-xs",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsx("span",{className:"font-semibold",children:s.label}),s.shortcut&&t.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted border border-border rounded font-mono",children:s.shortcut})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]})})]},s.id)})})})]}),t.jsx("div",{className:"md:hidden w-full bg-card border-b border-border",children:t.jsx(ct,{className:"w-full",orientation:"horizontal",children:t.jsx("div",{className:"flex gap-1 p-2",children:Es.map(s=>{const n=s.icon,a=e===s.id;return t.jsxs("button",{onClick:()=>r(a?null:s.id),className:we("min-w-[64px] h-16 flex flex-col items-center justify-center gap-1 border border-transparent shrink-0","active:bg-secondary/80 active:scale-95 transition-all duration-75 touch-manipulation",a&&"tool-active border-primary bg-primary/10"),children:[t.jsx(n,{className:"w-5 h-5",strokeWidth:1.5}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:s.label})]},s.id)})})})})]})}function Rn(e){const r=N.useRef({value:e,previous:e});return N.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}var vo=["PageUp","PageDown"],bo=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],wo={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},lr="Slider",[Gs,ap,ip]=Qr(lr),[jo]=nt(lr,[ip]),[op,fs]=jo(lr),No=N.forwardRef((e,r)=>{const{name:s,min:n=0,max:a=100,step:i=1,orientation:l="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:f=[n],value:p,onValueChange:x=()=>{},onValueCommit:b=()=>{},inverted:m=!1,form:w,...d}=e,h=N.useRef(new Set),g=N.useRef(0),j=l==="horizontal"?lp:cp,[C=[],S]=rt({prop:p,defaultProp:f,onChange:K=>{var P;(P=[...h.current][g.current])==null||P.focus(),x(K)}}),A=N.useRef(C);function T(K){const k=pp(C,K);B(K,k)}function z(K){B(K,g.current)}function O(){const K=A.current[g.current];C[g.current]!==K&&b(C)}function B(K,k,{commit:P}={commit:!1}){const y=yp(i),I=vp(Math.round((K-n)/i)*i+n,y),X=Lr(I,[n,a]);S((M=[])=>{const q=fp(M,X,k);if(gp(q,c*i)){g.current=q.indexOf(X);const U=String(q)!==String(M);return U&&P&&b(q),U?q:M}else return M})}return t.jsx(op,{scope:e.__scopeSlider,name:s,disabled:o,min:n,max:a,valueIndexToChangeRef:g,thumbs:h.current,values:C,orientation:l,form:w,children:t.jsx(Gs.Provider,{scope:e.__scopeSlider,children:t.jsx(Gs.Slot,{scope:e.__scopeSlider,children:t.jsx(j,{"aria-disabled":o,"data-disabled":o?"":void 0,...d,ref:r,onPointerDown:xe(d.onPointerDown,()=>{o||(A.current=C)}),min:n,max:a,inverted:m,onSlideStart:o?void 0:T,onSlideMove:o?void 0:z,onSlideEnd:o?void 0:O,onHomeKeyDown:()=>!o&&B(n,0,{commit:!0}),onEndKeyDown:()=>!o&&B(a,C.length-1,{commit:!0}),onStepKeyDown:({event:K,direction:k})=>{if(!o){const I=vo.includes(K.key)||K.shiftKey&&bo.includes(K.key)?10:1,X=g.current,M=C[X],q=i*I*k;B(M+q,X,{commit:!0})}}})})})})});No.displayName=lr;var[Co,ko]=jo(lr,{startEdge:"left",endEdge:"right",size:"width",direction:1}),lp=N.forwardRef((e,r)=>{const{min:s,max:n,dir:a,inverted:i,onSlideStart:l,onSlideMove:o,onSlideEnd:c,onStepKeyDown:f,...p}=e,[x,b]=N.useState(null),m=ke(r,j=>b(j)),w=N.useRef(void 0),d=ln(a),h=d==="ltr",g=h&&!i||!h&&i;function u(j){const C=w.current||x.getBoundingClientRect(),S=[0,C.width],T=On(S,g?[s,n]:[n,s]);return w.current=C,T(j-C.left)}return t.jsx(Co,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:t.jsx(So,{dir:d,"data-orientation":"horizontal",...p,ref:m,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const C=u(j.clientX);l==null||l(C)},onSlideMove:j=>{const C=u(j.clientX);o==null||o(C)},onSlideEnd:()=>{w.current=void 0,c==null||c()},onStepKeyDown:j=>{const S=wo[g?"from-left":"from-right"].includes(j.key);f==null||f({event:j,direction:S?-1:1})}})})}),cp=N.forwardRef((e,r)=>{const{min:s,max:n,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:o,onStepKeyDown:c,...f}=e,p=N.useRef(null),x=ke(r,p),b=N.useRef(void 0),m=!a;function w(d){const h=b.current||p.current.getBoundingClientRect(),g=[0,h.height],j=On(g,m?[n,s]:[s,n]);return b.current=h,j(d-h.top)}return t.jsx(Co,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:t.jsx(So,{"data-orientation":"vertical",...f,ref:x,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:d=>{const h=w(d.clientY);i==null||i(h)},onSlideMove:d=>{const h=w(d.clientY);l==null||l(h)},onSlideEnd:()=>{b.current=void 0,o==null||o()},onStepKeyDown:d=>{const g=wo[m?"from-bottom":"from-top"].includes(d.key);c==null||c({event:d,direction:g?-1:1})}})})}),So=N.forwardRef((e,r)=>{const{__scopeSlider:s,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:o,onStepKeyDown:c,...f}=e,p=fs(lr,s);return t.jsx(be.span,{...f,ref:r,onKeyDown:xe(e.onKeyDown,x=>{x.key==="Home"?(l(x),x.preventDefault()):x.key==="End"?(o(x),x.preventDefault()):vo.concat(bo).includes(x.key)&&(c(x),x.preventDefault())}),onPointerDown:xe(e.onPointerDown,x=>{const b=x.target;b.setPointerCapture(x.pointerId),x.preventDefault(),p.thumbs.has(b)?b.focus():n(x)}),onPointerMove:xe(e.onPointerMove,x=>{x.target.hasPointerCapture(x.pointerId)&&a(x)}),onPointerUp:xe(e.onPointerUp,x=>{const b=x.target;b.hasPointerCapture(x.pointerId)&&(b.releasePointerCapture(x.pointerId),i(x))})})}),_o="SliderTrack",Eo=N.forwardRef((e,r)=>{const{__scopeSlider:s,...n}=e,a=fs(_o,s);return t.jsx(be.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:r})});Eo.displayName=_o;var Ks="SliderRange",Ao=N.forwardRef((e,r)=>{const{__scopeSlider:s,...n}=e,a=fs(Ks,s),i=ko(Ks,s),l=N.useRef(null),o=ke(r,l),c=a.values.length,f=a.values.map(b=>Ro(b,a.min,a.max)),p=c>1?Math.min(...f):0,x=100-Math.max(...f);return t.jsx(be.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:o,style:{...e.style,[i.startEdge]:p+"%",[i.endEdge]:x+"%"}})});Ao.displayName=Ks;var Ys="SliderThumb",To=N.forwardRef((e,r)=>{const s=ap(e.__scopeSlider),[n,a]=N.useState(null),i=ke(r,o=>a(o)),l=N.useMemo(()=>n?s().findIndex(o=>o.ref.current===n):-1,[s,n]);return t.jsx(dp,{...e,ref:i,index:l})}),dp=N.forwardRef((e,r)=>{const{__scopeSlider:s,index:n,name:a,...i}=e,l=fs(Ys,s),o=ko(Ys,s),[c,f]=N.useState(null),p=ke(r,u=>f(u)),x=c?l.form||!!c.closest("form"):!0,b=wn(c),m=l.values[n],w=m===void 0?0:Ro(m,l.min,l.max),d=hp(n,l.values.length),h=b==null?void 0:b[o.size],g=h?mp(h,w,o.direction):0;return N.useEffect(()=>{if(c)return l.thumbs.add(c),()=>{l.thumbs.delete(c)}},[c,l.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${w}% + ${g}px)`},children:[t.jsx(Gs.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(be.span,{role:"slider","aria-label":e["aria-label"]||d,"aria-valuemin":l.min,"aria-valuenow":m,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:p,style:m===void 0?{display:"none"}:e.style,onFocus:xe(e.onFocus,()=>{l.valueIndexToChangeRef.current=n})})}),x&&t.jsx(Po,{name:a??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:m},n)]})});To.displayName=Ys;var up="RadioBubbleInput",Po=N.forwardRef(({__scopeSlider:e,value:r,...s},n)=>{const a=N.useRef(null),i=ke(a,n),l=Rn(r);return N.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==r&&p){const x=new Event("input",{bubbles:!0});p.call(o,r),o.dispatchEvent(x)}},[l,r]),t.jsx(be.input,{style:{display:"none"},...s,ref:i,defaultValue:r})});Po.displayName=up;function fp(e=[],r,s){const n=[...e];return n[s]=r,n.sort((a,i)=>a-i)}function Ro(e,r,s){const i=100/(s-r)*(e-r);return Lr(i,[0,100])}function hp(e,r){return r>2?`Value ${e+1} of ${r}`:r===2?["Minimum","Maximum"][e]:void 0}function pp(e,r){if(e.length===1)return 0;const s=e.map(a=>Math.abs(a-r)),n=Math.min(...s);return s.indexOf(n)}function mp(e,r,s){const n=e/2,i=On([0,50],[0,n]);return(n-i(r)*s)*s}function xp(e){return e.slice(0,-1).map((r,s)=>e[s+1]-r)}function gp(e,r){if(r>0){const s=xp(e);return Math.min(...s)>=r}return!0}function On(e,r){return s=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(e[1]-e[0]);return r[0]+n*(s-e[0])}}function yp(e){return(String(e).split(".")[1]||"").length}function vp(e,r){const s=Math.pow(10,r);return Math.round(e*s)/s}var Oo=No,bp=Eo,wp=Ao,jp=To;const _e=N.forwardRef(({className:e,...r},s)=>t.jsxs(Oo,{ref:s,className:we("relative flex w-full touch-none select-none items-center",e),...r,children:[t.jsx(bp,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:t.jsx(wp,{className:"absolute h-full bg-primary"})}),t.jsx(jp,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));_e.displayName=Oo.displayName;async function Np(e){const r=await e.text(),n=new DOMParser().parseFromString(r,"image/svg+xml");if(n.querySelector("parsererror"))throw new Error("Invalid SVG file");const i=n.querySelector("svg");if(!i)throw new Error("No SVG element found");const l=i.getAttribute("viewBox");let o=parseFloat(i.getAttribute("width")||"100"),c=parseFloat(i.getAttribute("height")||"100");if(l){const[,,x,b]=l.split(/\s+/).map(parseFloat);o=x||o,c=b||c}const f=[];if(i.querySelectorAll("rect, circle, ellipse, path, polygon, polyline, line").forEach(x=>{const b=Cp(x,o,c);b&&f.push(b)}),f.length===0){const x=new XMLSerializer().serializeToString(i),b=new Blob([x],{type:"image/svg+xml"}),m=URL.createObjectURL(b);f.push({type:"image",x:0,y:0,width:Math.min(o,200),height:Math.min(c,200),rotation:0,opacity:1,scaleX:1,scaleY:1,src:m})}return f}function Cp(e,r,s){const n=e.tagName.toLowerCase(),a=e.getAttribute("fill")||"#000000",i=e.getAttribute("stroke")||"",l=parseFloat(e.getAttribute("stroke-width")||"0"),o=parseFloat(e.getAttribute("opacity")||"1");if(a==="none"&&!i)return null;switch(n){case"rect":return kp(e,a,i,l,o);case"circle":return Sp(e,a,i,l,o);case"ellipse":return _p(e,a,i,l,o);case"line":return Ep(e,i||a,l,o);case"path":case"polygon":case"polyline":return Ap(e,r,s,o);default:return null}}function kp(e,r,s,n,a){const i=parseFloat(e.getAttribute("x")||"0"),l=parseFloat(e.getAttribute("y")||"0"),o=parseFloat(e.getAttribute("width")||"100"),c=parseFloat(e.getAttribute("height")||"100");return{type:"shape",shapeType:"rect",x:i,y:l,width:o,height:c,rotation:0,opacity:a,scaleX:1,scaleY:1,fill:r!=="none"?r:void 0,stroke:s||void 0,strokeWidth:n}}function Sp(e,r,s,n,a){const i=parseFloat(e.getAttribute("cx")||"50"),l=parseFloat(e.getAttribute("cy")||"50"),o=parseFloat(e.getAttribute("r")||"25");return{type:"shape",shapeType:"circle",x:i-o,y:l-o,width:o*2,height:o*2,rotation:0,opacity:a,scaleX:1,scaleY:1,fill:r!=="none"?r:void 0,stroke:s||void 0,strokeWidth:n}}function _p(e,r,s,n,a){const i=parseFloat(e.getAttribute("cx")||"50"),l=parseFloat(e.getAttribute("cy")||"50"),o=parseFloat(e.getAttribute("rx")||"25"),c=parseFloat(e.getAttribute("ry")||"25");return{type:"shape",shapeType:"circle",x:i-o,y:l-c,width:o*2,height:c*2,rotation:0,opacity:a,scaleX:1,scaleY:c/o,fill:r!=="none"?r:void 0,stroke:s||void 0,strokeWidth:n}}function Ep(e,r,s,n){const a=parseFloat(e.getAttribute("x1")||"0"),i=parseFloat(e.getAttribute("y1")||"0"),l=parseFloat(e.getAttribute("x2")||"100"),o=parseFloat(e.getAttribute("y2")||"100");return{type:"line",x:a,y:i,width:Math.abs(l-a),height:Math.abs(o-i),rotation:0,opacity:n,scaleX:1,scaleY:1,lineType:"straight",lineEndX:l-a,lineEndY:o-i,stroke:r||"#000000",strokeWidth:s||2,lineCapStyle:"round"}}function Ap(e,r,s,n){let a={x:0,y:0,width:100,height:100};try{const p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.style.position="absolute",p.style.visibility="hidden";const x=e.cloneNode(!0);if(p.appendChild(x),document.body.appendChild(p),x.getBBox){const b=x.getBBox();a={x:b.x,y:b.y,width:b.width,height:b.height}}document.body.removeChild(p)}catch(p){console.warn("Failed to get accurate bounding box, using defaults",p)}const i=e.cloneNode(!0),l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("viewBox",`${a.x} ${a.y} ${a.width} ${a.height}`),l.setAttribute("width",String(a.width)),l.setAttribute("height",String(a.height)),l.appendChild(i);const o=new XMLSerializer().serializeToString(l),c=new Blob([o],{type:"image/svg+xml"}),f=URL.createObjectURL(c);return{type:"image",x:a.x,y:a.y,width:a.width,height:a.height,rotation:0,opacity:n,scaleX:1,scaleY:1,src:f}}function Tp(e){const r=["image/svg+xml","image/svg","text/xml"],s=[".svg"],n=r.includes(e.type),a=s.some(i=>e.name.toLowerCase().endsWith(i));return n||a}const ka={edgy:[{name:"Skull",icon:pd},{name:"Flame",icon:md},{name:"Zap",icon:xd},{name:"Sword",icon:gd},{name:"Ghost",icon:yd},{name:"Bug",icon:vd},{name:"Eye",icon:mr},{name:"Target",icon:Kn},{name:"Bomb",icon:bd},{name:"Swords",icon:wd},{name:"Shield",icon:jd},{name:"Crosshair",icon:Nd}],retro:[{name:"Radio",icon:sd},{name:"Disc",icon:nd},{name:"Music",icon:ad},{name:"Rocket",icon:id},{name:"Crown",icon:od},{name:"Anchor",icon:ld},{name:"Sun",icon:ri},{name:"Moon",icon:cd},{name:"Camera",icon:dd},{name:"Gamepad",icon:ud},{name:"Headphones",icon:fd},{name:"Watch",icon:hd}],shapes:[{name:"Triangle",icon:ed},{name:"Hexagon",icon:td},{name:"Circle",icon:ei},{name:"Square",icon:Br},{name:"Star",icon:ti},{name:"Heart",icon:fr},{name:"Sparkles",icon:bt},{name:"Hand",icon:rd}],nature:[{name:"Cat",icon:Gc},{name:"Dog",icon:Kc},{name:"Fish",icon:Yc},{name:"Bird",icon:qc},{name:"Leaf",icon:Zc},{name:"Cloud",icon:Xc},{name:"Mountain",icon:dn},{name:"Waves",icon:Qc},{name:"Feather",icon:Jc}],street:[{name:"Pizza",icon:Mc},{name:"Coffee",icon:$c},{name:"Cherry",icon:Bc},{name:"Glasses",icon:Uc},{name:"Lock",icon:pr},{name:"Key",icon:Vc},{name:"Fingerprint",icon:Hc},{name:"Compass",icon:Wc}],sports:[{name:"Trophy",icon:Dc},{name:"Award",icon:Fc},{name:"Medal",icon:zc},{name:"Dumbbell",icon:Lc},{name:"Target",icon:Kn}],emoji:[{name:"Laugh",icon:Rc},{name:"Smile",icon:Oc},{name:"Frown",icon:Ic}]},Pp=[{id:"checkerboard",name:"Checkerboard",description:"Vans style"},{id:"speed-lines",name:"Speed Lines",description:"Racing stripes"},{id:"halftone",name:"Halftone",description:"Comic book dots"},{id:"noise",name:"Noise",description:"Grainy texture"},{id:"tie-dye",name:"Tie-Dye",description:"Psychedelic swirl"},{id:"diagonal-stripes",name:"Diagonal Stripes",description:"Bold lines"},{id:"hexagons",name:"Hexagons",description:"Honeycomb pattern"},{id:"crosshatch",name:"Crosshatch",description:"Grid overlay"}],Rp=[{id:"concrete",name:"Concrete",query:"concrete texture"},{id:"rust",name:"Rust",query:"rust metal texture"},{id:"graffiti",name:"Graffiti",query:"graffiti wall"},{id:"wood",name:"Wood Grain",query:"wood grain texture"},{id:"sticker-bomb",name:"Sticker Bomb",query:"sticker collage"},{id:"asphalt",name:"Asphalt",query:"asphalt pavement"},{id:"brick",name:"Brick Wall",query:"red brick wall"},{id:"marble",name:"Marble",query:"white marble texture"},{id:"carbon-fiber",name:"Carbon Fiber",query:"carbon fiber weave"},{id:"splatter",name:"Paint Splatter",query:"paint splatter drips"}],Op=[{id:"g1",label:"Circle",shapeType:"circle"},{id:"g2",label:"Square",shapeType:"rect"},{id:"g4",label:"Star",shapeType:"star"}],Ip={"scratched-wood":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Cpath d='M5 10 L55 8 M10 25 L50 27 M8 40 L52 38 M15 52 L45 55' stroke='%23444' stroke-width='0.5' fill='none'/%3E%3Cpath d='M20 5 L22 55 M35 8 L37 52 M48 3 L50 57' stroke='%23333' stroke-width='0.3' fill='none'/%3E%3C/svg%3E","grip-tape-dust":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Ccircle cx='10' cy='15' r='1' fill='%23555'/%3E%3Ccircle cx='25' cy='8' r='0.5' fill='%23444'/%3E%3Ccircle cx='45' cy='20' r='1.5' fill='%23555'/%3E%3Ccircle cx='15' cy='35' r='0.8' fill='%23444'/%3E%3Ccircle cx='50' cy='45' r='1' fill='%23555'/%3E%3Ccircle cx='30' cy='50' r='0.6' fill='%23444'/%3E%3Ccircle cx='8' cy='55' r='1.2' fill='%23555'/%3E%3Ccircle cx='40' cy='30' r='0.7' fill='%23444'/%3E%3C/svg%3E","halftone-dots":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Crect fill='%23222'/%3E%3Ccircle cx='10' cy='10' r='3' fill='%23444'/%3E%3Ccircle cx='30' cy='10' r='2' fill='%23444'/%3E%3Ccircle cx='50' cy='10' r='3' fill='%23444'/%3E%3Ccircle cx='20' cy='30' r='2.5' fill='%23444'/%3E%3Ccircle cx='40' cy='30' r='2' fill='%23444'/%3E%3Ccircle cx='10' cy='50' r='2' fill='%23444'/%3E%3Ccircle cx='30' cy='50' r='3' fill='%23444'/%3E%3Ccircle cx='50' cy='50' r='2.5' fill='%23444'/%3E%3C/svg%3E"};function Dp({onAddObject:e,deckCenterX:r,deckCenterY:s}){const[n,a]=N.useState("edgy"),i=l=>{e({type:"sticker",x:r-20,y:s-20,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:l,strokeWidth:3,stroke:"#ffffff",solidFill:!1})};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Vector stickers from Lucide icons. Click to add as large decals."}),t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(ka).map(l=>t.jsx("button",{onClick:()=>a(l),className:we("px-2 py-1 text-[9px] uppercase tracking-wider border transition-colors",n===l?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"),children:l},l))}),t.jsx("div",{className:"grid grid-cols-4 gap-2",children:ka[n].map(l=>{const o=l.icon;return t.jsx("button",{onClick:()=>i(l.name),className:"aspect-square border border-border bg-secondary hover:border-primary transition-colors flex items-center justify-center",title:l.name,children:t.jsx(o,{className:"w-6 h-6",strokeWidth:3})},l.name)})}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:'Tip: Use the Inspector to toggle "Solid Fill" and adjust stroke width.'})]})}function Fp({onAddObject:e,deckCenterX:r,deckCenterY:s}){const[n,a]=N.useState("#ccff00"),[i,l]=N.useState("#000000"),[o,c]=N.useState(20),f=x=>{switch(x){case"checkerboard":return`conic-gradient(from 90deg at 1px 1px, ${i} 90deg, ${n} 0) 0 0/${o}px ${o}px`;case"speed-lines":return`repeating-linear-gradient(90deg, ${n} 0px, ${n} ${o/4}px, ${i} ${o/4}px, ${i} ${o/2}px)`;case"halftone":return`radial-gradient(${n} ${o/6}px, ${i} ${o/6}px)`;case"noise":return i;case"tie-dye":return`radial-gradient(ellipse at 30% 30%, ${n}, transparent 50%), radial-gradient(ellipse at 70% 70%, ${i}, transparent 50%), ${n}`;case"diagonal-stripes":return`repeating-linear-gradient(45deg, ${n} 0px, ${n} ${o}px, ${i} ${o}px, ${i} ${o*2}px)`;case"hexagons":return`repeating-conic-gradient(from 30deg, ${n} 0deg 60deg, ${i} 60deg 120deg, ${n} 120deg 180deg, ${i} 180deg 240deg, ${n} 240deg 300deg, ${i} 300deg 360deg) 0 0/${o*2}px ${o*2}px`;case"crosshatch":return`repeating-linear-gradient(0deg, transparent, transparent ${o}px, ${i} ${o}px, ${i} ${o+2}px), repeating-linear-gradient(90deg, transparent, transparent ${o}px, ${n} ${o}px, ${n} ${o+2}px)`;default:return n}},p=x=>{let b,m=0;switch(x){case"checkerboard":case"speed-lines":b=[{offset:0,color:n},{offset:.25,color:n},{offset:.25,color:i},{offset:.5,color:i},{offset:.5,color:n},{offset:.75,color:n},{offset:.75,color:i},{offset:1,color:i}],m=x==="speed-lines"?0:45;break;case"diagonal-stripes":b=[{offset:0,color:n},{offset:.5,color:n},{offset:.5,color:i},{offset:1,color:i}],m=45;break;default:b=[{offset:0,color:n},{offset:1,color:i}],m=0}e({type:"shape",x:0,y:0,width:Qt,height:Xt,rotation:0,opacity:1,scaleX:1,scaleY:1,shapeType:"rect",fillType:"linear-gradient",gradientStops:b,gradientAngle:m,fill:n})};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Procedural patterns using CSS gradients. Infinite color combinations."}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Primary"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:n,onChange:x=>a(x.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),t.jsx("span",{className:"text-[9px] font-mono",children:n})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Secondary"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:i,onChange:x=>l(x.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),t.jsx("span",{className:"text-[9px] font-mono",children:i})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Scale"}),t.jsxs("span",{className:"text-[10px] font-mono",children:[o,"px"]})]}),t.jsx(_e,{value:[o],onValueChange:([x])=>c(x),min:5,max:50,step:5})]}),t.jsx("div",{className:"space-y-2",children:Pp.map(x=>t.jsxs("button",{onClick:()=>p(x.id),className:"w-full border border-border hover:border-primary transition-colors p-2 flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 border border-border flex-shrink-0",style:{background:f(x.id),backgroundSize:`${o}px ${o}px`}}),t.jsxs("div",{className:"text-left",children:[t.jsx("span",{className:"text-xs font-mono block",children:x.name}),t.jsx("span",{className:"text-[9px] text-muted-foreground",children:x.description})]})]},x.id))})]})}function zp({onAddObject:e,deckCenterX:r,deckCenterY:s}){const n=(a,i)=>{const l=`https://picsum.photos/seed/${a.replace(/\s/g,"")}-${i}/200/300`;e({type:"texture",x:0,y:0,width:Qt,height:Xt,rotation:0,opacity:.6,scaleX:1,scaleY:1,textureUrl:l,blendMode:"multiply"})};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Realistic textures applied with blend modes. Click to add as overlay."}),Rp.map(a=>t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:a.name}),t.jsx("div",{className:"grid grid-cols-3 gap-1",children:[0,1,2].map(i=>t.jsx("button",{onClick:()=>n(a.query,i),className:"aspect-square border border-border hover:border-primary transition-colors overflow-hidden bg-secondary",children:t.jsx("img",{src:`https://picsum.photos/seed/${a.query.replace(/\s/g,"")}-${i}/100/100`,alt:a.name,className:"w-full h-full object-cover opacity-70 hover:opacity-100 transition-opacity",loading:"lazy"})},i))})]},a.id)),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Textures use multiply blend by default. Change in Inspector."})]})}const Lp=[{id:"straight",name:"Straight",description:"Clean straight line",icon:""},{id:"curved",name:"Curved",description:"Smooth bezier curve",icon:""},{id:"zigzag",name:"Zigzag",description:"Sharp angles",icon:""},{id:"dashed",name:"Dashed",description:"Dotted line",icon:""}];function Mp({onAddObject:e,deckCenterX:r,deckCenterY:s}){const[n,a]=N.useState("#ffffff"),[i,l]=N.useState(3),o=c=>{e({type:"line",x:r-30,y:s,width:60,height:60,rotation:0,opacity:1,scaleX:1,scaleY:1,lineType:c,lineEndX:60,lineEndY:c==="curved"?-30:0,lineCurve:c==="curved"?50:0,strokeWidth:i,stroke:n,lineCapStyle:"round"})};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Draw lines and curves. Click to add, then drag endpoints in canvas."}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Stroke Color"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:n,onChange:c=>a(c.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),t.jsx("div",{className:"flex gap-1",children:["#ffffff","#ccff00","#ff6600","#00ffff","#ff00ff","#000000"].map(c=>t.jsx("button",{onClick:()=>a(c),className:`w-5 h-5 border ${n===c?"border-primary":"border-border"}`,style:{backgroundColor:c}},c))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),t.jsxs("span",{className:"text-[10px] font-mono",children:[i,"px"]})]}),t.jsx(_e,{value:[i],onValueChange:([c])=>l(c),min:1,max:12,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Line Types"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Lp.map(c=>t.jsxs("button",{onClick:()=>o(c.id),className:"border border-border hover:border-primary transition-colors p-3 flex flex-col items-center gap-1",children:[t.jsx("span",{className:"text-2xl leading-none",style:{color:n},children:c.icon}),t.jsx("span",{className:"text-[9px] font-mono",children:c.name})]},c.id))})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Tip: Use Inspector to adjust curve amount and endpoints."})]})}function $p({onAddObject:e,deckCenterX:r,deckCenterY:s}){const[n,a]=N.useState([]),[i,l]=N.useState(!1),[o,c]=N.useState(!1),f=N.useRef(null),{isAuthenticated:p}=rr();N.useState(()=>{p&&x()});const x=async()=>{if(p){l(!0);try{const d=await Cs.list();a(d.assets||[])}catch(d){console.error("Failed to load assets:",d)}finally{l(!1)}}},b=async d=>{const h=d.target.files;if(!h||h.length===0)return;c(!0);let g=0,u=0,j=0;try{for(const C of Array.from(h))if(Tp(C))try{const S=await Np(C);S.forEach(A=>e(A)),g++,j+=S.length,S.length>0?de.success(`Imported ${C.name}`,{description:`${S.length} shape${S.length!==1?"s":""} added to canvas`,duration:3e3}):de.warning(`${C.name} imported but no shapes found`,{description:"The SVG may be empty or use unsupported features",duration:3e3})}catch(S){console.error("SVG import failed:",S),de.error(`Failed to import ${C.name}`,{description:"Invalid SVG file or unsupported format",duration:4e3})}else try{const{url:S,width:A,height:T}=await Cs.upload(C);u++,de.success(`Uploaded ${C.name}`,{description:"Image added to your library"}),await x()}catch(S){console.error("Image upload failed:",S),de.error(`Failed to upload ${C.name}`,{description:"Please try again or check file format"})}if(h.length>1){const C=[];g>0&&C.push(`${g} SVG${g!==1?"s":""} (${j} shapes)`),u>0&&C.push(`${u} image${u!==1?"s":""}`),C.length>0&&de.success("Batch upload complete",{description:C.join(" + ")})}}catch(C){console.error("Upload failed:",C),de.error("Upload failed",{description:"Please try again or check your files"})}finally{c(!1),f.current&&(f.current.value="")}},m=d=>{const g=Math.min(120/d.width,120/d.height),u=d.width*g,j=d.height*g;e({type:"image",x:r-u/2,y:s-j/2,width:d.width,height:d.height,rotation:0,opacity:1,scaleX:g,scaleY:g,src:d.file_url})},w=async d=>{if(confirm("Delete this asset?"))try{await Cs.delete(d),await x()}catch(h){console.error("Delete failed:",h)}};return p?t.jsxs("div",{className:"space-y-4",children:[t.jsx("input",{ref:f,type:"file",accept:"image/*,.svg",multiple:!0,className:"hidden",onChange:b}),t.jsx("div",{onClick:()=>{var d;return(d=f.current)==null?void 0:d.click()},className:"border-2 border-dashed border-border p-6 text-center hover:border-primary transition-colors cursor-pointer",children:o?t.jsxs(t.Fragment,{children:[t.jsx(dt,{className:"w-6 h-6 mx-auto mb-2 animate-spin text-primary"}),t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Uploading..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Ja,{className:"w-6 h-6 mx-auto mb-2 text-muted-foreground"}),t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground block mb-1",children:"Upload Images"}),t.jsx("span",{className:"text-xs text-muted-foreground",children:"PNG, JPG, SVG"})]})}),i?t.jsx("div",{className:"text-center py-4",children:t.jsx(dt,{className:"w-5 h-5 mx-auto animate-spin text-muted-foreground"})}):n.length>0?t.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map(d=>t.jsxs("div",{className:"relative group border border-border hover:border-primary transition-colors overflow-hidden aspect-square cursor-pointer",onClick:()=>m(d),children:[t.jsx("img",{src:d.file_url,alt:d.name,className:"w-full h-full object-cover"}),t.jsx("button",{onClick:h=>{h.stopPropagation(),w(d.id)},className:"absolute top-1 right-1 p-1 bg-destructive text-destructive-foreground rounded opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(Nt,{className:"w-3 h-3"})})]},d.id))}):t.jsx("p",{className:"text-center text-xs text-muted-foreground py-4",children:"No uploads yet. Click above to upload!"})]}):t.jsxs("div",{className:"text-center py-8 space-y-4",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Login to upload custom images"}),t.jsx(se,{size:"sm",onClick:()=>window.location.href="/auth",children:"Login"})]})}function Bp(){const{textureOverlays:e,toggleTexture:r,updateTexture:s}=Ae();return t.jsxs("div",{className:"space-y-4",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground block",children:"Texture Overlays"}),t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Add realistic print textures that blend over your design."}),e.map(n=>t.jsxs("div",{className:we("border p-3 space-y-3 transition-colors",n.enabled?"border-primary bg-secondary/50":"border-border"),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>r(n.id),className:we("w-12 h-12 border flex-shrink-0 bg-cover bg-center",n.enabled?"border-primary":"border-border"),style:{backgroundImage:`url("${Ip[n.id]}")`}}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-mono text-xs",children:n.name}),t.jsx("button",{onClick:()=>r(n.id),className:we("w-8 h-4 rounded-full transition-colors relative",n.enabled?"bg-primary":"bg-muted"),children:t.jsx("span",{className:we("absolute top-0.5 w-3 h-3 rounded-full bg-white transition-transform",n.enabled?"translate-x-4":"translate-x-0.5")})})]}),t.jsx("span",{className:"text-[9px] text-muted-foreground uppercase tracking-wider",children:n.blendMode})]})]}),n.enabled&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[9px] uppercase tracking-widest text-muted-foreground",children:"Opacity"}),t.jsxs("span",{className:"font-mono text-[10px]",children:[Math.round(n.opacity*100),"%"]})]}),t.jsx(_e,{value:[n.opacity*100],onValueChange:([a])=>s(n.id,{opacity:a/100}),min:5,max:100,step:5,className:"w-full"})]})]},n.id))]})}function Up({tool:e,onAddObject:r,deckCenterX:s,deckCenterY:n}){const a=(o,c)=>{o.dataTransfer.setData("application/json",JSON.stringify(c)),o.dataTransfer.effectAllowed="copy"},i=()=>{r({type:"text",x:s-25,y:n,width:50,height:24,rotation:0,opacity:1,scaleX:1,scaleY:1,text:"SKATE",fontSize:18,fontFamily:"Oswald",fill:"#ffffff"}),de.success("Text added to center of deck",{description:"Double-click text to edit, or use Inspector panel to customize",duration:3e3})},l=o=>{r({type:"shape",x:s-15,y:n-15,width:30,height:30,rotation:0,opacity:1,scaleX:1,scaleY:1,shapeType:o,fill:"#ffffff"})};if(e==="stickers")return t.jsx(Dp,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(e==="patterns")return t.jsx(Fp,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(e==="textures")return t.jsx(zp,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(e==="lines")return t.jsx(Mp,{onAddObject:r,deckCenterX:s,deckCenterY:n});if(e==="graphics")return t.jsxs("div",{className:"space-y-3",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Click to add or drag to canvas"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:Op.map(o=>t.jsxs("button",{draggable:!0,onDragStart:c=>a(c,{type:"shape",shapeType:o.shapeType,width:30,height:30,fill:"#ffffff"}),onClick:()=>l(o.shapeType),className:"aspect-square border border-border bg-secondary hover:border-primary transition-colors flex items-center justify-center cursor-grab active:cursor-grabbing",children:[o.shapeType==="circle"&&t.jsx("div",{className:"w-8 h-8 rounded-full bg-white"}),o.shapeType==="rect"&&t.jsx("div",{className:"w-8 h-8 bg-white"}),o.shapeType==="star"&&t.jsx("span",{className:"text-white text-2xl",children:""})]},o.id))})]});if(e==="pen"){const o=()=>{r({type:"path",x:s-30,y:n-30,width:60,height:60,rotation:0,opacity:1,scaleX:1,scaleY:1,stroke:"#ffffff",strokeWidth:3,solidFill:!1,pathPoints:[{x:0,y:30},{x:30,y:0,cp1x:10,cp1y:30,cp2x:20,cp2y:0},{x:60,y:30,cp1x:40,cp1y:0,cp2x:50,cp2y:30}],pathClosed:!1})},c=()=>{r({type:"path",x:s-25,y:n-25,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ccff00",stroke:"#ffffff",strokeWidth:2,solidFill:!0,pathPoints:[{x:25,y:0},{x:50,y:43,cp1x:50,cp1y:15,cp2x:50,cp2y:28},{x:0,y:43,cp1x:0,cp1y:28,cp2x:0,cp2y:15}],pathClosed:!0})};return t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Quick Start"}),t.jsx("button",{onClick:o,className:"w-full btn-brutal text-left",children:"+ Curved Path"}),t.jsx("button",{onClick:c,className:"w-full btn-brutal text-left",children:"+ Closed Shape"})]}),t.jsxs("div",{className:"space-y-2 pt-3 border-t border-border",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Instructions"}),t.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Select a path"})," to see anchor points (blue) and control handles (orange)."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Drag"})," the path to move it around the canvas."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Edit points"})," in the Inspector panel to add/remove anchors or adjust curves."]}),t.jsxs("p",{children:["Use ",t.jsx("strong",{children:"Transform tools"})," to scale and rotate paths."]})]})]})]})}return e==="text"?t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Add custom text to your deck. Text appears in the center and is immediately selected for editing."}),t.jsxs("button",{onClick:i,className:"w-full btn-brutal text-left flex items-center justify-between group",children:[t.jsx("span",{children:"+ Add Text"}),t.jsx("span",{className:"text-[9px] text-muted-foreground group-hover:text-foreground transition-colors",children:"Click to add"})]}),t.jsx("div",{className:"p-3 border border-accent/30 bg-accent/10 space-y-2",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-accent text-lg",children:""}),t.jsxs("div",{className:"text-[10px] text-muted-foreground space-y-1",children:[t.jsx("p",{children:t.jsx("strong",{children:"After adding:"})}),t.jsx("p",{children:" Edit text in Inspector panel"}),t.jsx("p",{children:" Change font, size, color"}),t.jsx("p",{children:" Drag to reposition"}),t.jsx("p",{children:" Use transform handles to resize/rotate"})]})]})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Popular Styles"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[t.jsx("span",{className:"font-display text-base font-bold",children:"BOLD IMPACT"}),t.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"High visibility branding"})]}),t.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[t.jsx("span",{className:"font-display text-base italic",children:"Stylish Script"}),t.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Elegant cursive look"})]}),t.jsxs("div",{className:"p-2 border border-border bg-secondary",children:[t.jsx("span",{className:"font-mono text-sm",children:"TECHNICAL MONO"}),t.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Clean modern aesthetic"})]})]})]})]}):e==="uploads"?t.jsx($p,{onAddObject:r,deckCenterX:s,deckCenterY:n}):e==="finishes"?t.jsx(Bp,{}):t.jsx("div",{className:"text-center py-8",children:t.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Use Stickers, Patterns, or Textures for assets."})})}const Vp={templates:"Templates",graphics:"Graphics",text:"Text",uploads:"Uploads",background:"Background",finishes:"Finishes",stickers:"Stickers",patterns:"Patterns",textures:"Textures",lines:"Lines",pen:"Pen Tool"};function Sa(){const{activeTool:e,drawerOpen:r,toggleDrawer:s,addObject:n}=Ae();if(!r||!e||e==="pen")return null;const a=Qt/2,i=Xt/2;return t.jsxs("div",{className:"w-56 bg-card border-r border-border h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between py-3 px-3 border-b border-border",children:[t.jsx("span",{className:"font-display text-xs uppercase tracking-widest",children:Vp[e]}),t.jsx("button",{onClick:()=>s(!1),className:"w-6 h-6 flex items-center justify-center hover:bg-secondary transition-colors",children:t.jsx(sr,{className:"w-4 h-4"})})]}),t.jsx(ct,{className:"flex-1 p-3",children:t.jsx(Up,{tool:e,onAddObject:n,deckCenterX:a,deckCenterY:i})})]})}function Hp(e){const r=Wp(e),s=N.forwardRef((n,a)=>{const{children:i,...l}=n,o=N.Children.toArray(i),c=o.find(Kp);if(c){const f=c.props.children,p=o.map(x=>x===c?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:x);return t.jsx(r,{...l,ref:a,children:N.isValidElement(f)?N.cloneElement(f,void 0,p):null})}return t.jsx(r,{...l,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}function Wp(e){const r=N.forwardRef((s,n)=>{const{children:a,...i}=s;if(N.isValidElement(a)){const l=qp(a),o=Yp(i,a.props);return a.type!==N.Fragment&&(o.ref=n?nn(n,l):l),N.cloneElement(a,o)}return N.Children.count(a)>1?N.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var Gp=Symbol("radix.slottable");function Kp(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Gp}function Yp(e,r){const s={...r};for(const n in r){const a=e[n],i=r[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function qp(e){var n,a;let r=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Zp=[" ","Enter","ArrowUp","ArrowDown"],Xp=[" ","Enter"],zt="Select",[hs,ps,Qp]=Qr(zt),[cr]=nt(zt,[Qp,or]),ms=or(),[Jp,kt]=cr(zt),[em,tm]=cr(zt),Io=e=>{const{__scopeSelect:r,children:s,open:n,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:f,name:p,autoComplete:x,disabled:b,required:m,form:w}=e,d=ms(r),[h,g]=N.useState(null),[u,j]=N.useState(null),[C,S]=N.useState(!1),A=ln(f),[T,z]=rt({prop:n,defaultProp:a??!1,onChange:i,caller:zt}),[O,B]=rt({prop:l,defaultProp:o,onChange:c,caller:zt}),K=N.useRef(null),k=h?w||!!h.closest("form"):!0,[P,y]=N.useState(new Set),I=Array.from(P).map(X=>X.props.value).join(";");return t.jsx(Cn,{...d,children:t.jsxs(Jp,{required:m,scope:r,trigger:h,onTriggerChange:g,valueNode:u,onValueNodeChange:j,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:Mt(),value:O,onValueChange:B,open:T,onOpenChange:z,dir:A,triggerPointerDownPosRef:K,disabled:b,children:[t.jsx(hs.Provider,{scope:r,children:t.jsx(em,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(X=>{y(M=>new Set(M).add(X))},[]),onNativeOptionRemove:N.useCallback(X=>{y(M=>{const q=new Set(M);return q.delete(X),q})},[]),children:s})}),k?t.jsxs(nl,{"aria-hidden":!0,required:m,tabIndex:-1,name:p,autoComplete:x,value:O,onChange:X=>B(X.target.value),disabled:b,form:w,children:[O===void 0?t.jsx("option",{value:""}):null,Array.from(P)]},I):null]})})};Io.displayName=zt;var Do="SelectTrigger",Fo=N.forwardRef((e,r)=>{const{__scopeSelect:s,disabled:n=!1,...a}=e,i=ms(s),l=kt(Do,s),o=l.disabled||n,c=ke(r,l.onTriggerChange),f=ps(s),p=N.useRef("touch"),[x,b,m]=il(d=>{const h=f().filter(j=>!j.disabled),g=h.find(j=>j.value===l.value),u=ol(h,d,g);u!==void 0&&l.onValueChange(u.value)}),w=d=>{o||(l.onOpenChange(!0),m()),d&&(l.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)})};return t.jsx(as,{asChild:!0,...i,children:t.jsx(be.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":al(l.value)?"":void 0,...a,ref:c,onClick:xe(a.onClick,d=>{d.currentTarget.focus(),p.current!=="mouse"&&w(d)}),onPointerDown:xe(a.onPointerDown,d=>{p.current=d.pointerType;const h=d.target;h.hasPointerCapture(d.pointerId)&&h.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&d.pointerType==="mouse"&&(w(d),d.preventDefault())}),onKeyDown:xe(a.onKeyDown,d=>{const h=x.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&b(d.key),!(h&&d.key===" ")&&Zp.includes(d.key)&&(w(),d.preventDefault())})})})});Fo.displayName=Do;var zo="SelectValue",Lo=N.forwardRef((e,r)=>{const{__scopeSelect:s,className:n,style:a,children:i,placeholder:l="",...o}=e,c=kt(zo,s),{onValueNodeHasChildrenChange:f}=c,p=i!==void 0,x=ke(r,c.onValueNodeChange);return Be(()=>{f(p)},[f,p]),t.jsx(be.span,{...o,ref:x,style:{pointerEvents:"none"},children:al(c.value)?t.jsx(t.Fragment,{children:l}):i})});Lo.displayName=zo;var rm="SelectIcon",Mo=N.forwardRef((e,r)=>{const{__scopeSelect:s,children:n,...a}=e;return t.jsx(be.span,{"aria-hidden":!0,...a,ref:r,children:n||""})});Mo.displayName=rm;var sm="SelectPortal",$o=e=>t.jsx(an,{asChild:!0,...e});$o.displayName=sm;var Lt="SelectContent",Bo=N.forwardRef((e,r)=>{const s=kt(Lt,e.__scopeSelect),[n,a]=N.useState();if(Be(()=>{a(new DocumentFragment)},[]),!s.open){const i=n;return i?Cr.createPortal(t.jsx(Uo,{scope:e.__scopeSelect,children:t.jsx(hs.Slot,{scope:e.__scopeSelect,children:t.jsx("div",{children:e.children})})}),i):null}return t.jsx(Vo,{...e,ref:r})});Bo.displayName=Lt;var Ve=10,[Uo,St]=cr(Lt),nm="SelectContentImpl",am=Hp("SelectContent.RemoveScroll"),Vo=N.forwardRef((e,r)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:f,alignOffset:p,arrowPadding:x,collisionBoundary:b,collisionPadding:m,sticky:w,hideWhenDetached:d,avoidCollisions:h,...g}=e,u=kt(Lt,s),[j,C]=N.useState(null),[S,A]=N.useState(null),T=ke(r,le=>C(le)),[z,O]=N.useState(null),[B,K]=N.useState(null),k=ps(s),[P,y]=N.useState(!1),I=N.useRef(!1);N.useEffect(()=>{if(j)return Va(j)},[j]),Ha();const X=N.useCallback(le=>{const[ce,...pe]=k().map(ye=>ye.ref.current),[me]=pe.slice(-1),fe=document.activeElement;for(const ye of le)if(ye===fe||(ye==null||ye.scrollIntoView({block:"nearest"}),ye===ce&&S&&(S.scrollTop=0),ye===me&&S&&(S.scrollTop=S.scrollHeight),ye==null||ye.focus(),document.activeElement!==fe))return},[k,S]),M=N.useCallback(()=>X([z,j]),[X,z,j]);N.useEffect(()=>{P&&M()},[P,M]);const{onOpenChange:q,triggerPointerDownPosRef:U}=u;N.useEffect(()=>{if(j){let le={x:0,y:0};const ce=me=>{var fe,ye;le={x:Math.abs(Math.round(me.pageX)-(((fe=U.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(me.pageY)-(((ye=U.current)==null?void 0:ye.y)??0))}},pe=me=>{le.x<=10&&le.y<=10?me.preventDefault():j.contains(me.target)||q(!1),document.removeEventListener("pointermove",ce),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",pe,{capture:!0})}}},[j,q,U]),N.useEffect(()=>{const le=()=>q(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[q]);const[ie,L]=il(le=>{const ce=k().filter(fe=>!fe.disabled),pe=ce.find(fe=>fe.ref.current===document.activeElement),me=ol(ce,le,pe);me&&setTimeout(()=>me.ref.current.focus())}),F=N.useCallback((le,ce,pe)=>{const me=!I.current&&!pe;(u.value!==void 0&&u.value===ce||me)&&(O(le),me&&(I.current=!0))},[u.value]),oe=N.useCallback(()=>j==null?void 0:j.focus(),[j]),te=N.useCallback((le,ce,pe)=>{const me=!I.current&&!pe;(u.value!==void 0&&u.value===ce||me)&&K(le)},[u.value]),J=n==="popper"?qs:Ho,Ce=J===qs?{side:o,sideOffset:c,align:f,alignOffset:p,arrowPadding:x,collisionBoundary:b,collisionPadding:m,sticky:w,hideWhenDetached:d,avoidCollisions:h}:{};return t.jsx(Uo,{scope:s,content:j,viewport:S,onViewportChange:A,itemRefCallback:F,selectedItem:z,onItemLeave:oe,itemTextRefCallback:te,focusSelectedItem:M,selectedItemText:B,position:n,isPositioned:P,searchRef:ie,children:t.jsx(Wa,{as:am,allowPinchZoom:!0,children:t.jsx(Ga,{asChild:!0,trapped:u.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:xe(a,le=>{var ce;(ce=u.trigger)==null||ce.focus({preventScroll:!0}),le.preventDefault()}),children:t.jsx(on,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>u.onOpenChange(!1),children:t.jsx(J,{role:"listbox",id:u.contentId,"data-state":u.open?"open":"closed",dir:u.dir,onContextMenu:le=>le.preventDefault(),...g,...Ce,onPlaced:()=>y(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:xe(g.onKeyDown,le=>{const ce=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!ce&&le.key.length===1&&L(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let me=k().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(le.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const fe=le.target,ye=me.indexOf(fe);me=me.slice(ye+1)}setTimeout(()=>X(me)),le.preventDefault()}})})})})})})});Vo.displayName=nm;var im="SelectItemAlignedPosition",Ho=N.forwardRef((e,r)=>{const{__scopeSelect:s,onPlaced:n,...a}=e,i=kt(Lt,s),l=St(Lt,s),[o,c]=N.useState(null),[f,p]=N.useState(null),x=ke(r,T=>p(T)),b=ps(s),m=N.useRef(!1),w=N.useRef(!0),{viewport:d,selectedItem:h,selectedItemText:g,focusSelectedItem:u}=l,j=N.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&f&&d&&h&&g){const T=i.trigger.getBoundingClientRect(),z=f.getBoundingClientRect(),O=i.valueNode.getBoundingClientRect(),B=g.getBoundingClientRect();if(i.dir!=="rtl"){const fe=B.left-z.left,ye=O.left-fe,Se=T.left-ye,v=T.width+Se,H=Math.max(v,z.width),$=window.innerWidth-Ve,E=Lr(ye,[Ve,Math.max(Ve,$-H)]);o.style.minWidth=v+"px",o.style.left=E+"px"}else{const fe=z.right-B.right,ye=window.innerWidth-O.right-fe,Se=window.innerWidth-T.right-ye,v=T.width+Se,H=Math.max(v,z.width),$=window.innerWidth-Ve,E=Lr(ye,[Ve,Math.max(Ve,$-H)]);o.style.minWidth=v+"px",o.style.right=E+"px"}const K=b(),k=window.innerHeight-Ve*2,P=d.scrollHeight,y=window.getComputedStyle(f),I=parseInt(y.borderTopWidth,10),X=parseInt(y.paddingTop,10),M=parseInt(y.borderBottomWidth,10),q=parseInt(y.paddingBottom,10),U=I+X+P+q+M,ie=Math.min(h.offsetHeight*5,U),L=window.getComputedStyle(d),F=parseInt(L.paddingTop,10),oe=parseInt(L.paddingBottom,10),te=T.top+T.height/2-Ve,J=k-te,Ce=h.offsetHeight/2,le=h.offsetTop+Ce,ce=I+X+le,pe=U-ce;if(ce<=te){const fe=K.length>0&&h===K[K.length-1].ref.current;o.style.bottom="0px";const ye=f.clientHeight-d.offsetTop-d.offsetHeight,Se=Math.max(J,Ce+(fe?oe:0)+ye+M),v=ce+Se;o.style.height=v+"px"}else{const fe=K.length>0&&h===K[0].ref.current;o.style.top="0px";const Se=Math.max(te,I+d.offsetTop+(fe?F:0)+Ce)+pe;o.style.height=Se+"px",d.scrollTop=ce-te+d.offsetTop}o.style.margin=`${Ve}px 0`,o.style.minHeight=ie+"px",o.style.maxHeight=k+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[b,i.trigger,i.valueNode,o,f,d,h,g,i.dir,n]);Be(()=>j(),[j]);const[C,S]=N.useState();Be(()=>{f&&S(window.getComputedStyle(f).zIndex)},[f]);const A=N.useCallback(T=>{T&&w.current===!0&&(j(),u==null||u(),w.current=!1)},[j,u]);return t.jsx(lm,{scope:s,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:A,children:t.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:t.jsx(be.div,{...a,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Ho.displayName=im;var om="SelectPopperPosition",qs=N.forwardRef((e,r)=>{const{__scopeSelect:s,align:n="start",collisionPadding:a=Ve,...i}=e,l=ms(s);return t.jsx(kn,{...l,...i,ref:r,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qs.displayName=om;var[lm,In]=cr(Lt,{}),Zs="SelectViewport",Wo=N.forwardRef((e,r)=>{const{__scopeSelect:s,nonce:n,...a}=e,i=St(Zs,s),l=In(Zs,s),o=ke(r,i.onViewportChange),c=N.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),t.jsx(hs.Slot,{scope:s,children:t.jsx(be.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:xe(a.onScroll,f=>{const p=f.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:b}=l;if(b!=null&&b.current&&x){const m=Math.abs(c.current-p.scrollTop);if(m>0){const w=window.innerHeight-Ve*2,d=parseFloat(x.style.minHeight),h=parseFloat(x.style.height),g=Math.max(d,h);if(g<w){const u=g+m,j=Math.min(w,u),C=u-j;x.style.height=j+"px",x.style.bottom==="0px"&&(p.scrollTop=C>0?C:0,x.style.justifyContent="flex-end")}}}c.current=p.scrollTop})})})]})});Wo.displayName=Zs;var Go="SelectGroup",[cm,dm]=cr(Go),um=N.forwardRef((e,r)=>{const{__scopeSelect:s,...n}=e,a=Mt();return t.jsx(cm,{scope:s,id:a,children:t.jsx(be.div,{role:"group","aria-labelledby":a,...n,ref:r})})});um.displayName=Go;var Ko="SelectLabel",Yo=N.forwardRef((e,r)=>{const{__scopeSelect:s,...n}=e,a=dm(Ko,s);return t.jsx(be.div,{id:a.id,...n,ref:r})});Yo.displayName=Ko;var Kr="SelectItem",[fm,qo]=cr(Kr),Zo=N.forwardRef((e,r)=>{const{__scopeSelect:s,value:n,disabled:a=!1,textValue:i,...l}=e,o=kt(Kr,s),c=St(Kr,s),f=o.value===n,[p,x]=N.useState(i??""),[b,m]=N.useState(!1),w=ke(r,u=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,u,n,a)}),d=Mt(),h=N.useRef("touch"),g=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(fm,{scope:s,value:n,disabled:a,textId:d,isSelected:f,onItemTextChange:N.useCallback(u=>{x(j=>j||((u==null?void 0:u.textContent)??"").trim())},[]),children:t.jsx(hs.ItemSlot,{scope:s,value:n,disabled:a,textValue:p,children:t.jsx(be.div,{role:"option","aria-labelledby":d,"data-highlighted":b?"":void 0,"aria-selected":f&&b,"data-state":f?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:w,onFocus:xe(l.onFocus,()=>m(!0)),onBlur:xe(l.onBlur,()=>m(!1)),onClick:xe(l.onClick,()=>{h.current!=="mouse"&&g()}),onPointerUp:xe(l.onPointerUp,()=>{h.current==="mouse"&&g()}),onPointerDown:xe(l.onPointerDown,u=>{h.current=u.pointerType}),onPointerMove:xe(l.onPointerMove,u=>{var j;h.current=u.pointerType,a?(j=c.onItemLeave)==null||j.call(c):h.current==="mouse"&&u.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xe(l.onPointerLeave,u=>{var j;u.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:xe(l.onKeyDown,u=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&u.key===" "||(Xp.includes(u.key)&&g(),u.key===" "&&u.preventDefault())})})})})});Zo.displayName=Kr;var hr="SelectItemText",Xo=N.forwardRef((e,r)=>{const{__scopeSelect:s,className:n,style:a,...i}=e,l=kt(hr,s),o=St(hr,s),c=qo(hr,s),f=tm(hr,s),[p,x]=N.useState(null),b=ke(r,g=>x(g),c.onItemTextChange,g=>{var u;return(u=o.itemTextRefCallback)==null?void 0:u.call(o,g,c.value,c.disabled)}),m=p==null?void 0:p.textContent,w=N.useMemo(()=>t.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:d,onNativeOptionRemove:h}=f;return Be(()=>(d(w),()=>h(w)),[d,h,w]),t.jsxs(t.Fragment,{children:[t.jsx(be.span,{id:c.textId,...i,ref:b}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Cr.createPortal(i.children,l.valueNode):null]})});Xo.displayName=hr;var Qo="SelectItemIndicator",Jo=N.forwardRef((e,r)=>{const{__scopeSelect:s,...n}=e;return qo(Qo,s).isSelected?t.jsx(be.span,{"aria-hidden":!0,...n,ref:r}):null});Jo.displayName=Qo;var Xs="SelectScrollUpButton",el=N.forwardRef((e,r)=>{const s=St(Xs,e.__scopeSelect),n=In(Xs,e.__scopeSelect),[a,i]=N.useState(!1),l=ke(r,n.onScrollButtonChange);return Be(()=>{if(s.viewport&&s.isPositioned){let o=function(){const f=c.scrollTop>0;i(f)};const c=s.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),a?t.jsx(rl,{...e,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=s;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});el.displayName=Xs;var Qs="SelectScrollDownButton",tl=N.forwardRef((e,r)=>{const s=St(Qs,e.__scopeSelect),n=In(Qs,e.__scopeSelect),[a,i]=N.useState(!1),l=ke(r,n.onScrollButtonChange);return Be(()=>{if(s.viewport&&s.isPositioned){let o=function(){const f=c.scrollHeight-c.clientHeight,p=Math.ceil(c.scrollTop)<f;i(p)};const c=s.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),a?t.jsx(rl,{...e,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=s;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});tl.displayName=Qs;var rl=N.forwardRef((e,r)=>{const{__scopeSelect:s,onAutoScroll:n,...a}=e,i=St("SelectScrollButton",s),l=N.useRef(null),o=ps(s),c=N.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),Be(()=>{var p;const f=o().find(x=>x.ref.current===document.activeElement);(p=f==null?void 0:f.ref.current)==null||p.scrollIntoView({block:"nearest"})},[o]),t.jsx(be.div,{"aria-hidden":!0,...a,ref:r,style:{flexShrink:0,...a.style},onPointerDown:xe(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:xe(a.onPointerMove,()=>{var f;(f=i.onItemLeave)==null||f.call(i),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:xe(a.onPointerLeave,()=>{c()})})}),hm="SelectSeparator",sl=N.forwardRef((e,r)=>{const{__scopeSelect:s,...n}=e;return t.jsx(be.div,{"aria-hidden":!0,...n,ref:r})});sl.displayName=hm;var Js="SelectArrow",pm=N.forwardRef((e,r)=>{const{__scopeSelect:s,...n}=e,a=ms(s),i=kt(Js,s),l=St(Js,s);return i.open&&l.position==="popper"?t.jsx(Sn,{...a,...n,ref:r}):null});pm.displayName=Js;var mm="SelectBubbleInput",nl=N.forwardRef(({__scopeSelect:e,value:r,...s},n)=>{const a=N.useRef(null),i=ke(n,a),l=Rn(r);return N.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==r&&p){const x=new Event("change",{bubbles:!0});p.call(o,r),o.dispatchEvent(x)}},[l,r]),t.jsx(be.select,{...s,style:{...fi,...s.style},ref:i,defaultValue:r})});nl.displayName=mm;function al(e){return e===""||e===void 0}function il(e){const r=Zt(e),s=N.useRef(""),n=N.useRef(0),a=N.useCallback(l=>{const o=s.current+l;r(o),function c(f){s.current=f,window.clearTimeout(n.current),f!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(o)},[r]),i=N.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,a,i]}function ol(e,r,s){const a=r.length>1&&Array.from(r).every(f=>f===r[0])?r[0]:r,i=s?e.indexOf(s):-1;let l=xm(e,Math.max(i,0));a.length===1&&(l=l.filter(f=>f!==s));const c=l.find(f=>f.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}function xm(e,r){return e.map((s,n)=>e[(r+n)%e.length])}var gm=Io,ll=Fo,ym=Lo,vm=Mo,bm=$o,cl=Bo,wm=Wo,dl=Yo,ul=Zo,jm=Xo,Nm=Jo,fl=el,hl=tl,pl=sl;const Cm=gm,km=ym,ml=N.forwardRef(({className:e,children:r,...s},n)=>t.jsxs(ll,{ref:n,className:we("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[r,t.jsx(vm,{asChild:!0,children:t.jsx(Zr,{className:"h-4 w-4 opacity-50"})})]}));ml.displayName=ll.displayName;const xl=N.forwardRef(({className:e,...r},s)=>t.jsx(fl,{ref:s,className:we("flex cursor-default items-center justify-center py-1",e),...r,children:t.jsx(si,{className:"h-4 w-4"})}));xl.displayName=fl.displayName;const gl=N.forwardRef(({className:e,...r},s)=>t.jsx(hl,{ref:s,className:we("flex cursor-default items-center justify-center py-1",e),...r,children:t.jsx(Zr,{className:"h-4 w-4"})}));gl.displayName=hl.displayName;const yl=N.forwardRef(({className:e,children:r,position:s="popper",...n},a)=>t.jsx(bm,{children:t.jsxs(cl,{ref:a,className:we("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:[t.jsx(xl,{}),t.jsx(wm,{className:we("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),t.jsx(gl,{})]})}));yl.displayName=cl.displayName;const Sm=N.forwardRef(({className:e,...r},s)=>t.jsx(dl,{ref:s,className:we("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r}));Sm.displayName=dl.displayName;const en=N.forwardRef(({className:e,children:r,...s},n)=>t.jsxs(ul,{ref:n,className:we("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Nm,{children:t.jsx(Cd,{className:"h-4 w-4"})})}),t.jsx(jm,{children:r})]}));en.displayName=ul.displayName;const _m=N.forwardRef(({className:e,...r},s)=>t.jsx(pl,{ref:s,className:we("-mx-1 my-1 h-px bg-muted",e),...r}));_m.displayName=pl.displayName;function _a(e){var r;return e.type==="text"?e.text||"Text":e.type==="image"?"Image":e.type==="sticker"?e.iconName||"Sticker":e.type==="shape"?`${e.shapeType||"Shape"}`:e.type==="line"?"Line":e.type==="path"?"Pen Drawing":e.type==="group"?`Group (${((r=e.children)==null?void 0:r.length)||0} items)`:e.type==="texture"?"Texture":e.type}function Ea(e){return{text:"",image:"",sticker:"",shape:"",line:"",path:"",group:"",texture:""}[e]||""}function Em(){const{objects:e,selectedIds:r,selectObject:s,updateObject:n,deleteObject:a,toggleSelectObject:i}=Ae(),[l,o]=N.useState(""),[c,f]=N.useState("all"),p=N.useMemo(()=>{let h=e;if(c!=="all"&&(h=h.filter(g=>g.type===c)),l.trim()){const g=l.toLowerCase();h=h.filter(u=>_a(u).toLowerCase().includes(g)||u.id.includes(g))}return[...h].reverse()},[e,c,l]),x=(h,g)=>{g.shiftKey?i(h):s(h)},b=(h,g)=>{g.stopPropagation();const u=e.find(j=>j.id===h);u&&(n(h,{opacity:u.opacity===0?1:0}),de.success(u.opacity===0?"Object visible":"Object hidden"))},m=(h,g)=>{g.stopPropagation();const u=e.find(j=>j.id===h);u&&(n(h,{locked:!u.locked}),de.success(u.locked?"Object unlocked":"Object locked"))},w=(h,g)=>{g.stopPropagation(),a(h),de.success("Object deleted")},d=N.useMemo(()=>{const h=new Set(e.map(g=>g.type));return Array.from(h).sort()},[e]);return t.jsxs("div",{className:"flex flex-col h-full bg-card",children:[t.jsxs("div",{className:"p-3 border-b border-border space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-sm font-medium",children:"Layers"}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:[p.length," of ",e.length]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ni,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),t.jsx(Ie,{type:"text",placeholder:"Search layers...",value:l,onChange:h=>o(h.target.value),className:"pl-8 pr-8 h-8 text-sm"}),l&&t.jsx("button",{onClick:()=>o(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:t.jsx(sr,{className:"w-4 h-4"})})]}),t.jsxs(Cm,{value:c,onValueChange:h=>f(h),children:[t.jsx(ml,{className:"h-8 text-sm",children:t.jsx(km,{placeholder:"All types"})}),t.jsxs(yl,{children:[t.jsx(en,{value:"all",children:"All types"}),d.map(h=>t.jsxs(en,{value:h,children:[Ea(h)," ",h]},h))]})]})]}),t.jsx(ct,{className:"flex-1",children:t.jsx("div",{className:"p-2 space-y-1",children:p.length===0?t.jsx("div",{className:"py-8 text-center text-sm text-muted-foreground",children:l||c!=="all"?"No matching layers found":"No layers yet"}):p.map(h=>{const g=r.includes(h.id),u=h.opacity===0,j=h.locked;return t.jsxs("div",{onClick:C=>x(h.id,C),className:`
                    group flex items-center gap-2 p-2 rounded cursor-pointer
                    transition-colors hover:bg-accent/50
                    ${g?"bg-accent":""}
                  `,children:[t.jsx("span",{className:"text-base flex-shrink-0",children:Ea(h.type)}),t.jsx("span",{className:`
                    flex-1 text-sm truncate
                    ${u?"opacity-50":""}
                  `,children:_a(h)}),t.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("button",{onClick:C=>b(h.id,C),className:"p-1 hover:bg-secondary rounded",title:u?"Show":"Hide",children:u?t.jsx(Yn,{className:"w-3.5 h-3.5"}):t.jsx(mr,{className:"w-3.5 h-3.5"})}),t.jsx("button",{onClick:C=>m(h.id,C),className:"p-1 hover:bg-secondary rounded",title:j?"Unlock":"Lock",children:j?t.jsx(pr,{className:"w-3.5 h-3.5"}):t.jsx(ai,{className:"w-3.5 h-3.5"})}),t.jsx("button",{onClick:C=>w(h.id,C),className:"p-1 hover:bg-destructive/10 text-destructive rounded",title:"Delete",children:t.jsx(Nt,{className:"w-3.5 h-3.5"})})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[j&&t.jsx(pr,{className:"w-3 h-3 text-muted-foreground"}),u&&t.jsx(Yn,{className:"w-3 h-3 text-muted-foreground"})]})]},h.id)})})}),e.length>0&&t.jsx("div",{className:"p-2 border-t border-border text-xs text-muted-foreground",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:r.length>0&&`${r.length} selected`}),t.jsx("span",{children:"Hold Shift to multi-select"})]})})]})}var xs="Switch",[Am]=nt(xs),[Tm,Pm]=Am(xs),vl=N.forwardRef((e,r)=>{const{__scopeSwitch:s,name:n,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:f,form:p,...x}=e,[b,m]=N.useState(null),w=ke(r,j=>m(j)),d=N.useRef(!1),h=b?p||!!b.closest("form"):!0,[g,u]=rt({prop:a,defaultProp:i??!1,onChange:f,caller:xs});return t.jsxs(Tm,{scope:s,checked:g,disabled:o,children:[t.jsx(be.button,{type:"button",role:"switch","aria-checked":g,"aria-required":l,"data-state":Nl(g),"data-disabled":o?"":void 0,disabled:o,value:c,...x,ref:w,onClick:xe(e.onClick,j=>{u(C=>!C),h&&(d.current=j.isPropagationStopped(),d.current||j.stopPropagation())})}),h&&t.jsx(jl,{control:b,bubbles:!d.current,name:n,value:c,checked:g,required:l,disabled:o,form:p,style:{transform:"translateX(-100%)"}})]})});vl.displayName=xs;var bl="SwitchThumb",wl=N.forwardRef((e,r)=>{const{__scopeSwitch:s,...n}=e,a=Pm(bl,s);return t.jsx(be.span,{"data-state":Nl(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:r})});wl.displayName=bl;var Rm="SwitchBubbleInput",jl=N.forwardRef(({__scopeSwitch:e,control:r,checked:s,bubbles:n=!0,...a},i)=>{const l=N.useRef(null),o=ke(l,i),c=Rn(s),f=wn(r);return N.useEffect(()=>{const p=l.current;if(!p)return;const x=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(x,"checked").set;if(c!==s&&m){const w=new Event("click",{bubbles:n});m.call(p,s),p.dispatchEvent(w)}},[c,s,n]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:o,style:{...a.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});jl.displayName=Rm;function Nl(e){return e?"checked":"unchecked"}var Cl=vl,Om=wl;const gs=N.forwardRef(({className:e,...r},s)=>t.jsx(Cl,{className:we("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...r,ref:s,children:t.jsx(Om,{className:we("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));gs.displayName=Cl.displayName;var Im=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dm=Im.reduce((e,r)=>{const s=yc(`Primitive.${r}`),n=N.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(c,{...o,ref:i})});return n.displayName=`Primitive.${r}`,{...e,[r]:n}},{}),Fm="Separator",Aa="horizontal",zm=["horizontal","vertical"],kl=N.forwardRef((e,r)=>{const{decorative:s,orientation:n=Aa,...a}=e,i=Lm(n)?n:Aa,o=s?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return t.jsx(Dm.div,{"data-orientation":i,...o,...a,ref:r})});kl.displayName=Fm;function Lm(e){return zm.includes(e)}var Sl=kl;const At=N.forwardRef(({className:e,orientation:r="horizontal",decorative:s=!0,...n},a)=>t.jsx(Sl,{ref:a,decorative:s,orientation:r,className:we("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));At.displayName=Sl.displayName;function Mm(){const{selectedId:e,objects:r,updateObject:s}=Ae(),[n,a]=N.useState("gradient"),i=r.find(l=>l.id===e);return!e||!i?t.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Select an object to add effects"}):i.type!=="shape"&&i.type!=="text"&&i.type!=="sticker"?t.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Effects only available for shapes, text, and stickers"}):t.jsx(ct,{className:"h-full",children:t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2 border-b border-border pb-2",children:[t.jsxs(se,{variant:n==="gradient"?"default":"ghost",size:"sm",onClick:()=>a("gradient"),children:[t.jsx(bt,{className:"w-3 h-3 mr-1"}),"Gradient"]}),t.jsxs(se,{variant:n==="shadow"?"default":"ghost",size:"sm",onClick:()=>a("shadow"),children:[t.jsx(kd,{className:"w-3 h-3 mr-1"}),"Shadow"]}),t.jsxs(se,{variant:n==="glow"?"default":"ghost",size:"sm",onClick:()=>a("glow"),children:[t.jsx(ri,{className:"w-3 h-3 mr-1"}),"Glow"]}),t.jsxs(se,{variant:n==="filters"?"default":"ghost",size:"sm",onClick:()=>a("filters"),children:[t.jsx(Sd,{className:"w-3 h-3 mr-1"}),"Filters"]})]}),n==="gradient"&&t.jsx($m,{object:i,updateObject:s}),n==="shadow"&&t.jsx(Bm,{object:i,updateObject:s}),n==="glow"&&t.jsx(Um,{object:i,updateObject:s}),n==="filters"&&t.jsx(Vm,{object:i,updateObject:s})]})})}function $m({object:e,updateObject:r}){const s=e.fillType||"solid",n=e.gradientStops||[{offset:0,color:"#ff0000"},{offset:1,color:"#0000ff"}],a=e.gradientAngle||0,i=f=>{r(e.id,{fillType:f,gradientStops:f!=="solid"?n:void 0,gradientAngle:f==="linear-gradient"?a:void 0})},l=(f,p)=>{const x=[...n];x[f]={...x[f],...p},r(e.id,{gradientStops:x})},o=()=>{const f=[...n,{offset:.5,color:"#00ff00"}].sort((p,x)=>p.offset-x.offset);r(e.id,{gradientStops:f})},c=f=>{if(n.length<=2)return;const p=n.filter((x,b)=>b!==f);r(e.id,{gradientStops:p})};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-xs",children:"Fill Type"}),t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsx(se,{variant:s==="solid"?"default":"outline",size:"sm",onClick:()=>i("solid"),className:"text-xs",children:"Solid"}),t.jsx(se,{variant:s==="linear-gradient"?"default":"outline",size:"sm",onClick:()=>i("linear-gradient"),className:"text-xs",children:"Linear"}),t.jsx(se,{variant:s==="radial-gradient"?"default":"outline",size:"sm",onClick:()=>i("radial-gradient"),className:"text-xs",children:"Radial"})]})]}),s!=="solid"&&t.jsxs(t.Fragment,{children:[s==="linear-gradient"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Angle: ",a,""]}),t.jsx(_e,{value:[a],onValueChange:([f])=>r(e.id,{gradientAngle:f}),min:0,max:360,step:1})]}),t.jsx(At,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(he,{className:"text-xs",children:"Color Stops"}),t.jsx(se,{size:"sm",variant:"ghost",onClick:o,children:t.jsx(Os,{className:"w-3 h-3"})})]}),n.map((f,p)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ie,{type:"color",value:f.color,onChange:x=>l(p,{color:x.target.value}),className:"w-12 h-8 p-1 cursor-pointer"}),t.jsx(_e,{value:[f.offset*100],onValueChange:([x])=>l(p,{offset:x/100}),min:0,max:100,step:1,className:"flex-1"}),t.jsxs("span",{className:"text-xs text-muted-foreground w-10 text-right",children:[Math.round(f.offset*100),"%"]}),n.length>2&&t.jsx(se,{size:"sm",variant:"ghost",onClick:()=>c(p),children:t.jsx(Nt,{className:"w-3 h-3"})})]},p))]})]})]})}function Bm({object:e,updateObject:r}){const s=e.dropShadow||{enabled:!1,offsetX:4,offsetY:4,blur:8,color:"#000000",opacity:.5},n=a=>{r(e.id,{dropShadow:{...s,...a}})};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(he,{className:"text-xs",children:"Drop Shadow"}),t.jsx(gs,{checked:s.enabled,onCheckedChange:a=>n({enabled:a})})]}),s.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Offset X: ",s.offsetX,"px"]}),t.jsx(_e,{value:[s.offsetX],onValueChange:([a])=>n({offsetX:a}),min:-50,max:50,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Offset Y: ",s.offsetY,"px"]}),t.jsx(_e,{value:[s.offsetY],onValueChange:([a])=>n({offsetY:a}),min:-50,max:50,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Blur: ",s.blur,"px"]}),t.jsx(_e,{value:[s.blur],onValueChange:([a])=>n({blur:a}),min:0,max:50,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Opacity: ",Math.round(s.opacity*100),"%"]}),t.jsx(_e,{value:[s.opacity*100],onValueChange:([a])=>n({opacity:a/100}),min:0,max:100,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-xs",children:"Color"}),t.jsx(Ie,{type:"color",value:s.color,onChange:a=>n({color:a.target.value}),className:"w-full h-10 cursor-pointer"})]})]})]})}function Um({object:e,updateObject:r}){const s=e.glow||{enabled:!1,radius:10,color:"#ffffff",intensity:.8},n=a=>{r(e.id,{glow:{...s,...a}})};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(he,{className:"text-xs",children:"Glow Effect"}),t.jsx(gs,{checked:s.enabled,onCheckedChange:a=>n({enabled:a})})]}),s.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Radius: ",s.radius,"px"]}),t.jsx(_e,{value:[s.radius],onValueChange:([a])=>n({radius:a}),min:0,max:50,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Intensity: ",Math.round(s.intensity*100),"%"]}),t.jsx(_e,{value:[s.intensity*100],onValueChange:([a])=>n({intensity:a/100}),min:0,max:100,step:1})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-xs",children:"Color"}),t.jsx(Ie,{type:"color",value:s.color,onChange:a=>n({color:a.target.value}),className:"w-full h-10 cursor-pointer"})]})]})]})}function Vm({object:e,updateObject:r}){const s=e.duotone||{enabled:!1,color1:"#000000",color2:"#ccff00"},n=a=>{r(e.id,{duotone:{...s,...a}})};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Blur: ",e.blur||0,"px"]}),t.jsx(_e,{value:[e.blur||0],onValueChange:([a])=>r(e.id,{blur:a}),min:0,max:20,step:.5}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Gaussian blur effect (0-20px)"})]}),t.jsx(At,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Saturation: ",e.saturate||100,"%"]}),t.jsx(_e,{value:[e.saturate||100],onValueChange:([a])=>r(e.id,{saturate:a}),min:0,max:200,step:5}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"0% = grayscale, 100% = normal, 200% = hyper-saturated"})]}),t.jsx(At,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Sepia: ",e.sepia||0,"%"]}),t.jsx(_e,{value:[e.sepia||0],onValueChange:([a])=>r(e.id,{sepia:a}),min:0,max:100,step:5}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Vintage photo tone effect"})]}),t.jsx(At,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(he,{className:"text-xs",children:["Posterize: ",e.posterize||32," levels"]}),t.jsx(_e,{value:[e.posterize||32],onValueChange:([a])=>r(e.id,{posterize:a}),min:2,max:32,step:1}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Reduce color levels (lower = more posterized)"})]}),t.jsx(At,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(he,{className:"text-xs",children:"Duotone Effect"}),t.jsx(gs,{checked:s.enabled,onCheckedChange:a=>n({enabled:a})})]}),s.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-xs",children:"Shadow Color"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Ie,{type:"color",value:s.color1,onChange:a=>n({color1:a.target.value}),className:"w-16 h-10 cursor-pointer"}),t.jsx("div",{className:"flex gap-1 flex-1",children:["#000000","#1a1a1a","#0000ff","#ff0000"].map(a=>t.jsx("button",{onClick:()=>n({color1:a}),className:"w-8 h-8 border border-border hover:border-primary transition-colors",style:{backgroundColor:a}},a))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-xs",children:"Highlight Color"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Ie,{type:"color",value:s.color2,onChange:a=>n({color2:a.target.value}),className:"w-16 h-10 cursor-pointer"}),t.jsx("div",{className:"flex gap-1 flex-1",children:["#ccff00","#00ffff","#ff00ff","#ffff00"].map(a=>t.jsx("button",{onClick:()=>n({color2:a}),className:"w-8 h-8 border border-border hover:border-primary transition-colors",style:{backgroundColor:a}},a))})]})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Classic punk/skate magazine effect"})]})]}),t.jsx(At,{}),t.jsx(se,{onClick:()=>r(e.id,{blur:0,saturate:100,sepia:0,posterize:32,duotone:{enabled:!1,color1:"#000000",color2:"#ccff00"}}),variant:"outline",size:"sm",className:"w-full",children:"Reset All Filters"})]})}const Hm=[{id:"sunset",name:"Sunset",gradient:"linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #ee5a6f 100%)",stops:[{offset:0,color:"#ff6b6b"},{offset:.5,color:"#feca57"},{offset:1,color:"#ee5a6f"}],angle:135},{id:"ocean",name:"Ocean",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",stops:[{offset:0,color:"#667eea"},{offset:1,color:"#764ba2"}],angle:135},{id:"fire",name:"Fire",gradient:"linear-gradient(135deg, #f12711 0%, #f5af19 100%)",stops:[{offset:0,color:"#f12711"},{offset:1,color:"#f5af19"}],angle:135},{id:"mint",name:"Mint",gradient:"linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%)",stops:[{offset:0,color:"#00d2ff"},{offset:1,color:"#3a7bd5"}],angle:135},{id:"purple",name:"Purple Haze",gradient:"linear-gradient(135deg, #8e2de2 0%, #4a00e0 100%)",stops:[{offset:0,color:"#8e2de2"},{offset:1,color:"#4a00e0"}],angle:135},{id:"neon",name:"Neon",gradient:"linear-gradient(135deg, #ccff00 0%, #00ffff 100%)",stops:[{offset:0,color:"#ccff00"},{offset:1,color:"#00ffff"}],angle:135}];function Wm({currentFill:e,onApplyGradient:r,onApplySolid:s}){const[n,a]=N.useState(!1);return t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[t.jsx("input",{type:"color",value:e||"#ffffff",onChange:i=>s(i.target.value),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),t.jsx(Ie,{type:"text",value:e||"#ffffff",onChange:i=>s(i.target.value),className:"h-8 text-xs font-mono bg-secondary border-border flex-1"})]}),t.jsxs(se,{size:"sm",variant:"outline",onClick:()=>a(!n),className:"gap-1.5 shrink-0",title:"Apply gradient fill",children:[t.jsx(bt,{className:"w-3.5 h-3.5"}),t.jsx("span",{className:"text-[10px]",children:"Gradient"})]})]}),n&&t.jsxs("div",{className:"p-3 border border-accent/30 bg-accent/5 rounded space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-[10px] uppercase tracking-widest text-muted-foreground flex items-center gap-1.5",children:[t.jsx(ii,{className:"w-3 h-3"}),"Gradient Presets"]}),t.jsx("button",{onClick:()=>a(!1),className:"text-[9px] text-muted-foreground hover:text-foreground",children:"Close"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Hm.map(i=>t.jsxs("button",{onClick:()=>{r(i.stops,i.angle||0),de.success(`Applied ${i.name} gradient`),a(!1)},className:"group space-y-1.5",children:[t.jsx("div",{className:we("h-12 rounded border border-border group-hover:border-primary transition-colors","group-hover:scale-105 transform transition-transform"),style:{background:i.gradient}}),t.jsx("span",{className:"text-[9px] text-muted-foreground group-hover:text-foreground transition-colors block text-center",children:i.name})]},i.id))}),t.jsx("div",{className:"pt-2 border-t border-border",children:t.jsx("p",{className:"text-[9px] text-muted-foreground",children:" Tip: After applying a gradient, adjust colors and angle in the Advanced panel below"})})]})]})}function Gm(e){const r=Km(e),s=N.forwardRef((n,a)=>{const{children:i,...l}=n,o=N.Children.toArray(i),c=o.find(qm);if(c){const f=c.props.children,p=o.map(x=>x===c?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:x);return t.jsx(r,{...l,ref:a,children:N.isValidElement(f)?N.cloneElement(f,void 0,p):null})}return t.jsx(r,{...l,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}function Km(e){const r=N.forwardRef((s,n)=>{const{children:a,...i}=s;if(N.isValidElement(a)){const l=Xm(a),o=Zm(i,a.props);return a.type!==N.Fragment&&(o.ref=n?nn(n,l):l),N.cloneElement(a,o)}return N.Children.count(a)>1?N.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var Ym=Symbol("radix.slottable");function qm(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ym}function Zm(e,r){const s={...r};for(const n in r){const a=e[n],i=r[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function Xm(e){var n,a;let r=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var ys="Popover",[_l]=nt(ys,[or]),_r=or(),[Qm,_t]=_l(ys),El=e=>{const{__scopePopover:r,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:l=!1}=e,o=_r(r),c=N.useRef(null),[f,p]=N.useState(!1),[x,b]=rt({prop:n,defaultProp:a??!1,onChange:i,caller:ys});return t.jsx(Cn,{...o,children:t.jsx(Qm,{scope:r,contentId:Mt(),triggerRef:c,open:x,onOpenChange:b,onOpenToggle:N.useCallback(()=>b(m=>!m),[b]),hasCustomAnchor:f,onCustomAnchorAdd:N.useCallback(()=>p(!0),[]),onCustomAnchorRemove:N.useCallback(()=>p(!1),[]),modal:l,children:s})})};El.displayName=ys;var Al="PopoverAnchor",Jm=N.forwardRef((e,r)=>{const{__scopePopover:s,...n}=e,a=_t(Al,s),i=_r(s),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=a;return N.useEffect(()=>(l(),()=>o()),[l,o]),t.jsx(as,{...i,...n,ref:r})});Jm.displayName=Al;var Tl="PopoverTrigger",Pl=N.forwardRef((e,r)=>{const{__scopePopover:s,...n}=e,a=_t(Tl,s),i=_r(s),l=ke(r,a.triggerRef),o=t.jsx(be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Fl(a.open),...n,ref:l,onClick:xe(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:t.jsx(as,{asChild:!0,...i,children:o})});Pl.displayName=Tl;var Dn="PopoverPortal",[ex,tx]=_l(Dn,{forceMount:void 0}),Rl=e=>{const{__scopePopover:r,forceMount:s,children:n,container:a}=e,i=_t(Dn,r);return t.jsx(ex,{scope:r,forceMount:s,children:t.jsx(Nr,{present:s||i.open,children:t.jsx(an,{asChild:!0,container:a,children:n})})})};Rl.displayName=Dn;var tr="PopoverContent",Ol=N.forwardRef((e,r)=>{const s=tx(tr,e.__scopePopover),{forceMount:n=s.forceMount,...a}=e,i=_t(tr,e.__scopePopover);return t.jsx(Nr,{present:n||i.open,children:i.modal?t.jsx(sx,{...a,ref:r}):t.jsx(nx,{...a,ref:r})})});Ol.displayName=tr;var rx=Gm("PopoverContent.RemoveScroll"),sx=N.forwardRef((e,r)=>{const s=_t(tr,e.__scopePopover),n=N.useRef(null),a=ke(r,n),i=N.useRef(!1);return N.useEffect(()=>{const l=n.current;if(l)return Va(l)},[]),t.jsx(Wa,{as:rx,allowPinchZoom:!0,children:t.jsx(Il,{...e,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,f=o.button===2||c;i.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:xe(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),nx=N.forwardRef((e,r)=>{const s=_t(tr,e.__scopePopover),n=N.useRef(!1),a=N.useRef(!1);return t.jsx(Il,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=e.onCloseAutoFocus)==null||l.call(e,i),i.defaultPrevented||(n.current||(o=s.triggerRef.current)==null||o.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,f;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((f=s.triggerRef.current)==null?void 0:f.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Il=N.forwardRef((e,r)=>{const{__scopePopover:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:f,onInteractOutside:p,...x}=e,b=_t(tr,s),m=_r(s);return Ha(),t.jsx(Ga,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:t.jsx(on,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:p,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:f,onDismiss:()=>b.onOpenChange(!1),children:t.jsx(kn,{"data-state":Fl(b.open),role:"dialog",id:b.contentId,...m,...x,ref:r,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Dl="PopoverClose",ax=N.forwardRef((e,r)=>{const{__scopePopover:s,...n}=e,a=_t(Dl,s);return t.jsx(be.button,{type:"button",...n,ref:r,onClick:xe(e.onClick,()=>a.onOpenChange(!1))})});ax.displayName=Dl;var ix="PopoverArrow",ox=N.forwardRef((e,r)=>{const{__scopePopover:s,...n}=e,a=_r(s);return t.jsx(Sn,{...a,...n,ref:r})});ox.displayName=ix;function Fl(e){return e?"open":"closed"}var lx=El,cx=Pl,dx=Rl,zl=Ol;const ux=lx,fx=cx,Ll=N.forwardRef(({className:e,align:r="center",sideOffset:s=4,...n},a)=>t.jsx(dx,{children:t.jsx(zl,{ref:a,align:r,sideOffset:s,className:we("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Ll.displayName=zl.displayName;function As({value:e,onChange:r,label:s,showEyedropper:n=!0}){const[a,i]=N.useState(!1),{objects:l}=Ae(),o=Array.from(new Set(l.flatMap(p=>[p.fill,p.stroke,p.colorize]).filter(p=>!!p&&p!=="none"))).slice(0,12),c=p=>{r(p),i(!1),de.success("Color picked!",{description:p.toUpperCase()})},f=["#000000","#ffffff","#ccff00","#ff6600","#00ffff","#ff00ff","#ff0000","#00ff00"];return t.jsxs("div",{className:"space-y-2",children:[s&&t.jsx("label",{className:"text-[10px] uppercase tracking-widest text-muted-foreground font-medium block",children:s}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-10 h-10 rounded border-2 border-border shadow-sm cursor-pointer hover:scale-105 transition-transform shrink-0",style:{backgroundColor:e},title:e}),t.jsx("input",{type:"color",value:e,onChange:p=>r(p.target.value),className:"flex-1 h-10 border border-border rounded cursor-pointer min-w-0"}),n&&o.length>0&&t.jsxs(ux,{open:a,onOpenChange:i,children:[t.jsx(fx,{asChild:!0,children:t.jsx(se,{size:"sm",variant:"outline",className:"gap-2 shrink-0",title:"Pick color from canvas",children:t.jsx(_d,{className:"w-4 h-4"})})}),t.jsx(Ll,{className:"w-64 p-3",align:"end",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-sm font-medium",children:"Pick from canvas"}),t.jsx(se,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>i(!1),children:t.jsx(sr,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"grid grid-cols-6 gap-2",children:o.map((p,x)=>t.jsx("button",{onClick:()=>c(p),className:`w-9 h-9 rounded border-2 transition-all hover:scale-110 ${e.toLowerCase()===p.toLowerCase()?"border-accent ring-2 ring-accent/30":"border-border/50 hover:border-accent/50"}`,style:{backgroundColor:p},title:p},`${p}-${x}`))}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Colors from your design"})]})})]})]}),t.jsx("div",{className:"grid grid-cols-8 gap-1.5",children:f.map(p=>t.jsx("button",{onClick:()=>r(p),className:`w-8 h-8 rounded border-2 transition-all hover:scale-110 ${e.toLowerCase()===p.toLowerCase()?"border-accent ring-2 ring-accent/30":"border-border/50"}`,style:{backgroundColor:p},title:p},p))}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("input",{type:"text",value:e,onChange:p=>{const x=p.target.value;(/^#[0-9A-Fa-f]{0,6}$/.test(x)||x==="")&&r(x)},placeholder:"#000000",maxLength:7,className:"flex-1 h-8 px-2 text-xs font-mono border border-border rounded bg-background"})})]})}var vs="Collapsible",[hx,Ml]=nt(vs),[px,Fn]=hx(vs),$l=N.forwardRef((e,r)=>{const{__scopeCollapsible:s,open:n,defaultOpen:a,disabled:i,onOpenChange:l,...o}=e,[c,f]=rt({prop:n,defaultProp:a??!1,onChange:l,caller:vs});return t.jsx(px,{scope:s,disabled:i,contentId:Mt(),open:c,onOpenToggle:N.useCallback(()=>f(p=>!p),[f]),children:t.jsx(be.div,{"data-state":Ln(c),"data-disabled":i?"":void 0,...o,ref:r})})});$l.displayName=vs;var Bl="CollapsibleTrigger",Ul=N.forwardRef((e,r)=>{const{__scopeCollapsible:s,...n}=e,a=Fn(Bl,s);return t.jsx(be.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Ln(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:r,onClick:xe(e.onClick,a.onOpenToggle)})});Ul.displayName=Bl;var zn="CollapsibleContent",Vl=N.forwardRef((e,r)=>{const{forceMount:s,...n}=e,a=Fn(zn,e.__scopeCollapsible);return t.jsx(Nr,{present:s||a.open,children:({present:i})=>t.jsx(mx,{...n,ref:r,present:i})})});Vl.displayName=zn;var mx=N.forwardRef((e,r)=>{const{__scopeCollapsible:s,present:n,children:a,...i}=e,l=Fn(zn,s),[o,c]=N.useState(n),f=N.useRef(null),p=ke(r,f),x=N.useRef(0),b=x.current,m=N.useRef(0),w=m.current,d=l.open||o,h=N.useRef(d),g=N.useRef(void 0);return N.useEffect(()=>{const u=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(u)},[]),Be(()=>{const u=f.current;if(u){g.current=g.current||{transitionDuration:u.style.transitionDuration,animationName:u.style.animationName},u.style.transitionDuration="0s",u.style.animationName="none";const j=u.getBoundingClientRect();x.current=j.height,m.current=j.width,h.current||(u.style.transitionDuration=g.current.transitionDuration,u.style.animationName=g.current.animationName),c(n)}},[l.open,n]),t.jsx(be.div,{"data-state":Ln(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!d,...i,ref:p,style:{"--radix-collapsible-content-height":b?`${b}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:d&&a})});function Ln(e){return e?"open":"closed"}var xx=$l,gx=Ul,yx=Vl,qe="Accordion",vx=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Mn,bx,wx]=Qr(qe),[bs]=nt(qe,[wx,Ml]),$n=Ml(),Hl=Pe.forwardRef((e,r)=>{const{type:s,...n}=e,a=n,i=n;return t.jsx(Mn.Provider,{scope:e.__scopeAccordion,children:s==="multiple"?t.jsx(kx,{...i,ref:r}):t.jsx(Cx,{...a,ref:r})})});Hl.displayName=qe;var[Wl,jx]=bs(qe),[Gl,Nx]=bs(qe,{collapsible:!1}),Cx=Pe.forwardRef((e,r)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...l}=e,[o,c]=rt({prop:s,defaultProp:n??"",onChange:a,caller:qe});return t.jsx(Wl,{scope:e.__scopeAccordion,value:Pe.useMemo(()=>o?[o]:[],[o]),onItemOpen:c,onItemClose:Pe.useCallback(()=>i&&c(""),[i,c]),children:t.jsx(Gl,{scope:e.__scopeAccordion,collapsible:i,children:t.jsx(Kl,{...l,ref:r})})})}),kx=Pe.forwardRef((e,r)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},...i}=e,[l,o]=rt({prop:s,defaultProp:n??[],onChange:a,caller:qe}),c=Pe.useCallback(p=>o((x=[])=>[...x,p]),[o]),f=Pe.useCallback(p=>o((x=[])=>x.filter(b=>b!==p)),[o]);return t.jsx(Wl,{scope:e.__scopeAccordion,value:l,onItemOpen:c,onItemClose:f,children:t.jsx(Gl,{scope:e.__scopeAccordion,collapsible:!0,children:t.jsx(Kl,{...i,ref:r})})})}),[Sx,ws]=bs(qe),Kl=Pe.forwardRef((e,r)=>{const{__scopeAccordion:s,disabled:n,dir:a,orientation:i="vertical",...l}=e,o=Pe.useRef(null),c=ke(o,r),f=bx(s),x=ln(a)==="ltr",b=xe(e.onKeyDown,m=>{var z;if(!vx.includes(m.key))return;const w=m.target,d=f().filter(O=>{var B;return!((B=O.ref.current)!=null&&B.disabled)}),h=d.findIndex(O=>O.ref.current===w),g=d.length;if(h===-1)return;m.preventDefault();let u=h;const j=0,C=g-1,S=()=>{u=h+1,u>C&&(u=j)},A=()=>{u=h-1,u<j&&(u=C)};switch(m.key){case"Home":u=j;break;case"End":u=C;break;case"ArrowRight":i==="horizontal"&&(x?S():A());break;case"ArrowDown":i==="vertical"&&S();break;case"ArrowLeft":i==="horizontal"&&(x?A():S());break;case"ArrowUp":i==="vertical"&&A();break}const T=u%g;(z=d[T].ref.current)==null||z.focus()});return t.jsx(Sx,{scope:s,disabled:n,direction:a,orientation:i,children:t.jsx(Mn.Slot,{scope:s,children:t.jsx(be.div,{...l,"data-orientation":i,ref:c,onKeyDown:n?void 0:b})})})}),Yr="AccordionItem",[_x,Bn]=bs(Yr),Yl=Pe.forwardRef((e,r)=>{const{__scopeAccordion:s,value:n,...a}=e,i=ws(Yr,s),l=jx(Yr,s),o=$n(s),c=Mt(),f=n&&l.value.includes(n)||!1,p=i.disabled||e.disabled;return t.jsx(_x,{scope:s,open:f,disabled:p,triggerId:c,children:t.jsx(xx,{"data-orientation":i.orientation,"data-state":ec(f),...o,...a,ref:r,disabled:p,open:f,onOpenChange:x=>{x?l.onItemOpen(n):l.onItemClose(n)}})})});Yl.displayName=Yr;var ql="AccordionHeader",Zl=Pe.forwardRef((e,r)=>{const{__scopeAccordion:s,...n}=e,a=ws(qe,s),i=Bn(ql,s);return t.jsx(be.h3,{"data-orientation":a.orientation,"data-state":ec(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:r})});Zl.displayName=ql;var tn="AccordionTrigger",Xl=Pe.forwardRef((e,r)=>{const{__scopeAccordion:s,...n}=e,a=ws(qe,s),i=Bn(tn,s),l=Nx(tn,s),o=$n(s);return t.jsx(Mn.ItemSlot,{scope:s,children:t.jsx(gx,{"aria-disabled":i.open&&!l.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...o,...n,ref:r})})});Xl.displayName=tn;var Ql="AccordionContent",Jl=Pe.forwardRef((e,r)=>{const{__scopeAccordion:s,...n}=e,a=ws(qe,s),i=Bn(Ql,s),l=$n(s);return t.jsx(yx,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...l,...n,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Jl.displayName=Ql;function ec(e){return e?"open":"closed"}var Ex=Hl,Ax=Yl,Tx=Zl,tc=Xl,rc=Jl;const Px=Ex,sc=N.forwardRef(({className:e,...r},s)=>t.jsx(Ax,{ref:s,className:we("border-b",e),...r}));sc.displayName="AccordionItem";const nc=N.forwardRef(({className:e,children:r,...s},n)=>t.jsx(Tx,{className:"flex",children:t.jsxs(tc,{ref:n,className:we("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...s,children:[r,t.jsx(Zr,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));nc.displayName=tc.displayName;const ac=N.forwardRef(({className:e,children:r,...s},n)=>t.jsx(rc,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:t.jsx("div",{className:we("pb-4 pt-0",e),children:r})}));ac.displayName=rc.displayName;function Ta(){const{objects:e,selectedId:r,updateObject:s,saveToHistory:n,generatePattern:a}=Ae(),i=e.find(u=>u.id===r),[l,o]=N.useState(5),[c,f]=N.useState(0),[p,x]=N.useState(!1),[b,m]=N.useState([]);N.useEffect(()=>{Ka().then(m)},[]);const w=()=>{alert("Export feature coming soon! The deck design will be exported as a high-resolution PNG.")},d=u=>{r&&(n(),s(r,u))},{backgroundColor:h,setBackgroundColor:g}=Ae();return t.jsxs("div",{className:"w-64 bg-card border-l border-border h-full flex flex-col",children:[t.jsx("div",{className:"p-3 border-b border-border",children:t.jsxs("button",{onClick:w,className:"w-full bg-accent text-accent-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-accent hover:bg-accent/90 transition-colors flex items-center justify-center gap-2",children:[t.jsx(Xr,{className:"w-4 h-4"}),"Export Print"]})}),t.jsx("div",{className:"p-3 border-b border-border space-y-2",children:t.jsx(As,{label:"Deck Background",value:h,onChange:g,showEyedropper:!0})}),t.jsx("div",{className:"flex-1 overflow-auto",children:i?t.jsxs("div",{className:"p-3 space-y-4",children:[t.jsxs("div",{className:"py-2 border-b border-border flex items-center justify-between",children:[t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Properties"}),t.jsx("button",{onClick:()=>d({locked:!i.locked}),className:`flex items-center gap-1.5 px-2 py-1 text-xs transition-colors ${i.locked?"bg-destructive/20 text-destructive hover:bg-destructive/30":"bg-secondary text-muted-foreground hover:bg-secondary/80"}`,title:i.locked?"Unlock object":"Lock object",children:i.locked?t.jsxs(t.Fragment,{children:[t.jsx(pr,{className:"w-3 h-3"}),t.jsx("span",{className:"uppercase tracking-wider",children:"Locked"})]}):t.jsxs(t.Fragment,{children:[t.jsx(ai,{className:"w-3 h-3"}),t.jsx("span",{className:"uppercase tracking-wider",children:"Unlocked"})]})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Opacity"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[i.opacity*100],onValueChange:([u])=>d({opacity:u/100}),max:100,min:0,step:1,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[Math.round(i.opacity*100),"%"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Rotation"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ie,{type:"number",value:Math.round(i.rotation),onChange:u=>d({rotation:Number(u.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"}),t.jsx("span",{className:"text-[11px] text-muted-foreground",children:"deg"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Scale"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-[9px] text-muted-foreground",children:"X"}),t.jsx(Ie,{type:"number",step:"0.1",value:i.scaleX.toFixed(2),onChange:u=>d({scaleX:Number(u.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Y"}),t.jsx(Ie,{type:"number",step:"0.1",value:i.scaleY.toFixed(2),onChange:u=>d({scaleY:Number(u.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]})]})]}),(i.type==="text"||i.type==="shape")&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Color"}),t.jsx(Wm,{currentFill:i.fill,onApplySolid:u=>d({fill:u}),onApplyGradient:(u,j)=>{d({gradientType:"linear",gradientStops:u,gradientAngle:j,fill:u[0].color})}})]}),i.type==="sticker"&&t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Sticker Options"})}),t.jsx(As,{label:"Stroke Color",value:i.stroke||"#ffffff",onChange:u=>d({stroke:u}),showEyedropper:!0}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[i.strokeWidth??3],onValueChange:([u])=>d({strokeWidth:u}),max:8,min:1,step:.5,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[i.strokeWidth??3,"px"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Style"}),t.jsx("div",{className:"grid grid-cols-3 gap-1",children:["solid","dashed","dotted"].map(u=>t.jsx("button",{onClick:()=>d({strokeDashStyle:u}),className:`px-2 py-1.5 text-[10px] uppercase tracking-wider border transition-colors ${(i.strokeDashStyle||"solid")===u?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:u==="solid"?"":u==="dashed"?"":""},u))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Solid Fill"}),t.jsx("button",{onClick:()=>d({solidFill:!i.solidFill}),className:`w-10 h-5 rounded-full transition-colors relative ${i.solidFill?"bg-primary":"bg-muted"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${i.solidFill?"translate-x-5":"translate-x-0.5"}`})})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Fill the icon with solid color instead of outline"})]})]}),i.type==="texture"&&t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Texture Options"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Blend Mode"}),t.jsx("div",{className:"grid grid-cols-2 gap-1",children:["multiply","overlay","soft-light","color-burn","normal"].map(u=>t.jsx("button",{onClick:()=>d({blendMode:u}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${i.blendMode===u?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:u},u))})]})]}),i.type==="line"&&t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Options"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Type"}),t.jsx("div",{className:"grid grid-cols-2 gap-1",children:["straight","curved","zigzag","dashed"].map(u=>t.jsx("button",{onClick:()=>d({lineType:u}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${i.lineType===u?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:u},u))})]}),t.jsx(As,{label:"Stroke Color",value:i.stroke||"#ffffff",onChange:u=>d({stroke:u}),showEyedropper:!0}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Stroke Width"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[i.strokeWidth??3],onValueChange:([u])=>d({strokeWidth:u}),max:12,min:1,step:1,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[i.strokeWidth??3,"px"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Line Style"}),t.jsx("div",{className:"grid grid-cols-3 gap-1",children:["solid","dashed","dotted"].map(u=>t.jsx("button",{onClick:()=>d({strokeDashStyle:u}),className:`px-2 py-1.5 text-[10px] uppercase tracking-wider border transition-colors ${(i.strokeDashStyle||"solid")===u?"bg-primary text-primary-foreground border-primary":"bg-secondary text-muted-foreground border-border hover:border-primary"}`,children:u==="solid"?"":u==="dashed"?"":""},u))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Length (X)"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[i.lineEndX??60],onValueChange:([u])=>d({lineEndX:u}),max:200,min:-200,step:5,className:"flex-1"}),t.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:i.lineEndX??60})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Length (Y)"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[i.lineEndY??0],onValueChange:([u])=>d({lineEndY:u}),max:200,min:-200,step:5,className:"flex-1"}),t.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:i.lineEndY??0})]})]}),i.lineType==="curved"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Curve Amount"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[i.lineCurve??50],onValueChange:([u])=>d({lineCurve:u}),max:100,min:-100,step:5,className:"flex-1"}),t.jsx("span",{className:"text-[11px] font-mono w-10 text-right",children:i.lineCurve??50})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Negative = curve down, Positive = curve up"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Cap Style"}),t.jsx("div",{className:"grid grid-cols-3 gap-1",children:["butt","round","square"].map(u=>t.jsx("button",{onClick:()=>d({lineCapStyle:u}),className:`py-1.5 px-2 text-[9px] uppercase tracking-wider border transition-colors ${i.lineCapStyle===u?"border-primary bg-primary text-primary-foreground":"border-border hover:border-primary"}`,children:u},u))})]})]}),i.type==="text"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Text"}),t.jsx(Ie,{type:"text",value:i.text||"",onChange:u=>d({text:u.target.value}),className:"h-8 text-xs font-mono bg-secondary border-border"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:["Font Family ",b.length>0&&t.jsxs("span",{className:"text-accent font-normal",children:["(",b.length," custom)"]})]}),t.jsxs("button",{onClick:()=>x(!0),className:"text-[10px] uppercase tracking-widest text-accent hover:text-accent/80 transition-colors flex items-center gap-1",children:[t.jsx(qr,{className:"w-3 h-3"}),b.length>0?"Manage":"Upload"]})]}),t.jsxs("select",{value:i.fontFamily||"Arial",onChange:u=>d({fontFamily:u.target.value}),className:"w-full h-8 text-xs bg-secondary border border-border px-2 cursor-pointer hover:border-primary transition-colors",children:[b.length>0&&t.jsx("optgroup",{label:" Your Custom Fonts",children:b.map(u=>t.jsx("option",{value:u.font_family,children:u.name},u.id))}),t.jsxs("optgroup",{label:"System Fonts",children:[t.jsx("option",{value:"Arial",children:"Arial"}),t.jsx("option",{value:"Helvetica",children:"Helvetica"}),t.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),t.jsx("option",{value:"Courier New",children:"Courier New"}),t.jsx("option",{value:"Georgia",children:"Georgia"}),t.jsx("option",{value:"Verdana",children:"Verdana"}),t.jsx("option",{value:"Impact",children:"Impact"}),t.jsx("option",{value:"Comic Sans MS",children:"Comic Sans MS"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Font Size"}),t.jsx(Ie,{type:"number",value:i.fontSize||24,onChange:u=>d({fontSize:Number(u.target.value)}),className:"h-8 text-xs font-mono bg-secondary border-border"})]})]}),t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Filters"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Contrast"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[i.contrast??100],onValueChange:([u])=>d({contrast:u}),max:200,min:0,step:5,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[i.contrast??100,"%"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Brightness"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[i.brightness??100],onValueChange:([u])=>d({brightness:u}),max:200,min:0,step:5,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[i.brightness??100,"%"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Grayscale"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[i.grayscale??0],onValueChange:([u])=>d({grayscale:u}),max:100,min:0,step:5,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[i.grayscale??0,"%"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Threshold"}),t.jsx("button",{onClick:()=>d({threshold:!i.threshold}),className:`w-10 h-5 rounded-full transition-colors relative ${i.threshold?"bg-primary":"bg-muted"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${i.threshold?"translate-x-5":"translate-x-0.5"}`})})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"High-contrast black & white xerox effect"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Colorize"}),t.jsx("button",{onClick:()=>d({colorize:i.colorize?null:"#00ff00"}),className:`w-10 h-5 rounded-full transition-colors relative ${i.colorize?"bg-primary":"bg-muted"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${i.colorize?"translate-x-5":"translate-x-0.5"}`})})]}),i.colorize&&t.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[t.jsx("input",{type:"color",value:i.colorize,onChange:u=>d({colorize:u.target.value}),className:"w-8 h-8 border border-border cursor-pointer bg-transparent"}),t.jsx("div",{className:"flex gap-1",children:["#ccff00","#ff6600","#00ffff","#ff00ff","#ffffff"].map(u=>t.jsx("button",{onClick:()=>d({colorize:u}),className:`w-6 h-6 border ${i.colorize===u?"border-primary":"border-border"}`,style:{backgroundColor:u}},u))})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Cast in a single punk zine color"})]})]}),t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Remix Effects"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Hue Shift"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[i.hueRotate??0],onValueChange:([u])=>d({hueRotate:u}),max:360,min:0,step:15,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[i.hueRotate??0,""]})]}),t.jsx("div",{className:"h-3 w-full rounded",style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"}})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Invert"}),t.jsx("button",{onClick:()=>d({invert:!i.invert}),className:`w-10 h-5 rounded-full transition-colors relative ${i.invert?"bg-primary":"bg-muted"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${i.invert?"translate-x-5":"translate-x-0.5"}`})})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Flip colors to negative"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pixelate"}),t.jsx("button",{onClick:()=>d({pixelate:!i.pixelate}),className:`w-10 h-5 rounded-full transition-colors relative ${i.pixelate?"bg-primary":"bg-muted"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${i.pixelate?"translate-x-5":"translate-x-0.5"}`})})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Lo-fi 8-bit effect (images only)"})]}),t.jsxs("button",{onClick:()=>d({hueRotate:0,invert:!1,pixelate:!1,contrast:100,brightness:100,grayscale:0,threshold:!1,colorize:null}),className:"w-full border border-border hover:border-primary transition-colors py-1.5 px-3 text-[10px] uppercase tracking-wider flex items-center justify-center gap-2",children:[t.jsx(Ed,{className:"w-3 h-3"}),"Reset All Filters"]})]}),t.jsx(Px,{type:"single",collapsible:!0,className:"border-t border-border",children:t.jsxs(sc,{value:"effects",className:"border-none",children:[t.jsx(nc,{className:"py-3 px-0 hover:no-underline",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Advanced Effects"})}),t.jsx(ac,{className:"pb-4",children:t.jsx(Mm,{})})]})}),(i.type==="shape"||i.type==="image"||i.type==="sticker")&&t.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[t.jsx("div",{className:"py-2",children:t.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Pattern Generator"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Gap (spacing)"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[l],onValueChange:([u])=>o(u),max:30,min:0,step:1,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[l,"px"]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Random Rotation"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_e,{value:[c],onValueChange:([u])=>f(u),max:180,min:0,step:5,className:"flex-1"}),t.jsxs("span",{className:"text-[11px] font-mono w-10 text-right",children:[c,""]})]}),t.jsx("p",{className:"text-[9px] text-muted-foreground",children:"0 = neat grid, 180 = chaotic sticker bomb"})]}),t.jsxs("button",{onClick:()=>{r&&a(r,l,c,Qt,Xt)},className:"w-full bg-primary text-primary-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-primary hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[t.jsx(Xa,{className:"w-4 h-4"}),"Make Pattern"]}),t.jsx("p",{className:"text-[9px] text-muted-foreground text-center",children:"Tiles the selected sticker across the entire deck"})]})]}):t.jsx("div",{className:"p-4 text-center",children:t.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest",children:"Select an object"})})}),t.jsx(Em,{}),t.jsx(vc,{isOpen:p,onClose:()=>x(!1),onFontUploaded:async u=>{m([...b,u]);try{await bc(u),de.success(`Font "${u.name}" ready to use`,{description:"Select it from the font dropdown",duration:3e3}),i&&i.type==="text"&&(d({fontFamily:u.font_family}),de.info("Applied to selected text",{duration:2e3}))}catch(j){console.error("Failed to load font:",j),de.error("Font uploaded but failed to load",{description:"Try refreshing the page"})}}})]})}function Rx(){var f;const{selectedIds:e,objects:r,alignObjects:s,distributeObjects:n,groupObjects:a,ungroupObject:i}=Ae();if(e.length<2)return null;const l=e.length===1&&((f=r.find(p=>p.id===e[0]))==null?void 0:f.type)==="group",o=p=>{s(p);const x={left:"Left",center:"Center",right:"Right",top:"Top",middle:"Middle",bottom:"Bottom"};de.success(`Aligned ${e.length} objects`,{description:x[p]})},c=p=>{if(e.length<3){de.error("Need at least 3 objects to distribute");return}n(p),de.success(`Distributed ${e.length} objects`,{description:p==="horizontal"?"Horizontally":"Vertically"})};return t.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 bg-card border-2 border-primary shadow-2xl rounded-lg p-3 animate-in slide-in-from-bottom-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"px-3 py-1.5 bg-primary/10 rounded border border-primary/20",children:t.jsxs("span",{className:"text-sm font-medium text-primary",children:[e.length," selected"]})}),t.jsx("div",{className:"w-px h-8 bg-border"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:"Align:"}),t.jsx(se,{size:"sm",variant:"outline",onClick:()=>o("left"),className:"h-8 w-8 p-0",title:"Align Left",children:t.jsx(Ad,{className:"w-4 h-4"})}),t.jsx(se,{size:"sm",variant:"outline",onClick:()=>o("center"),className:"h-8 w-8 p-0",title:"Align Center",children:t.jsx(Td,{className:"w-4 h-4"})}),t.jsx(se,{size:"sm",variant:"outline",onClick:()=>o("right"),className:"h-8 w-8 p-0",title:"Align Right",children:t.jsx(Pd,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"w-px h-8 bg-border"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(se,{size:"sm",variant:"outline",onClick:()=>o("top"),className:"h-8 w-8 p-0",title:"Align Top",children:t.jsx(Rd,{className:"w-4 h-4"})}),t.jsx(se,{size:"sm",variant:"outline",onClick:()=>o("middle"),className:"h-8 w-8 p-0",title:"Align Middle",children:t.jsx(Od,{className:"w-4 h-4"})}),t.jsx(se,{size:"sm",variant:"outline",onClick:()=>o("bottom"),className:"h-8 w-8 p-0",title:"Align Bottom",children:t.jsx(Id,{className:"w-4 h-4"})})]}),e.length>=3&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-px h-8 bg-border"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs text-muted-foreground mr-1",children:"Distribute:"}),t.jsx(se,{size:"sm",variant:"outline",onClick:()=>c("horizontal"),className:"h-8 w-8 p-0",title:"Distribute Horizontally",children:t.jsx(Dd,{className:"w-4 h-4"})}),t.jsx(se,{size:"sm",variant:"outline",onClick:()=>c("vertical"),className:"h-8 w-8 p-0",title:"Distribute Vertically",children:t.jsx(Fd,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"w-px h-8 bg-border"}),l?t.jsxs(se,{size:"sm",variant:"outline",onClick:()=>{i(e[0]),de.success("Ungrouped objects")},className:"gap-2",title:"Ungroup (Ctrl+Shift+G)",children:[t.jsx(zd,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline text-xs",children:"Ungroup"})]}):t.jsxs(se,{size:"sm",variant:"outline",onClick:()=>{a(e),de.success(`Grouped ${e.length} objects`)},className:"gap-2",title:"Group (Ctrl+G)",children:[t.jsx(Ld,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline text-xs",children:"Group"})]})]})})}function Ox({onSave:e,onExport:r,onOpenHistory:s,onOpenInspector:n,onOpenLayers:a,isSaving:i,isExporting:l}){const{undo:o,redo:c,past:f,future:p,selectedId:x,deleteObject:b}=Ae(),[m,w]=N.useState(!1),d=(j=10)=>{"vibrate"in navigator&&navigator.vibrate(j)},h=()=>{d(10),o()},g=()=>{d(10),c()},u=()=>{x&&(d([10,50,10]),b(x))};return t.jsxs(t.Fragment,{children:[m&&t.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:()=>w(!1)}),t.jsxs("div",{className:we("fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50 transition-all duration-300",m?"h-48":"h-14"),children:[t.jsx("button",{onClick:()=>w(!m),className:"absolute -top-8 right-4 w-12 h-8 bg-card border border-border border-b-0 rounded-t-lg flex items-center justify-center hover:bg-secondary transition-colors",children:m?t.jsx(si,{className:"w-4 h-4"}):t.jsx(oi,{className:"w-4 h-4"})}),t.jsxs("div",{className:"h-14 flex items-center justify-around px-1",children:[t.jsxs("button",{onClick:h,disabled:f.length===0,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-transform",children:[t.jsx(li,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Undo"})]}),t.jsxs("button",{onClick:g,disabled:p.length===0,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-transform",children:[t.jsx(ci,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Redo"})]}),x&&t.jsxs("button",{onClick:u,className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] text-destructive active:scale-95 transition-transform",children:[t.jsx(Nt,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Delete"})]}),t.jsxs("button",{onClick:()=>{d(10),a()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[t.jsx($r,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Layers"})]}),t.jsxs("button",{onClick:()=>{d(10),n()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[t.jsx(Md,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"Props"})]}),t.jsxs("button",{onClick:()=>{d(10),s()},className:"flex flex-col items-center gap-0.5 p-2 min-w-[56px] active:scale-95 transition-transform",children:[t.jsx(un,{className:"w-5 h-5"}),t.jsx("span",{className:"text-[9px] uppercase tracking-wider",children:"History"})]})]}),m&&t.jsxs("div",{className:"border-t border-border p-3 space-y-2",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("button",{onClick:()=>{e(),w(!1)},disabled:i,className:"btn-brutal text-sm py-2.5 flex items-center justify-center gap-2",children:[t.jsx(di,{className:"w-4 h-4"}),i?"Saving...":"Save"]}),t.jsxs("button",{onClick:()=>{r(),w(!1)},disabled:l,className:"btn-brutal text-sm py-2.5 flex items-center justify-center gap-2",children:[t.jsx(Xr,{className:"w-4 h-4"}),l?"Exporting...":"Export"]})]}),t.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Tap outside to close"})]})]})]})}function Ts({isOpen:e,onClose:r,title:s,children:n}){return e?t.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),t.jsxs("div",{className:we("absolute bottom-0 left-0 right-0 bg-card border-t-2 border-border max-h-[80vh] flex flex-col","animate-in slide-in-from-bottom duration-300"),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border shrink-0",children:[t.jsx("h2",{className:"font-display text-sm uppercase tracking-wider",children:s}),t.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(sr,{className:"w-5 h-5"})})]}),t.jsx(ct,{className:"flex-1",children:t.jsx("div",{className:"p-4",children:n})})]})]}):null}function Ix(e){return e.type==="text"?qr:e.type==="image"?Qa:e.type==="sticker"?qa:e.type==="line"?Za:e.type==="path"?cn:e.type==="texture"?dn:e.type==="shape"?e.shapeType==="circle"?ei:e.shapeType==="star"?ti:Br:Br}function Pa(e){return e.type==="text"&&e.text?e.text.length>15?e.text.slice(0,15)+"...":e.text:e.type==="sticker"&&e.iconName?`${e.iconName} Sticker`:e.type==="shape"&&e.shapeType?`${e.shapeType.charAt(0).toUpperCase()+e.shapeType.slice(1)} Shape`:e.type==="line"&&e.lineType?`${e.lineType.charAt(0).toUpperCase()+e.lineType.slice(1)} Line`:e.type==="path"?e.pathClosed?"Closed Path":"Open Path":e.type==="texture"?"Texture Overlay":e.type==="image"?"Image":e.type.charAt(0).toUpperCase()+e.type.slice(1)}function Dx({obj:e,index:r,isSelected:s,onSelect:n,onDelete:a}){const i=Ix(e);return t.jsxs("div",{onClick:n,className:we("flex items-center gap-2 px-2 py-1.5 border-b border-border cursor-pointer group","hover:bg-secondary transition-colors",s&&"bg-primary/10 border-l-2 border-l-primary"),children:[t.jsx(Bd,{className:"w-3 h-3 text-muted-foreground cursor-grab"}),t.jsx(i,{className:"w-4 h-4 text-foreground"}),t.jsx("span",{className:"flex-1 text-xs truncate font-medium",children:Pa(e)}),t.jsxs(En,{children:[t.jsx(An,{asChild:!0,children:t.jsx("button",{onClick:l=>{l.stopPropagation();const o=Pa(e);a(),de.success(`Deleted "${o}"`,{description:"Use Layers panel to manage or remove items",duration:2e3})},className:"w-6 h-6 flex items-center justify-center hover:bg-destructive hover:text-destructive-foreground transition-colors rounded opacity-0 group-hover:opacity-100",title:"Delete layer",children:t.jsx(Nt,{className:"w-3.5 h-3.5"})})}),t.jsx(cs,{side:"left",children:t.jsx("p",{className:"text-xs",children:"Delete this layer"})})]})]})}function Fx(){const{objects:e,selectedId:r,selectObject:s,deleteObject:n,moveLayer:a}=Ae(),i=[...e].reverse();return t.jsxs("div",{className:"border-t border-border",children:[t.jsxs("div",{className:"py-2 px-3 border-b border-border bg-accent/10",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($r,{className:"w-4 h-4 text-accent"}),t.jsxs("span",{className:"font-display text-xs uppercase tracking-widest text-foreground font-semibold",children:["Layers ",e.length>0&&`(${e.length})`]})]}),t.jsxs(En,{children:[t.jsx(An,{asChild:!0,children:t.jsx("button",{className:"w-4 h-4 flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors",children:t.jsx($d,{className:"w-3.5 h-3.5"})})}),t.jsxs(cs,{side:"left",className:"max-w-xs",children:[t.jsx("p",{className:"text-xs font-semibold mb-1",children:"Layers Panel"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Shows all elements on your deck. Click to select, hover to reveal delete button."})]})]})]}),e.length>0&&t.jsx("p",{className:"text-[9px] text-muted-foreground mt-1",children:"Click layer to select  Hover to delete"})]}),t.jsx(ct,{className:"h-48",children:i.length===0?t.jsxs("div",{className:"p-6 text-center space-y-2",children:[t.jsx($r,{className:"w-8 h-8 mx-auto text-muted-foreground opacity-50"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"No layers yet"}),t.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Add text, shapes, or images to see them here"})]})]}):i.map((l,o)=>{const c=e.length-1-o;return t.jsx(Dx,{obj:l,index:c,isSelected:r===l.id,onSelect:()=>s(l.id),onDelete:()=>n(l.id),onMoveUp:()=>a(l.id,"up"),onMoveDown:()=>a(l.id,"down"),isFirst:o===0,isLast:o===i.length-1},l.id)})})]})}const ic=[{keys:["Click"],description:"Select object",category:"Selection"},{keys:["Shift","Click"],description:"Multi-select",category:"Selection"},{keys:["Esc"],description:"Deselect all",category:"Selection"},{keys:["Tab"],description:"Select next object",category:"Selection"},{keys:["Shift","Tab"],description:"Select previous object",category:"Selection"},{keys:["Delete"],description:"Delete selected",category:"Editing"},{keys:["Backspace"],description:"Delete selected",category:"Editing"},{keys:["Ctrl","Z"],description:"Undo",category:"Editing"},{keys:["Ctrl","Shift","Z"],description:"Redo",category:"Editing"},{keys:["Ctrl","D"],description:"Duplicate",category:"Editing"},{keys:["Ctrl","Shift","D"],description:"Array duplicate (custom grid)",category:"Editing"},{keys:["Ctrl","C"],description:"Copy to clipboard",category:"Editing"},{keys:["Ctrl","V"],description:"Paste from clipboard",category:"Editing"},{keys:["Ctrl","A"],description:"Select all (top object)",category:"Editing"},{keys:["Ctrl","L"],description:"Lock/unlock object",category:"Editing"},{keys:["Ctrl","G"],description:"Group selected objects",category:"Editing"},{keys:["Ctrl","Shift","G"],description:"Ungroup selected group",category:"Editing"},{keys:["Drag"],description:"Move object",category:"Transform"},{keys:["Shift","Drag"],description:"Move with snapping disabled",category:"Transform"},{keys:["Corner","Drag"],description:"Scale object",category:"Transform"},{keys:["Shift","Scale"],description:"Scale proportionally",category:"Transform"},{keys:["Alt","Scale"],description:"Scale from center",category:"Transform"},{keys:["Rotate","Handle"],description:"Rotate object",category:"Transform"},{keys:["Shift","Rotate"],description:"Rotate in 15 increments",category:"Transform"},{keys:["Ctrl","]"],description:"Bring forward",category:"Layers"},{keys:["Ctrl","["],description:"Send backward",category:"Layers"},{keys:["Ctrl","Shift","]"],description:"Bring to front",category:"Layers"},{keys:["Ctrl","Shift","["],description:"Send to back",category:"Layers"},{keys:["Alt","L"],description:"Align left",category:"Alignment"},{keys:["Alt","R"],description:"Align right",category:"Alignment"},{keys:["Alt","C"],description:"Align center",category:"Alignment"},{keys:["Alt","T"],description:"Align top",category:"Alignment"},{keys:["Alt","B"],description:"Align bottom",category:"Alignment"},{keys:["Alt","M"],description:"Align middle",category:"Alignment"},{keys:["Space","Drag"],description:"Pan canvas",category:"View"},{keys:["Scroll"],description:"Zoom in/out",category:"View"},{keys:["Ctrl","0"],description:"Reset zoom to 100%",category:"View"},{keys:["Ctrl","1"],description:"Zoom to fit",category:"View"},{keys:["Ctrl","Shift","R"],description:"Toggle rulers",category:"View"},{keys:["H"],description:"Toggle hardware guide",category:"View"},{keys:["T"],description:"Select text tool",category:"Tools"},{keys:["R"],description:"Select rectangle tool",category:"Tools"},{keys:["C"],description:"Select circle tool",category:"Tools"},{keys:["L"],description:"Select line tool",category:"Tools"},{keys:["V"],description:"Select move tool (default)",category:"Tools"},{keys:["Ctrl","S"],description:"Save design",category:"File"},{keys:["Ctrl","E"],description:"Export PNG",category:"File"},{keys:["Ctrl","N"],description:"New design",category:"File"},{keys:["Ctrl","O"],description:"Open design",category:"File"}],zx=[...new Set(ic.map(e=>e.category))];function Ra({text:e}){return t.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-muted border border-border rounded",children:e})}function Lx(){const[e,r]=N.useState(!1);return t.jsxs(wc,{open:e,onOpenChange:r,children:[t.jsx(jc,{asChild:!0,children:t.jsxs(se,{size:"sm",variant:"ghost",className:"gap-2",children:[t.jsx(qn,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden md:inline",children:"Shortcuts"})]})}),t.jsxs(Nc,{className:"max-w-3xl max-h-[80vh]",children:[t.jsx(Cc,{children:t.jsxs(kc,{className:"font-display text-xl uppercase tracking-widest flex items-center gap-2",children:[t.jsx(qn,{className:"w-5 h-5"}),"Keyboard Shortcuts"]})}),t.jsx(ct,{className:"h-[60vh] pr-4",children:t.jsx("div",{className:"space-y-6",children:zx.map(s=>t.jsxs("div",{children:[t.jsx("h3",{className:"font-display text-sm uppercase tracking-widest text-primary mb-3",children:s}),t.jsx("div",{className:"space-y-2",children:ic.filter(n=>n.category===s).map((n,a)=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[t.jsx("span",{className:"text-sm text-foreground",children:n.description}),t.jsx("div",{className:"flex items-center gap-1",children:n.keys.map((i,l)=>t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Ra,{text:i}),l<n.keys.length-1&&t.jsx("span",{className:"text-xs text-muted-foreground",children:"+"})]},l))})]},a))})]},s))})}),t.jsxs("div",{className:"text-xs text-muted-foreground text-center pt-4 border-t",children:["Press ",t.jsx(Ra,{text:"?"})," anytime to view shortcuts"]})]})]})}function Mx(){const[e,r]=N.useState(!1);return N.useEffect(()=>{const s=()=>{r(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e}const $x=N.lazy(()=>Ct(()=>import("./modals-CyytcF9U.js").then(e=>e.$),__vite__mapDeps([0,1,2])).then(e=>({default:e.VersionHistory}))),Bx=N.lazy(()=>Ct(()=>import("./modals-CyytcF9U.js").then(e=>e.a0),__vite__mapDeps([0,1,2])).then(e=>({default:e.ShareModal}))),Ux=N.lazy(()=>Ct(()=>import("./AnimationPreview-I3rKHruK.js"),__vite__mapDeps([3,0,1,2,4])).then(e=>({default:e.AnimationPreview}))),Vx=N.lazy(()=>Ct(()=>import("./modals-CyytcF9U.js").then(e=>e.a1),__vite__mapDeps([0,1,2])).then(e=>({default:e.BrandKitModal}))),Hx=N.lazy(()=>Ct(()=>import("./modals-CyytcF9U.js").then(e=>e._),__vite__mapDeps([0,1,2])).then(e=>({default:e.FontUploadModal}))),Wx=N.lazy(()=>Ct(()=>import("./modals-CyytcF9U.js").then(e=>e.a2),__vite__mapDeps([0,1,2])).then(e=>({default:e.ArrayDuplicateModal}))),Gx=N.lazy(()=>Ct(()=>import("./modals-CyytcF9U.js").then(e=>e.a3),__vite__mapDeps([0,1,2])).then(e=>({default:e.ExportPreview}))),Kx=N.lazy(()=>Ct(()=>import("./modals-CyytcF9U.js").then(e=>e.a4),__vite__mapDeps([0,1,2])).then(e=>({default:e.ExportPresetsModal})));function Yx(){const{selectedId:e,selectedIds:r,deleteObject:s,undo:n,redo:a,getCanvasState:i,currentDesignId:l,setDesignId:o,setSaving:c,isSaving:f,objects:p,designName:x,createVersion:b,past:m,future:w,updateObject:d,saveToHistory:h,addObject:g,selectObject:u,setActiveTool:j,stageScale:C,setStageScale:S,arrayDuplicate:A,showRulers:T,toggleRulers:z,groupObjects:O,ungroupObject:B}=Ae(),{isAuthenticated:K}=rr(),k=nr(),P=Mx(),[y,I]=N.useState(""),[X,M]=N.useState(!1),[q,U]=N.useState(!1),[ie,L]=N.useState(!1),[F,oe]=N.useState(!1),[te,J]=N.useState(!1),[Ce,le]=N.useState(!1),[ce,pe]=N.useState(!1),[me,fe]=N.useState(!1),[ye,Se]=N.useState(!1),[v,H]=N.useState(!1),[$,E]=N.useState(!1),[_,R]=N.useState(!1),[Y,Z]=N.useState(!1),D=async()=>{if(!K){k("/auth");return}c(!0),I("Saving...");try{const G=i();if(l)await Mr.update(l,{canvas_data:G,name:G.name}),I("Saved!"),de.success("Design saved successfully");else{const W=await Mr.create({name:G.name,canvas_data:G});o(W.design.id),I("Saved!"),de.success("Design created successfully")}setTimeout(()=>I(""),2e3)}catch(G){console.error("Save failed:",G),I("Save failed"),de.error("Failed to save design. Please try again."),setTimeout(()=>I(""),2e3)}finally{c(!1)}},Q=async()=>{M(!0),I("Exporting PNG..."),U(!1);try{const G=await Ya(p,{scale:3,format:"png",includeBackground:!0}),W=`${x.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${Date.now()}.png`;Wn(G,W),I("Exported PNG!"),de.success(`Exported as ${W}`),setTimeout(()=>I(""),2e3)}catch(G){console.error("Export failed:",G),I("Export failed"),de.error("Failed to export PNG. Please try again."),setTimeout(()=>I(""),2e3)}finally{M(!1)}},ne=async()=>{M(!0),I("Exporting SVG..."),U(!1);try{const G=await Sc(p,{includeBackground:!0}),W=`${x.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${Date.now()}.svg`;Wn(G,W),I("Exported SVG!"),de.success(`Exported vector as ${W}`),setTimeout(()=>I(""),2e3)}catch(G){console.error("SVG export failed:",G),I("Export failed"),de.error("Failed to export SVG. Please try again."),setTimeout(()=>I(""),2e3)}finally{M(!1)}};return N.useEffect(()=>{K&&Ka().catch(console.error)},[K]),N.useEffect(()=>{if(p.length===0)return;const G=setInterval(()=>{b(void 0,!0)},5*60*1e3);return()=>clearInterval(G)},[p.length,b]),N.useEffect(()=>{const G=W=>{if(W.target instanceof HTMLInputElement||W.target instanceof HTMLTextAreaElement)return;const re=W.key.toLowerCase(),ae=W.ctrlKey||W.metaKey,je=W.shiftKey,Te=W.altKey;if(ae&&re==="s"){W.preventDefault(),D();return}if(ae&&re==="e"){W.preventDefault(),Q();return}if((re==="delete"||re==="backspace")&&e){W.preventDefault(),s(e);return}if(ae&&re==="z"&&!je){W.preventDefault(),n();return}if(ae&&re==="z"&&je){W.preventDefault(),a();return}if(ae&&re==="d"&&!je&&e){W.preventDefault();const ee=p.find(ue=>ue.id===e);if(ee){const{id:ue,...ve}=ee;g({...ve,x:ee.x+10,y:ee.y+10}),de.success("Object duplicated")}return}if(ae&&je&&re==="d"&&e){W.preventDefault(),fe(!0);return}if(re==="t"&&!ae&&!Te){W.preventDefault(),j("text");return}if(re==="p"&&!ae&&!Te){W.preventDefault(),j("pen");return}if(re==="g"&&!ae&&!Te){W.preventDefault(),j("graphics");return}if(re==="l"&&!ae&&!Te){W.preventDefault(),j("lines");return}if(re==="s"&&!ae&&!Te){W.preventDefault(),j("stickers");return}if(re==="u"&&!ae&&!Te){W.preventDefault(),j("uploads");return}if(re==="escape"){W.preventDefault(),u(null),j(null);return}if(ae&&je&&re==="r"){W.preventDefault(),Ae.getState().toggleRulers();const ee=Ae.getState().showRulers;de.success(ee?"Rulers enabled":"Rulers disabled");return}if(ae&&re==="l"&&e){W.preventDefault();const ee=p.find(ue=>ue.id===e);ee&&(d(e,{locked:!ee.locked}),de.success(ee.locked?"Object unlocked":"Object locked"));return}if(ae&&re==="g"&&!je&&r.length>=2){W.preventDefault(),O(r),de.success(`Grouped ${r.length} objects`);return}if(ae&&je&&re==="g"&&r.length===1){W.preventDefault();const ee=p.find(ue=>ue.id===r[0]);ee&&ee.type==="group"?(B(r[0]),de.success("Ungrouped objects")):de.error("Selected object is not a group");return}if(e&&["arrowup","arrowdown","arrowleft","arrowright"].includes(re)){W.preventDefault();const ee=p.find(Ze=>Ze.id===e);if(!ee)return;const ue=je?10:1,ve={};re==="arrowup"&&(ve.y=ee.y-ue),re==="arrowdown"&&(ve.y=ee.y+ue),re==="arrowleft"&&(ve.x=ee.x-ue),re==="arrowright"&&(ve.x=ee.x+ue),d(e,ve);return}if(ae&&re==="c"&&e){W.preventDefault();const ee=p.find(ue=>ue.id===e);ee&&(sessionStorage.setItem("deckforge_clipboard",JSON.stringify(ee)),de.success("Copied to clipboard"));return}if(ae&&re==="v"){W.preventDefault();const ee=sessionStorage.getItem("deckforge_clipboard");if(ee)try{const ue=JSON.parse(ee),{id:ve,...Ze}=ue;g({...Ze,x:ue.x+20,y:ue.y+20}),de.success("Pasted from clipboard")}catch{de.error("Failed to paste")}else de.error("Nothing to paste");return}if(ae&&re==="a"){W.preventDefault(),p.length>0&&(u(p[p.length-1].id),de.success(`Selected top object (${p.length} total)`));return}if(ae&&re==="0"){W.preventDefault(),S(1),de.success("Zoom reset to 100%");return}if(ae&&re==="1"){W.preventDefault(),S(.8),de.success("Zoom to fit");return}if(ae&&(re==="="||re==="+")){W.preventDefault();const ee=Math.min(3,C*1.2);S(ee),de.success(`Zoom: ${Math.round(ee*100)}%`);return}if(ae&&(re==="-"||re==="_")){W.preventDefault();const ee=Math.max(.25,C/1.2);S(ee),de.success(`Zoom: ${Math.round(ee*100)}%`);return}if(e){const ee=p.findIndex(ue=>ue.id===e);if(ee===-1)return;if(ae&&!je&&re==="]"){if(W.preventDefault(),ee<p.length-1){const ue=[...p];[ue[ee],ue[ee+1]]=[ue[ee+1],ue[ee]],Ae.setState({objects:ue}),de.success("Brought forward")}return}if(ae&&!je&&re==="["){if(W.preventDefault(),ee>0){const ue=[...p];[ue[ee],ue[ee-1]]=[ue[ee-1],ue[ee]],Ae.setState({objects:ue}),de.success("Sent backward")}return}if(ae&&je&&re==="]"){W.preventDefault();const ue=p.filter(ve=>ve.id!==e);ue.push(p[ee]),Ae.setState({objects:ue}),de.success("Brought to front");return}if(ae&&je&&re==="["){W.preventDefault();const ue=p.filter(ve=>ve.id!==e);ue.unshift(p[ee]),Ae.setState({objects:ue}),de.success("Sent to back");return}}if(e&&Te){const ee=p.find(Ze=>Ze.id===e);if(!ee)return;const ue=(Qt-ee.width*ee.scaleX)/2,ve=(Xt-ee.height*ee.scaleY)/2;if(re==="l"){W.preventDefault(),d(e,{x:0}),de.success("Aligned left");return}if(re==="r"){W.preventDefault(),d(e,{x:Qt-ee.width*ee.scaleX}),de.success("Aligned right");return}if(re==="c"){W.preventDefault(),d(e,{x:ue}),de.success("Aligned center");return}if(re==="t"){W.preventDefault(),d(e,{y:0}),de.success("Aligned top");return}if(re==="b"){W.preventDefault(),d(e,{y:Xt-ee.height*ee.scaleY}),de.success("Aligned bottom");return}if(re==="m"){W.preventDefault(),d(e,{y:ve}),de.success("Aligned middle");return}}};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[e,s,n,a,p,D,Q,g,u,j,d,C,S]),t.jsxs("div",{className:"h-screen w-screen flex flex-col bg-background overflow-hidden",children:[t.jsxs("header",{className:we("border-b border-border flex items-center px-4 bg-card shrink-0","h-12"),children:[t.jsxs("h1",{className:we("font-display uppercase tracking-widest text-foreground",P?"text-base":"text-lg"),children:["Deck",t.jsx("span",{className:"text-primary",children:"Forge"})]}),!P&&t.jsx("div",{className:"ml-4 flex items-center gap-2",children:t.jsx("span",{className:"tag-brutal",children:"v1.0"})}),t.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[!P&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest hidden md:block mr-4",children:"Fingerboard Graphics Editor"}),y&&t.jsx("span",{className:"text-xs text-primary",children:y}),t.jsxs("div",{className:"flex items-center gap-1 border border-border rounded",children:[t.jsxs(se,{size:"sm",variant:"ghost",onClick:n,disabled:m.length===0,className:"gap-1.5 rounded-r-none border-r border-border",title:`Undo (Ctrl+Z) - ${m.length} action${m.length!==1?"s":""} available`,children:[t.jsx(li,{className:"w-4 h-4"}),t.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:m.length})]}),t.jsxs(se,{size:"sm",variant:"ghost",onClick:a,disabled:w.length===0,className:"gap-1.5 rounded-l-none",title:`Redo (Ctrl+Shift+Z) - ${w.length} action${w.length!==1?"s":""} available`,children:[t.jsx(ci,{className:"w-4 h-4"}),t.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:w.length})]})]}),t.jsxs(se,{size:"sm",variant:"outline",onClick:D,disabled:f,className:"gap-2",children:[t.jsx(di,{className:"w-4 h-4"}),f?"Saving...":"Save"]}),t.jsxs("div",{className:"relative",children:[t.jsxs(se,{size:"sm",variant:"outline",onClick:()=>U(!q),disabled:X,className:"gap-2",children:[t.jsx(Xr,{className:"w-4 h-4"}),X?"Exporting...":"Export",t.jsx(Zr,{className:"w-3 h-3"})]}),q&&!X&&t.jsxs("div",{className:"absolute top-full mt-1 right-0 z-50 bg-card border border-border shadow-lg min-w-[180px] rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:()=>{U(!1),H(!0)},className:"w-full px-4 py-2.5 text-left text-sm hover:bg-secondary transition-colors font-medium flex items-center gap-2",children:[t.jsx(bt,{className:"w-4 h-4 text-primary"}),"Quick Export",t.jsx("span",{className:"ml-auto text-[9px] text-primary",children:"NEW"})]}),t.jsxs("button",{onClick:()=>{U(!1),Se(!0)},className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary transition-colors border-t border-border",children:["PNG (High-Res)",t.jsx("span",{className:"ml-2 text-[9px] text-muted-foreground",children:"Preview first"})]}),t.jsxs("button",{onClick:ne,className:"w-full px-4 py-2 text-left text-sm hover:bg-secondary transition-colors border-t border-border",children:["SVG (Vector)",t.jsx("span",{className:"ml-2 text-[10px] text-accent",children:"PRO"})]})]})]}),t.jsxs(se,{size:"sm",variant:"outline",onClick:()=>le(!0),className:"gap-2",children:[t.jsx(ii,{className:"w-4 h-4"}),"Brand Kits",t.jsx("span",{className:"ml-1 text-[9px] text-accent",children:"PRO"})]}),t.jsxs(se,{size:"sm",variant:"outline",onClick:()=>pe(!0),className:"gap-2",children:[t.jsx(qr,{className:"w-4 h-4"}),"Custom Fonts"]}),l&&t.jsxs(se,{size:"sm",variant:"outline",onClick:()=>oe(!0),className:"gap-2",children:[t.jsx(Ud,{className:"w-4 h-4"}),"Share"]}),t.jsxs(se,{size:"sm",variant:"outline",onClick:()=>L(!0),className:"gap-2",children:[t.jsx(un,{className:"w-4 h-4"}),"History"]}),t.jsxs(se,{size:"sm",variant:"outline",onClick:()=>J(!0),className:"gap-2",children:[t.jsx(Vd,{className:"w-4 h-4"}),"Preview"]}),t.jsxs(se,{size:"sm",variant:"ghost",onClick:()=>k("/gallery"),className:"gap-2",children:[t.jsx(bt,{className:"w-4 h-4"}),"Gallery"]}),t.jsxs(se,{size:"sm",variant:"ghost",onClick:()=>k(K?"/designs":"/auth"),className:"gap-2",children:[t.jsx(Zn,{className:"w-4 h-4"}),K?"My Designs":"Login"]}),t.jsx(se,{size:"sm",variant:T?"default":"ghost",onClick:()=>{z(),de.success(T?"Rulers hidden":"Rulers visible")},className:"gap-2",title:"Toggle rulers (Ctrl+Shift+R)",children:t.jsx(Hd,{className:"w-4 h-4"})}),t.jsx(Lx,{})]}),P&&t.jsx(se,{size:"sm",variant:"ghost",onClick:()=>Z(!0),className:"gap-2",children:t.jsx(oi,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:we("flex-1 flex overflow-hidden",P&&"pb-14"),children:[!P&&t.jsxs(t.Fragment,{children:[t.jsx(Ca,{}),t.jsx(Sa,{}),t.jsx(Rs,{}),t.jsx(Ta,{})]}),P&&t.jsxs(t.Fragment,{children:[t.jsx(Ca,{}),t.jsx(Sa,{}),t.jsx(Rs,{})]})]}),P&&t.jsx(Ox,{onSave:D,onExport:Q,onOpenHistory:()=>L(!0),onOpenInspector:()=>E(!0),onOpenLayers:()=>R(!0),isSaving:f,isExporting:X}),t.jsx(Ts,{isOpen:$,onClose:()=>E(!1),title:"Properties",children:t.jsx(Ta,{})}),t.jsx(Ts,{isOpen:_,onClose:()=>R(!1),title:"Layers",children:t.jsx(Fx,{})}),t.jsx(Ts,{isOpen:Y,onClose:()=>Z(!1),title:"Menu",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("button",{onClick:()=>{k("/templates"),Z(!1)},className:"w-full btn-brutal text-left py-3 flex items-center gap-2",children:[t.jsx(bt,{className:"w-4 h-4"}),"Templates"]}),t.jsxs("button",{onClick:()=>{k(K?"/designs":"/auth"),Z(!1)},className:"w-full btn-brutal text-left py-3 flex items-center gap-2",children:[t.jsx(Zn,{className:"w-4 h-4"}),K?"My Designs":"Login"]}),y&&t.jsx("p",{className:"text-xs text-primary text-center py-2",children:y})]})}),t.jsxs(N.Suspense,{fallback:null,children:[t.jsx($x,{isOpen:ie,onClose:()=>L(!1)}),l&&t.jsx(Bx,{isOpen:F,onClose:()=>oe(!1),designId:l,designName:x}),t.jsx(Ux,{isOpen:te,onClose:()=>J(!1)}),t.jsx(Hx,{isOpen:ce,onClose:()=>pe(!1),onFontUploaded:G=>{de.success(`${G.name} is now available!`,{description:"You can now use this font in your text objects."})}}),t.jsx(Wx,{open:me,onClose:()=>fe(!1),onDuplicate:(G,W,re,ae)=>{if(e){A(e,G,W,re,ae);const je=G*W-1;de.success(`Created ${je} ${je===1?"copy":"copies"} in ${G}${W} grid`)}}})]}),t.jsx(Vx,{isOpen:Ce,onClose:()=>le(!1),currentColors:(()=>{const G=new Set;return p.forEach(W=>{W.fill&&G.add(W.fill),W.stroke&&G.add(W.stroke),W.colorize&&G.add(W.colorize)}),Array.from(G)})(),onApplyKit:G=>{const W=new Set;p.forEach(ee=>{ee.fill&&ee.fill!=="none"&&W.add(ee.fill),ee.stroke&&W.add(ee.stroke),ee.colorize&&W.add(ee.colorize)});const re=Array.from(W),ae=G.colors,je=new Map;re.forEach((ee,ue)=>{const ve=ae[ue%ae.length];je.set(ee,ve)}),h();let Te=0;p.forEach(ee=>{const ue={};ee.fill&&je.has(ee.fill)&&(ue.fill=je.get(ee.fill),Te++),ee.stroke&&je.has(ee.stroke)&&(ue.stroke=je.get(ee.stroke),Te++),ee.colorize&&je.has(ee.colorize)&&(ue.colorize=je.get(ee.colorize),Te++),Object.keys(ue).length>0&&d(ee.id,ue)}),Te>0?de.success(`Applied "${G.name}" - ${Te} color${Te!==1?"s":""} changed`):de.info(`Applied "${G.name}" - No matching colors found`)}}),t.jsxs(N.Suspense,{fallback:null,children:[t.jsx(Gx,{isOpen:ye,onClose:()=>Se(!1),objects:p,designName:x,onConfirmExport:()=>{de.success("Design exported successfully")}}),t.jsx(Kx,{open:v,onClose:()=>H(!1)})]}),t.jsx(Rx,{})]})}function qx(){const[e,r]=N.useState(!0),[s,n]=N.useState(""),[a,i]=N.useState(""),[l,o]=N.useState(""),{signup:c,login:f,isLoading:p,error:x}=rr(),b=nr(),m=async w=>{w.preventDefault();try{e?await f(s,a):await c(s,a,l),b("/")}catch(d){console.error(d)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:t.jsxs("div",{className:"w-full max-w-md space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("h1",{className:"font-display text-4xl uppercase tracking-widest",children:["Deck",t.jsx("span",{className:"text-primary",children:"Forge"})]}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground uppercase tracking-widest",children:"Fingerboard Graphics Editor"})]}),t.jsxs("div",{className:"border border-border bg-card p-8 space-y-6",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx(se,{variant:e?"default":"outline",className:"flex-1",onClick:()=>r(!0),children:"Login"}),t.jsx(se,{variant:e?"outline":"default",className:"flex-1",onClick:()=>r(!1),children:"Sign Up"})]}),t.jsxs("form",{onSubmit:m,className:"space-y-4",children:[!e&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{htmlFor:"username",children:"Username"}),t.jsx(Ie,{id:"username",type:"text",value:l,onChange:w=>o(w.target.value),placeholder:"fingerboarder123",required:!e})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{htmlFor:"email",children:"Email"}),t.jsx(Ie,{id:"email",type:"email",value:s,onChange:w=>n(w.target.value),placeholder:"you@example.com",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(he,{htmlFor:"password",children:"Password"}),t.jsx(Ie,{id:"password",type:"password",value:a,onChange:w=>i(w.target.value),placeholder:"",required:!0,minLength:6})]}),x&&t.jsx("div",{className:"text-sm text-destructive bg-destructive/10 border border-destructive/20 p-3 rounded",children:x}),t.jsx(se,{type:"submit",className:"w-full",disabled:p,children:p?"Loading...":e?"Login":"Create Account"})]}),t.jsx("div",{className:"text-center",children:t.jsx(se,{variant:"link",onClick:()=>b("/"),className:"text-xs uppercase tracking-widest",children:"Continue as Guest"})})]})]})})}function Ir(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oc={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,r){(function(s){e.exports=s()})(function(){return function s(n,a,i){function l(f,p){if(!a[f]){if(!n[f]){var x=typeof Ir=="function"&&Ir;if(!p&&x)return x(f,!0);if(o)return o(f,!0);var b=new Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b}var m=a[f]={exports:{}};n[f][0].call(m.exports,function(w){var d=n[f][1][w];return l(d||w)},m,m.exports,s,n,a,i)}return a[f].exports}for(var o=typeof Ir=="function"&&Ir,c=0;c<i.length;c++)l(i[c]);return l}({1:[function(s,n,a){var i=s("./utils"),l=s("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(c){for(var f,p,x,b,m,w,d,h=[],g=0,u=c.length,j=u,C=i.getTypeOf(c)!=="string";g<c.length;)j=u-g,x=C?(f=c[g++],p=g<u?c[g++]:0,g<u?c[g++]:0):(f=c.charCodeAt(g++),p=g<u?c.charCodeAt(g++):0,g<u?c.charCodeAt(g++):0),b=f>>2,m=(3&f)<<4|p>>4,w=1<j?(15&p)<<2|x>>6:64,d=2<j?63&x:64,h.push(o.charAt(b)+o.charAt(m)+o.charAt(w)+o.charAt(d));return h.join("")},a.decode=function(c){var f,p,x,b,m,w,d=0,h=0,g="data:";if(c.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var u,j=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&j--,c.charAt(c.length-2)===o.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=l.uint8array?new Uint8Array(0|j):new Array(0|j);d<c.length;)f=o.indexOf(c.charAt(d++))<<2|(b=o.indexOf(c.charAt(d++)))>>4,p=(15&b)<<4|(m=o.indexOf(c.charAt(d++)))>>2,x=(3&m)<<6|(w=o.indexOf(c.charAt(d++))),u[h++]=f,m!==64&&(u[h++]=p),w!==64&&(u[h++]=x);return u}},{"./support":30,"./utils":32}],2:[function(s,n,a){var i=s("./external"),l=s("./stream/DataWorker"),o=s("./stream/Crc32Probe"),c=s("./stream/DataLengthProbe");function f(p,x,b,m,w){this.compressedSize=p,this.uncompressedSize=x,this.crc32=b,this.compression=m,this.compressedContent=w}f.prototype={getContentWorker:function(){var p=new l(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),x=this;return p.on("end",function(){if(this.streamInfo.data_length!==x.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new l(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(p,x,b){return p.pipe(new o).pipe(new c("uncompressedSize")).pipe(x.compressWorker(b)).pipe(new c("compressedSize")).withStreamInfo("compression",x)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,n,a){var i=s("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,n,a){var i=s("./utils"),l=function(){for(var o,c=[],f=0;f<256;f++){o=f;for(var p=0;p<8;p++)o=1&o?3988292384^o>>>1:o>>>1;c[f]=o}return c}();n.exports=function(o,c){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(f,p,x,b){var m=l,w=b+x;f^=-1;for(var d=b;d<w;d++)f=f>>>8^m[255&(f^p[d])];return-1^f}(0|c,o,o.length,0):function(f,p,x,b){var m=l,w=b+x;f^=-1;for(var d=b;d<w;d++)f=f>>>8^m[255&(f^p.charCodeAt(d))];return-1^f}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(s,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(s,n,a){var i=null;i=typeof Promise<"u"?Promise:s("lie"),n.exports={Promise:i}},{lie:37}],7:[function(s,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=s("pako"),o=s("./utils"),c=s("./stream/GenericWorker"),f=i?"uint8array":"array";function p(x,b){c.call(this,"FlateWorker/"+x),this._pako=null,this._pakoAction=x,this._pakoOptions=b,this.meta={}}a.magic="\b\0",o.inherits(p,c),p.prototype.processChunk=function(x){this.meta=x.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(f,x.data),!1)},p.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var x=this;this._pako.onData=function(b){x.push({data:b,meta:x.meta})}},a.compressWorker=function(x){return new p("Deflate",x)},a.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,n,a){function i(m,w){var d,h="";for(d=0;d<w;d++)h+=String.fromCharCode(255&m),m>>>=8;return h}function l(m,w,d,h,g,u){var j,C,S=m.file,A=m.compression,T=u!==f.utf8encode,z=o.transformTo("string",u(S.name)),O=o.transformTo("string",f.utf8encode(S.name)),B=S.comment,K=o.transformTo("string",u(B)),k=o.transformTo("string",f.utf8encode(B)),P=O.length!==S.name.length,y=k.length!==B.length,I="",X="",M="",q=S.dir,U=S.date,ie={crc32:0,compressedSize:0,uncompressedSize:0};w&&!d||(ie.crc32=m.crc32,ie.compressedSize=m.compressedSize,ie.uncompressedSize=m.uncompressedSize);var L=0;w&&(L|=8),T||!P&&!y||(L|=2048);var F=0,oe=0;q&&(F|=16),g==="UNIX"?(oe=798,F|=function(J,Ce){var le=J;return J||(le=Ce?16893:33204),(65535&le)<<16}(S.unixPermissions,q)):(oe=20,F|=function(J){return 63&(J||0)}(S.dosPermissions)),j=U.getUTCHours(),j<<=6,j|=U.getUTCMinutes(),j<<=5,j|=U.getUTCSeconds()/2,C=U.getUTCFullYear()-1980,C<<=4,C|=U.getUTCMonth()+1,C<<=5,C|=U.getUTCDate(),P&&(X=i(1,1)+i(p(z),4)+O,I+="up"+i(X.length,2)+X),y&&(M=i(1,1)+i(p(K),4)+k,I+="uc"+i(M.length,2)+M);var te="";return te+=`
\0`,te+=i(L,2),te+=A.magic,te+=i(j,2),te+=i(C,2),te+=i(ie.crc32,4),te+=i(ie.compressedSize,4),te+=i(ie.uncompressedSize,4),te+=i(z.length,2),te+=i(I.length,2),{fileRecord:x.LOCAL_FILE_HEADER+te+z+I,dirRecord:x.CENTRAL_FILE_HEADER+i(oe,2)+te+i(K.length,2)+"\0\0\0\0"+i(F,4)+i(h,4)+z+I+K}}var o=s("../utils"),c=s("../stream/GenericWorker"),f=s("../utf8"),p=s("../crc32"),x=s("../signature");function b(m,w,d,h){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=d,this.encodeFileName=h,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(b,c),b.prototype.push=function(m){var w=m.meta.percent||0,d=this.entriesCount,h=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,c.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:d?(w+100*(d-h-1))/d:100}}))},b.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var w=this.streamFiles&&!m.file.dir;if(w){var d=l(m,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(m){this.accumulate=!1;var w=this.streamFiles&&!m.file.dir,d=l(m,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),w)this.push({data:function(h){return x.DATA_DESCRIPTOR+i(h.crc32,4)+i(h.compressedSize,4)+i(h.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var m=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var d=this.bytesWritten-m,h=function(g,u,j,C,S){var A=o.transformTo("string",S(C));return x.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(u,4)+i(j,4)+i(A.length,2)+A}(this.dirRecords.length,d,m,this.zipComment,this.encodeFileName);this.push({data:h,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(m){this._sources.push(m);var w=this;return m.on("data",function(d){w.processChunk(d)}),m.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),m.on("error",function(d){w.error(d)}),this},b.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(m){var w=this._sources;if(!c.prototype.error.call(this,m))return!1;for(var d=0;d<w.length;d++)try{w[d].error(m)}catch{}return!0},b.prototype.lock=function(){c.prototype.lock.call(this);for(var m=this._sources,w=0;w<m.length;w++)m[w].lock()},n.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,n,a){var i=s("../compressions"),l=s("./ZipFileWorker");a.generateWorker=function(o,c,f){var p=new l(c.streamFiles,f,c.platform,c.encodeFileName),x=0;try{o.forEach(function(b,m){x++;var w=function(u,j){var C=u||j,S=i[C];if(!S)throw new Error(C+" is not a valid compression method !");return S}(m.options.compression,c.compression),d=m.options.compressionOptions||c.compressionOptions||{},h=m.dir,g=m.date;m._compressWorker(w,d).withStreamInfo("file",{name:b,dir:h,date:g,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(p)}),p.entriesCount=x}catch(b){p.error(b)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new i;for(var o in this)typeof this[o]!="function"&&(l[o]=this[o]);return l}}(i.prototype=s("./object")).loadAsync=s("./load"),i.support=s("./support"),i.defaults=s("./defaults"),i.version="3.10.1",i.loadAsync=function(l,o){return new i().loadAsync(l,o)},i.external=s("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,n,a){var i=s("./utils"),l=s("./external"),o=s("./utf8"),c=s("./zipEntries"),f=s("./stream/Crc32Probe"),p=s("./nodejsUtils");function x(b){return new l.Promise(function(m,w){var d=b.decompressed.getContentWorker().pipe(new f);d.on("error",function(h){w(h)}).on("end",function(){d.streamInfo.crc32!==b.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}n.exports=function(b,m){var w=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),p.isNode&&p.isStream(b)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",b,!0,m.optimizedBinaryString,m.base64).then(function(d){var h=new c(m);return h.load(d),h}).then(function(d){var h=[l.Promise.resolve(d)],g=d.files;if(m.checkCRC32)for(var u=0;u<g.length;u++)h.push(x(g[u]));return l.Promise.all(h)}).then(function(d){for(var h=d.shift(),g=h.files,u=0;u<g.length;u++){var j=g[u],C=j.fileNameStr,S=i.resolve(j.fileNameStr);w.file(S,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:m.createFolders}),j.dir||(w.file(S).unsafeOriginalName=C)}return h.zipComment.length&&(w.comment=h.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,n,a){var i=s("../utils"),l=s("../stream/GenericWorker");function o(c,f){l.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}i.inherits(o,l),o.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(p){f.push({data:p,meta:{percent:0}})}).on("error",function(p){f.isPaused?this.generatedError=p:f.error(p)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},o.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,n,a){var i=s("readable-stream").Readable;function l(o,c,f){i.call(this,c),this._helper=o;var p=this;o.on("data",function(x,b){p.push(x)||p._helper.pause(),f&&f(b)}).on("error",function(x){p.emit("error",x)}).on("end",function(){p.push(null)})}s("../utils").inherits(l,i),l.prototype._read=function(){this._helper.resume()},n.exports=l},{"../utils":32,"readable-stream":16}],14:[function(s,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,l);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,l)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var l=new Buffer(i);return l.fill(0),l},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(s,n,a){function i(S,A,T){var z,O=o.getTypeOf(A),B=o.extend(T||{},p);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(S=g(S)),B.createFolders&&(z=h(S))&&u.call(this,z,!0);var K=O==="string"&&B.binary===!1&&B.base64===!1;T&&T.binary!==void 0||(B.binary=!K),(A instanceof x&&A.uncompressedSize===0||B.dir||!A||A.length===0)&&(B.base64=!1,B.binary=!0,A="",B.compression="STORE",O="string");var k=null;k=A instanceof x||A instanceof c?A:w.isNode&&w.isStream(A)?new d(S,A):o.prepareContent(S,A,B.binary,B.optimizedBinaryString,B.base64);var P=new b(S,k,B);this.files[S]=P}var l=s("./utf8"),o=s("./utils"),c=s("./stream/GenericWorker"),f=s("./stream/StreamHelper"),p=s("./defaults"),x=s("./compressedObject"),b=s("./zipObject"),m=s("./generate"),w=s("./nodejsUtils"),d=s("./nodejs/NodejsStreamInputAdapter"),h=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var A=S.lastIndexOf("/");return 0<A?S.substring(0,A):""},g=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},u=function(S,A){return A=A!==void 0?A:p.createFolders,S=g(S),this.files[S]||i.call(this,S,null,{dir:!0,createFolders:A}),this.files[S]};function j(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var A,T,z;for(A in this.files)z=this.files[A],(T=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&S(T,z)},filter:function(S){var A=[];return this.forEach(function(T,z){S(T,z)&&A.push(z)}),A},file:function(S,A,T){if(arguments.length!==1)return S=this.root+S,i.call(this,S,A,T),this;if(j(S)){var z=S;return this.filter(function(B,K){return!K.dir&&z.test(B)})}var O=this.files[this.root+S];return O&&!O.dir?O:null},folder:function(S){if(!S)return this;if(j(S))return this.filter(function(O,B){return B.dir&&S.test(O)});var A=this.root+S,T=u.call(this,A),z=this.clone();return z.root=T.name,z},remove:function(S){S=this.root+S;var A=this.files[S];if(A||(S.slice(-1)!=="/"&&(S+="/"),A=this.files[S]),A&&!A.dir)delete this.files[S];else for(var T=this.filter(function(O,B){return B.name.slice(0,S.length)===S}),z=0;z<T.length;z++)delete this.files[T[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var A,T={};try{if((T=o.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");o.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var z=T.comment||this.comment||"";A=m.generateWorker(this,T,z)}catch(O){(A=new c("error")).error(O)}return new f(A,T.type||"string",T.mimeType)},generateAsync:function(S,A){return this.generateInternalStream(S).accumulate(A)},generateNodeStream:function(S,A){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(A)}};n.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,n,a){n.exports=s("stream")},{stream:void 0}],17:[function(s,n,a){var i=s("./DataReader");function l(o){i.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}s("../utils").inherits(l,i),l.prototype.byteAt=function(o){return this.data[this.zero+o]},l.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),f=o.charCodeAt(1),p=o.charCodeAt(2),x=o.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===c&&this.data[b+1]===f&&this.data[b+2]===p&&this.data[b+3]===x)return b-this.zero;return-1},l.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),f=o.charCodeAt(1),p=o.charCodeAt(2),x=o.charCodeAt(3),b=this.readData(4);return c===b[0]&&f===b[1]&&p===b[2]&&x===b[3]},l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./DataReader":18}],18:[function(s,n,a){var i=s("../utils");function l(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,f=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=o,f},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=l},{"../utils":32}],19:[function(s,n,a){var i=s("./Uint8ArrayReader");function l(o){i.call(this,o)}s("../utils").inherits(l,i),l.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,n,a){var i=s("./DataReader");function l(o){i.call(this,o)}s("../utils").inherits(l,i),l.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},l.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},l.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},l.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./DataReader":18}],21:[function(s,n,a){var i=s("./ArrayReader");function l(o){i.call(this,o)}s("../utils").inherits(l,i),l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(s,n,a){var i=s("../utils"),l=s("../support"),o=s("./ArrayReader"),c=s("./StringReader"),f=s("./NodeBufferReader"),p=s("./Uint8ArrayReader");n.exports=function(x){var b=i.getTypeOf(x);return i.checkSupport(b),b!=="string"||l.uint8array?b==="nodebuffer"?new f(x):l.uint8array?new p(i.transformTo("uint8array",x)):new o(i.transformTo("array",x)):new c(x)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,n,a){var i=s("./GenericWorker"),l=s("../utils");function o(c){i.call(this,"ConvertWorker to "+c),this.destType=c}l.inherits(o,i),o.prototype.processChunk=function(c){this.push({data:l.transformTo(this.destType,c.data),meta:c.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(s,n,a){var i=s("./GenericWorker"),l=s("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(o,i),o.prototype.processChunk=function(c){this.streamInfo.crc32=l(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,n,a){var i=s("../utils"),l=s("./GenericWorker");function o(c){l.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(o,l),o.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}l.prototype.processChunk.call(this,c)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(s,n,a){var i=s("../utils"),l=s("./GenericWorker");function o(c){l.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(p){f.dataIsReady=!0,f.data=p,f.max=p&&p.length||0,f.type=i.getTypeOf(p),f.isPaused||f._tickAndRepeat()},function(p){f.error(p)})}i.inherits(o,l),o.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(s,n,a){function i(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,o){return this._listeners[l].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,o){if(this._listeners[l])for(var c=0;c<this._listeners[l].length;c++)this._listeners[l][c].call(this,o)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var o=this;return l.on("data",function(c){o.processChunk(c)}),l.on("end",function(){o.end()}),l.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,o){return this.extraStreamInfo[l]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},n.exports=i},{}],29:[function(s,n,a){var i=s("../utils"),l=s("./ConvertWorker"),o=s("./GenericWorker"),c=s("../base64"),f=s("../support"),p=s("../external"),x=null;if(f.nodestream)try{x=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(w,d){return new p.Promise(function(h,g){var u=[],j=w._internalType,C=w._outputType,S=w._mimeType;w.on("data",function(A,T){u.push(A),d&&d(T)}).on("error",function(A){u=[],g(A)}).on("end",function(){try{var A=function(T,z,O){switch(T){case"blob":return i.newBlob(i.transformTo("arraybuffer",z),O);case"base64":return c.encode(z);default:return i.transformTo(T,z)}}(C,function(T,z){var O,B=0,K=null,k=0;for(O=0;O<z.length;O++)k+=z[O].length;switch(T){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(K=new Uint8Array(k),O=0;O<z.length;O++)K.set(z[O],B),B+=z[O].length;return K;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+T+"'")}}(j,u),S);h(A)}catch(T){g(T)}u=[]}).resume()})}function m(w,d,h){var g=d;switch(d){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=d,this._mimeType=h,i.checkSupport(g),this._worker=w.pipe(new l(g)),w.lock()}catch(u){this._worker=new o("error"),this._worker.error(u)}}m.prototype={accumulate:function(w){return b(this,w)},on:function(w,d){var h=this;return w==="data"?this._worker.on(w,function(g){d.call(h,g.data,g.meta)}):this._worker.on(w,function(){i.delay(d,arguments,h)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new x(this,{objectMode:this._outputType!=="nodebuffer"},w)}},n.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(i),a.blob=l.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!s("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(s,n,a){for(var i=s("./utils"),l=s("./support"),o=s("./nodejsUtils"),c=s("./stream/GenericWorker"),f=new Array(256),p=0;p<256;p++)f[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;f[254]=f[254]=1;function x(){c.call(this,"utf-8 decode"),this.leftOver=null}function b(){c.call(this,"utf-8 encode")}a.utf8encode=function(m){return l.nodebuffer?o.newBufferFrom(m,"utf-8"):function(w){var d,h,g,u,j,C=w.length,S=0;for(u=0;u<C;u++)(64512&(h=w.charCodeAt(u)))==55296&&u+1<C&&(64512&(g=w.charCodeAt(u+1)))==56320&&(h=65536+(h-55296<<10)+(g-56320),u++),S+=h<128?1:h<2048?2:h<65536?3:4;for(d=l.uint8array?new Uint8Array(S):new Array(S),u=j=0;j<S;u++)(64512&(h=w.charCodeAt(u)))==55296&&u+1<C&&(64512&(g=w.charCodeAt(u+1)))==56320&&(h=65536+(h-55296<<10)+(g-56320),u++),h<128?d[j++]=h:(h<2048?d[j++]=192|h>>>6:(h<65536?d[j++]=224|h>>>12:(d[j++]=240|h>>>18,d[j++]=128|h>>>12&63),d[j++]=128|h>>>6&63),d[j++]=128|63&h);return d}(m)},a.utf8decode=function(m){return l.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):function(w){var d,h,g,u,j=w.length,C=new Array(2*j);for(d=h=0;d<j;)if((g=w[d++])<128)C[h++]=g;else if(4<(u=f[g]))C[h++]=65533,d+=u-1;else{for(g&=u===2?31:u===3?15:7;1<u&&d<j;)g=g<<6|63&w[d++],u--;1<u?C[h++]=65533:g<65536?C[h++]=g:(g-=65536,C[h++]=55296|g>>10&1023,C[h++]=56320|1023&g)}return C.length!==h&&(C.subarray?C=C.subarray(0,h):C.length=h),i.applyFromCharCode(C)}(m=i.transformTo(l.uint8array?"uint8array":"array",m))},i.inherits(x,c),x.prototype.processChunk=function(m){var w=i.transformTo(l.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var d=w;(w=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),w.set(d,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var h=function(u,j){var C;for((j=j||u.length)>u.length&&(j=u.length),C=j-1;0<=C&&(192&u[C])==128;)C--;return C<0||C===0?j:C+f[u[C]]>j?C:j}(w),g=w;h!==w.length&&(l.uint8array?(g=w.subarray(0,h),this.leftOver=w.subarray(h,w.length)):(g=w.slice(0,h),this.leftOver=w.slice(h,w.length))),this.push({data:a.utf8decode(g),meta:m.meta})},x.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=x,i.inherits(b,c),b.prototype.processChunk=function(m){this.push({data:a.utf8encode(m.data),meta:m.meta})},a.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,n,a){var i=s("./support"),l=s("./base64"),o=s("./nodejsUtils"),c=s("./external");function f(d){return d}function p(d,h){for(var g=0;g<d.length;++g)h[g]=255&d.charCodeAt(g);return h}s("setimmediate"),a.newBlob=function(d,h){a.checkSupport("blob");try{return new Blob([d],{type:h})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(d),g.getBlob(h)}catch{throw new Error("Bug : can't construct the Blob.")}}};var x={stringifyByChunk:function(d,h,g){var u=[],j=0,C=d.length;if(C<=g)return String.fromCharCode.apply(null,d);for(;j<C;)h==="array"||h==="nodebuffer"?u.push(String.fromCharCode.apply(null,d.slice(j,Math.min(j+g,C)))):u.push(String.fromCharCode.apply(null,d.subarray(j,Math.min(j+g,C)))),j+=g;return u.join("")},stringifyByChar:function(d){for(var h="",g=0;g<d.length;g++)h+=String.fromCharCode(d[g]);return h},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function b(d){var h=65536,g=a.getTypeOf(d),u=!0;if(g==="uint8array"?u=x.applyCanBeUsed.uint8array:g==="nodebuffer"&&(u=x.applyCanBeUsed.nodebuffer),u)for(;1<h;)try{return x.stringifyByChunk(d,g,h)}catch{h=Math.floor(h/2)}return x.stringifyByChar(d)}function m(d,h){for(var g=0;g<d.length;g++)h[g]=d[g];return h}a.applyFromCharCode=b;var w={};w.string={string:f,array:function(d){return p(d,new Array(d.length))},arraybuffer:function(d){return w.string.uint8array(d).buffer},uint8array:function(d){return p(d,new Uint8Array(d.length))},nodebuffer:function(d){return p(d,o.allocBuffer(d.length))}},w.array={string:b,array:f,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return o.newBufferFrom(d)}},w.arraybuffer={string:function(d){return b(new Uint8Array(d))},array:function(d){return m(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:f,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return o.newBufferFrom(new Uint8Array(d))}},w.uint8array={string:b,array:function(d){return m(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:f,nodebuffer:function(d){return o.newBufferFrom(d)}},w.nodebuffer={string:b,array:function(d){return m(d,new Array(d.length))},arraybuffer:function(d){return w.nodebuffer.uint8array(d).buffer},uint8array:function(d){return m(d,new Uint8Array(d.length))},nodebuffer:f},a.transformTo=function(d,h){if(h=h||"",!d)return h;a.checkSupport(d);var g=a.getTypeOf(h);return w[g][d](h)},a.resolve=function(d){for(var h=d.split("/"),g=[],u=0;u<h.length;u++){var j=h[u];j==="."||j===""&&u!==0&&u!==h.length-1||(j===".."?g.pop():g.push(j))}return g.join("/")},a.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(d)?"nodebuffer":i.uint8array&&d instanceof Uint8Array?"uint8array":i.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(d){if(!i[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(d){var h,g,u="";for(g=0;g<(d||"").length;g++)u+="\\x"+((h=d.charCodeAt(g))<16?"0":"")+h.toString(16).toUpperCase();return u},a.delay=function(d,h,g){setImmediate(function(){d.apply(g||null,h||[])})},a.inherits=function(d,h){function g(){}g.prototype=h.prototype,d.prototype=new g},a.extend=function(){var d,h,g={};for(d=0;d<arguments.length;d++)for(h in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],h)&&g[h]===void 0&&(g[h]=arguments[d][h]);return g},a.prepareContent=function(d,h,g,u,j){return c.Promise.resolve(h).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new c.Promise(function(S,A){var T=new FileReader;T.onload=function(z){S(z.target.result)},T.onerror=function(z){A(z.target.error)},T.readAsArrayBuffer(C)}):C}).then(function(C){var S=a.getTypeOf(C);return S?(S==="arraybuffer"?C=a.transformTo("uint8array",C):S==="string"&&(j?C=l.decode(C):g&&u!==!0&&(C=function(A){return p(A,i.uint8array?new Uint8Array(A.length):new Array(A.length))}(C))),C):c.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,n,a){var i=s("./reader/readerFor"),l=s("./utils"),o=s("./signature"),c=s("./zipEntry"),f=s("./support");function p(x){this.files=[],this.loadOptions=x}p.prototype={checkSignature:function(x){if(!this.reader.readAndCheckSignature(x)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(b)+", expected "+l.pretty(x)+")")}},isSignature:function(x,b){var m=this.reader.index;this.reader.setIndex(x);var w=this.reader.readString(4)===b;return this.reader.setIndex(m),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var x=this.reader.readData(this.zipCommentLength),b=f.uint8array?"uint8array":"array",m=l.transformTo(b,x);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var x,b,m,w=this.zip64EndOfCentralSize-44;0<w;)x=this.reader.readInt(2),b=this.reader.readInt(4),m=this.reader.readData(b),this.zip64ExtensibleData[x]={id:x,length:b,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var x,b;for(x=0;x<this.files.length;x++)b=this.files[x],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var x;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(x=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(x);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var x=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(x<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(x);var b=x;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(x=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(x),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var w=b-m;if(0<w)this.isSignature(b,o.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(x){this.reader=i(x)},load:function(x){this.prepareReader(x),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,n,a){var i=s("./reader/readerFor"),l=s("./utils"),o=s("./compressedObject"),c=s("./crc32"),f=s("./utf8"),p=s("./compressions"),x=s("./support");function b(m,w){this.options=m,this.loadOptions=w}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var w,d;if(m.skip(22),this.fileNameLength=m.readInt(2),d=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(h){for(var g in p)if(Object.prototype.hasOwnProperty.call(p,g)&&p[g].magic===h)return p[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,w,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var w=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(w),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var w,d,h,g=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<g;)w=m.readInt(2),d=m.readInt(2),h=m.readData(d),this.extraFields[w]={id:w,length:d,value:h};m.setIndex(g)},handleUTF8:function(){var m=x.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var d=l.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var h=this.findExtraFieldUnicodeComment();if(h!==null)this.fileCommentStr=h;else{var g=l.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var w=i(m.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:f.utf8decode(w.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var w=i(m.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:f.utf8decode(w.readData(m.length-5))}return null}},n.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,n,a){function i(w,d,h){this.name=w,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=d,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}}var l=s("./stream/StreamHelper"),o=s("./stream/DataWorker"),c=s("./utf8"),f=s("./compressedObject"),p=s("./stream/GenericWorker");i.prototype={internalStream:function(w){var d=null,h="string";try{if(!w)throw new Error("No output type specified.");var g=(h=w.toLowerCase())==="string"||h==="text";h!=="binarystring"&&h!=="text"||(h="string"),d=this._decompressWorker();var u=!this._dataBinary;u&&!g&&(d=d.pipe(new c.Utf8EncodeWorker)),!u&&g&&(d=d.pipe(new c.Utf8DecodeWorker))}catch(j){(d=new p("error")).error(j)}return new l(d,h,"")},async:function(w,d){return this.internalStream(w).accumulate(d)},nodeStream:function(w,d){return this.internalStream(w||"nodebuffer").toNodejsStream(d)},_compressWorker:function(w,d){if(this._data instanceof f&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(h,w,d)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof p?this._data:new o(this._data)}};for(var x=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<x.length;m++)i.prototype[x[m]]=b;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,n,a){(function(i){var l,o,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var f=0,p=new c(w),x=i.document.createTextNode("");p.observe(x,{characterData:!0}),l=function(){x.data=f=++f%2}}else if(i.setImmediate||i.MessageChannel===void 0)l="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var d=i.document.createElement("script");d.onreadystatechange=function(){w(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},i.document.documentElement.appendChild(d)}:function(){setTimeout(w,0)};else{var b=new i.MessageChannel;b.port1.onmessage=w,l=function(){b.port2.postMessage(0)}}var m=[];function w(){var d,h;o=!0;for(var g=m.length;g;){for(h=m,m=[],d=-1;++d<g;)h[d]();g=m.length}o=!1}n.exports=function(d){m.push(d)!==1||o||l()}}).call(this,typeof Tr<"u"?Tr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,n,a){var i=s("immediate");function l(){}var o={},c=["REJECTED"],f=["FULFILLED"],p=["PENDING"];function x(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,g!==l&&d(this,g)}function b(g,u,j){this.promise=g,typeof u=="function"&&(this.onFulfilled=u,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function m(g,u,j){i(function(){var C;try{C=u(j)}catch(S){return o.reject(g,S)}C===g?o.reject(g,new TypeError("Cannot resolve promise with itself")):o.resolve(g,C)})}function w(g){var u=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof u=="function")return function(){u.apply(g,arguments)}}function d(g,u){var j=!1;function C(T){j||(j=!0,o.reject(g,T))}function S(T){j||(j=!0,o.resolve(g,T))}var A=h(function(){u(S,C)});A.status==="error"&&C(A.value)}function h(g,u){var j={};try{j.value=g(u),j.status="success"}catch(C){j.status="error",j.value=C}return j}(n.exports=x).prototype.finally=function(g){if(typeof g!="function")return this;var u=this.constructor;return this.then(function(j){return u.resolve(g()).then(function(){return j})},function(j){return u.resolve(g()).then(function(){throw j})})},x.prototype.catch=function(g){return this.then(null,g)},x.prototype.then=function(g,u){if(typeof g!="function"&&this.state===f||typeof u!="function"&&this.state===c)return this;var j=new this.constructor(l);return this.state!==p?m(j,this.state===f?g:u,this.outcome):this.queue.push(new b(j,g,u)),j},b.prototype.callFulfilled=function(g){o.resolve(this.promise,g)},b.prototype.otherCallFulfilled=function(g){m(this.promise,this.onFulfilled,g)},b.prototype.callRejected=function(g){o.reject(this.promise,g)},b.prototype.otherCallRejected=function(g){m(this.promise,this.onRejected,g)},o.resolve=function(g,u){var j=h(w,u);if(j.status==="error")return o.reject(g,j.value);var C=j.value;if(C)d(g,C);else{g.state=f,g.outcome=u;for(var S=-1,A=g.queue.length;++S<A;)g.queue[S].callFulfilled(u)}return g},o.reject=function(g,u){g.state=c,g.outcome=u;for(var j=-1,C=g.queue.length;++j<C;)g.queue[j].callRejected(u);return g},x.resolve=function(g){return g instanceof this?g:o.resolve(new this(l),g)},x.reject=function(g){var u=new this(l);return o.reject(u,g)},x.all=function(g){var u=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=g.length,C=!1;if(!j)return this.resolve([]);for(var S=new Array(j),A=0,T=-1,z=new this(l);++T<j;)O(g[T],T);return z;function O(B,K){u.resolve(B).then(function(k){S[K]=k,++A!==j||C||(C=!0,o.resolve(z,S))},function(k){C||(C=!0,o.reject(z,k))})}},x.race=function(g){var u=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=g.length,C=!1;if(!j)return this.resolve([]);for(var S=-1,A=new this(l);++S<j;)T=g[S],u.resolve(T).then(function(z){C||(C=!0,o.resolve(A,z))},function(z){C||(C=!0,o.reject(A,z))});var T;return A}},{immediate:36}],38:[function(s,n,a){var i={};(0,s("./lib/utils/common").assign)(i,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,n,a){var i=s("./zlib/deflate"),l=s("./utils/common"),o=s("./utils/strings"),c=s("./zlib/messages"),f=s("./zlib/zstream"),p=Object.prototype.toString,x=0,b=-1,m=0,w=8;function d(g){if(!(this instanceof d))return new d(g);this.options=l.assign({level:b,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},g||{});var u=this.options;u.raw&&0<u.windowBits?u.windowBits=-u.windowBits:u.gzip&&0<u.windowBits&&u.windowBits<16&&(u.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var j=i.deflateInit2(this.strm,u.level,u.method,u.windowBits,u.memLevel,u.strategy);if(j!==x)throw new Error(c[j]);if(u.header&&i.deflateSetHeader(this.strm,u.header),u.dictionary){var C;if(C=typeof u.dictionary=="string"?o.string2buf(u.dictionary):p.call(u.dictionary)==="[object ArrayBuffer]"?new Uint8Array(u.dictionary):u.dictionary,(j=i.deflateSetDictionary(this.strm,C))!==x)throw new Error(c[j]);this._dict_set=!0}}function h(g,u){var j=new d(u);if(j.push(g,!0),j.err)throw j.msg||c[j.err];return j.result}d.prototype.push=function(g,u){var j,C,S=this.strm,A=this.options.chunkSize;if(this.ended)return!1;C=u===~~u?u:u===!0?4:0,typeof g=="string"?S.input=o.string2buf(g):p.call(g)==="[object ArrayBuffer]"?S.input=new Uint8Array(g):S.input=g,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new l.Buf8(A),S.next_out=0,S.avail_out=A),(j=i.deflate(S,C))!==1&&j!==x)return this.onEnd(j),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(l.shrinkBuf(S.output,S.next_out))):this.onData(l.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&j!==1);return C===4?(j=i.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===x):C!==2||(this.onEnd(x),!(S.avail_out=0))},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===x&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},a.Deflate=d,a.deflate=h,a.deflateRaw=function(g,u){return(u=u||{}).raw=!0,h(g,u)},a.gzip=function(g,u){return(u=u||{}).gzip=!0,h(g,u)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,n,a){var i=s("./zlib/inflate"),l=s("./utils/common"),o=s("./utils/strings"),c=s("./zlib/constants"),f=s("./zlib/messages"),p=s("./zlib/zstream"),x=s("./zlib/gzheader"),b=Object.prototype.toString;function m(d){if(!(this instanceof m))return new m(d);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},d||{});var h=this.options;h.raw&&0<=h.windowBits&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),!(0<=h.windowBits&&h.windowBits<16)||d&&d.windowBits||(h.windowBits+=32),15<h.windowBits&&h.windowBits<48&&!(15&h.windowBits)&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,h.windowBits);if(g!==c.Z_OK)throw new Error(f[g]);this.header=new x,i.inflateGetHeader(this.strm,this.header)}function w(d,h){var g=new m(h);if(g.push(d,!0),g.err)throw g.msg||f[g.err];return g.result}m.prototype.push=function(d,h){var g,u,j,C,S,A,T=this.strm,z=this.options.chunkSize,O=this.options.dictionary,B=!1;if(this.ended)return!1;u=h===~~h?h:h===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof d=="string"?T.input=o.binstring2buf(d):b.call(d)==="[object ArrayBuffer]"?T.input=new Uint8Array(d):T.input=d,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new l.Buf8(z),T.next_out=0,T.avail_out=z),(g=i.inflate(T,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&O&&(A=typeof O=="string"?o.string2buf(O):b.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,g=i.inflateSetDictionary(this.strm,A)),g===c.Z_BUF_ERROR&&B===!0&&(g=c.Z_OK,B=!1),g!==c.Z_STREAM_END&&g!==c.Z_OK)return this.onEnd(g),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&g!==c.Z_STREAM_END&&(T.avail_in!==0||u!==c.Z_FINISH&&u!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=o.utf8border(T.output,T.next_out),C=T.next_out-j,S=o.buf2string(T.output,j),T.next_out=C,T.avail_out=z-C,C&&l.arraySet(T.output,T.output,j,C,0),this.onData(S)):this.onData(l.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(B=!0)}while((0<T.avail_in||T.avail_out===0)&&g!==c.Z_STREAM_END);return g===c.Z_STREAM_END&&(u=c.Z_FINISH),u===c.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===c.Z_OK):u!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(T.avail_out=0))},m.prototype.onData=function(d){this.chunks.push(d)},m.prototype.onEnd=function(d){d===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},a.Inflate=m,a.inflate=w,a.inflateRaw=function(d,h){return(h=h||{}).raw=!0,w(d,h)},a.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var p=f.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var x in p)p.hasOwnProperty(x)&&(c[x]=p[x])}}return c},a.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var l={arraySet:function(c,f,p,x,b){if(f.subarray&&c.subarray)c.set(f.subarray(p,p+x),b);else for(var m=0;m<x;m++)c[b+m]=f[p+m]},flattenChunks:function(c){var f,p,x,b,m,w;for(f=x=0,p=c.length;f<p;f++)x+=c[f].length;for(w=new Uint8Array(x),f=b=0,p=c.length;f<p;f++)m=c[f],w.set(m,b),b+=m.length;return w}},o={arraySet:function(c,f,p,x,b){for(var m=0;m<x;m++)c[b+m]=f[p+m]},flattenChunks:function(c){return[].concat.apply([],c)}};a.setTyped=function(c){c?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,l)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(s,n,a){var i=s("./common"),l=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new i.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function p(x,b){if(b<65537&&(x.subarray&&o||!x.subarray&&l))return String.fromCharCode.apply(null,i.shrinkBuf(x,b));for(var m="",w=0;w<b;w++)m+=String.fromCharCode(x[w]);return m}c[254]=c[254]=1,a.string2buf=function(x){var b,m,w,d,h,g=x.length,u=0;for(d=0;d<g;d++)(64512&(m=x.charCodeAt(d)))==55296&&d+1<g&&(64512&(w=x.charCodeAt(d+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),d++),u+=m<128?1:m<2048?2:m<65536?3:4;for(b=new i.Buf8(u),d=h=0;h<u;d++)(64512&(m=x.charCodeAt(d)))==55296&&d+1<g&&(64512&(w=x.charCodeAt(d+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),d++),m<128?b[h++]=m:(m<2048?b[h++]=192|m>>>6:(m<65536?b[h++]=224|m>>>12:(b[h++]=240|m>>>18,b[h++]=128|m>>>12&63),b[h++]=128|m>>>6&63),b[h++]=128|63&m);return b},a.buf2binstring=function(x){return p(x,x.length)},a.binstring2buf=function(x){for(var b=new i.Buf8(x.length),m=0,w=b.length;m<w;m++)b[m]=x.charCodeAt(m);return b},a.buf2string=function(x,b){var m,w,d,h,g=b||x.length,u=new Array(2*g);for(m=w=0;m<g;)if((d=x[m++])<128)u[w++]=d;else if(4<(h=c[d]))u[w++]=65533,m+=h-1;else{for(d&=h===2?31:h===3?15:7;1<h&&m<g;)d=d<<6|63&x[m++],h--;1<h?u[w++]=65533:d<65536?u[w++]=d:(d-=65536,u[w++]=55296|d>>10&1023,u[w++]=56320|1023&d)}return p(u,w)},a.utf8border=function(x,b){var m;for((b=b||x.length)>x.length&&(b=x.length),m=b-1;0<=m&&(192&x[m])==128;)m--;return m<0||m===0?b:m+c[x[m]]>b?m:b}},{"./common":41}],43:[function(s,n,a){n.exports=function(i,l,o,c){for(var f=65535&i|0,p=i>>>16&65535|0,x=0;o!==0;){for(o-=x=2e3<o?2e3:o;p=p+(f=f+l[c++]|0)|0,--x;);f%=65521,p%=65521}return f|p<<16|0}},{}],44:[function(s,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,n,a){var i=function(){for(var l,o=[],c=0;c<256;c++){l=c;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;o[c]=l}return o}();n.exports=function(l,o,c,f){var p=i,x=f+c;l^=-1;for(var b=f;b<x;b++)l=l>>>8^p[255&(l^o[b])];return-1^l}},{}],46:[function(s,n,a){var i,l=s("../utils/common"),o=s("./trees"),c=s("./adler32"),f=s("./crc32"),p=s("./messages"),x=0,b=4,m=0,w=-2,d=-1,h=4,g=2,u=8,j=9,C=286,S=30,A=19,T=2*C+1,z=15,O=3,B=258,K=B+O+1,k=42,P=113,y=1,I=2,X=3,M=4;function q(v,H){return v.msg=p[H],H}function U(v){return(v<<1)-(4<v?9:0)}function ie(v){for(var H=v.length;0<=--H;)v[H]=0}function L(v){var H=v.state,$=H.pending;$>v.avail_out&&($=v.avail_out),$!==0&&(l.arraySet(v.output,H.pending_buf,H.pending_out,$,v.next_out),v.next_out+=$,H.pending_out+=$,v.total_out+=$,v.avail_out-=$,H.pending-=$,H.pending===0&&(H.pending_out=0))}function F(v,H){o._tr_flush_block(v,0<=v.block_start?v.block_start:-1,v.strstart-v.block_start,H),v.block_start=v.strstart,L(v.strm)}function oe(v,H){v.pending_buf[v.pending++]=H}function te(v,H){v.pending_buf[v.pending++]=H>>>8&255,v.pending_buf[v.pending++]=255&H}function J(v,H){var $,E,_=v.max_chain_length,R=v.strstart,Y=v.prev_length,Z=v.nice_match,D=v.strstart>v.w_size-K?v.strstart-(v.w_size-K):0,Q=v.window,ne=v.w_mask,G=v.prev,W=v.strstart+B,re=Q[R+Y-1],ae=Q[R+Y];v.prev_length>=v.good_match&&(_>>=2),Z>v.lookahead&&(Z=v.lookahead);do if(Q[($=H)+Y]===ae&&Q[$+Y-1]===re&&Q[$]===Q[R]&&Q[++$]===Q[R+1]){R+=2,$++;do;while(Q[++R]===Q[++$]&&Q[++R]===Q[++$]&&Q[++R]===Q[++$]&&Q[++R]===Q[++$]&&Q[++R]===Q[++$]&&Q[++R]===Q[++$]&&Q[++R]===Q[++$]&&Q[++R]===Q[++$]&&R<W);if(E=B-(W-R),R=W-B,Y<E){if(v.match_start=H,Z<=(Y=E))break;re=Q[R+Y-1],ae=Q[R+Y]}}while((H=G[H&ne])>D&&--_!=0);return Y<=v.lookahead?Y:v.lookahead}function Ce(v){var H,$,E,_,R,Y,Z,D,Q,ne,G=v.w_size;do{if(_=v.window_size-v.lookahead-v.strstart,v.strstart>=G+(G-K)){for(l.arraySet(v.window,v.window,G,G,0),v.match_start-=G,v.strstart-=G,v.block_start-=G,H=$=v.hash_size;E=v.head[--H],v.head[H]=G<=E?E-G:0,--$;);for(H=$=G;E=v.prev[--H],v.prev[H]=G<=E?E-G:0,--$;);_+=G}if(v.strm.avail_in===0)break;if(Y=v.strm,Z=v.window,D=v.strstart+v.lookahead,Q=_,ne=void 0,ne=Y.avail_in,Q<ne&&(ne=Q),$=ne===0?0:(Y.avail_in-=ne,l.arraySet(Z,Y.input,Y.next_in,ne,D),Y.state.wrap===1?Y.adler=c(Y.adler,Z,ne,D):Y.state.wrap===2&&(Y.adler=f(Y.adler,Z,ne,D)),Y.next_in+=ne,Y.total_in+=ne,ne),v.lookahead+=$,v.lookahead+v.insert>=O)for(R=v.strstart-v.insert,v.ins_h=v.window[R],v.ins_h=(v.ins_h<<v.hash_shift^v.window[R+1])&v.hash_mask;v.insert&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[R+O-1])&v.hash_mask,v.prev[R&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=R,R++,v.insert--,!(v.lookahead+v.insert<O)););}while(v.lookahead<K&&v.strm.avail_in!==0)}function le(v,H){for(var $,E;;){if(v.lookahead<K){if(Ce(v),v.lookahead<K&&H===x)return y;if(v.lookahead===0)break}if($=0,v.lookahead>=O&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),$!==0&&v.strstart-$<=v.w_size-K&&(v.match_length=J(v,$)),v.match_length>=O)if(E=o._tr_tally(v,v.strstart-v.match_start,v.match_length-O),v.lookahead-=v.match_length,v.match_length<=v.max_lazy_match&&v.lookahead>=O){for(v.match_length--;v.strstart++,v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart,--v.match_length!=0;);v.strstart++}else v.strstart+=v.match_length,v.match_length=0,v.ins_h=v.window[v.strstart],v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+1])&v.hash_mask;else E=o._tr_tally(v,0,v.window[v.strstart]),v.lookahead--,v.strstart++;if(E&&(F(v,!1),v.strm.avail_out===0))return y}return v.insert=v.strstart<O-1?v.strstart:O-1,H===b?(F(v,!0),v.strm.avail_out===0?X:M):v.last_lit&&(F(v,!1),v.strm.avail_out===0)?y:I}function ce(v,H){for(var $,E,_;;){if(v.lookahead<K){if(Ce(v),v.lookahead<K&&H===x)return y;if(v.lookahead===0)break}if($=0,v.lookahead>=O&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),v.prev_length=v.match_length,v.prev_match=v.match_start,v.match_length=O-1,$!==0&&v.prev_length<v.max_lazy_match&&v.strstart-$<=v.w_size-K&&(v.match_length=J(v,$),v.match_length<=5&&(v.strategy===1||v.match_length===O&&4096<v.strstart-v.match_start)&&(v.match_length=O-1)),v.prev_length>=O&&v.match_length<=v.prev_length){for(_=v.strstart+v.lookahead-O,E=o._tr_tally(v,v.strstart-1-v.prev_match,v.prev_length-O),v.lookahead-=v.prev_length-1,v.prev_length-=2;++v.strstart<=_&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+O-1])&v.hash_mask,$=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),--v.prev_length!=0;);if(v.match_available=0,v.match_length=O-1,v.strstart++,E&&(F(v,!1),v.strm.avail_out===0))return y}else if(v.match_available){if((E=o._tr_tally(v,0,v.window[v.strstart-1]))&&F(v,!1),v.strstart++,v.lookahead--,v.strm.avail_out===0)return y}else v.match_available=1,v.strstart++,v.lookahead--}return v.match_available&&(E=o._tr_tally(v,0,v.window[v.strstart-1]),v.match_available=0),v.insert=v.strstart<O-1?v.strstart:O-1,H===b?(F(v,!0),v.strm.avail_out===0?X:M):v.last_lit&&(F(v,!1),v.strm.avail_out===0)?y:I}function pe(v,H,$,E,_){this.good_length=v,this.max_lazy=H,this.nice_length=$,this.max_chain=E,this.func=_}function me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=u,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*T),this.dyn_dtree=new l.Buf16(2*(2*S+1)),this.bl_tree=new l.Buf16(2*(2*A+1)),ie(this.dyn_ltree),ie(this.dyn_dtree),ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(z+1),this.heap=new l.Buf16(2*C+1),ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*C+1),ie(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(v){var H;return v&&v.state?(v.total_in=v.total_out=0,v.data_type=g,(H=v.state).pending=0,H.pending_out=0,H.wrap<0&&(H.wrap=-H.wrap),H.status=H.wrap?k:P,v.adler=H.wrap===2?0:1,H.last_flush=x,o._tr_init(H),m):q(v,w)}function ye(v){var H=fe(v);return H===m&&function($){$.window_size=2*$.w_size,ie($.head),$.max_lazy_match=i[$.level].max_lazy,$.good_match=i[$.level].good_length,$.nice_match=i[$.level].nice_length,$.max_chain_length=i[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=O-1,$.match_available=0,$.ins_h=0}(v.state),H}function Se(v,H,$,E,_,R){if(!v)return w;var Y=1;if(H===d&&(H=6),E<0?(Y=0,E=-E):15<E&&(Y=2,E-=16),_<1||j<_||$!==u||E<8||15<E||H<0||9<H||R<0||h<R)return q(v,w);E===8&&(E=9);var Z=new me;return(v.state=Z).strm=v,Z.wrap=Y,Z.gzhead=null,Z.w_bits=E,Z.w_size=1<<Z.w_bits,Z.w_mask=Z.w_size-1,Z.hash_bits=_+7,Z.hash_size=1<<Z.hash_bits,Z.hash_mask=Z.hash_size-1,Z.hash_shift=~~((Z.hash_bits+O-1)/O),Z.window=new l.Buf8(2*Z.w_size),Z.head=new l.Buf16(Z.hash_size),Z.prev=new l.Buf16(Z.w_size),Z.lit_bufsize=1<<_+6,Z.pending_buf_size=4*Z.lit_bufsize,Z.pending_buf=new l.Buf8(Z.pending_buf_size),Z.d_buf=1*Z.lit_bufsize,Z.l_buf=3*Z.lit_bufsize,Z.level=H,Z.strategy=R,Z.method=$,ye(v)}i=[new pe(0,0,0,0,function(v,H){var $=65535;for($>v.pending_buf_size-5&&($=v.pending_buf_size-5);;){if(v.lookahead<=1){if(Ce(v),v.lookahead===0&&H===x)return y;if(v.lookahead===0)break}v.strstart+=v.lookahead,v.lookahead=0;var E=v.block_start+$;if((v.strstart===0||v.strstart>=E)&&(v.lookahead=v.strstart-E,v.strstart=E,F(v,!1),v.strm.avail_out===0)||v.strstart-v.block_start>=v.w_size-K&&(F(v,!1),v.strm.avail_out===0))return y}return v.insert=0,H===b?(F(v,!0),v.strm.avail_out===0?X:M):(v.strstart>v.block_start&&(F(v,!1),v.strm.avail_out),y)}),new pe(4,4,8,4,le),new pe(4,5,16,8,le),new pe(4,6,32,32,le),new pe(4,4,16,16,ce),new pe(8,16,32,32,ce),new pe(8,16,128,128,ce),new pe(8,32,128,256,ce),new pe(32,128,258,1024,ce),new pe(32,258,258,4096,ce)],a.deflateInit=function(v,H){return Se(v,H,u,15,8,0)},a.deflateInit2=Se,a.deflateReset=ye,a.deflateResetKeep=fe,a.deflateSetHeader=function(v,H){return v&&v.state?v.state.wrap!==2?w:(v.state.gzhead=H,m):w},a.deflate=function(v,H){var $,E,_,R;if(!v||!v.state||5<H||H<0)return v?q(v,w):w;if(E=v.state,!v.output||!v.input&&v.avail_in!==0||E.status===666&&H!==b)return q(v,v.avail_out===0?-5:w);if(E.strm=v,$=E.last_flush,E.last_flush=H,E.status===k)if(E.wrap===2)v.adler=0,oe(E,31),oe(E,139),oe(E,8),E.gzhead?(oe(E,(E.gzhead.text?1:0)+(E.gzhead.hcrc?2:0)+(E.gzhead.extra?4:0)+(E.gzhead.name?8:0)+(E.gzhead.comment?16:0)),oe(E,255&E.gzhead.time),oe(E,E.gzhead.time>>8&255),oe(E,E.gzhead.time>>16&255),oe(E,E.gzhead.time>>24&255),oe(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),oe(E,255&E.gzhead.os),E.gzhead.extra&&E.gzhead.extra.length&&(oe(E,255&E.gzhead.extra.length),oe(E,E.gzhead.extra.length>>8&255)),E.gzhead.hcrc&&(v.adler=f(v.adler,E.pending_buf,E.pending,0)),E.gzindex=0,E.status=69):(oe(E,0),oe(E,0),oe(E,0),oe(E,0),oe(E,0),oe(E,E.level===9?2:2<=E.strategy||E.level<2?4:0),oe(E,3),E.status=P);else{var Y=u+(E.w_bits-8<<4)<<8;Y|=(2<=E.strategy||E.level<2?0:E.level<6?1:E.level===6?2:3)<<6,E.strstart!==0&&(Y|=32),Y+=31-Y%31,E.status=P,te(E,Y),E.strstart!==0&&(te(E,v.adler>>>16),te(E,65535&v.adler)),v.adler=1}if(E.status===69)if(E.gzhead.extra){for(_=E.pending;E.gzindex<(65535&E.gzhead.extra.length)&&(E.pending!==E.pending_buf_size||(E.gzhead.hcrc&&E.pending>_&&(v.adler=f(v.adler,E.pending_buf,E.pending-_,_)),L(v),_=E.pending,E.pending!==E.pending_buf_size));)oe(E,255&E.gzhead.extra[E.gzindex]),E.gzindex++;E.gzhead.hcrc&&E.pending>_&&(v.adler=f(v.adler,E.pending_buf,E.pending-_,_)),E.gzindex===E.gzhead.extra.length&&(E.gzindex=0,E.status=73)}else E.status=73;if(E.status===73)if(E.gzhead.name){_=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>_&&(v.adler=f(v.adler,E.pending_buf,E.pending-_,_)),L(v),_=E.pending,E.pending===E.pending_buf_size)){R=1;break}R=E.gzindex<E.gzhead.name.length?255&E.gzhead.name.charCodeAt(E.gzindex++):0,oe(E,R)}while(R!==0);E.gzhead.hcrc&&E.pending>_&&(v.adler=f(v.adler,E.pending_buf,E.pending-_,_)),R===0&&(E.gzindex=0,E.status=91)}else E.status=91;if(E.status===91)if(E.gzhead.comment){_=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>_&&(v.adler=f(v.adler,E.pending_buf,E.pending-_,_)),L(v),_=E.pending,E.pending===E.pending_buf_size)){R=1;break}R=E.gzindex<E.gzhead.comment.length?255&E.gzhead.comment.charCodeAt(E.gzindex++):0,oe(E,R)}while(R!==0);E.gzhead.hcrc&&E.pending>_&&(v.adler=f(v.adler,E.pending_buf,E.pending-_,_)),R===0&&(E.status=103)}else E.status=103;if(E.status===103&&(E.gzhead.hcrc?(E.pending+2>E.pending_buf_size&&L(v),E.pending+2<=E.pending_buf_size&&(oe(E,255&v.adler),oe(E,v.adler>>8&255),v.adler=0,E.status=P)):E.status=P),E.pending!==0){if(L(v),v.avail_out===0)return E.last_flush=-1,m}else if(v.avail_in===0&&U(H)<=U($)&&H!==b)return q(v,-5);if(E.status===666&&v.avail_in!==0)return q(v,-5);if(v.avail_in!==0||E.lookahead!==0||H!==x&&E.status!==666){var Z=E.strategy===2?function(D,Q){for(var ne;;){if(D.lookahead===0&&(Ce(D),D.lookahead===0)){if(Q===x)return y;break}if(D.match_length=0,ne=o._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,ne&&(F(D,!1),D.strm.avail_out===0))return y}return D.insert=0,Q===b?(F(D,!0),D.strm.avail_out===0?X:M):D.last_lit&&(F(D,!1),D.strm.avail_out===0)?y:I}(E,H):E.strategy===3?function(D,Q){for(var ne,G,W,re,ae=D.window;;){if(D.lookahead<=B){if(Ce(D),D.lookahead<=B&&Q===x)return y;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=O&&0<D.strstart&&(G=ae[W=D.strstart-1])===ae[++W]&&G===ae[++W]&&G===ae[++W]){re=D.strstart+B;do;while(G===ae[++W]&&G===ae[++W]&&G===ae[++W]&&G===ae[++W]&&G===ae[++W]&&G===ae[++W]&&G===ae[++W]&&G===ae[++W]&&W<re);D.match_length=B-(re-W),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=O?(ne=o._tr_tally(D,1,D.match_length-O),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(ne=o._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),ne&&(F(D,!1),D.strm.avail_out===0))return y}return D.insert=0,Q===b?(F(D,!0),D.strm.avail_out===0?X:M):D.last_lit&&(F(D,!1),D.strm.avail_out===0)?y:I}(E,H):i[E.level].func(E,H);if(Z!==X&&Z!==M||(E.status=666),Z===y||Z===X)return v.avail_out===0&&(E.last_flush=-1),m;if(Z===I&&(H===1?o._tr_align(E):H!==5&&(o._tr_stored_block(E,0,0,!1),H===3&&(ie(E.head),E.lookahead===0&&(E.strstart=0,E.block_start=0,E.insert=0))),L(v),v.avail_out===0))return E.last_flush=-1,m}return H!==b?m:E.wrap<=0?1:(E.wrap===2?(oe(E,255&v.adler),oe(E,v.adler>>8&255),oe(E,v.adler>>16&255),oe(E,v.adler>>24&255),oe(E,255&v.total_in),oe(E,v.total_in>>8&255),oe(E,v.total_in>>16&255),oe(E,v.total_in>>24&255)):(te(E,v.adler>>>16),te(E,65535&v.adler)),L(v),0<E.wrap&&(E.wrap=-E.wrap),E.pending!==0?m:1)},a.deflateEnd=function(v){var H;return v&&v.state?(H=v.state.status)!==k&&H!==69&&H!==73&&H!==91&&H!==103&&H!==P&&H!==666?q(v,w):(v.state=null,H===P?q(v,-3):m):w},a.deflateSetDictionary=function(v,H){var $,E,_,R,Y,Z,D,Q,ne=H.length;if(!v||!v.state||(R=($=v.state).wrap)===2||R===1&&$.status!==k||$.lookahead)return w;for(R===1&&(v.adler=c(v.adler,H,ne,0)),$.wrap=0,ne>=$.w_size&&(R===0&&(ie($.head),$.strstart=0,$.block_start=0,$.insert=0),Q=new l.Buf8($.w_size),l.arraySet(Q,H,ne-$.w_size,$.w_size,0),H=Q,ne=$.w_size),Y=v.avail_in,Z=v.next_in,D=v.input,v.avail_in=ne,v.next_in=0,v.input=H,Ce($);$.lookahead>=O;){for(E=$.strstart,_=$.lookahead-(O-1);$.ins_h=($.ins_h<<$.hash_shift^$.window[E+O-1])&$.hash_mask,$.prev[E&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=E,E++,--_;);$.strstart=E,$.lookahead=O-1,Ce($)}return $.strstart+=$.lookahead,$.block_start=$.strstart,$.insert=$.lookahead,$.lookahead=0,$.match_length=$.prev_length=O-1,$.match_available=0,v.next_in=Z,v.input=D,v.avail_in=Y,$.wrap=R,m},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,n,a){n.exports=function(i,l){var o,c,f,p,x,b,m,w,d,h,g,u,j,C,S,A,T,z,O,B,K,k,P,y,I;o=i.state,c=i.next_in,y=i.input,f=c+(i.avail_in-5),p=i.next_out,I=i.output,x=p-(l-i.avail_out),b=p+(i.avail_out-257),m=o.dmax,w=o.wsize,d=o.whave,h=o.wnext,g=o.window,u=o.hold,j=o.bits,C=o.lencode,S=o.distcode,A=(1<<o.lenbits)-1,T=(1<<o.distbits)-1;e:do{j<15&&(u+=y[c++]<<j,j+=8,u+=y[c++]<<j,j+=8),z=C[u&A];t:for(;;){if(u>>>=O=z>>>24,j-=O,(O=z>>>16&255)===0)I[p++]=65535&z;else{if(!(16&O)){if(!(64&O)){z=C[(65535&z)+(u&(1<<O)-1)];continue t}if(32&O){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}B=65535&z,(O&=15)&&(j<O&&(u+=y[c++]<<j,j+=8),B+=u&(1<<O)-1,u>>>=O,j-=O),j<15&&(u+=y[c++]<<j,j+=8,u+=y[c++]<<j,j+=8),z=S[u&T];r:for(;;){if(u>>>=O=z>>>24,j-=O,!(16&(O=z>>>16&255))){if(!(64&O)){z=S[(65535&z)+(u&(1<<O)-1)];continue r}i.msg="invalid distance code",o.mode=30;break e}if(K=65535&z,j<(O&=15)&&(u+=y[c++]<<j,(j+=8)<O&&(u+=y[c++]<<j,j+=8)),m<(K+=u&(1<<O)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(u>>>=O,j-=O,(O=p-x)<K){if(d<(O=K-O)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(P=g,(k=0)===h){if(k+=w-O,O<B){for(B-=O;I[p++]=g[k++],--O;);k=p-K,P=I}}else if(h<O){if(k+=w+h-O,(O-=h)<B){for(B-=O;I[p++]=g[k++],--O;);if(k=0,h<B){for(B-=O=h;I[p++]=g[k++],--O;);k=p-K,P=I}}}else if(k+=h-O,O<B){for(B-=O;I[p++]=g[k++],--O;);k=p-K,P=I}for(;2<B;)I[p++]=P[k++],I[p++]=P[k++],I[p++]=P[k++],B-=3;B&&(I[p++]=P[k++],1<B&&(I[p++]=P[k++]))}else{for(k=p-K;I[p++]=I[k++],I[p++]=I[k++],I[p++]=I[k++],2<(B-=3););B&&(I[p++]=I[k++],1<B&&(I[p++]=I[k++]))}break}}break}}while(c<f&&p<b);c-=B=j>>3,u&=(1<<(j-=B<<3))-1,i.next_in=c,i.next_out=p,i.avail_in=c<f?f-c+5:5-(c-f),i.avail_out=p<b?b-p+257:257-(p-b),o.hold=u,o.bits=j}},{}],49:[function(s,n,a){var i=s("../utils/common"),l=s("./adler32"),o=s("./crc32"),c=s("./inffast"),f=s("./inftrees"),p=1,x=2,b=0,m=-2,w=1,d=852,h=592;function g(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(k){var P;return k&&k.state?(P=k.state,k.total_in=k.total_out=P.total=0,k.msg="",P.wrap&&(k.adler=1&P.wrap),P.mode=w,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new i.Buf32(d),P.distcode=P.distdyn=new i.Buf32(h),P.sane=1,P.back=-1,b):m}function C(k){var P;return k&&k.state?((P=k.state).wsize=0,P.whave=0,P.wnext=0,j(k)):m}function S(k,P){var y,I;return k&&k.state?(I=k.state,P<0?(y=0,P=-P):(y=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?m:(I.window!==null&&I.wbits!==P&&(I.window=null),I.wrap=y,I.wbits=P,C(k))):m}function A(k,P){var y,I;return k?(I=new u,(k.state=I).window=null,(y=S(k,P))!==b&&(k.state=null),y):m}var T,z,O=!0;function B(k){if(O){var P;for(T=new i.Buf32(512),z=new i.Buf32(32),P=0;P<144;)k.lens[P++]=8;for(;P<256;)k.lens[P++]=9;for(;P<280;)k.lens[P++]=7;for(;P<288;)k.lens[P++]=8;for(f(p,k.lens,0,288,T,0,k.work,{bits:9}),P=0;P<32;)k.lens[P++]=5;f(x,k.lens,0,32,z,0,k.work,{bits:5}),O=!1}k.lencode=T,k.lenbits=9,k.distcode=z,k.distbits=5}function K(k,P,y,I){var X,M=k.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new i.Buf8(M.wsize)),I>=M.wsize?(i.arraySet(M.window,P,y-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(I<(X=M.wsize-M.wnext)&&(X=I),i.arraySet(M.window,P,y-I,X,M.wnext),(I-=X)?(i.arraySet(M.window,P,y-I,I,0),M.wnext=I,M.whave=M.wsize):(M.wnext+=X,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=X))),0}a.inflateReset=C,a.inflateReset2=S,a.inflateResetKeep=j,a.inflateInit=function(k){return A(k,15)},a.inflateInit2=A,a.inflate=function(k,P){var y,I,X,M,q,U,ie,L,F,oe,te,J,Ce,le,ce,pe,me,fe,ye,Se,v,H,$,E,_=0,R=new i.Buf8(4),Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return m;(y=k.state).mode===12&&(y.mode=13),q=k.next_out,X=k.output,ie=k.avail_out,M=k.next_in,I=k.input,U=k.avail_in,L=y.hold,F=y.bits,oe=U,te=ie,H=b;e:for(;;)switch(y.mode){case w:if(y.wrap===0){y.mode=13;break}for(;F<16;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}if(2&y.wrap&&L===35615){R[y.check=0]=255&L,R[1]=L>>>8&255,y.check=o(y.check,R,2,0),F=L=0,y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&L)<<8)+(L>>8))%31){k.msg="incorrect header check",y.mode=30;break}if((15&L)!=8){k.msg="unknown compression method",y.mode=30;break}if(F-=4,v=8+(15&(L>>>=4)),y.wbits===0)y.wbits=v;else if(v>y.wbits){k.msg="invalid window size",y.mode=30;break}y.dmax=1<<v,k.adler=y.check=1,y.mode=512&L?10:12,F=L=0;break;case 2:for(;F<16;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}if(y.flags=L,(255&y.flags)!=8){k.msg="unknown compression method",y.mode=30;break}if(57344&y.flags){k.msg="unknown header flags set",y.mode=30;break}y.head&&(y.head.text=L>>8&1),512&y.flags&&(R[0]=255&L,R[1]=L>>>8&255,y.check=o(y.check,R,2,0)),F=L=0,y.mode=3;case 3:for(;F<32;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}y.head&&(y.head.time=L),512&y.flags&&(R[0]=255&L,R[1]=L>>>8&255,R[2]=L>>>16&255,R[3]=L>>>24&255,y.check=o(y.check,R,4,0)),F=L=0,y.mode=4;case 4:for(;F<16;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}y.head&&(y.head.xflags=255&L,y.head.os=L>>8),512&y.flags&&(R[0]=255&L,R[1]=L>>>8&255,y.check=o(y.check,R,2,0)),F=L=0,y.mode=5;case 5:if(1024&y.flags){for(;F<16;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}y.length=L,y.head&&(y.head.extra_len=L),512&y.flags&&(R[0]=255&L,R[1]=L>>>8&255,y.check=o(y.check,R,2,0)),F=L=0}else y.head&&(y.head.extra=null);y.mode=6;case 6:if(1024&y.flags&&(U<(J=y.length)&&(J=U),J&&(y.head&&(v=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),i.arraySet(y.head.extra,I,M,J,v)),512&y.flags&&(y.check=o(y.check,I,J,M)),U-=J,M+=J,y.length-=J),y.length))break e;y.length=0,y.mode=7;case 7:if(2048&y.flags){if(U===0)break e;for(J=0;v=I[M+J++],y.head&&v&&y.length<65536&&(y.head.name+=String.fromCharCode(v)),v&&J<U;);if(512&y.flags&&(y.check=o(y.check,I,J,M)),U-=J,M+=J,v)break e}else y.head&&(y.head.name=null);y.length=0,y.mode=8;case 8:if(4096&y.flags){if(U===0)break e;for(J=0;v=I[M+J++],y.head&&v&&y.length<65536&&(y.head.comment+=String.fromCharCode(v)),v&&J<U;);if(512&y.flags&&(y.check=o(y.check,I,J,M)),U-=J,M+=J,v)break e}else y.head&&(y.head.comment=null);y.mode=9;case 9:if(512&y.flags){for(;F<16;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}if(L!==(65535&y.check)){k.msg="header crc mismatch",y.mode=30;break}F=L=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),k.adler=y.check=0,y.mode=12;break;case 10:for(;F<32;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}k.adler=y.check=g(L),F=L=0,y.mode=11;case 11:if(y.havedict===0)return k.next_out=q,k.avail_out=ie,k.next_in=M,k.avail_in=U,y.hold=L,y.bits=F,2;k.adler=y.check=1,y.mode=12;case 12:if(P===5||P===6)break e;case 13:if(y.last){L>>>=7&F,F-=7&F,y.mode=27;break}for(;F<3;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}switch(y.last=1&L,F-=1,3&(L>>>=1)){case 0:y.mode=14;break;case 1:if(B(y),y.mode=20,P!==6)break;L>>>=2,F-=2;break e;case 2:y.mode=17;break;case 3:k.msg="invalid block type",y.mode=30}L>>>=2,F-=2;break;case 14:for(L>>>=7&F,F-=7&F;F<32;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}if((65535&L)!=(L>>>16^65535)){k.msg="invalid stored block lengths",y.mode=30;break}if(y.length=65535&L,F=L=0,y.mode=15,P===6)break e;case 15:y.mode=16;case 16:if(J=y.length){if(U<J&&(J=U),ie<J&&(J=ie),J===0)break e;i.arraySet(X,I,M,J,q),U-=J,M+=J,ie-=J,q+=J,y.length-=J;break}y.mode=12;break;case 17:for(;F<14;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}if(y.nlen=257+(31&L),L>>>=5,F-=5,y.ndist=1+(31&L),L>>>=5,F-=5,y.ncode=4+(15&L),L>>>=4,F-=4,286<y.nlen||30<y.ndist){k.msg="too many length or distance symbols",y.mode=30;break}y.have=0,y.mode=18;case 18:for(;y.have<y.ncode;){for(;F<3;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}y.lens[Y[y.have++]]=7&L,L>>>=3,F-=3}for(;y.have<19;)y.lens[Y[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,$={bits:y.lenbits},H=f(0,y.lens,0,19,y.lencode,0,y.work,$),y.lenbits=$.bits,H){k.msg="invalid code lengths set",y.mode=30;break}y.have=0,y.mode=19;case 19:for(;y.have<y.nlen+y.ndist;){for(;pe=(_=y.lencode[L&(1<<y.lenbits)-1])>>>16&255,me=65535&_,!((ce=_>>>24)<=F);){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}if(me<16)L>>>=ce,F-=ce,y.lens[y.have++]=me;else{if(me===16){for(E=ce+2;F<E;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}if(L>>>=ce,F-=ce,y.have===0){k.msg="invalid bit length repeat",y.mode=30;break}v=y.lens[y.have-1],J=3+(3&L),L>>>=2,F-=2}else if(me===17){for(E=ce+3;F<E;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}F-=ce,v=0,J=3+(7&(L>>>=ce)),L>>>=3,F-=3}else{for(E=ce+7;F<E;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}F-=ce,v=0,J=11+(127&(L>>>=ce)),L>>>=7,F-=7}if(y.have+J>y.nlen+y.ndist){k.msg="invalid bit length repeat",y.mode=30;break}for(;J--;)y.lens[y.have++]=v}}if(y.mode===30)break;if(y.lens[256]===0){k.msg="invalid code -- missing end-of-block",y.mode=30;break}if(y.lenbits=9,$={bits:y.lenbits},H=f(p,y.lens,0,y.nlen,y.lencode,0,y.work,$),y.lenbits=$.bits,H){k.msg="invalid literal/lengths set",y.mode=30;break}if(y.distbits=6,y.distcode=y.distdyn,$={bits:y.distbits},H=f(x,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,$),y.distbits=$.bits,H){k.msg="invalid distances set",y.mode=30;break}if(y.mode=20,P===6)break e;case 20:y.mode=21;case 21:if(6<=U&&258<=ie){k.next_out=q,k.avail_out=ie,k.next_in=M,k.avail_in=U,y.hold=L,y.bits=F,c(k,te),q=k.next_out,X=k.output,ie=k.avail_out,M=k.next_in,I=k.input,U=k.avail_in,L=y.hold,F=y.bits,y.mode===12&&(y.back=-1);break}for(y.back=0;pe=(_=y.lencode[L&(1<<y.lenbits)-1])>>>16&255,me=65535&_,!((ce=_>>>24)<=F);){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}if(pe&&!(240&pe)){for(fe=ce,ye=pe,Se=me;pe=(_=y.lencode[Se+((L&(1<<fe+ye)-1)>>fe)])>>>16&255,me=65535&_,!(fe+(ce=_>>>24)<=F);){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}L>>>=fe,F-=fe,y.back+=fe}if(L>>>=ce,F-=ce,y.back+=ce,y.length=me,pe===0){y.mode=26;break}if(32&pe){y.back=-1,y.mode=12;break}if(64&pe){k.msg="invalid literal/length code",y.mode=30;break}y.extra=15&pe,y.mode=22;case 22:if(y.extra){for(E=y.extra;F<E;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}y.length+=L&(1<<y.extra)-1,L>>>=y.extra,F-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=23;case 23:for(;pe=(_=y.distcode[L&(1<<y.distbits)-1])>>>16&255,me=65535&_,!((ce=_>>>24)<=F);){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}if(!(240&pe)){for(fe=ce,ye=pe,Se=me;pe=(_=y.distcode[Se+((L&(1<<fe+ye)-1)>>fe)])>>>16&255,me=65535&_,!(fe+(ce=_>>>24)<=F);){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}L>>>=fe,F-=fe,y.back+=fe}if(L>>>=ce,F-=ce,y.back+=ce,64&pe){k.msg="invalid distance code",y.mode=30;break}y.offset=me,y.extra=15&pe,y.mode=24;case 24:if(y.extra){for(E=y.extra;F<E;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}y.offset+=L&(1<<y.extra)-1,L>>>=y.extra,F-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){k.msg="invalid distance too far back",y.mode=30;break}y.mode=25;case 25:if(ie===0)break e;if(J=te-ie,y.offset>J){if((J=y.offset-J)>y.whave&&y.sane){k.msg="invalid distance too far back",y.mode=30;break}Ce=J>y.wnext?(J-=y.wnext,y.wsize-J):y.wnext-J,J>y.length&&(J=y.length),le=y.window}else le=X,Ce=q-y.offset,J=y.length;for(ie<J&&(J=ie),ie-=J,y.length-=J;X[q++]=le[Ce++],--J;);y.length===0&&(y.mode=21);break;case 26:if(ie===0)break e;X[q++]=y.length,ie--,y.mode=21;break;case 27:if(y.wrap){for(;F<32;){if(U===0)break e;U--,L|=I[M++]<<F,F+=8}if(te-=ie,k.total_out+=te,y.total+=te,te&&(k.adler=y.check=y.flags?o(y.check,X,te,q-te):l(y.check,X,te,q-te)),te=ie,(y.flags?L:g(L))!==y.check){k.msg="incorrect data check",y.mode=30;break}F=L=0}y.mode=28;case 28:if(y.wrap&&y.flags){for(;F<32;){if(U===0)break e;U--,L+=I[M++]<<F,F+=8}if(L!==(4294967295&y.total)){k.msg="incorrect length check",y.mode=30;break}F=L=0}y.mode=29;case 29:H=1;break e;case 30:H=-3;break e;case 31:return-4;case 32:default:return m}return k.next_out=q,k.avail_out=ie,k.next_in=M,k.avail_in=U,y.hold=L,y.bits=F,(y.wsize||te!==k.avail_out&&y.mode<30&&(y.mode<27||P!==4))&&K(k,k.output,k.next_out,te-k.avail_out)?(y.mode=31,-4):(oe-=k.avail_in,te-=k.avail_out,k.total_in+=oe,k.total_out+=te,y.total+=te,y.wrap&&te&&(k.adler=y.check=y.flags?o(y.check,X,te,k.next_out-te):l(y.check,X,te,k.next_out-te)),k.data_type=y.bits+(y.last?64:0)+(y.mode===12?128:0)+(y.mode===20||y.mode===15?256:0),(oe==0&&te===0||P===4)&&H===b&&(H=-5),H)},a.inflateEnd=function(k){if(!k||!k.state)return m;var P=k.state;return P.window&&(P.window=null),k.state=null,b},a.inflateGetHeader=function(k,P){var y;return k&&k.state&&2&(y=k.state).wrap?((y.head=P).done=!1,b):m},a.inflateSetDictionary=function(k,P){var y,I=P.length;return k&&k.state?(y=k.state).wrap!==0&&y.mode!==11?m:y.mode===11&&l(1,P,I,0)!==y.check?-3:K(k,P,I,I)?(y.mode=31,-4):(y.havedict=1,b):m},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,n,a){var i=s("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(p,x,b,m,w,d,h,g){var u,j,C,S,A,T,z,O,B,K=g.bits,k=0,P=0,y=0,I=0,X=0,M=0,q=0,U=0,ie=0,L=0,F=null,oe=0,te=new i.Buf16(16),J=new i.Buf16(16),Ce=null,le=0;for(k=0;k<=15;k++)te[k]=0;for(P=0;P<m;P++)te[x[b+P]]++;for(X=K,I=15;1<=I&&te[I]===0;I--);if(I<X&&(X=I),I===0)return w[d++]=20971520,w[d++]=20971520,g.bits=1,0;for(y=1;y<I&&te[y]===0;y++);for(X<y&&(X=y),k=U=1;k<=15;k++)if(U<<=1,(U-=te[k])<0)return-1;if(0<U&&(p===0||I!==1))return-1;for(J[1]=0,k=1;k<15;k++)J[k+1]=J[k]+te[k];for(P=0;P<m;P++)x[b+P]!==0&&(h[J[x[b+P]]++]=P);if(T=p===0?(F=Ce=h,19):p===1?(F=l,oe-=257,Ce=o,le-=257,256):(F=c,Ce=f,-1),k=y,A=d,q=P=L=0,C=-1,S=(ie=1<<(M=X))-1,p===1&&852<ie||p===2&&592<ie)return 1;for(;;){for(z=k-q,B=h[P]<T?(O=0,h[P]):h[P]>T?(O=Ce[le+h[P]],F[oe+h[P]]):(O=96,0),u=1<<k-q,y=j=1<<M;w[A+(L>>q)+(j-=u)]=z<<24|O<<16|B|0,j!==0;);for(u=1<<k-1;L&u;)u>>=1;if(u!==0?(L&=u-1,L+=u):L=0,P++,--te[k]==0){if(k===I)break;k=x[b+h[P]]}if(X<k&&(L&S)!==C){for(q===0&&(q=X),A+=y,U=1<<(M=k-q);M+q<I&&!((U-=te[M+q])<=0);)M++,U<<=1;if(ie+=1<<M,p===1&&852<ie||p===2&&592<ie)return 1;w[C=L&S]=X<<24|M<<16|A-d|0}}return L!==0&&(w[A+L]=k-q<<24|64<<16|0),g.bits=X,0}},{"../utils/common":41}],51:[function(s,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,n,a){var i=s("../utils/common"),l=0,o=1;function c(_){for(var R=_.length;0<=--R;)_[R]=0}var f=0,p=29,x=256,b=x+1+p,m=30,w=19,d=2*b+1,h=15,g=16,u=7,j=256,C=16,S=17,A=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(b+2));c(K);var k=new Array(2*m);c(k);var P=new Array(512);c(P);var y=new Array(256);c(y);var I=new Array(p);c(I);var X,M,q,U=new Array(m);function ie(_,R,Y,Z,D){this.static_tree=_,this.extra_bits=R,this.extra_base=Y,this.elems=Z,this.max_length=D,this.has_stree=_&&_.length}function L(_,R){this.dyn_tree=_,this.max_code=0,this.stat_desc=R}function F(_){return _<256?P[_]:P[256+(_>>>7)]}function oe(_,R){_.pending_buf[_.pending++]=255&R,_.pending_buf[_.pending++]=R>>>8&255}function te(_,R,Y){_.bi_valid>g-Y?(_.bi_buf|=R<<_.bi_valid&65535,oe(_,_.bi_buf),_.bi_buf=R>>g-_.bi_valid,_.bi_valid+=Y-g):(_.bi_buf|=R<<_.bi_valid&65535,_.bi_valid+=Y)}function J(_,R,Y){te(_,Y[2*R],Y[2*R+1])}function Ce(_,R){for(var Y=0;Y|=1&_,_>>>=1,Y<<=1,0<--R;);return Y>>>1}function le(_,R,Y){var Z,D,Q=new Array(h+1),ne=0;for(Z=1;Z<=h;Z++)Q[Z]=ne=ne+Y[Z-1]<<1;for(D=0;D<=R;D++){var G=_[2*D+1];G!==0&&(_[2*D]=Ce(Q[G]++,G))}}function ce(_){var R;for(R=0;R<b;R++)_.dyn_ltree[2*R]=0;for(R=0;R<m;R++)_.dyn_dtree[2*R]=0;for(R=0;R<w;R++)_.bl_tree[2*R]=0;_.dyn_ltree[2*j]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function pe(_){8<_.bi_valid?oe(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function me(_,R,Y,Z){var D=2*R,Q=2*Y;return _[D]<_[Q]||_[D]===_[Q]&&Z[R]<=Z[Y]}function fe(_,R,Y){for(var Z=_.heap[Y],D=Y<<1;D<=_.heap_len&&(D<_.heap_len&&me(R,_.heap[D+1],_.heap[D],_.depth)&&D++,!me(R,Z,_.heap[D],_.depth));)_.heap[Y]=_.heap[D],Y=D,D<<=1;_.heap[Y]=Z}function ye(_,R,Y){var Z,D,Q,ne,G=0;if(_.last_lit!==0)for(;Z=_.pending_buf[_.d_buf+2*G]<<8|_.pending_buf[_.d_buf+2*G+1],D=_.pending_buf[_.l_buf+G],G++,Z===0?J(_,D,R):(J(_,(Q=y[D])+x+1,R),(ne=T[Q])!==0&&te(_,D-=I[Q],ne),J(_,Q=F(--Z),Y),(ne=z[Q])!==0&&te(_,Z-=U[Q],ne)),G<_.last_lit;);J(_,j,R)}function Se(_,R){var Y,Z,D,Q=R.dyn_tree,ne=R.stat_desc.static_tree,G=R.stat_desc.has_stree,W=R.stat_desc.elems,re=-1;for(_.heap_len=0,_.heap_max=d,Y=0;Y<W;Y++)Q[2*Y]!==0?(_.heap[++_.heap_len]=re=Y,_.depth[Y]=0):Q[2*Y+1]=0;for(;_.heap_len<2;)Q[2*(D=_.heap[++_.heap_len]=re<2?++re:0)]=1,_.depth[D]=0,_.opt_len--,G&&(_.static_len-=ne[2*D+1]);for(R.max_code=re,Y=_.heap_len>>1;1<=Y;Y--)fe(_,Q,Y);for(D=W;Y=_.heap[1],_.heap[1]=_.heap[_.heap_len--],fe(_,Q,1),Z=_.heap[1],_.heap[--_.heap_max]=Y,_.heap[--_.heap_max]=Z,Q[2*D]=Q[2*Y]+Q[2*Z],_.depth[D]=(_.depth[Y]>=_.depth[Z]?_.depth[Y]:_.depth[Z])+1,Q[2*Y+1]=Q[2*Z+1]=D,_.heap[1]=D++,fe(_,Q,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(ae,je){var Te,ee,ue,ve,Ze,js,it=je.dyn_tree,Un=je.max_code,lc=je.stat_desc.static_tree,cc=je.stat_desc.has_stree,dc=je.stat_desc.extra_bits,Vn=je.stat_desc.extra_base,dr=je.stat_desc.max_length,Er=0;for(ve=0;ve<=h;ve++)ae.bl_count[ve]=0;for(it[2*ae.heap[ae.heap_max]+1]=0,Te=ae.heap_max+1;Te<d;Te++)dr<(ve=it[2*it[2*(ee=ae.heap[Te])+1]+1]+1)&&(ve=dr,Er++),it[2*ee+1]=ve,Un<ee||(ae.bl_count[ve]++,Ze=0,Vn<=ee&&(Ze=dc[ee-Vn]),js=it[2*ee],ae.opt_len+=js*(ve+Ze),cc&&(ae.static_len+=js*(lc[2*ee+1]+Ze)));if(Er!==0){do{for(ve=dr-1;ae.bl_count[ve]===0;)ve--;ae.bl_count[ve]--,ae.bl_count[ve+1]+=2,ae.bl_count[dr]--,Er-=2}while(0<Er);for(ve=dr;ve!==0;ve--)for(ee=ae.bl_count[ve];ee!==0;)Un<(ue=ae.heap[--Te])||(it[2*ue+1]!==ve&&(ae.opt_len+=(ve-it[2*ue+1])*it[2*ue],it[2*ue+1]=ve),ee--)}}(_,R),le(Q,re,_.bl_count)}function v(_,R,Y){var Z,D,Q=-1,ne=R[1],G=0,W=7,re=4;for(ne===0&&(W=138,re=3),R[2*(Y+1)+1]=65535,Z=0;Z<=Y;Z++)D=ne,ne=R[2*(Z+1)+1],++G<W&&D===ne||(G<re?_.bl_tree[2*D]+=G:D!==0?(D!==Q&&_.bl_tree[2*D]++,_.bl_tree[2*C]++):G<=10?_.bl_tree[2*S]++:_.bl_tree[2*A]++,Q=D,re=(G=0)===ne?(W=138,3):D===ne?(W=6,3):(W=7,4))}function H(_,R,Y){var Z,D,Q=-1,ne=R[1],G=0,W=7,re=4;for(ne===0&&(W=138,re=3),Z=0;Z<=Y;Z++)if(D=ne,ne=R[2*(Z+1)+1],!(++G<W&&D===ne)){if(G<re)for(;J(_,D,_.bl_tree),--G!=0;);else D!==0?(D!==Q&&(J(_,D,_.bl_tree),G--),J(_,C,_.bl_tree),te(_,G-3,2)):G<=10?(J(_,S,_.bl_tree),te(_,G-3,3)):(J(_,A,_.bl_tree),te(_,G-11,7));Q=D,re=(G=0)===ne?(W=138,3):D===ne?(W=6,3):(W=7,4)}}c(U);var $=!1;function E(_,R,Y,Z){te(_,(f<<1)+(Z?1:0),3),function(D,Q,ne,G){pe(D),oe(D,ne),oe(D,~ne),i.arraySet(D.pending_buf,D.window,Q,ne,D.pending),D.pending+=ne}(_,R,Y)}a._tr_init=function(_){$||(function(){var R,Y,Z,D,Q,ne=new Array(h+1);for(D=Z=0;D<p-1;D++)for(I[D]=Z,R=0;R<1<<T[D];R++)y[Z++]=D;for(y[Z-1]=D,D=Q=0;D<16;D++)for(U[D]=Q,R=0;R<1<<z[D];R++)P[Q++]=D;for(Q>>=7;D<m;D++)for(U[D]=Q<<7,R=0;R<1<<z[D]-7;R++)P[256+Q++]=D;for(Y=0;Y<=h;Y++)ne[Y]=0;for(R=0;R<=143;)K[2*R+1]=8,R++,ne[8]++;for(;R<=255;)K[2*R+1]=9,R++,ne[9]++;for(;R<=279;)K[2*R+1]=7,R++,ne[7]++;for(;R<=287;)K[2*R+1]=8,R++,ne[8]++;for(le(K,b+1,ne),R=0;R<m;R++)k[2*R+1]=5,k[2*R]=Ce(R,5);X=new ie(K,T,x+1,b,h),M=new ie(k,z,0,m,h),q=new ie(new Array(0),O,0,w,u)}(),$=!0),_.l_desc=new L(_.dyn_ltree,X),_.d_desc=new L(_.dyn_dtree,M),_.bl_desc=new L(_.bl_tree,q),_.bi_buf=0,_.bi_valid=0,ce(_)},a._tr_stored_block=E,a._tr_flush_block=function(_,R,Y,Z){var D,Q,ne=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(G){var W,re=4093624447;for(W=0;W<=31;W++,re>>>=1)if(1&re&&G.dyn_ltree[2*W]!==0)return l;if(G.dyn_ltree[18]!==0||G.dyn_ltree[20]!==0||G.dyn_ltree[26]!==0)return o;for(W=32;W<x;W++)if(G.dyn_ltree[2*W]!==0)return o;return l}(_)),Se(_,_.l_desc),Se(_,_.d_desc),ne=function(G){var W;for(v(G,G.dyn_ltree,G.l_desc.max_code),v(G,G.dyn_dtree,G.d_desc.max_code),Se(G,G.bl_desc),W=w-1;3<=W&&G.bl_tree[2*B[W]+1]===0;W--);return G.opt_len+=3*(W+1)+5+5+4,W}(_),D=_.opt_len+3+7>>>3,(Q=_.static_len+3+7>>>3)<=D&&(D=Q)):D=Q=Y+5,Y+4<=D&&R!==-1?E(_,R,Y,Z):_.strategy===4||Q===D?(te(_,2+(Z?1:0),3),ye(_,K,k)):(te(_,4+(Z?1:0),3),function(G,W,re,ae){var je;for(te(G,W-257,5),te(G,re-1,5),te(G,ae-4,4),je=0;je<ae;je++)te(G,G.bl_tree[2*B[je]+1],3);H(G,G.dyn_ltree,W-1),H(G,G.dyn_dtree,re-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,ne+1),ye(_,_.dyn_ltree,_.dyn_dtree)),ce(_),Z&&pe(_)},a._tr_tally=function(_,R,Y){return _.pending_buf[_.d_buf+2*_.last_lit]=R>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&R,_.pending_buf[_.l_buf+_.last_lit]=255&Y,_.last_lit++,R===0?_.dyn_ltree[2*Y]++:(_.matches++,R--,_.dyn_ltree[2*(y[Y]+x+1)]++,_.dyn_dtree[2*F(R)]++),_.last_lit===_.lit_bufsize-1},a._tr_align=function(_){te(_,2,3),J(_,j,K),function(R){R.bi_valid===16?(oe(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):8<=R.bi_valid&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(s,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,n,a){(function(i){(function(l,o){if(!l.setImmediate){var c,f,p,x,b=1,m={},w=!1,d=l.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(l);h=h&&h.setTimeout?h:l,c={}.toString.call(l.process)==="[object process]"?function(C){process.nextTick(function(){u(C)})}:function(){if(l.postMessage&&!l.importScripts){var C=!0,S=l.onmessage;return l.onmessage=function(){C=!1},l.postMessage("","*"),l.onmessage=S,C}}()?(x="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",j,!1):l.attachEvent("onmessage",j),function(C){l.postMessage(x+C,"*")}):l.MessageChannel?((p=new MessageChannel).port1.onmessage=function(C){u(C.data)},function(C){p.port2.postMessage(C)}):d&&"onreadystatechange"in d.createElement("script")?(f=d.documentElement,function(C){var S=d.createElement("script");S.onreadystatechange=function(){u(C),S.onreadystatechange=null,f.removeChild(S),S=null},f.appendChild(S)}):function(C){setTimeout(u,0,C)},h.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var S=new Array(arguments.length-1),A=0;A<S.length;A++)S[A]=arguments[A+1];var T={callback:C,args:S};return m[b]=T,c(b),b++},h.clearImmediate=g}function g(C){delete m[C]}function u(C){if(w)setTimeout(u,0,C);else{var S=m[C];if(S){w=!0;try{(function(A){var T=A.callback,z=A.args;switch(z.length){case 0:T();break;case 1:T(z[0]);break;case 2:T(z[0],z[1]);break;case 3:T(z[0],z[1],z[2]);break;default:T.apply(o,z)}})(S)}finally{g(C),w=!1}}}}function j(C){C.source===l&&typeof C.data=="string"&&C.data.indexOf(x)===0&&u(+C.data.slice(x.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Tr<"u"?Tr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(oc);var Zx=oc.exports;const Xx=Wd(Zx);async function Qx(e,r){const s=new Xx,n=s.folder("deckforge-designs");if(!n)throw new Error("Failed to create ZIP folder");for(let i=0;i<e.length;i++){const l=e[i];r==null||r(i+1,e.length);try{const o=await Ya(l.canvas_data.objects,{scale:3,format:"png",includeBackground:!0}),f=`${l.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${l.id.slice(0,8)}.png`;n.file(f,o)}catch(o){console.error(`Failed to export design ${l.name}:`,o)}}return await s.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}})}function Jx(e,r){const s=URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}const $t="http://localhost:3000",Dr={async list(){const e=localStorage.getItem("token");return(await Le.get(`${$t}/folders`,{headers:{Authorization:`Bearer ${e}`}})).data.folders},async create(e,r){const s=localStorage.getItem("token");return(await Le.post(`${$t}/folders`,{name:e,color:r},{headers:{Authorization:`Bearer ${s}`}})).data.folder},async update(e,r){const s=localStorage.getItem("token");return(await Le.patch(`${$t}/folders/${e}`,r,{headers:{Authorization:`Bearer ${s}`}})).data.folder},async delete(e){const r=localStorage.getItem("token");await Le.delete(`${$t}/folders/${e}`,{headers:{Authorization:`Bearer ${r}`}})},async moveDesign(e,r){const s=localStorage.getItem("token");await Le.post(`${$t}/folders/${e}/designs/${r}`,{},{headers:{Authorization:`Bearer ${s}`}})},async removeDesign(e,r){const s=localStorage.getItem("token");await Le.delete(`${$t}/folders/${e}/designs/${r}`,{headers:{Authorization:`Bearer ${s}`}})}},Oa=["#ccff00","#00ffff","#ff00ff","#ff6600","#00ff00","#ff0000","#0000ff","#ffff00"];function eg({selectedFolder:e,onFolderSelect:r}){const[s,n]=N.useState([]),[a,i]=N.useState(!0),[l,o]=N.useState(!1),[c,f]=N.useState(""),[p,x]=N.useState(null),[b,m]=N.useState("");N.useEffect(()=>{w()},[]);const w=async()=>{i(!0);try{const u=await Dr.list();n(u)}catch(u){console.error("Failed to load folders:",u)}finally{i(!1)}},d=async()=>{var u,j;if(c.trim())try{const C=Oa[Math.floor(Math.random()*Oa.length)],S=await Dr.create(c.trim(),C);n([...s,S]),f(""),o(!1),Re({title:" Folder created",description:`${S.name} is ready`})}catch(C){Re({title:"Failed to create folder",description:((j=(u=C.response)==null?void 0:u.data)==null?void 0:j.error)||"Please try again",variant:"destructive"})}},h=async u=>{if(b.trim())try{const j=await Dr.update(u,{name:b.trim()});n(s.map(C=>C.id===u?j:C)),x(null),Re({title:" Folder renamed"})}catch{Re({title:"Failed to rename",variant:"destructive"})}},g=async(u,j)=>{if(confirm(`Delete folder "${j}"? Designs will be moved to "All Designs".`))try{await Dr.delete(u),n(s.filter(C=>C.id!==u)),e===u&&r(null),Re({title:" Folder deleted"})}catch{Re({title:"Failed to delete",variant:"destructive"})}};return t.jsxs("div",{className:"w-64 bg-card border-r border-border h-full flex flex-col",children:[t.jsxs("div",{className:"p-3 border-b border-border",children:[t.jsx("h3",{className:"font-display text-xs uppercase tracking-wider mb-3",children:"Folders"}),t.jsxs(se,{size:"sm",variant:"outline",onClick:()=>o(!l),className:"w-full gap-2",children:[t.jsx(Gd,{className:"w-4 h-4"}),"New Folder"]})]}),t.jsx(ct,{className:"flex-1",children:t.jsxs("div",{className:"p-3 space-y-1",children:[t.jsxs("button",{onClick:()=>r(null),className:`w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors ${e===null?"bg-primary/10 text-primary border border-primary":"hover:bg-secondary border border-transparent"}`,children:[t.jsx(Kd,{className:"w-4 h-4"}),t.jsx("span",{className:"flex-1 text-left",children:"All Designs"})]}),l&&t.jsxs("div",{className:"py-2 space-y-2",children:[t.jsx(Ie,{placeholder:"Folder name...",value:c,onChange:u=>f(u.target.value),onKeyDown:u=>{u.key==="Enter"&&d(),u.key==="Escape"&&o(!1)},autoFocus:!0,className:"h-8 text-sm"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(se,{size:"sm",onClick:d,disabled:!c.trim(),className:"flex-1",children:"Create"}),t.jsx(se,{size:"sm",variant:"ghost",onClick:()=>o(!1),children:"Cancel"})]})]}),a&&t.jsx("div",{className:"flex justify-center py-4",children:t.jsx(dt,{className:"w-5 h-5 animate-spin text-muted-foreground"})}),s.map(u=>t.jsx("div",{className:`group flex items-center gap-2 px-3 py-2 text-sm transition-colors ${e===u.id?"bg-primary/10 text-primary border border-primary":"hover:bg-secondary border border-transparent"}`,children:p===u.id?t.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[t.jsx(Ie,{value:b,onChange:j=>m(j.target.value),onKeyDown:j=>{j.key==="Enter"&&h(u.id),j.key==="Escape"&&x(null)},className:"h-7 text-sm",autoFocus:!0}),t.jsx(se,{size:"sm",variant:"ghost",onClick:()=>h(u.id),className:"h-7 px-2",children:"Save"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>r(u.id),className:"flex-1 flex items-center gap-2",children:[t.jsx(Yd,{className:"w-4 h-4",style:{color:u.color}}),t.jsx("span",{className:"truncate",children:u.name})]}),t.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex gap-1",children:[t.jsx("button",{onClick:()=>{x(u.id),m(u.name)},className:"p-1 hover:bg-secondary",children:t.jsx(cn,{className:"w-3 h-3"})}),t.jsx("button",{onClick:()=>g(u.id,u.name),className:"p-1 hover:bg-destructive/10 text-destructive",children:t.jsx(Nt,{className:"w-3 h-3"})})]})]})},u.id))]})})]})}function tg(){const[e,r]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState(new Set),[l,o]=N.useState(!1),[c,f]=N.useState({current:0,total:0}),[p,x]=N.useState(null),{isAuthenticated:b,logout:m}=rr(),{loadDesign:w,resetCanvas:d}=Ae(),h=nr(),g=p?e.filter(k=>k.folder_id===p):e;N.useEffect(()=>{if(!b){h("/auth");return}u()},[b]);const u=async()=>{n(!0);try{const k=await Mr.list();r(k.designs||[])}catch(k){console.error("Failed to load designs:",k)}finally{n(!1)}},j=k=>{w(k.canvas_data),h("/")},C=async(k,P)=>{if(P.stopPropagation(),!!confirm("Delete this design? This cannot be undone."))try{await Mr.delete(k),i(y=>{const I=new Set(y);return I.delete(k),I}),await u()}catch(y){console.error("Delete failed:",y),alert("Failed to delete design")}},S=(k,P)=>{P.stopPropagation(),i(y=>{const I=new Set(y);return I.has(k)?I.delete(k):I.add(k),I})},A=()=>{a.size===g.length?i(new Set):i(new Set(g.map(k=>k.id)))},T=async(k,P,y)=>{y.stopPropagation();const I="http://localhost:3000",X=localStorage.getItem("token");try{await Le.patch(`${I}/gallery/${k}/visibility`,{is_public:!P},{headers:{Authorization:`Bearer ${X}`}}),r(M=>M.map(q=>q.id===k?{...q,is_public:!P}:q)),Re({title:P?" Design unpublished":" Design published",description:P?"Your design has been removed from the gallery":"Your design is now visible in the public gallery"})}catch(M){console.error("Toggle public failed:",M),Re({title:"Failed to update visibility",description:"Please try again",variant:"destructive"})}},z=async()=>{const k=e.filter(P=>a.has(P.id));if(k.length===0){Re({title:"No designs selected",description:"Please select at least one design to export.",variant:"destructive"});return}o(!0),f({current:0,total:k.length});try{const P=await Qx(k,(X,M)=>{f({current:X,total:M})}),I=`deckforge_designs_${Date.now()}.zip`;Jx(P,I),Re({title:" Batch export complete",description:`${k.length} design${k.length!==1?"s":""} exported successfully.`}),i(new Set)}catch(P){console.error("Batch export failed:",P),Re({title:"Export failed",description:"Failed to export designs. Please try again.",variant:"destructive"})}finally{o(!1),f({current:0,total:0})}},O=()=>{d(),h("/")},B=async()=>{await m(),h("/auth")};if(!b)return null;const K=a.size>0;return t.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[t.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card shrink-0",children:[t.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest",children:["My ",t.jsx("span",{className:"text-primary",children:"Designs"})]}),t.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[K&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.size," selected"]}),t.jsx(se,{size:"sm",variant:"outline",onClick:z,disabled:l,className:"gap-2",children:l?t.jsxs(t.Fragment,{children:[t.jsx(dt,{className:"w-4 h-4 animate-spin"}),"Exporting ",c.current,"/",c.total]}):t.jsxs(t.Fragment,{children:[t.jsx(Xr,{className:"w-4 h-4"}),"Export Selected"]})})]}),t.jsxs(se,{size:"sm",variant:"outline",onClick:O,className:"gap-2",children:[t.jsx(Os,{className:"w-4 h-4"}),"New Design"]}),t.jsx(se,{size:"sm",variant:"ghost",onClick:B,children:"Logout"})]})]}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsx(eg,{selectedFolder:p,onFolderSelect:x}),t.jsx("div",{className:"flex-1 overflow-auto",children:t.jsx("div",{className:"container mx-auto px-6 py-8",children:s?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(dt,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):g.length===0?t.jsxs("div",{className:"text-center py-20 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-display uppercase tracking-widest mb-2",children:"No Designs Yet"}),t.jsx("p",{className:"text-muted-foreground",children:"Create your first custom deck design!"})]}),t.jsxs(se,{onClick:O,size:"lg",className:"gap-2",children:[t.jsx(Os,{className:"w-5 h-5"}),"Create Design"]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[t.jsx(se,{size:"sm",variant:"outline",onClick:A,className:"gap-2",children:a.size===g.length?t.jsxs(t.Fragment,{children:[t.jsx(Xn,{className:"w-4 h-4"}),"Deselect All"]}):t.jsxs(t.Fragment,{children:[t.jsx(Br,{className:"w-4 h-4"}),"Select All"]})}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:[g.length," design",g.length!==1?"s":"",p&&" in folder"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(k=>{const P=a.has(k.id);return t.jsxs("div",{className:`group border transition-colors bg-card overflow-hidden cursor-pointer relative ${P?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary"}`,onClick:()=>j(k),children:[t.jsx("div",{className:"absolute top-2 left-2 z-10",onClick:y=>S(k.id,y),children:t.jsx("div",{className:`w-6 h-6 border-2 flex items-center justify-center transition-colors cursor-pointer ${P?"bg-primary border-primary":"bg-background border-border hover:border-primary"}`,children:P&&t.jsx(Xn,{className:"w-5 h-5 text-primary-foreground"})})}),t.jsx("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden",children:k.thumbnail_url?t.jsx("img",{src:k.thumbnail_url,alt:k.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:k.name})}),k.is_public&&t.jsx("div",{className:"absolute top-2 right-2 z-10",children:t.jsxs("div",{className:"bg-primary text-primary-foreground px-2 py-1 rounded text-[10px] uppercase tracking-wider flex items-center gap-1",children:[t.jsx(Qn,{className:"w-3 h-3"}),"Public"]})}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-display text-sm uppercase tracking-widest truncate",children:k.name}),k.description&&t.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:k.description}),t.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 uppercase tracking-widest",children:new Date(k.updated_at).toLocaleDateString()})]}),t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsxs(se,{size:"sm",variant:"outline",className:"flex-1 gap-1",onClick:y=>{y.stopPropagation(),j(k)},children:[t.jsx(mr,{className:"w-3 h-3"}),"Open"]}),t.jsx(se,{size:"sm",variant:k.is_public?"default":"outline",onClick:y=>T(k.id,k.is_public,y),title:k.is_public?"Make Private":"Publish to Gallery",children:k.is_public?t.jsx(Qn,{className:"w-3 h-3"}):t.jsx(pr,{className:"w-3 h-3"})}),t.jsx(se,{size:"sm",variant:"destructive",onClick:y=>C(k.id,y),children:t.jsx(Nt,{className:"w-3 h-3"})})]})})]})]},k.id)})})]})})})]})]})}const rn=[{id:"skull-flames",name:"Skull & Flames",description:"Classic skate punk aesthetic with skull and flame stickers",tags:["punk","edgy","classic"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#000000"},{type:"shape",shapeType:"rect",x:0,y:120,width:96,height:54,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ff0000"},{type:"sticker",x:28,y:80,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Skull",fill:"#ffffff",strokeWidth:0,solidFill:!0},{type:"sticker",x:10,y:200,width:30,height:30,rotation:-15,opacity:1,scaleX:1,scaleY:1,iconName:"Flame",fill:"#ff4500",strokeWidth:0,solidFill:!0},{type:"sticker",x:56,y:200,width:30,height:30,rotation:15,opacity:1,scaleX:1,scaleY:1,iconName:"Flame",fill:"#ff4500",strokeWidth:0,solidFill:!0}]},{id:"gradient-fade",name:"Gradient Fade",description:"Modern gradient design with smooth color transitions",tags:["modern","gradient","clean"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fillType:"linear-gradient",gradientStops:[{offset:0,color:"#667eea"},{offset:.5,color:"#764ba2"},{offset:1,color:"#f093fb"}],gradientAngle:180},{type:"shape",shapeType:"circle",x:23,y:122,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff",glow:{enabled:!0,radius:20,color:"#ffffff",intensity:.8}}]},{id:"retro-vinyl",name:"Retro Vinyl",description:"Vintage music-inspired design with record and music icons",tags:["retro","music","vintage"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#f4e8d8"},{type:"shape",shapeType:"rect",x:0,y:140,width:96,height:14,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#8b4513"},{type:"sticker",x:23,y:60,width:50,height:50,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Disc",fill:"#2c2c2c",strokeWidth:0,solidFill:!0},{type:"sticker",x:12,y:200,width:25,height:25,rotation:-10,opacity:1,scaleX:1,scaleY:1,iconName:"Music",fill:"#8b4513",strokeWidth:0,solidFill:!0},{type:"sticker",x:59,y:195,width:25,height:25,rotation:10,opacity:1,scaleX:1,scaleY:1,iconName:"Music",fill:"#8b4513",strokeWidth:0,solidFill:!0}]},{id:"neon-lightning",name:"Neon Lightning",description:"Electric neon design with lightning bolts",tags:["neon","electric","bold"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#1a1a2e"},{type:"sticker",x:18,y:90,width:60,height:60,rotation:15,opacity:1,scaleX:1,scaleY:1,iconName:"Zap",fill:"#00ff88",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:15,color:"#00ff88",intensity:1}},{type:"sticker",x:8,y:180,width:40,height:40,rotation:-25,opacity:.7,scaleX:1,scaleY:1,iconName:"Zap",fill:"#ff00ff",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:12,color:"#ff00ff",intensity:.9}},{type:"sticker",x:48,y:170,width:40,height:40,rotation:30,opacity:.7,scaleX:1,scaleY:1,iconName:"Zap",fill:"#00ddff",strokeWidth:0,solidFill:!0,glow:{enabled:!0,radius:12,color:"#00ddff",intensity:.9}}]},{id:"minimalist-shapes",name:"Minimalist Shapes",description:"Clean geometric design with simple shapes",tags:["minimal","geometric","clean"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff"},{type:"shape",shapeType:"circle",x:8,y:70,width:80,height:80,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#000000"},{type:"sticker",x:28,y:180,width:40,height:40,rotation:0,opacity:1,scaleX:1,scaleY:1,iconName:"Triangle",fill:"#ff0000",strokeWidth:0,solidFill:!0}]},{id:"blank",name:"Blank Canvas",description:"Start from scratch with a clean white deck",tags:["blank","custom"],objects:[{type:"shape",shapeType:"rect",x:0,y:0,width:96,height:294,rotation:0,opacity:1,scaleX:1,scaleY:1,fill:"#ffffff"}]}];function rg(e){if(!e)return rn;const r=e.toLowerCase();return rn.filter(s=>s.name.toLowerCase().includes(r)||s.description.toLowerCase().includes(r)||s.tags.some(n=>n.toLowerCase().includes(r)))}function sg(){const[e,r]=N.useState(""),{loadDesign:s}=Ae(),n=nr(),a=rg(e),i=l=>{const o=rn.find(c=>c.id===l);o&&(s({objects:o.objects,name:o.name}),n("/"))};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card",children:[t.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest flex items-center gap-2",children:[t.jsx(bt,{className:"w-5 h-5 text-primary"}),t.jsx("span",{children:"Templates"})]}),t.jsx("div",{className:"ml-auto flex items-center gap-4",children:t.jsx(se,{size:"sm",variant:"outline",onClick:()=>n("/"),children:"Back to Editor"})})]}),t.jsxs("div",{className:"container mx-auto px-6 py-8",children:[t.jsx("div",{className:"max-w-md mb-8",children:t.jsxs("div",{className:"relative",children:[t.jsx(ni,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),t.jsx(Ie,{type:"text",placeholder:"Search templates...",value:e,onChange:l=>r(l.target.value),className:"pl-10"})]})}),a.length===0?t.jsx("div",{className:"text-center py-20",children:t.jsx("p",{className:"text-muted-foreground",children:"No templates found"})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(l=>t.jsxs("div",{className:"group border border-border hover:border-primary transition-colors bg-card overflow-hidden cursor-pointer",onClick:()=>i(l.id),children:[t.jsxs("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden relative",children:[l.thumbnail?t.jsx("img",{src:l.thumbnail,alt:l.name,className:"w-full h-full object-cover"}):t.jsxs("div",{className:"text-center p-4",children:[t.jsx(bt,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),t.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:l.name})]}),t.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:t.jsx(se,{size:"sm",variant:"default",children:"Use Template"})})]}),t.jsxs("div",{className:"p-4 space-y-2",children:[t.jsx("h3",{className:"font-display text-sm uppercase tracking-widest",children:l.name}),t.jsx("p",{className:"text-xs text-muted-foreground",children:l.description}),t.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:l.tags.map(o=>t.jsx("span",{className:"px-2 py-0.5 text-[10px] uppercase tracking-wider bg-primary/10 text-primary rounded",children:o},o))})]})]},l.id))})]})]})}const Ps="http://localhost:3000";function ng({designId:e}){const[r,s]=N.useState([]),[n,a]=N.useState(""),[i,l]=N.useState(!0),[o,c]=N.useState(!1),{isAuthenticated:f}=rr();N.useEffect(()=>{p()},[e]);const p=async()=>{l(!0);try{const m=await Le.get(`${Ps}/comments/${e}`);s(m.data.comments||[])}catch(m){console.error("Failed to load comments:",m)}finally{l(!1)}},x=async m=>{var w,d;if(m.preventDefault(),!f){Re({title:"Login required",description:"Please login to comment",variant:"destructive"});return}if(n.trim()){c(!0);try{const h=localStorage.getItem("token"),g=await Le.post(`${Ps}/comments/${e}`,{content:n},{headers:{Authorization:`Bearer ${h}`}});s([...r,g.data.comment]),a(""),Re({title:" Comment posted",description:"Your comment has been added"})}catch(h){console.error("Failed to post comment:",h),Re({title:"Failed to post comment",description:((d=(w=h.response)==null?void 0:w.data)==null?void 0:d.error)||"Please try again",variant:"destructive"})}finally{c(!1)}}},b=async m=>{if(confirm("Delete this comment?"))try{const w=localStorage.getItem("token");await Le.delete(`${Ps}/comments/${m}`,{headers:{Authorization:`Bearer ${w}`}}),s(r.filter(d=>d.id!==m)),Re({title:" Comment deleted",description:"Your comment has been removed"})}catch(w){console.error("Failed to delete comment:",w),Re({title:"Failed to delete",description:"Please try again",variant:"destructive"})}};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qd,{className:"w-5 h-5"}),t.jsxs("h3",{className:"font-display text-sm uppercase tracking-wider",children:["Comments (",r.length,")"]})]}),f?t.jsxs("form",{onSubmit:x,className:"space-y-2",children:[t.jsx(_c,{value:n,onChange:m=>a(m.target.value),placeholder:"Add a comment...",className:"min-h-[80px] resize-none",disabled:o}),t.jsx("div",{className:"flex justify-end",children:t.jsx(se,{type:"submit",size:"sm",disabled:!n.trim()||o,className:"gap-2",children:o?t.jsxs(t.Fragment,{children:[t.jsx(dt,{className:"w-3 h-3 animate-spin"}),"Posting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Zd,{className:"w-3 h-3"}),"Post Comment"]})})})]}):t.jsx("div",{className:"border border-border p-4 text-center text-sm text-muted-foreground",children:"Please login to comment"}),t.jsx("div",{className:"space-y-3",children:i?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(dt,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):r.length===0?t.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No comments yet. Be the first to comment!"}):r.map(m=>t.jsxs("div",{className:"border border-border p-3 space-y-2 bg-secondary/50",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:m.content})}),f&&m.user_id===localStorage.getItem("userId")&&t.jsx(se,{size:"sm",variant:"ghost",onClick:()=>b(m.id),className:"shrink-0",children:t.jsx(Nt,{className:"w-3 h-3"})})]}),t.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:t.jsx("span",{children:new Date(m.created_at).toLocaleString()})})]},m.id))})]})}const Fr="http://localhost:3000";function ag(){const[e,r]=N.useState([]),[s,n]=N.useState(!0),[a,i]=N.useState("recent"),[l,o]=N.useState(new Set),[c,f]=N.useState(null),{isAuthenticated:p}=rr(),{loadDesign:x}=Ae(),b=nr();N.useEffect(()=>{m()},[a]);const m=async()=>{n(!0);try{const h=await Le.get(`${Fr}/gallery?sort=${a}&limit=50`);if(r(h.data.designs||[]),p){const g=new Set;for(const u of h.data.designs||[])try{const j=localStorage.getItem("token");(await Le.get(`${Fr}/gallery/${u.id}/liked`,{headers:{Authorization:`Bearer ${j}`}})).data.liked&&g.add(u.id)}catch{}o(g)}}catch(h){console.error("Failed to load gallery:",h)}finally{n(!1)}},w=async(h,g)=>{var C,S;if(g.stopPropagation(),!p){Re({title:"Login required",description:"Please login to like designs",variant:"destructive"}),b("/auth");return}const u=localStorage.getItem("token"),j=l.has(h);try{j?(await Le.delete(`${Fr}/gallery/${h}/like`,{headers:{Authorization:`Bearer ${u}`}}),o(A=>{const T=new Set(A);return T.delete(h),T}),r(A=>A.map(T=>T.id===h?{...T,like_count:T.like_count-1}:T))):(await Le.post(`${Fr}/gallery/${h}/like`,{},{headers:{Authorization:`Bearer ${u}`}}),o(A=>new Set(A).add(h)),r(A=>A.map(T=>T.id===h?{...T,like_count:T.like_count+1}:T)))}catch(A){console.error("Like failed:",A),Re({title:"Action failed",description:((S=(C=A.response)==null?void 0:C.data)==null?void 0:S.error)||"Please try again",variant:"destructive"})}},d=(h,g)=>{g.stopPropagation(),x(h.canvas_data),b("/"),Re({title:" Design loaded",description:"Remix and make it your own!"})};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsxs("header",{className:"h-16 border-b border-border flex items-center px-6 bg-card",children:[t.jsxs("h1",{className:"font-display text-xl uppercase tracking-widest",children:["Design ",t.jsx("span",{className:"text-primary",children:"Gallery"})]}),t.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(se,{size:"sm",variant:a==="recent"?"default":"outline",onClick:()=>i("recent"),className:"gap-2",children:[t.jsx(un,{className:"w-4 h-4"}),"Recent"]}),t.jsxs(se,{size:"sm",variant:a==="popular"?"default":"outline",onClick:()=>i("popular"),className:"gap-2",children:[t.jsx(Xd,{className:"w-4 h-4"}),"Popular"]}),t.jsxs(se,{size:"sm",variant:a==="liked"?"default":"outline",onClick:()=>i("liked"),className:"gap-2",children:[t.jsx(Qd,{className:"w-4 h-4"}),"Most Liked"]})]}),t.jsx(se,{size:"sm",variant:"outline",onClick:()=>b("/"),children:"Create Design"}),!p&&t.jsx(se,{size:"sm",variant:"ghost",onClick:()=>b("/auth"),children:"Login"})]})]}),t.jsx("div",{className:"container mx-auto px-6 py-8",children:s?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(dt,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):e.length===0?t.jsxs("div",{className:"text-center py-20 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-display uppercase tracking-widest mb-2",children:"No Public Designs Yet"}),t.jsx("p",{className:"text-muted-foreground",children:"Be the first to share a design with the community!"})]}),t.jsx(se,{onClick:()=>b("/"),size:"lg",children:"Create & Share"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-6",children:t.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.length," design",e.length!==1?"s":"","  Community creations"]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(h=>{const g=l.has(h.id);return t.jsxs("div",{className:"group border border-border hover:border-primary transition-colors bg-card overflow-hidden cursor-pointer",onClick:()=>f(h),children:[t.jsxs("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden relative",children:[h.thumbnail_url?t.jsx("img",{src:h.thumbnail_url,alt:h.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:h.name}),t.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[t.jsxs("div",{className:"bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white flex items-center gap-1",children:[t.jsx(mr,{className:"w-3 h-3"}),h.view_count]}),t.jsxs("div",{className:"bg-black/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-white flex items-center gap-1",children:[t.jsx(fr,{className:"w-3 h-3"}),h.like_count]})]})]}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-display text-sm uppercase tracking-widest truncate",children:h.name}),h.description&&t.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:h.description}),t.jsx("p",{className:"text-[10px] text-muted-foreground mt-1 uppercase tracking-widest",children:new Date(h.created_at).toLocaleDateString()})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(se,{size:"sm",variant:"outline",className:"flex-1 gap-1",onClick:u=>d(h,u),children:[t.jsx(Jn,{className:"w-3 h-3"}),"Remix"]}),t.jsx(se,{size:"sm",variant:g?"default":"outline",onClick:u=>w(h.id,u),className:g?"text-red-500":"",children:t.jsx(fr,{className:`w-3 h-3 ${g?"fill-current":""}`})})]})]})]},h.id)})})]})}),c&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>f(null)}),t.jsxs("div",{className:"relative bg-card border-2 border-border shadow-xl w-full max-w-4xl max-h-[90vh] overflow-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between z-10",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"font-display text-lg uppercase tracking-wider",children:c.name}),c.description&&t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:c.description})]}),t.jsx("button",{onClick:()=>f(null),className:"text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(sr,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"aspect-[32/98] bg-muted flex items-center justify-center overflow-hidden border border-border",children:c.thumbnail_url?t.jsx("img",{src:c.thumbnail_url,alt:c.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"text-muted-foreground text-sm uppercase tracking-widest",children:c.name})}),t.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-border",children:[t.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(mr,{className:"w-4 h-4"}),c.view_count," views"]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(fr,{className:"w-4 h-4"}),c.like_count," likes"]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(se,{size:"sm",variant:"outline",onClick:h=>{h.stopPropagation(),d(c,h),f(null)},className:"gap-2",children:[t.jsx(Jn,{className:"w-4 h-4"}),"Remix"]}),t.jsx(se,{size:"sm",variant:l.has(c.id)?"default":"outline",onClick:h=>w(c.id,h),children:t.jsx(fr,{className:`w-4 h-4 ${l.has(c.id)?"fill-current":""}`})})]})]}),t.jsx(ng,{designId:c.id})]})]})]})]})}function ig(){const{token:e}=tu(),r=nr(),{loadDesign:s}=Ae(),[n,a]=N.useState(null),[i,l]=N.useState(!0),[o,c]=N.useState(null);N.useEffect(()=>{e&&f()},[e]);const f=async()=>{var p,x;if(e){l(!0),c(null);try{const b=await Ec.getSharedDesign(e);a(b),s(b.canvas_data)}catch(b){console.error("Failed to load shared design:",b),c(((x=(p=b.response)==null?void 0:p.data)==null?void 0:x.error)||"Failed to load shared design")}finally{l(!1)}}};return i?t.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background",children:t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx(dt,{className:"w-12 h-12 mx-auto animate-spin text-primary"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading shared design..."})]})}):o||!n?t.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-background",children:t.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[t.jsx(Jd,{className:"w-12 h-12 mx-auto text-destructive"}),t.jsx("h2",{className:"font-display text-xl uppercase tracking-wider",children:"Design Not Found"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:o||"This shared design link may have been revoked or does not exist."}),t.jsxs(se,{onClick:()=>r("/"),className:"gap-2",children:[t.jsx(eu,{className:"w-4 h-4"}),"Go to DeckForge"]})]})}):t.jsxs("div",{className:"h-screen w-screen flex flex-col bg-background overflow-hidden",children:[t.jsxs("header",{className:"h-12 border-b border-border flex items-center px-4 bg-card shrink-0",children:[t.jsxs("h1",{className:"font-display text-lg uppercase tracking-widest text-foreground",children:["Deck",t.jsx("span",{className:"text-primary",children:"Forge"})]}),t.jsx("div",{className:"ml-4 flex items-center gap-2",children:t.jsx("span",{className:"tag-brutal",children:"Shared"})}),t.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[t.jsxs("div",{className:"text-right hidden sm:block",children:[t.jsx("h2",{className:"text-sm font-medium",children:n.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["View only  Created ",new Date(n.created_at).toLocaleDateString()]})]}),t.jsx(se,{size:"sm",variant:"outline",onClick:()=>r("/"),className:"gap-2",children:"Create Your Own"})]})]}),t.jsx("div",{className:"flex-1 flex overflow-hidden",children:t.jsx(Rs,{})}),t.jsx("footer",{className:"h-10 border-t border-border flex items-center justify-center px-4 bg-card shrink-0",children:t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Made with ",t.jsx("span",{className:"text-primary",children:"DeckForge"}),"  Fingerboard Graphics Editor"]})})]})}const og=()=>{const e=ru();return N.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),t.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),t.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},lg=new Jh,cg=()=>t.jsx(rp,{children:t.jsx(tp,{client:lg,children:t.jsxs(Sh,{children:[t.jsx(Ou,{}),t.jsx(Lu,{}),t.jsx(su,{children:t.jsxs(nu,{children:[t.jsx(Et,{path:"/",element:t.jsx(Yx,{})}),t.jsx(Et,{path:"/auth",element:t.jsx(qx,{})}),t.jsx(Et,{path:"/designs",element:t.jsx(tg,{})}),t.jsx(Et,{path:"/templates",element:t.jsx(sg,{})}),t.jsx(Et,{path:"/gallery",element:t.jsx(ag,{})}),t.jsx(Et,{path:"/share/:token",element:t.jsx(ig,{})}),t.jsx(Et,{path:"*",element:t.jsx(og,{})})]})})]})})});ui(document.getElementById("root")).render(t.jsx(cg,{}));export{_e as S};
