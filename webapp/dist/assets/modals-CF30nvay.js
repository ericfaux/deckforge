import{r as f,a as Do,v as Io,R as br,b as ot,U as _o,c as Lo,Z as _n,d as Ln,W as Fo,M as Uo,X as ve,e as Wo,C as ir,S as Bo,f as zo,L as Ho,g as Xo,E as Fn,h as Yo,i as Vo,j as Go,k as qo,l as Ko,u as Y,G as Jo,m as Zo,T as Ze,n as Qo,o as ei,B as ti,F as ri,D as ni,p as si,H as oi,q as Un,s as ii,t as ar,w as ai,x as li,y as ci,z as di,A as ui,I as fi,J as hi,K as lr,N as pi,O as mi,P as gi,Q as xi,V as yi,Y as wi,_ as bi,$ as vi,a0 as Si,a1 as Ei,a2 as ki,a3 as Je,a4 as Ni,a5 as Ci,a6 as Fr,a7 as cr,a8 as dr,a9 as Ri,aa as ji,ab as Pi,ac as Ai,ad as Ur,ae as Ti,af as Wr,ag as $i,ah as ur,ai as Br,aj as Oi,ak as Mi,al as zr,am as Hr}from"./vendor-ui-DrJlhI9e.js";import{c as Di,_ as je,a as Wn,b as Ii}from"./vendor-supabase-CoxeBSpk.js";var Bn={exports:{}},Tt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _i=f,Li=Symbol.for("react.element"),Fi=Symbol.for("react.fragment"),Ui=Object.prototype.hasOwnProperty,Wi=_i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bi={key:!0,ref:!0,__self:!0,__source:!0};function zn(e,t,r){var n,s={},o=null,l=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Ui.call(t,n)&&!Bi.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Li,type:e,key:o,ref:l,props:s,_owner:Wi.current}}Tt.Fragment=Fi;Tt.jsx=zn;Tt.jsxs=zn;Bn.exports=Tt;var i=Bn.exports;const zi=1,Hi=1e6;let zt=0;function Xi(){return zt=(zt+1)%Number.MAX_SAFE_INTEGER,zt.toString()}const Ht=new Map,Xr=e=>{if(Ht.has(e))return;const t=setTimeout(()=>{Ht.delete(e),Ke({type:"REMOVE_TOAST",toastId:e})},Hi);Ht.set(e,t)},Yi=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,zi)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Xr(r):e.toasts.forEach(n=>{Xr(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},gt=[];let xt={toasts:[]};function Ke(e){xt=Yi(xt,e),gt.forEach(t=>{t(xt)})}function de({...e}){const t=Xi(),r=s=>Ke({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>Ke({type:"DISMISS_TOAST",toastId:t});return Ke({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function lf(){const[e,t]=f.useState(xt);return f.useEffect(()=>(gt.push(t),()=>{const r=gt.indexOf(t);r>-1&&gt.splice(r,1)}),[e]),{...e,toast:de,dismiss:r=>Ke({type:"DISMISS_TOAST",toastId:r})}}function re(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Yr(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function $t(...e){return t=>{let r=!1;const n=e.map(s=>{const o=Yr(s,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():Yr(e[s],null)}}}}function ce(...e){return f.useCallback($t(...e),e)}function Vi(e,t){const r=f.createContext(t),n=o=>{const{children:l,...a}=o,c=f.useMemo(()=>a,Object.values(a));return i.jsx(r.Provider,{value:c,children:l})};n.displayName=e+"Provider";function s(o){const l=f.useContext(r);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,s]}function Hn(e,t=[]){let r=[];function n(o,l){const a=f.createContext(l),c=r.length;r=[...r,l];const d=h=>{var v;const{scope:g,children:p,...y}=h,m=((v=g==null?void 0:g[e])==null?void 0:v[c])||a,x=f.useMemo(()=>y,Object.values(y));return i.jsx(m.Provider,{value:x,children:p})};d.displayName=o+"Provider";function u(h,g){var m;const p=((m=g==null?void 0:g[e])==null?void 0:m[c])||a,y=f.useContext(p);if(y)return y;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,u]}const s=()=>{const o=r.map(l=>f.createContext(l));return function(a){const c=(a==null?void 0:a[e])||o;return f.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return s.scopeName=e,[n,Gi(s,...t)]}function Gi(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=n.reduce((a,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...a,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}function qi(e){const t=Ki(e),r=f.forwardRef((n,s)=>{const{children:o,...l}=n,a=f.Children.toArray(o),c=a.find(Zi);if(c){const d=c.props.children,u=a.map(h=>h===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:h);return i.jsx(t,{...l,ref:s,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return i.jsx(t,{...l,ref:s,children:o})});return r.displayName=`${e}.Slot`,r}function Ki(e){const t=f.forwardRef((r,n)=>{const{children:s,...o}=r;if(f.isValidElement(s)){const l=ea(s),a=Qi(o,s.props);return s.type!==f.Fragment&&(a.ref=n?$t(n,l):l),f.cloneElement(s,a)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ji=Symbol("radix.slottable");function Zi(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ji}function Qi(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function ea(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ta=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oe=ta.reduce((e,t)=>{const r=qi(`Primitive.${t}`),n=f.forwardRef((s,o)=>{const{asChild:l,...a}=s,c=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...a,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function ra(e,t){e&&Do.flushSync(()=>e.dispatchEvent(t))}function ue(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function na(e,t=globalThis==null?void 0:globalThis.document){const r=ue(e);f.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var sa="DismissableLayer",fr="dismissableLayer.update",oa="dismissableLayer.pointerDownOutside",ia="dismissableLayer.focusOutside",Vr,Xn=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vr=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:a,...c}=e,d=f.useContext(Xn),[u,h]=f.useState(null),g=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),y=ce(t,E=>h(E)),m=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(x),C=u?m.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,b=C>=v,R=la(E=>{const P=E.target,j=[...d.branches].some(M=>M.contains(P));!b||j||(s==null||s(E),l==null||l(E),E.defaultPrevented||a==null||a())},g),O=ca(E=>{const P=E.target;[...d.branches].some(M=>M.contains(P))||(o==null||o(E),l==null||l(E),E.defaultPrevented||a==null||a())},g);return na(E=>{C===d.layers.size-1&&(n==null||n(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},g),f.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Vr=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Gr(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Vr)}},[u,g,r,d]),f.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Gr())},[u,d]),f.useEffect(()=>{const E=()=>p({});return document.addEventListener(fr,E),()=>document.removeEventListener(fr,E)},[]),i.jsx(oe.div,{...c,ref:y,style:{pointerEvents:w?b?"auto":"none":void 0,...e.style},onFocusCapture:re(e.onFocusCapture,O.onFocusCapture),onBlurCapture:re(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:re(e.onPointerDownCapture,R.onPointerDownCapture)})});vr.displayName=sa;var aa="DismissableLayerBranch",Yn=f.forwardRef((e,t)=>{const r=f.useContext(Xn),n=f.useRef(null),s=ce(t,n);return f.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),i.jsx(oe.div,{...e,ref:s})});Yn.displayName=aa;function la(e,t=globalThis==null?void 0:globalThis.document){const r=ue(e),n=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const o=a=>{if(a.target&&!n.current){let c=function(){Vn(oa,r,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function ca(e,t=globalThis==null?void 0:globalThis.document){const r=ue(e),n=f.useRef(!1);return f.useEffect(()=>{const s=o=>{o.target&&!n.current&&Vn(ia,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Gr(){const e=new CustomEvent(fr);document.dispatchEvent(e)}function Vn(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?ra(s,o):s.dispatchEvent(o)}var cf=vr,df=Yn,Fe=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},da="Portal",Gn=f.forwardRef((e,t)=>{var a;const{container:r,...n}=e,[s,o]=f.useState(!1);Fe(()=>o(!0),[]);const l=r||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return l?Io.createPortal(i.jsx(oe.div,{...n,ref:t}),l):null});Gn.displayName=da;function ua(e,t){return f.useReducer((r,n)=>t[r][n]??r,e)}var Pe=e=>{const{present:t,children:r}=e,n=fa(t),s=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),o=ce(n.ref,ha(s));return typeof r=="function"||n.isPresent?f.cloneElement(s,{ref:o}):null};Pe.displayName="Presence";function fa(e){const[t,r]=f.useState(),n=f.useRef(null),s=f.useRef(e),o=f.useRef("none"),l=e?"mounted":"unmounted",[a,c]=ua(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=it(n.current);o.current=a==="mounted"?d:"none"},[a]),Fe(()=>{const d=n.current,u=s.current;if(u!==e){const g=o.current,p=it(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&g!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Fe(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=p=>{const m=it(n.current).includes(CSS.escape(p.animationName));if(p.target===t&&m&&(c("ANIMATION_END"),!s.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},g=p=>{p.target===t&&(o.current=it(n.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:f.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function it(e){return(e==null?void 0:e.animationName)||"none"}function ha(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var pa=br[" useInsertionEffect ".trim().toString()]||Fe;function ma({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,o,l]=ga({defaultProp:t,onChange:r}),a=e!==void 0,c=a?e:s;{const u=f.useRef(e!==void 0);f.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}const d=f.useCallback(u=>{var h;if(a){const g=xa(u)?u(e):u;g!==e&&((h=l.current)==null||h.call(l,g))}else o(u)},[a,e,o,l]);return[c,d]}function ga({defaultProp:e,onChange:t}){const[r,n]=f.useState(e),s=f.useRef(r),o=f.useRef(t);return pa(()=>{o.current=t},[t]),f.useEffect(()=>{var l;s.current!==r&&((l=o.current)==null||l.call(o,r),s.current=r)},[r,s]),[r,n,o]}function xa(e){return typeof e=="function"}function qn(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=qn(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Kn(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=qn(e))&&(n&&(n+=" "),n+=t);return n}const qr=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Kr=Kn,Jn=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Kr(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=t,l=Object.keys(s).map(d=>{const u=r==null?void 0:r[d],h=o==null?void 0:o[d];if(u===null)return null;const g=qr(u)||qr(h);return s[d][g]}),a=r&&Object.entries(r).reduce((d,u)=>{let[h,g]=u;return g===void 0||(d[h]=g),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:g,...p}=u;return Object.entries(p).every(y=>{let[m,x]=y;return Array.isArray(x)?x.includes({...o,...a}[m]):{...o,...a}[m]===x})?[...d,h,g]:d},[]);return Kr(e,l,c,r==null?void 0:r.class,r==null?void 0:r.className)},Sr="-",ya=e=>{const t=ba(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:l=>{const a=l.split(Sr);return a[0]===""&&a.length!==1&&a.shift(),Zn(a,t)||wa(l)},getConflictingClassGroupIds:(l,a)=>{const c=r[l]||[];return a&&n[l]?[...c,...n[l]]:c}}},Zn=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?Zn(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(Sr);return(l=t.validators.find(({validator:a})=>a(o)))==null?void 0:l.classGroupId},Jr=/^\[(.+)\]$/,wa=e=>{if(Jr.test(e)){const t=Jr.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},ba=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Sa(Object.entries(e.classGroups),r).forEach(([o,l])=>{hr(l,n,o,t)}),n},hr=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:Zr(t,s);o.classGroupId=r;return}if(typeof s=="function"){if(va(s)){hr(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,l])=>{hr(l,Zr(t,o),r,n)})})},Zr=(e,t)=>{let r=e;return t.split(Sr).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},va=e=>e.isThemeGetter,Sa=(e,t)=>t?e.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,a])=>[t+l,a])):o);return[r,s]}):e,Ea=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(o,l)=>{r.set(o,l),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return s(o,l),l},set(o,l){r.has(o)?r.set(o,l):s(o,l)}}},Qn="!",ka=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],o=t.length,l=a=>{const c=[];let d=0,u=0,h;for(let x=0;x<a.length;x++){let v=a[x];if(d===0){if(v===s&&(n||a.slice(x,x+o)===t)){c.push(a.slice(u,x)),u=x+o;continue}if(v==="/"){h=x;continue}}v==="["?d++:v==="]"&&d--}const g=c.length===0?a:a.substring(u),p=g.startsWith(Qn),y=p?g.substring(1):g,m=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:m}};return r?a=>r({className:a,parseClassName:l}):l},Na=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},Ca=e=>({cache:Ea(e.cacheSize),parseClassName:ka(e),...ya(e)}),Ra=/\s+/,ja=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,o=[],l=e.trim().split(Ra);let a="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:u,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:p}=r(d);let y=!!p,m=n(y?g.substring(0,p):g);if(!m){if(!y){a=d+(a.length>0?" "+a:a);continue}if(m=n(g),!m){a=d+(a.length>0?" "+a:a);continue}y=!1}const x=Na(u).join(":"),v=h?x+Qn:x,C=v+m;if(o.includes(C))continue;o.push(C);const w=s(m,y);for(let b=0;b<w.length;++b){const R=w[b];o.push(v+R)}a=d+(a.length>0?" "+a:a)}return a};function Pa(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=es(t))&&(n&&(n+=" "),n+=r);return n}const es=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=es(e[n]))&&(r&&(r+=" "),r+=t);return r};function Aa(e,...t){let r,n,s,o=l;function l(c){const d=t.reduce((u,h)=>h(u),e());return r=Ca(d),n=r.cache.get,s=r.cache.set,o=a,a(c)}function a(c){const d=n(c);if(d)return d;const u=ja(c,r);return s(c,u),u}return function(){return o(Pa.apply(null,arguments))}}const K=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},ts=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ta=/^\d+\/\d+$/,$a=new Set(["px","full","screen"]),Oa=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ma=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Da=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ia=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_a=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ke=e=>_e(e)||$a.has(e)||Ta.test(e),Ne=e=>Be(e,"length",Xa),_e=e=>!!e&&!Number.isNaN(Number(e)),Xt=e=>Be(e,"number",_e),Ye=e=>!!e&&Number.isInteger(Number(e)),La=e=>e.endsWith("%")&&_e(e.slice(0,-1)),z=e=>ts.test(e),Ce=e=>Oa.test(e),Fa=new Set(["length","size","percentage"]),Ua=e=>Be(e,Fa,rs),Wa=e=>Be(e,"position",rs),Ba=new Set(["image","url"]),za=e=>Be(e,Ba,Va),Ha=e=>Be(e,"",Ya),Ve=()=>!0,Be=(e,t,r)=>{const n=ts.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Xa=e=>Ma.test(e)&&!Da.test(e),rs=()=>!1,Ya=e=>Ia.test(e),Va=e=>_a.test(e),Ga=()=>{const e=K("colors"),t=K("spacing"),r=K("blur"),n=K("brightness"),s=K("borderColor"),o=K("borderRadius"),l=K("borderSpacing"),a=K("borderWidth"),c=K("contrast"),d=K("grayscale"),u=K("hueRotate"),h=K("invert"),g=K("gap"),p=K("gradientColorStops"),y=K("gradientColorStopPositions"),m=K("inset"),x=K("margin"),v=K("opacity"),C=K("padding"),w=K("saturate"),b=K("scale"),R=K("sepia"),O=K("skew"),E=K("space"),P=K("translate"),j=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",z,t],A=()=>[z,t],k=()=>["",ke,Ne],T=()=>["auto",_e,z],_=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],N=()=>["","0",z],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[_e,z];return{cacheSize:500,separator:":",theme:{colors:[Ve],spacing:[ke,Ne],blur:["none","",Ce,z],brightness:W(),borderColor:[e],borderRadius:["none","","full",Ce,z],borderSpacing:A(),borderWidth:k(),contrast:W(),grayscale:N(),hueRotate:W(),invert:N(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[La,Ne],inset:F(),margin:F(),opacity:W(),padding:A(),saturate:W(),scale:W(),sepia:N(),skew:W(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",z]}],container:["container"],columns:[{columns:[Ce]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[..._(),z]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ye,z]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",z]}],grow:[{grow:N()}],shrink:[{shrink:N()}],order:[{order:["first","last","none",Ye,z]}],"grid-cols":[{"grid-cols":[Ve]}],"col-start-end":[{col:["auto",{span:["full",Ye,z]},z]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[Ve]}],"row-start-end":[{row:["auto",{span:[Ye,z]},z]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",z]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",z]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",z,t]}],"min-w":[{"min-w":[z,t,"min","max","fit"]}],"max-w":[{"max-w":[z,t,"none","full","min","max","fit","prose",{screen:[Ce]},Ce]}],h:[{h:[z,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[z,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[z,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[z,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ce,Ne]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xt]}],"font-family":[{font:[Ve]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",z]}],"line-clamp":[{"line-clamp":["none",_e,Xt]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ke,z]}],"list-image":[{"list-image":["none",z]}],"list-style-type":[{list:["none","disc","decimal",z]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ke,Ne]}],"underline-offset":[{"underline-offset":["auto",ke,z]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",z]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",z]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[..._(),Wa]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ua]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},za]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[ke,z]}],"outline-w":[{outline:[ke,Ne]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ke,Ne]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ce,Ha]}],"shadow-color":[{shadow:[Ve]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ce,z]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",z]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",z]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",z]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Ye,z]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",z]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",z]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",z]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ke,Ne,Xt]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qa=Aa(Ga);function ie(...e){return qa(Kn(e))}var Ka=br[" useId ".trim().toString()]||(()=>{}),Ja=0;function Yt(e){const[t,r]=f.useState(Ka());return Fe(()=>{r(n=>n??String(Ja++))},[e]),t?`radix-${t}`:""}var Za=Symbol.for("react.lazy"),kt=br[" use ".trim().toString()];function Qa(e){return typeof e=="object"&&e!==null&&"then"in e}function ns(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Za&&"_payload"in e&&Qa(e._payload)}function ss(e){const t=tl(e),r=f.forwardRef((n,s)=>{let{children:o,...l}=n;ns(o)&&typeof kt=="function"&&(o=kt(o._payload));const a=f.Children.toArray(o),c=a.find(nl);if(c){const d=c.props.children,u=a.map(h=>h===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:h);return i.jsx(t,{...l,ref:s,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return i.jsx(t,{...l,ref:s,children:o})});return r.displayName=`${e}.Slot`,r}var el=ss("Slot");function tl(e){const t=f.forwardRef((r,n)=>{let{children:s,...o}=r;if(ns(s)&&typeof kt=="function"&&(s=kt(s._payload)),f.isValidElement(s)){const l=ol(s),a=sl(o,s.props);return s.type!==f.Fragment&&(a.ref=n?$t(n,l):l),f.cloneElement(s,a)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var rl=Symbol("radix.slottable");function nl(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===rl}function sl(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function ol(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const il=Jn("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-md",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-md",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-accent-foreground/20",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),le=f.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},o)=>{const l=n?el:"button";return i.jsx(l,{className:ie(il({variant:t,size:r,className:e})),ref:o,...s})});le.displayName="Button";const al="modulepreload",ll=function(e){return"/"+e},Qr={},cl=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),a=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=ll(c),c in Qr)return;Qr[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":al,d||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((g,p)=>{h.addEventListener("load",g),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return s.then(l=>{for(const a of l||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},en=e=>{let t;const r=new Set,n=(d,u)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const g=t;t=u??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(p=>p(t,g))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d))},c=t=e(n,s,a);return a},dl=e=>e?en(e):en,ul=e=>e;function fl(e,t=ul){const r=ot.useSyncExternalStore(e.subscribe,ot.useCallback(()=>t(e.getState()),[e,t]),ot.useCallback(()=>t(e.getInitialState()),[e,t]));return ot.useDebugValue(r),r}const tn=e=>{const t=dl(e),r=n=>fl(t,n);return Object.assign(r,t),r},os=e=>e?tn(e):tn,at=()=>`obj_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Vt=[{id:"scratched-wood",name:"Scratched Wood",enabled:!1,opacity:.4,blendMode:"multiply"},{id:"grip-tape-dust",name:"Grip Tape Dust",enabled:!1,opacity:.3,blendMode:"overlay"},{id:"halftone-dots",name:"Halftone Dots",enabled:!1,opacity:.25,blendMode:"soft-light"}],be=os((e,t)=>({objects:[],selectedId:null,selectedIds:[],activeTool:null,drawerOpen:!1,stageScale:1,stagePosition:{x:0,y:0},past:[],future:[],versions:[],currentVersionId:null,textureOverlays:Vt,showHardwareGuide:!1,showRulers:!1,backgroundColor:"#ffffff",currentDesignId:null,designName:"Untitled Design",isSaving:!1,saveToHistory:()=>{const{objects:r,past:n}=t();e({past:[...n,{objects:JSON.parse(JSON.stringify(r))}],future:[]})},addObject:r=>{const n=t();n.saveToHistory();const s={...r,id:at()};e({objects:[...n.objects,s],selectedId:s.id})},addObjects:r=>{const n=t();n.saveToHistory();const s=r.map(o=>({...o,id:at()}));e({objects:[...n.objects,...s],selectedId:null})},updateObject:(r,n)=>{e(s=>({objects:s.objects.map(o=>o.id===r?{...o,...n}:o)}))},deleteObject:r=>{const n=t();n.saveToHistory(),e({objects:n.objects.filter(s=>s.id!==r),selectedId:n.selectedId===r?null:n.selectedId})},selectObject:r=>e({selectedId:r,selectedIds:r?[r]:[]}),toggleSelectObject:r=>{const{selectedIds:n}=t(),o=n.includes(r)?n.filter(l=>l!==r):[...n,r];e({selectedIds:o,selectedId:o.length===1?o[0]:null})},setSelectedIds:r=>e({selectedIds:r,selectedId:r.length===1?r[0]:null}),clearSelection:()=>e({selectedId:null,selectedIds:[]}),alignObjects:r=>{const{selectedIds:n,objects:s}=t();if(n.length<2)return;const o=t();o.saveToHistory();const l=s.filter(a=>n.includes(a.id));if(r==="left"){const a=Math.min(...l.map(c=>c.x));l.forEach(c=>{o.updateObject(c.id,{x:a})})}else if(r==="center"){const a=l.reduce((c,d)=>c+d.x+d.width*d.scaleX/2,0)/l.length;l.forEach(c=>{o.updateObject(c.id,{x:a-c.width*c.scaleX/2})})}else if(r==="right"){const a=Math.max(...l.map(c=>c.x+c.width*c.scaleX));l.forEach(c=>{o.updateObject(c.id,{x:a-c.width*c.scaleX})})}else if(r==="top"){const a=Math.min(...l.map(c=>c.y));l.forEach(c=>{o.updateObject(c.id,{y:a})})}else if(r==="middle"){const a=l.reduce((c,d)=>c+d.y+d.height*d.scaleY/2,0)/l.length;l.forEach(c=>{o.updateObject(c.id,{y:a-c.height*c.scaleY/2})})}else if(r==="bottom"){const a=Math.max(...l.map(c=>c.y+c.height*c.scaleY));l.forEach(c=>{o.updateObject(c.id,{y:a-c.height*c.scaleY})})}},distributeObjects:r=>{const{selectedIds:n,objects:s}=t();if(n.length<3)return;const o=t();o.saveToHistory();const l=s.filter(a=>n.includes(a.id)).sort((a,c)=>r==="horizontal"?a.x-c.x:a.y-c.y);if(r==="horizontal"){const a=l[0],c=l[l.length-1],d=c.x+c.width*c.scaleX-a.x,u=l.reduce((y,m)=>y+m.width*m.scaleX,0),g=(d-u)/(l.length-1);let p=a.x+a.width*a.scaleX+g;for(let y=1;y<l.length-1;y++)o.updateObject(l[y].id,{x:p}),p+=l[y].width*l[y].scaleX+g}else{const a=l[0],c=l[l.length-1],d=c.y+c.height*c.scaleY-a.y,u=l.reduce((y,m)=>y+m.height*m.scaleY,0),g=(d-u)/(l.length-1);let p=a.y+a.height*a.scaleY+g;for(let y=1;y<l.length-1;y++)o.updateObject(l[y].id,{y:p}),p+=l[y].height*l[y].scaleY+g}},groupObjects:r=>{const{objects:n}=t();if(r.length<2)return;t().saveToHistory();const o=n.filter(x=>r.includes(x.id));if(o.length<2)return;const l=Math.min(...o.map(x=>x.x)),a=Math.min(...o.map(x=>x.y)),c=Math.max(...o.map(x=>x.x+x.width*x.scaleX)),d=Math.max(...o.map(x=>x.y+x.height*x.scaleY)),u=c-l,h=d-a,g=o.map(x=>({...x,x:x.x-l,y:x.y-a})),p=`group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,y={id:p,type:"group",x:l,y:a,width:u,height:h,rotation:0,opacity:1,scaleX:1,scaleY:1,children:g},m=n.filter(x=>!r.includes(x.id));e({objects:[...m,y],selectedIds:[p],selectedId:p})},ungroupObject:r=>{const{objects:n}=t(),s=n.find(d=>d.id===r);if(!s||s.type!=="group"||!s.children)return;t().saveToHistory();const l=s.children.map(d=>({...d,id:`obj_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,x:s.x+d.x*s.scaleX,y:s.y+d.y*s.scaleY,scaleX:d.scaleX*s.scaleX,scaleY:d.scaleY*s.scaleY,rotation:d.rotation+s.rotation})),a=n.filter(d=>d.id!==r),c=l.map(d=>d.id);e({objects:[...a,...l],selectedIds:c,selectedId:null})},setActiveTool:r=>e({activeTool:r,drawerOpen:r!==null}),toggleDrawer:r=>e(n=>({drawerOpen:r!==void 0?r:!n.drawerOpen})),setStageScale:r=>e({stageScale:Math.max(.25,Math.min(3,r))}),setStagePosition:r=>e({stagePosition:r}),moveLayer:(r,n)=>{const s=t();s.saveToHistory();const o=s.objects.findIndex(c=>c.id===r);if(o===-1)return;const l=[...s.objects],a=n==="up"?o+1:o-1;a<0||a>=l.length||([l[o],l[a]]=[l[a],l[o]],e({objects:l}))},bringToFront:r=>{const n=t();n.saveToHistory();const s=n.objects.findIndex(a=>a.id===r);if(s===-1||s===n.objects.length-1)return;const o=[...n.objects],[l]=o.splice(s,1);o.push(l),e({objects:o})},sendToBack:r=>{const n=t();n.saveToHistory();const s=n.objects.findIndex(a=>a.id===r);if(s===-1||s===0)return;const o=[...n.objects],[l]=o.splice(s,1);o.unshift(l),e({objects:o})},undo:()=>{const{past:r,objects:n,future:s}=t();if(r.length===0)return;const o=r[r.length-1],l=r.slice(0,-1);e({past:l,objects:o.objects,future:[{objects:JSON.parse(JSON.stringify(n))},...s],selectedId:null})},redo:()=>{const{past:r,objects:n,future:s}=t();if(s.length===0)return;const o=s[0],l=s.slice(1);e({past:[...r,{objects:JSON.parse(JSON.stringify(n))}],objects:o.objects,future:l,selectedId:null})},toggleTexture:r=>{e(n=>({textureOverlays:n.textureOverlays.map(s=>s.id===r?{...s,enabled:!s.enabled}:s)}))},updateTexture:(r,n)=>{e(s=>({textureOverlays:s.textureOverlays.map(o=>o.id===r?{...o,...n}:o)}))},generatePattern:(r,n,s,o,l)=>{const a=t(),c=a.objects.find(x=>x.id===r);if(!c)return;a.saveToHistory();const d=c.width*c.scaleX+n,u=c.height*c.scaleY+n,h=Math.ceil(o/d)+1,g=Math.ceil(l/u)+1,p=[];for(let x=-1;x<g;x++)for(let v=-1;v<h;v++){const C=v*d,w=x*u,b=s>0?(Math.random()-.5)*2*s:0;p.push({type:c.type,x:C,y:w,width:c.width,height:c.height,rotation:c.rotation+b,opacity:c.opacity,scaleX:c.scaleX,scaleY:c.scaleY,fill:c.fill,shapeType:c.shapeType,text:c.text,fontSize:c.fontSize,fontFamily:c.fontFamily,src:c.src,contrast:c.contrast,brightness:c.brightness,grayscale:c.grayscale,threshold:c.threshold,colorize:c.colorize,iconName:c.iconName,strokeWidth:c.strokeWidth,solidFill:c.solidFill,stroke:c.stroke,hueRotate:c.hueRotate,invert:c.invert,pixelate:c.pixelate})}const y=a.objects.filter(x=>x.id!==r),m=p.map(x=>({...x,id:at()}));e({objects:[...y,...m],selectedId:null})},arrayDuplicate:(r,n,s,o,l)=>{const a=t(),c=a.objects.find(m=>m.id===r);if(!c)return;a.saveToHistory();const d=c.width*c.scaleX,u=c.height*c.scaleY,h=d+o,g=u+l,p=[];for(let m=0;m<n;m++)for(let x=0;x<s;x++){if(m===0&&x===0)continue;const{id:v,...C}=c;p.push({...C,x:c.x+x*h,y:c.y+m*g})}const y=p.map(m=>({...m,id:at()}));e({objects:[...a.objects,...y],selectedId:null})},toggleHardwareGuide:()=>{e(r=>({showHardwareGuide:!r.showHardwareGuide}))},toggleRulers:()=>{e(r=>({showRulers:!r.showRulers}))},setBackgroundColor:r=>{e({backgroundColor:r})},loadDesign:r=>{e({objects:r.objects||[],textureOverlays:r.textureOverlays||Vt,selectedId:null,past:[],future:[],designName:r.name||"Untitled Design",currentDesignId:r.id||null})},setDesignName:r=>e({designName:r}),setDesignId:r=>e({currentDesignId:r}),setSaving:r=>e({isSaving:r}),resetCanvas:()=>{e({objects:[],selectedId:null,past:[],future:[],textureOverlays:Vt,stageScale:1,stagePosition:{x:0,y:0},currentDesignId:null,designName:"Untitled Design"})},getCanvasState:()=>{const r=t();return{objects:r.objects,textureOverlays:r.textureOverlays,name:r.designName,id:r.currentDesignId}},createVersion:(r,n=!1)=>{const s=t(),o=Date.now(),l=r||(n?`Auto-save ${new Date(o).toLocaleTimeString()}`:`Version ${s.versions.length+1}`),a={id:`ver_${o}_${Math.random().toString(36).substr(2,9)}`,name:l,timestamp:o,objects:JSON.parse(JSON.stringify(s.objects)),textureOverlays:JSON.parse(JSON.stringify(s.textureOverlays)),autoSaved:n};e({versions:[...s.versions,a],currentVersionId:a.id});const{versions:c}=t();c.length>50&&e({versions:c.slice(-50)})},restoreVersion:r=>{const n=t(),s=n.versions.find(o=>o.id===r);s&&(n.createVersion("Before restore",!0),e({objects:JSON.parse(JSON.stringify(s.objects)),textureOverlays:JSON.parse(JSON.stringify(s.textureOverlays)),selectedId:null,past:[],future:[],currentVersionId:r}))},deleteVersion:r=>{const n=t();e({versions:n.versions.filter(s=>s.id!==r),currentVersionId:n.currentVersionId===r?null:n.currentVersionId})},renameVersion:(r,n)=>{const s=t();e({versions:s.versions.map(o=>o.id===r?{...o,name:n}:o)})}}));var hl=f.createContext(void 0);function pl(e){const t=f.useContext(hl);return e||t||"ltr"}function ml(e,[t,r]){return Math.min(r,Math.max(t,e))}function gl(e,t){return f.useReducer((r,n)=>t[r][n]??r,e)}var Er="ScrollArea",[is]=Hn(Er),[xl,he]=is(Er),as=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:o=600,...l}=e,[a,c]=f.useState(null),[d,u]=f.useState(null),[h,g]=f.useState(null),[p,y]=f.useState(null),[m,x]=f.useState(null),[v,C]=f.useState(0),[w,b]=f.useState(0),[R,O]=f.useState(!1),[E,P]=f.useState(!1),j=ce(t,F=>c(F)),M=pl(s);return i.jsx(xl,{scope:r,type:n,dir:M,scrollHideDelay:o,scrollArea:a,viewport:d,onViewportChange:u,content:h,onContentChange:g,scrollbarX:p,onScrollbarXChange:y,scrollbarXEnabled:R,onScrollbarXEnabledChange:O,scrollbarY:m,onScrollbarYChange:x,scrollbarYEnabled:E,onScrollbarYEnabledChange:P,onCornerWidthChange:C,onCornerHeightChange:b,children:i.jsx(oe.div,{dir:M,...l,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});as.displayName=Er;var ls="ScrollAreaViewport",cs=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:s,...o}=e,l=he(ls,r),a=f.useRef(null),c=ce(t,a,l.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(oe.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});cs.displayName=ls;var Se="ScrollAreaScrollbar",kr=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=he(Se,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=s,a=e.orientation==="horizontal";return f.useEffect(()=>(a?o(!0):l(!0),()=>{a?o(!1):l(!1)}),[a,o,l]),s.type==="hover"?i.jsx(yl,{...n,ref:t,forceMount:r}):s.type==="scroll"?i.jsx(wl,{...n,ref:t,forceMount:r}):s.type==="auto"?i.jsx(ds,{...n,ref:t,forceMount:r}):s.type==="always"?i.jsx(Nr,{...n,ref:t}):null});kr.displayName=Se;var yl=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=he(Se,e.__scopeScrollArea),[o,l]=f.useState(!1);return f.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const d=()=>{window.clearTimeout(c),l(!0)},u=()=>{c=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",d),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",d),a.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Pe,{present:r||o,children:i.jsx(ds,{"data-state":o?"visible":"hidden",...n,ref:t})})}),wl=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=he(Se,e.__scopeScrollArea),o=e.orientation==="horizontal",l=Mt(()=>c("SCROLL_END"),100),[a,c]=gl("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(a==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[a,s.scrollHideDelay,c]),f.useEffect(()=>{const d=s.viewport,u=o?"scrollLeft":"scrollTop";if(d){let h=d[u];const g=()=>{const p=d[u];h!==p&&(c("SCROLL"),l()),h=p};return d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[s.viewport,o,c,l]),i.jsx(Pe,{present:r||a!=="hidden",children:i.jsx(Nr,{"data-state":a==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:re(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:re(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),ds=f.forwardRef((e,t)=>{const r=he(Se,e.__scopeScrollArea),{forceMount:n,...s}=e,[o,l]=f.useState(!1),a=e.orientation==="horizontal",c=Mt(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;l(a?d:u)}},10);return Ue(r.viewport,c),Ue(r.content,c),i.jsx(Pe,{present:n||o,children:i.jsx(Nr,{"data-state":o?"visible":"hidden",...s,ref:t})})}),Nr=f.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=he(Se,e.__scopeScrollArea),o=f.useRef(null),l=f.useRef(0),[a,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=ms(a.viewport,a.content),u={...n,sizes:a,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:g=>o.current=g,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:g=>l.current=g};function h(g,p){return Nl(g,l.current,a,p)}return r==="horizontal"?i.jsx(bl,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const g=s.viewport.scrollLeft,p=rn(g,a,s.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollLeft=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollLeft=h(g,s.dir))}}):r==="vertical"?i.jsx(vl,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const g=s.viewport.scrollTop,p=rn(g,a);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollTop=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollTop=h(g))}}):null}),bl=f.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,o=he(Se,e.__scopeScrollArea),[l,a]=f.useState(),c=f.useRef(null),d=ce(t,c,o.onScrollbarXChange);return f.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),i.jsx(fs,{"data-orientation":"horizontal",...s,ref:d,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ot(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(o.viewport){const g=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(g),xs(g,h)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ct(l.paddingLeft),paddingEnd:Ct(l.paddingRight)}})}})}),vl=f.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,o=he(Se,e.__scopeScrollArea),[l,a]=f.useState(),c=f.useRef(null),d=ce(t,c,o.onScrollbarYChange);return f.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),i.jsx(fs,{"data-orientation":"vertical",...s,ref:d,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ot(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(o.viewport){const g=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(g),xs(g,h)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ct(l.paddingTop),paddingEnd:Ct(l.paddingBottom)}})}})}),[Sl,us]=is(Se),fs=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...g}=e,p=he(Se,r),[y,m]=f.useState(null),x=ce(t,j=>m(j)),v=f.useRef(null),C=f.useRef(""),w=p.viewport,b=n.content-n.viewport,R=ue(u),O=ue(c),E=Mt(h,10);function P(j){if(v.current){const M=j.clientX-v.current.left,F=j.clientY-v.current.top;d({x:M,y:F})}}return f.useEffect(()=>{const j=M=>{const F=M.target;(y==null?void 0:y.contains(F))&&R(M,b)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[w,y,b,R]),f.useEffect(O,[n,O]),Ue(y,E),Ue(p.content,E),i.jsx(Sl,{scope:r,scrollbar:y,hasThumb:s,onThumbChange:ue(o),onThumbPointerUp:ue(l),onThumbPositionChange:O,onThumbPointerDown:ue(a),children:i.jsx(oe.div,{...g,ref:x,style:{position:"absolute",...g.style},onPointerDown:re(e.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),v.current=y.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),P(j))}),onPointerMove:re(e.onPointerMove,P),onPointerUp:re(e.onPointerUp,j=>{const M=j.target;M.hasPointerCapture(j.pointerId)&&M.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=C.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),Nt="ScrollAreaThumb",hs=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=us(Nt,e.__scopeScrollArea);return i.jsx(Pe,{present:r||s.hasThumb,children:i.jsx(El,{ref:t,...n})})}),El=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,o=he(Nt,r),l=us(Nt,r),{onThumbPositionChange:a}=l,c=ce(t,h=>l.onThumbChange(h)),d=f.useRef(void 0),u=Mt(()=>{d.current&&(d.current(),d.current=void 0)},100);return f.useEffect(()=>{const h=o.viewport;if(h){const g=()=>{if(u(),!d.current){const p=Cl(h,a);d.current=p,a()}};return a(),h.addEventListener("scroll",g),()=>h.removeEventListener("scroll",g)}},[o.viewport,u,a]),i.jsx(oe.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:re(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),y=h.clientX-p.left,m=h.clientY-p.top;l.onThumbPointerDown({x:y,y:m})}),onPointerUp:re(e.onPointerUp,l.onThumbPointerUp)})});hs.displayName=Nt;var Cr="ScrollAreaCorner",ps=f.forwardRef((e,t)=>{const r=he(Cr,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?i.jsx(kl,{...e,ref:t}):null});ps.displayName=Cr;var kl=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=he(Cr,r),[o,l]=f.useState(0),[a,c]=f.useState(0),d=!!(o&&a);return Ue(s.scrollbarX,()=>{var h;const u=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(u),c(u)}),Ue(s.scrollbarY,()=>{var h;const u=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(u),l(u)}),d?i.jsx(oe.div,{...n,ref:t,style:{width:o,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ct(e){return e?parseInt(e,10):0}function ms(e,t){const r=e/t;return isNaN(r)?0:r}function Ot(e){const t=ms(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function Nl(e,t,r,n="ltr"){const s=Ot(r),o=s/2,l=t||o,a=s-l,c=r.scrollbar.paddingStart+l,d=r.scrollbar.size-r.scrollbar.paddingEnd-a,u=r.content-r.viewport,h=n==="ltr"?[0,u]:[u*-1,0];return gs([c,d],h)(e)}function rn(e,t,r="ltr"){const n=Ot(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,l=t.content-t.viewport,a=o-n,c=r==="ltr"?[0,l]:[l*-1,0],d=ml(e,c);return gs([0,l],[0,a])(d)}function gs(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function xs(e,t){return e>0&&e<t}var Cl=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},l=r.left!==o.left,a=r.top!==o.top;(l||a)&&t(),r=o,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Mt(e,t){const r=ue(e),n=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),f.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Ue(e,t){const r=ue(t);Fe(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}var ys=as,Rl=cs,jl=ps;const ws=f.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(ys,{ref:n,className:ie("relative overflow-hidden",e),...r,children:[i.jsx(Rl,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(bs,{}),i.jsx(jl,{})]}));ws.displayName=ys.displayName;const bs=f.forwardRef(({className:e,orientation:t="vertical",...r},n)=>i.jsx(kr,{ref:n,orientation:t,className:ie("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:i.jsx(hs,{className:"relative flex-1 rounded-full bg-border"})}));bs.displayName=kr.displayName;function Pl(){const{stageScale:e,setStageScale:t,undo:r,redo:n,past:s,future:o,showHardwareGuide:l,toggleHardwareGuide:a}=be(),c=(y=10)=>{"vibrate"in navigator&&navigator.vibrate(y)},d=()=>{c(10),t(e*1.2)},u=()=>{c(10),t(e/1.2)},h=()=>{c(10),r()},g=()=>{c(10),n()},p=()=>{c(10),a()};return i.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-1 bg-card border border-border p-1 md:p-1 shadow-lg",children:[i.jsx("button",{onClick:h,disabled:s.length===0,className:"w-10 h-10 md:w-8 md:h-8 flex items-center justify-center hover:bg-secondary active:bg-secondary/80 active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed transition-all touch-manipulation",title:"Undo (Ctrl+Z)",children:i.jsx(_o,{className:"w-5 h-5 md:w-4 md:h-4"})}),i.jsx("button",{onClick:g,disabled:o.length===0,className:"w-10 h-10 md:w-8 md:h-8 flex items-center justify-center hover:bg-secondary active:bg-secondary/80 active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed transition-all touch-manipulation",title:"Redo (Ctrl+Shift+Z)",children:i.jsx(Lo,{className:"w-5 h-5 md:w-4 md:h-4"})}),i.jsx("div",{className:"w-px h-8 md:h-6 bg-border mx-1"}),i.jsx("button",{onClick:u,className:"w-10 h-10 md:w-8 md:h-8 flex items-center justify-center hover:bg-secondary active:bg-secondary/80 active:scale-95 transition-all touch-manipulation",title:"Zoom Out",children:i.jsx(_n,{className:"w-5 h-5 md:w-4 md:h-4"})}),i.jsxs("span",{className:"text-xs md:text-[10px] font-mono w-14 md:w-12 text-center text-muted-foreground",children:[Math.round(e*100),"%"]}),i.jsx("button",{onClick:d,className:"w-10 h-10 md:w-8 md:h-8 flex items-center justify-center hover:bg-secondary active:bg-secondary/80 active:scale-95 transition-all touch-manipulation",title:"Zoom In",children:i.jsx(Ln,{className:"w-5 h-5 md:w-4 md:h-4"})}),i.jsx("div",{className:"w-px h-8 md:h-6 bg-border mx-1"}),i.jsx("button",{onClick:p,className:ie("w-10 h-10 md:w-8 md:h-8 flex items-center justify-center transition-all active:scale-95 touch-manipulation",l?"bg-accent text-accent-foreground":"hover:bg-secondary active:bg-secondary/80"),title:"Show Hardware Guide (trucks & screws)",children:i.jsx(Fo,{className:"w-5 h-5 md:w-4 md:h-4"})})]})}function Al({isActive:e,onComplete:t,onCancel:r,stageRef:n,deckX:s,deckY:o,stageScale:l}){var I,D;const[a,c]=f.useState([]),[d,u]=f.useState(null),[h,g]=f.useState("click"),[p,y]=f.useState(!1),[m,x]=f.useState(2),[v,C]=f.useState("#ffffff"),[w,b]=f.useState(1),[R,O]=f.useState("solid");f.useEffect(()=>{e||(c([]),u(null),y(!1),g("click"))},[e]),f.useEffect(()=>{if(!e)return;const N=$=>{$.key==="Escape"?r():$.key==="Enter"&&a.length>=2&&F()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[e,a,r]);const E=N=>{if(N.stopPropagation(),!e||!n.current||h==="draw")return;const $=n.current.getBoundingClientRect(),W=(N.clientX-$.left-s)/l,G=(N.clientY-$.top-o)/l;if(a.length===0){c([{x:W,y:G}]);return}if(a.length===1){const ae=`M ${a[0].x} ${a[0].y} L ${W} ${G}`;c([]),t(ae,m,v,w,R,"click");return}},P=N=>{if(N.stopPropagation(),!e||!n.current||h!=="draw")return;const $=n.current.getBoundingClientRect(),W=(N.clientX-$.left-s)/l,G=(N.clientY-$.top-o)/l;y(!0),c([{x:W,y:G}])},j=N=>{if(!e||!n.current)return;const $=n.current.getBoundingClientRect(),W=(N.clientX-$.left-s)/l,G=(N.clientY-$.top-o)/l;u({x:W,y:G}),h==="draw"&&p&&c([...a,{x:W,y:G}])},M=()=>{h==="draw"&&p&&(y(!1),a.length>=2?F():r())},F=()=>{if(a.length<2){r();return}let N=`M ${a[0].x} ${a[0].y}`;if(h==="draw")for(let $=1;$<a.length;$++)($%3===0||$===a.length-1)&&(N+=` L ${a[$].x} ${a[$].y}`);else for(let $=1;$<a.length;$++){const W=a[$-1],G=a[$];if($===1)N+=` L ${G.x} ${G.y}`;else{const ae=(W.x+G.x)/2,L=(W.y+G.y)/2;N+=` Q ${W.x} ${W.y} ${ae} ${L}`}}t(N,m,v,w,R,h)},A=N=>{N.stopPropagation(),r()},k=(N,$)=>{$.stopPropagation(),g(N),c([])};if(!e)return null;let T="";if(a.length>0){T=`M ${a[0].x} ${a[0].y}`;for(let N=1;N<a.length;N++)T+=` L ${a[N].x} ${a[N].y}`;d&&a.length>0&&h==="click"&&(T+=` L ${d.x} ${d.y}`)}const _=((I=n.current)==null?void 0:I.clientWidth)||3e3,H=((D=n.current)==null?void 0:D.clientHeight)||3e3;return i.jsxs("g",{style:{pointerEvents:"all"},children:[i.jsx("rect",{x:0,y:0,width:_,height:H,fill:"rgba(0,0,0,0.01)",style:{cursor:h==="draw"?"crosshair":"pointer",pointerEvents:"all"},onClick:E,onMouseDown:P,onMouseMove:j,onMouseUp:M}),T&&i.jsxs("g",{transform:`translate(${s}, ${o}) scale(${l})`,style:{pointerEvents:"none"},children:[i.jsx("path",{d:T,stroke:v,strokeWidth:m/l,fill:"none",opacity:w,strokeDasharray:h==="click"?"4 4":R==="dashed"?`${m*2} ${m}`:R==="dotted"?`1 ${m}`:"none",strokeLinecap:"round",strokeLinejoin:"round"}),h==="click"&&a.map((N,$)=>i.jsx("circle",{cx:N.x,cy:N.y,r:5/l,fill:$===0?"#ccff00":"#ffffff",stroke:"#000000",strokeWidth:2/l},$)),h==="click"&&d&&i.jsx("circle",{cx:d.x,cy:d.y,r:4/l,fill:"#ccff00",opacity:.6})]}),i.jsx("foreignObject",{x:20,y:100,width:240,height:420,children:i.jsx("div",{className:"bg-card border border-border rounded-lg p-3 shadow-2xl",onMouseDown:N=>N.stopPropagation(),onClick:N=>N.stopPropagation(),children:i.jsxs("div",{className:"flex flex-col gap-2.5",children:[i.jsxs("div",{className:"flex gap-1 p-1 bg-secondary rounded",children:[i.jsx("button",{onClick:N=>k("click",N),className:`flex-1 px-2 py-1.5 text-xs rounded transition-colors ${h==="click"?"bg-accent text-accent-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,title:"Click to place points",children:i.jsx(Uo,{className:"w-3.5 h-3.5 mx-auto"})}),i.jsx("button",{onClick:N=>k("draw",N),className:`flex-1 px-2 py-1.5 text-xs rounded transition-colors ${h==="draw"?"bg-accent text-accent-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,title:"Free draw",children:i.jsx("span",{className:"text-sm",children:""})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Width"}),i.jsxs("span",{className:"text-xs font-mono bg-secondary px-1.5 py-0.5 rounded",children:[m,"px"]})]}),i.jsx("input",{type:"range",min:"1",max:"20",value:m,onChange:N=>x(Number(N.target.value)),onMouseDown:N=>N.stopPropagation(),onClick:N=>N.stopPropagation(),className:"w-full h-1.5 bg-secondary rounded-full appearance-none cursor-pointer",style:{accentColor:v}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Color"}),i.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:["#000000","#ffffff","#ccff00","#ff6600","#00ffff","#ff00ff"].map(N=>i.jsx("button",{onClick:$=>{$.stopPropagation(),C(N)},onMouseDown:$=>$.stopPropagation(),className:`w-8 h-8 rounded-md border-2 transition-all hover:scale-110 ${v===N?"border-accent ring-2 ring-accent/30":"border-border/50"}`,style:{backgroundColor:N},title:N},N))}),i.jsx("input",{type:"color",value:v,onChange:N=>C(N.target.value),onMouseDown:N=>N.stopPropagation(),onClick:N=>N.stopPropagation(),className:"w-full h-8 border border-border rounded cursor-pointer",title:"Custom color"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Opacity"}),i.jsxs("span",{className:"text-xs font-mono bg-secondary px-1.5 py-0.5 rounded",children:[Math.round(w*100),"%"]})]}),i.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:w,onChange:N=>b(Number(N.target.value)),onMouseDown:N=>N.stopPropagation(),onClick:N=>N.stopPropagation(),className:"w-full h-1.5 bg-secondary rounded-full appearance-none cursor-pointer",style:{accentColor:v}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Style"}),i.jsx("div",{className:"flex gap-1.5",children:["solid","dashed","dotted"].map(N=>i.jsx("button",{onClick:$=>{$.stopPropagation(),O(N)},onMouseDown:$=>$.stopPropagation(),className:`flex-1 h-10 rounded border-2 transition-all hover:scale-105 ${R===N?"bg-accent/10 border-accent":"bg-secondary border-border hover:border-accent/50"}`,title:N,children:i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-0.5",style:{background:v,borderTop:N==="dashed"?`2px dashed ${v}`:N==="dotted"?`2px dotted ${v}`:`2px solid ${v}`}})})},N))})]}),i.jsxs("div",{className:"pt-2 border-t border-border space-y-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground text-center leading-relaxed",children:h==="click"?a.length===0?"Click to place start point":"Click to finish line":p?"Drawing...":"Click and drag to draw"}),i.jsxs("button",{onClick:A,className:"w-full py-2 px-3 text-xs bg-secondary hover:bg-destructive/10 text-muted-foreground hover:text-destructive border border-border hover:border-destructive/50 rounded transition-colors flex items-center justify-center gap-2",children:[i.jsx(ve,{className:"w-3.5 h-3.5"}),"Cancel (ESC)"]})]})]})})})]})}function Tl({object:e,stageScale:t,deckX:r,deckY:n,onUpdate:s,onStartTransform:o,onEndTransform:l}){const[a,c]=f.useState(!1),[d,u]=f.useState(null),[h,g]=f.useState({x:0,y:0}),[p,y]=f.useState({x:0,y:0,width:0,height:0,rotation:0}),[m,x]=f.useState(!1),v=e.width*e.scaleX,C=e.height*e.scaleY,w=e.x,b=e.y,R=e.rotation||0,O=typeof window<"u"&&window.innerWidth<768,E=(O?16:10)/t,P=(O?45:35)/t,j={nw:{x:w,y:b},n:{x:w+v/2,y:b},ne:{x:w+v,y:b},e:{x:w+v,y:b+C/2},se:{x:w+v,y:b+C},s:{x:w+v/2,y:b+C},sw:{x:w,y:b+C},w:{x:w,y:b+C/2},rotate:{x:w+v/2,y:b-P}},M=f.useCallback((k,T)=>{k.stopPropagation(),c(!0),u(T),g({x:k.clientX,y:k.clientY}),y({x:w,y:b,width:v,height:C,rotation:R}),x(k.shiftKey),o()},[w,b,v,C,R,o]),F=f.useCallback(k=>{var H;if(!a||!d)return;const T=(k.clientX-h.x)/t,_=(k.clientY-h.y)/t;if(d==="rotate"){const I=p.x+p.width/2,D=p.y+p.height/2,N=(H=document.querySelector("svg"))==null?void 0:H.getBoundingClientRect();if(!N)return;const $=(k.clientX-N.left-r)/t,W=(k.clientY-N.top-n)/t,G=$-I,ae=W-D;let B=Math.atan2(ae,G)*180/Math.PI+90;k.shiftKey&&(B=Math.round(B/15)*15),s({rotation:Math.round(B)})}else{let I=p.x,D=p.y,N=p.width,$=p.height;switch(d){case"nw":I=p.x+T,D=p.y+_,N=p.width-T,$=p.height-_;break;case"n":D=p.y+_,$=p.height-_;break;case"ne":D=p.y+_,N=p.width+T,$=p.height-_;break;case"e":N=p.width+T;break;case"se":N=p.width+T,$=p.height+_;break;case"s":$=p.height+_;break;case"sw":I=p.x+T,N=p.width-T,$=p.height+_;break;case"w":I=p.x+T,N=p.width-T;break}if((m||k.shiftKey)&&(d==="nw"||d==="ne"||d==="se"||d==="sw")){const L=p.width/p.height;Math.abs(N/L)>Math.abs($)?($=N/L,(d==="nw"||d==="ne")&&(D=p.y+p.height-$)):(N=$*L,(d==="nw"||d==="sw")&&(I=p.x+p.width-N))}N<10&&(N=10),$<10&&($=10);const G=N/e.width,ae=$/e.height;s({x:I,y:D,scaleX:G,scaleY:ae})}},[a,d,h,p,m,t,e.width,e.height,s]),A=f.useCallback(()=>{a&&(c(!1),u(null),l())},[a,l]);return f.useEffect(()=>{if(a)return window.addEventListener("mousemove",F),window.addEventListener("mouseup",A),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",A)}},[a,F,A]),i.jsxs("g",{style:{pointerEvents:"all"},children:[i.jsx("rect",{x:w,y:b,width:v,height:C,fill:"none",stroke:"#ccff00",strokeWidth:2/t,strokeDasharray:`${4/t} ${2/t}`,style:{pointerEvents:"none"}}),["nw","ne","se","sw"].map(k=>i.jsx("rect",{x:j[k].x-E/2,y:j[k].y-E/2,width:E,height:E,fill:"#ffffff",stroke:"#000000",strokeWidth:1/t,style:{cursor:`${k}-resize`,pointerEvents:"all"},onMouseDown:T=>M(T,k),className:"hover:fill-primary transition-colors"},k)),["n","e","s","w"].map(k=>i.jsx("rect",{x:j[k].x-E/2,y:j[k].y-E/2,width:E,height:E,fill:"#ccff00",stroke:"#000000",strokeWidth:1/t,style:{cursor:`${k}-resize`,pointerEvents:"all"},onMouseDown:T=>M(T,k),className:"hover:fill-primary transition-colors"},k)),i.jsxs("g",{children:[i.jsx("line",{x1:w+v/2,y1:b,x2:j.rotate.x,y2:j.rotate.y,stroke:"#ccff00",strokeWidth:1/t,strokeDasharray:`${2/t} ${2/t}`,style:{pointerEvents:"none"}}),i.jsx("circle",{cx:j.rotate.x,cy:j.rotate.y,r:E,fill:"#00d9ff",stroke:"#000000",strokeWidth:1/t,style:{cursor:"grab",pointerEvents:"all"},onMouseDown:k=>M(k,"rotate"),className:"hover:fill-primary transition-colors"}),i.jsx("foreignObject",{x:j.rotate.x-E,y:j.rotate.y-E,width:E*2,height:E*2,style:{pointerEvents:"none",overflow:"visible"},children:i.jsx("div",{className:"flex items-center justify-center w-full h-full",children:i.jsx(Wo,{className:"w-3 h-3 text-white",style:{filter:"drop-shadow(0 0 2px black)"}})})})]}),a&&d!=="rotate"&&i.jsxs("g",{children:[i.jsx("rect",{x:w+v/2-30/t,y:b-25/t,width:60/t,height:18/t,fill:"rgba(0,0,0,0.8)",rx:3/t}),i.jsxs("text",{x:w+v/2,y:b-12/t,textAnchor:"middle",fill:"#ccff00",fontSize:10/t,fontFamily:"monospace",style:{pointerEvents:"none"},children:[Math.round(v),"",Math.round(C)]})]}),a&&d==="rotate"&&i.jsxs("g",{children:[i.jsx("rect",{x:w+v/2-25/t,y:b-25/t,width:50/t,height:18/t,fill:"rgba(0,0,0,0.8)",rx:3/t}),i.jsxs("text",{x:w+v/2,y:b-12/t,textAnchor:"middle",fill:"#00d9ff",fontSize:10/t,fontFamily:"monospace",style:{pointerEvents:"none"},children:[Math.round(R),""]})]}),a&&!m&&(d==="nw"||d==="ne"||d==="se"||d==="sw")&&i.jsxs("g",{children:[i.jsx("rect",{x:w+v/2-60/t,y:b+C+10/t,width:120/t,height:18/t,fill:"rgba(0,0,0,0.8)",rx:3/t}),i.jsx("text",{x:w+v/2,y:b+C+23/t,textAnchor:"middle",fill:"#888888",fontSize:9/t,fontFamily:"sans-serif",style:{pointerEvents:"none"},children:"Hold Shift to lock ratio"})]})]})}function $l({guides:e,deckX:t,deckY:r,stageScale:n}){return e.length===0?null:i.jsx("g",{transform:`translate(${t}, ${r}) scale(${n})`,style:{pointerEvents:"none"},children:e.map((s,o)=>{if(s.type==="spacing"){if(!(s.start!==void 0&&s.end!==void 0)||s.distance===void 0)return null;const a=(s.start+s.end)/2;return Math.abs(s.end-s.start),i.jsxs("g",{children:[i.jsx("line",{x1:s.position,y1:s.start,x2:s.position,y2:s.end,stroke:"#00d9ff",strokeWidth:1.5/n,opacity:.9}),i.jsx("line",{x1:s.position-5/n,y1:s.start,x2:s.position+5/n,y2:s.start,stroke:"#00d9ff",strokeWidth:1.5/n}),i.jsx("line",{x1:s.position-5/n,y1:s.end,x2:s.position+5/n,y2:s.end,stroke:"#00d9ff",strokeWidth:1.5/n}),i.jsxs("g",{children:[i.jsx("rect",{x:s.position-25/n,y:a-10/n,width:50/n,height:20/n,fill:"rgba(0, 217, 255, 0.95)",rx:4/n}),i.jsxs("text",{x:s.position,y:a+2/n,textAnchor:"middle",fill:"white",fontSize:11/n,fontFamily:"monospace",fontWeight:"600",children:[Math.round(s.distance),"px"]})]})]},`spacing-${o}`)}return s.type==="vertical"?i.jsxs("g",{children:[i.jsx("line",{x1:s.position,y1:0,x2:s.position,y2:q,stroke:"#ff0000",strokeWidth:1/n,strokeDasharray:`${4/n} ${2/n}`,opacity:.8}),s.label&&i.jsxs("g",{children:[i.jsx("rect",{x:s.position-30/n,y:10/n,width:60/n,height:16/n,fill:"rgba(255, 0, 0, 0.9)",rx:3/n}),i.jsx("text",{x:s.position,y:20/n,textAnchor:"middle",fill:"white",fontSize:10/n,fontFamily:"monospace",children:s.label})]})]},`v-${o}`):i.jsxs("g",{children:[i.jsx("line",{x1:0,y1:s.position,x2:X,y2:s.position,stroke:"#ff0000",strokeWidth:1/n,strokeDasharray:`${4/n} ${2/n}`,opacity:.8}),s.label&&i.jsxs("g",{children:[i.jsx("rect",{x:10/n,y:s.position-8/n,width:60/n,height:16/n,fill:"rgba(255, 0, 0, 0.9)",rx:3/n}),i.jsx("text",{x:40/n,y:s.position+3/n,textAnchor:"middle",fill:"white",fontSize:10/n,fontFamily:"monospace",children:s.label})]})]},`h-${o}`)})})}function Ol(e,t,r=5){const n=[],s=e.width*e.scaleX,o=e.height*e.scaleY,l=e.x+s/2,a=e.y+o/2,c=e.x+s,d=e.y+o,u=X/2,h=q/2;Math.abs(l-u)<r&&n.push({type:"vertical",position:u,label:"Center"}),Math.abs(a-h)<r&&n.push({type:"horizontal",position:h,label:"Center"}),t.forEach(p=>{const y=p.width*p.scaleX,m=p.height*p.scaleY,x=p.x+y/2,v=p.y+m/2,C=p.x+y,w=p.y+m;Math.abs(e.x-p.x)<r&&n.push({type:"vertical",position:p.x}),Math.abs(c-C)<r&&n.push({type:"vertical",position:C}),Math.abs(l-x)<r&&n.push({type:"vertical",position:x}),Math.abs(e.x-C)<r&&n.push({type:"vertical",position:C}),Math.abs(c-p.x)<r&&n.push({type:"vertical",position:p.x}),Math.abs(e.y-p.y)<r&&n.push({type:"horizontal",position:p.y}),Math.abs(d-w)<r&&n.push({type:"horizontal",position:w}),Math.abs(a-v)<r&&n.push({type:"horizontal",position:v}),Math.abs(e.y-w)<r&&n.push({type:"horizontal",position:w}),Math.abs(d-p.y)<r&&n.push({type:"horizontal",position:p.y})}),t.forEach(p=>{const y=p.width*p.scaleX,m=p.height*p.scaleY,x=p.x+y,v=p.y+m;if(e.y<v&&d>p.y){if(c<p.x&&p.x-c<100){const b=p.x-c,R=Math.max(e.y,p.y)+Math.min(d-e.y,v-p.y)/2;n.push({type:"spacing",position:c+b/2,start:R-20,end:R+20,distance:b})}if(e.x>x&&e.x-x<100){const b=e.x-x,R=Math.max(e.y,p.y)+Math.min(d-e.y,v-p.y)/2;n.push({type:"spacing",position:x+b/2,start:R-20,end:R+20,distance:b})}}if(e.x<x&&c>p.x){if(d<p.y&&p.y-d<100){const b=p.y-d,R=Math.max(e.x,p.x)+Math.min(c-e.x,x-p.x)/2;n.push({type:"spacing",position:R,start:d,end:p.y,distance:b})}if(e.y>v&&e.y-v<100){const b=e.y-v,R=Math.max(e.x,p.x)+Math.min(c-e.x,x-p.x)/2;n.push({type:"spacing",position:R,start:v,end:e.y,distance:b})}}});const g=[];return n.forEach(p=>{g.some(m=>m.type===p.type&&Math.abs(m.position-p.position)<1)||g.push(p)}),g}function Ml({deckX:e,deckY:t,stageScale:r,enabled:n}){if(!n)return null;const s=20/r,o=10,l=5,a=8/r,c=[];for(let u=0;u<=X;u+=l){const h=u%o===0,g=h?s*.5:s*.3;c.push(i.jsx("line",{x1:u,y1:0,x2:u,y2:g,stroke:"#888",strokeWidth:.5/r},`h-${u}`)),h&&u%20===0&&c.push(i.jsx("text",{x:u,y:s*.75,textAnchor:"middle",fill:"#333",fontSize:a,fontFamily:"monospace",children:u},`h-label-${u}`))}const d=[];for(let u=0;u<=q;u+=l){const h=u%o===0,g=h?s*.5:s*.3;d.push(i.jsx("line",{x1:0,y1:u,x2:g,y2:u,stroke:"#888",strokeWidth:.5/r},`v-${u}`)),h&&u%20===0&&d.push(i.jsx("text",{x:s*.25,y:u+a*.3,textAnchor:"start",fill:"#333",fontSize:a,fontFamily:"monospace",children:u},`v-label-${u}`))}return i.jsxs("g",{transform:`translate(${e}, ${t}) scale(${r})`,style:{pointerEvents:"none"},children:[i.jsx("rect",{x:0,y:0,width:X,height:s,fill:"rgba(255, 255, 255, 0.95)",stroke:"#ccc",strokeWidth:1/r}),c,i.jsx("rect",{x:0,y:0,width:s,height:q,fill:"rgba(255, 255, 255, 0.95)",stroke:"#ccc",strokeWidth:1/r}),d,i.jsx("rect",{x:0,y:0,width:s,height:s,fill:"#f0f0f0",stroke:"#ccc",strokeWidth:1/r}),i.jsx("text",{x:s/2,y:s/2+a*.3,textAnchor:"middle",fill:"#999",fontSize:a,fontFamily:"monospace",children:"px"})]})}function Dl({x:e,y:t,objectId:r,onClose:n}){const{objects:s,selectedIds:o,updateObject:l,deleteObject:a,saveToHistory:c,addObject:d,selectObject:u,groupObjects:h,ungroupObject:g}=be(),[p,y]=f.useState({x:e,y:t}),m=r?s.find(I=>I.id===r):null;if(f.useEffect(()=>{let N=e,$=t;e+220>window.innerWidth&&(N=window.innerWidth-220-10),t+400>window.innerHeight&&($=window.innerHeight-400-10),y({x:N,y:$})},[e,t]),f.useEffect(()=>{const I=()=>n(),D=()=>n();return setTimeout(()=>{document.addEventListener("click",I),document.addEventListener("scroll",D,!0)},0),()=>{document.removeEventListener("click",I),document.removeEventListener("scroll",D,!0)}},[n]),!m)return null;const x=()=>{sessionStorage.setItem("deckforge_clipboard",JSON.stringify(m)),Y.success("Copied to clipboard"),n()},v=()=>{sessionStorage.setItem("deckforge_clipboard",JSON.stringify(m)),a(m.id),Y.success("Cut to clipboard"),n()},C=()=>{const I=sessionStorage.getItem("deckforge_clipboard");if(I)try{const D=JSON.parse(I),{id:N,...$}=D;d({...$,x:D.x+20,y:D.y+20}),Y.success("Pasted from clipboard")}catch{Y.error("Failed to paste")}n()},w=()=>{const{id:I,...D}=m;c(),d({...D,x:m.x+10,y:m.y+10}),Y.success("Object duplicated"),n()},b=()=>{a(m.id),Y.success("Object deleted"),n()},R=()=>{l(m.id,{locked:!m.locked}),Y.success(m.locked?"Object unlocked":"Object locked"),n()},O=()=>{l(m.id,{opacity:m.opacity===0?1:0}),Y.success(m.opacity===0?"Object visible":"Object hidden"),n()},E=()=>{const I=s.findIndex(D=>D.id===m.id);if(I<s.length-1){c();const D=[...s];[D[I],D[I+1]]=[D[I+1],D[I]],be.setState({objects:D}),Y.success("Brought forward")}n()},P=()=>{const I=s.findIndex(D=>D.id===m.id);if(I>0){c();const D=[...s];[D[I],D[I-1]]=[D[I-1],D[I]],be.setState({objects:D}),Y.success("Sent backward")}n()},j=()=>{const I=s.findIndex(N=>N.id===m.id);c();const D=s.filter(N=>N.id!==m.id);D.push(s[I]),be.setState({objects:D}),Y.success("Brought to front"),n()},M=()=>{const I=s.findIndex(N=>N.id===m.id);c();const D=s.filter(N=>N.id!==m.id);D.unshift(s[I]),be.setState({objects:D}),Y.success("Sent to back"),n()},F=()=>{o.length>=2&&(h(o),Y.success(`Grouped ${o.length} objects`)),n()},A=()=>{m.type==="group"&&(g(m.id),Y.success("Ungrouped objects")),n()},k=!!sessionStorage.getItem("deckforge_clipboard"),T=m.type==="group",_=o.length>=2,H=[{label:"Copy",icon:i.jsx(ir,{className:"w-4 h-4"}),shortcut:"Ctrl+C",action:x},{label:"Cut",icon:i.jsx(Bo,{className:"w-4 h-4"}),shortcut:"Ctrl+X",action:v},{label:"Paste",icon:i.jsx(zo,{className:"w-4 h-4"}),shortcut:"Ctrl+V",action:C,disabled:!k},{label:"Duplicate",icon:i.jsx(ir,{className:"w-4 h-4"}),shortcut:"Ctrl+D",action:w,divider:!0},{label:m.locked?"Unlock":"Lock",icon:m.locked?i.jsx(Ho,{className:"w-4 h-4"}):i.jsx(Xo,{className:"w-4 h-4"}),shortcut:"Ctrl+L",action:R},{label:m.opacity===0?"Show":"Hide",icon:m.opacity===0?i.jsx(Fn,{className:"w-4 h-4"}):i.jsx(Yo,{className:"w-4 h-4"}),action:O,divider:!0},{label:"Bring Forward",icon:i.jsx(Vo,{className:"w-4 h-4"}),shortcut:"Ctrl+]",action:E},{label:"Send Backward",icon:i.jsx(Go,{className:"w-4 h-4"}),shortcut:"Ctrl+[",action:P},{label:"Bring to Front",icon:i.jsx(qo,{className:"w-4 h-4"}),shortcut:"Ctrl+Shift+]",action:j},{label:"Send to Back",icon:i.jsx(Ko,{className:"w-4 h-4"}),shortcut:"Ctrl+Shift+[",action:M,divider:!0}];return _&&!T&&H.push({label:"Group",icon:i.jsx(Jo,{className:"w-4 h-4"}),shortcut:"Ctrl+G",action:F}),T&&H.push({label:"Ungroup",icon:i.jsx(Zo,{className:"w-4 h-4"}),shortcut:"Ctrl+Shift+G",action:A}),H.push({label:"Delete",icon:i.jsx(Ze,{className:"w-4 h-4"}),shortcut:"Delete",action:b,destructive:!0,divider:_||T}),i.jsx("div",{className:"fixed z-[9999] bg-card border border-border rounded-lg shadow-2xl py-1 min-w-[220px] animate-in fade-in-0 zoom-in-95 duration-100",style:{left:p.x,top:p.y},onClick:I=>I.stopPropagation(),children:H.map((I,D)=>i.jsxs("div",{children:[I.divider&&D>0&&i.jsx("div",{className:"h-px bg-border my-1"}),i.jsxs("button",{onClick:I.action,disabled:I.disabled,className:`
              w-full flex items-center gap-3 px-3 py-2 text-sm
              transition-colors text-left
              ${I.disabled?"opacity-50 cursor-not-allowed":I.destructive?"hover:bg-destructive/10 text-destructive":"hover:bg-accent"}
            `,children:[i.jsx("span",{className:"flex-shrink-0",children:I.icon}),i.jsx("span",{className:"flex-1",children:I.label}),I.shortcut&&i.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:I.shortcut})]})]},D))})}function Il({deckX:e,deckY:t,stageScale:r}){const[n,s]=f.useState(!1),[o,l]=f.useState({x:0,y:0}),[a,c]=f.useState({x:0,y:0}),{objects:d,setSelectedIds:u,activeTool:h}=be();if(f.useEffect(()=>{const x=w=>{if(h||!w.target.closest("svg"))return;const b=w.target.closest("svg");if(!b)return;const R=b.getBoundingClientRect(),O=(w.clientX-R.left-e)/r,E=(w.clientY-R.top-t)/r;l({x:O,y:E}),c({x:O,y:E}),s(!0)},v=w=>{if(!n)return;const b=document.querySelector("svg");if(!b)return;const R=b.getBoundingClientRect(),O=(w.clientX-R.left-e)/r,E=(w.clientY-R.top-t)/r;c({x:O,y:E})},C=()=>{if(!n)return;const w=Math.min(o.x,a.x),b=Math.max(o.x,a.x),R=Math.min(o.y,a.y),O=Math.max(o.y,a.y),E=d.filter(P=>{const j=P.x+P.width/2,M=P.y+P.height/2;return j>=w&&j<=b&&M>=R&&M<=O}).map(P=>P.id);E.length>0&&u(E),s(!1)};return window.addEventListener("mousedown",x),window.addEventListener("mousemove",v),window.addEventListener("mouseup",C),()=>{window.removeEventListener("mousedown",x),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",C)}},[n,o,a,d,h,e,t,r,u]),!n)return null;const g=Math.min(o.x,a.x),p=Math.min(o.y,a.y),y=Math.abs(a.x-o.x),m=Math.abs(a.y-o.y);return i.jsx("rect",{x:g,y:p,width:y,height:m,fill:"rgba(59, 130, 246, 0.1)",stroke:"#3b82f6",strokeWidth:1/r,strokeDasharray:`${4/r} ${2/r}`,pointerEvents:"none"})}const X=96,q=294,_l={Skull:ki,Flame:Ei,Zap:Si,Sword:vi,Ghost:bi,Bug:wi,Eye:Fn,Target:yi,Radio:xi,Disc:gi,Music:mi,Rocket:pi,Crown:lr,Anchor:hi,Sun:fi,Moon:ui,Triangle:di,Hexagon:ci,Circle:li,Square:ai,Star:ar,Heart:ii,Sparkles:Un,Hand:oi,Cat:si,Dog:ni,Fish:ri,Bird:ti,Leaf:ei,Cloud:Qo};function lt(e,t){const r=X/2;return`
    M ${e} ${t+r}
    Q ${e} ${t} ${e+X/2} ${t}
    Q ${e+X} ${t} ${e+X} ${t+r}
    L ${e+X} ${t+q-r}
    Q ${e+X} ${t+q} ${e+X/2} ${t+q}
    Q ${e} ${t+q} ${e} ${t+q-r}
    Z
  `}function Ll(e){const t=[];return e.contrast!==void 0&&e.contrast!==100&&t.push(`contrast(${e.contrast}%)`),e.brightness!==void 0&&e.brightness!==100&&t.push(`brightness(${e.brightness}%)`),e.grayscale!==void 0&&e.grayscale>0&&t.push(`grayscale(${e.grayscale}%)`),e.threshold&&t.push("contrast(300%)","grayscale(100%)"),e.hueRotate!==void 0&&e.hueRotate>0&&t.push(`hue-rotate(${e.hueRotate}deg)`),e.invert&&t.push("invert(100%)"),e.blur!==void 0&&e.blur>0&&t.push(`blur(${e.blur}px)`),e.saturate!==void 0&&e.saturate!==100&&t.push(`saturate(${e.saturate}%)`),e.sepia!==void 0&&e.sepia>0&&t.push(`sepia(${e.sepia}%)`),t.length>0?t.join(" "):"none"}function Fl(e){if(e.colorize)return{mixBlendMode:"color"}}function vs({obj:e,isSelected:t,onSelect:r,onChange:n,deckX:s,deckY:o,stageScale:l,onDragStart:a,onDragMove:c,onDragEnd:d,onContextMenu:u}){var E;const[h,g]=f.useState(!1),[p,y]=f.useState({objX:0,objY:0,clientX:0,clientY:0}),m=P=>{P.stopPropagation(),r(P),!e.locked&&(g(!0),y({objX:e.x,objY:e.y,clientX:P.clientX,clientY:P.clientY}),a==null||a())},x=P=>{P.preventDefault(),P.stopPropagation(),u&&u(P,e.id)},v=f.useCallback(P=>{if(h){const j=(P.clientX-p.clientX)/l,M=(P.clientY-p.clientY)/l,F=p.objX+j,A=p.objY+M;n({x:F,y:A}),c==null||c({...e,x:F,y:A})}},[h,p,l,n,c,e]),C=f.useCallback(()=>{h&&(g(!1),d==null||d())},[h,d]);f.useEffect(()=>{if(h)return window.addEventListener("mousemove",v),window.addEventListener("mouseup",C),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",C)}},[h,v,C]);const w=`translate(${e.x}, ${e.y}) rotate(${e.rotation}) scale(${e.scaleX}, ${e.scaleY})`,b=h?"grabbing":"grab",R=Ll(e),O=P=>e.colorize?i.jsxs("g",{children:[P,i.jsxs("g",{style:Fl(e),children:[P,i.jsx("rect",{x:e.x-5,y:e.y-5,width:e.width*e.scaleX+10,height:e.height*e.scaleY+10,fill:e.colorize,opacity:.7,style:{mixBlendMode:"color"},pointerEvents:"none"})]})]}):P;if(e.type==="group"&&e.children&&e.children.length>0)return i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation}) scale(${e.scaleX}, ${e.scaleY})`,opacity:e.opacity,style:{cursor:b,mixBlendMode:e.mixBlendMode||"normal"},onMouseDown:m,onContextMenu:x,children:[e.children.map(P=>i.jsx("g",{children:i.jsx(vs,{obj:P,isSelected:!1,onSelect:()=>{},onChange:j=>{const M=e.children.map(F=>F.id===P.id?{...F,...j}:F);n({children:M})},deckX:0,deckY:0,stageScale:1,onDragStart:a,onDragMove:c,onDragEnd:d})},P.id)),t&&i.jsx("rect",{x:0,y:0,width:e.width,height:e.height,fill:"none",stroke:"#ccff00",strokeWidth:2/l,strokeDasharray:`${8/l} ${4/l}`,style:{pointerEvents:"none"}})]});if(e.type==="text"){const P=e.gradientStops?`gradient-${e.id}`:null,j=P?`url(#${P})`:e.colorize||e.fill||"#ffffff";let M=e.text||"Text";e.textTransform==="uppercase"?M=M.toUpperCase():e.textTransform==="lowercase"?M=M.toLowerCase():e.textTransform==="capitalize"&&(M=M.replace(/\b\w/g,T=>T.toUpperCase()));let F="none";if((E=e.textShadow)!=null&&E.enabled){const{offsetX:T,offsetY:_,blur:H,color:I}=e.textShadow;F=`${T}px ${_}px ${H}px ${I}`}const A=e.textDecoration||"none";return i.jsxs(i.Fragment,{children:[e.gradientStops&&i.jsx("defs",{children:i.jsx("linearGradient",{id:P,x1:"0%",y1:"0%",x2:"100%",y2:"0%",gradientTransform:`rotate(${e.gradientAngle||0})`,children:e.gradientStops.map((T,_)=>i.jsx("stop",{offset:`${T.offset*100}%`,stopColor:T.color},_))})}),i.jsx("text",{transform:w,fill:j,fontSize:e.fontSize||24,fontFamily:e.fontFamily||"Oswald, sans-serif",fontWeight:e.fontWeight||"normal",fontStyle:e.fontStyle||"normal",textAnchor:e.align==="center"?"middle":e.align==="right"?"end":"start",opacity:e.opacity,letterSpacing:e.letterSpacing||0,style:{cursor:b,filter:R,textShadow:F,textDecoration:A==="underline"?"underline":A==="line-through"?"line-through":"none"},onMouseDown:m,children:M})]})}if(e.type==="path"&&e.pathPoints&&e.pathPoints.length>0){let P=`M ${e.pathPoints[0].x} ${e.pathPoints[0].y}`;for(let A=1;A<e.pathPoints.length;A++){const k=e.pathPoints[A];e.pathPoints[A-1],k.cp1x!==void 0&&k.cp1y!==void 0?k.cp2x!==void 0&&k.cp2y!==void 0?P+=` C ${k.cp1x} ${k.cp1y} ${k.cp2x} ${k.cp2y} ${k.x} ${k.y}`:P+=` Q ${k.cp1x} ${k.cp1y} ${k.x} ${k.y}`:P+=` L ${k.x} ${k.y}`}e.pathClosed&&(P+=" Z");const j=e.x+e.width/2,M=e.y+e.height/2,F=()=>{const A=e.strokeWidth||2;return!e.strokeDashStyle||e.strokeDashStyle==="solid"?"none":e.strokeDashStyle==="dashed"?`${A*4} ${A*3}`:e.strokeDashStyle==="dotted"?`${A*.5} ${A*2}`:"none"};return i.jsxs("g",{transform:`rotate(${e.rotation} ${j} ${M})`,children:[i.jsx("path",{d:P,fill:"none",stroke:"transparent",strokeWidth:Math.max(e.strokeWidth||2,12),style:{cursor:b},onMouseDown:m,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:P,fill:e.pathClosed&&e.fill||"none",stroke:e.stroke||"#000000",strokeWidth:e.strokeWidth||2,strokeDasharray:F(),opacity:e.opacity,style:{filter:R,pointerEvents:"none"},strokeLinecap:"round",strokeLinejoin:"round"}),t&&i.jsx("path",{d:P,fill:"none",stroke:"#ccff00",strokeWidth:(e.strokeWidth||2)+2,strokeDasharray:"6 4",opacity:.6,style:{pointerEvents:"none"},strokeLinecap:"round",strokeLinejoin:"round"})]})}if(e.type==="shape"){const P={cursor:b,filter:R};let j=null;if(e.patternType){const k=e.patternPrimaryColor||"#1e3a8a",T=e.patternSecondaryColor||"#3b82f6",_=e.patternScale||20;switch(e.patternType){case"checkerboard":j=`repeating-linear-gradient(45deg, ${k} 0px, ${k} ${_}px, ${T} ${_}px, ${T} ${_*2}px), repeating-linear-gradient(-45deg, transparent 0px, transparent ${_}px, ${T} ${_}px, ${T} ${_*2}px)`;break;case"speed-lines":j=`repeating-linear-gradient(90deg, ${k} 0px, ${k} ${_/4}px, ${T} ${_/4}px, ${T} ${_/2}px)`;break;case"halftone":j=`radial-gradient(${k} ${_/6}px, ${T} ${_/6}px)`;break;case"diagonal-stripes":j=`repeating-linear-gradient(45deg, ${k} 0px, ${k} ${_}px, ${T} ${_}px, ${T} ${_*2}px)`;break;case"hexagons":j=`repeating-conic-gradient(from 30deg, ${k} 0deg 60deg, ${T} 60deg 120deg, ${k} 120deg 180deg, ${T} 180deg 240deg, ${k} 240deg 300deg, ${T} 300deg 360deg)`;break;case"crosshatch":j=`repeating-linear-gradient(0deg, transparent, transparent ${_}px, ${T} ${_}px, ${T} ${_+2}px), repeating-linear-gradient(90deg, transparent, transparent ${_}px, ${k} ${_}px, ${k} ${_+2}px)`;break;default:j=`linear-gradient(${k}, ${T})`}}const M=e.gradientStops?`gradient-${e.id}`:null,F=M?`url(#${M})`:e.fill||"#ffffff";if(j){const k=i.jsx("foreignObject",{x:e.x,y:e.y,width:e.width*e.scaleX,height:e.height*e.scaleY,style:P,onMouseDown:m,children:i.jsx("div",{style:{width:"100%",height:"100%",background:j,backgroundSize:e.patternType==="hexagons"?`${e.patternScale*2}px ${e.patternScale*2}px`:"auto",opacity:e.opacity,filter:R,border:t?"2px solid #ccff00":"none"}})});return O(k)}if(e.shapeType==="circle"){const k=i.jsxs(i.Fragment,{children:[e.gradientStops&&i.jsx("defs",{children:i.jsx("linearGradient",{id:M,x1:"0%",y1:"0%",x2:"100%",y2:"0%",gradientTransform:`rotate(${e.gradientAngle||0})`,children:e.gradientStops.map((T,_)=>i.jsx("stop",{offset:`${T.offset*100}%`,stopColor:T.color},_))})}),i.jsx("circle",{cx:e.x+e.width/2,cy:e.y+e.height/2,r:e.width/2*e.scaleX,fill:F,opacity:e.opacity,style:P,onMouseDown:m,stroke:t?"#ccff00":"none",strokeWidth:t?2:0})]});return O(k)}if(e.shapeType==="star"){const k=e.x+e.width/2,T=e.y+e.height/2,_=e.width/2*e.scaleX,H=_*.4,I=[];for(let N=0;N<10;N++){const $=N%2===0?_:H,W=Math.PI/5*N-Math.PI/2;I.push(`${k+$*Math.cos(W)},${T+$*Math.sin(W)}`)}const D=i.jsxs(i.Fragment,{children:[e.gradientStops&&i.jsx("defs",{children:i.jsx("linearGradient",{id:M,x1:"0%",y1:"0%",x2:"100%",y2:"0%",gradientTransform:`rotate(${e.gradientAngle||0})`,children:e.gradientStops.map((N,$)=>i.jsx("stop",{offset:`${N.offset*100}%`,stopColor:N.color},$))})}),i.jsx("polygon",{points:I.join(" "),fill:F,opacity:e.opacity,style:P,onMouseDown:m,stroke:t?"#ccff00":"none",strokeWidth:t?2:0})]});return O(D)}const A=i.jsxs(i.Fragment,{children:[e.gradientStops&&i.jsx("defs",{children:i.jsx("linearGradient",{id:M,x1:"0%",y1:"0%",x2:"100%",y2:"0%",gradientTransform:`rotate(${e.gradientAngle||0})`,children:e.gradientStops.map((k,T)=>i.jsx("stop",{offset:`${k.offset*100}%`,stopColor:k.color},T))})}),i.jsx("rect",{x:e.x,y:e.y,width:e.width*e.scaleX,height:e.height*e.scaleY,fill:F,opacity:e.opacity,style:P,onMouseDown:m,stroke:t?"#ccff00":"none",strokeWidth:t?2:0})]});return O(A)}if(e.type==="sticker"&&e.iconName){const P=_l[e.iconName];if(!P)return null;const j=e.width*e.scaleX,M=e.strokeWidth||3,F=e.stroke||"#ffffff",A=e.solidFill?F:"none";return i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation}, ${j/2}, ${j/2})`,opacity:e.opacity,style:{cursor:b,filter:R},onMouseDown:m,children:[i.jsx("foreignObject",{width:j,height:j,children:i.jsx("div",{style:{width:j,height:j,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(P,{width:j,height:j,strokeWidth:M,stroke:F,fill:A})})}),t&&i.jsx("rect",{x:0,y:0,width:j,height:j,fill:"none",stroke:"#ccff00",strokeWidth:2,strokeDasharray:"4,2"})]})}if(e.type==="texture"&&e.textureUrl){const P=e.width*e.scaleX,j=e.height*e.scaleY,M=e.blendMode||"multiply";return i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation})`,style:{cursor:b,filter:R,mixBlendMode:M},onMouseDown:m,children:[i.jsx("image",{href:e.textureUrl,width:P,height:j,opacity:e.opacity,preserveAspectRatio:"xMidYMid slice"}),t&&i.jsx("rect",{x:0,y:0,width:P,height:j,fill:"none",stroke:"#ccff00",strokeWidth:2,strokeDasharray:"4,2"})]})}if(e.type==="line"){const P=e.lineEndX??60,j=e.lineEndY??0,M=e.lineCurve??0,F=e.stroke||"#ffffff",A=e.strokeWidth||3,k=e.lineCapStyle||"round",T=e.lineType||"straight",_=()=>{if(T==="dashed"&&!e.strokeDashStyle)return`${A*2},${A*2}`;if(!(!e.strokeDashStyle||e.strokeDashStyle==="solid")){if(e.strokeDashStyle==="dashed")return`${A*4} ${A*3}`;if(e.strokeDashStyle==="dotted")return`${A*.5} ${A*2}`}};let H="";if(T==="straight"||T==="dashed")H=`M 0 0 L ${P} ${j}`;else if(T==="curved"){const I=P/2,D=j/2-M;H=`M 0 0 Q ${I} ${D} ${P} ${j}`}else if(T==="zigzag"){const D=P/5,N=10;let $="M 0 0";for(let W=1;W<=5;W++){const G=W%2===1?-N:N;$+=` L ${D*W} ${j/5*W+G}`}H=$}return i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation})`,opacity:e.opacity,style:{cursor:b,filter:R},onMouseDown:m,children:[i.jsx("path",{d:H,stroke:F,strokeWidth:A,strokeLinecap:k,strokeDasharray:_(),fill:"none"}),i.jsx("path",{d:H,stroke:"transparent",strokeWidth:Math.max(A+10,15),fill:"none"}),t&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:0,cy:0,r:4,fill:"#ccff00",stroke:"#000",strokeWidth:1}),i.jsx("circle",{cx:P,cy:j,r:4,fill:"#ccff00",stroke:"#000",strokeWidth:1}),T==="curved"&&i.jsx("circle",{cx:P/2,cy:j/2-M,r:3,fill:"#ff6600",stroke:"#000",strokeWidth:1})]})]})}if(e.type==="path"&&e.pathPoints&&e.pathPoints.length>0){const P=e.stroke||"#ffffff",j=e.strokeWidth||3,M=e.lineCapStyle||"round",F=e.solidFill!==!1?e.fill||"#ffffff":"none";let A=`M ${e.pathPoints[0].x} ${e.pathPoints[0].y}`;for(let k=1;k<e.pathPoints.length;k++){const T=e.pathPoints[k],_=e.pathPoints[k-1];_.cp2x!==void 0&&_.cp2y!==void 0&&T.cp1x!==void 0&&T.cp1y!==void 0?A+=` C ${_.cp2x} ${_.cp2y}, ${T.cp1x} ${T.cp1y}, ${T.x} ${T.y}`:_.cp2x!==void 0&&_.cp2y!==void 0?A+=` Q ${_.cp2x} ${_.cp2y}, ${T.x} ${T.y}`:A+=` L ${T.x} ${T.y}`}return e.pathClosed&&(A+=" Z"),i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation}) scale(${e.scaleX}, ${e.scaleY})`,opacity:e.opacity,style:{cursor:b,filter:R},onMouseDown:m,children:[i.jsx("path",{d:A,stroke:P,strokeWidth:j,strokeLinecap:M,strokeLinejoin:"round",fill:F}),i.jsx("path",{d:A,stroke:"transparent",strokeWidth:Math.max(j+10,15),fill:"none"}),t&&i.jsx(i.Fragment,{children:e.pathPoints.map((k,T)=>i.jsxs("g",{children:[i.jsx("circle",{cx:k.x,cy:k.y,r:4,fill:"#00d9ff",stroke:"#fff",strokeWidth:1.5}),k.cp1x!==void 0&&k.cp1y!==void 0&&i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:k.x,y1:k.y,x2:k.cp1x,y2:k.cp1y,stroke:"#ff6600",strokeWidth:1,strokeDasharray:"3,3"}),i.jsx("circle",{cx:k.cp1x,cy:k.cp1y,r:3,fill:"#ff6600",stroke:"#fff",strokeWidth:1})]}),k.cp2x!==void 0&&k.cp2y!==void 0&&i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:k.x,y1:k.y,x2:k.cp2x,y2:k.cp2y,stroke:"#ff6600",strokeWidth:1,strokeDasharray:"3,3"}),i.jsx("circle",{cx:k.cp2x,cy:k.cp2y,r:3,fill:"#ff6600",stroke:"#fff",strokeWidth:1})]})]},`point-${T}`))})]})}if(e.type==="image"&&e.src){const P=e.width*e.scaleX,j=e.height*e.scaleY,M=i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation}, ${P/2}, ${j/2})`,opacity:e.opacity,style:{cursor:b,filter:R},onMouseDown:m,children:[i.jsx("image",{href:e.src,width:P,height:j,preserveAspectRatio:"xMidYMid meet"}),t&&i.jsx("rect",{x:0,y:0,width:P,height:j,fill:"none",stroke:"#ccff00",strokeWidth:2,strokeDasharray:"4,2"})]});return O(M)}return null}function uf(){const e=f.useRef(null),t=f.useRef(null),[r,n]=f.useState({width:800,height:600}),[s,o]=f.useState(null),[l,a]=f.useState([]),[c,d]=f.useState(!1),[u,h]=f.useState(null),{objects:g,selectedId:p,selectedIds:y,selectObject:m,toggleSelectObject:x,updateObject:v,addObject:C,stageScale:w,setStageScale:b,saveToHistory:R,textureOverlays:O,showHardwareGuide:E,showRulers:P,activeTool:j,setActiveTool:M,backgroundColor:F}=be();f.useEffect(()=>{const L=()=>{e.current&&n({width:e.current.offsetWidth,height:e.current.offsetHeight})};return L(),window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]);const A=r.width/2-X*w/2,k=r.height/2-q*w/2,T=f.useCallback(L=>{L.preventDefault();const B=1.1,Z=w,J=L.deltaY<0?Z*B:Z/B;b(Math.max(.5,Math.min(3,J)))},[w,b]),_=f.useCallback(L=>{if(L.touches.length===2){L.preventDefault();const B=L.touches[0],Z=L.touches[1],J=Math.hypot(Z.clientX-B.clientX,Z.clientY-B.clientY);o(J)}},[]),H=f.useCallback(L=>{if(L.touches.length===2&&s){L.preventDefault();const B=L.touches[0],Z=L.touches[1],J=Math.hypot(Z.clientX-B.clientX,Z.clientY-B.clientY),Ee=J/s,He=w*Ee;b(Math.max(.5,Math.min(3,He))),o(J)}},[s,w,b]),I=f.useCallback(()=>{o(null)},[]),D=f.useCallback(L=>{var Z;L.preventDefault();const B=L.dataTransfer.getData("application/json");if(B)try{const J=JSON.parse(B),Ee=(Z=e.current)==null?void 0:Z.getBoundingClientRect();if(!Ee)return;const He=(L.clientX-Ee.left-A)/w,ye=(L.clientY-Ee.top-k)/w;C({type:J.type||"shape",x:He-(J.width||30)/2,y:ye-(J.height||30)/2,width:J.width||60,height:J.height||60,rotation:0,opacity:1,scaleX:1,scaleY:1,shapeType:J.shapeType,fill:J.fill||"#ffffff",text:J.text,fontSize:J.fontSize})}catch(J){console.error("Failed to parse drop data",J)}},[C,w,A,k]),N=f.useCallback(L=>{L.preventDefault()},[]),$=f.useCallback(L=>{j!=="pen"&&L.target===L.currentTarget&&m(null)},[m,j]),W=f.useCallback((L,B)=>{const Z=g.find(J=>J.id===L);if(Z!=null&&Z.locked){Y.error("Layer is locked",{description:"Unlock it in the Layers panel to edit"});return}B!=null&&B.shiftKey?x(L):m(L)},[m,x,g]),G=f.useCallback((L,B,Z,J,Ee,He)=>{M(null);const ye=[];if((L.match(/[MLQCmlqc][^MLQCmlqc]*/g)||[]).forEach(Xe=>{const pe=Xe[0],Q=Xe.slice(1).trim().split(/[\s,]+/).map(Number);pe==="M"||pe==="m"?ye.push({x:Q[0],y:Q[1]}):pe==="L"||pe==="l"?ye.push({x:Q[0],y:Q[1]}):pe==="Q"||pe==="q"?ye.push({x:Q[2],y:Q[3],cp1x:Q[0],cp1y:Q[1]}):(pe==="C"||pe==="c")&&ye.push({x:Q[4],y:Q[5],cp1x:Q[0],cp1y:Q[1],cp2x:Q[2],cp2y:Q[3]})}),ye.length>0){const Xe=ye.map(Bt=>Bt.x),pe=ye.map(Bt=>Bt.y),Q=Math.min(...Xe),Ao=Math.max(...Xe),Lr=Math.min(...pe),To=Math.max(...pe),$o=Ao-Q||B,Oo=To-Lr||B,st=B*2,Mo={type:"path",x:Q-st,y:Lr-st,width:$o+st*2,height:Oo+st*2,rotation:0,opacity:J,scaleX:1,scaleY:1,pathPoints:ye,pathClosed:!1,stroke:Z,strokeWidth:B,strokeDashStyle:Ee,fill:"none"};C(Mo),He==="draw"&&m(null)}},[C,M,m]),ae=O.filter(L=>L.enabled);return i.jsxs("div",{className:"relative flex-1 h-full overflow-hidden",ref:e,onDrop:D,onDragOver:N,onClick:$,onWheel:T,onTouchStart:_,onTouchMove:H,onTouchEnd:I,children:[i.jsx("div",{className:"absolute inset-0 dot-grid bg-background"}),i.jsxs("svg",{ref:t,className:"absolute inset-0",width:r.width,height:r.height,onClick:$,children:[i.jsxs("defs",{children:[i.jsx("clipPath",{id:"deck-clip",children:i.jsx("path",{d:lt(0,0),transform:`translate(${A}, ${k}) scale(${w})`})}),i.jsxs("pattern",{id:"scratched-wood-pattern",patternUnits:"userSpaceOnUse",width:"40",height:"40",children:[i.jsx("line",{x1:"0",y1:"5",x2:"40",y2:"6",stroke:"rgba(0,0,0,0.3)",strokeWidth:"0.5"}),i.jsx("line",{x1:"0",y1:"12",x2:"40",y2:"11",stroke:"rgba(0,0,0,0.2)",strokeWidth:"0.3"}),i.jsx("line",{x1:"0",y1:"20",x2:"40",y2:"21",stroke:"rgba(0,0,0,0.25)",strokeWidth:"0.4"}),i.jsx("line",{x1:"0",y1:"28",x2:"40",y2:"27",stroke:"rgba(0,0,0,0.3)",strokeWidth:"0.3"}),i.jsx("line",{x1:"0",y1:"35",x2:"40",y2:"36",stroke:"rgba(0,0,0,0.2)",strokeWidth:"0.5"}),i.jsx("line",{x1:"8",y1:"0",x2:"9",y2:"40",stroke:"rgba(0,0,0,0.15)",strokeWidth:"0.3"}),i.jsx("line",{x1:"22",y1:"0",x2:"21",y2:"40",stroke:"rgba(0,0,0,0.2)",strokeWidth:"0.2"})]}),i.jsxs("pattern",{id:"grip-tape-dust-pattern",patternUnits:"userSpaceOnUse",width:"30",height:"30",children:[i.jsx("circle",{cx:"5",cy:"8",r:"0.8",fill:"rgba(255,255,255,0.4)"}),i.jsx("circle",{cx:"12",cy:"3",r:"0.5",fill:"rgba(255,255,255,0.3)"}),i.jsx("circle",{cx:"22",cy:"12",r:"1",fill:"rgba(255,255,255,0.35)"}),i.jsx("circle",{cx:"8",cy:"18",r:"0.6",fill:"rgba(255,255,255,0.4)"}),i.jsx("circle",{cx:"26",cy:"22",r:"0.7",fill:"rgba(255,255,255,0.3)"}),i.jsx("circle",{cx:"15",cy:"26",r:"0.9",fill:"rgba(255,255,255,0.35)"})]}),i.jsx("pattern",{id:"halftone-dots-pattern",patternUnits:"userSpaceOnUse",width:"8",height:"8",children:i.jsx("circle",{cx:"4",cy:"4",r:"1.5",fill:"rgba(0,0,0,0.4)"})})]}),i.jsxs("g",{clipPath:"url(#deck-clip)",children:[i.jsx("path",{d:lt(0,0),transform:`translate(${A}, ${k}) scale(${w})`,fill:F}),i.jsxs("g",{transform:`translate(${A}, ${k}) scale(${w})`,children:[g.filter(L=>!L.hidden).map(L=>i.jsx(vs,{obj:L,isSelected:y.includes(L.id),onSelect:B=>W(L.id,B),onChange:B=>{v(L.id,B)},deckX:A,deckY:k,stageScale:w,onDragStart:()=>{R(),d(!0)},onDragMove:B=>{const Z=g.filter(Ee=>Ee.id!==B.id),J=Ol(B,Z,5);a(J)},onDragEnd:()=>{d(!1),a([])},onContextMenu:(B,Z)=>{h({x:B.clientX,y:B.clientY,objectId:Z})}},L.id)),p&&j!=="pen"&&!c&&(()=>{const L=g.find(B=>B.id===p);return!L||L.locked?null:i.jsx(Tl,{object:L,stageScale:w,deckX:A,deckY:k,onUpdate:B=>{v(p,B)},onStartTransform:()=>{R()},onEndTransform:()=>{}})})()]}),c&&i.jsx($l,{guides:l,deckX:A,deckY:k,stageScale:w}),i.jsx(Ml,{deckX:A,deckY:k,stageScale:w,enabled:P}),i.jsx("g",{transform:`translate(${A}, ${k}) scale(${w})`,children:i.jsx(Il,{deckX:A,deckY:k,stageScale:w})}),ae.map(L=>i.jsx("g",{style:{mixBlendMode:L.blendMode,opacity:L.opacity},children:i.jsx("path",{d:lt(0,0),transform:`translate(${A}, ${k}) scale(${w})`,fill:`url(#${L.id}-pattern)`})},L.id))]}),i.jsx("path",{d:lt(0,0),transform:`translate(${A}, ${k}) scale(${w})`,stroke:"#ccff00",strokeWidth:2,fill:"none",pointerEvents:"none"}),E&&j!=="pen"&&i.jsxs("g",{transform:`translate(${A}, ${k}) scale(${w})`,pointerEvents:"none",children:[i.jsx("rect",{x:X/2-20,y:35,width:40,height:18,fill:"rgba(255, 102, 0, 0.3)",stroke:"#ff6600",strokeWidth:1,strokeDasharray:"3,2"}),i.jsx("circle",{cx:X/2-12,cy:40,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:X/2+12,cy:40,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:X/2-12,cy:48,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:X/2+12,cy:48,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("rect",{x:X/2-20,y:q-53,width:40,height:18,fill:"rgba(255, 102, 0, 0.3)",stroke:"#ff6600",strokeWidth:1,strokeDasharray:"3,2"}),i.jsx("circle",{cx:X/2-12,cy:q-48,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:X/2+12,cy:q-48,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:X/2-12,cy:q-40,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:X/2+12,cy:q-40,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("text",{x:X/2,y:28,textAnchor:"middle",fontSize:6,fontFamily:"JetBrains Mono, monospace",fill:"#ff6600",children:"FRONT TRUCK"}),i.jsx("text",{x:X/2,y:q-58,textAnchor:"middle",fontSize:6,fontFamily:"JetBrains Mono, monospace",fill:"#ff6600",children:"REAR TRUCK"})]}),g.length===0&&j!=="pen"&&i.jsxs("g",{transform:`translate(${A}, ${k}) scale(${w})`,pointerEvents:"none",children:[i.jsx("text",{x:X/2,y:q/2-40,textAnchor:"middle",fontSize:16/w,fontFamily:"Oswald, sans-serif",fill:"#ccff00",fontWeight:"bold",children:"Welcome to DeckForge"}),i.jsx("text",{x:X/2,y:q/2-20,textAnchor:"middle",fontSize:11/w,fontFamily:"sans-serif",fill:"#888888",children:"Design your custom fingerboard deck"}),i.jsxs("g",{transform:`translate(${X/2-60}, ${q/2+10})`,children:[i.jsxs("g",{children:[i.jsx("rect",{x:0,y:0,width:35,height:35,fill:"rgba(204, 255, 0, 0.1)",stroke:"#ccff00",strokeWidth:1/w,rx:3/w}),i.jsx("text",{x:17.5,y:23,textAnchor:"middle",fontSize:20/w,fill:"#ccff00",children:"T"})]}),i.jsxs("g",{transform:"translate(40, 0)",children:[i.jsx("rect",{x:0,y:0,width:35,height:35,fill:"rgba(204, 255, 0, 0.1)",stroke:"#ccff00",strokeWidth:1/w,rx:3/w}),i.jsx("text",{x:17.5,y:23,textAnchor:"middle",fontSize:20/w,fill:"#ccff00",children:"S"})]}),i.jsxs("g",{transform:"translate(80, 0)",children:[i.jsx("rect",{x:0,y:0,width:35,height:35,fill:"rgba(204, 255, 0, 0.1)",stroke:"#ccff00",strokeWidth:1/w,rx:3/w}),i.jsx("text",{x:17.5,y:23,textAnchor:"middle",fontSize:20/w,fill:"#ccff00",children:"U"})]})]}),i.jsx("text",{x:X/2,y:q/2+60,textAnchor:"middle",fontSize:9/w,fontFamily:"monospace",fill:"#666666",children:"Press T for Text    S for Stickers    U to Upload"}),i.jsx("text",{x:X/2,y:q/2+75,textAnchor:"middle",fontSize:9/w,fontFamily:"monospace",fill:"#555555",children:"Or click the tool rail on the left"}),i.jsxs("g",{transform:`translate(-10, ${q/2})`,children:[i.jsx("path",{d:"M 0 0 L -15 -5 L -15 5 Z",fill:"#ccff00",opacity:.6}),i.jsx("line",{x1:-15,y1:0,x2:-30,y2:0,stroke:"#ccff00",strokeWidth:2/w,opacity:.6})]})]}),i.jsx(Al,{isActive:j==="pen",onComplete:G,onCancel:()=>M(null),stageRef:t,deckX:A,deckY:k,stageScale:w})]}),i.jsx(Pl,{}),u&&i.jsx(Dl,{x:u.x,y:u.y,objectId:u.objectId,onClose:()=>h(null)})]})}const Ul="http://localhost:3000",Ss="https://hvulzgcqdwurrhaebhyy.supabase.co",Wl="",ff=Di(Ss,Wl);let Rt=null;function Gt(e){Rt=e}function Bl(){return Rt}async function ee(e,t={}){const r={"Content-Type":"application/json",...t.headers};return Rt&&(r.Authorization=`Bearer ${Rt}`),await fetch(`${Ul}${e}`,{...t,headers:r})}const ct={async signup(e,t,r){var o;const n=await ee("/api/auth/signup",{method:"POST",body:JSON.stringify({email:e,password:t,username:r})});if(!n.ok){const l=await n.json();throw new Error(l.error||"Signup failed")}const s=await n.json();return(o=s.session)!=null&&o.access_token&&Gt(s.session.access_token),s},async login(e,t){var s;const r=await ee("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});if(!r.ok){const o=await r.json();throw new Error(o.error||"Login failed")}const n=await r.json();return(s=n.session)!=null&&s.access_token&&Gt(n.session.access_token),n},async logout(){const e=await ee("/api/auth/logout",{method:"POST"});if(!e.ok){const t=await e.json();throw new Error(t.error||"Logout failed")}return Gt(null),e.json()},async me(){const e=await ee("/api/auth/me");if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to get user")}return e.json()}},hf={async list(){const e=await ee("/api/designs");if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to list designs")}return e.json()},async get(e){const t=await ee(`/api/designs/${e}`);if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to get design")}return t.json()},async create(e){const t=await ee("/api/designs",{method:"POST",body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create design")}return t.json()},async update(e,t){const r=await ee(`/api/designs/${e}`,{method:"PATCH",body:JSON.stringify(t)});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to update design")}return r.json()},async delete(e){const t=await ee(`/api/designs/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete design")}return t.json()}},pf={async list(){const e=await ee("/api/assets");if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to list assets")}return e.json()},async getUploadUrl(e,t){const r=await ee("/api/assets/upload-url",{method:"POST",body:JSON.stringify({filename:e,contentType:t})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to get upload URL")}return r.json()},async create(e){const t=await ee("/api/assets",{method:"POST",body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create asset")}return t.json()},async delete(e){const t=await ee(`/api/assets/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete asset")}return t.json()},async upload(e){const{uploadUrl:t,path:r}=await this.getUploadUrl(e.name,e.type);if(!(await fetch(t,{method:"PUT",body:e,headers:{"Content-Type":e.type}})).ok)throw new Error("Failed to upload file");const s=await zl(e),o=`${Ss}/storage/v1/object/public/user-assets/${r}`;return await this.create({name:e.name,file_url:o,file_type:e.type,file_size:e.size,width:s.width,height:s.height}),{url:o,width:s.width,height:s.height}}};function zl(e){return new Promise((t,r)=>{const n=new Image,s=URL.createObjectURL(e);n.onload=()=>{URL.revokeObjectURL(s),t({width:n.width,height:n.height})},n.onerror=()=>{URL.revokeObjectURL(s),r(new Error("Failed to load image"))},n.src=s})}const dt={async list(){const e=await ee("/api/brand-kits");if(!e.ok)throw new Error("Failed to list brand kits");return e.json()},async create(e){const t=await ee("/api/brand-kits",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create brand kit");return t.json()},async update(e,t){const r=await ee(`/api/brand-kits/${e}`,{method:"PATCH",body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update brand kit");return r.json()},async delete(e){const t=await ee(`/api/brand-kits/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete brand kit");return t.json()}};function Hl(e,t){let r;try{r=e()}catch{return}return{getItem:s=>{var o;const l=c=>c===null?null:JSON.parse(c,void 0),a=(o=r.getItem(s))!=null?o:null;return a instanceof Promise?a.then(l):l(a)},setItem:(s,o)=>r.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>r.removeItem(s)}}const pr=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return pr(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return pr(n)(r)}}}},Xl=(e,t)=>(r,n,s)=>{let o={storage:Hl(()=>localStorage),partialize:x=>x,version:0,merge:(x,v)=>({...v,...x}),...t},l=!1,a=0;const c=new Set,d=new Set;let u=o.storage;if(!u)return e((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...x)},n,s);const h=()=>{const x=o.partialize({...n()});return u.setItem(o.name,{state:x,version:o.version})},g=s.setState;s.setState=(x,v)=>(g(x,v),h());const p=e((...x)=>(r(...x),h()),n,s);s.getInitialState=()=>p;let y;const m=()=>{var x,v;if(!u)return;const C=++a;l=!1,c.forEach(b=>{var R;return b((R=n())!=null?R:p)});const w=((v=o.onRehydrateStorage)==null?void 0:v.call(o,(x=n())!=null?x:p))||void 0;return pr(u.getItem.bind(u))(o.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==o.version){if(o.migrate){const R=o.migrate(b.state,b.version);return R instanceof Promise?R.then(O=>[!0,O]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var R;if(C!==a)return;const[O,E]=b;if(y=o.merge(E,(R=n())!=null?R:p),r(y,!0),O)return h()}).then(()=>{C===a&&(w==null||w(y,void 0),y=n(),l=!0,d.forEach(b=>b(y)))}).catch(b=>{C===a&&(w==null||w(void 0,b))})};return s.persist={setOptions:x=>{o={...o,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>m(),hasHydrated:()=>l,onHydrate:x=>(c.add(x),()=>{c.delete(x)}),onFinishHydration:x=>(d.add(x),()=>{d.delete(x)})},o.skipHydration||m(),y||p},Yl=Xl,Vl=os()(Yl((e,t)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,signup:async(r,n,s)=>{e({isLoading:!0,error:null});try{const o=await ct.signup(r,n,s);e({user:o.user,isAuthenticated:!0,isLoading:!1})}catch(o){throw e({error:o instanceof Error?o.message:"Signup failed",isLoading:!1}),o}},login:async(r,n)=>{e({isLoading:!0,error:null});try{const s=await ct.login(r,n);e({user:s.user,isAuthenticated:!0,isLoading:!1})}catch(s){throw e({error:s instanceof Error?s.message:"Login failed",isLoading:!1}),s}},logout:async()=>{e({isLoading:!0,error:null});try{await ct.logout(),e({user:null,isAuthenticated:!1,isLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Logout failed",isLoading:!1})}},checkAuth:async()=>{if(!Bl()){e({isAuthenticated:!1,user:null});return}e({isLoading:!0});try{const n=await ct.me();e({user:n.user,isAuthenticated:!0,isLoading:!1})}catch{e({user:null,isAuthenticated:!1,isLoading:!1})}},clearError:()=>e({error:null})}),{name:"deckforge-auth",partialize:e=>({})})),fe=f.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));fe.displayName="Input";var Gl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ql=Gl.reduce((e,t)=>{const r=ss(`Primitive.${t}`),n=f.forwardRef((s,o)=>{const{asChild:l,...a}=s,c=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...a,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Kl="Label",Es=f.forwardRef((e,t)=>i.jsx(ql.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Es.displayName=Kl;var ks=Es;const Jl=Jn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),me=f.forwardRef(({className:e,...t},r)=>i.jsx(ks,{ref:r,className:ie(Jl(),e),...t}));me.displayName=ks.displayName;function Ns(e,t){return function(){return e.apply(t,arguments)}}const{toString:Zl}=Object.prototype,{getPrototypeOf:Rr}=Object,{iterator:Dt,toStringTag:Cs}=Symbol,It=(e=>t=>{const r=Zl.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ge=e=>(e=e.toLowerCase(),t=>It(t)===e),_t=e=>t=>typeof t===e,{isArray:ze}=Array,We=_t("undefined");function Qe(e){return e!==null&&!We(e)&&e.constructor!==null&&!We(e.constructor)&&ne(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Rs=ge("ArrayBuffer");function Ql(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Rs(e.buffer),t}const ec=_t("string"),ne=_t("function"),js=_t("number"),et=e=>e!==null&&typeof e=="object",tc=e=>e===!0||e===!1,yt=e=>{if(It(e)!=="object")return!1;const t=Rr(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Cs in e)&&!(Dt in e)},rc=e=>{if(!et(e)||Qe(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},nc=ge("Date"),sc=ge("File"),oc=ge("Blob"),ic=ge("FileList"),ac=e=>et(e)&&ne(e.pipe),lc=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ne(e.append)&&((t=It(e))==="formdata"||t==="object"&&ne(e.toString)&&e.toString()==="[object FormData]"))},cc=ge("URLSearchParams"),[dc,uc,fc,hc]=["ReadableStream","Request","Response","Headers"].map(ge),pc=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tt(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),ze(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(Qe(e))return;const o=r?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let a;for(n=0;n<l;n++)a=o[n],t.call(null,e[a],a,e)}}function Ps(e,t){if(Qe(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const Ae=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,As=e=>!We(e)&&e!==Ae;function mr(){const{caseless:e,skipUndefined:t}=As(this)&&this||{},r={},n=(s,o)=>{const l=e&&Ps(r,o)||o;yt(r[l])&&yt(s)?r[l]=mr(r[l],s):yt(s)?r[l]=mr({},s):ze(s)?r[l]=s.slice():(!t||!We(s))&&(r[l]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&tt(arguments[s],n);return r}const mc=(e,t,r,{allOwnKeys:n}={})=>(tt(t,(s,o)=>{r&&ne(s)?Object.defineProperty(e,o,{value:Ns(s,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e),gc=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),xc=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},yc=(e,t,r,n)=>{let s,o,l;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)l=s[o],(!n||n(l,e,t))&&!a[l]&&(t[l]=e[l],a[l]=!0);e=r!==!1&&Rr(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},wc=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},bc=e=>{if(!e)return null;if(ze(e))return e;let t=e.length;if(!js(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},vc=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Rr(Uint8Array)),Sc=(e,t)=>{const n=(e&&e[Dt]).call(e);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},Ec=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},kc=ge("HTMLFormElement"),Nc=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),nn=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Cc=ge("RegExp"),Ts=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};tt(r,(s,o)=>{let l;(l=t(s,o,e))!==!1&&(n[o]=l||s)}),Object.defineProperties(e,n)},Rc=e=>{Ts(e,(t,r)=>{if(ne(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(ne(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},jc=(e,t)=>{const r={},n=s=>{s.forEach(o=>{r[o]=!0})};return ze(e)?n(e):n(String(e).split(t)),r},Pc=()=>{},Ac=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Tc(e){return!!(e&&ne(e.append)&&e[Cs]==="FormData"&&e[Dt])}const $c=e=>{const t=new Array(10),r=(n,s)=>{if(et(n)){if(t.indexOf(n)>=0)return;if(Qe(n))return n;if(!("toJSON"in n)){t[s]=n;const o=ze(n)?[]:{};return tt(n,(l,a)=>{const c=r(l,s+1);!We(c)&&(o[a]=c)}),t[s]=void 0,o}}return n};return r(e,0)},Oc=ge("AsyncFunction"),Mc=e=>e&&(et(e)||ne(e))&&ne(e.then)&&ne(e.catch),$s=((e,t)=>e?setImmediate:t?((r,n)=>(Ae.addEventListener("message",({source:s,data:o})=>{s===Ae&&o===r&&n.length&&n.shift()()},!1),s=>{n.push(s),Ae.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ne(Ae.postMessage)),Dc=typeof queueMicrotask<"u"?queueMicrotask.bind(Ae):typeof process<"u"&&process.nextTick||$s,Ic=e=>e!=null&&ne(e[Dt]),S={isArray:ze,isArrayBuffer:Rs,isBuffer:Qe,isFormData:lc,isArrayBufferView:Ql,isString:ec,isNumber:js,isBoolean:tc,isObject:et,isPlainObject:yt,isEmptyObject:rc,isReadableStream:dc,isRequest:uc,isResponse:fc,isHeaders:hc,isUndefined:We,isDate:nc,isFile:sc,isBlob:oc,isRegExp:Cc,isFunction:ne,isStream:ac,isURLSearchParams:cc,isTypedArray:vc,isFileList:ic,forEach:tt,merge:mr,extend:mc,trim:pc,stripBOM:gc,inherits:xc,toFlatObject:yc,kindOf:It,kindOfTest:ge,endsWith:wc,toArray:bc,forEachEntry:Sc,matchAll:Ec,isHTMLForm:kc,hasOwnProperty:nn,hasOwnProp:nn,reduceDescriptors:Ts,freezeMethods:Rc,toObjectSet:jc,toCamelCase:Nc,noop:Pc,toFiniteNumber:Ac,findKey:Ps,global:Ae,isContextDefined:As,isSpecCompliantForm:Tc,toJSONObject:$c,isAsyncFn:Oc,isThenable:Mc,setImmediate:$s,asap:Dc,isIterable:Ic};let U=class Os extends Error{static from(t,r,n,s,o,l){const a=new Os(t.message,r||t.code,n,s,o);return a.cause=t,a.name=t.name,l&&Object.assign(a,l),a}constructor(t,r,n,s,o){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.status}}};U.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";U.ERR_BAD_OPTION="ERR_BAD_OPTION";U.ECONNABORTED="ECONNABORTED";U.ETIMEDOUT="ETIMEDOUT";U.ERR_NETWORK="ERR_NETWORK";U.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";U.ERR_DEPRECATED="ERR_DEPRECATED";U.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";U.ERR_BAD_REQUEST="ERR_BAD_REQUEST";U.ERR_CANCELED="ERR_CANCELED";U.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";U.ERR_INVALID_URL="ERR_INVALID_URL";const _c=null;function gr(e){return S.isPlainObject(e)||S.isArray(e)}function Ms(e){return S.endsWith(e,"[]")?e.slice(0,-2):e}function sn(e,t,r){return e?e.concat(t).map(function(s,o){return s=Ms(s),!r&&o?"["+s+"]":s}).join(r?".":""):t}function Lc(e){return S.isArray(e)&&!e.some(gr)}const Fc=S.toFlatObject(S,{},null,function(t){return/^is[A-Z]/.test(t)});function Lt(e,t,r){if(!S.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=S.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,x){return!S.isUndefined(x[m])});const n=r.metaTokens,s=r.visitor||u,o=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(t);if(!S.isFunction(s))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(S.isDate(y))return y.toISOString();if(S.isBoolean(y))return y.toString();if(!c&&S.isBlob(y))throw new U("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(y)||S.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,m,x){let v=y;if(y&&!x&&typeof y=="object"){if(S.endsWith(m,"{}"))m=n?m:m.slice(0,-2),y=JSON.stringify(y);else if(S.isArray(y)&&Lc(y)||(S.isFileList(y)||S.endsWith(m,"[]"))&&(v=S.toArray(y)))return m=Ms(m),v.forEach(function(w,b){!(S.isUndefined(w)||w===null)&&t.append(l===!0?sn([m],b,o):l===null?m:m+"[]",d(w))}),!1}return gr(y)?!0:(t.append(sn(x,m,o),d(y)),!1)}const h=[],g=Object.assign(Fc,{defaultVisitor:u,convertValue:d,isVisitable:gr});function p(y,m){if(!S.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(y),S.forEach(y,function(v,C){(!(S.isUndefined(v)||v===null)&&s.call(t,v,S.isString(C)?C.trim():C,m,g))===!0&&p(v,m?m.concat(C):[C])}),h.pop()}}if(!S.isObject(e))throw new TypeError("data must be an object");return p(e),t}function on(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function jr(e,t){this._pairs=[],e&&Lt(e,this,t)}const Ds=jr.prototype;Ds.append=function(t,r){this._pairs.push([t,r])};Ds.toString=function(t){const r=t?function(n){return t.call(this,n,on)}:on;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Uc(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Is(e,t,r){if(!t)return e;const n=r&&r.encode||Uc,s=S.isFunction(r)?{serialize:r}:r,o=s&&s.serialize;let l;if(o?l=o(t,s):l=S.isURLSearchParams(t)?t.toString():new jr(t,s).toString(n),l){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class an{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){S.forEach(this.handlers,function(n){n!==null&&t(n)})}}const _s={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wc=typeof URLSearchParams<"u"?URLSearchParams:jr,Bc=typeof FormData<"u"?FormData:null,zc=typeof Blob<"u"?Blob:null,Hc={isBrowser:!0,classes:{URLSearchParams:Wc,FormData:Bc,Blob:zc},protocols:["http","https","file","blob","url","data"]},Pr=typeof window<"u"&&typeof document<"u",xr=typeof navigator=="object"&&navigator||void 0,Xc=Pr&&(!xr||["ReactNative","NativeScript","NS"].indexOf(xr.product)<0),Yc=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Vc=Pr&&window.location.href||"http://localhost",Gc=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pr,hasStandardBrowserEnv:Xc,hasStandardBrowserWebWorkerEnv:Yc,navigator:xr,origin:Vc},Symbol.toStringTag,{value:"Module"})),te={...Gc,...Hc};function qc(e,t){return Lt(e,new te.classes.URLSearchParams,{visitor:function(r,n,s,o){return te.isNode&&S.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function Kc(e){return S.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Jc(e){const t={},r=Object.keys(e);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],t[o]=e[o];return t}function Ls(e){function t(r,n,s,o){let l=r[o++];if(l==="__proto__")return!0;const a=Number.isFinite(+l),c=o>=r.length;return l=!l&&S.isArray(s)?s.length:l,c?(S.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!a):((!s[l]||!S.isObject(s[l]))&&(s[l]=[]),t(r,n,s[l],o)&&S.isArray(s[l])&&(s[l]=Jc(s[l])),!a)}if(S.isFormData(e)&&S.isFunction(e.entries)){const r={};return S.forEachEntry(e,(n,s)=>{t(Kc(n),s,r,0)}),r}return null}function Zc(e,t,r){if(S.isString(e))try{return(t||JSON.parse)(e),S.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const rt={transitional:_s,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=S.isObject(t);if(o&&S.isHTMLForm(t)&&(t=new FormData(t)),S.isFormData(t))return s?JSON.stringify(Ls(t)):t;if(S.isArrayBuffer(t)||S.isBuffer(t)||S.isStream(t)||S.isFile(t)||S.isBlob(t)||S.isReadableStream(t))return t;if(S.isArrayBufferView(t))return t.buffer;if(S.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qc(t,this.formSerializer).toString();if((a=S.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Lt(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),Zc(t)):t}],transformResponse:[function(t){const r=this.transitional||rt.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(S.isResponse(t)||S.isReadableStream(t))return t;if(t&&S.isString(t)&&(n&&!this.responseType||s)){const l=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(a){if(l)throw a.name==="SyntaxError"?U.from(a,U.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:te.classes.FormData,Blob:te.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};S.forEach(["delete","get","head","post","put","patch"],e=>{rt.headers[e]={}});const Qc=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ed=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),r=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!r||t[r]&&Qc[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},ln=Symbol("internals");function Ge(e){return e&&String(e).trim().toLowerCase()}function wt(e){return e===!1||e==null?e:S.isArray(e)?e.map(wt):String(e)}function td(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const rd=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function qt(e,t,r,n,s){if(S.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!S.isString(t)){if(S.isString(n))return t.indexOf(n)!==-1;if(S.isRegExp(n))return n.test(t)}}function nd(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function sd(e,t){const r=S.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,o,l){return this[n].call(this,t,s,o,l)},configurable:!0})})}let se=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function o(a,c,d){const u=Ge(c);if(!u)throw new Error("header name must be a non-empty string");const h=S.findKey(s,u);(!h||s[h]===void 0||d===!0||d===void 0&&s[h]!==!1)&&(s[h||c]=wt(a))}const l=(a,c)=>S.forEach(a,(d,u)=>o(d,u,c));if(S.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(S.isString(t)&&(t=t.trim())&&!rd(t))l(ed(t),r);else if(S.isObject(t)&&S.isIterable(t)){let a={},c,d;for(const u of t){if(!S.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[d=u[0]]=(c=a[d])?S.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(a,r)}else t!=null&&o(r,t,n);return this}get(t,r){if(t=Ge(t),t){const n=S.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return td(s);if(S.isFunction(r))return r.call(this,s,n);if(S.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Ge(t),t){const n=S.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||qt(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function o(l){if(l=Ge(l),l){const a=S.findKey(n,l);a&&(!r||qt(n,n[a],a,r))&&(delete n[a],s=!0)}}return S.isArray(t)?t.forEach(o):o(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const o=r[n];(!t||qt(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const r=this,n={};return S.forEach(this,(s,o)=>{const l=S.findKey(n,o);if(l){r[l]=wt(s),delete r[o];return}const a=t?nd(o):String(o).trim();a!==o&&delete r[o],r[a]=wt(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return S.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&S.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[ln]=this[ln]={accessors:{}}).accessors,s=this.prototype;function o(l){const a=Ge(l);n[a]||(sd(s,l),n[a]=!0)}return S.isArray(t)?t.forEach(o):o(t),this}};se.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);S.reduceDescriptors(se.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});S.freezeMethods(se);function Kt(e,t){const r=this||rt,n=t||r,s=se.from(n.headers);let o=n.data;return S.forEach(e,function(a){o=a.call(r,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Fs(e){return!!(e&&e.__CANCEL__)}let nt=class extends U{constructor(t,r,n){super(t??"canceled",U.ERR_CANCELED,r,n),this.name="CanceledError",this.__CANCEL__=!0}};function Us(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new U("Request failed with status code "+r.status,[U.ERR_BAD_REQUEST,U.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function od(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function id(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,o=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[o];l||(l=d),r[s]=c,n[s]=d;let h=o,g=0;for(;h!==s;)g+=r[h++],h=h%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),d-l<t)return;const p=u&&d-u;return p?Math.round(g*1e3/p):void 0}}function ad(e,t){let r=0,n=1e3/t,s,o;const l=(d,u=Date.now())=>{r=u,s=null,o&&(clearTimeout(o),o=null),e(...d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?l(d,u):(s=d,o||(o=setTimeout(()=>{o=null,l(s)},n-h)))},()=>s&&l(s)]}const jt=(e,t,r=3)=>{let n=0;const s=id(50,250);return ad(o=>{const l=o.loaded,a=o.lengthComputable?o.total:void 0,c=l-n,d=s(c),u=l<=a;n=l;const h={loaded:l,total:a,progress:a?l/a:void 0,bytes:c,rate:d||void 0,estimated:d&&a&&u?(a-l)/d:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(h)},r)},cn=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},dn=e=>(...t)=>S.asap(()=>e(...t)),ld=te.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,te.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(te.origin),te.navigator&&/(msie|trident)/i.test(te.navigator.userAgent)):()=>!0,cd=te.hasStandardBrowserEnv?{write(e,t,r,n,s,o,l){if(typeof document>"u")return;const a=[`${e}=${encodeURIComponent(t)}`];S.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),S.isString(n)&&a.push(`path=${n}`),S.isString(s)&&a.push(`domain=${s}`),o===!0&&a.push("secure"),S.isString(l)&&a.push(`SameSite=${l}`),document.cookie=a.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function dd(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ud(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ws(e,t,r){let n=!dd(t);return e&&(n||r==!1)?ud(e,t):t}const un=e=>e instanceof se?{...e}:e;function $e(e,t){t=t||{};const r={};function n(d,u,h,g){return S.isPlainObject(d)&&S.isPlainObject(u)?S.merge.call({caseless:g},d,u):S.isPlainObject(u)?S.merge({},u):S.isArray(u)?u.slice():u}function s(d,u,h,g){if(S.isUndefined(u)){if(!S.isUndefined(d))return n(void 0,d,h,g)}else return n(d,u,h,g)}function o(d,u){if(!S.isUndefined(u))return n(void 0,u)}function l(d,u){if(S.isUndefined(u)){if(!S.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function a(d,u,h){if(h in t)return n(d,u);if(h in e)return n(void 0,d)}const c={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:a,headers:(d,u,h)=>s(un(d),un(u),h,!0)};return S.forEach(Object.keys({...e,...t}),function(u){const h=c[u]||s,g=h(e[u],t[u],u);S.isUndefined(g)&&h!==a||(r[u]=g)}),r}const Bs=e=>{const t=$e({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:a}=t;if(t.headers=l=se.from(l),t.url=Is(Ws(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&l.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),S.isFormData(r)){if(te.hasStandardBrowserEnv||te.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(S.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,h])=>{d.includes(u.toLowerCase())&&l.set(u,h)})}}if(te.hasStandardBrowserEnv&&(n&&S.isFunction(n)&&(n=n(t)),n||n!==!1&&ld(t.url))){const c=s&&o&&cd.read(o);c&&l.set(s,c)}return t},fd=typeof XMLHttpRequest<"u",hd=fd&&function(e){return new Promise(function(r,n){const s=Bs(e);let o=s.data;const l=se.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:d}=s,u,h,g,p,y;function m(){p&&p(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function v(){if(!x)return;const w=se.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:w,config:e,request:x};Us(function(E){r(E),m()},function(E){n(E),m()},R),x=null}"onloadend"in x?x.onloadend=v:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(v)},x.onabort=function(){x&&(n(new U("Request aborted",U.ECONNABORTED,e,x)),x=null)},x.onerror=function(b){const R=b&&b.message?b.message:"Network Error",O=new U(R,U.ERR_NETWORK,e,x);O.event=b||null,n(O),x=null},x.ontimeout=function(){let b=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const R=s.transitional||_s;s.timeoutErrorMessage&&(b=s.timeoutErrorMessage),n(new U(b,R.clarifyTimeoutError?U.ETIMEDOUT:U.ECONNABORTED,e,x)),x=null},o===void 0&&l.setContentType(null),"setRequestHeader"in x&&S.forEach(l.toJSON(),function(b,R){x.setRequestHeader(R,b)}),S.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),a&&a!=="json"&&(x.responseType=s.responseType),d&&([g,y]=jt(d,!0),x.addEventListener("progress",g)),c&&x.upload&&([h,p]=jt(c),x.upload.addEventListener("progress",h),x.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=w=>{x&&(n(!w||w.type?new nt(null,e,x):w),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const C=od(s.url);if(C&&te.protocols.indexOf(C)===-1){n(new U("Unsupported protocol "+C+":",U.ERR_BAD_REQUEST,e));return}x.send(o||null)})},pd=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const o=function(d){if(!s){s=!0,a();const u=d instanceof Error?d:this.reason;n.abort(u instanceof U?u:new nt(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,o(new U(`timeout of ${t}ms exceeded`,U.ETIMEDOUT))},t);const a=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>S.asap(a),c}},md=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},gd=async function*(e,t){for await(const r of xd(e))yield*md(r,t)},xd=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},fn=(e,t,r,n)=>{const s=gd(e,t);let o=0,l,a=c=>{l||(l=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){a(),c.close();return}let h=u.byteLength;if(r){let g=o+=h;r(g)}c.enqueue(new Uint8Array(u))}catch(d){throw a(d),d}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},hn=64*1024,{isFunction:ut}=S,yd=(({Request:e,Response:t})=>({Request:e,Response:t}))(S.global),{ReadableStream:pn,TextEncoder:mn}=S.global,gn=(e,...t)=>{try{return!!e(...t)}catch{return!1}},wd=e=>{e=S.merge.call({skipUndefined:!0},yd,e);const{fetch:t,Request:r,Response:n}=e,s=t?ut(t):typeof fetch=="function",o=ut(r),l=ut(n);if(!s)return!1;const a=s&&ut(pn),c=s&&(typeof mn=="function"?(y=>m=>y.encode(m))(new mn):async y=>new Uint8Array(await new r(y).arrayBuffer())),d=o&&a&&gn(()=>{let y=!1;const m=new r(te.origin,{body:new pn,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!m}),u=l&&a&&gn(()=>S.isReadableStream(new n("").body)),h={stream:u&&(y=>y.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!h[y]&&(h[y]=(m,x)=>{let v=m&&m[y];if(v)return v.call(m);throw new U(`Response type '${y}' is not supported`,U.ERR_NOT_SUPPORT,x)})});const g=async y=>{if(y==null)return 0;if(S.isBlob(y))return y.size;if(S.isSpecCompliantForm(y))return(await new r(te.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(S.isArrayBufferView(y)||S.isArrayBuffer(y))return y.byteLength;if(S.isURLSearchParams(y)&&(y=y+""),S.isString(y))return(await c(y)).byteLength},p=async(y,m)=>{const x=S.toFiniteNumber(y.getContentLength());return x??g(m)};return async y=>{let{url:m,method:x,data:v,signal:C,cancelToken:w,timeout:b,onDownloadProgress:R,onUploadProgress:O,responseType:E,headers:P,withCredentials:j="same-origin",fetchOptions:M}=Bs(y),F=t||fetch;E=E?(E+"").toLowerCase():"text";let A=pd([C,w&&w.toAbortSignal()],b),k=null;const T=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let _;try{if(O&&d&&x!=="get"&&x!=="head"&&(_=await p(P,v))!==0){let W=new r(m,{method:"POST",body:v,duplex:"half"}),G;if(S.isFormData(v)&&(G=W.headers.get("content-type"))&&P.setContentType(G),W.body){const[ae,L]=cn(_,jt(dn(O)));v=fn(W.body,hn,ae,L)}}S.isString(j)||(j=j?"include":"omit");const H=o&&"credentials"in r.prototype,I={...M,signal:A,method:x.toUpperCase(),headers:P.normalize().toJSON(),body:v,duplex:"half",credentials:H?j:void 0};k=o&&new r(m,I);let D=await(o?F(k,M):F(m,I));const N=u&&(E==="stream"||E==="response");if(u&&(R||N&&T)){const W={};["status","statusText","headers"].forEach(B=>{W[B]=D[B]});const G=S.toFiniteNumber(D.headers.get("content-length")),[ae,L]=R&&cn(G,jt(dn(R),!0))||[];D=new n(fn(D.body,hn,ae,()=>{L&&L(),T&&T()}),W)}E=E||"text";let $=await h[S.findKey(h,E)||"text"](D,y);return!N&&T&&T(),await new Promise((W,G)=>{Us(W,G,{data:$,headers:se.from(D.headers),status:D.status,statusText:D.statusText,config:y,request:k})})}catch(H){throw T&&T(),H&&H.name==="TypeError"&&/Load failed|fetch/i.test(H.message)?Object.assign(new U("Network Error",U.ERR_NETWORK,y,k),{cause:H.cause||H}):U.from(H,H&&H.code,y,k)}}},bd=new Map,zs=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:s}=t,o=[n,s,r];let l=o.length,a=l,c,d,u=bd;for(;a--;)c=o[a],d=u.get(c),d===void 0&&u.set(c,d=a?new Map:wd(t)),u=d;return d};zs();const Ar={http:_c,xhr:hd,fetch:{get:zs}};S.forEach(Ar,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const xn=e=>`- ${e}`,vd=e=>S.isFunction(e)||e===null||e===!1;function Sd(e,t){e=S.isArray(e)?e:[e];const{length:r}=e;let n,s;const o={};for(let l=0;l<r;l++){n=e[l];let a;if(s=n,!vd(n)&&(s=Ar[(a=String(n)).toLowerCase()],s===void 0))throw new U(`Unknown adapter '${a}'`);if(s&&(S.isFunction(s)||(s=s.get(t))))break;o[a||"#"+l]=s}if(!s){const l=Object.entries(o).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let a=r?l.length>1?`since :
`+l.map(xn).join(`
`):" "+xn(l[0]):"as no adapter specified";throw new U("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s}const Hs={getAdapter:Sd,adapters:Ar};function Jt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nt(null,e)}function yn(e){return Jt(e),e.headers=se.from(e.headers),e.data=Kt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Hs.getAdapter(e.adapter||rt.adapter,e)(e).then(function(n){return Jt(e),n.data=Kt.call(e,e.transformResponse,n),n.headers=se.from(n.headers),n},function(n){return Fs(n)||(Jt(e),n&&n.response&&(n.response.data=Kt.call(e,e.transformResponse,n.response),n.response.headers=se.from(n.response.headers))),Promise.reject(n)})}const Xs="1.13.4",Ft={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ft[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const wn={};Ft.transitional=function(t,r,n){function s(o,l){return"[Axios v"+Xs+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,a)=>{if(t===!1)throw new U(s(l," has been removed"+(r?" in "+r:"")),U.ERR_DEPRECATED);return r&&!wn[l]&&(wn[l]=!0,console.warn(s(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,l,a):!0}};Ft.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Ed(e,t,r){if(typeof e!="object")throw new U("options must be an object",U.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const o=n[s],l=t[o];if(l){const a=e[o],c=a===void 0||l(a,o,e);if(c!==!0)throw new U("option "+o+" must be "+c,U.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new U("Unknown option "+o,U.ERR_BAD_OPTION)}}const bt={assertOptions:Ed,validators:Ft},we=bt.validators;let Te=class{constructor(t){this.defaults=t||{},this.interceptors={request:new an,response:new an}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=$e(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&bt.assertOptions(n,{silentJSONParsing:we.transitional(we.boolean),forcedJSONParsing:we.transitional(we.boolean),clarifyTimeoutError:we.transitional(we.boolean)},!1),s!=null&&(S.isFunction(s)?r.paramsSerializer={serialize:s}:bt.assertOptions(s,{encode:we.function,serialize:we.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),bt.assertOptions(r,{baseUrl:we.spelling("baseURL"),withXsrfToken:we.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=o&&S.merge(o.common,o[r.method]);o&&S.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),r.headers=se.concat(l,o);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const d=[];this.interceptors.response.forEach(function(m){d.push(m.fulfilled,m.rejected)});let u,h=0,g;if(!c){const y=[yn.bind(this),void 0];for(y.unshift(...a),y.push(...d),g=y.length,u=Promise.resolve(r);h<g;)u=u.then(y[h++],y[h++]);return u}g=a.length;let p=r;for(;h<g;){const y=a[h++],m=a[h++];try{p=y(p)}catch(x){m.call(this,x);break}}try{u=yn.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,g=d.length;h<g;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=$e(this.defaults,t);const r=Ws(t.baseURL,t.url,t.allowAbsoluteUrls);return Is(r,t.params,t.paramsSerializer)}};S.forEach(["delete","get","head","options"],function(t){Te.prototype[t]=function(r,n){return this.request($e(n||{},{method:t,url:r,data:(n||{}).data}))}});S.forEach(["post","put","patch"],function(t){function r(n){return function(o,l,a){return this.request($e(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Te.prototype[t]=r(),Te.prototype[t+"Form"]=r(!0)});let kd=class Ys{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(a=>{n.subscribe(a),o=a}).then(s);return l.cancel=function(){n.unsubscribe(o)},l},t(function(o,l,a){n.reason||(n.reason=new nt(o,l,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Ys(function(s){t=s}),cancel:t}}};function Nd(e){return function(r){return e.apply(null,r)}}function Cd(e){return S.isObject(e)&&e.isAxiosError===!0}const yr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(yr).forEach(([e,t])=>{yr[t]=e});function Vs(e){const t=new Te(e),r=Ns(Te.prototype.request,t);return S.extend(r,Te.prototype,t,{allOwnKeys:!0}),S.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return Vs($e(e,s))},r}const V=Vs(rt);V.Axios=Te;V.CanceledError=nt;V.CancelToken=kd;V.isCancel=Fs;V.VERSION=Xs;V.toFormData=Lt;V.AxiosError=U;V.Cancel=V.CanceledError;V.all=function(t){return Promise.all(t)};V.spread=Nd;V.isAxiosError=Cd;V.mergeConfig=$e;V.AxiosHeaders=se;V.formToJSON=e=>Ls(S.isHTMLForm(e)?new FormData(e):e);V.getAdapter=Hs.getAdapter;V.HttpStatusCode=yr;V.default=V;const{Axios:yf,AxiosError:wf,CanceledError:bf,isCancel:vf,CancelToken:Sf,VERSION:Ef,all:kf,Cancel:Nf,isAxiosError:Cf,spread:Rf,toFormData:jf,AxiosHeaders:Pf,HttpStatusCode:Af,formToJSON:Tf,getAdapter:$f,mergeConfig:Of}=V,qe="http://localhost:3000",vt={async list(){const e=localStorage.getItem("token");return(await V.get(`${qe}/fonts`,{headers:{Authorization:`Bearer ${e}`}})).data.fonts},async getUploadUrl(e,t){const r=localStorage.getItem("token");return(await V.post(`${qe}/fonts/upload-url`,{filename:e,contentType:t},{headers:{Authorization:`Bearer ${r}`}})).data},async uploadFile(e,t){await V.put(e,t,{headers:{"Content-Type":t.type}})},async create(e){const t=localStorage.getItem("token");return(await V.post(`${qe}/fonts`,e,{headers:{Authorization:`Bearer ${t}`}})).data.font},async delete(e){const t=localStorage.getItem("token");await V.delete(`${qe}/fonts/${e}`,{headers:{Authorization:`Bearer ${t}`}})},async uploadFont(e,t){const{uploadUrl:r,path:n}=await this.getUploadUrl(e.name,e.type);await this.uploadFile(r,e);const s=t.replace(/\s+/g,"-").toLowerCase(),o=`${qe.replace("/api","")}/storage/v1/object/public/user-assets/${n}`;return await this.create({name:t,file_url:o,font_family:s,file_type:e.type,file_size:e.size})}};function Gs(e){return new Promise((t,r)=>{new FontFace(e.font_family,`url(${e.file_url})`).load().then(s=>{document.fonts.add(s),t()}).catch(r)})}async function Mf(){try{const e=await vt.list();return await Promise.all(e.map(Gs)),e}catch(e){return console.error("Failed to preload fonts:",e),[]}}function Rd({isOpen:e,onClose:t,onFontUploaded:r}){const[n,s]=f.useState(""),[o,l]=f.useState(null),[a,c]=f.useState(!1),[d,u]=f.useState(0),[h,g]=f.useState([]),[p,y]=f.useState(!1);f.useState(()=>{e&&m()});const m=async()=>{y(!0);try{const w=await vt.list();g(w)}catch(w){console.error("Failed to load fonts:",w)}finally{y(!1)}},x=w=>{var E,P;const b=(E=w.target.files)==null?void 0:E[0];if(!b)return;const R=[".ttf",".otf",".woff",".woff2"],O="."+((P=b.name.split(".").pop())==null?void 0:P.toLowerCase());if(!R.includes(O)){de({title:"Invalid file type",description:"Only .ttf, .otf, .woff, and .woff2 files are supported.",variant:"destructive"});return}if(l(b),!n){const j=b.name.replace(/\.[^/.]+$/,"").replace(/[-_]/g," ");s(j)}},v=async()=>{var w,b;if(!o||!n.trim()){de({title:"Missing information",description:"Please select a file and enter a font name.",variant:"destructive"});return}c(!0),u(0);try{const R=setInterval(()=>{u(E=>Math.min(E+10,90))},200),O=await vt.uploadFont(o,n);clearInterval(R),u(100),await Gs(O),de({title:" Font uploaded",description:`${n} is now available in your font library.`}),s(""),l(null),u(0),await m(),r==null||r(O),setTimeout(()=>{t()},1e3)}catch(R){console.error("Font upload failed:",R),de({title:"Upload failed",description:((b=(w=R.response)==null?void 0:w.data)==null?void 0:b.error)||"Failed to upload font. Please try again.",variant:"destructive"})}finally{c(!1)}},C=async w=>{if(confirm("Delete this font? This action cannot be undone."))try{await vt.delete(w),de({title:" Font deleted",description:"Font has been removed from your library."}),await m()}catch(b){console.error("Font deletion failed:",b),de({title:"Deletion failed",description:"Failed to delete font. Please try again.",variant:"destructive"})}};return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),i.jsxs("div",{className:"relative bg-card border-2 border-border shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between",children:[i.jsx("h2",{className:"font-display text-lg uppercase tracking-wider",children:"Custom Fonts"}),i.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(ve,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"py-2 border-b border-border",children:i.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Upload New Font"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Font Name"}),i.jsx(fe,{type:"text",value:n,onChange:w=>s(w.target.value),placeholder:"e.g., Helvetica Bold",className:"h-9 text-sm bg-secondary border-border",disabled:a})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Font File (.ttf, .otf, .woff, .woff2)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fe,{type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:x,className:"h-9 text-sm bg-secondary border-border flex-1",disabled:a}),o&&i.jsxs("span",{className:"text-xs text-muted-foreground",children:[(o.size/1024).toFixed(1)," KB"]})]})]}),a&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"w-full h-2 bg-secondary border border-border overflow-hidden",children:i.jsx("div",{className:"h-full bg-accent transition-all duration-300",style:{width:`${d}%`}})}),i.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Uploading... ",d,"%"]})]}),i.jsx("button",{onClick:v,disabled:!o||!n.trim()||a,className:"w-full bg-accent text-accent-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-accent hover:bg-accent/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx(Je,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):d===100?i.jsxs(i.Fragment,{children:[i.jsx(Ni,{className:"w-4 h-4"}),"Uploaded!"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ci,{className:"w-4 h-4"}),"Upload Font"]})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"py-2 border-b border-border",children:i.jsxs("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:["Your Fonts (",h.length,")"]})}),p?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(Je,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):h.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx("p",{className:"text-sm",children:"No custom fonts uploaded yet."}),i.jsx("p",{className:"text-xs mt-1",children:"Upload your first font above!"})]}):i.jsx("div",{className:"space-y-2",children:h.map(w=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary border border-border hover:bg-secondary/80 transition-colors",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",style:{fontFamily:w.font_family},children:w.name}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.file_type,"  ",w.file_size?(w.file_size/1024).toFixed(1):"?"," KB"]})]}),i.jsx("button",{onClick:()=>C(w.id),className:"text-muted-foreground hover:text-destructive transition-colors p-2",title:"Delete font",children:i.jsx(Ze,{className:"w-4 h-4"})})]},w.id))})]})]})]})]}):null}const Df=Object.freeze(Object.defineProperty({__proto__:null,FontUploadModal:Rd},Symbol.toStringTag,{value:"Module"}));var Zt=0;function jd(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??bn()),document.body.insertAdjacentElement("beforeend",e[1]??bn()),Zt++,()=>{Zt===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Zt--}},[])}function bn(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Qt="focusScope.autoFocusOnMount",er="focusScope.autoFocusOnUnmount",vn={bubbles:!1,cancelable:!0},Pd="FocusScope",qs=f.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=e,[a,c]=f.useState(null),d=ue(s),u=ue(o),h=f.useRef(null),g=ce(t,m=>c(m)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let m=function(w){if(p.paused||!a)return;const b=w.target;a.contains(b)?h.current=b:Re(h.current,{select:!0})},x=function(w){if(p.paused||!a)return;const b=w.relatedTarget;b!==null&&(a.contains(b)||Re(h.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const R of w)R.removedNodes.length>0&&Re(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",x);const C=new MutationObserver(v);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",x),C.disconnect()}}},[n,a,p.paused]),f.useEffect(()=>{if(a){En.add(p);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(Qt,vn);a.addEventListener(Qt,d),a.dispatchEvent(v),v.defaultPrevented||(Ad(Dd(Ks(a)),{select:!0}),document.activeElement===m&&Re(a))}return()=>{a.removeEventListener(Qt,d),setTimeout(()=>{const v=new CustomEvent(er,vn);a.addEventListener(er,u),a.dispatchEvent(v),v.defaultPrevented||Re(m??document.body,{select:!0}),a.removeEventListener(er,u),En.remove(p)},0)}}},[a,d,u,p]);const y=f.useCallback(m=>{if(!r&&!n||p.paused)return;const x=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(x&&v){const C=m.currentTarget,[w,b]=Td(C);w&&b?!m.shiftKey&&v===b?(m.preventDefault(),r&&Re(w,{select:!0})):m.shiftKey&&v===w&&(m.preventDefault(),r&&Re(b,{select:!0})):v===C&&m.preventDefault()}},[r,n,p.paused]);return i.jsx(oe.div,{tabIndex:-1,...l,ref:g,onKeyDown:y})});qs.displayName=Pd;function Ad(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Re(n,{select:t}),document.activeElement!==r)return}function Td(e){const t=Ks(e),r=Sn(t,e),n=Sn(t.reverse(),e);return[r,n]}function Ks(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Sn(e,t){for(const r of e)if(!$d(r,{upTo:t}))return r}function $d(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Od(e){return e instanceof HTMLInputElement&&"select"in e}function Re(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Od(e)&&t&&e.select()}}var En=Md();function Md(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=kn(e,t),e.unshift(t)},remove(t){var r;e=kn(e,t),(r=e[0])==null||r.resume()}}}function kn(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Dd(e){return e.filter(t=>t.tagName!=="A")}var Id=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Me=new WeakMap,ft=new WeakMap,ht={},tr=0,Js=function(e){return e&&(e.host||Js(e.parentNode))},_d=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Js(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Ld=function(e,t,r,n){var s=_d(t,Array.isArray(e)?e:[e]);ht[r]||(ht[r]=new WeakMap);var o=ht[r],l=[],a=new Set,c=new Set(s),d=function(h){!h||a.has(h)||(a.add(h),d(h.parentNode))};s.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(g){if(a.has(g))u(g);else try{var p=g.getAttribute(n),y=p!==null&&p!=="false",m=(Me.get(g)||0)+1,x=(o.get(g)||0)+1;Me.set(g,m),o.set(g,x),l.push(g),m===1&&y&&ft.set(g,!0),x===1&&g.setAttribute(r,"true"),y||g.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",g,v)}})};return u(t),a.clear(),tr++,function(){l.forEach(function(h){var g=Me.get(h)-1,p=o.get(h)-1;Me.set(h,g),o.set(h,p),g||(ft.has(h)||h.removeAttribute(n),ft.delete(h)),p||h.removeAttribute(r)}),tr--,tr||(Me=new WeakMap,Me=new WeakMap,ft=new WeakMap,ht={})}},Fd=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=Id(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),Ld(n,s,r,"aria-hidden")):function(){return null}},St="right-scroll-bar-position",Et="width-before-scroll-bar",Ud="with-scroll-bars-hidden",Wd="--removed-body-scroll-bar-size";function rr(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Bd(e,t){var r=f.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var zd=typeof window<"u"?f.useLayoutEffect:f.useEffect,Nn=new WeakMap;function Hd(e,t){var r=Bd(null,function(n){return e.forEach(function(s){return rr(s,n)})});return zd(function(){var n=Nn.get(r);if(n){var s=new Set(n),o=new Set(e),l=r.current;s.forEach(function(a){o.has(a)||rr(a,null)}),o.forEach(function(a){s.has(a)||rr(a,l)})}Nn.set(r,e)},[e]),r}function Xd(e){return e}function Yd(e,t){t===void 0&&(t=Xd);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var l=t(o,n);return r.push(l),function(){r=r.filter(function(a){return a!==l})}},assignSyncMedium:function(o){for(n=!0;r.length;){var l=r;r=[],l.forEach(o)}r={push:function(a){return o(a)},filter:function(){return r}}},assignMedium:function(o){n=!0;var l=[];if(r.length){var a=r;r=[],a.forEach(o),l=r}var c=function(){var u=l;l=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),r}}}};return s}function Vd(e){e===void 0&&(e={});var t=Yd(null);return t.options=je({async:!0,ssr:!1},e),t}var Zs=function(e){var t=e.sideCar,r=Wn(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,je({},r))};Zs.isSideCarExport=!0;function Gd(e,t){return e.useMedium(t),Zs}var Qs=Vd(),nr=function(){},Ut=f.forwardRef(function(e,t){var r=f.useRef(null),n=f.useState({onScrollCapture:nr,onWheelCapture:nr,onTouchMoveCapture:nr}),s=n[0],o=n[1],l=e.forwardProps,a=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,g=e.sideCar,p=e.noRelative,y=e.noIsolation,m=e.inert,x=e.allowPinchZoom,v=e.as,C=v===void 0?"div":v,w=e.gapMode,b=Wn(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=g,O=Hd([r,t]),E=je(je({},b),s);return f.createElement(f.Fragment,null,u&&f.createElement(R,{sideCar:Qs,removeScrollBar:d,shards:h,noRelative:p,noIsolation:y,inert:m,setCallbacks:o,allowPinchZoom:!!x,lockRef:r,gapMode:w}),l?f.cloneElement(f.Children.only(a),je(je({},E),{ref:O})):f.createElement(C,je({},E,{className:c,ref:O}),a))});Ut.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ut.classNames={fullWidth:Et,zeroRight:St};var qd=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Kd(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=qd();return t&&e.setAttribute("nonce",t),e}function Jd(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Zd(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Qd=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Kd())&&(Jd(t,r),Zd(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eu=function(){var e=Qd();return function(t,r){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},eo=function(){var e=eu(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},tu={left:0,top:0,right:0,gap:0},sr=function(e){return parseInt(e||"",10)||0},ru=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[sr(r),sr(n),sr(s)]},nu=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return tu;var t=ru(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},su=eo(),Le="data-scroll-locked",ou=function(e,t,r,n){var s=e.left,o=e.top,l=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Ud,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Le,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(St,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Et,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(St," .").concat(St,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Et," .").concat(Et,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Le,`] {
    `).concat(Wd,": ").concat(a,`px;
  }
`)},Cn=function(){var e=parseInt(document.body.getAttribute(Le)||"0",10);return isFinite(e)?e:0},iu=function(){f.useEffect(function(){return document.body.setAttribute(Le,(Cn()+1).toString()),function(){var e=Cn()-1;e<=0?document.body.removeAttribute(Le):document.body.setAttribute(Le,e.toString())}},[])},au=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;iu();var o=f.useMemo(function(){return nu(s)},[s]);return f.createElement(su,{styles:ou(o,!t,s,r?"":"!important")})},wr=!1;if(typeof window<"u")try{var pt=Object.defineProperty({},"passive",{get:function(){return wr=!0,!0}});window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{wr=!1}var De=wr?{passive:!1}:!1,lu=function(e){return e.tagName==="TEXTAREA"},to=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!lu(e)&&r[t]==="visible")},cu=function(e){return to(e,"overflowY")},du=function(e){return to(e,"overflowX")},Rn=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=ro(e,n);if(s){var o=no(e,n),l=o[1],a=o[2];if(l>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},uu=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},fu=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},ro=function(e,t){return e==="v"?cu(t):du(t)},no=function(e,t){return e==="v"?uu(t):fu(t)},hu=function(e,t){return e==="h"&&t==="rtl"?-1:1},pu=function(e,t,r,n,s){var o=hu(e,window.getComputedStyle(t).direction),l=o*n,a=r.target,c=t.contains(a),d=!1,u=l>0,h=0,g=0;do{if(!a)break;var p=no(e,a),y=p[0],m=p[1],x=p[2],v=m-x-o*y;(y||v)&&ro(e,a)&&(h+=v,g+=y);var C=a.parentNode;a=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(u&&Math.abs(h)<1||!u&&Math.abs(g)<1)&&(d=!0),d},mt=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},jn=function(e){return[e.deltaX,e.deltaY]},Pn=function(e){return e&&"current"in e?e.current:e},mu=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gu=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},xu=0,Ie=[];function yu(e){var t=f.useRef([]),r=f.useRef([0,0]),n=f.useRef(),s=f.useState(xu++)[0],o=f.useState(eo)[0],l=f.useRef(e);f.useEffect(function(){l.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=Ii([e.lockRef.current],(e.shards||[]).map(Pn),!0).filter(Boolean);return m.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=f.useCallback(function(m,x){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!l.current.allowPinchZoom;var v=mt(m),C=r.current,w="deltaX"in m?m.deltaX:C[0]-v[0],b="deltaY"in m?m.deltaY:C[1]-v[1],R,O=m.target,E=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in m&&E==="h"&&O.type==="range")return!1;var P=window.getSelection(),j=P&&P.anchorNode,M=j?j===O||j.contains(O):!1;if(M)return!1;var F=Rn(E,O);if(!F)return!0;if(F?R=E:(R=E==="v"?"h":"v",F=Rn(E,O)),!F)return!1;if(!n.current&&"changedTouches"in m&&(w||b)&&(n.current=R),!R)return!0;var A=n.current||R;return pu(A,x,m,A==="h"?w:b)},[]),c=f.useCallback(function(m){var x=m;if(!(!Ie.length||Ie[Ie.length-1]!==o)){var v="deltaY"in x?jn(x):mt(x),C=t.current.filter(function(R){return R.name===x.type&&(R.target===x.target||x.target===R.shadowParent)&&mu(R.delta,v)})[0];if(C&&C.should){x.cancelable&&x.preventDefault();return}if(!C){var w=(l.current.shards||[]).map(Pn).filter(Boolean).filter(function(R){return R.contains(x.target)}),b=w.length>0?a(x,w[0]):!l.current.noIsolation;b&&x.cancelable&&x.preventDefault()}}},[]),d=f.useCallback(function(m,x,v,C){var w={name:m,delta:x,target:v,should:C,shadowParent:wu(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(b){return b!==w})},1)},[]),u=f.useCallback(function(m){r.current=mt(m),n.current=void 0},[]),h=f.useCallback(function(m){d(m.type,jn(m),m.target,a(m,e.lockRef.current))},[]),g=f.useCallback(function(m){d(m.type,mt(m),m.target,a(m,e.lockRef.current))},[]);f.useEffect(function(){return Ie.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",c,De),document.addEventListener("touchmove",c,De),document.addEventListener("touchstart",u,De),function(){Ie=Ie.filter(function(m){return m!==o}),document.removeEventListener("wheel",c,De),document.removeEventListener("touchmove",c,De),document.removeEventListener("touchstart",u,De)}},[]);var p=e.removeScrollBar,y=e.inert;return f.createElement(f.Fragment,null,y?f.createElement(o,{styles:gu(s)}):null,p?f.createElement(au,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function wu(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const bu=Gd(Qs,yu);var so=f.forwardRef(function(e,t){return f.createElement(Ut,je({},e,{ref:t,sideCar:bu}))});so.classNames=Ut.classNames;async function Pt(e,t={}){const{scale:r=3,format:n="png",quality:s=.95,includeBackground:o=!0}=t,l=document.createElement("canvas"),a=l.getContext("2d");if(!a)throw new Error("Could not get canvas context");l.width=X*r,l.height=q*r,a.scale(r,r),o&&(a.fillStyle="#ffffff",a.fillRect(0,0,X,q));for(const c of e){a.save();const d=c.x+c.width*c.scaleX/2,u=c.y+c.height*c.scaleY/2;a.translate(d,u),a.rotate(c.rotation*Math.PI/180),a.globalAlpha=c.opacity,c.blendMode&&c.blendMode!=="normal"&&(a.globalCompositeOperation=c.blendMode);const h=-(c.width*c.scaleX)/2,g=-(c.height*c.scaleY)/2,p=c.width*c.scaleX,y=c.height*c.scaleY;c.type==="image"&&c.src?await vu(a,c.src,h,g,p,y,c):c.type==="text"&&c.text?Su(a,c.text,h,g,p,y,c):c.type==="shape"?Eu(a,h,g,p,y,c):c.type==="line"&&ku(a,c),a.restore()}return new Promise((c,d)=>{l.toBlob(u=>{u?c(u):d(new Error("Failed to create blob"))},n==="jpeg"?"image/jpeg":"image/png",s)})}async function vu(e,t,r,n,s,o,l){return new Promise((a,c)=>{const d=new Image;d.crossOrigin="anonymous",d.onload=()=>{(l.contrast||l.brightness||l.grayscale||l.threshold||l.hueRotate||l.invert)&&(e.filter=Tr(l)),e.drawImage(d,r,n,s,o),e.filter="none",a()},d.onerror=()=>{console.error("Failed to load image:",t),e.fillStyle="#cccccc",e.fillRect(r,n,s,o),a()},d.src=t})}function Su(e,t,r,n,s,o,l){var d,u;const a=l.fontSize||20,c=l.fontFamily||"Arial";if(e.font=`${a}px ${c}`,e.textAlign="center",e.textBaseline="middle",l.fillType==="linear-gradient"&&l.gradientStops){const h=(l.gradientAngle||0)*Math.PI/180,g=r+s/2,p=n+o/2,y=g-Math.cos(h)*s/2,m=p-Math.sin(h)*o/2,x=g+Math.cos(h)*s/2,v=p+Math.sin(h)*o/2,C=e.createLinearGradient(y,m,x,v);l.gradientStops.forEach(w=>{C.addColorStop(w.offset,w.color)}),e.fillStyle=C}else if(l.fillType==="radial-gradient"&&l.gradientStops){const h=r+s/2,g=n+o/2,p=Math.max(s,o)/2,y=e.createRadialGradient(h,g,0,h,g,p);l.gradientStops.forEach(m=>{y.addColorStop(m.offset,m.color)}),e.fillStyle=y}else e.fillStyle=l.fill||"#000000";if((d=l.dropShadow)!=null&&d.enabled&&(e.shadowOffsetX=l.dropShadow.offsetX,e.shadowOffsetY=l.dropShadow.offsetY,e.shadowBlur=l.dropShadow.blur,e.shadowColor=`${l.dropShadow.color}${Math.round(l.dropShadow.opacity*255).toString(16).padStart(2,"0")}`),(l.contrast||l.brightness||l.grayscale||l.threshold)&&(e.filter=Tr(l)),(u=l.glow)!=null&&u.enabled)for(let g=0;g<3;g++)e.save(),e.shadowColor=`${l.glow.color}${Math.round(l.glow.intensity*255).toString(16).padStart(2,"0")}`,e.shadowBlur=l.glow.radius*(g+1),e.globalCompositeOperation="lighter",e.fillText(t,r+s/2,n+o/2),e.restore();e.fillText(t,r+s/2,n+o/2),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="transparent",e.filter="none"}function Eu(e,t,r,n,s,o){var c,d;const l=o.stroke||"",a=o.strokeWidth||0;if(o.fillType==="linear-gradient"&&o.gradientStops){const u=(o.gradientAngle||0)*Math.PI/180,h=t+n/2-Math.cos(u)*n/2,g=r+s/2-Math.sin(u)*s/2,p=t+n/2+Math.cos(u)*n/2,y=r+s/2+Math.sin(u)*s/2,m=e.createLinearGradient(h,g,p,y);o.gradientStops.forEach(x=>{m.addColorStop(x.offset,x.color)}),e.fillStyle=m}else if(o.fillType==="radial-gradient"&&o.gradientStops){const u=t+n/2,h=r+s/2,g=Math.max(n,s)/2,p=e.createRadialGradient(u,h,0,u,h,g);o.gradientStops.forEach(y=>{p.addColorStop(y.offset,y.color)}),e.fillStyle=p}else e.fillStyle=o.fill||"#000000";if(l&&(e.strokeStyle=l,e.lineWidth=a),(c=o.dropShadow)!=null&&c.enabled&&(e.shadowOffsetX=o.dropShadow.offsetX,e.shadowOffsetY=o.dropShadow.offsetY,e.shadowBlur=o.dropShadow.blur,e.shadowColor=`${o.dropShadow.color}${Math.round(o.dropShadow.opacity*255).toString(16).padStart(2,"0")}`),(o.contrast||o.brightness||o.grayscale||o.threshold)&&(e.filter=Tr(o)),(d=o.glow)!=null&&d.enabled)for(let h=0;h<3;h++){switch(e.save(),e.shadowColor=`${o.glow.color}${Math.round(o.glow.intensity*255).toString(16).padStart(2,"0")}`,e.shadowBlur=o.glow.radius*(h+1),e.globalCompositeOperation="lighter",o.shapeType){case"rect":e.fillRect(t,r,n,s);break;case"circle":e.beginPath(),e.arc(t+n/2,r+s/2,Math.min(n,s)/2,0,Math.PI*2),e.fill();break;case"star":An(e,t+n/2,r+s/2,Math.min(n,s)/2),e.fill();break;case"polygon":Tn(e,t+n/2,r+s/2,Math.min(n,s)/2,o.polygonSides||6),e.fill();break}e.restore()}switch(o.shapeType){case"rect":e.fillRect(t,r,n,s),l&&e.strokeRect(t,r,n,s);break;case"circle":e.beginPath(),e.arc(t+n/2,r+s/2,Math.min(n,s)/2,0,Math.PI*2),e.fill(),l&&e.stroke();break;case"star":An(e,t+n/2,r+s/2,Math.min(n,s)/2),e.fill(),l&&e.stroke();break;case"polygon":Tn(e,t+n/2,r+s/2,Math.min(n,s)/2,o.polygonSides||6),e.fill(),l&&e.stroke();break}e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="transparent",e.filter="none"}function ku(e,t){const r=t.stroke||"#000000",n=t.strokeWidth||2;e.strokeStyle=r,e.lineWidth=n,e.lineCap=t.lineCapStyle||"round";const s=0,o=0,l=t.lineEndX||100,a=t.lineEndY||0;if(e.beginPath(),t.lineType==="curved"&&t.lineCurve){const c=(s+l)/2,d=(o+a)/2+t.lineCurve;e.moveTo(s,o),e.quadraticCurveTo(c,d,l,a)}else e.moveTo(s,o),e.lineTo(l,a);e.stroke()}function An(e,t,r,n){const o=n*.4;e.beginPath();for(let l=0;l<5*2;l++){const a=l%2===0?n:o,c=l*Math.PI/5-Math.PI/2,d=t+a*Math.cos(c),u=r+a*Math.sin(c);l===0?e.moveTo(d,u):e.lineTo(d,u)}e.closePath()}function Tn(e,t,r,n,s){const o=Math.PI*2/s;e.beginPath();for(let l=0;l<s;l++){const a=t+n*Math.cos(o*l-Math.PI/2),c=r+n*Math.sin(o*l-Math.PI/2);l===0?e.moveTo(a,c):e.lineTo(a,c)}e.closePath()}function Tr(e){const t=[];return e.contrast!==void 0&&e.contrast!==100&&t.push(`contrast(${e.contrast}%)`),e.brightness!==void 0&&e.brightness!==100&&t.push(`brightness(${e.brightness}%)`),e.grayscale!==void 0&&e.grayscale>0&&t.push(`grayscale(${e.grayscale}%)`),e.threshold&&t.push("contrast(300%)","grayscale(100%)"),e.hueRotate!==void 0&&e.hueRotate>0&&t.push(`hue-rotate(${e.hueRotate}deg)`),e.invert&&t.push("invert(100%)"),t.length>0?t.join(" "):"none"}async function If(e,t={}){const{includeBackground:r=!0}=t,n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n.setAttribute("width",X.toString()),n.setAttribute("height",q.toString()),n.setAttribute("viewBox",`0 0 ${X} ${q}`),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),r){const a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("width",X.toString()),a.setAttribute("height",q.toString()),a.setAttribute("fill","#ffffff"),n.appendChild(a)}const s=document.createElementNS("http://www.w3.org/2000/svg","defs");n.appendChild(s);for(let a=0;a<e.length;a++){const c=e[a],d=await Nu(c,s,a);d&&n.appendChild(d)}const l=new XMLSerializer().serializeToString(n);return new Blob([l],{type:"image/svg+xml"})}async function Nu(e,t,r){var c,d;const n=document.createElementNS("http://www.w3.org/2000/svg","g"),s=e.x+e.width*e.scaleX/2,o=e.y+e.height*e.scaleY/2;n.setAttribute("transform",`translate(${s}, ${o}) rotate(${e.rotation}) scale(${e.scaleX}, ${e.scaleY})`),n.setAttribute("opacity",e.opacity.toString());const l=-e.width/2,a=-e.height/2;if(e.type==="text"&&e.text){const u=document.createElementNS("http://www.w3.org/2000/svg","text");if(u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("text-anchor","middle"),u.setAttribute("dominant-baseline","middle"),u.setAttribute("font-size",(e.fontSize||24).toString()),u.setAttribute("font-family",e.fontFamily||"Arial"),e.fillType&&e.fillType!=="solid"&&e.gradientStops){const h=`gradient-${r}`,g=$n(e,h);t.appendChild(g),u.setAttribute("fill",`url(#${h})`)}else u.setAttribute("fill",e.fill||"#000000");if((c=e.dropShadow)!=null&&c.enabled){const h=`filter-${r}`,g=On(e.dropShadow,h);t.appendChild(g),u.setAttribute("filter",`url(#${h})`)}u.textContent=e.text,n.appendChild(u)}else if(e.type==="shape"){let u=null;if(e.shapeType==="rect")u=document.createElementNS("http://www.w3.org/2000/svg","rect"),u.setAttribute("x",l.toString()),u.setAttribute("y",a.toString()),u.setAttribute("width",e.width.toString()),u.setAttribute("height",e.height.toString());else if(e.shapeType==="circle")u=document.createElementNS("http://www.w3.org/2000/svg","circle"),u.setAttribute("cx","0"),u.setAttribute("cy","0"),u.setAttribute("r",(e.width/2).toString());else if(e.shapeType==="star"){u=document.createElementNS("http://www.w3.org/2000/svg","path");const h=Cu(e.width/2);u.setAttribute("d",h)}else if(e.shapeType==="polygon"){u=document.createElementNS("http://www.w3.org/2000/svg","path");const h=Ru(e.width/2,e.polygonSides||6);u.setAttribute("d",h)}if(u){if(e.fillType&&e.fillType!=="solid"&&e.gradientStops){const h=`gradient-${r}`,g=$n(e,h);t.appendChild(g),u.setAttribute("fill",`url(#${h})`)}else u.setAttribute("fill",e.fill||"#000000");if(e.stroke&&(u.setAttribute("stroke",e.stroke),u.setAttribute("stroke-width",(e.strokeWidth||1).toString())),(d=e.dropShadow)!=null&&d.enabled){const h=`filter-${r}`,g=On(e.dropShadow,h);t.appendChild(g),u.setAttribute("filter",`url(#${h})`)}n.appendChild(u)}}else if(e.type==="path"&&e.pathPoints&&e.pathPoints.length>0){const u=document.createElementNS("http://www.w3.org/2000/svg","path");let h=`M ${e.pathPoints[0].x} ${e.pathPoints[0].y}`;for(let g=1;g<e.pathPoints.length;g++){const p=e.pathPoints[g];p.cp1x!==void 0&&p.cp1y!==void 0?p.cp2x!==void 0&&p.cp2y!==void 0?h+=` C ${p.cp1x} ${p.cp1y} ${p.cp2x} ${p.cp2y} ${p.x} ${p.y}`:h+=` Q ${p.cp1x} ${p.cp1y} ${p.x} ${p.y}`:h+=` L ${p.x} ${p.y}`}e.pathClosed&&(h+=" Z"),u.setAttribute("d",h),u.setAttribute("fill",e.pathClosed&&e.fill||"none"),u.setAttribute("stroke",e.stroke||"#000000"),u.setAttribute("stroke-width",(e.strokeWidth||2).toString()),n.appendChild(u)}else if(e.type==="line"){const u=document.createElementNS("http://www.w3.org/2000/svg",e.lineType==="curved"?"path":"line");if(e.lineType==="curved"&&e.lineCurve){const h=(e.lineEndX||100)/2,g=(e.lineEndY||0)/2+e.lineCurve;u.setAttribute("d",`M 0 0 Q ${h} ${g} ${e.lineEndX||100} ${e.lineEndY||0}`)}else u.setAttribute("x1","0"),u.setAttribute("y1","0"),u.setAttribute("x2",(e.lineEndX||100).toString()),u.setAttribute("y2",(e.lineEndY||0).toString());u.setAttribute("stroke",e.stroke||"#000000"),u.setAttribute("stroke-width",(e.strokeWidth||2).toString()),u.setAttribute("stroke-linecap",e.lineCapStyle||"round"),u.setAttribute("fill","none"),n.appendChild(u)}else if(e.type==="image"&&e.src){const u=document.createElementNS("http://www.w3.org/2000/svg","image");u.setAttribute("x",l.toString()),u.setAttribute("y",a.toString()),u.setAttribute("width",e.width.toString()),u.setAttribute("height",e.height.toString()),u.setAttributeNS("http://www.w3.org/1999/xlink","href",e.src),n.appendChild(u)}return n}function $n(e,t){if(e.fillType==="linear-gradient"&&e.gradientStops){const r=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");r.setAttribute("id",t);const n=(e.gradientAngle||0)*Math.PI/180,s=50-Math.cos(n)*50,o=50-Math.sin(n)*50,l=50+Math.cos(n)*50,a=50+Math.sin(n)*50;return r.setAttribute("x1",`${s}%`),r.setAttribute("y1",`${o}%`),r.setAttribute("x2",`${l}%`),r.setAttribute("y2",`${a}%`),e.gradientStops.forEach(c=>{const d=document.createElementNS("http://www.w3.org/2000/svg","stop");d.setAttribute("offset",`${c.offset*100}%`),d.setAttribute("stop-color",c.color),r.appendChild(d)}),r}else if(e.fillType==="radial-gradient"&&e.gradientStops){const r=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return r.setAttribute("id",t),e.gradientStops.forEach(n=>{const s=document.createElementNS("http://www.w3.org/2000/svg","stop");s.setAttribute("offset",`${n.offset*100}%`),s.setAttribute("stop-color",n.color),r.appendChild(s)}),r}return document.createElementNS("http://www.w3.org/2000/svg","g")}function On(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","filter");r.setAttribute("id",t),r.setAttribute("x","-50%"),r.setAttribute("y","-50%"),r.setAttribute("width","200%"),r.setAttribute("height","200%");const n=document.createElementNS("http://www.w3.org/2000/svg","feDropShadow");return n.setAttribute("dx",e.offsetX.toString()),n.setAttribute("dy",e.offsetY.toString()),n.setAttribute("stdDeviation",(e.blur/2).toString()),n.setAttribute("flood-color",e.color),n.setAttribute("flood-opacity",e.opacity.toString()),r.appendChild(n),r}function Cu(e){const r=e*.4;let n="";for(let s=0;s<5*2;s++){const o=s%2===0?e:r,l=s*Math.PI/5-Math.PI/2,a=o*Math.cos(l),c=o*Math.sin(l);s===0?n+=`M ${a} ${c}`:n+=` L ${a} ${c}`}return n+=" Z",n}function Ru(e,t){const r=Math.PI*2/t;let n="";for(let s=0;s<t;s++){const o=e*Math.cos(r*s-Math.PI/2),l=e*Math.sin(r*s-Math.PI/2);s===0?n+=`M ${o} ${l}`:n+=` L ${o} ${l}`}return n+=" Z",n}async function ju(e,t={}){const{scale:r=6,includeBackground:n=!0,title:s="Fingerboard Design"}=t,{jsPDF:o}=await cl(async()=>{const{jsPDF:g}=await import("./jspdf.es.min-CLg9xVVh.js").then(p=>p.j);return{jsPDF:g}},[]),l=await Pt(e,{scale:r,format:"png",includeBackground:n}),a=await new Promise(g=>{const p=new FileReader;p.onloadend=()=>g(p.result),p.readAsDataURL(l)}),c=96,d=294,u=new o({orientation:"portrait",unit:"mm",format:[c,d]});return u.setProperties({title:s,subject:"Fingerboard Design",author:"DeckForge",keywords:"fingerboard, deck, design",creator:"DeckForge - deckforge.app"}),u.addImage(a,"PNG",0,0,c,d,void 0,"FAST"),u.output("blob")}function Pu(e,t){const r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}function Au(e){const t=Tu(e),r=f.forwardRef((n,s)=>{const{children:o,...l}=n,a=f.Children.toArray(o),c=a.find(Ou);if(c){const d=c.props.children,u=a.map(h=>h===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:h);return i.jsx(t,{...l,ref:s,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return i.jsx(t,{...l,ref:s,children:o})});return r.displayName=`${e}.Slot`,r}function Tu(e){const t=f.forwardRef((r,n)=>{const{children:s,...o}=r;if(f.isValidElement(s)){const l=Du(s),a=Mu(o,s.props);return s.type!==f.Fragment&&(a.ref=n?$t(n,l):l),f.cloneElement(s,a)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $u=Symbol("radix.slottable");function Ou(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$u}function Mu(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function Du(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Wt="Dialog",[oo]=Hn(Wt),[Iu,xe]=oo(Wt),io=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,a=f.useRef(null),c=f.useRef(null),[d,u]=ma({prop:n,defaultProp:s??!1,onChange:o,caller:Wt});return i.jsx(Iu,{scope:t,triggerRef:a,contentRef:c,contentId:Yt(),titleId:Yt(),descriptionId:Yt(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(h=>!h),[u]),modal:l,children:r})};io.displayName=Wt;var ao="DialogTrigger",lo=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=xe(ao,r),o=ce(t,s.triggerRef);return i.jsx(oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Mr(s.open),...n,ref:o,onClick:re(e.onClick,s.onOpenToggle)})});lo.displayName=ao;var $r="DialogPortal",[_u,co]=oo($r,{forceMount:void 0}),uo=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=xe($r,t);return i.jsx(_u,{scope:t,forceMount:r,children:f.Children.map(n,l=>i.jsx(Pe,{present:r||o.open,children:i.jsx(Gn,{asChild:!0,container:s,children:l})}))})};uo.displayName=$r;var At="DialogOverlay",fo=f.forwardRef((e,t)=>{const r=co(At,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=xe(At,e.__scopeDialog);return o.modal?i.jsx(Pe,{present:n||o.open,children:i.jsx(Fu,{...s,ref:t})}):null});fo.displayName=At;var Lu=Au("DialogOverlay.RemoveScroll"),Fu=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=xe(At,r);return i.jsx(so,{as:Lu,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(oe.div,{"data-state":Mr(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Oe="DialogContent",ho=f.forwardRef((e,t)=>{const r=co(Oe,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=xe(Oe,e.__scopeDialog);return i.jsx(Pe,{present:n||o.open,children:o.modal?i.jsx(Uu,{...s,ref:t}):i.jsx(Wu,{...s,ref:t})})});ho.displayName=Oe;var Uu=f.forwardRef((e,t)=>{const r=xe(Oe,e.__scopeDialog),n=f.useRef(null),s=ce(t,r.contentRef,n);return f.useEffect(()=>{const o=n.current;if(o)return Fd(o)},[]),i.jsx(po,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:re(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,a=l.button===0&&l.ctrlKey===!0;(l.button===2||a)&&o.preventDefault()}),onFocusOutside:re(e.onFocusOutside,o=>o.preventDefault())})}),Wu=f.forwardRef((e,t)=>{const r=xe(Oe,e.__scopeDialog),n=f.useRef(!1),s=f.useRef(!1);return i.jsx(po,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,a;(l=e.onCloseAutoFocus)==null||l.call(e,o),o.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),po=f.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=e,a=xe(Oe,r),c=f.useRef(null),d=ce(t,c);return jd(),i.jsxs(i.Fragment,{children:[i.jsx(qs,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(vr,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Mr(a.open),...l,ref:d,onDismiss:()=>a.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Bu,{titleId:a.titleId}),i.jsx(Hu,{contentRef:c,descriptionId:a.descriptionId})]})]})}),Or="DialogTitle",mo=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=xe(Or,r);return i.jsx(oe.h2,{id:s.titleId,...n,ref:t})});mo.displayName=Or;var go="DialogDescription",xo=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=xe(go,r);return i.jsx(oe.p,{id:s.descriptionId,...n,ref:t})});xo.displayName=go;var yo="DialogClose",wo=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=xe(yo,r);return i.jsx(oe.button,{type:"button",...n,ref:t,onClick:re(e.onClick,()=>s.onOpenChange(!1))})});wo.displayName=yo;function Mr(e){return e?"open":"closed"}var bo="DialogTitleWarning",[_f,vo]=Vi(bo,{contentName:Oe,titleName:Or,docsSlug:"dialog"}),Bu=({titleId:e})=>{const t=vo(bo),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},zu="DialogDescriptionWarning",Hu=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vo(zu).contentName}}.`;return f.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Xu=io,Yu=lo,Vu=uo,So=fo,Eo=ho,ko=mo,No=xo,Gu=wo;const Co=Xu,Lf=Yu,qu=Vu,Ro=f.forwardRef(({className:e,...t},r)=>i.jsx(So,{ref:r,className:ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Ro.displayName=So.displayName;const Dr=f.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(qu,{children:[i.jsx(Ro,{}),i.jsxs(Eo,{ref:n,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,i.jsxs(Gu,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(ve,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Dr.displayName=Eo.displayName;const Ir=({className:e,...t})=>i.jsx("div",{className:ie("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ir.displayName="DialogHeader";const Ku=({className:e,...t})=>i.jsx("div",{className:ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ku.displayName="DialogFooter";const _r=f.forwardRef(({className:e,...t},r)=>i.jsx(ko,{ref:r,className:ie("text-lg font-semibold leading-none tracking-tight",e),...t}));_r.displayName=ko.displayName;const jo=f.forwardRef(({className:e,...t},r)=>i.jsx(No,{ref:r,className:ie("text-sm text-muted-foreground",e),...t}));jo.displayName=No.displayName;const Po=f.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Po.displayName="Textarea";const or="http://localhost:3000",Mn={async createShareLink(e){const t=localStorage.getItem("token");return(await V.post(`${or}/share/${e}`,{},{headers:{Authorization:`Bearer ${t}`}})).data},async revokeShareLink(e){const t=localStorage.getItem("token");await V.delete(`${or}/share/${e}`,{headers:{Authorization:`Bearer ${t}`}})},async getSharedDesign(e){return(await V.get(`${or}/share/view/${e}`)).data.design}};function Dn(e,t=400,r=600){return`<iframe src="${window.location.origin}/share/${e}" width="${t}" height="${r}" frameborder="0" style="border: 2px solid #000; border-radius: 4px;"></iframe>`}async function In(e){try{return await navigator.clipboard.writeText(e),!0}catch{const r=document.createElement("textarea");r.value=e,r.style.position="fixed",r.style.left="-999999px",document.body.appendChild(r),r.select();try{return document.execCommand("copy"),document.body.removeChild(r),!0}catch{return document.body.removeChild(r),!1}}}function Ju({isOpen:e,onClose:t}){const{versions:r,currentVersionId:n,createVersion:s,restoreVersion:o,deleteVersion:l,renameVersion:a}=be(),[c,d]=f.useState(null),[u,h]=f.useState(""),g=()=>{s()},p=w=>{confirm("Restore this version? Your current work will be saved as a new version first.")&&o(w)},y=w=>{confirm("Delete this version? This action cannot be undone.")&&l(w)},m=w=>{d(w.id),h(w.name)},x=w=>{u.trim()&&a(w,u.trim()),d(null)},v=w=>{const b=new Date(w),O=new Date().getTime()-b.getTime(),E=Math.floor(O/6e4),P=Math.floor(O/36e5),j=Math.floor(O/864e5);return E<1?"Just now":E<60?`${E}m ago`:P<24?`${P}h ago`:j<7?`${j}d ago`:b.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};if(!e)return null;const C=[...r].sort((w,b)=>b.timestamp-w.timestamp);return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),i.jsxs("div",{className:"relative bg-card border-2 border-border shadow-xl w-full max-w-3xl max-h-[85vh] flex flex-col",children:[i.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fr,{className:"w-5 h-5"}),i.jsx("h2",{className:"font-display text-lg uppercase tracking-wider",children:"Version History"})]}),i.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(ve,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-border",children:[i.jsxs("button",{onClick:g,className:"w-full bg-accent text-accent-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-accent hover:bg-accent/90 transition-colors flex items-center justify-center gap-2",children:[i.jsx(cr,{className:"w-4 h-4"}),"Save Current as New Version"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:[r.length," version",r.length!==1?"s":""," saved"]})]}),i.jsx(ws,{className:"flex-1",children:i.jsx("div",{className:"p-4 space-y-2",children:C.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Fr,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"No versions saved yet"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Click "Save Current as New Version" to create your first checkpoint'})]}):C.map((w,b)=>{const R=w.id===n,O=c===w.id;return i.jsxs("div",{className:ie("group relative border border-border bg-secondary p-3 transition-all",R&&"border-accent bg-accent/10"),children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[O?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fe,{value:u,onChange:E=>h(E.target.value),onKeyDown:E=>{E.key==="Enter"&&x(w.id),E.key==="Escape"&&d(null)},className:"h-7 text-sm",autoFocus:!0}),i.jsx("button",{onClick:()=>x(w.id),className:"text-accent hover:text-accent/80",children:i.jsx(dr,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>d(null),className:"text-muted-foreground hover:text-foreground",children:i.jsx(ve,{className:"w-4 h-4"})})]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-medium text-sm truncate",children:w.name}),R&&i.jsx("span",{className:"text-[10px] uppercase tracking-wider bg-accent text-accent-foreground px-1.5 py-0.5 shrink-0",children:"Current"}),w.autoSaved&&i.jsx("span",{className:"text-[10px] uppercase tracking-wider text-muted-foreground",children:"Auto"})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:v(w.timestamp)}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",w.objects.length," object",w.objects.length!==1?"s":""]})]})]}),i.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[!R&&i.jsx("button",{onClick:()=>p(w.id),className:"p-1.5 text-accent hover:bg-accent/10 transition-colors",title:"Restore this version",children:i.jsx(Ri,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>m(w),className:"p-1.5 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors",title:"Rename version",children:i.jsx(ji,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>y(w.id),className:"p-1.5 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",title:"Delete version",children:i.jsx(Ze,{className:"w-4 h-4"})})]})]}),w.thumbnail&&i.jsx("div",{className:"mt-2 border border-border overflow-hidden",children:i.jsx("img",{src:w.thumbnail,alt:w.name,className:"w-full h-24 object-cover"})})]},w.id)})})}),i.jsx("div",{className:"border-t border-border p-3 bg-secondary/50",children:i.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:[i.jsx("strong",{children:"Tip:"}),' Versions are saved locally. Use "Save Design" to persist to the cloud.']})})]})]})]})}const Ff=Object.freeze(Object.defineProperty({__proto__:null,VersionHistory:Ju},Symbol.toStringTag,{value:"Module"}));function Zu({isOpen:e,onClose:t,designId:r,designName:n}){const[s,o]=f.useState(""),[l,a]=f.useState(""),[c,d]=f.useState(!1),[u,h]=f.useState(null),[g,p]=f.useState("400"),[y,m]=f.useState("600");f.useEffect(()=>{e&&r&&x()},[e,r]);const x=async()=>{var b,R;d(!0);try{const O=await Mn.createShareLink(r);o(O.share_url),a(O.share_token)}catch(O){console.error("Failed to create share link:",O),de({title:"Failed to create share link",description:((R=(b=O.response)==null?void 0:b.data)==null?void 0:R.error)||"Please try again.",variant:"destructive"})}finally{d(!1)}},v=async()=>{await In(s)&&(h("url"),de({title:" Link copied",description:"Share link copied to clipboard"}),setTimeout(()=>h(null),2e3))},C=async()=>{const b=Dn(l,parseInt(g),parseInt(y));await In(b)&&(h("embed"),de({title:" Embed code copied",description:"Paste this code into your website"}),setTimeout(()=>h(null),2e3))},w=async()=>{if(confirm("Revoke share link? Anyone with the current link will no longer be able to view this design."))try{await Mn.revokeShareLink(r),de({title:" Link revoked",description:"Share link has been disabled"}),t()}catch(b){console.error("Failed to revoke share link:",b),de({title:"Failed to revoke link",description:"Please try again.",variant:"destructive"})}};return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),i.jsxs("div",{className:"relative bg-card border-2 border-border shadow-xl w-full max-w-2xl max-h-[85vh] overflow-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pi,{className:"w-5 h-5"}),i.jsx("h2",{className:"font-display text-lg uppercase tracking-wider",children:"Share Design"})]}),i.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(ve,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-lg",children:n}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Anyone with the link can view this design (read-only)"})]}),c?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Generating share link..."})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Share Link"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(fe,{value:s,readOnly:!0,className:"font-mono text-sm",onClick:b=>b.currentTarget.select()}),i.jsx("button",{onClick:v,className:"btn-brutal px-4 flex items-center gap-2 whitespace-nowrap",children:u==="url"?i.jsxs(i.Fragment,{children:[i.jsx(dr,{className:"w-4 h-4"}),"Copied!"]}):i.jsxs(i.Fragment,{children:[i.jsx(ir,{className:"w-4 h-4"}),"Copy"]})})]})]}),i.jsxs("div",{className:"space-y-3 pt-4 border-t border-border",children:[i.jsx("div",{className:"py-2",children:i.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Embed on Website"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(me,{className:"text-xs",children:"Width (px)"}),i.jsx(fe,{type:"number",value:g,onChange:b=>p(b.target.value),className:"h-8"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(me,{className:"text-xs",children:"Height (px)"}),i.jsx(fe,{type:"number",value:y,onChange:b=>m(b.target.value),className:"h-8"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{className:"text-xs text-muted-foreground",children:"Embed Code"}),i.jsx("div",{className:"relative",children:i.jsx("textarea",{value:Dn(l,parseInt(g),parseInt(y)),readOnly:!0,rows:3,className:"w-full p-2 border border-border bg-secondary font-mono text-xs rounded",onClick:b=>b.currentTarget.select()})}),i.jsx("button",{onClick:C,className:"w-full btn-brutal py-2 flex items-center justify-center gap-2",children:u==="embed"?i.jsxs(i.Fragment,{children:[i.jsx(dr,{className:"w-4 h-4"}),"Embed Code Copied!"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ai,{className:"w-4 h-4"}),"Copy Embed Code"]})})]})]}),i.jsxs("div",{className:"pt-4 border-t border-border",children:[i.jsxs("button",{onClick:w,className:"w-full btn-brutal py-2.5 flex items-center justify-center gap-2 border-destructive text-destructive hover:bg-destructive/10",children:[i.jsx(Ze,{className:"w-4 h-4"}),"Revoke Share Link"]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"This will disable the current link. You can create a new one anytime."})]})]})]})]})]}):null}const Uf=Object.freeze(Object.defineProperty({__proto__:null,ShareModal:Zu},Symbol.toStringTag,{value:"Module"}));function Qu({isOpen:e,onClose:t,onApplyKit:r,currentColors:n=[],currentFonts:s=[]}){const[o,l]=f.useState([]),[a,c]=f.useState(!1),[d,u]=f.useState(!1),[h,g]=f.useState(!1),[p,y]=f.useState(""),[m,x]=f.useState(""),{isAuthenticated:v}=Vl();f.useEffect(()=>{e&&v&&C()},[e,v]);const C=async()=>{c(!0);try{const E=await dt.list();l(E.kits||[])}catch(E){console.error("Failed to load brand kits:",E),Y.error("Failed to load brand kits")}finally{c(!1)}},w=async()=>{if(!p.trim()){Y.error("Please enter a name for your brand kit");return}if(n.length===0){Y.error("Please add some colors to your canvas first");return}u(!0);try{await dt.create({name:p.trim(),description:m.trim()||void 0,colors:n,fonts:s}),Y.success("Brand kit saved!"),y(""),x(""),g(!1),await C()}catch(E){console.error("Failed to create brand kit:",E),Y.error("Failed to save brand kit")}finally{u(!1)}},b=async E=>{try{await dt.update(E,{is_default:!0}),Y.success("Default kit updated"),await C()}catch(P){console.error("Failed to set default:",P),Y.error("Failed to set default")}},R=async E=>{if(confirm("Delete this brand kit?"))try{await dt.delete(E),Y.success("Brand kit deleted"),await C()}catch(P){console.error("Failed to delete brand kit:",P),Y.error("Failed to delete brand kit")}},O=E=>{r&&(r(E),Y.success(`Applied "${E.name}" brand kit`),t())};return e?v?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-card border border-border w-full max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ur,{className:"w-5 h-5 text-primary"}),i.jsx("h2",{className:"font-display text-lg uppercase tracking-widest",children:"Brand Kits"}),i.jsx("span",{className:"text-xs bg-primary text-primary-foreground px-2 py-0.5 font-mono",children:"PRO"})]}),i.jsx("button",{onClick:t,className:"p-1 hover:bg-secondary transition-colors",children:i.jsx(ve,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[h?i.jsxs("div",{className:"border border-border p-4 space-y-3",children:[i.jsx("h3",{className:"font-mono text-sm uppercase tracking-wider",children:"Create New Brand Kit"}),i.jsx(fe,{placeholder:"Kit name (e.g., Sunset Vibes)",value:p,onChange:E=>y(E.target.value),className:"font-mono"}),i.jsx(Po,{placeholder:"Description (optional)",value:m,onChange:E=>x(E.target.value),className:"font-mono text-xs",rows:2}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(le,{onClick:w,disabled:d,className:"flex-1",children:d?i.jsxs(i.Fragment,{children:[i.jsx(Je,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(cr,{className:"w-4 h-4 mr-2"}),"Save Kit"]})}),i.jsx(le,{onClick:()=>{g(!1),y(""),x("")},variant:"outline",children:"Cancel"})]})]}):i.jsxs(le,{onClick:()=>g(!0),variant:"outline",className:"w-full",children:[i.jsx(cr,{className:"w-4 h-4 mr-2"}),"Save Current Colors as Brand Kit"]}),a?i.jsx("div",{className:"text-center py-8",children:i.jsx(Je,{className:"w-6 h-6 mx-auto animate-spin text-muted-foreground"})}):o.length===0?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"No brand kits yet. Save your first one!"})}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-mono text-sm uppercase tracking-wider",children:"Your Brand Kits"}),o.map(E=>i.jsxs("div",{className:"border border-border p-4 space-y-3 hover:border-primary transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:"font-mono font-semibold",children:E.name}),E.is_default&&i.jsx(ar,{className:"w-3 h-3 fill-yellow-500 text-yellow-500"})]}),E.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:E.description})]}),i.jsxs("div",{className:"flex gap-1",children:[!E.is_default&&i.jsx("button",{onClick:()=>b(E.id),className:"p-1.5 hover:bg-secondary transition-colors",title:"Set as default",children:i.jsx(ar,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>R(E.id),className:"p-1.5 hover:bg-destructive hover:text-destructive-foreground transition-colors",title:"Delete kit",children:i.jsx(Ze,{className:"w-3.5 h-3.5"})})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(Ur,{className:"w-3 h-3"}),i.jsxs("span",{children:[E.colors.length," colors"]})]}),i.jsx("div",{className:"flex gap-1 flex-wrap",children:E.colors.map((P,j)=>i.jsx("div",{className:"w-8 h-8 border border-border",style:{backgroundColor:P},title:P},j))})]}),E.fonts&&E.fonts.length>0&&i.jsx("div",{className:"space-y-1",children:i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(Ti,{className:"w-3 h-3"}),i.jsxs("span",{children:[E.fonts.length," fonts"]})]})}),i.jsx(le,{onClick:()=>O(E),variant:"outline",size:"sm",className:"w-full",children:"Apply to Canvas"})]},E.id))]})]})]})}):i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-card border border-border w-full max-w-md p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"font-display text-lg uppercase tracking-widest",children:"Brand Kits"}),i.jsx("button",{onClick:t,className:"p-1 hover:bg-secondary transition-colors",children:i.jsx(ve,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Login to save and manage brand kits"}),i.jsx(le,{onClick:()=>window.location.href="/auth",children:"Login"})]})}):null}const Wf=Object.freeze(Object.defineProperty({__proto__:null,BrandKitModal:Qu},Symbol.toStringTag,{value:"Module"}));function ef({open:e,onClose:t,onDuplicate:r}){const[n,s]=f.useState(2),[o,l]=f.useState(2),[a,c]=f.useState(10),[d,u]=f.useState(10),h=()=>{n>0&&o>0&&n<=20&&o<=20&&(r(n,o,a,d),t(),s(2),l(2),c(10),u(10))},g=n*o-1;return i.jsx(Co,{open:e,onOpenChange:t,children:i.jsxs(Dr,{className:"sm:max-w-md",children:[i.jsxs(Ir,{children:[i.jsxs(_r,{className:"flex items-center gap-2",children:[i.jsx(Wr,{className:"w-5 h-5 text-primary"}),"Array Duplicate"]}),i.jsx(jo,{children:"Create a grid of duplicates from the selected object"})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{htmlFor:"rows",children:"Rows"}),i.jsx(fe,{id:"rows",type:"number",min:"1",max:"20",value:n,onChange:p=>s(Math.max(1,Math.min(20,parseInt(p.target.value)||1))),className:"font-mono"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{htmlFor:"cols",children:"Columns"}),i.jsx(fe,{id:"cols",type:"number",min:"1",max:"20",value:o,onChange:p=>l(Math.max(1,Math.min(20,parseInt(p.target.value)||1))),className:"font-mono"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{htmlFor:"gapX",children:"Horizontal Gap (px)"}),i.jsx(fe,{id:"gapX",type:"number",min:"0",max:"500",value:a,onChange:p=>c(Math.max(0,Math.min(500,parseInt(p.target.value)||0))),className:"font-mono"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{htmlFor:"gapY",children:"Vertical Gap (px)"}),i.jsx(fe,{id:"gapY",type:"number",min:"0",max:"500",value:d,onChange:p=>u(Math.max(0,Math.min(500,parseInt(p.target.value)||0))),className:"font-mono"})]})]}),i.jsxs("div",{className:"rounded-lg border border-border bg-muted/50 p-3 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Grid Size:"}),i.jsxs("span",{className:"font-mono font-semibold",children:[n,"  ",o]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-1",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Copies:"}),i.jsx("span",{className:"font-mono font-semibold text-primary",children:g})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsxs(le,{variant:"outline",onClick:t,className:"gap-2",children:[i.jsx(ve,{className:"w-4 h-4"}),"Cancel"]}),i.jsxs(le,{onClick:h,className:"gap-2 btn-brutal bg-primary text-primary-foreground",disabled:n<1||o<1||n>20||o>20,children:[i.jsx(Wr,{className:"w-4 h-4"}),"Create ",g," ",g===1?"Copy":"Copies"]})]})]})})}const Bf=Object.freeze(Object.defineProperty({__proto__:null,ArrayDuplicateModal:ef},Symbol.toStringTag,{value:"Module"}));function tf({isOpen:e,onClose:t,objects:r,designName:n,onConfirmExport:s}){const[o,l]=f.useState(1),[a,c]=f.useState(!1),[d,u]=f.useState(null),h=async()=>{try{const p=await Pt(r,{scale:2,format:"png",includeBackground:!0}),y=URL.createObjectURL(p);u(y)}catch(p){console.error("Preview generation failed:",p)}},g=async()=>{c(!0);try{const p=await Pt(r,{scale:3,format:"png",includeBackground:!0}),y=`${n.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${Date.now()}.png`;Pu(p,y),s==null||s(),t()}catch(p){console.error("Export failed:",p)}finally{c(!1)}};return f.useEffect(()=>{e&&!d&&h()},[e]),e?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",children:i.jsxs("div",{className:"bg-card border-2 border-border w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"font-display text-lg uppercase tracking-widest",children:"Export Preview"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Review your design before downloading"})]}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-secondary transition-colors rounded",children:i.jsx(ve,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"flex-1 overflow-auto bg-secondary/20 p-8 flex items-center justify-center",children:d?i.jsx("div",{className:"relative",style:{transform:`scale(${o})`,transition:"transform 0.2s"},children:i.jsx("img",{src:d,alt:"Export preview",className:"max-w-full max-h-full shadow-2xl border-2 border-border",style:{imageRendering:"crisp-edges"}})}):i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Generating preview..."})]})}),i.jsxs("div",{className:"border-t border-border p-4 flex items-center justify-between bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:"Preview Zoom:"}),i.jsx(le,{size:"sm",variant:"outline",onClick:()=>l(Math.max(.5,o-.25)),disabled:o<=.5,children:i.jsx(_n,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm font-mono w-12 text-center",children:[Math.round(o*100),"%"]}),i.jsx(le,{size:"sm",variant:"outline",onClick:()=>l(Math.min(2,o+.25)),disabled:o>=2,children:i.jsx(Ln,{className:"w-4 h-4"})}),i.jsx(le,{size:"sm",variant:"outline",onClick:()=>l(1),children:i.jsx($i,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"text-right mr-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Final Export Quality"}),i.jsx("p",{className:"text-sm font-mono text-primary",children:"3x Resolution (Print Ready)"})]}),i.jsx(le,{variant:"outline",onClick:t,disabled:a,children:"Cancel"}),i.jsx(le,{onClick:g,disabled:a||!d,className:"gap-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ur,{className:"w-4 h-4"}),"Download PNG"]})})]})]})]})}):null}const zf=Object.freeze(Object.defineProperty({__proto__:null,ExportPreview:tf},Symbol.toStringTag,{value:"Module"})),rf=[{id:"instagram-post",name:"Instagram Post",description:"10801080px (Square)",icon:i.jsx(Br,{className:"w-5 h-5"}),width:1080,height:1080,scale:3,format:"png"},{id:"instagram-story",name:"Instagram Story",description:"10801920px (9:16)",icon:i.jsx(Br,{className:"w-5 h-5"}),width:1080,height:1920,scale:3,format:"png"},{id:"twitter-post",name:"Twitter/X Post",description:"1200675px (16:9)",icon:i.jsx(Oi,{className:"w-5 h-5"}),width:1200,height:675,scale:3,format:"png"},{id:"print-high",name:"Print Quality",description:"300 DPI (High Res)",icon:i.jsx(Mi,{className:"w-5 h-5"}),width:96,height:294,scale:10,format:"png"},{id:"ultra-hd-6x",name:"Ultra HD (6x)",description:"Professional  5761764px",icon:i.jsx(lr,{className:"w-5 h-5"}),width:96,height:294,scale:6,format:"png",isPro:!0},{id:"ultra-hd-8x",name:"Ultra HD (8x)",description:"Gallery Quality  7682352px",icon:i.jsx(lr,{className:"w-5 h-5"}),width:96,height:294,scale:8,format:"png",isPro:!0},{id:"ultra-hd-12x",name:"Ultra HD (12x)",description:"Museum Grade  11523528px",icon:i.jsx(Un,{className:"w-5 h-5"}),width:96,height:294,scale:12,format:"png",isPro:!0},{id:"pdf-print",name:"PDF (Print Ready)",description:"Industry Standard  96294mm",icon:i.jsx(zr,{className:"w-5 h-5"}),width:96,height:294,scale:6,format:"pdf",isPro:!0},{id:"pdf-high-res",name:"PDF (Ultra HD)",description:"Premium Quality  96294mm",icon:i.jsx(zr,{className:"w-5 h-5"}),width:96,height:294,scale:10,format:"pdf",isPro:!0},{id:"web-preview",name:"Web Preview",description:"8002450px (Web)",icon:i.jsx(Hr,{className:"w-5 h-5"}),width:800,height:2450,scale:3,format:"jpg"},{id:"thumbnail",name:"Thumbnail",description:"4001225px (Small)",icon:i.jsx(Hr,{className:"w-5 h-5"}),width:400,height:1225,scale:1,format:"jpg"}];function nf({open:e,onClose:t}){const[r,n]=f.useState(null),{objects:s,designName:o}=be(),l=async a=>{n(a.id);try{Y.info(`Exporting ${a.name}...`,{description:"This may take a moment for high-resolution exports"});let c;a.format==="pdf"?c=await ju(s,{scale:a.scale,includeBackground:!0,title:o||"Fingerboard Design"}):c=await Pt(s,{scale:a.scale,format:a.format,includeBackground:!0});const d=URL.createObjectURL(c),u=document.createElement("a");u.href=d,u.download=`${o||"deck"}_${a.id}.${a.format}`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d),Y.success(`${a.name} exported!`,{description:`${a.description}  ${a.format.toUpperCase()}`})}catch(c){console.error("Export failed:",c),Y.error("Export failed",{description:"Please try again or contact support"})}finally{n(null)}};return i.jsx(Co,{open:e,onOpenChange:t,children:i.jsxs(Dr,{className:"sm:max-w-2xl",children:[i.jsx(Ir,{children:i.jsxs(_r,{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"w-5 h-5 text-primary"}),"Quick Export"]})}),i.jsxs("div",{className:"py-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Export your design in popular formats and sizes"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:rf.map(a=>i.jsxs("button",{onClick:()=>l(a),disabled:r!==null,className:`
                  flex items-start gap-3 p-4 rounded-lg border-2 transition-all text-left
                  ${r===a.id?"border-primary bg-primary/10":r?"border-border bg-muted/50 opacity-50":"border-border hover:border-primary hover:bg-accent/50"}
                `,children:[i.jsx("div",{className:`
                  p-2 rounded bg-primary/10 text-primary shrink-0
                  ${r===a.id?"animate-pulse":""}
                `,children:r===a.id?i.jsx(Je,{className:"w-5 h-5 animate-spin"}):a.icon}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("h3",{className:"font-medium text-sm",children:a.name}),a.isPro&&i.jsx("span",{className:"text-[10px] font-bold bg-gradient-to-r from-amber-500 to-orange-500 text-white px-1.5 py-0.5 rounded",children:"PRO"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:a.description}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-[10px] font-mono bg-secondary px-1.5 py-0.5 rounded",children:a.format.toUpperCase()}),i.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[a.scale,"x resolution"]}),a.isPro&&i.jsx("span",{className:"text-[10px] text-amber-500 font-medium",children:" Premium"})]})]}),r!==a.id&&i.jsx(ur,{className:"w-4 h-4 text-muted-foreground shrink-0 mt-1"})]},a.id))}),i.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted/50 border border-border",children:i.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",i.jsx("strong",{children:"Tip:"})," PDF exports are industry-standard for professional printers. Ultra HD exports (6x-12x) provide gallery-quality resolution. Web Preview uses JPG for smaller file sizes."]})}),i.jsx("div",{className:"mt-3 p-3 rounded-lg bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/20",children:i.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400 font-medium",children:" PDF exports embed high-resolution images in industry-standard format, perfect for sending to print shops and manufacturers."})})]})]})})}const Hf=Object.freeze(Object.defineProperty({__proto__:null,ExportPresetsModal:nf},Symbol.toStringTag,{value:"Module"}));export{ff as $,jd as A,df as B,Mf as C,vr as D,Rd as E,qs as F,Gs as G,Co as H,fe as I,Lf as J,Dr as K,me as L,Ir as M,_r as N,hf as O,oe as P,Pt as Q,cf as R,ws as S,Pu as T,If as U,V,uf as W,de as X,Po as Y,Mn as Z,cl as _,Hn as a,jo as a0,Ku as a1,Df as a2,Ff as a3,Uf as a4,Wf as a5,Bf as a6,zf as a7,Hf as a8,ma as b,$t as c,Pe as d,re as e,ue as f,Gn as g,Fe as h,ra as i,i as j,ie as k,Jn as l,lf as m,Yt as n,le as o,be as p,pl as q,ml as r,q as s,X as t,ce as u,Vl as v,pf as w,ss as x,Fd as y,so as z};
