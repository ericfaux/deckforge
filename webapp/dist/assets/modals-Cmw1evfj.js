import{r as f,a as To,v as Po,R as wr,b as ot,U as $o,c as Oo,Z as On,d as Mn,W as Mo,M as Do,X as be,e as Io,C as or,S as _o,f as Lo,L as Fo,g as Wo,E as Dn,h as Uo,i as zo,j as Bo,k as Ho,l as Xo,u as V,G as Yo,m as Vo,T as Ze,n as Go,o as qo,B as Ko,F as Jo,D as Zo,p as Qo,H as ei,q as ti,s as ri,t as ir,w as ni,x as si,y as oi,z as ii,A as ai,I as li,J as ci,K as di,N as ui,O as fi,P as hi,Q as pi,V as mi,Y as gi,_ as xi,$ as yi,a0 as wi,a1 as bi,a2 as vi,a3 as Je,a4 as Si,a5 as Ei,a6 as Lr,a7 as ar,a8 as lr,a9 as ki,aa as Ni,ab as Ci,ac as Ri,ad as Fr,ae as ji,af as Wr,ag as Ai,ah as cr,ai as Ur,aj as Ti,ak as Pi,al as zr}from"./vendor-ui-CEv_jh8W.js";import{c as $i,_ as je,a as In,b as Oi}from"./vendor-supabase-CoxeBSpk.js";var _n={exports:{}},Tt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mi=f,Di=Symbol.for("react.element"),Ii=Symbol.for("react.fragment"),_i=Object.prototype.hasOwnProperty,Li=Mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fi={key:!0,ref:!0,__self:!0,__source:!0};function Ln(e,t,r){var n,s={},o=null,l=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)_i.call(t,n)&&!Fi.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Di,type:e,key:o,ref:l,props:s,_owner:Li.current}}Tt.Fragment=Ii;Tt.jsx=Ln;Tt.jsxs=Ln;_n.exports=Tt;var i=_n.exports;const Wi=1,Ui=1e6;let zt=0;function zi(){return zt=(zt+1)%Number.MAX_SAFE_INTEGER,zt.toString()}const Bt=new Map,Br=e=>{if(Bt.has(e))return;const t=setTimeout(()=>{Bt.delete(e),Ke({type:"REMOVE_TOAST",toastId:e})},Ui);Bt.set(e,t)},Bi=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Wi)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Br(r):e.toasts.forEach(n=>{Br(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},gt=[];let xt={toasts:[]};function Ke(e){xt=Bi(xt,e),gt.forEach(t=>{t(xt)})}function de({...e}){const t=zi(),r=s=>Ke({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>Ke({type:"DISMISS_TOAST",toastId:t});return Ke({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function Ju(){const[e,t]=f.useState(xt);return f.useEffect(()=>(gt.push(t),()=>{const r=gt.indexOf(t);r>-1&&gt.splice(r,1)}),[e]),{...e,toast:de,dismiss:r=>Ke({type:"DISMISS_TOAST",toastId:r})}}function re(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Hr(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Pt(...e){return t=>{let r=!1;const n=e.map(s=>{const o=Hr(s,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():Hr(e[s],null)}}}}function le(...e){return f.useCallback(Pt(...e),e)}function Hi(e,t){const r=f.createContext(t),n=o=>{const{children:l,...a}=o,c=f.useMemo(()=>a,Object.values(a));return i.jsx(r.Provider,{value:c,children:l})};n.displayName=e+"Provider";function s(o){const l=f.useContext(r);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,s]}function Fn(e,t=[]){let r=[];function n(o,l){const a=f.createContext(l),c=r.length;r=[...r,l];const d=h=>{var v;const{scope:x,children:p,...y}=h,m=((v=x==null?void 0:x[e])==null?void 0:v[c])||a,g=f.useMemo(()=>y,Object.values(y));return i.jsx(m.Provider,{value:g,children:p})};d.displayName=o+"Provider";function u(h,x){var m;const p=((m=x==null?void 0:x[e])==null?void 0:m[c])||a,y=f.useContext(p);if(y)return y;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,u]}const s=()=>{const o=r.map(l=>f.createContext(l));return function(a){const c=(a==null?void 0:a[e])||o;return f.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return s.scopeName=e,[n,Xi(s,...t)]}function Xi(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=n.reduce((a,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...a,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}function Yi(e){const t=Vi(e),r=f.forwardRef((n,s)=>{const{children:o,...l}=n,a=f.Children.toArray(o),c=a.find(qi);if(c){const d=c.props.children,u=a.map(h=>h===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:h);return i.jsx(t,{...l,ref:s,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return i.jsx(t,{...l,ref:s,children:o})});return r.displayName=`${e}.Slot`,r}function Vi(e){const t=f.forwardRef((r,n)=>{const{children:s,...o}=r;if(f.isValidElement(s)){const l=Ji(s),a=Ki(o,s.props);return s.type!==f.Fragment&&(a.ref=n?Pt(n,l):l),f.cloneElement(s,a)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Gi=Symbol("radix.slottable");function qi(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Gi}function Ki(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function Ji(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Zi=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oe=Zi.reduce((e,t)=>{const r=Yi(`Primitive.${t}`),n=f.forwardRef((s,o)=>{const{asChild:l,...a}=s,c=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...a,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Qi(e,t){e&&To.flushSync(()=>e.dispatchEvent(t))}function ue(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function ea(e,t=globalThis==null?void 0:globalThis.document){const r=ue(e);f.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var ta="DismissableLayer",dr="dismissableLayer.update",ra="dismissableLayer.pointerDownOutside",na="dismissableLayer.focusOutside",Xr,Wn=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),br=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:a,...c}=e,d=f.useContext(Wn),[u,h]=f.useState(null),x=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),y=le(t,b=>h(b)),m=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(g),C=u?m.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,S=C>=v,R=oa(b=>{const T=b.target,A=[...d.branches].some(L=>L.contains(T));!S||A||(s==null||s(b),l==null||l(b),b.defaultPrevented||a==null||a())},x),M=ia(b=>{const T=b.target;[...d.branches].some(L=>L.contains(T))||(o==null||o(b),l==null||l(b),b.defaultPrevented||a==null||a())},x);return ea(b=>{C===d.layers.size-1&&(n==null||n(b),!b.defaultPrevented&&a&&(b.preventDefault(),a()))},x),f.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Xr=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Yr(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=Xr)}},[u,x,r,d]),f.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Yr())},[u,d]),f.useEffect(()=>{const b=()=>p({});return document.addEventListener(dr,b),()=>document.removeEventListener(dr,b)},[]),i.jsx(oe.div,{...c,ref:y,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:re(e.onFocusCapture,M.onFocusCapture),onBlurCapture:re(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:re(e.onPointerDownCapture,R.onPointerDownCapture)})});br.displayName=ta;var sa="DismissableLayerBranch",Un=f.forwardRef((e,t)=>{const r=f.useContext(Wn),n=f.useRef(null),s=le(t,n);return f.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),i.jsx(oe.div,{...e,ref:s})});Un.displayName=sa;function oa(e,t=globalThis==null?void 0:globalThis.document){const r=ue(e),n=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const o=a=>{if(a.target&&!n.current){let c=function(){zn(ra,r,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function ia(e,t=globalThis==null?void 0:globalThis.document){const r=ue(e),n=f.useRef(!1);return f.useEffect(()=>{const s=o=>{o.target&&!n.current&&zn(na,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Yr(){const e=new CustomEvent(dr);document.dispatchEvent(e)}function zn(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Qi(s,o):s.dispatchEvent(o)}var Zu=br,Qu=Un,Fe=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},aa="Portal",Bn=f.forwardRef((e,t)=>{var a;const{container:r,...n}=e,[s,o]=f.useState(!1);Fe(()=>o(!0),[]);const l=r||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return l?Po.createPortal(i.jsx(oe.div,{...n,ref:t}),l):null});Bn.displayName=aa;function la(e,t){return f.useReducer((r,n)=>t[r][n]??r,e)}var Ae=e=>{const{present:t,children:r}=e,n=ca(t),s=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),o=le(n.ref,da(s));return typeof r=="function"||n.isPresent?f.cloneElement(s,{ref:o}):null};Ae.displayName="Presence";function ca(e){const[t,r]=f.useState(),n=f.useRef(null),s=f.useRef(e),o=f.useRef("none"),l=e?"mounted":"unmounted",[a,c]=la(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=it(n.current);o.current=a==="mounted"?d:"none"},[a]),Fe(()=>{const d=n.current,u=s.current;if(u!==e){const x=o.current,p=it(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&x!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Fe(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=p=>{const m=it(n.current).includes(CSS.escape(p.animationName));if(p.target===t&&m&&(c("ANIMATION_END"),!s.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},x=p=>{p.target===t&&(o.current=it(n.current))};return t.addEventListener("animationstart",x),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",x),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:f.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function it(e){return(e==null?void 0:e.animationName)||"none"}function da(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ua=wr[" useInsertionEffect ".trim().toString()]||Fe;function fa({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,o,l]=ha({defaultProp:t,onChange:r}),a=e!==void 0,c=a?e:s;{const u=f.useRef(e!==void 0);f.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}const d=f.useCallback(u=>{var h;if(a){const x=pa(u)?u(e):u;x!==e&&((h=l.current)==null||h.call(l,x))}else o(u)},[a,e,o,l]);return[c,d]}function ha({defaultProp:e,onChange:t}){const[r,n]=f.useState(e),s=f.useRef(r),o=f.useRef(t);return ua(()=>{o.current=t},[t]),f.useEffect(()=>{var l;s.current!==r&&((l=o.current)==null||l.call(o,r),s.current=r)},[r,s]),[r,n,o]}function pa(e){return typeof e=="function"}function Hn(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Hn(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Xn(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Hn(e))&&(n&&(n+=" "),n+=t);return n}const Vr=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Gr=Xn,Yn=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Gr(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=t,l=Object.keys(s).map(d=>{const u=r==null?void 0:r[d],h=o==null?void 0:o[d];if(u===null)return null;const x=Vr(u)||Vr(h);return s[d][x]}),a=r&&Object.entries(r).reduce((d,u)=>{let[h,x]=u;return x===void 0||(d[h]=x),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:x,...p}=u;return Object.entries(p).every(y=>{let[m,g]=y;return Array.isArray(g)?g.includes({...o,...a}[m]):{...o,...a}[m]===g})?[...d,h,x]:d},[]);return Gr(e,l,c,r==null?void 0:r.class,r==null?void 0:r.className)},vr="-",ma=e=>{const t=xa(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:l=>{const a=l.split(vr);return a[0]===""&&a.length!==1&&a.shift(),Vn(a,t)||ga(l)},getConflictingClassGroupIds:(l,a)=>{const c=r[l]||[];return a&&n[l]?[...c,...n[l]]:c}}},Vn=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?Vn(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(vr);return(l=t.validators.find(({validator:a})=>a(o)))==null?void 0:l.classGroupId},qr=/^\[(.+)\]$/,ga=e=>{if(qr.test(e)){const t=qr.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},xa=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return wa(Object.entries(e.classGroups),r).forEach(([o,l])=>{ur(l,n,o,t)}),n},ur=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:Kr(t,s);o.classGroupId=r;return}if(typeof s=="function"){if(ya(s)){ur(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,l])=>{ur(l,Kr(t,o),r,n)})})},Kr=(e,t)=>{let r=e;return t.split(vr).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},ya=e=>e.isThemeGetter,wa=(e,t)=>t?e.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,a])=>[t+l,a])):o);return[r,s]}):e,ba=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(o,l)=>{r.set(o,l),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return s(o,l),l},set(o,l){r.has(o)?r.set(o,l):s(o,l)}}},Gn="!",va=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],o=t.length,l=a=>{const c=[];let d=0,u=0,h;for(let g=0;g<a.length;g++){let v=a[g];if(d===0){if(v===s&&(n||a.slice(g,g+o)===t)){c.push(a.slice(u,g)),u=g+o;continue}if(v==="/"){h=g;continue}}v==="["?d++:v==="]"&&d--}const x=c.length===0?a:a.substring(u),p=x.startsWith(Gn),y=p?x.substring(1):x,m=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:m}};return r?a=>r({className:a,parseClassName:l}):l},Sa=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},Ea=e=>({cache:ba(e.cacheSize),parseClassName:va(e),...ma(e)}),ka=/\s+/,Na=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,o=[],l=e.trim().split(ka);let a="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:u,hasImportantModifier:h,baseClassName:x,maybePostfixModifierPosition:p}=r(d);let y=!!p,m=n(y?x.substring(0,p):x);if(!m){if(!y){a=d+(a.length>0?" "+a:a);continue}if(m=n(x),!m){a=d+(a.length>0?" "+a:a);continue}y=!1}const g=Sa(u).join(":"),v=h?g+Gn:g,C=v+m;if(o.includes(C))continue;o.push(C);const w=s(m,y);for(let S=0;S<w.length;++S){const R=w[S];o.push(v+R)}a=d+(a.length>0?" "+a:a)}return a};function Ca(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=qn(t))&&(n&&(n+=" "),n+=r);return n}const qn=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=qn(e[n]))&&(r&&(r+=" "),r+=t);return r};function Ra(e,...t){let r,n,s,o=l;function l(c){const d=t.reduce((u,h)=>h(u),e());return r=Ea(d),n=r.cache.get,s=r.cache.set,o=a,a(c)}function a(c){const d=n(c);if(d)return d;const u=Na(c,r);return s(c,u),u}return function(){return o(Ca.apply(null,arguments))}}const K=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Kn=/^\[(?:([a-z-]+):)?(.+)\]$/i,ja=/^\d+\/\d+$/,Aa=new Set(["px","full","screen"]),Ta=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Pa=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$a=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Oa=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ma=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ee=e=>_e(e)||Aa.has(e)||ja.test(e),Ne=e=>ze(e,"length",za),_e=e=>!!e&&!Number.isNaN(Number(e)),Ht=e=>ze(e,"number",_e),Ye=e=>!!e&&Number.isInteger(Number(e)),Da=e=>e.endsWith("%")&&_e(e.slice(0,-1)),U=e=>Kn.test(e),Ce=e=>Ta.test(e),Ia=new Set(["length","size","percentage"]),_a=e=>ze(e,Ia,Jn),La=e=>ze(e,"position",Jn),Fa=new Set(["image","url"]),Wa=e=>ze(e,Fa,Ha),Ua=e=>ze(e,"",Ba),Ve=()=>!0,ze=(e,t,r)=>{const n=Kn.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},za=e=>Pa.test(e)&&!$a.test(e),Jn=()=>!1,Ba=e=>Oa.test(e),Ha=e=>Ma.test(e),Xa=()=>{const e=K("colors"),t=K("spacing"),r=K("blur"),n=K("brightness"),s=K("borderColor"),o=K("borderRadius"),l=K("borderSpacing"),a=K("borderWidth"),c=K("contrast"),d=K("grayscale"),u=K("hueRotate"),h=K("invert"),x=K("gap"),p=K("gradientColorStops"),y=K("gradientColorStopPositions"),m=K("inset"),g=K("margin"),v=K("opacity"),C=K("padding"),w=K("saturate"),S=K("scale"),R=K("sepia"),M=K("skew"),b=K("space"),T=K("translate"),A=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",U,t],k=()=>[U,t],j=()=>["",Ee,Ne],P=()=>["auto",_e,U],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],N=()=>["","0",U],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[_e,U];return{cacheSize:500,separator:":",theme:{colors:[Ve],spacing:[Ee,Ne],blur:["none","",Ce,U],brightness:z(),borderColor:[e],borderRadius:["none","","full",Ce,U],borderSpacing:k(),borderWidth:j(),contrast:z(),grayscale:N(),hueRotate:z(),invert:N(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[Da,Ne],inset:D(),margin:D(),opacity:z(),padding:k(),saturate:z(),scale:z(),sepia:N(),skew:z(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",U]}],container:["container"],columns:[{columns:[Ce]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),U]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ye,U]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",U]}],grow:[{grow:N()}],shrink:[{shrink:N()}],order:[{order:["first","last","none",Ye,U]}],"grid-cols":[{"grid-cols":[Ve]}],"col-start-end":[{col:["auto",{span:["full",Ye,U]},U]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Ve]}],"row-start-end":[{row:["auto",{span:[Ye,U]},U]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",U]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",U]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",U,t]}],"min-w":[{"min-w":[U,t,"min","max","fit"]}],"max-w":[{"max-w":[U,t,"none","full","min","max","fit","prose",{screen:[Ce]},Ce]}],h:[{h:[U,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[U,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[U,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[U,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ce,Ne]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ht]}],"font-family":[{font:[Ve]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",U]}],"line-clamp":[{"line-clamp":["none",_e,Ht]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ee,U]}],"list-image":[{"list-image":["none",U]}],"list-style-type":[{list:["none","disc","decimal",U]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ee,Ne]}],"underline-offset":[{"underline-offset":["auto",Ee,U]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",U]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",U]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),La]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_a]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Wa]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[Ee,U]}],"outline-w":[{outline:[Ee,Ne]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ee,Ne]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ce,Ua]}],"shadow-color":[{shadow:[Ve]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ce,U]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",U]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",U]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",U]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ye,U]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",U]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",U]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",U]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ee,Ne,Ht]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ya=Ra(Xa);function ce(...e){return Ya(Xn(e))}var Va=wr[" useId ".trim().toString()]||(()=>{}),Ga=0;function Xt(e){const[t,r]=f.useState(Va());return Fe(()=>{r(n=>n??String(Ga++))},[e]),t?`radix-${t}`:""}var qa=Symbol.for("react.lazy"),kt=wr[" use ".trim().toString()];function Ka(e){return typeof e=="object"&&e!==null&&"then"in e}function Zn(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===qa&&"_payload"in e&&Ka(e._payload)}function Qn(e){const t=Za(e),r=f.forwardRef((n,s)=>{let{children:o,...l}=n;Zn(o)&&typeof kt=="function"&&(o=kt(o._payload));const a=f.Children.toArray(o),c=a.find(el);if(c){const d=c.props.children,u=a.map(h=>h===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:h);return i.jsx(t,{...l,ref:s,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return i.jsx(t,{...l,ref:s,children:o})});return r.displayName=`${e}.Slot`,r}var Ja=Qn("Slot");function Za(e){const t=f.forwardRef((r,n)=>{let{children:s,...o}=r;if(Zn(s)&&typeof kt=="function"&&(s=kt(s._payload)),f.isValidElement(s)){const l=rl(s),a=tl(o,s.props);return s.type!==f.Fragment&&(a.ref=n?Pt(n,l):l),f.cloneElement(s,a)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Qa=Symbol("radix.slottable");function el(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Qa}function tl(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function rl(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const nl=Yn("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ae=f.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},o)=>{const l=n?Ja:"button";return i.jsx(l,{className:ce(nl({variant:t,size:r,className:e})),ref:o,...s})});ae.displayName="Button";const Jr=e=>{let t;const r=new Set,n=(d,u)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const x=t;t=u??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(p=>p(t,x))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d))},c=t=e(n,s,a);return a},sl=e=>e?Jr(e):Jr,ol=e=>e;function il(e,t=ol){const r=ot.useSyncExternalStore(e.subscribe,ot.useCallback(()=>t(e.getState()),[e,t]),ot.useCallback(()=>t(e.getInitialState()),[e,t]));return ot.useDebugValue(r),r}const Zr=e=>{const t=sl(e),r=n=>il(t,n);return Object.assign(r,t),r},es=e=>e?Zr(e):Zr,at=()=>`obj_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Yt=[{id:"scratched-wood",name:"Scratched Wood",enabled:!1,opacity:.4,blendMode:"multiply"},{id:"grip-tape-dust",name:"Grip Tape Dust",enabled:!1,opacity:.3,blendMode:"overlay"},{id:"halftone-dots",name:"Halftone Dots",enabled:!1,opacity:.25,blendMode:"soft-light"}],ke=es((e,t)=>({objects:[],selectedId:null,selectedIds:[],activeTool:null,drawerOpen:!1,stageScale:1,stagePosition:{x:0,y:0},past:[],future:[],versions:[],currentVersionId:null,textureOverlays:Yt,showHardwareGuide:!1,showRulers:!1,backgroundColor:"#ffffff",currentDesignId:null,designName:"Untitled Design",isSaving:!1,saveToHistory:()=>{const{objects:r,past:n}=t();e({past:[...n,{objects:JSON.parse(JSON.stringify(r))}],future:[]})},addObject:r=>{const n=t();n.saveToHistory();const s={...r,id:at()};e({objects:[...n.objects,s],selectedId:s.id})},addObjects:r=>{const n=t();n.saveToHistory();const s=r.map(o=>({...o,id:at()}));e({objects:[...n.objects,...s],selectedId:null})},updateObject:(r,n)=>{e(s=>({objects:s.objects.map(o=>o.id===r?{...o,...n}:o)}))},deleteObject:r=>{const n=t();n.saveToHistory(),e({objects:n.objects.filter(s=>s.id!==r),selectedId:n.selectedId===r?null:n.selectedId})},selectObject:r=>e({selectedId:r,selectedIds:r?[r]:[]}),toggleSelectObject:r=>{const{selectedIds:n}=t(),o=n.includes(r)?n.filter(l=>l!==r):[...n,r];e({selectedIds:o,selectedId:o.length===1?o[0]:null})},setSelectedIds:r=>e({selectedIds:r,selectedId:r.length===1?r[0]:null}),clearSelection:()=>e({selectedId:null,selectedIds:[]}),alignObjects:r=>{const{selectedIds:n,objects:s}=t();if(n.length<2)return;const o=t();o.saveToHistory();const l=s.filter(a=>n.includes(a.id));if(r==="left"){const a=Math.min(...l.map(c=>c.x));l.forEach(c=>{o.updateObject(c.id,{x:a})})}else if(r==="center"){const a=l.reduce((c,d)=>c+d.x+d.width*d.scaleX/2,0)/l.length;l.forEach(c=>{o.updateObject(c.id,{x:a-c.width*c.scaleX/2})})}else if(r==="right"){const a=Math.max(...l.map(c=>c.x+c.width*c.scaleX));l.forEach(c=>{o.updateObject(c.id,{x:a-c.width*c.scaleX})})}else if(r==="top"){const a=Math.min(...l.map(c=>c.y));l.forEach(c=>{o.updateObject(c.id,{y:a})})}else if(r==="middle"){const a=l.reduce((c,d)=>c+d.y+d.height*d.scaleY/2,0)/l.length;l.forEach(c=>{o.updateObject(c.id,{y:a-c.height*c.scaleY/2})})}else if(r==="bottom"){const a=Math.max(...l.map(c=>c.y+c.height*c.scaleY));l.forEach(c=>{o.updateObject(c.id,{y:a-c.height*c.scaleY})})}},distributeObjects:r=>{const{selectedIds:n,objects:s}=t();if(n.length<3)return;const o=t();o.saveToHistory();const l=s.filter(a=>n.includes(a.id)).sort((a,c)=>r==="horizontal"?a.x-c.x:a.y-c.y);if(r==="horizontal"){const a=l[0],c=l[l.length-1],d=c.x+c.width*c.scaleX-a.x,u=l.reduce((y,m)=>y+m.width*m.scaleX,0),x=(d-u)/(l.length-1);let p=a.x+a.width*a.scaleX+x;for(let y=1;y<l.length-1;y++)o.updateObject(l[y].id,{x:p}),p+=l[y].width*l[y].scaleX+x}else{const a=l[0],c=l[l.length-1],d=c.y+c.height*c.scaleY-a.y,u=l.reduce((y,m)=>y+m.height*m.scaleY,0),x=(d-u)/(l.length-1);let p=a.y+a.height*a.scaleY+x;for(let y=1;y<l.length-1;y++)o.updateObject(l[y].id,{y:p}),p+=l[y].height*l[y].scaleY+x}},groupObjects:r=>{const{objects:n}=t();if(r.length<2)return;t().saveToHistory();const o=n.filter(g=>r.includes(g.id));if(o.length<2)return;const l=Math.min(...o.map(g=>g.x)),a=Math.min(...o.map(g=>g.y)),c=Math.max(...o.map(g=>g.x+g.width*g.scaleX)),d=Math.max(...o.map(g=>g.y+g.height*g.scaleY)),u=c-l,h=d-a,x=o.map(g=>({...g,x:g.x-l,y:g.y-a})),p=`group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,y={id:p,type:"group",x:l,y:a,width:u,height:h,rotation:0,opacity:1,scaleX:1,scaleY:1,children:x},m=n.filter(g=>!r.includes(g.id));e({objects:[...m,y],selectedIds:[p],selectedId:p})},ungroupObject:r=>{const{objects:n}=t(),s=n.find(d=>d.id===r);if(!s||s.type!=="group"||!s.children)return;t().saveToHistory();const l=s.children.map(d=>({...d,id:`obj_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,x:s.x+d.x*s.scaleX,y:s.y+d.y*s.scaleY,scaleX:d.scaleX*s.scaleX,scaleY:d.scaleY*s.scaleY,rotation:d.rotation+s.rotation})),a=n.filter(d=>d.id!==r),c=l.map(d=>d.id);e({objects:[...a,...l],selectedIds:c,selectedId:null})},setActiveTool:r=>e({activeTool:r,drawerOpen:r!==null}),toggleDrawer:r=>e(n=>({drawerOpen:r!==void 0?r:!n.drawerOpen})),setStageScale:r=>e({stageScale:Math.max(.25,Math.min(3,r))}),setStagePosition:r=>e({stagePosition:r}),moveLayer:(r,n)=>{const s=t();s.saveToHistory();const o=s.objects.findIndex(c=>c.id===r);if(o===-1)return;const l=[...s.objects],a=n==="up"?o+1:o-1;a<0||a>=l.length||([l[o],l[a]]=[l[a],l[o]],e({objects:l}))},bringToFront:r=>{const n=t();n.saveToHistory();const s=n.objects.findIndex(a=>a.id===r);if(s===-1||s===n.objects.length-1)return;const o=[...n.objects],[l]=o.splice(s,1);o.push(l),e({objects:o})},sendToBack:r=>{const n=t();n.saveToHistory();const s=n.objects.findIndex(a=>a.id===r);if(s===-1||s===0)return;const o=[...n.objects],[l]=o.splice(s,1);o.unshift(l),e({objects:o})},undo:()=>{const{past:r,objects:n,future:s}=t();if(r.length===0)return;const o=r[r.length-1],l=r.slice(0,-1);e({past:l,objects:o.objects,future:[{objects:JSON.parse(JSON.stringify(n))},...s],selectedId:null})},redo:()=>{const{past:r,objects:n,future:s}=t();if(s.length===0)return;const o=s[0],l=s.slice(1);e({past:[...r,{objects:JSON.parse(JSON.stringify(n))}],objects:o.objects,future:l,selectedId:null})},toggleTexture:r=>{e(n=>({textureOverlays:n.textureOverlays.map(s=>s.id===r?{...s,enabled:!s.enabled}:s)}))},updateTexture:(r,n)=>{e(s=>({textureOverlays:s.textureOverlays.map(o=>o.id===r?{...o,...n}:o)}))},generatePattern:(r,n,s,o,l)=>{const a=t(),c=a.objects.find(g=>g.id===r);if(!c)return;a.saveToHistory();const d=c.width*c.scaleX+n,u=c.height*c.scaleY+n,h=Math.ceil(o/d)+1,x=Math.ceil(l/u)+1,p=[];for(let g=-1;g<x;g++)for(let v=-1;v<h;v++){const C=v*d,w=g*u,S=s>0?(Math.random()-.5)*2*s:0;p.push({type:c.type,x:C,y:w,width:c.width,height:c.height,rotation:c.rotation+S,opacity:c.opacity,scaleX:c.scaleX,scaleY:c.scaleY,fill:c.fill,shapeType:c.shapeType,text:c.text,fontSize:c.fontSize,fontFamily:c.fontFamily,src:c.src,contrast:c.contrast,brightness:c.brightness,grayscale:c.grayscale,threshold:c.threshold,colorize:c.colorize,iconName:c.iconName,strokeWidth:c.strokeWidth,solidFill:c.solidFill,stroke:c.stroke,hueRotate:c.hueRotate,invert:c.invert,pixelate:c.pixelate})}const y=a.objects.filter(g=>g.id!==r),m=p.map(g=>({...g,id:at()}));e({objects:[...y,...m],selectedId:null})},arrayDuplicate:(r,n,s,o,l)=>{const a=t(),c=a.objects.find(m=>m.id===r);if(!c)return;a.saveToHistory();const d=c.width*c.scaleX,u=c.height*c.scaleY,h=d+o,x=u+l,p=[];for(let m=0;m<n;m++)for(let g=0;g<s;g++){if(m===0&&g===0)continue;const{id:v,...C}=c;p.push({...C,x:c.x+g*h,y:c.y+m*x})}const y=p.map(m=>({...m,id:at()}));e({objects:[...a.objects,...y],selectedId:null})},toggleHardwareGuide:()=>{e(r=>({showHardwareGuide:!r.showHardwareGuide}))},toggleRulers:()=>{e(r=>({showRulers:!r.showRulers}))},setBackgroundColor:r=>{e({backgroundColor:r})},loadDesign:r=>{e({objects:r.objects||[],textureOverlays:r.textureOverlays||Yt,selectedId:null,past:[],future:[],designName:r.name||"Untitled Design",currentDesignId:r.id||null})},setDesignName:r=>e({designName:r}),setDesignId:r=>e({currentDesignId:r}),setSaving:r=>e({isSaving:r}),resetCanvas:()=>{e({objects:[],selectedId:null,past:[],future:[],textureOverlays:Yt,stageScale:1,stagePosition:{x:0,y:0},currentDesignId:null,designName:"Untitled Design"})},getCanvasState:()=>{const r=t();return{objects:r.objects,textureOverlays:r.textureOverlays,name:r.designName,id:r.currentDesignId}},createVersion:(r,n=!1)=>{const s=t(),o=Date.now(),l=r||(n?`Auto-save ${new Date(o).toLocaleTimeString()}`:`Version ${s.versions.length+1}`),a={id:`ver_${o}_${Math.random().toString(36).substr(2,9)}`,name:l,timestamp:o,objects:JSON.parse(JSON.stringify(s.objects)),textureOverlays:JSON.parse(JSON.stringify(s.textureOverlays)),autoSaved:n};e({versions:[...s.versions,a],currentVersionId:a.id});const{versions:c}=t();c.length>50&&e({versions:c.slice(-50)})},restoreVersion:r=>{const n=t(),s=n.versions.find(o=>o.id===r);s&&(n.createVersion("Before restore",!0),e({objects:JSON.parse(JSON.stringify(s.objects)),textureOverlays:JSON.parse(JSON.stringify(s.textureOverlays)),selectedId:null,past:[],future:[],currentVersionId:r}))},deleteVersion:r=>{const n=t();e({versions:n.versions.filter(s=>s.id!==r),currentVersionId:n.currentVersionId===r?null:n.currentVersionId})},renameVersion:(r,n)=>{const s=t();e({versions:s.versions.map(o=>o.id===r?{...o,name:n}:o)})}}));var al=f.createContext(void 0);function ll(e){const t=f.useContext(al);return e||t||"ltr"}function cl(e,[t,r]){return Math.min(r,Math.max(t,e))}function dl(e,t){return f.useReducer((r,n)=>t[r][n]??r,e)}var Sr="ScrollArea",[ts]=Fn(Sr),[ul,he]=ts(Sr),rs=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:o=600,...l}=e,[a,c]=f.useState(null),[d,u]=f.useState(null),[h,x]=f.useState(null),[p,y]=f.useState(null),[m,g]=f.useState(null),[v,C]=f.useState(0),[w,S]=f.useState(0),[R,M]=f.useState(!1),[b,T]=f.useState(!1),A=le(t,D=>c(D)),L=ll(s);return i.jsx(ul,{scope:r,type:n,dir:L,scrollHideDelay:o,scrollArea:a,viewport:d,onViewportChange:u,content:h,onContentChange:x,scrollbarX:p,onScrollbarXChange:y,scrollbarXEnabled:R,onScrollbarXEnabledChange:M,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:b,onScrollbarYEnabledChange:T,onCornerWidthChange:C,onCornerHeightChange:S,children:i.jsx(oe.div,{dir:L,...l,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});rs.displayName=Sr;var ns="ScrollAreaViewport",ss=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:s,...o}=e,l=he(ns,r),a=f.useRef(null),c=le(t,a,l.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(oe.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});ss.displayName=ns;var ve="ScrollAreaScrollbar",Er=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=he(ve,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=s,a=e.orientation==="horizontal";return f.useEffect(()=>(a?o(!0):l(!0),()=>{a?o(!1):l(!1)}),[a,o,l]),s.type==="hover"?i.jsx(fl,{...n,ref:t,forceMount:r}):s.type==="scroll"?i.jsx(hl,{...n,ref:t,forceMount:r}):s.type==="auto"?i.jsx(os,{...n,ref:t,forceMount:r}):s.type==="always"?i.jsx(kr,{...n,ref:t}):null});Er.displayName=ve;var fl=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=he(ve,e.__scopeScrollArea),[o,l]=f.useState(!1);return f.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const d=()=>{window.clearTimeout(c),l(!0)},u=()=>{c=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",d),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",d),a.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Ae,{present:r||o,children:i.jsx(os,{"data-state":o?"visible":"hidden",...n,ref:t})})}),hl=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=he(ve,e.__scopeScrollArea),o=e.orientation==="horizontal",l=Ot(()=>c("SCROLL_END"),100),[a,c]=dl("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(a==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[a,s.scrollHideDelay,c]),f.useEffect(()=>{const d=s.viewport,u=o?"scrollLeft":"scrollTop";if(d){let h=d[u];const x=()=>{const p=d[u];h!==p&&(c("SCROLL"),l()),h=p};return d.addEventListener("scroll",x),()=>d.removeEventListener("scroll",x)}},[s.viewport,o,c,l]),i.jsx(Ae,{present:r||a!=="hidden",children:i.jsx(kr,{"data-state":a==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:re(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:re(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),os=f.forwardRef((e,t)=>{const r=he(ve,e.__scopeScrollArea),{forceMount:n,...s}=e,[o,l]=f.useState(!1),a=e.orientation==="horizontal",c=Ot(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;l(a?d:u)}},10);return We(r.viewport,c),We(r.content,c),i.jsx(Ae,{present:n||o,children:i.jsx(kr,{"data-state":o?"visible":"hidden",...s,ref:t})})}),kr=f.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=he(ve,e.__scopeScrollArea),o=f.useRef(null),l=f.useRef(0),[a,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=ds(a.viewport,a.content),u={...n,sizes:a,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:x=>o.current=x,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:x=>l.current=x};function h(x,p){return wl(x,l.current,a,p)}return r==="horizontal"?i.jsx(pl,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const x=s.viewport.scrollLeft,p=Qr(x,a,s.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:x=>{s.viewport&&(s.viewport.scrollLeft=x)},onDragScroll:x=>{s.viewport&&(s.viewport.scrollLeft=h(x,s.dir))}}):r==="vertical"?i.jsx(ml,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const x=s.viewport.scrollTop,p=Qr(x,a);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:x=>{s.viewport&&(s.viewport.scrollTop=x)},onDragScroll:x=>{s.viewport&&(s.viewport.scrollTop=h(x))}}):null}),pl=f.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,o=he(ve,e.__scopeScrollArea),[l,a]=f.useState(),c=f.useRef(null),d=le(t,c,o.onScrollbarXChange);return f.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),i.jsx(as,{"data-orientation":"horizontal",...s,ref:d,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$t(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(o.viewport){const x=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(x),fs(x,h)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ct(l.paddingLeft),paddingEnd:Ct(l.paddingRight)}})}})}),ml=f.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,o=he(ve,e.__scopeScrollArea),[l,a]=f.useState(),c=f.useRef(null),d=le(t,c,o.onScrollbarYChange);return f.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),i.jsx(as,{"data-orientation":"vertical",...s,ref:d,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$t(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(o.viewport){const x=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(x),fs(x,h)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ct(l.paddingTop),paddingEnd:Ct(l.paddingBottom)}})}})}),[gl,is]=ts(ve),as=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...x}=e,p=he(ve,r),[y,m]=f.useState(null),g=le(t,A=>m(A)),v=f.useRef(null),C=f.useRef(""),w=p.viewport,S=n.content-n.viewport,R=ue(u),M=ue(c),b=Ot(h,10);function T(A){if(v.current){const L=A.clientX-v.current.left,D=A.clientY-v.current.top;d({x:L,y:D})}}return f.useEffect(()=>{const A=L=>{const D=L.target;(y==null?void 0:y.contains(D))&&R(L,S)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[w,y,S,R]),f.useEffect(M,[n,M]),We(y,b),We(p.content,b),i.jsx(gl,{scope:r,scrollbar:y,hasThumb:s,onThumbChange:ue(o),onThumbPointerUp:ue(l),onThumbPositionChange:M,onThumbPointerDown:ue(a),children:i.jsx(oe.div,{...x,ref:g,style:{position:"absolute",...x.style},onPointerDown:re(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),v.current=y.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),T(A))}),onPointerMove:re(e.onPointerMove,T),onPointerUp:re(e.onPointerUp,A=>{const L=A.target;L.hasPointerCapture(A.pointerId)&&L.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=C.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),Nt="ScrollAreaThumb",ls=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=is(Nt,e.__scopeScrollArea);return i.jsx(Ae,{present:r||s.hasThumb,children:i.jsx(xl,{ref:t,...n})})}),xl=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,o=he(Nt,r),l=is(Nt,r),{onThumbPositionChange:a}=l,c=le(t,h=>l.onThumbChange(h)),d=f.useRef(void 0),u=Ot(()=>{d.current&&(d.current(),d.current=void 0)},100);return f.useEffect(()=>{const h=o.viewport;if(h){const x=()=>{if(u(),!d.current){const p=bl(h,a);d.current=p,a()}};return a(),h.addEventListener("scroll",x),()=>h.removeEventListener("scroll",x)}},[o.viewport,u,a]),i.jsx(oe.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:re(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),y=h.clientX-p.left,m=h.clientY-p.top;l.onThumbPointerDown({x:y,y:m})}),onPointerUp:re(e.onPointerUp,l.onThumbPointerUp)})});ls.displayName=Nt;var Nr="ScrollAreaCorner",cs=f.forwardRef((e,t)=>{const r=he(Nr,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?i.jsx(yl,{...e,ref:t}):null});cs.displayName=Nr;var yl=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=he(Nr,r),[o,l]=f.useState(0),[a,c]=f.useState(0),d=!!(o&&a);return We(s.scrollbarX,()=>{var h;const u=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(u),c(u)}),We(s.scrollbarY,()=>{var h;const u=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(u),l(u)}),d?i.jsx(oe.div,{...n,ref:t,style:{width:o,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ct(e){return e?parseInt(e,10):0}function ds(e,t){const r=e/t;return isNaN(r)?0:r}function $t(e){const t=ds(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function wl(e,t,r,n="ltr"){const s=$t(r),o=s/2,l=t||o,a=s-l,c=r.scrollbar.paddingStart+l,d=r.scrollbar.size-r.scrollbar.paddingEnd-a,u=r.content-r.viewport,h=n==="ltr"?[0,u]:[u*-1,0];return us([c,d],h)(e)}function Qr(e,t,r="ltr"){const n=$t(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,l=t.content-t.viewport,a=o-n,c=r==="ltr"?[0,l]:[l*-1,0],d=cl(e,c);return us([0,l],[0,a])(d)}function us(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function fs(e,t){return e>0&&e<t}var bl=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},l=r.left!==o.left,a=r.top!==o.top;(l||a)&&t(),r=o,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Ot(e,t){const r=ue(e),n=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),f.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function We(e,t){const r=ue(t);Fe(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}var hs=rs,vl=ss,Sl=cs;const ps=f.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(hs,{ref:n,className:ce("relative overflow-hidden",e),...r,children:[i.jsx(vl,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(ms,{}),i.jsx(Sl,{})]}));ps.displayName=hs.displayName;const ms=f.forwardRef(({className:e,orientation:t="vertical",...r},n)=>i.jsx(Er,{ref:n,orientation:t,className:ce("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:i.jsx(ls,{className:"relative flex-1 rounded-full bg-border"})}));ms.displayName=Er.displayName;function El(){const{stageScale:e,setStageScale:t,undo:r,redo:n,past:s,future:o,showHardwareGuide:l,toggleHardwareGuide:a}=ke(),c=(y=10)=>{"vibrate"in navigator&&navigator.vibrate(y)},d=()=>{c(10),t(e*1.2)},u=()=>{c(10),t(e/1.2)},h=()=>{c(10),r()},x=()=>{c(10),n()},p=()=>{c(10),a()};return i.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-1 bg-card border border-border p-1 md:p-1 shadow-lg",children:[i.jsx("button",{onClick:h,disabled:s.length===0,className:"w-10 h-10 md:w-8 md:h-8 flex items-center justify-center hover:bg-secondary active:bg-secondary/80 active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed transition-all touch-manipulation",title:"Undo (Ctrl+Z)",children:i.jsx($o,{className:"w-5 h-5 md:w-4 md:h-4"})}),i.jsx("button",{onClick:x,disabled:o.length===0,className:"w-10 h-10 md:w-8 md:h-8 flex items-center justify-center hover:bg-secondary active:bg-secondary/80 active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed transition-all touch-manipulation",title:"Redo (Ctrl+Shift+Z)",children:i.jsx(Oo,{className:"w-5 h-5 md:w-4 md:h-4"})}),i.jsx("div",{className:"w-px h-8 md:h-6 bg-border mx-1"}),i.jsx("button",{onClick:u,className:"w-10 h-10 md:w-8 md:h-8 flex items-center justify-center hover:bg-secondary active:bg-secondary/80 active:scale-95 transition-all touch-manipulation",title:"Zoom Out",children:i.jsx(On,{className:"w-5 h-5 md:w-4 md:h-4"})}),i.jsxs("span",{className:"text-xs md:text-[10px] font-mono w-14 md:w-12 text-center text-muted-foreground",children:[Math.round(e*100),"%"]}),i.jsx("button",{onClick:d,className:"w-10 h-10 md:w-8 md:h-8 flex items-center justify-center hover:bg-secondary active:bg-secondary/80 active:scale-95 transition-all touch-manipulation",title:"Zoom In",children:i.jsx(Mn,{className:"w-5 h-5 md:w-4 md:h-4"})}),i.jsx("div",{className:"w-px h-8 md:h-6 bg-border mx-1"}),i.jsx("button",{onClick:p,className:ce("w-10 h-10 md:w-8 md:h-8 flex items-center justify-center transition-all active:scale-95 touch-manipulation",l?"bg-accent text-accent-foreground":"hover:bg-secondary active:bg-secondary/80"),title:"Show Hardware Guide (trucks & screws)",children:i.jsx(Mo,{className:"w-5 h-5 md:w-4 md:h-4"})})]})}function kl({isActive:e,onComplete:t,onCancel:r,stageRef:n,deckX:s,deckY:o,stageScale:l}){var I,O;const[a,c]=f.useState([]),[d,u]=f.useState(null),[h,x]=f.useState("click"),[p,y]=f.useState(!1),[m,g]=f.useState(2),[v,C]=f.useState("#ffffff"),[w,S]=f.useState(1),[R,M]=f.useState("solid");f.useEffect(()=>{e||(c([]),u(null),y(!1),x("click"))},[e]),f.useEffect(()=>{if(!e)return;const N=$=>{$.key==="Escape"?r():$.key==="Enter"&&a.length>=2&&D()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[e,a,r]);const b=N=>{if(N.stopPropagation(),!e||!n.current||h==="draw")return;const $=n.current.getBoundingClientRect(),z=(N.clientX-$.left-s)/l,q=(N.clientY-$.top-o)/l;if(a.length===0){c([{x:z,y:q}]);return}if(a.length===1){const ie=`M ${a[0].x} ${a[0].y} L ${z} ${q}`;c([]),t(ie,m,v,w,R,"click");return}},T=N=>{if(N.stopPropagation(),!e||!n.current||h!=="draw")return;const $=n.current.getBoundingClientRect(),z=(N.clientX-$.left-s)/l,q=(N.clientY-$.top-o)/l;y(!0),c([{x:z,y:q}])},A=N=>{if(!e||!n.current)return;const $=n.current.getBoundingClientRect(),z=(N.clientX-$.left-s)/l,q=(N.clientY-$.top-o)/l;u({x:z,y:q}),h==="draw"&&p&&c([...a,{x:z,y:q}])},L=()=>{h==="draw"&&p&&(y(!1),a.length>=2?D():r())},D=()=>{if(a.length<2){r();return}let N=`M ${a[0].x} ${a[0].y}`;if(h==="draw")for(let $=1;$<a.length;$++)($%3===0||$===a.length-1)&&(N+=` L ${a[$].x} ${a[$].y}`);else for(let $=1;$<a.length;$++){const z=a[$-1],q=a[$];if($===1)N+=` L ${q.x} ${q.y}`;else{const ie=(z.x+q.x)/2,_=(z.y+q.y)/2;N+=` Q ${z.x} ${z.y} ${ie} ${_}`}}t(N,m,v,w,R,h)},k=N=>{N.stopPropagation(),r()},j=(N,$)=>{$.stopPropagation(),x(N),c([])};if(!e)return null;let P="";if(a.length>0){P=`M ${a[0].x} ${a[0].y}`;for(let N=1;N<a.length;N++)P+=` L ${a[N].x} ${a[N].y}`;d&&a.length>0&&h==="click"&&(P+=` L ${d.x} ${d.y}`)}const X=((I=n.current)==null?void 0:I.clientWidth)||3e3,H=((O=n.current)==null?void 0:O.clientHeight)||3e3;return i.jsxs("g",{style:{pointerEvents:"all"},children:[i.jsx("rect",{x:0,y:0,width:X,height:H,fill:"rgba(0,0,0,0.01)",style:{cursor:h==="draw"?"crosshair":"pointer",pointerEvents:"all"},onClick:b,onMouseDown:T,onMouseMove:A,onMouseUp:L}),P&&i.jsxs("g",{transform:`translate(${s}, ${o}) scale(${l})`,style:{pointerEvents:"none"},children:[i.jsx("path",{d:P,stroke:v,strokeWidth:m/l,fill:"none",opacity:w,strokeDasharray:h==="click"?"4 4":R==="dashed"?`${m*2} ${m}`:R==="dotted"?`1 ${m}`:"none",strokeLinecap:"round",strokeLinejoin:"round"}),h==="click"&&a.map((N,$)=>i.jsx("circle",{cx:N.x,cy:N.y,r:5/l,fill:$===0?"#ccff00":"#ffffff",stroke:"#000000",strokeWidth:2/l},$)),h==="click"&&d&&i.jsx("circle",{cx:d.x,cy:d.y,r:4/l,fill:"#ccff00",opacity:.6})]}),i.jsx("foreignObject",{x:20,y:100,width:240,height:420,children:i.jsx("div",{className:"bg-card border border-border rounded-lg p-3 shadow-2xl",onMouseDown:N=>N.stopPropagation(),onClick:N=>N.stopPropagation(),children:i.jsxs("div",{className:"flex flex-col gap-2.5",children:[i.jsxs("div",{className:"flex gap-1 p-1 bg-secondary rounded",children:[i.jsx("button",{onClick:N=>j("click",N),className:`flex-1 px-2 py-1.5 text-xs rounded transition-colors ${h==="click"?"bg-accent text-accent-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,title:"Click to place points",children:i.jsx(Do,{className:"w-3.5 h-3.5 mx-auto"})}),i.jsx("button",{onClick:N=>j("draw",N),className:`flex-1 px-2 py-1.5 text-xs rounded transition-colors ${h==="draw"?"bg-accent text-accent-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,title:"Free draw",children:i.jsx("span",{className:"text-sm",children:""})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Width"}),i.jsxs("span",{className:"text-xs font-mono bg-secondary px-1.5 py-0.5 rounded",children:[m,"px"]})]}),i.jsx("input",{type:"range",min:"1",max:"20",value:m,onChange:N=>g(Number(N.target.value)),onMouseDown:N=>N.stopPropagation(),onClick:N=>N.stopPropagation(),className:"w-full h-1.5 bg-secondary rounded-full appearance-none cursor-pointer",style:{accentColor:v}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Color"}),i.jsx("div",{className:"grid grid-cols-6 gap-1.5",children:["#000000","#ffffff","#ccff00","#ff6600","#00ffff","#ff00ff"].map(N=>i.jsx("button",{onClick:$=>{$.stopPropagation(),C(N)},onMouseDown:$=>$.stopPropagation(),className:`w-8 h-8 rounded-md border-2 transition-all hover:scale-110 ${v===N?"border-accent ring-2 ring-accent/30":"border-border/50"}`,style:{backgroundColor:N},title:N},N))}),i.jsx("input",{type:"color",value:v,onChange:N=>C(N.target.value),onMouseDown:N=>N.stopPropagation(),onClick:N=>N.stopPropagation(),className:"w-full h-8 border border-border rounded cursor-pointer",title:"Custom color"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Opacity"}),i.jsxs("span",{className:"text-xs font-mono bg-secondary px-1.5 py-0.5 rounded",children:[Math.round(w*100),"%"]})]}),i.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:w,onChange:N=>S(Number(N.target.value)),onMouseDown:N=>N.stopPropagation(),onClick:N=>N.stopPropagation(),className:"w-full h-1.5 bg-secondary rounded-full appearance-none cursor-pointer",style:{accentColor:v}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Style"}),i.jsx("div",{className:"flex gap-1.5",children:["solid","dashed","dotted"].map(N=>i.jsx("button",{onClick:$=>{$.stopPropagation(),M(N)},onMouseDown:$=>$.stopPropagation(),className:`flex-1 h-10 rounded border-2 transition-all hover:scale-105 ${R===N?"bg-accent/10 border-accent":"bg-secondary border-border hover:border-accent/50"}`,title:N,children:i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsx("div",{className:"w-8 h-0.5",style:{background:v,borderTop:N==="dashed"?`2px dashed ${v}`:N==="dotted"?`2px dotted ${v}`:`2px solid ${v}`}})})},N))})]}),i.jsxs("div",{className:"pt-2 border-t border-border space-y-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground text-center leading-relaxed",children:h==="click"?a.length===0?"Click to place start point":"Click to finish line":p?"Drawing...":"Click and drag to draw"}),i.jsxs("button",{onClick:k,className:"w-full py-2 px-3 text-xs bg-secondary hover:bg-destructive/10 text-muted-foreground hover:text-destructive border border-border hover:border-destructive/50 rounded transition-colors flex items-center justify-center gap-2",children:[i.jsx(be,{className:"w-3.5 h-3.5"}),"Cancel (ESC)"]})]})]})})})]})}function Nl({object:e,stageScale:t,deckX:r,deckY:n,onUpdate:s,onStartTransform:o,onEndTransform:l}){const[a,c]=f.useState(!1),[d,u]=f.useState(null),[h,x]=f.useState({x:0,y:0}),[p,y]=f.useState({x:0,y:0,width:0,height:0,rotation:0}),[m,g]=f.useState(!1),v=e.width*e.scaleX,C=e.height*e.scaleY,w=e.x,S=e.y,R=e.rotation||0,M=typeof window<"u"&&window.innerWidth<768,b=(M?16:10)/t,T=(M?45:35)/t,A={nw:{x:w,y:S},n:{x:w+v/2,y:S},ne:{x:w+v,y:S},e:{x:w+v,y:S+C/2},se:{x:w+v,y:S+C},s:{x:w+v/2,y:S+C},sw:{x:w,y:S+C},w:{x:w,y:S+C/2},rotate:{x:w+v/2,y:S-T}},L=f.useCallback((j,P)=>{j.stopPropagation(),c(!0),u(P),x({x:j.clientX,y:j.clientY}),y({x:w,y:S,width:v,height:C,rotation:R}),g(j.shiftKey),o()},[w,S,v,C,R,o]),D=f.useCallback(j=>{var H;if(!a||!d)return;const P=(j.clientX-h.x)/t,X=(j.clientY-h.y)/t;if(d==="rotate"){const I=p.x+p.width/2,O=p.y+p.height/2,N=(H=document.querySelector("svg"))==null?void 0:H.getBoundingClientRect();if(!N)return;const $=(j.clientX-N.left-r)/t,z=(j.clientY-N.top-n)/t,q=$-I,ie=z-O;let W=Math.atan2(ie,q)*180/Math.PI+90;j.shiftKey&&(W=Math.round(W/15)*15),s({rotation:Math.round(W)})}else{let I=p.x,O=p.y,N=p.width,$=p.height;switch(d){case"nw":I=p.x+P,O=p.y+X,N=p.width-P,$=p.height-X;break;case"n":O=p.y+X,$=p.height-X;break;case"ne":O=p.y+X,N=p.width+P,$=p.height-X;break;case"e":N=p.width+P;break;case"se":N=p.width+P,$=p.height+X;break;case"s":$=p.height+X;break;case"sw":I=p.x+P,N=p.width-P,$=p.height+X;break;case"w":I=p.x+P,N=p.width-P;break}if((m||j.shiftKey)&&(d==="nw"||d==="ne"||d==="se"||d==="sw")){const _=p.width/p.height;Math.abs(N/_)>Math.abs($)?($=N/_,(d==="nw"||d==="ne")&&(O=p.y+p.height-$)):(N=$*_,(d==="nw"||d==="sw")&&(I=p.x+p.width-N))}N<10&&(N=10),$<10&&($=10);const q=N/e.width,ie=$/e.height;s({x:I,y:O,scaleX:q,scaleY:ie})}},[a,d,h,p,m,t,e.width,e.height,s]),k=f.useCallback(()=>{a&&(c(!1),u(null),l())},[a,l]);return f.useEffect(()=>{if(a)return window.addEventListener("mousemove",D),window.addEventListener("mouseup",k),()=>{window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",k)}},[a,D,k]),i.jsxs("g",{style:{pointerEvents:"all"},children:[i.jsx("rect",{x:w,y:S,width:v,height:C,fill:"none",stroke:"#ccff00",strokeWidth:2/t,strokeDasharray:`${4/t} ${2/t}`,style:{pointerEvents:"none"}}),["nw","ne","se","sw"].map(j=>i.jsx("rect",{x:A[j].x-b/2,y:A[j].y-b/2,width:b,height:b,fill:"#ffffff",stroke:"#000000",strokeWidth:1/t,style:{cursor:`${j}-resize`,pointerEvents:"all"},onMouseDown:P=>L(P,j),className:"hover:fill-primary transition-colors"},j)),["n","e","s","w"].map(j=>i.jsx("rect",{x:A[j].x-b/2,y:A[j].y-b/2,width:b,height:b,fill:"#ccff00",stroke:"#000000",strokeWidth:1/t,style:{cursor:`${j}-resize`,pointerEvents:"all"},onMouseDown:P=>L(P,j),className:"hover:fill-primary transition-colors"},j)),i.jsxs("g",{children:[i.jsx("line",{x1:w+v/2,y1:S,x2:A.rotate.x,y2:A.rotate.y,stroke:"#ccff00",strokeWidth:1/t,strokeDasharray:`${2/t} ${2/t}`,style:{pointerEvents:"none"}}),i.jsx("circle",{cx:A.rotate.x,cy:A.rotate.y,r:b,fill:"#00d9ff",stroke:"#000000",strokeWidth:1/t,style:{cursor:"grab",pointerEvents:"all"},onMouseDown:j=>L(j,"rotate"),className:"hover:fill-primary transition-colors"}),i.jsx("foreignObject",{x:A.rotate.x-b,y:A.rotate.y-b,width:b*2,height:b*2,style:{pointerEvents:"none",overflow:"visible"},children:i.jsx("div",{className:"flex items-center justify-center w-full h-full",children:i.jsx(Io,{className:"w-3 h-3 text-white",style:{filter:"drop-shadow(0 0 2px black)"}})})})]}),a&&d!=="rotate"&&i.jsxs("g",{children:[i.jsx("rect",{x:w+v/2-30/t,y:S-25/t,width:60/t,height:18/t,fill:"rgba(0,0,0,0.8)",rx:3/t}),i.jsxs("text",{x:w+v/2,y:S-12/t,textAnchor:"middle",fill:"#ccff00",fontSize:10/t,fontFamily:"monospace",style:{pointerEvents:"none"},children:[Math.round(v),"",Math.round(C)]})]}),a&&d==="rotate"&&i.jsxs("g",{children:[i.jsx("rect",{x:w+v/2-25/t,y:S-25/t,width:50/t,height:18/t,fill:"rgba(0,0,0,0.8)",rx:3/t}),i.jsxs("text",{x:w+v/2,y:S-12/t,textAnchor:"middle",fill:"#00d9ff",fontSize:10/t,fontFamily:"monospace",style:{pointerEvents:"none"},children:[Math.round(R),""]})]}),a&&!m&&(d==="nw"||d==="ne"||d==="se"||d==="sw")&&i.jsxs("g",{children:[i.jsx("rect",{x:w+v/2-60/t,y:S+C+10/t,width:120/t,height:18/t,fill:"rgba(0,0,0,0.8)",rx:3/t}),i.jsx("text",{x:w+v/2,y:S+C+23/t,textAnchor:"middle",fill:"#888888",fontSize:9/t,fontFamily:"sans-serif",style:{pointerEvents:"none"},children:"Hold Shift to lock ratio"})]})]})}function Cl({guides:e,deckX:t,deckY:r,stageScale:n}){return e.length===0?null:i.jsx("g",{transform:`translate(${t}, ${r}) scale(${n})`,style:{pointerEvents:"none"},children:e.map((s,o)=>{if(s.type==="spacing"){if(!(s.start!==void 0&&s.end!==void 0)||s.distance===void 0)return null;const a=(s.start+s.end)/2;return Math.abs(s.end-s.start),i.jsxs("g",{children:[i.jsx("line",{x1:s.position,y1:s.start,x2:s.position,y2:s.end,stroke:"#00d9ff",strokeWidth:1.5/n,opacity:.9}),i.jsx("line",{x1:s.position-5/n,y1:s.start,x2:s.position+5/n,y2:s.start,stroke:"#00d9ff",strokeWidth:1.5/n}),i.jsx("line",{x1:s.position-5/n,y1:s.end,x2:s.position+5/n,y2:s.end,stroke:"#00d9ff",strokeWidth:1.5/n}),i.jsxs("g",{children:[i.jsx("rect",{x:s.position-25/n,y:a-10/n,width:50/n,height:20/n,fill:"rgba(0, 217, 255, 0.95)",rx:4/n}),i.jsxs("text",{x:s.position,y:a+2/n,textAnchor:"middle",fill:"white",fontSize:11/n,fontFamily:"monospace",fontWeight:"600",children:[Math.round(s.distance),"px"]})]})]},`spacing-${o}`)}return s.type==="vertical"?i.jsxs("g",{children:[i.jsx("line",{x1:s.position,y1:0,x2:s.position,y2:G,stroke:"#ff0000",strokeWidth:1/n,strokeDasharray:`${4/n} ${2/n}`,opacity:.8}),s.label&&i.jsxs("g",{children:[i.jsx("rect",{x:s.position-30/n,y:10/n,width:60/n,height:16/n,fill:"rgba(255, 0, 0, 0.9)",rx:3/n}),i.jsx("text",{x:s.position,y:20/n,textAnchor:"middle",fill:"white",fontSize:10/n,fontFamily:"monospace",children:s.label})]})]},`v-${o}`):i.jsxs("g",{children:[i.jsx("line",{x1:0,y1:s.position,x2:B,y2:s.position,stroke:"#ff0000",strokeWidth:1/n,strokeDasharray:`${4/n} ${2/n}`,opacity:.8}),s.label&&i.jsxs("g",{children:[i.jsx("rect",{x:10/n,y:s.position-8/n,width:60/n,height:16/n,fill:"rgba(255, 0, 0, 0.9)",rx:3/n}),i.jsx("text",{x:40/n,y:s.position+3/n,textAnchor:"middle",fill:"white",fontSize:10/n,fontFamily:"monospace",children:s.label})]})]},`h-${o}`)})})}function Rl(e,t,r=5){const n=[],s=e.width*e.scaleX,o=e.height*e.scaleY,l=e.x+s/2,a=e.y+o/2,c=e.x+s,d=e.y+o,u=B/2,h=G/2;Math.abs(l-u)<r&&n.push({type:"vertical",position:u,label:"Center"}),Math.abs(a-h)<r&&n.push({type:"horizontal",position:h,label:"Center"}),t.forEach(p=>{const y=p.width*p.scaleX,m=p.height*p.scaleY,g=p.x+y/2,v=p.y+m/2,C=p.x+y,w=p.y+m;Math.abs(e.x-p.x)<r&&n.push({type:"vertical",position:p.x}),Math.abs(c-C)<r&&n.push({type:"vertical",position:C}),Math.abs(l-g)<r&&n.push({type:"vertical",position:g}),Math.abs(e.x-C)<r&&n.push({type:"vertical",position:C}),Math.abs(c-p.x)<r&&n.push({type:"vertical",position:p.x}),Math.abs(e.y-p.y)<r&&n.push({type:"horizontal",position:p.y}),Math.abs(d-w)<r&&n.push({type:"horizontal",position:w}),Math.abs(a-v)<r&&n.push({type:"horizontal",position:v}),Math.abs(e.y-w)<r&&n.push({type:"horizontal",position:w}),Math.abs(d-p.y)<r&&n.push({type:"horizontal",position:p.y})}),t.forEach(p=>{const y=p.width*p.scaleX,m=p.height*p.scaleY,g=p.x+y,v=p.y+m;if(e.y<v&&d>p.y){if(c<p.x&&p.x-c<100){const S=p.x-c,R=Math.max(e.y,p.y)+Math.min(d-e.y,v-p.y)/2;n.push({type:"spacing",position:c+S/2,start:R-20,end:R+20,distance:S})}if(e.x>g&&e.x-g<100){const S=e.x-g,R=Math.max(e.y,p.y)+Math.min(d-e.y,v-p.y)/2;n.push({type:"spacing",position:g+S/2,start:R-20,end:R+20,distance:S})}}if(e.x<g&&c>p.x){if(d<p.y&&p.y-d<100){const S=p.y-d,R=Math.max(e.x,p.x)+Math.min(c-e.x,g-p.x)/2;n.push({type:"spacing",position:R,start:d,end:p.y,distance:S})}if(e.y>v&&e.y-v<100){const S=e.y-v,R=Math.max(e.x,p.x)+Math.min(c-e.x,g-p.x)/2;n.push({type:"spacing",position:R,start:v,end:e.y,distance:S})}}});const x=[];return n.forEach(p=>{x.some(m=>m.type===p.type&&Math.abs(m.position-p.position)<1)||x.push(p)}),x}function jl({deckX:e,deckY:t,stageScale:r,enabled:n}){if(!n)return null;const s=20/r,o=10,l=5,a=8/r,c=[];for(let u=0;u<=B;u+=l){const h=u%o===0,x=h?s*.5:s*.3;c.push(i.jsx("line",{x1:u,y1:0,x2:u,y2:x,stroke:"#888",strokeWidth:.5/r},`h-${u}`)),h&&u%20===0&&c.push(i.jsx("text",{x:u,y:s*.75,textAnchor:"middle",fill:"#333",fontSize:a,fontFamily:"monospace",children:u},`h-label-${u}`))}const d=[];for(let u=0;u<=G;u+=l){const h=u%o===0,x=h?s*.5:s*.3;d.push(i.jsx("line",{x1:0,y1:u,x2:x,y2:u,stroke:"#888",strokeWidth:.5/r},`v-${u}`)),h&&u%20===0&&d.push(i.jsx("text",{x:s*.25,y:u+a*.3,textAnchor:"start",fill:"#333",fontSize:a,fontFamily:"monospace",children:u},`v-label-${u}`))}return i.jsxs("g",{transform:`translate(${e}, ${t}) scale(${r})`,style:{pointerEvents:"none"},children:[i.jsx("rect",{x:0,y:0,width:B,height:s,fill:"rgba(255, 255, 255, 0.95)",stroke:"#ccc",strokeWidth:1/r}),c,i.jsx("rect",{x:0,y:0,width:s,height:G,fill:"rgba(255, 255, 255, 0.95)",stroke:"#ccc",strokeWidth:1/r}),d,i.jsx("rect",{x:0,y:0,width:s,height:s,fill:"#f0f0f0",stroke:"#ccc",strokeWidth:1/r}),i.jsx("text",{x:s/2,y:s/2+a*.3,textAnchor:"middle",fill:"#999",fontSize:a,fontFamily:"monospace",children:"px"})]})}function Al({x:e,y:t,objectId:r,onClose:n}){const{objects:s,selectedIds:o,updateObject:l,deleteObject:a,saveToHistory:c,addObject:d,selectObject:u,groupObjects:h,ungroupObject:x}=ke(),[p,y]=f.useState({x:e,y:t}),m=r?s.find(I=>I.id===r):null;if(f.useEffect(()=>{let N=e,$=t;e+220>window.innerWidth&&(N=window.innerWidth-220-10),t+400>window.innerHeight&&($=window.innerHeight-400-10),y({x:N,y:$})},[e,t]),f.useEffect(()=>{const I=()=>n(),O=()=>n();return setTimeout(()=>{document.addEventListener("click",I),document.addEventListener("scroll",O,!0)},0),()=>{document.removeEventListener("click",I),document.removeEventListener("scroll",O,!0)}},[n]),!m)return null;const g=()=>{sessionStorage.setItem("deckforge_clipboard",JSON.stringify(m)),V.success("Copied to clipboard"),n()},v=()=>{sessionStorage.setItem("deckforge_clipboard",JSON.stringify(m)),a(m.id),V.success("Cut to clipboard"),n()},C=()=>{const I=sessionStorage.getItem("deckforge_clipboard");if(I)try{const O=JSON.parse(I),{id:N,...$}=O;d({...$,x:O.x+20,y:O.y+20}),V.success("Pasted from clipboard")}catch{V.error("Failed to paste")}n()},w=()=>{const{id:I,...O}=m;c(),d({...O,x:m.x+10,y:m.y+10}),V.success("Object duplicated"),n()},S=()=>{a(m.id),V.success("Object deleted"),n()},R=()=>{l(m.id,{locked:!m.locked}),V.success(m.locked?"Object unlocked":"Object locked"),n()},M=()=>{l(m.id,{opacity:m.opacity===0?1:0}),V.success(m.opacity===0?"Object visible":"Object hidden"),n()},b=()=>{const I=s.findIndex(O=>O.id===m.id);if(I<s.length-1){c();const O=[...s];[O[I],O[I+1]]=[O[I+1],O[I]],ke.setState({objects:O}),V.success("Brought forward")}n()},T=()=>{const I=s.findIndex(O=>O.id===m.id);if(I>0){c();const O=[...s];[O[I],O[I-1]]=[O[I-1],O[I]],ke.setState({objects:O}),V.success("Sent backward")}n()},A=()=>{const I=s.findIndex(N=>N.id===m.id);c();const O=s.filter(N=>N.id!==m.id);O.push(s[I]),ke.setState({objects:O}),V.success("Brought to front"),n()},L=()=>{const I=s.findIndex(N=>N.id===m.id);c();const O=s.filter(N=>N.id!==m.id);O.unshift(s[I]),ke.setState({objects:O}),V.success("Sent to back"),n()},D=()=>{o.length>=2&&(h(o),V.success(`Grouped ${o.length} objects`)),n()},k=()=>{m.type==="group"&&(x(m.id),V.success("Ungrouped objects")),n()},j=!!sessionStorage.getItem("deckforge_clipboard"),P=m.type==="group",X=o.length>=2,H=[{label:"Copy",icon:i.jsx(or,{className:"w-4 h-4"}),shortcut:"Ctrl+C",action:g},{label:"Cut",icon:i.jsx(_o,{className:"w-4 h-4"}),shortcut:"Ctrl+X",action:v},{label:"Paste",icon:i.jsx(Lo,{className:"w-4 h-4"}),shortcut:"Ctrl+V",action:C,disabled:!j},{label:"Duplicate",icon:i.jsx(or,{className:"w-4 h-4"}),shortcut:"Ctrl+D",action:w,divider:!0},{label:m.locked?"Unlock":"Lock",icon:m.locked?i.jsx(Fo,{className:"w-4 h-4"}):i.jsx(Wo,{className:"w-4 h-4"}),shortcut:"Ctrl+L",action:R},{label:m.opacity===0?"Show":"Hide",icon:m.opacity===0?i.jsx(Dn,{className:"w-4 h-4"}):i.jsx(Uo,{className:"w-4 h-4"}),action:M,divider:!0},{label:"Bring Forward",icon:i.jsx(zo,{className:"w-4 h-4"}),shortcut:"Ctrl+]",action:b},{label:"Send Backward",icon:i.jsx(Bo,{className:"w-4 h-4"}),shortcut:"Ctrl+[",action:T},{label:"Bring to Front",icon:i.jsx(Ho,{className:"w-4 h-4"}),shortcut:"Ctrl+Shift+]",action:A},{label:"Send to Back",icon:i.jsx(Xo,{className:"w-4 h-4"}),shortcut:"Ctrl+Shift+[",action:L,divider:!0}];return X&&!P&&H.push({label:"Group",icon:i.jsx(Yo,{className:"w-4 h-4"}),shortcut:"Ctrl+G",action:D}),P&&H.push({label:"Ungroup",icon:i.jsx(Vo,{className:"w-4 h-4"}),shortcut:"Ctrl+Shift+G",action:k}),H.push({label:"Delete",icon:i.jsx(Ze,{className:"w-4 h-4"}),shortcut:"Delete",action:S,destructive:!0,divider:X||P}),i.jsx("div",{className:"fixed z-[9999] bg-card border border-border rounded-lg shadow-2xl py-1 min-w-[220px] animate-in fade-in-0 zoom-in-95 duration-100",style:{left:p.x,top:p.y},onClick:I=>I.stopPropagation(),children:H.map((I,O)=>i.jsxs("div",{children:[I.divider&&O>0&&i.jsx("div",{className:"h-px bg-border my-1"}),i.jsxs("button",{onClick:I.action,disabled:I.disabled,className:`
              w-full flex items-center gap-3 px-3 py-2 text-sm
              transition-colors text-left
              ${I.disabled?"opacity-50 cursor-not-allowed":I.destructive?"hover:bg-destructive/10 text-destructive":"hover:bg-accent"}
            `,children:[i.jsx("span",{className:"flex-shrink-0",children:I.icon}),i.jsx("span",{className:"flex-1",children:I.label}),I.shortcut&&i.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:I.shortcut})]})]},O))})}const B=96,G=294,Tl={Skull:vi,Flame:bi,Zap:wi,Sword:yi,Ghost:xi,Bug:gi,Eye:Dn,Target:mi,Radio:pi,Disc:hi,Music:fi,Rocket:ui,Crown:di,Anchor:ci,Sun:li,Moon:ai,Triangle:ii,Hexagon:oi,Circle:si,Square:ni,Star:ir,Heart:ri,Sparkles:ti,Hand:ei,Cat:Qo,Dog:Zo,Fish:Jo,Bird:Ko,Leaf:qo,Cloud:Go};function lt(e,t){const r=B/2;return`
    M ${e} ${t+r}
    Q ${e} ${t} ${e+B/2} ${t}
    Q ${e+B} ${t} ${e+B} ${t+r}
    L ${e+B} ${t+G-r}
    Q ${e+B} ${t+G} ${e+B/2} ${t+G}
    Q ${e} ${t+G} ${e} ${t+G-r}
    Z
  `}function Pl(e){const t=[];return e.contrast!==void 0&&e.contrast!==100&&t.push(`contrast(${e.contrast}%)`),e.brightness!==void 0&&e.brightness!==100&&t.push(`brightness(${e.brightness}%)`),e.grayscale!==void 0&&e.grayscale>0&&t.push(`grayscale(${e.grayscale}%)`),e.threshold&&t.push("contrast(300%)","grayscale(100%)"),e.hueRotate!==void 0&&e.hueRotate>0&&t.push(`hue-rotate(${e.hueRotate}deg)`),e.invert&&t.push("invert(100%)"),e.blur!==void 0&&e.blur>0&&t.push(`blur(${e.blur}px)`),e.saturate!==void 0&&e.saturate!==100&&t.push(`saturate(${e.saturate}%)`),e.sepia!==void 0&&e.sepia>0&&t.push(`sepia(${e.sepia}%)`),t.length>0?t.join(" "):"none"}function $l(e){if(e.colorize)return{mixBlendMode:"color"}}function gs({obj:e,isSelected:t,onSelect:r,onChange:n,deckX:s,deckY:o,stageScale:l,onDragStart:a,onDragMove:c,onDragEnd:d,onContextMenu:u}){const[h,x]=f.useState(!1),[p,y]=f.useState({objX:0,objY:0,clientX:0,clientY:0}),m=b=>{b.stopPropagation(),r(b),!e.locked&&(x(!0),y({objX:e.x,objY:e.y,clientX:b.clientX,clientY:b.clientY}),a==null||a())},g=b=>{b.preventDefault(),b.stopPropagation(),u&&u(b,e.id)},v=f.useCallback(b=>{if(h){const T=(b.clientX-p.clientX)/l,A=(b.clientY-p.clientY)/l,L=p.objX+T,D=p.objY+A;n({x:L,y:D}),c==null||c({...e,x:L,y:D})}},[h,p,l,n,c,e]),C=f.useCallback(()=>{h&&(x(!1),d==null||d())},[h,d]);f.useEffect(()=>{if(h)return window.addEventListener("mousemove",v),window.addEventListener("mouseup",C),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",C)}},[h,v,C]);const w=`translate(${e.x}, ${e.y}) rotate(${e.rotation}) scale(${e.scaleX}, ${e.scaleY})`,S=h?"grabbing":"grab",R=Pl(e),M=b=>e.colorize?i.jsxs("g",{children:[b,i.jsxs("g",{style:$l(e),children:[b,i.jsx("rect",{x:e.x-5,y:e.y-5,width:e.width*e.scaleX+10,height:e.height*e.scaleY+10,fill:e.colorize,opacity:.7,style:{mixBlendMode:"color"},pointerEvents:"none"})]})]}):b;if(e.type==="group"&&e.children&&e.children.length>0)return i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation}) scale(${e.scaleX}, ${e.scaleY})`,opacity:e.opacity,style:{cursor:S},onMouseDown:m,onContextMenu:g,children:[e.children.map(b=>i.jsx("g",{children:i.jsx(gs,{obj:b,isSelected:!1,onSelect:()=>{},onChange:T=>{const A=e.children.map(L=>L.id===b.id?{...L,...T}:L);n({children:A})},deckX:0,deckY:0,stageScale:1,onDragStart:a,onDragMove:c,onDragEnd:d})},b.id)),t&&i.jsx("rect",{x:0,y:0,width:e.width,height:e.height,fill:"none",stroke:"#ccff00",strokeWidth:2/l,strokeDasharray:`${8/l} ${4/l}`,style:{pointerEvents:"none"}})]});if(e.type==="text"){const b=e.gradientStops?`gradient-${e.id}`:null,T=b?`url(#${b})`:e.colorize||e.fill||"#ffffff";return i.jsxs(i.Fragment,{children:[e.gradientStops&&i.jsx("defs",{children:i.jsx("linearGradient",{id:b,x1:"0%",y1:"0%",x2:"100%",y2:"0%",gradientTransform:`rotate(${e.gradientAngle||0})`,children:e.gradientStops.map((L,D)=>i.jsx("stop",{offset:`${L.offset*100}%`,stopColor:L.color},D))})}),i.jsx("text",{transform:w,fill:T,fontSize:e.fontSize||24,fontFamily:e.fontFamily||"Oswald, sans-serif",opacity:e.opacity,style:{cursor:S,filter:R},onMouseDown:m,children:e.text||"Text"})]})}if(e.type==="path"&&e.pathPoints&&e.pathPoints.length>0){let b=`M ${e.pathPoints[0].x} ${e.pathPoints[0].y}`;for(let D=1;D<e.pathPoints.length;D++){const k=e.pathPoints[D];e.pathPoints[D-1],k.cp1x!==void 0&&k.cp1y!==void 0?k.cp2x!==void 0&&k.cp2y!==void 0?b+=` C ${k.cp1x} ${k.cp1y} ${k.cp2x} ${k.cp2y} ${k.x} ${k.y}`:b+=` Q ${k.cp1x} ${k.cp1y} ${k.x} ${k.y}`:b+=` L ${k.x} ${k.y}`}e.pathClosed&&(b+=" Z");const T=e.x+e.width/2,A=e.y+e.height/2,L=()=>{const D=e.strokeWidth||2;return!e.strokeDashStyle||e.strokeDashStyle==="solid"?"none":e.strokeDashStyle==="dashed"?`${D*4} ${D*3}`:e.strokeDashStyle==="dotted"?`${D*.5} ${D*2}`:"none"};return i.jsxs("g",{transform:`rotate(${e.rotation} ${T} ${A})`,children:[i.jsx("path",{d:b,fill:"none",stroke:"transparent",strokeWidth:Math.max(e.strokeWidth||2,12),style:{cursor:S},onMouseDown:m,strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:b,fill:e.pathClosed&&e.fill||"none",stroke:e.stroke||"#000000",strokeWidth:e.strokeWidth||2,strokeDasharray:L(),opacity:e.opacity,style:{filter:R,pointerEvents:"none"},strokeLinecap:"round",strokeLinejoin:"round"}),t&&i.jsx("path",{d:b,fill:"none",stroke:"#ccff00",strokeWidth:(e.strokeWidth||2)+2,strokeDasharray:"6 4",opacity:.6,style:{pointerEvents:"none"},strokeLinecap:"round",strokeLinejoin:"round"})]})}if(e.type==="shape"){const b={cursor:S,filter:R};let T=null;if(e.patternType){const k=e.patternPrimaryColor||"#1e3a8a",j=e.patternSecondaryColor||"#3b82f6",P=e.patternScale||20;switch(e.patternType){case"checkerboard":T=`repeating-linear-gradient(45deg, ${k} 0px, ${k} ${P}px, ${j} ${P}px, ${j} ${P*2}px), repeating-linear-gradient(-45deg, transparent 0px, transparent ${P}px, ${j} ${P}px, ${j} ${P*2}px)`;break;case"speed-lines":T=`repeating-linear-gradient(90deg, ${k} 0px, ${k} ${P/4}px, ${j} ${P/4}px, ${j} ${P/2}px)`;break;case"halftone":T=`radial-gradient(${k} ${P/6}px, ${j} ${P/6}px)`;break;case"diagonal-stripes":T=`repeating-linear-gradient(45deg, ${k} 0px, ${k} ${P}px, ${j} ${P}px, ${j} ${P*2}px)`;break;case"hexagons":T=`repeating-conic-gradient(from 30deg, ${k} 0deg 60deg, ${j} 60deg 120deg, ${k} 120deg 180deg, ${j} 180deg 240deg, ${k} 240deg 300deg, ${j} 300deg 360deg)`;break;case"crosshatch":T=`repeating-linear-gradient(0deg, transparent, transparent ${P}px, ${j} ${P}px, ${j} ${P+2}px), repeating-linear-gradient(90deg, transparent, transparent ${P}px, ${k} ${P}px, ${k} ${P+2}px)`;break;default:T=`linear-gradient(${k}, ${j})`}}const A=e.gradientStops?`gradient-${e.id}`:null,L=A?`url(#${A})`:e.fill||"#ffffff";if(T){const k=i.jsx("foreignObject",{x:e.x,y:e.y,width:e.width*e.scaleX,height:e.height*e.scaleY,style:b,onMouseDown:m,children:i.jsx("div",{style:{width:"100%",height:"100%",background:T,backgroundSize:e.patternType==="hexagons"?`${e.patternScale*2}px ${e.patternScale*2}px`:"auto",opacity:e.opacity,filter:R,border:t?"2px solid #ccff00":"none"}})});return M(k)}if(e.shapeType==="circle"){const k=i.jsxs(i.Fragment,{children:[e.gradientStops&&i.jsx("defs",{children:i.jsx("linearGradient",{id:A,x1:"0%",y1:"0%",x2:"100%",y2:"0%",gradientTransform:`rotate(${e.gradientAngle||0})`,children:e.gradientStops.map((j,P)=>i.jsx("stop",{offset:`${j.offset*100}%`,stopColor:j.color},P))})}),i.jsx("circle",{cx:e.x+e.width/2,cy:e.y+e.height/2,r:e.width/2*e.scaleX,fill:L,opacity:e.opacity,style:b,onMouseDown:m,stroke:t?"#ccff00":"none",strokeWidth:t?2:0})]});return M(k)}if(e.shapeType==="star"){const k=e.x+e.width/2,j=e.y+e.height/2,P=e.width/2*e.scaleX,X=P*.4,H=[];for(let O=0;O<10;O++){const N=O%2===0?P:X,$=Math.PI/5*O-Math.PI/2;H.push(`${k+N*Math.cos($)},${j+N*Math.sin($)}`)}const I=i.jsxs(i.Fragment,{children:[e.gradientStops&&i.jsx("defs",{children:i.jsx("linearGradient",{id:A,x1:"0%",y1:"0%",x2:"100%",y2:"0%",gradientTransform:`rotate(${e.gradientAngle||0})`,children:e.gradientStops.map((O,N)=>i.jsx("stop",{offset:`${O.offset*100}%`,stopColor:O.color},N))})}),i.jsx("polygon",{points:H.join(" "),fill:L,opacity:e.opacity,style:b,onMouseDown:m,stroke:t?"#ccff00":"none",strokeWidth:t?2:0})]});return M(I)}const D=i.jsxs(i.Fragment,{children:[e.gradientStops&&i.jsx("defs",{children:i.jsx("linearGradient",{id:A,x1:"0%",y1:"0%",x2:"100%",y2:"0%",gradientTransform:`rotate(${e.gradientAngle||0})`,children:e.gradientStops.map((k,j)=>i.jsx("stop",{offset:`${k.offset*100}%`,stopColor:k.color},j))})}),i.jsx("rect",{x:e.x,y:e.y,width:e.width*e.scaleX,height:e.height*e.scaleY,fill:L,opacity:e.opacity,style:b,onMouseDown:m,stroke:t?"#ccff00":"none",strokeWidth:t?2:0})]});return M(D)}if(e.type==="sticker"&&e.iconName){const b=Tl[e.iconName];if(!b)return null;const T=e.width*e.scaleX,A=e.strokeWidth||3,L=e.stroke||"#ffffff",D=e.solidFill?L:"none";return i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation}, ${T/2}, ${T/2})`,opacity:e.opacity,style:{cursor:S,filter:R},onMouseDown:m,children:[i.jsx("foreignObject",{width:T,height:T,children:i.jsx("div",{style:{width:T,height:T,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(b,{width:T,height:T,strokeWidth:A,stroke:L,fill:D})})}),t&&i.jsx("rect",{x:0,y:0,width:T,height:T,fill:"none",stroke:"#ccff00",strokeWidth:2,strokeDasharray:"4,2"})]})}if(e.type==="texture"&&e.textureUrl){const b=e.width*e.scaleX,T=e.height*e.scaleY,A=e.blendMode||"multiply";return i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation})`,style:{cursor:S,filter:R,mixBlendMode:A},onMouseDown:m,children:[i.jsx("image",{href:e.textureUrl,width:b,height:T,opacity:e.opacity,preserveAspectRatio:"xMidYMid slice"}),t&&i.jsx("rect",{x:0,y:0,width:b,height:T,fill:"none",stroke:"#ccff00",strokeWidth:2,strokeDasharray:"4,2"})]})}if(e.type==="line"){const b=e.lineEndX??60,T=e.lineEndY??0,A=e.lineCurve??0,L=e.stroke||"#ffffff",D=e.strokeWidth||3,k=e.lineCapStyle||"round",j=e.lineType||"straight",P=()=>{if(j==="dashed"&&!e.strokeDashStyle)return`${D*2},${D*2}`;if(!(!e.strokeDashStyle||e.strokeDashStyle==="solid")){if(e.strokeDashStyle==="dashed")return`${D*4} ${D*3}`;if(e.strokeDashStyle==="dotted")return`${D*.5} ${D*2}`}};let X="";if(j==="straight"||j==="dashed")X=`M 0 0 L ${b} ${T}`;else if(j==="curved"){const H=b/2,I=T/2-A;X=`M 0 0 Q ${H} ${I} ${b} ${T}`}else if(j==="zigzag"){const I=b/5,O=10;let N="M 0 0";for(let $=1;$<=5;$++){const z=$%2===1?-O:O;N+=` L ${I*$} ${T/5*$+z}`}X=N}return i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation})`,opacity:e.opacity,style:{cursor:S,filter:R},onMouseDown:m,children:[i.jsx("path",{d:X,stroke:L,strokeWidth:D,strokeLinecap:k,strokeDasharray:P(),fill:"none"}),i.jsx("path",{d:X,stroke:"transparent",strokeWidth:Math.max(D+10,15),fill:"none"}),t&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:0,cy:0,r:4,fill:"#ccff00",stroke:"#000",strokeWidth:1}),i.jsx("circle",{cx:b,cy:T,r:4,fill:"#ccff00",stroke:"#000",strokeWidth:1}),j==="curved"&&i.jsx("circle",{cx:b/2,cy:T/2-A,r:3,fill:"#ff6600",stroke:"#000",strokeWidth:1})]})]})}if(e.type==="path"&&e.pathPoints&&e.pathPoints.length>0){const b=e.stroke||"#ffffff",T=e.strokeWidth||3,A=e.lineCapStyle||"round",L=e.solidFill!==!1?e.fill||"#ffffff":"none";let D=`M ${e.pathPoints[0].x} ${e.pathPoints[0].y}`;for(let k=1;k<e.pathPoints.length;k++){const j=e.pathPoints[k],P=e.pathPoints[k-1];P.cp2x!==void 0&&P.cp2y!==void 0&&j.cp1x!==void 0&&j.cp1y!==void 0?D+=` C ${P.cp2x} ${P.cp2y}, ${j.cp1x} ${j.cp1y}, ${j.x} ${j.y}`:P.cp2x!==void 0&&P.cp2y!==void 0?D+=` Q ${P.cp2x} ${P.cp2y}, ${j.x} ${j.y}`:D+=` L ${j.x} ${j.y}`}return e.pathClosed&&(D+=" Z"),i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation}) scale(${e.scaleX}, ${e.scaleY})`,opacity:e.opacity,style:{cursor:S,filter:R},onMouseDown:m,children:[i.jsx("path",{d:D,stroke:b,strokeWidth:T,strokeLinecap:A,strokeLinejoin:"round",fill:L}),i.jsx("path",{d:D,stroke:"transparent",strokeWidth:Math.max(T+10,15),fill:"none"}),t&&i.jsx(i.Fragment,{children:e.pathPoints.map((k,j)=>i.jsxs("g",{children:[i.jsx("circle",{cx:k.x,cy:k.y,r:4,fill:"#00d9ff",stroke:"#fff",strokeWidth:1.5}),k.cp1x!==void 0&&k.cp1y!==void 0&&i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:k.x,y1:k.y,x2:k.cp1x,y2:k.cp1y,stroke:"#ff6600",strokeWidth:1,strokeDasharray:"3,3"}),i.jsx("circle",{cx:k.cp1x,cy:k.cp1y,r:3,fill:"#ff6600",stroke:"#fff",strokeWidth:1})]}),k.cp2x!==void 0&&k.cp2y!==void 0&&i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:k.x,y1:k.y,x2:k.cp2x,y2:k.cp2y,stroke:"#ff6600",strokeWidth:1,strokeDasharray:"3,3"}),i.jsx("circle",{cx:k.cp2x,cy:k.cp2y,r:3,fill:"#ff6600",stroke:"#fff",strokeWidth:1})]})]},`point-${j}`))})]})}if(e.type==="image"&&e.src){const b=e.width*e.scaleX,T=e.height*e.scaleY,A=i.jsxs("g",{transform:`translate(${e.x}, ${e.y}) rotate(${e.rotation}, ${b/2}, ${T/2})`,opacity:e.opacity,style:{cursor:S,filter:R},onMouseDown:m,children:[i.jsx("image",{href:e.src,width:b,height:T,preserveAspectRatio:"xMidYMid meet"}),t&&i.jsx("rect",{x:0,y:0,width:b,height:T,fill:"none",stroke:"#ccff00",strokeWidth:2,strokeDasharray:"4,2"})]});return M(A)}return null}function ef(){const e=f.useRef(null),t=f.useRef(null),[r,n]=f.useState({width:800,height:600}),[s,o]=f.useState(null),[l,a]=f.useState([]),[c,d]=f.useState(!1),[u,h]=f.useState(null),{objects:x,selectedId:p,selectedIds:y,selectObject:m,toggleSelectObject:g,updateObject:v,addObject:C,stageScale:w,setStageScale:S,saveToHistory:R,textureOverlays:M,showHardwareGuide:b,showRulers:T,activeTool:A,setActiveTool:L,backgroundColor:D}=ke();f.useEffect(()=>{const _=()=>{e.current&&n({width:e.current.offsetWidth,height:e.current.offsetHeight})};return _(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const k=r.width/2-B*w/2,j=r.height/2-G*w/2,P=f.useCallback(_=>{_.preventDefault();const W=1.1,Z=w,J=_.deltaY<0?Z*W:Z/W;S(Math.max(.5,Math.min(3,J)))},[w,S]),X=f.useCallback(_=>{if(_.touches.length===2){_.preventDefault();const W=_.touches[0],Z=_.touches[1],J=Math.hypot(Z.clientX-W.clientX,Z.clientY-W.clientY);o(J)}},[]),H=f.useCallback(_=>{if(_.touches.length===2&&s){_.preventDefault();const W=_.touches[0],Z=_.touches[1],J=Math.hypot(Z.clientX-W.clientX,Z.clientY-W.clientY),Se=J/s,He=w*Se;S(Math.max(.5,Math.min(3,He))),o(J)}},[s,w,S]),I=f.useCallback(()=>{o(null)},[]),O=f.useCallback(_=>{var Z;_.preventDefault();const W=_.dataTransfer.getData("application/json");if(W)try{const J=JSON.parse(W),Se=(Z=e.current)==null?void 0:Z.getBoundingClientRect();if(!Se)return;const He=(_.clientX-Se.left-k)/w,ye=(_.clientY-Se.top-j)/w;C({type:J.type||"shape",x:He-(J.width||30)/2,y:ye-(J.height||30)/2,width:J.width||60,height:J.height||60,rotation:0,opacity:1,scaleX:1,scaleY:1,shapeType:J.shapeType,fill:J.fill||"#ffffff",text:J.text,fontSize:J.fontSize})}catch(J){console.error("Failed to parse drop data",J)}},[C,w,k,j]),N=f.useCallback(_=>{_.preventDefault()},[]),$=f.useCallback(_=>{A!=="pen"&&_.target===_.currentTarget&&m(null)},[m,A]),z=f.useCallback((_,W)=>{W!=null&&W.shiftKey?g(_):m(_)},[m,g]),q=f.useCallback((_,W,Z,J,Se,He)=>{L(null);const ye=[];if((_.match(/[MLQCmlqc][^MLQCmlqc]*/g)||[]).forEach(Xe=>{const pe=Xe[0],Q=Xe.slice(1).trim().split(/[\s,]+/).map(Number);pe==="M"||pe==="m"?ye.push({x:Q[0],y:Q[1]}):pe==="L"||pe==="l"?ye.push({x:Q[0],y:Q[1]}):pe==="Q"||pe==="q"?ye.push({x:Q[2],y:Q[3],cp1x:Q[0],cp1y:Q[1]}):(pe==="C"||pe==="c")&&ye.push({x:Q[4],y:Q[5],cp1x:Q[0],cp1y:Q[1],cp2x:Q[2],cp2y:Q[3]})}),ye.length>0){const Xe=ye.map(Ut=>Ut.x),pe=ye.map(Ut=>Ut.y),Q=Math.min(...Xe),No=Math.max(...Xe),_r=Math.min(...pe),Co=Math.max(...pe),Ro=No-Q||W,jo=Co-_r||W,st=W*2,Ao={type:"path",x:Q-st,y:_r-st,width:Ro+st*2,height:jo+st*2,rotation:0,opacity:J,scaleX:1,scaleY:1,pathPoints:ye,pathClosed:!1,stroke:Z,strokeWidth:W,strokeDashStyle:Se,fill:"none"};C(Ao),He==="draw"&&m(null)}},[C,L,m]),ie=M.filter(_=>_.enabled);return i.jsxs("div",{className:"relative flex-1 h-full overflow-hidden",ref:e,onDrop:O,onDragOver:N,onClick:$,onWheel:P,onTouchStart:X,onTouchMove:H,onTouchEnd:I,children:[i.jsx("div",{className:"absolute inset-0 dot-grid bg-background"}),i.jsxs("svg",{ref:t,className:"absolute inset-0",width:r.width,height:r.height,onClick:$,children:[i.jsxs("defs",{children:[i.jsx("clipPath",{id:"deck-clip",children:i.jsx("path",{d:lt(0,0),transform:`translate(${k}, ${j}) scale(${w})`})}),i.jsxs("pattern",{id:"scratched-wood-pattern",patternUnits:"userSpaceOnUse",width:"40",height:"40",children:[i.jsx("line",{x1:"0",y1:"5",x2:"40",y2:"6",stroke:"rgba(0,0,0,0.3)",strokeWidth:"0.5"}),i.jsx("line",{x1:"0",y1:"12",x2:"40",y2:"11",stroke:"rgba(0,0,0,0.2)",strokeWidth:"0.3"}),i.jsx("line",{x1:"0",y1:"20",x2:"40",y2:"21",stroke:"rgba(0,0,0,0.25)",strokeWidth:"0.4"}),i.jsx("line",{x1:"0",y1:"28",x2:"40",y2:"27",stroke:"rgba(0,0,0,0.3)",strokeWidth:"0.3"}),i.jsx("line",{x1:"0",y1:"35",x2:"40",y2:"36",stroke:"rgba(0,0,0,0.2)",strokeWidth:"0.5"}),i.jsx("line",{x1:"8",y1:"0",x2:"9",y2:"40",stroke:"rgba(0,0,0,0.15)",strokeWidth:"0.3"}),i.jsx("line",{x1:"22",y1:"0",x2:"21",y2:"40",stroke:"rgba(0,0,0,0.2)",strokeWidth:"0.2"})]}),i.jsxs("pattern",{id:"grip-tape-dust-pattern",patternUnits:"userSpaceOnUse",width:"30",height:"30",children:[i.jsx("circle",{cx:"5",cy:"8",r:"0.8",fill:"rgba(255,255,255,0.4)"}),i.jsx("circle",{cx:"12",cy:"3",r:"0.5",fill:"rgba(255,255,255,0.3)"}),i.jsx("circle",{cx:"22",cy:"12",r:"1",fill:"rgba(255,255,255,0.35)"}),i.jsx("circle",{cx:"8",cy:"18",r:"0.6",fill:"rgba(255,255,255,0.4)"}),i.jsx("circle",{cx:"26",cy:"22",r:"0.7",fill:"rgba(255,255,255,0.3)"}),i.jsx("circle",{cx:"15",cy:"26",r:"0.9",fill:"rgba(255,255,255,0.35)"})]}),i.jsx("pattern",{id:"halftone-dots-pattern",patternUnits:"userSpaceOnUse",width:"8",height:"8",children:i.jsx("circle",{cx:"4",cy:"4",r:"1.5",fill:"rgba(0,0,0,0.4)"})})]}),i.jsxs("g",{clipPath:"url(#deck-clip)",children:[i.jsx("path",{d:lt(0,0),transform:`translate(${k}, ${j}) scale(${w})`,fill:D}),i.jsxs("g",{transform:`translate(${k}, ${j}) scale(${w})`,children:[x.map(_=>i.jsx(gs,{obj:_,isSelected:y.includes(_.id),onSelect:W=>z(_.id,W),onChange:W=>{v(_.id,W)},deckX:k,deckY:j,stageScale:w,onDragStart:()=>{R(),d(!0)},onDragMove:W=>{const Z=x.filter(Se=>Se.id!==W.id),J=Rl(W,Z,5);a(J)},onDragEnd:()=>{d(!1),a([])},onContextMenu:(W,Z)=>{h({x:W.clientX,y:W.clientY,objectId:Z})}},_.id)),p&&A!=="pen"&&!c&&(()=>{const _=x.find(W=>W.id===p);return!_||_.locked?null:i.jsx(Nl,{object:_,stageScale:w,deckX:k,deckY:j,onUpdate:W=>{v(p,W)},onStartTransform:()=>{R()},onEndTransform:()=>{}})})()]}),c&&i.jsx(Cl,{guides:l,deckX:k,deckY:j,stageScale:w}),i.jsx(jl,{deckX:k,deckY:j,stageScale:w,enabled:T}),ie.map(_=>i.jsx("g",{style:{mixBlendMode:_.blendMode,opacity:_.opacity},children:i.jsx("path",{d:lt(0,0),transform:`translate(${k}, ${j}) scale(${w})`,fill:`url(#${_.id}-pattern)`})},_.id))]}),i.jsx("path",{d:lt(0,0),transform:`translate(${k}, ${j}) scale(${w})`,stroke:"#ccff00",strokeWidth:2,fill:"none",pointerEvents:"none"}),b&&A!=="pen"&&i.jsxs("g",{transform:`translate(${k}, ${j}) scale(${w})`,pointerEvents:"none",children:[i.jsx("rect",{x:B/2-20,y:35,width:40,height:18,fill:"rgba(255, 102, 0, 0.3)",stroke:"#ff6600",strokeWidth:1,strokeDasharray:"3,2"}),i.jsx("circle",{cx:B/2-12,cy:40,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:B/2+12,cy:40,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:B/2-12,cy:48,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:B/2+12,cy:48,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("rect",{x:B/2-20,y:G-53,width:40,height:18,fill:"rgba(255, 102, 0, 0.3)",stroke:"#ff6600",strokeWidth:1,strokeDasharray:"3,2"}),i.jsx("circle",{cx:B/2-12,cy:G-48,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:B/2+12,cy:G-48,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:B/2-12,cy:G-40,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("circle",{cx:B/2+12,cy:G-40,r:2.5,fill:"rgba(255, 102, 0, 0.5)",stroke:"#ff6600",strokeWidth:.5}),i.jsx("text",{x:B/2,y:28,textAnchor:"middle",fontSize:6,fontFamily:"JetBrains Mono, monospace",fill:"#ff6600",children:"FRONT TRUCK"}),i.jsx("text",{x:B/2,y:G-58,textAnchor:"middle",fontSize:6,fontFamily:"JetBrains Mono, monospace",fill:"#ff6600",children:"REAR TRUCK"})]}),x.length===0&&A!=="pen"&&i.jsxs("g",{transform:`translate(${k}, ${j}) scale(${w})`,pointerEvents:"none",children:[i.jsx("text",{x:B/2,y:G/2-40,textAnchor:"middle",fontSize:16/w,fontFamily:"Oswald, sans-serif",fill:"#ccff00",fontWeight:"bold",children:"Welcome to DeckForge"}),i.jsx("text",{x:B/2,y:G/2-20,textAnchor:"middle",fontSize:11/w,fontFamily:"sans-serif",fill:"#888888",children:"Design your custom fingerboard deck"}),i.jsxs("g",{transform:`translate(${B/2-60}, ${G/2+10})`,children:[i.jsxs("g",{children:[i.jsx("rect",{x:0,y:0,width:35,height:35,fill:"rgba(204, 255, 0, 0.1)",stroke:"#ccff00",strokeWidth:1/w,rx:3/w}),i.jsx("text",{x:17.5,y:23,textAnchor:"middle",fontSize:20/w,fill:"#ccff00",children:"T"})]}),i.jsxs("g",{transform:"translate(40, 0)",children:[i.jsx("rect",{x:0,y:0,width:35,height:35,fill:"rgba(204, 255, 0, 0.1)",stroke:"#ccff00",strokeWidth:1/w,rx:3/w}),i.jsx("text",{x:17.5,y:23,textAnchor:"middle",fontSize:20/w,fill:"#ccff00",children:"S"})]}),i.jsxs("g",{transform:"translate(80, 0)",children:[i.jsx("rect",{x:0,y:0,width:35,height:35,fill:"rgba(204, 255, 0, 0.1)",stroke:"#ccff00",strokeWidth:1/w,rx:3/w}),i.jsx("text",{x:17.5,y:23,textAnchor:"middle",fontSize:20/w,fill:"#ccff00",children:"U"})]})]}),i.jsx("text",{x:B/2,y:G/2+60,textAnchor:"middle",fontSize:9/w,fontFamily:"monospace",fill:"#666666",children:"Press T for Text    S for Stickers    U to Upload"}),i.jsx("text",{x:B/2,y:G/2+75,textAnchor:"middle",fontSize:9/w,fontFamily:"monospace",fill:"#555555",children:"Or click the tool rail on the left"}),i.jsxs("g",{transform:`translate(-10, ${G/2})`,children:[i.jsx("path",{d:"M 0 0 L -15 -5 L -15 5 Z",fill:"#ccff00",opacity:.6}),i.jsx("line",{x1:-15,y1:0,x2:-30,y2:0,stroke:"#ccff00",strokeWidth:2/w,opacity:.6})]})]}),i.jsx(kl,{isActive:A==="pen",onComplete:q,onCancel:()=>L(null),stageRef:t,deckX:k,deckY:j,stageScale:w})]}),i.jsx(El,{}),u&&i.jsx(Al,{x:u.x,y:u.y,objectId:u.objectId,onClose:()=>h(null)})]})}const Ol="http://localhost:3000",xs="https://hvulzgcqdwurrhaebhyy.supabase.co",Ml="",tf=$i(xs,Ml);let Rt=null;function Vt(e){Rt=e}function Dl(){return Rt}async function ee(e,t={}){const r={"Content-Type":"application/json",...t.headers};return Rt&&(r.Authorization=`Bearer ${Rt}`),await fetch(`${Ol}${e}`,{...t,headers:r})}const ct={async signup(e,t,r){var o;const n=await ee("/api/auth/signup",{method:"POST",body:JSON.stringify({email:e,password:t,username:r})});if(!n.ok){const l=await n.json();throw new Error(l.error||"Signup failed")}const s=await n.json();return(o=s.session)!=null&&o.access_token&&Vt(s.session.access_token),s},async login(e,t){var s;const r=await ee("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});if(!r.ok){const o=await r.json();throw new Error(o.error||"Login failed")}const n=await r.json();return(s=n.session)!=null&&s.access_token&&Vt(n.session.access_token),n},async logout(){const e=await ee("/api/auth/logout",{method:"POST"});if(!e.ok){const t=await e.json();throw new Error(t.error||"Logout failed")}return Vt(null),e.json()},async me(){const e=await ee("/api/auth/me");if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to get user")}return e.json()}},rf={async list(){const e=await ee("/api/designs");if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to list designs")}return e.json()},async get(e){const t=await ee(`/api/designs/${e}`);if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to get design")}return t.json()},async create(e){const t=await ee("/api/designs",{method:"POST",body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create design")}return t.json()},async update(e,t){const r=await ee(`/api/designs/${e}`,{method:"PATCH",body:JSON.stringify(t)});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to update design")}return r.json()},async delete(e){const t=await ee(`/api/designs/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete design")}return t.json()}},nf={async list(){const e=await ee("/api/assets");if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to list assets")}return e.json()},async getUploadUrl(e,t){const r=await ee("/api/assets/upload-url",{method:"POST",body:JSON.stringify({filename:e,contentType:t})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to get upload URL")}return r.json()},async create(e){const t=await ee("/api/assets",{method:"POST",body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to create asset")}return t.json()},async delete(e){const t=await ee(`/api/assets/${e}`,{method:"DELETE"});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete asset")}return t.json()},async upload(e){const{uploadUrl:t,path:r}=await this.getUploadUrl(e.name,e.type);if(!(await fetch(t,{method:"PUT",body:e,headers:{"Content-Type":e.type}})).ok)throw new Error("Failed to upload file");const s=await Il(e),o=`${xs}/storage/v1/object/public/user-assets/${r}`;return await this.create({name:e.name,file_url:o,file_type:e.type,file_size:e.size,width:s.width,height:s.height}),{url:o,width:s.width,height:s.height}}};function Il(e){return new Promise((t,r)=>{const n=new Image,s=URL.createObjectURL(e);n.onload=()=>{URL.revokeObjectURL(s),t({width:n.width,height:n.height})},n.onerror=()=>{URL.revokeObjectURL(s),r(new Error("Failed to load image"))},n.src=s})}const dt={async list(){const e=await ee("/api/brand-kits");if(!e.ok)throw new Error("Failed to list brand kits");return e.json()},async create(e){const t=await ee("/api/brand-kits",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create brand kit");return t.json()},async update(e,t){const r=await ee(`/api/brand-kits/${e}`,{method:"PATCH",body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update brand kit");return r.json()},async delete(e){const t=await ee(`/api/brand-kits/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete brand kit");return t.json()}};function _l(e,t){let r;try{r=e()}catch{return}return{getItem:s=>{var o;const l=c=>c===null?null:JSON.parse(c,void 0),a=(o=r.getItem(s))!=null?o:null;return a instanceof Promise?a.then(l):l(a)},setItem:(s,o)=>r.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>r.removeItem(s)}}const fr=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return fr(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return fr(n)(r)}}}},Ll=(e,t)=>(r,n,s)=>{let o={storage:_l(()=>localStorage),partialize:g=>g,version:0,merge:(g,v)=>({...v,...g}),...t},l=!1,a=0;const c=new Set,d=new Set;let u=o.storage;if(!u)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...g)},n,s);const h=()=>{const g=o.partialize({...n()});return u.setItem(o.name,{state:g,version:o.version})},x=s.setState;s.setState=(g,v)=>(x(g,v),h());const p=e((...g)=>(r(...g),h()),n,s);s.getInitialState=()=>p;let y;const m=()=>{var g,v;if(!u)return;const C=++a;l=!1,c.forEach(S=>{var R;return S((R=n())!=null?R:p)});const w=((v=o.onRehydrateStorage)==null?void 0:v.call(o,(g=n())!=null?g:p))||void 0;return fr(u.getItem.bind(u))(o.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==o.version){if(o.migrate){const R=o.migrate(S.state,S.version);return R instanceof Promise?R.then(M=>[!0,M]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var R;if(C!==a)return;const[M,b]=S;if(y=o.merge(b,(R=n())!=null?R:p),r(y,!0),M)return h()}).then(()=>{C===a&&(w==null||w(y,void 0),y=n(),l=!0,d.forEach(S=>S(y)))}).catch(S=>{C===a&&(w==null||w(void 0,S))})};return s.persist={setOptions:g=>{o={...o,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>m(),hasHydrated:()=>l,onHydrate:g=>(c.add(g),()=>{c.delete(g)}),onFinishHydration:g=>(d.add(g),()=>{d.delete(g)})},o.skipHydration||m(),y||p},Fl=Ll,Wl=es()(Fl((e,t)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,signup:async(r,n,s)=>{e({isLoading:!0,error:null});try{const o=await ct.signup(r,n,s);e({user:o.user,isAuthenticated:!0,isLoading:!1})}catch(o){throw e({error:o instanceof Error?o.message:"Signup failed",isLoading:!1}),o}},login:async(r,n)=>{e({isLoading:!0,error:null});try{const s=await ct.login(r,n);e({user:s.user,isAuthenticated:!0,isLoading:!1})}catch(s){throw e({error:s instanceof Error?s.message:"Login failed",isLoading:!1}),s}},logout:async()=>{e({isLoading:!0,error:null});try{await ct.logout(),e({user:null,isAuthenticated:!1,isLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Logout failed",isLoading:!1})}},checkAuth:async()=>{if(!Dl()){e({isAuthenticated:!1,user:null});return}e({isLoading:!0});try{const n=await ct.me();e({user:n.user,isAuthenticated:!0,isLoading:!1})}catch{e({user:null,isAuthenticated:!1,isLoading:!1})}},clearError:()=>e({error:null})}),{name:"deckforge-auth",partialize:e=>({})})),fe=f.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));fe.displayName="Input";var Ul=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zl=Ul.reduce((e,t)=>{const r=Qn(`Primitive.${t}`),n=f.forwardRef((s,o)=>{const{asChild:l,...a}=s,c=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...a,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Bl="Label",ys=f.forwardRef((e,t)=>i.jsx(zl.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));ys.displayName=Bl;var ws=ys;const Hl=Yn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),me=f.forwardRef(({className:e,...t},r)=>i.jsx(ws,{ref:r,className:ce(Hl(),e),...t}));me.displayName=ws.displayName;function bs(e,t){return function(){return e.apply(t,arguments)}}const{toString:Xl}=Object.prototype,{getPrototypeOf:Cr}=Object,{iterator:Mt,toStringTag:vs}=Symbol,Dt=(e=>t=>{const r=Xl.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ge=e=>(e=e.toLowerCase(),t=>Dt(t)===e),It=e=>t=>typeof t===e,{isArray:Be}=Array,Ue=It("undefined");function Qe(e){return e!==null&&!Ue(e)&&e.constructor!==null&&!Ue(e.constructor)&&ne(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ss=ge("ArrayBuffer");function Yl(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ss(e.buffer),t}const Vl=It("string"),ne=It("function"),Es=It("number"),et=e=>e!==null&&typeof e=="object",Gl=e=>e===!0||e===!1,yt=e=>{if(Dt(e)!=="object")return!1;const t=Cr(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(vs in e)&&!(Mt in e)},ql=e=>{if(!et(e)||Qe(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Kl=ge("Date"),Jl=ge("File"),Zl=ge("Blob"),Ql=ge("FileList"),ec=e=>et(e)&&ne(e.pipe),tc=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ne(e.append)&&((t=Dt(e))==="formdata"||t==="object"&&ne(e.toString)&&e.toString()==="[object FormData]"))},rc=ge("URLSearchParams"),[nc,sc,oc,ic]=["ReadableStream","Request","Response","Headers"].map(ge),ac=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tt(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Be(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(Qe(e))return;const o=r?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let a;for(n=0;n<l;n++)a=o[n],t.call(null,e[a],a,e)}}function ks(e,t){if(Qe(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const Te=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ns=e=>!Ue(e)&&e!==Te;function hr(){const{caseless:e,skipUndefined:t}=Ns(this)&&this||{},r={},n=(s,o)=>{const l=e&&ks(r,o)||o;yt(r[l])&&yt(s)?r[l]=hr(r[l],s):yt(s)?r[l]=hr({},s):Be(s)?r[l]=s.slice():(!t||!Ue(s))&&(r[l]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&tt(arguments[s],n);return r}const lc=(e,t,r,{allOwnKeys:n}={})=>(tt(t,(s,o)=>{r&&ne(s)?Object.defineProperty(e,o,{value:bs(s,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e),cc=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),dc=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},uc=(e,t,r,n)=>{let s,o,l;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)l=s[o],(!n||n(l,e,t))&&!a[l]&&(t[l]=e[l],a[l]=!0);e=r!==!1&&Cr(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},fc=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},hc=e=>{if(!e)return null;if(Be(e))return e;let t=e.length;if(!Es(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},pc=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Cr(Uint8Array)),mc=(e,t)=>{const n=(e&&e[Mt]).call(e);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},gc=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},xc=ge("HTMLFormElement"),yc=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),en=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),wc=ge("RegExp"),Cs=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};tt(r,(s,o)=>{let l;(l=t(s,o,e))!==!1&&(n[o]=l||s)}),Object.defineProperties(e,n)},bc=e=>{Cs(e,(t,r)=>{if(ne(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(ne(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},vc=(e,t)=>{const r={},n=s=>{s.forEach(o=>{r[o]=!0})};return Be(e)?n(e):n(String(e).split(t)),r},Sc=()=>{},Ec=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function kc(e){return!!(e&&ne(e.append)&&e[vs]==="FormData"&&e[Mt])}const Nc=e=>{const t=new Array(10),r=(n,s)=>{if(et(n)){if(t.indexOf(n)>=0)return;if(Qe(n))return n;if(!("toJSON"in n)){t[s]=n;const o=Be(n)?[]:{};return tt(n,(l,a)=>{const c=r(l,s+1);!Ue(c)&&(o[a]=c)}),t[s]=void 0,o}}return n};return r(e,0)},Cc=ge("AsyncFunction"),Rc=e=>e&&(et(e)||ne(e))&&ne(e.then)&&ne(e.catch),Rs=((e,t)=>e?setImmediate:t?((r,n)=>(Te.addEventListener("message",({source:s,data:o})=>{s===Te&&o===r&&n.length&&n.shift()()},!1),s=>{n.push(s),Te.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ne(Te.postMessage)),jc=typeof queueMicrotask<"u"?queueMicrotask.bind(Te):typeof process<"u"&&process.nextTick||Rs,Ac=e=>e!=null&&ne(e[Mt]),E={isArray:Be,isArrayBuffer:Ss,isBuffer:Qe,isFormData:tc,isArrayBufferView:Yl,isString:Vl,isNumber:Es,isBoolean:Gl,isObject:et,isPlainObject:yt,isEmptyObject:ql,isReadableStream:nc,isRequest:sc,isResponse:oc,isHeaders:ic,isUndefined:Ue,isDate:Kl,isFile:Jl,isBlob:Zl,isRegExp:wc,isFunction:ne,isStream:ec,isURLSearchParams:rc,isTypedArray:pc,isFileList:Ql,forEach:tt,merge:hr,extend:lc,trim:ac,stripBOM:cc,inherits:dc,toFlatObject:uc,kindOf:Dt,kindOfTest:ge,endsWith:fc,toArray:hc,forEachEntry:mc,matchAll:gc,isHTMLForm:xc,hasOwnProperty:en,hasOwnProp:en,reduceDescriptors:Cs,freezeMethods:bc,toObjectSet:vc,toCamelCase:yc,noop:Sc,toFiniteNumber:Ec,findKey:ks,global:Te,isContextDefined:Ns,isSpecCompliantForm:kc,toJSONObject:Nc,isAsyncFn:Cc,isThenable:Rc,setImmediate:Rs,asap:jc,isIterable:Ac};let F=class js extends Error{static from(t,r,n,s,o,l){const a=new js(t.message,r||t.code,n,s,o);return a.cause=t,a.name=t.name,l&&Object.assign(a,l),a}constructor(t,r,n,s,o){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:E.toJSONObject(this.config),code:this.code,status:this.status}}};F.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";F.ERR_BAD_OPTION="ERR_BAD_OPTION";F.ECONNABORTED="ECONNABORTED";F.ETIMEDOUT="ETIMEDOUT";F.ERR_NETWORK="ERR_NETWORK";F.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";F.ERR_DEPRECATED="ERR_DEPRECATED";F.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";F.ERR_BAD_REQUEST="ERR_BAD_REQUEST";F.ERR_CANCELED="ERR_CANCELED";F.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";F.ERR_INVALID_URL="ERR_INVALID_URL";const Tc=null;function pr(e){return E.isPlainObject(e)||E.isArray(e)}function As(e){return E.endsWith(e,"[]")?e.slice(0,-2):e}function tn(e,t,r){return e?e.concat(t).map(function(s,o){return s=As(s),!r&&o?"["+s+"]":s}).join(r?".":""):t}function Pc(e){return E.isArray(e)&&!e.some(pr)}const $c=E.toFlatObject(E,{},null,function(t){return/^is[A-Z]/.test(t)});function _t(e,t,r){if(!E.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=E.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!E.isUndefined(g[m])});const n=r.metaTokens,s=r.visitor||u,o=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&E.isSpecCompliantForm(t);if(!E.isFunction(s))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(E.isDate(y))return y.toISOString();if(E.isBoolean(y))return y.toString();if(!c&&E.isBlob(y))throw new F("Blob is not supported. Use a Buffer instead.");return E.isArrayBuffer(y)||E.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,m,g){let v=y;if(y&&!g&&typeof y=="object"){if(E.endsWith(m,"{}"))m=n?m:m.slice(0,-2),y=JSON.stringify(y);else if(E.isArray(y)&&Pc(y)||(E.isFileList(y)||E.endsWith(m,"[]"))&&(v=E.toArray(y)))return m=As(m),v.forEach(function(w,S){!(E.isUndefined(w)||w===null)&&t.append(l===!0?tn([m],S,o):l===null?m:m+"[]",d(w))}),!1}return pr(y)?!0:(t.append(tn(g,m,o),d(y)),!1)}const h=[],x=Object.assign($c,{defaultVisitor:u,convertValue:d,isVisitable:pr});function p(y,m){if(!E.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(y),E.forEach(y,function(v,C){(!(E.isUndefined(v)||v===null)&&s.call(t,v,E.isString(C)?C.trim():C,m,x))===!0&&p(v,m?m.concat(C):[C])}),h.pop()}}if(!E.isObject(e))throw new TypeError("data must be an object");return p(e),t}function rn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Rr(e,t){this._pairs=[],e&&_t(e,this,t)}const Ts=Rr.prototype;Ts.append=function(t,r){this._pairs.push([t,r])};Ts.toString=function(t){const r=t?function(n){return t.call(this,n,rn)}:rn;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Oc(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ps(e,t,r){if(!t)return e;const n=r&&r.encode||Oc,s=E.isFunction(r)?{serialize:r}:r,o=s&&s.serialize;let l;if(o?l=o(t,s):l=E.isURLSearchParams(t)?t.toString():new Rr(t,s).toString(n),l){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class nn{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){E.forEach(this.handlers,function(n){n!==null&&t(n)})}}const $s={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mc=typeof URLSearchParams<"u"?URLSearchParams:Rr,Dc=typeof FormData<"u"?FormData:null,Ic=typeof Blob<"u"?Blob:null,_c={isBrowser:!0,classes:{URLSearchParams:Mc,FormData:Dc,Blob:Ic},protocols:["http","https","file","blob","url","data"]},jr=typeof window<"u"&&typeof document<"u",mr=typeof navigator=="object"&&navigator||void 0,Lc=jr&&(!mr||["ReactNative","NativeScript","NS"].indexOf(mr.product)<0),Fc=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Wc=jr&&window.location.href||"http://localhost",Uc=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jr,hasStandardBrowserEnv:Lc,hasStandardBrowserWebWorkerEnv:Fc,navigator:mr,origin:Wc},Symbol.toStringTag,{value:"Module"})),te={...Uc,..._c};function zc(e,t){return _t(e,new te.classes.URLSearchParams,{visitor:function(r,n,s,o){return te.isNode&&E.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function Bc(e){return E.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Hc(e){const t={},r=Object.keys(e);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],t[o]=e[o];return t}function Os(e){function t(r,n,s,o){let l=r[o++];if(l==="__proto__")return!0;const a=Number.isFinite(+l),c=o>=r.length;return l=!l&&E.isArray(s)?s.length:l,c?(E.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!a):((!s[l]||!E.isObject(s[l]))&&(s[l]=[]),t(r,n,s[l],o)&&E.isArray(s[l])&&(s[l]=Hc(s[l])),!a)}if(E.isFormData(e)&&E.isFunction(e.entries)){const r={};return E.forEachEntry(e,(n,s)=>{t(Bc(n),s,r,0)}),r}return null}function Xc(e,t,r){if(E.isString(e))try{return(t||JSON.parse)(e),E.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const rt={transitional:$s,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=E.isObject(t);if(o&&E.isHTMLForm(t)&&(t=new FormData(t)),E.isFormData(t))return s?JSON.stringify(Os(t)):t;if(E.isArrayBuffer(t)||E.isBuffer(t)||E.isStream(t)||E.isFile(t)||E.isBlob(t)||E.isReadableStream(t))return t;if(E.isArrayBufferView(t))return t.buffer;if(E.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return zc(t,this.formSerializer).toString();if((a=E.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return _t(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),Xc(t)):t}],transformResponse:[function(t){const r=this.transitional||rt.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(E.isResponse(t)||E.isReadableStream(t))return t;if(t&&E.isString(t)&&(n&&!this.responseType||s)){const l=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(a){if(l)throw a.name==="SyntaxError"?F.from(a,F.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:te.classes.FormData,Blob:te.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};E.forEach(["delete","get","head","post","put","patch"],e=>{rt.headers[e]={}});const Yc=E.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vc=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),r=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!r||t[r]&&Yc[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},sn=Symbol("internals");function Ge(e){return e&&String(e).trim().toLowerCase()}function wt(e){return e===!1||e==null?e:E.isArray(e)?e.map(wt):String(e)}function Gc(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const qc=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Gt(e,t,r,n,s){if(E.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!E.isString(t)){if(E.isString(n))return t.indexOf(n)!==-1;if(E.isRegExp(n))return n.test(t)}}function Kc(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Jc(e,t){const r=E.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,o,l){return this[n].call(this,t,s,o,l)},configurable:!0})})}let se=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function o(a,c,d){const u=Ge(c);if(!u)throw new Error("header name must be a non-empty string");const h=E.findKey(s,u);(!h||s[h]===void 0||d===!0||d===void 0&&s[h]!==!1)&&(s[h||c]=wt(a))}const l=(a,c)=>E.forEach(a,(d,u)=>o(d,u,c));if(E.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(E.isString(t)&&(t=t.trim())&&!qc(t))l(Vc(t),r);else if(E.isObject(t)&&E.isIterable(t)){let a={},c,d;for(const u of t){if(!E.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[d=u[0]]=(c=a[d])?E.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(a,r)}else t!=null&&o(r,t,n);return this}get(t,r){if(t=Ge(t),t){const n=E.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return Gc(s);if(E.isFunction(r))return r.call(this,s,n);if(E.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Ge(t),t){const n=E.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Gt(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function o(l){if(l=Ge(l),l){const a=E.findKey(n,l);a&&(!r||Gt(n,n[a],a,r))&&(delete n[a],s=!0)}}return E.isArray(t)?t.forEach(o):o(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const o=r[n];(!t||Gt(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const r=this,n={};return E.forEach(this,(s,o)=>{const l=E.findKey(n,o);if(l){r[l]=wt(s),delete r[o];return}const a=t?Kc(o):String(o).trim();a!==o&&delete r[o],r[a]=wt(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return E.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&E.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[sn]=this[sn]={accessors:{}}).accessors,s=this.prototype;function o(l){const a=Ge(l);n[a]||(Jc(s,l),n[a]=!0)}return E.isArray(t)?t.forEach(o):o(t),this}};se.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);E.reduceDescriptors(se.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});E.freezeMethods(se);function qt(e,t){const r=this||rt,n=t||r,s=se.from(n.headers);let o=n.data;return E.forEach(e,function(a){o=a.call(r,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Ms(e){return!!(e&&e.__CANCEL__)}let nt=class extends F{constructor(t,r,n){super(t??"canceled",F.ERR_CANCELED,r,n),this.name="CanceledError",this.__CANCEL__=!0}};function Ds(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new F("Request failed with status code "+r.status,[F.ERR_BAD_REQUEST,F.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Zc(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Qc(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,o=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[o];l||(l=d),r[s]=c,n[s]=d;let h=o,x=0;for(;h!==s;)x+=r[h++],h=h%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),d-l<t)return;const p=u&&d-u;return p?Math.round(x*1e3/p):void 0}}function ed(e,t){let r=0,n=1e3/t,s,o;const l=(d,u=Date.now())=>{r=u,s=null,o&&(clearTimeout(o),o=null),e(...d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?l(d,u):(s=d,o||(o=setTimeout(()=>{o=null,l(s)},n-h)))},()=>s&&l(s)]}const jt=(e,t,r=3)=>{let n=0;const s=Qc(50,250);return ed(o=>{const l=o.loaded,a=o.lengthComputable?o.total:void 0,c=l-n,d=s(c),u=l<=a;n=l;const h={loaded:l,total:a,progress:a?l/a:void 0,bytes:c,rate:d||void 0,estimated:d&&a&&u?(a-l)/d:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(h)},r)},on=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},an=e=>(...t)=>E.asap(()=>e(...t)),td=te.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,te.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(te.origin),te.navigator&&/(msie|trident)/i.test(te.navigator.userAgent)):()=>!0,rd=te.hasStandardBrowserEnv?{write(e,t,r,n,s,o,l){if(typeof document>"u")return;const a=[`${e}=${encodeURIComponent(t)}`];E.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),E.isString(n)&&a.push(`path=${n}`),E.isString(s)&&a.push(`domain=${s}`),o===!0&&a.push("secure"),E.isString(l)&&a.push(`SameSite=${l}`),document.cookie=a.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function nd(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function sd(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Is(e,t,r){let n=!nd(t);return e&&(n||r==!1)?sd(e,t):t}const ln=e=>e instanceof se?{...e}:e;function $e(e,t){t=t||{};const r={};function n(d,u,h,x){return E.isPlainObject(d)&&E.isPlainObject(u)?E.merge.call({caseless:x},d,u):E.isPlainObject(u)?E.merge({},u):E.isArray(u)?u.slice():u}function s(d,u,h,x){if(E.isUndefined(u)){if(!E.isUndefined(d))return n(void 0,d,h,x)}else return n(d,u,h,x)}function o(d,u){if(!E.isUndefined(u))return n(void 0,u)}function l(d,u){if(E.isUndefined(u)){if(!E.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function a(d,u,h){if(h in t)return n(d,u);if(h in e)return n(void 0,d)}const c={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:a,headers:(d,u,h)=>s(ln(d),ln(u),h,!0)};return E.forEach(Object.keys({...e,...t}),function(u){const h=c[u]||s,x=h(e[u],t[u],u);E.isUndefined(x)&&h!==a||(r[u]=x)}),r}const _s=e=>{const t=$e({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:a}=t;if(t.headers=l=se.from(l),t.url=Ps(Is(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&l.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),E.isFormData(r)){if(te.hasStandardBrowserEnv||te.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(E.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,h])=>{d.includes(u.toLowerCase())&&l.set(u,h)})}}if(te.hasStandardBrowserEnv&&(n&&E.isFunction(n)&&(n=n(t)),n||n!==!1&&td(t.url))){const c=s&&o&&rd.read(o);c&&l.set(s,c)}return t},od=typeof XMLHttpRequest<"u",id=od&&function(e){return new Promise(function(r,n){const s=_s(e);let o=s.data;const l=se.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:d}=s,u,h,x,p,y;function m(){p&&p(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function v(){if(!g)return;const w=se.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:w,config:e,request:g};Ds(function(b){r(b),m()},function(b){n(b),m()},R),g=null}"onloadend"in g?g.onloadend=v:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(v)},g.onabort=function(){g&&(n(new F("Request aborted",F.ECONNABORTED,e,g)),g=null)},g.onerror=function(S){const R=S&&S.message?S.message:"Network Error",M=new F(R,F.ERR_NETWORK,e,g);M.event=S||null,n(M),g=null},g.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const R=s.transitional||$s;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),n(new F(S,R.clarifyTimeoutError?F.ETIMEDOUT:F.ECONNABORTED,e,g)),g=null},o===void 0&&l.setContentType(null),"setRequestHeader"in g&&E.forEach(l.toJSON(),function(S,R){g.setRequestHeader(R,S)}),E.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),a&&a!=="json"&&(g.responseType=s.responseType),d&&([x,y]=jt(d,!0),g.addEventListener("progress",x)),c&&g.upload&&([h,p]=jt(c),g.upload.addEventListener("progress",h),g.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=w=>{g&&(n(!w||w.type?new nt(null,e,g):w),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const C=Zc(s.url);if(C&&te.protocols.indexOf(C)===-1){n(new F("Unsupported protocol "+C+":",F.ERR_BAD_REQUEST,e));return}g.send(o||null)})},ad=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const o=function(d){if(!s){s=!0,a();const u=d instanceof Error?d:this.reason;n.abort(u instanceof F?u:new nt(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,o(new F(`timeout of ${t}ms exceeded`,F.ETIMEDOUT))},t);const a=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>E.asap(a),c}},ld=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},cd=async function*(e,t){for await(const r of dd(e))yield*ld(r,t)},dd=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},cn=(e,t,r,n)=>{const s=cd(e,t);let o=0,l,a=c=>{l||(l=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){a(),c.close();return}let h=u.byteLength;if(r){let x=o+=h;r(x)}c.enqueue(new Uint8Array(u))}catch(d){throw a(d),d}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},dn=64*1024,{isFunction:ut}=E,ud=(({Request:e,Response:t})=>({Request:e,Response:t}))(E.global),{ReadableStream:un,TextEncoder:fn}=E.global,hn=(e,...t)=>{try{return!!e(...t)}catch{return!1}},fd=e=>{e=E.merge.call({skipUndefined:!0},ud,e);const{fetch:t,Request:r,Response:n}=e,s=t?ut(t):typeof fetch=="function",o=ut(r),l=ut(n);if(!s)return!1;const a=s&&ut(un),c=s&&(typeof fn=="function"?(y=>m=>y.encode(m))(new fn):async y=>new Uint8Array(await new r(y).arrayBuffer())),d=o&&a&&hn(()=>{let y=!1;const m=new r(te.origin,{body:new un,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!m}),u=l&&a&&hn(()=>E.isReadableStream(new n("").body)),h={stream:u&&(y=>y.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!h[y]&&(h[y]=(m,g)=>{let v=m&&m[y];if(v)return v.call(m);throw new F(`Response type '${y}' is not supported`,F.ERR_NOT_SUPPORT,g)})});const x=async y=>{if(y==null)return 0;if(E.isBlob(y))return y.size;if(E.isSpecCompliantForm(y))return(await new r(te.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(E.isArrayBufferView(y)||E.isArrayBuffer(y))return y.byteLength;if(E.isURLSearchParams(y)&&(y=y+""),E.isString(y))return(await c(y)).byteLength},p=async(y,m)=>{const g=E.toFiniteNumber(y.getContentLength());return g??x(m)};return async y=>{let{url:m,method:g,data:v,signal:C,cancelToken:w,timeout:S,onDownloadProgress:R,onUploadProgress:M,responseType:b,headers:T,withCredentials:A="same-origin",fetchOptions:L}=_s(y),D=t||fetch;b=b?(b+"").toLowerCase():"text";let k=ad([C,w&&w.toAbortSignal()],S),j=null;const P=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let X;try{if(M&&d&&g!=="get"&&g!=="head"&&(X=await p(T,v))!==0){let z=new r(m,{method:"POST",body:v,duplex:"half"}),q;if(E.isFormData(v)&&(q=z.headers.get("content-type"))&&T.setContentType(q),z.body){const[ie,_]=on(X,jt(an(M)));v=cn(z.body,dn,ie,_)}}E.isString(A)||(A=A?"include":"omit");const H=o&&"credentials"in r.prototype,I={...L,signal:k,method:g.toUpperCase(),headers:T.normalize().toJSON(),body:v,duplex:"half",credentials:H?A:void 0};j=o&&new r(m,I);let O=await(o?D(j,L):D(m,I));const N=u&&(b==="stream"||b==="response");if(u&&(R||N&&P)){const z={};["status","statusText","headers"].forEach(W=>{z[W]=O[W]});const q=E.toFiniteNumber(O.headers.get("content-length")),[ie,_]=R&&on(q,jt(an(R),!0))||[];O=new n(cn(O.body,dn,ie,()=>{_&&_(),P&&P()}),z)}b=b||"text";let $=await h[E.findKey(h,b)||"text"](O,y);return!N&&P&&P(),await new Promise((z,q)=>{Ds(z,q,{data:$,headers:se.from(O.headers),status:O.status,statusText:O.statusText,config:y,request:j})})}catch(H){throw P&&P(),H&&H.name==="TypeError"&&/Load failed|fetch/i.test(H.message)?Object.assign(new F("Network Error",F.ERR_NETWORK,y,j),{cause:H.cause||H}):F.from(H,H&&H.code,y,j)}}},hd=new Map,Ls=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:s}=t,o=[n,s,r];let l=o.length,a=l,c,d,u=hd;for(;a--;)c=o[a],d=u.get(c),d===void 0&&u.set(c,d=a?new Map:fd(t)),u=d;return d};Ls();const Ar={http:Tc,xhr:id,fetch:{get:Ls}};E.forEach(Ar,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const pn=e=>`- ${e}`,pd=e=>E.isFunction(e)||e===null||e===!1;function md(e,t){e=E.isArray(e)?e:[e];const{length:r}=e;let n,s;const o={};for(let l=0;l<r;l++){n=e[l];let a;if(s=n,!pd(n)&&(s=Ar[(a=String(n)).toLowerCase()],s===void 0))throw new F(`Unknown adapter '${a}'`);if(s&&(E.isFunction(s)||(s=s.get(t))))break;o[a||"#"+l]=s}if(!s){const l=Object.entries(o).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let a=r?l.length>1?`since :
`+l.map(pn).join(`
`):" "+pn(l[0]):"as no adapter specified";throw new F("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s}const Fs={getAdapter:md,adapters:Ar};function Kt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nt(null,e)}function mn(e){return Kt(e),e.headers=se.from(e.headers),e.data=qt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Fs.getAdapter(e.adapter||rt.adapter,e)(e).then(function(n){return Kt(e),n.data=qt.call(e,e.transformResponse,n),n.headers=se.from(n.headers),n},function(n){return Ms(n)||(Kt(e),n&&n.response&&(n.response.data=qt.call(e,e.transformResponse,n.response),n.response.headers=se.from(n.response.headers))),Promise.reject(n)})}const Ws="1.13.4",Lt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Lt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const gn={};Lt.transitional=function(t,r,n){function s(o,l){return"[Axios v"+Ws+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,a)=>{if(t===!1)throw new F(s(l," has been removed"+(r?" in "+r:"")),F.ERR_DEPRECATED);return r&&!gn[l]&&(gn[l]=!0,console.warn(s(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,l,a):!0}};Lt.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function gd(e,t,r){if(typeof e!="object")throw new F("options must be an object",F.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const o=n[s],l=t[o];if(l){const a=e[o],c=a===void 0||l(a,o,e);if(c!==!0)throw new F("option "+o+" must be "+c,F.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new F("Unknown option "+o,F.ERR_BAD_OPTION)}}const bt={assertOptions:gd,validators:Lt},we=bt.validators;let Pe=class{constructor(t){this.defaults=t||{},this.interceptors={request:new nn,response:new nn}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=$e(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&bt.assertOptions(n,{silentJSONParsing:we.transitional(we.boolean),forcedJSONParsing:we.transitional(we.boolean),clarifyTimeoutError:we.transitional(we.boolean)},!1),s!=null&&(E.isFunction(s)?r.paramsSerializer={serialize:s}:bt.assertOptions(s,{encode:we.function,serialize:we.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),bt.assertOptions(r,{baseUrl:we.spelling("baseURL"),withXsrfToken:we.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=o&&E.merge(o.common,o[r.method]);o&&E.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),r.headers=se.concat(l,o);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const d=[];this.interceptors.response.forEach(function(m){d.push(m.fulfilled,m.rejected)});let u,h=0,x;if(!c){const y=[mn.bind(this),void 0];for(y.unshift(...a),y.push(...d),x=y.length,u=Promise.resolve(r);h<x;)u=u.then(y[h++],y[h++]);return u}x=a.length;let p=r;for(;h<x;){const y=a[h++],m=a[h++];try{p=y(p)}catch(g){m.call(this,g);break}}try{u=mn.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,x=d.length;h<x;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=$e(this.defaults,t);const r=Is(t.baseURL,t.url,t.allowAbsoluteUrls);return Ps(r,t.params,t.paramsSerializer)}};E.forEach(["delete","get","head","options"],function(t){Pe.prototype[t]=function(r,n){return this.request($e(n||{},{method:t,url:r,data:(n||{}).data}))}});E.forEach(["post","put","patch"],function(t){function r(n){return function(o,l,a){return this.request($e(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Pe.prototype[t]=r(),Pe.prototype[t+"Form"]=r(!0)});let xd=class Us{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(a=>{n.subscribe(a),o=a}).then(s);return l.cancel=function(){n.unsubscribe(o)},l},t(function(o,l,a){n.reason||(n.reason=new nt(o,l,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Us(function(s){t=s}),cancel:t}}};function yd(e){return function(r){return e.apply(null,r)}}function wd(e){return E.isObject(e)&&e.isAxiosError===!0}const gr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(gr).forEach(([e,t])=>{gr[t]=e});function zs(e){const t=new Pe(e),r=bs(Pe.prototype.request,t);return E.extend(r,Pe.prototype,t,{allOwnKeys:!0}),E.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return zs($e(e,s))},r}const Y=zs(rt);Y.Axios=Pe;Y.CanceledError=nt;Y.CancelToken=xd;Y.isCancel=Ms;Y.VERSION=Ws;Y.toFormData=_t;Y.AxiosError=F;Y.Cancel=Y.CanceledError;Y.all=function(t){return Promise.all(t)};Y.spread=yd;Y.isAxiosError=wd;Y.mergeConfig=$e;Y.AxiosHeaders=se;Y.formToJSON=e=>Os(E.isHTMLForm(e)?new FormData(e):e);Y.getAdapter=Fs.getAdapter;Y.HttpStatusCode=gr;Y.default=Y;const{Axios:lf,AxiosError:cf,CanceledError:df,isCancel:uf,CancelToken:ff,VERSION:hf,all:pf,Cancel:mf,isAxiosError:gf,spread:xf,toFormData:yf,AxiosHeaders:wf,HttpStatusCode:bf,formToJSON:vf,getAdapter:Sf,mergeConfig:Ef}=Y,qe="http://localhost:3000",vt={async list(){const e=localStorage.getItem("token");return(await Y.get(`${qe}/fonts`,{headers:{Authorization:`Bearer ${e}`}})).data.fonts},async getUploadUrl(e,t){const r=localStorage.getItem("token");return(await Y.post(`${qe}/fonts/upload-url`,{filename:e,contentType:t},{headers:{Authorization:`Bearer ${r}`}})).data},async uploadFile(e,t){await Y.put(e,t,{headers:{"Content-Type":t.type}})},async create(e){const t=localStorage.getItem("token");return(await Y.post(`${qe}/fonts`,e,{headers:{Authorization:`Bearer ${t}`}})).data.font},async delete(e){const t=localStorage.getItem("token");await Y.delete(`${qe}/fonts/${e}`,{headers:{Authorization:`Bearer ${t}`}})},async uploadFont(e,t){const{uploadUrl:r,path:n}=await this.getUploadUrl(e.name,e.type);await this.uploadFile(r,e);const s=t.replace(/\s+/g,"-").toLowerCase(),o=`${qe.replace("/api","")}/storage/v1/object/public/user-assets/${n}`;return await this.create({name:t,file_url:o,font_family:s,file_type:e.type,file_size:e.size})}};function Bs(e){return new Promise((t,r)=>{new FontFace(e.font_family,`url(${e.file_url})`).load().then(s=>{document.fonts.add(s),t()}).catch(r)})}async function kf(){try{const e=await vt.list();return await Promise.all(e.map(Bs)),e}catch(e){return console.error("Failed to preload fonts:",e),[]}}function bd({isOpen:e,onClose:t,onFontUploaded:r}){const[n,s]=f.useState(""),[o,l]=f.useState(null),[a,c]=f.useState(!1),[d,u]=f.useState(0),[h,x]=f.useState([]),[p,y]=f.useState(!1);f.useState(()=>{e&&m()});const m=async()=>{y(!0);try{const w=await vt.list();x(w)}catch(w){console.error("Failed to load fonts:",w)}finally{y(!1)}},g=w=>{var b,T;const S=(b=w.target.files)==null?void 0:b[0];if(!S)return;const R=[".ttf",".otf",".woff",".woff2"],M="."+((T=S.name.split(".").pop())==null?void 0:T.toLowerCase());if(!R.includes(M)){de({title:"Invalid file type",description:"Only .ttf, .otf, .woff, and .woff2 files are supported.",variant:"destructive"});return}if(l(S),!n){const A=S.name.replace(/\.[^/.]+$/,"").replace(/[-_]/g," ");s(A)}},v=async()=>{var w,S;if(!o||!n.trim()){de({title:"Missing information",description:"Please select a file and enter a font name.",variant:"destructive"});return}c(!0),u(0);try{const R=setInterval(()=>{u(b=>Math.min(b+10,90))},200),M=await vt.uploadFont(o,n);clearInterval(R),u(100),await Bs(M),de({title:" Font uploaded",description:`${n} is now available in your font library.`}),s(""),l(null),u(0),await m(),r==null||r(M),setTimeout(()=>{t()},1e3)}catch(R){console.error("Font upload failed:",R),de({title:"Upload failed",description:((S=(w=R.response)==null?void 0:w.data)==null?void 0:S.error)||"Failed to upload font. Please try again.",variant:"destructive"})}finally{c(!1)}},C=async w=>{if(confirm("Delete this font? This action cannot be undone."))try{await vt.delete(w),de({title:" Font deleted",description:"Font has been removed from your library."}),await m()}catch(S){console.error("Font deletion failed:",S),de({title:"Deletion failed",description:"Failed to delete font. Please try again.",variant:"destructive"})}};return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),i.jsxs("div",{className:"relative bg-card border-2 border-border shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between",children:[i.jsx("h2",{className:"font-display text-lg uppercase tracking-wider",children:"Custom Fonts"}),i.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(be,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"py-2 border-b border-border",children:i.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Upload New Font"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Font Name"}),i.jsx(fe,{type:"text",value:n,onChange:w=>s(w.target.value),placeholder:"e.g., Helvetica Bold",className:"h-9 text-sm bg-secondary border-border",disabled:a})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Font File (.ttf, .otf, .woff, .woff2)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fe,{type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:g,className:"h-9 text-sm bg-secondary border-border flex-1",disabled:a}),o&&i.jsxs("span",{className:"text-xs text-muted-foreground",children:[(o.size/1024).toFixed(1)," KB"]})]})]}),a&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"w-full h-2 bg-secondary border border-border overflow-hidden",children:i.jsx("div",{className:"h-full bg-accent transition-all duration-300",style:{width:`${d}%`}})}),i.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Uploading... ",d,"%"]})]}),i.jsx("button",{onClick:v,disabled:!o||!n.trim()||a,className:"w-full bg-accent text-accent-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-accent hover:bg-accent/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx(Je,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):d===100?i.jsxs(i.Fragment,{children:[i.jsx(Si,{className:"w-4 h-4"}),"Uploaded!"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ei,{className:"w-4 h-4"}),"Upload Font"]})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"py-2 border-b border-border",children:i.jsxs("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:["Your Fonts (",h.length,")"]})}),p?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(Je,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):h.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx("p",{className:"text-sm",children:"No custom fonts uploaded yet."}),i.jsx("p",{className:"text-xs mt-1",children:"Upload your first font above!"})]}):i.jsx("div",{className:"space-y-2",children:h.map(w=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary border border-border hover:bg-secondary/80 transition-colors",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",style:{fontFamily:w.font_family},children:w.name}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.file_type,"  ",w.file_size?(w.file_size/1024).toFixed(1):"?"," KB"]})]}),i.jsx("button",{onClick:()=>C(w.id),className:"text-muted-foreground hover:text-destructive transition-colors p-2",title:"Delete font",children:i.jsx(Ze,{className:"w-4 h-4"})})]},w.id))})]})]})]})]}):null}const Nf=Object.freeze(Object.defineProperty({__proto__:null,FontUploadModal:bd},Symbol.toStringTag,{value:"Module"}));var Jt=0;function vd(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??xn()),document.body.insertAdjacentElement("beforeend",e[1]??xn()),Jt++,()=>{Jt===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Jt--}},[])}function xn(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Zt="focusScope.autoFocusOnMount",Qt="focusScope.autoFocusOnUnmount",yn={bubbles:!1,cancelable:!0},Sd="FocusScope",Hs=f.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=e,[a,c]=f.useState(null),d=ue(s),u=ue(o),h=f.useRef(null),x=le(t,m=>c(m)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let m=function(w){if(p.paused||!a)return;const S=w.target;a.contains(S)?h.current=S:Re(h.current,{select:!0})},g=function(w){if(p.paused||!a)return;const S=w.relatedTarget;S!==null&&(a.contains(S)||Re(h.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const R of w)R.removedNodes.length>0&&Re(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const C=new MutationObserver(v);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),C.disconnect()}}},[n,a,p.paused]),f.useEffect(()=>{if(a){bn.add(p);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(Zt,yn);a.addEventListener(Zt,d),a.dispatchEvent(v),v.defaultPrevented||(Ed(jd(Xs(a)),{select:!0}),document.activeElement===m&&Re(a))}return()=>{a.removeEventListener(Zt,d),setTimeout(()=>{const v=new CustomEvent(Qt,yn);a.addEventListener(Qt,u),a.dispatchEvent(v),v.defaultPrevented||Re(m??document.body,{select:!0}),a.removeEventListener(Qt,u),bn.remove(p)},0)}}},[a,d,u,p]);const y=f.useCallback(m=>{if(!r&&!n||p.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(g&&v){const C=m.currentTarget,[w,S]=kd(C);w&&S?!m.shiftKey&&v===S?(m.preventDefault(),r&&Re(w,{select:!0})):m.shiftKey&&v===w&&(m.preventDefault(),r&&Re(S,{select:!0})):v===C&&m.preventDefault()}},[r,n,p.paused]);return i.jsx(oe.div,{tabIndex:-1,...l,ref:x,onKeyDown:y})});Hs.displayName=Sd;function Ed(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Re(n,{select:t}),document.activeElement!==r)return}function kd(e){const t=Xs(e),r=wn(t,e),n=wn(t.reverse(),e);return[r,n]}function Xs(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function wn(e,t){for(const r of e)if(!Nd(r,{upTo:t}))return r}function Nd(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Cd(e){return e instanceof HTMLInputElement&&"select"in e}function Re(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Cd(e)&&t&&e.select()}}var bn=Rd();function Rd(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=vn(e,t),e.unshift(t)},remove(t){var r;e=vn(e,t),(r=e[0])==null||r.resume()}}}function vn(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function jd(e){return e.filter(t=>t.tagName!=="A")}var Ad=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Me=new WeakMap,ft=new WeakMap,ht={},er=0,Ys=function(e){return e&&(e.host||Ys(e.parentNode))},Td=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Ys(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Pd=function(e,t,r,n){var s=Td(t,Array.isArray(e)?e:[e]);ht[r]||(ht[r]=new WeakMap);var o=ht[r],l=[],a=new Set,c=new Set(s),d=function(h){!h||a.has(h)||(a.add(h),d(h.parentNode))};s.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(x){if(a.has(x))u(x);else try{var p=x.getAttribute(n),y=p!==null&&p!=="false",m=(Me.get(x)||0)+1,g=(o.get(x)||0)+1;Me.set(x,m),o.set(x,g),l.push(x),m===1&&y&&ft.set(x,!0),g===1&&x.setAttribute(r,"true"),y||x.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",x,v)}})};return u(t),a.clear(),er++,function(){l.forEach(function(h){var x=Me.get(h)-1,p=o.get(h)-1;Me.set(h,x),o.set(h,p),x||(ft.has(h)||h.removeAttribute(n),ft.delete(h)),p||h.removeAttribute(r)}),er--,er||(Me=new WeakMap,Me=new WeakMap,ft=new WeakMap,ht={})}},$d=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=Ad(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),Pd(n,s,r,"aria-hidden")):function(){return null}},St="right-scroll-bar-position",Et="width-before-scroll-bar",Od="with-scroll-bars-hidden",Md="--removed-body-scroll-bar-size";function tr(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Dd(e,t){var r=f.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var Id=typeof window<"u"?f.useLayoutEffect:f.useEffect,Sn=new WeakMap;function _d(e,t){var r=Dd(null,function(n){return e.forEach(function(s){return tr(s,n)})});return Id(function(){var n=Sn.get(r);if(n){var s=new Set(n),o=new Set(e),l=r.current;s.forEach(function(a){o.has(a)||tr(a,null)}),o.forEach(function(a){s.has(a)||tr(a,l)})}Sn.set(r,e)},[e]),r}function Ld(e){return e}function Fd(e,t){t===void 0&&(t=Ld);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var l=t(o,n);return r.push(l),function(){r=r.filter(function(a){return a!==l})}},assignSyncMedium:function(o){for(n=!0;r.length;){var l=r;r=[],l.forEach(o)}r={push:function(a){return o(a)},filter:function(){return r}}},assignMedium:function(o){n=!0;var l=[];if(r.length){var a=r;r=[],a.forEach(o),l=r}var c=function(){var u=l;l=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),r}}}};return s}function Wd(e){e===void 0&&(e={});var t=Fd(null);return t.options=je({async:!0,ssr:!1},e),t}var Vs=function(e){var t=e.sideCar,r=In(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,je({},r))};Vs.isSideCarExport=!0;function Ud(e,t){return e.useMedium(t),Vs}var Gs=Wd(),rr=function(){},Ft=f.forwardRef(function(e,t){var r=f.useRef(null),n=f.useState({onScrollCapture:rr,onWheelCapture:rr,onTouchMoveCapture:rr}),s=n[0],o=n[1],l=e.forwardProps,a=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,x=e.sideCar,p=e.noRelative,y=e.noIsolation,m=e.inert,g=e.allowPinchZoom,v=e.as,C=v===void 0?"div":v,w=e.gapMode,S=In(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=x,M=_d([r,t]),b=je(je({},S),s);return f.createElement(f.Fragment,null,u&&f.createElement(R,{sideCar:Gs,removeScrollBar:d,shards:h,noRelative:p,noIsolation:y,inert:m,setCallbacks:o,allowPinchZoom:!!g,lockRef:r,gapMode:w}),l?f.cloneElement(f.Children.only(a),je(je({},b),{ref:M})):f.createElement(C,je({},b,{className:c,ref:M}),a))});Ft.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ft.classNames={fullWidth:Et,zeroRight:St};var zd=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Bd(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=zd();return t&&e.setAttribute("nonce",t),e}function Hd(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Xd(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Yd=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Bd())&&(Hd(t,r),Xd(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Vd=function(){var e=Yd();return function(t,r){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},qs=function(){var e=Vd(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},Gd={left:0,top:0,right:0,gap:0},nr=function(e){return parseInt(e||"",10)||0},qd=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[nr(r),nr(n),nr(s)]},Kd=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Gd;var t=qd(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Jd=qs(),Le="data-scroll-locked",Zd=function(e,t,r,n){var s=e.left,o=e.top,l=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Od,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Le,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(St,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Et,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(St," .").concat(St,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Et," .").concat(Et,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Le,`] {
    `).concat(Md,": ").concat(a,`px;
  }
`)},En=function(){var e=parseInt(document.body.getAttribute(Le)||"0",10);return isFinite(e)?e:0},Qd=function(){f.useEffect(function(){return document.body.setAttribute(Le,(En()+1).toString()),function(){var e=En()-1;e<=0?document.body.removeAttribute(Le):document.body.setAttribute(Le,e.toString())}},[])},eu=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;Qd();var o=f.useMemo(function(){return Kd(s)},[s]);return f.createElement(Jd,{styles:Zd(o,!t,s,r?"":"!important")})},xr=!1;if(typeof window<"u")try{var pt=Object.defineProperty({},"passive",{get:function(){return xr=!0,!0}});window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{xr=!1}var De=xr?{passive:!1}:!1,tu=function(e){return e.tagName==="TEXTAREA"},Ks=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!tu(e)&&r[t]==="visible")},ru=function(e){return Ks(e,"overflowY")},nu=function(e){return Ks(e,"overflowX")},kn=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Js(e,n);if(s){var o=Zs(e,n),l=o[1],a=o[2];if(l>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},su=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},ou=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Js=function(e,t){return e==="v"?ru(t):nu(t)},Zs=function(e,t){return e==="v"?su(t):ou(t)},iu=function(e,t){return e==="h"&&t==="rtl"?-1:1},au=function(e,t,r,n,s){var o=iu(e,window.getComputedStyle(t).direction),l=o*n,a=r.target,c=t.contains(a),d=!1,u=l>0,h=0,x=0;do{if(!a)break;var p=Zs(e,a),y=p[0],m=p[1],g=p[2],v=m-g-o*y;(y||v)&&Js(e,a)&&(h+=v,x+=y);var C=a.parentNode;a=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(u&&Math.abs(h)<1||!u&&Math.abs(x)<1)&&(d=!0),d},mt=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Nn=function(e){return[e.deltaX,e.deltaY]},Cn=function(e){return e&&"current"in e?e.current:e},lu=function(e,t){return e[0]===t[0]&&e[1]===t[1]},cu=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},du=0,Ie=[];function uu(e){var t=f.useRef([]),r=f.useRef([0,0]),n=f.useRef(),s=f.useState(du++)[0],o=f.useState(qs)[0],l=f.useRef(e);f.useEffect(function(){l.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=Oi([e.lockRef.current],(e.shards||[]).map(Cn),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=f.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!l.current.allowPinchZoom;var v=mt(m),C=r.current,w="deltaX"in m?m.deltaX:C[0]-v[0],S="deltaY"in m?m.deltaY:C[1]-v[1],R,M=m.target,b=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in m&&b==="h"&&M.type==="range")return!1;var T=window.getSelection(),A=T&&T.anchorNode,L=A?A===M||A.contains(M):!1;if(L)return!1;var D=kn(b,M);if(!D)return!0;if(D?R=b:(R=b==="v"?"h":"v",D=kn(b,M)),!D)return!1;if(!n.current&&"changedTouches"in m&&(w||S)&&(n.current=R),!R)return!0;var k=n.current||R;return au(k,g,m,k==="h"?w:S)},[]),c=f.useCallback(function(m){var g=m;if(!(!Ie.length||Ie[Ie.length-1]!==o)){var v="deltaY"in g?Nn(g):mt(g),C=t.current.filter(function(R){return R.name===g.type&&(R.target===g.target||g.target===R.shadowParent)&&lu(R.delta,v)})[0];if(C&&C.should){g.cancelable&&g.preventDefault();return}if(!C){var w=(l.current.shards||[]).map(Cn).filter(Boolean).filter(function(R){return R.contains(g.target)}),S=w.length>0?a(g,w[0]):!l.current.noIsolation;S&&g.cancelable&&g.preventDefault()}}},[]),d=f.useCallback(function(m,g,v,C){var w={name:m,delta:g,target:v,should:C,shadowParent:fu(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),u=f.useCallback(function(m){r.current=mt(m),n.current=void 0},[]),h=f.useCallback(function(m){d(m.type,Nn(m),m.target,a(m,e.lockRef.current))},[]),x=f.useCallback(function(m){d(m.type,mt(m),m.target,a(m,e.lockRef.current))},[]);f.useEffect(function(){return Ie.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:x}),document.addEventListener("wheel",c,De),document.addEventListener("touchmove",c,De),document.addEventListener("touchstart",u,De),function(){Ie=Ie.filter(function(m){return m!==o}),document.removeEventListener("wheel",c,De),document.removeEventListener("touchmove",c,De),document.removeEventListener("touchstart",u,De)}},[]);var p=e.removeScrollBar,y=e.inert;return f.createElement(f.Fragment,null,y?f.createElement(o,{styles:cu(s)}):null,p?f.createElement(eu,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function fu(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const hu=Ud(Gs,uu);var Qs=f.forwardRef(function(e,t){return f.createElement(Ft,je({},e,{ref:t,sideCar:hu}))});Qs.classNames=Ft.classNames;async function yr(e,t={}){const{scale:r=3,format:n="png",quality:s=.95,includeBackground:o=!0}=t,l=document.createElement("canvas"),a=l.getContext("2d");if(!a)throw new Error("Could not get canvas context");l.width=B*r,l.height=G*r,a.scale(r,r),o&&(a.fillStyle="#ffffff",a.fillRect(0,0,B,G));for(const c of e){a.save();const d=c.x+c.width*c.scaleX/2,u=c.y+c.height*c.scaleY/2;a.translate(d,u),a.rotate(c.rotation*Math.PI/180),a.globalAlpha=c.opacity,c.blendMode&&c.blendMode!=="normal"&&(a.globalCompositeOperation=c.blendMode);const h=-(c.width*c.scaleX)/2,x=-(c.height*c.scaleY)/2,p=c.width*c.scaleX,y=c.height*c.scaleY;c.type==="image"&&c.src?await pu(a,c.src,h,x,p,y,c):c.type==="text"&&c.text?mu(a,c.text,h,x,p,y,c):c.type==="shape"?gu(a,h,x,p,y,c):c.type==="line"&&xu(a,c),a.restore()}return new Promise((c,d)=>{l.toBlob(u=>{u?c(u):d(new Error("Failed to create blob"))},n==="jpeg"?"image/jpeg":"image/png",s)})}async function pu(e,t,r,n,s,o,l){return new Promise((a,c)=>{const d=new Image;d.crossOrigin="anonymous",d.onload=()=>{(l.contrast||l.brightness||l.grayscale||l.threshold||l.hueRotate||l.invert)&&(e.filter=Tr(l)),e.drawImage(d,r,n,s,o),e.filter="none",a()},d.onerror=()=>{console.error("Failed to load image:",t),e.fillStyle="#cccccc",e.fillRect(r,n,s,o),a()},d.src=t})}function mu(e,t,r,n,s,o,l){var d,u;const a=l.fontSize||20,c=l.fontFamily||"Arial";if(e.font=`${a}px ${c}`,e.textAlign="center",e.textBaseline="middle",l.fillType==="linear-gradient"&&l.gradientStops){const h=(l.gradientAngle||0)*Math.PI/180,x=r+s/2,p=n+o/2,y=x-Math.cos(h)*s/2,m=p-Math.sin(h)*o/2,g=x+Math.cos(h)*s/2,v=p+Math.sin(h)*o/2,C=e.createLinearGradient(y,m,g,v);l.gradientStops.forEach(w=>{C.addColorStop(w.offset,w.color)}),e.fillStyle=C}else if(l.fillType==="radial-gradient"&&l.gradientStops){const h=r+s/2,x=n+o/2,p=Math.max(s,o)/2,y=e.createRadialGradient(h,x,0,h,x,p);l.gradientStops.forEach(m=>{y.addColorStop(m.offset,m.color)}),e.fillStyle=y}else e.fillStyle=l.fill||"#000000";if((d=l.dropShadow)!=null&&d.enabled&&(e.shadowOffsetX=l.dropShadow.offsetX,e.shadowOffsetY=l.dropShadow.offsetY,e.shadowBlur=l.dropShadow.blur,e.shadowColor=`${l.dropShadow.color}${Math.round(l.dropShadow.opacity*255).toString(16).padStart(2,"0")}`),(l.contrast||l.brightness||l.grayscale||l.threshold)&&(e.filter=Tr(l)),(u=l.glow)!=null&&u.enabled)for(let x=0;x<3;x++)e.save(),e.shadowColor=`${l.glow.color}${Math.round(l.glow.intensity*255).toString(16).padStart(2,"0")}`,e.shadowBlur=l.glow.radius*(x+1),e.globalCompositeOperation="lighter",e.fillText(t,r+s/2,n+o/2),e.restore();e.fillText(t,r+s/2,n+o/2),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="transparent",e.filter="none"}function gu(e,t,r,n,s,o){var c,d;const l=o.stroke||"",a=o.strokeWidth||0;if(o.fillType==="linear-gradient"&&o.gradientStops){const u=(o.gradientAngle||0)*Math.PI/180,h=t+n/2-Math.cos(u)*n/2,x=r+s/2-Math.sin(u)*s/2,p=t+n/2+Math.cos(u)*n/2,y=r+s/2+Math.sin(u)*s/2,m=e.createLinearGradient(h,x,p,y);o.gradientStops.forEach(g=>{m.addColorStop(g.offset,g.color)}),e.fillStyle=m}else if(o.fillType==="radial-gradient"&&o.gradientStops){const u=t+n/2,h=r+s/2,x=Math.max(n,s)/2,p=e.createRadialGradient(u,h,0,u,h,x);o.gradientStops.forEach(y=>{p.addColorStop(y.offset,y.color)}),e.fillStyle=p}else e.fillStyle=o.fill||"#000000";if(l&&(e.strokeStyle=l,e.lineWidth=a),(c=o.dropShadow)!=null&&c.enabled&&(e.shadowOffsetX=o.dropShadow.offsetX,e.shadowOffsetY=o.dropShadow.offsetY,e.shadowBlur=o.dropShadow.blur,e.shadowColor=`${o.dropShadow.color}${Math.round(o.dropShadow.opacity*255).toString(16).padStart(2,"0")}`),(o.contrast||o.brightness||o.grayscale||o.threshold)&&(e.filter=Tr(o)),(d=o.glow)!=null&&d.enabled)for(let h=0;h<3;h++){switch(e.save(),e.shadowColor=`${o.glow.color}${Math.round(o.glow.intensity*255).toString(16).padStart(2,"0")}`,e.shadowBlur=o.glow.radius*(h+1),e.globalCompositeOperation="lighter",o.shapeType){case"rect":e.fillRect(t,r,n,s);break;case"circle":e.beginPath(),e.arc(t+n/2,r+s/2,Math.min(n,s)/2,0,Math.PI*2),e.fill();break;case"star":Rn(e,t+n/2,r+s/2,Math.min(n,s)/2),e.fill();break}e.restore()}switch(o.shapeType){case"rect":e.fillRect(t,r,n,s),l&&e.strokeRect(t,r,n,s);break;case"circle":e.beginPath(),e.arc(t+n/2,r+s/2,Math.min(n,s)/2,0,Math.PI*2),e.fill(),l&&e.stroke();break;case"star":Rn(e,t+n/2,r+s/2,Math.min(n,s)/2),e.fill(),l&&e.stroke();break}e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="transparent",e.filter="none"}function xu(e,t){const r=t.stroke||"#000000",n=t.strokeWidth||2;e.strokeStyle=r,e.lineWidth=n,e.lineCap=t.lineCapStyle||"round";const s=0,o=0,l=t.lineEndX||100,a=t.lineEndY||0;if(e.beginPath(),t.lineType==="curved"&&t.lineCurve){const c=(s+l)/2,d=(o+a)/2+t.lineCurve;e.moveTo(s,o),e.quadraticCurveTo(c,d,l,a)}else e.moveTo(s,o),e.lineTo(l,a);e.stroke()}function Rn(e,t,r,n){const o=n*.4;e.beginPath();for(let l=0;l<5*2;l++){const a=l%2===0?n:o,c=l*Math.PI/5-Math.PI/2,d=t+a*Math.cos(c),u=r+a*Math.sin(c);l===0?e.moveTo(d,u):e.lineTo(d,u)}e.closePath()}function Tr(e){const t=[];return e.contrast!==void 0&&e.contrast!==100&&t.push(`contrast(${e.contrast}%)`),e.brightness!==void 0&&e.brightness!==100&&t.push(`brightness(${e.brightness}%)`),e.grayscale!==void 0&&e.grayscale>0&&t.push(`grayscale(${e.grayscale}%)`),e.threshold&&t.push("contrast(300%)","grayscale(100%)"),e.hueRotate!==void 0&&e.hueRotate>0&&t.push(`hue-rotate(${e.hueRotate}deg)`),e.invert&&t.push("invert(100%)"),t.length>0?t.join(" "):"none"}async function Cf(e,t={}){const{includeBackground:r=!0}=t,n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n.setAttribute("width",B.toString()),n.setAttribute("height",G.toString()),n.setAttribute("viewBox",`0 0 ${B} ${G}`),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),r){const a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("width",B.toString()),a.setAttribute("height",G.toString()),a.setAttribute("fill","#ffffff"),n.appendChild(a)}const s=document.createElementNS("http://www.w3.org/2000/svg","defs");n.appendChild(s);for(let a=0;a<e.length;a++){const c=e[a],d=await yu(c,s,a);d&&n.appendChild(d)}const l=new XMLSerializer().serializeToString(n);return new Blob([l],{type:"image/svg+xml"})}async function yu(e,t,r){var c,d;const n=document.createElementNS("http://www.w3.org/2000/svg","g"),s=e.x+e.width*e.scaleX/2,o=e.y+e.height*e.scaleY/2;n.setAttribute("transform",`translate(${s}, ${o}) rotate(${e.rotation}) scale(${e.scaleX}, ${e.scaleY})`),n.setAttribute("opacity",e.opacity.toString());const l=-e.width/2,a=-e.height/2;if(e.type==="text"&&e.text){const u=document.createElementNS("http://www.w3.org/2000/svg","text");if(u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("text-anchor","middle"),u.setAttribute("dominant-baseline","middle"),u.setAttribute("font-size",(e.fontSize||24).toString()),u.setAttribute("font-family",e.fontFamily||"Arial"),e.fillType&&e.fillType!=="solid"&&e.gradientStops){const h=`gradient-${r}`,x=jn(e,h);t.appendChild(x),u.setAttribute("fill",`url(#${h})`)}else u.setAttribute("fill",e.fill||"#000000");if((c=e.dropShadow)!=null&&c.enabled){const h=`filter-${r}`,x=An(e.dropShadow,h);t.appendChild(x),u.setAttribute("filter",`url(#${h})`)}u.textContent=e.text,n.appendChild(u)}else if(e.type==="shape"){let u=null;if(e.shapeType==="rect")u=document.createElementNS("http://www.w3.org/2000/svg","rect"),u.setAttribute("x",l.toString()),u.setAttribute("y",a.toString()),u.setAttribute("width",e.width.toString()),u.setAttribute("height",e.height.toString());else if(e.shapeType==="circle")u=document.createElementNS("http://www.w3.org/2000/svg","circle"),u.setAttribute("cx","0"),u.setAttribute("cy","0"),u.setAttribute("r",(e.width/2).toString());else if(e.shapeType==="star"){u=document.createElementNS("http://www.w3.org/2000/svg","path");const h=wu(e.width/2);u.setAttribute("d",h)}if(u){if(e.fillType&&e.fillType!=="solid"&&e.gradientStops){const h=`gradient-${r}`,x=jn(e,h);t.appendChild(x),u.setAttribute("fill",`url(#${h})`)}else u.setAttribute("fill",e.fill||"#000000");if(e.stroke&&(u.setAttribute("stroke",e.stroke),u.setAttribute("stroke-width",(e.strokeWidth||1).toString())),(d=e.dropShadow)!=null&&d.enabled){const h=`filter-${r}`,x=An(e.dropShadow,h);t.appendChild(x),u.setAttribute("filter",`url(#${h})`)}n.appendChild(u)}}else if(e.type==="path"&&e.pathPoints&&e.pathPoints.length>0){const u=document.createElementNS("http://www.w3.org/2000/svg","path");let h=`M ${e.pathPoints[0].x} ${e.pathPoints[0].y}`;for(let x=1;x<e.pathPoints.length;x++){const p=e.pathPoints[x];p.cp1x!==void 0&&p.cp1y!==void 0?p.cp2x!==void 0&&p.cp2y!==void 0?h+=` C ${p.cp1x} ${p.cp1y} ${p.cp2x} ${p.cp2y} ${p.x} ${p.y}`:h+=` Q ${p.cp1x} ${p.cp1y} ${p.x} ${p.y}`:h+=` L ${p.x} ${p.y}`}e.pathClosed&&(h+=" Z"),u.setAttribute("d",h),u.setAttribute("fill",e.pathClosed&&e.fill||"none"),u.setAttribute("stroke",e.stroke||"#000000"),u.setAttribute("stroke-width",(e.strokeWidth||2).toString()),n.appendChild(u)}else if(e.type==="line"){const u=document.createElementNS("http://www.w3.org/2000/svg",e.lineType==="curved"?"path":"line");if(e.lineType==="curved"&&e.lineCurve){const h=(e.lineEndX||100)/2,x=(e.lineEndY||0)/2+e.lineCurve;u.setAttribute("d",`M 0 0 Q ${h} ${x} ${e.lineEndX||100} ${e.lineEndY||0}`)}else u.setAttribute("x1","0"),u.setAttribute("y1","0"),u.setAttribute("x2",(e.lineEndX||100).toString()),u.setAttribute("y2",(e.lineEndY||0).toString());u.setAttribute("stroke",e.stroke||"#000000"),u.setAttribute("stroke-width",(e.strokeWidth||2).toString()),u.setAttribute("stroke-linecap",e.lineCapStyle||"round"),u.setAttribute("fill","none"),n.appendChild(u)}else if(e.type==="image"&&e.src){const u=document.createElementNS("http://www.w3.org/2000/svg","image");u.setAttribute("x",l.toString()),u.setAttribute("y",a.toString()),u.setAttribute("width",e.width.toString()),u.setAttribute("height",e.height.toString()),u.setAttributeNS("http://www.w3.org/1999/xlink","href",e.src),n.appendChild(u)}return n}function jn(e,t){if(e.fillType==="linear-gradient"&&e.gradientStops){const r=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");r.setAttribute("id",t);const n=(e.gradientAngle||0)*Math.PI/180,s=50-Math.cos(n)*50,o=50-Math.sin(n)*50,l=50+Math.cos(n)*50,a=50+Math.sin(n)*50;return r.setAttribute("x1",`${s}%`),r.setAttribute("y1",`${o}%`),r.setAttribute("x2",`${l}%`),r.setAttribute("y2",`${a}%`),e.gradientStops.forEach(c=>{const d=document.createElementNS("http://www.w3.org/2000/svg","stop");d.setAttribute("offset",`${c.offset*100}%`),d.setAttribute("stop-color",c.color),r.appendChild(d)}),r}else if(e.fillType==="radial-gradient"&&e.gradientStops){const r=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return r.setAttribute("id",t),e.gradientStops.forEach(n=>{const s=document.createElementNS("http://www.w3.org/2000/svg","stop");s.setAttribute("offset",`${n.offset*100}%`),s.setAttribute("stop-color",n.color),r.appendChild(s)}),r}return document.createElementNS("http://www.w3.org/2000/svg","g")}function An(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","filter");r.setAttribute("id",t),r.setAttribute("x","-50%"),r.setAttribute("y","-50%"),r.setAttribute("width","200%"),r.setAttribute("height","200%");const n=document.createElementNS("http://www.w3.org/2000/svg","feDropShadow");return n.setAttribute("dx",e.offsetX.toString()),n.setAttribute("dy",e.offsetY.toString()),n.setAttribute("stdDeviation",(e.blur/2).toString()),n.setAttribute("flood-color",e.color),n.setAttribute("flood-opacity",e.opacity.toString()),r.appendChild(n),r}function wu(e){const r=e*.4;let n="";for(let s=0;s<5*2;s++){const o=s%2===0?e:r,l=s*Math.PI/5-Math.PI/2,a=o*Math.cos(l),c=o*Math.sin(l);s===0?n+=`M ${a} ${c}`:n+=` L ${a} ${c}`}return n+=" Z",n}function bu(e,t){const r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}function vu(e){const t=Su(e),r=f.forwardRef((n,s)=>{const{children:o,...l}=n,a=f.Children.toArray(o),c=a.find(ku);if(c){const d=c.props.children,u=a.map(h=>h===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:h);return i.jsx(t,{...l,ref:s,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return i.jsx(t,{...l,ref:s,children:o})});return r.displayName=`${e}.Slot`,r}function Su(e){const t=f.forwardRef((r,n)=>{const{children:s,...o}=r;if(f.isValidElement(s)){const l=Cu(s),a=Nu(o,s.props);return s.type!==f.Fragment&&(a.ref=n?Pt(n,l):l),f.cloneElement(s,a)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Eu=Symbol("radix.slottable");function ku(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Eu}function Nu(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function Cu(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Wt="Dialog",[eo]=Fn(Wt),[Ru,xe]=eo(Wt),to=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,a=f.useRef(null),c=f.useRef(null),[d,u]=fa({prop:n,defaultProp:s??!1,onChange:o,caller:Wt});return i.jsx(Ru,{scope:t,triggerRef:a,contentRef:c,contentId:Xt(),titleId:Xt(),descriptionId:Xt(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(h=>!h),[u]),modal:l,children:r})};to.displayName=Wt;var ro="DialogTrigger",no=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=xe(ro,r),o=le(t,s.triggerRef);return i.jsx(oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Or(s.open),...n,ref:o,onClick:re(e.onClick,s.onOpenToggle)})});no.displayName=ro;var Pr="DialogPortal",[ju,so]=eo(Pr,{forceMount:void 0}),oo=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=xe(Pr,t);return i.jsx(ju,{scope:t,forceMount:r,children:f.Children.map(n,l=>i.jsx(Ae,{present:r||o.open,children:i.jsx(Bn,{asChild:!0,container:s,children:l})}))})};oo.displayName=Pr;var At="DialogOverlay",io=f.forwardRef((e,t)=>{const r=so(At,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=xe(At,e.__scopeDialog);return o.modal?i.jsx(Ae,{present:n||o.open,children:i.jsx(Tu,{...s,ref:t})}):null});io.displayName=At;var Au=vu("DialogOverlay.RemoveScroll"),Tu=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=xe(At,r);return i.jsx(Qs,{as:Au,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(oe.div,{"data-state":Or(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Oe="DialogContent",ao=f.forwardRef((e,t)=>{const r=so(Oe,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=xe(Oe,e.__scopeDialog);return i.jsx(Ae,{present:n||o.open,children:o.modal?i.jsx(Pu,{...s,ref:t}):i.jsx($u,{...s,ref:t})})});ao.displayName=Oe;var Pu=f.forwardRef((e,t)=>{const r=xe(Oe,e.__scopeDialog),n=f.useRef(null),s=le(t,r.contentRef,n);return f.useEffect(()=>{const o=n.current;if(o)return $d(o)},[]),i.jsx(lo,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:re(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,a=l.button===0&&l.ctrlKey===!0;(l.button===2||a)&&o.preventDefault()}),onFocusOutside:re(e.onFocusOutside,o=>o.preventDefault())})}),$u=f.forwardRef((e,t)=>{const r=xe(Oe,e.__scopeDialog),n=f.useRef(!1),s=f.useRef(!1);return i.jsx(lo,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,a;(l=e.onCloseAutoFocus)==null||l.call(e,o),o.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),lo=f.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=e,a=xe(Oe,r),c=f.useRef(null),d=le(t,c);return vd(),i.jsxs(i.Fragment,{children:[i.jsx(Hs,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(br,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Or(a.open),...l,ref:d,onDismiss:()=>a.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Ou,{titleId:a.titleId}),i.jsx(Du,{contentRef:c,descriptionId:a.descriptionId})]})]})}),$r="DialogTitle",co=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=xe($r,r);return i.jsx(oe.h2,{id:s.titleId,...n,ref:t})});co.displayName=$r;var uo="DialogDescription",fo=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=xe(uo,r);return i.jsx(oe.p,{id:s.descriptionId,...n,ref:t})});fo.displayName=uo;var ho="DialogClose",po=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=xe(ho,r);return i.jsx(oe.button,{type:"button",...n,ref:t,onClick:re(e.onClick,()=>s.onOpenChange(!1))})});po.displayName=ho;function Or(e){return e?"open":"closed"}var mo="DialogTitleWarning",[Rf,go]=Hi(mo,{contentName:Oe,titleName:$r,docsSlug:"dialog"}),Ou=({titleId:e})=>{const t=go(mo),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Mu="DialogDescriptionWarning",Du=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${go(Mu).contentName}}.`;return f.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Iu=to,_u=no,Lu=oo,xo=io,yo=ao,wo=co,bo=fo,Fu=po;const vo=Iu,jf=_u,Wu=Lu,So=f.forwardRef(({className:e,...t},r)=>i.jsx(xo,{ref:r,className:ce("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));So.displayName=xo.displayName;const Mr=f.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(Wu,{children:[i.jsx(So,{}),i.jsxs(yo,{ref:n,className:ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,i.jsxs(Fu,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(be,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Mr.displayName=yo.displayName;const Dr=({className:e,...t})=>i.jsx("div",{className:ce("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Dr.displayName="DialogHeader";const Ir=f.forwardRef(({className:e,...t},r)=>i.jsx(wo,{ref:r,className:ce("text-lg font-semibold leading-none tracking-tight",e),...t}));Ir.displayName=wo.displayName;const Eo=f.forwardRef(({className:e,...t},r)=>i.jsx(bo,{ref:r,className:ce("text-sm text-muted-foreground",e),...t}));Eo.displayName=bo.displayName;const ko=f.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ko.displayName="Textarea";const sr="http://localhost:3000",Tn={async createShareLink(e){const t=localStorage.getItem("token");return(await Y.post(`${sr}/share/${e}`,{},{headers:{Authorization:`Bearer ${t}`}})).data},async revokeShareLink(e){const t=localStorage.getItem("token");await Y.delete(`${sr}/share/${e}`,{headers:{Authorization:`Bearer ${t}`}})},async getSharedDesign(e){return(await Y.get(`${sr}/share/view/${e}`)).data.design}};function Pn(e,t=400,r=600){return`<iframe src="${window.location.origin}/share/${e}" width="${t}" height="${r}" frameborder="0" style="border: 2px solid #000; border-radius: 4px;"></iframe>`}async function $n(e){try{return await navigator.clipboard.writeText(e),!0}catch{const r=document.createElement("textarea");r.value=e,r.style.position="fixed",r.style.left="-999999px",document.body.appendChild(r),r.select();try{return document.execCommand("copy"),document.body.removeChild(r),!0}catch{return document.body.removeChild(r),!1}}}function Uu({isOpen:e,onClose:t}){const{versions:r,currentVersionId:n,createVersion:s,restoreVersion:o,deleteVersion:l,renameVersion:a}=ke(),[c,d]=f.useState(null),[u,h]=f.useState(""),x=()=>{s()},p=w=>{confirm("Restore this version? Your current work will be saved as a new version first.")&&o(w)},y=w=>{confirm("Delete this version? This action cannot be undone.")&&l(w)},m=w=>{d(w.id),h(w.name)},g=w=>{u.trim()&&a(w,u.trim()),d(null)},v=w=>{const S=new Date(w),M=new Date().getTime()-S.getTime(),b=Math.floor(M/6e4),T=Math.floor(M/36e5),A=Math.floor(M/864e5);return b<1?"Just now":b<60?`${b}m ago`:T<24?`${T}h ago`:A<7?`${A}d ago`:S.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};if(!e)return null;const C=[...r].sort((w,S)=>S.timestamp-w.timestamp);return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),i.jsxs("div",{className:"relative bg-card border-2 border-border shadow-xl w-full max-w-3xl max-h-[85vh] flex flex-col",children:[i.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"w-5 h-5"}),i.jsx("h2",{className:"font-display text-lg uppercase tracking-wider",children:"Version History"})]}),i.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(be,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-border",children:[i.jsxs("button",{onClick:x,className:"w-full bg-accent text-accent-foreground font-display text-sm uppercase tracking-wider py-2.5 px-4 border border-accent hover:bg-accent/90 transition-colors flex items-center justify-center gap-2",children:[i.jsx(ar,{className:"w-4 h-4"}),"Save Current as New Version"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:[r.length," version",r.length!==1?"s":""," saved"]})]}),i.jsx(ps,{className:"flex-1",children:i.jsx("div",{className:"p-4 space-y-2",children:C.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Lr,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"No versions saved yet"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Click "Save Current as New Version" to create your first checkpoint'})]}):C.map((w,S)=>{const R=w.id===n,M=c===w.id;return i.jsxs("div",{className:ce("group relative border border-border bg-secondary p-3 transition-all",R&&"border-accent bg-accent/10"),children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[M?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fe,{value:u,onChange:b=>h(b.target.value),onKeyDown:b=>{b.key==="Enter"&&g(w.id),b.key==="Escape"&&d(null)},className:"h-7 text-sm",autoFocus:!0}),i.jsx("button",{onClick:()=>g(w.id),className:"text-accent hover:text-accent/80",children:i.jsx(lr,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>d(null),className:"text-muted-foreground hover:text-foreground",children:i.jsx(be,{className:"w-4 h-4"})})]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-medium text-sm truncate",children:w.name}),R&&i.jsx("span",{className:"text-[10px] uppercase tracking-wider bg-accent text-accent-foreground px-1.5 py-0.5 shrink-0",children:"Current"}),w.autoSaved&&i.jsx("span",{className:"text-[10px] uppercase tracking-wider text-muted-foreground",children:"Auto"})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:v(w.timestamp)}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",w.objects.length," object",w.objects.length!==1?"s":""]})]})]}),i.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[!R&&i.jsx("button",{onClick:()=>p(w.id),className:"p-1.5 text-accent hover:bg-accent/10 transition-colors",title:"Restore this version",children:i.jsx(ki,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>m(w),className:"p-1.5 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors",title:"Rename version",children:i.jsx(Ni,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>y(w.id),className:"p-1.5 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",title:"Delete version",children:i.jsx(Ze,{className:"w-4 h-4"})})]})]}),w.thumbnail&&i.jsx("div",{className:"mt-2 border border-border overflow-hidden",children:i.jsx("img",{src:w.thumbnail,alt:w.name,className:"w-full h-24 object-cover"})})]},w.id)})})}),i.jsx("div",{className:"border-t border-border p-3 bg-secondary/50",children:i.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:[i.jsx("strong",{children:"Tip:"}),' Versions are saved locally. Use "Save Design" to persist to the cloud.']})})]})]})]})}const Af=Object.freeze(Object.defineProperty({__proto__:null,VersionHistory:Uu},Symbol.toStringTag,{value:"Module"}));function zu({isOpen:e,onClose:t,designId:r,designName:n}){const[s,o]=f.useState(""),[l,a]=f.useState(""),[c,d]=f.useState(!1),[u,h]=f.useState(null),[x,p]=f.useState("400"),[y,m]=f.useState("600");f.useEffect(()=>{e&&r&&g()},[e,r]);const g=async()=>{var S,R;d(!0);try{const M=await Tn.createShareLink(r);o(M.share_url),a(M.share_token)}catch(M){console.error("Failed to create share link:",M),de({title:"Failed to create share link",description:((R=(S=M.response)==null?void 0:S.data)==null?void 0:R.error)||"Please try again.",variant:"destructive"})}finally{d(!1)}},v=async()=>{await $n(s)&&(h("url"),de({title:" Link copied",description:"Share link copied to clipboard"}),setTimeout(()=>h(null),2e3))},C=async()=>{const S=Pn(l,parseInt(x),parseInt(y));await $n(S)&&(h("embed"),de({title:" Embed code copied",description:"Paste this code into your website"}),setTimeout(()=>h(null),2e3))},w=async()=>{if(confirm("Revoke share link? Anyone with the current link will no longer be able to view this design."))try{await Tn.revokeShareLink(r),de({title:" Link revoked",description:"Share link has been disabled"}),t()}catch(S){console.error("Failed to revoke share link:",S),de({title:"Failed to revoke link",description:"Please try again.",variant:"destructive"})}};return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),i.jsxs("div",{className:"relative bg-card border-2 border-border shadow-xl w-full max-w-2xl max-h-[85vh] overflow-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ci,{className:"w-5 h-5"}),i.jsx("h2",{className:"font-display text-lg uppercase tracking-wider",children:"Share Design"})]}),i.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(be,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-lg",children:n}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Anyone with the link can view this design (read-only)"})]}),c?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Generating share link..."})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{className:"text-[10px] uppercase tracking-widest text-muted-foreground",children:"Share Link"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(fe,{value:s,readOnly:!0,className:"font-mono text-sm",onClick:S=>S.currentTarget.select()}),i.jsx("button",{onClick:v,className:"btn-brutal px-4 flex items-center gap-2 whitespace-nowrap",children:u==="url"?i.jsxs(i.Fragment,{children:[i.jsx(lr,{className:"w-4 h-4"}),"Copied!"]}):i.jsxs(i.Fragment,{children:[i.jsx(or,{className:"w-4 h-4"}),"Copy"]})})]})]}),i.jsxs("div",{className:"space-y-3 pt-4 border-t border-border",children:[i.jsx("div",{className:"py-2",children:i.jsx("span",{className:"font-display text-[10px] uppercase tracking-widest text-muted-foreground",children:"Embed on Website"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(me,{className:"text-xs",children:"Width (px)"}),i.jsx(fe,{type:"number",value:x,onChange:S=>p(S.target.value),className:"h-8"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(me,{className:"text-xs",children:"Height (px)"}),i.jsx(fe,{type:"number",value:y,onChange:S=>m(S.target.value),className:"h-8"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{className:"text-xs text-muted-foreground",children:"Embed Code"}),i.jsx("div",{className:"relative",children:i.jsx("textarea",{value:Pn(l,parseInt(x),parseInt(y)),readOnly:!0,rows:3,className:"w-full p-2 border border-border bg-secondary font-mono text-xs rounded",onClick:S=>S.currentTarget.select()})}),i.jsx("button",{onClick:C,className:"w-full btn-brutal py-2 flex items-center justify-center gap-2",children:u==="embed"?i.jsxs(i.Fragment,{children:[i.jsx(lr,{className:"w-4 h-4"}),"Embed Code Copied!"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ri,{className:"w-4 h-4"}),"Copy Embed Code"]})})]})]}),i.jsxs("div",{className:"pt-4 border-t border-border",children:[i.jsxs("button",{onClick:w,className:"w-full btn-brutal py-2.5 flex items-center justify-center gap-2 border-destructive text-destructive hover:bg-destructive/10",children:[i.jsx(Ze,{className:"w-4 h-4"}),"Revoke Share Link"]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"This will disable the current link. You can create a new one anytime."})]})]})]})]})]}):null}const Tf=Object.freeze(Object.defineProperty({__proto__:null,ShareModal:zu},Symbol.toStringTag,{value:"Module"}));function Bu({isOpen:e,onClose:t,onApplyKit:r,currentColors:n=[],currentFonts:s=[]}){const[o,l]=f.useState([]),[a,c]=f.useState(!1),[d,u]=f.useState(!1),[h,x]=f.useState(!1),[p,y]=f.useState(""),[m,g]=f.useState(""),{isAuthenticated:v}=Wl();f.useEffect(()=>{e&&v&&C()},[e,v]);const C=async()=>{c(!0);try{const b=await dt.list();l(b.kits||[])}catch(b){console.error("Failed to load brand kits:",b),V.error("Failed to load brand kits")}finally{c(!1)}},w=async()=>{if(!p.trim()){V.error("Please enter a name for your brand kit");return}if(n.length===0){V.error("Please add some colors to your canvas first");return}u(!0);try{await dt.create({name:p.trim(),description:m.trim()||void 0,colors:n,fonts:s}),V.success("Brand kit saved!"),y(""),g(""),x(!1),await C()}catch(b){console.error("Failed to create brand kit:",b),V.error("Failed to save brand kit")}finally{u(!1)}},S=async b=>{try{await dt.update(b,{is_default:!0}),V.success("Default kit updated"),await C()}catch(T){console.error("Failed to set default:",T),V.error("Failed to set default")}},R=async b=>{if(confirm("Delete this brand kit?"))try{await dt.delete(b),V.success("Brand kit deleted"),await C()}catch(T){console.error("Failed to delete brand kit:",T),V.error("Failed to delete brand kit")}},M=b=>{r&&(r(b),V.success(`Applied "${b.name}" brand kit`),t())};return e?v?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-card border border-border w-full max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fr,{className:"w-5 h-5 text-primary"}),i.jsx("h2",{className:"font-display text-lg uppercase tracking-widest",children:"Brand Kits"}),i.jsx("span",{className:"text-xs bg-primary text-primary-foreground px-2 py-0.5 font-mono",children:"PRO"})]}),i.jsx("button",{onClick:t,className:"p-1 hover:bg-secondary transition-colors",children:i.jsx(be,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[h?i.jsxs("div",{className:"border border-border p-4 space-y-3",children:[i.jsx("h3",{className:"font-mono text-sm uppercase tracking-wider",children:"Create New Brand Kit"}),i.jsx(fe,{placeholder:"Kit name (e.g., Sunset Vibes)",value:p,onChange:b=>y(b.target.value),className:"font-mono"}),i.jsx(ko,{placeholder:"Description (optional)",value:m,onChange:b=>g(b.target.value),className:"font-mono text-xs",rows:2}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ae,{onClick:w,disabled:d,className:"flex-1",children:d?i.jsxs(i.Fragment,{children:[i.jsx(Je,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ar,{className:"w-4 h-4 mr-2"}),"Save Kit"]})}),i.jsx(ae,{onClick:()=>{x(!1),y(""),g("")},variant:"outline",children:"Cancel"})]})]}):i.jsxs(ae,{onClick:()=>x(!0),variant:"outline",className:"w-full",children:[i.jsx(ar,{className:"w-4 h-4 mr-2"}),"Save Current Colors as Brand Kit"]}),a?i.jsx("div",{className:"text-center py-8",children:i.jsx(Je,{className:"w-6 h-6 mx-auto animate-spin text-muted-foreground"})}):o.length===0?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"No brand kits yet. Save your first one!"})}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-mono text-sm uppercase tracking-wider",children:"Your Brand Kits"}),o.map(b=>i.jsxs("div",{className:"border border-border p-4 space-y-3 hover:border-primary transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:"font-mono font-semibold",children:b.name}),b.is_default&&i.jsx(ir,{className:"w-3 h-3 fill-yellow-500 text-yellow-500"})]}),b.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b.description})]}),i.jsxs("div",{className:"flex gap-1",children:[!b.is_default&&i.jsx("button",{onClick:()=>S(b.id),className:"p-1.5 hover:bg-secondary transition-colors",title:"Set as default",children:i.jsx(ir,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>R(b.id),className:"p-1.5 hover:bg-destructive hover:text-destructive-foreground transition-colors",title:"Delete kit",children:i.jsx(Ze,{className:"w-3.5 h-3.5"})})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(Fr,{className:"w-3 h-3"}),i.jsxs("span",{children:[b.colors.length," colors"]})]}),i.jsx("div",{className:"flex gap-1 flex-wrap",children:b.colors.map((T,A)=>i.jsx("div",{className:"w-8 h-8 border border-border",style:{backgroundColor:T},title:T},A))})]}),b.fonts&&b.fonts.length>0&&i.jsx("div",{className:"space-y-1",children:i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(ji,{className:"w-3 h-3"}),i.jsxs("span",{children:[b.fonts.length," fonts"]})]})}),i.jsx(ae,{onClick:()=>M(b),variant:"outline",size:"sm",className:"w-full",children:"Apply to Canvas"})]},b.id))]})]})]})}):i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-card border border-border w-full max-w-md p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"font-display text-lg uppercase tracking-widest",children:"Brand Kits"}),i.jsx("button",{onClick:t,className:"p-1 hover:bg-secondary transition-colors",children:i.jsx(be,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Login to save and manage brand kits"}),i.jsx(ae,{onClick:()=>window.location.href="/auth",children:"Login"})]})}):null}const Pf=Object.freeze(Object.defineProperty({__proto__:null,BrandKitModal:Bu},Symbol.toStringTag,{value:"Module"}));function Hu({open:e,onClose:t,onDuplicate:r}){const[n,s]=f.useState(2),[o,l]=f.useState(2),[a,c]=f.useState(10),[d,u]=f.useState(10),h=()=>{n>0&&o>0&&n<=20&&o<=20&&(r(n,o,a,d),t(),s(2),l(2),c(10),u(10))},x=n*o-1;return i.jsx(vo,{open:e,onOpenChange:t,children:i.jsxs(Mr,{className:"sm:max-w-md",children:[i.jsxs(Dr,{children:[i.jsxs(Ir,{className:"flex items-center gap-2",children:[i.jsx(Wr,{className:"w-5 h-5 text-primary"}),"Array Duplicate"]}),i.jsx(Eo,{children:"Create a grid of duplicates from the selected object"})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{htmlFor:"rows",children:"Rows"}),i.jsx(fe,{id:"rows",type:"number",min:"1",max:"20",value:n,onChange:p=>s(Math.max(1,Math.min(20,parseInt(p.target.value)||1))),className:"font-mono"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{htmlFor:"cols",children:"Columns"}),i.jsx(fe,{id:"cols",type:"number",min:"1",max:"20",value:o,onChange:p=>l(Math.max(1,Math.min(20,parseInt(p.target.value)||1))),className:"font-mono"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{htmlFor:"gapX",children:"Horizontal Gap (px)"}),i.jsx(fe,{id:"gapX",type:"number",min:"0",max:"500",value:a,onChange:p=>c(Math.max(0,Math.min(500,parseInt(p.target.value)||0))),className:"font-mono"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(me,{htmlFor:"gapY",children:"Vertical Gap (px)"}),i.jsx(fe,{id:"gapY",type:"number",min:"0",max:"500",value:d,onChange:p=>u(Math.max(0,Math.min(500,parseInt(p.target.value)||0))),className:"font-mono"})]})]}),i.jsxs("div",{className:"rounded-lg border border-border bg-muted/50 p-3 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Grid Size:"}),i.jsxs("span",{className:"font-mono font-semibold",children:[n,"  ",o]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-1",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Copies:"}),i.jsx("span",{className:"font-mono font-semibold text-primary",children:x})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsxs(ae,{variant:"outline",onClick:t,className:"gap-2",children:[i.jsx(be,{className:"w-4 h-4"}),"Cancel"]}),i.jsxs(ae,{onClick:h,className:"gap-2 btn-brutal bg-primary text-primary-foreground",disabled:n<1||o<1||n>20||o>20,children:[i.jsx(Wr,{className:"w-4 h-4"}),"Create ",x," ",x===1?"Copy":"Copies"]})]})]})})}const $f=Object.freeze(Object.defineProperty({__proto__:null,ArrayDuplicateModal:Hu},Symbol.toStringTag,{value:"Module"}));function Xu({isOpen:e,onClose:t,objects:r,designName:n,onConfirmExport:s}){const[o,l]=f.useState(1),[a,c]=f.useState(!1),[d,u]=f.useState(null),h=async()=>{try{const p=await yr(r,{scale:2,format:"png",includeBackground:!0}),y=URL.createObjectURL(p);u(y)}catch(p){console.error("Preview generation failed:",p)}},x=async()=>{c(!0);try{const p=await yr(r,{scale:3,format:"png",includeBackground:!0}),y=`${n.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${Date.now()}.png`;bu(p,y),s==null||s(),t()}catch(p){console.error("Export failed:",p)}finally{c(!1)}};return f.useEffect(()=>{e&&!d&&h()},[e]),e?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",children:i.jsxs("div",{className:"bg-card border-2 border-border w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"font-display text-lg uppercase tracking-widest",children:"Export Preview"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Review your design before downloading"})]}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-secondary transition-colors rounded",children:i.jsx(be,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"flex-1 overflow-auto bg-secondary/20 p-8 flex items-center justify-center",children:d?i.jsx("div",{className:"relative",style:{transform:`scale(${o})`,transition:"transform 0.2s"},children:i.jsx("img",{src:d,alt:"Export preview",className:"max-w-full max-h-full shadow-2xl border-2 border-border",style:{imageRendering:"crisp-edges"}})}):i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Generating preview..."})]})}),i.jsxs("div",{className:"border-t border-border p-4 flex items-center justify-between bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-widest",children:"Preview Zoom:"}),i.jsx(ae,{size:"sm",variant:"outline",onClick:()=>l(Math.max(.5,o-.25)),disabled:o<=.5,children:i.jsx(On,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm font-mono w-12 text-center",children:[Math.round(o*100),"%"]}),i.jsx(ae,{size:"sm",variant:"outline",onClick:()=>l(Math.min(2,o+.25)),disabled:o>=2,children:i.jsx(Mn,{className:"w-4 h-4"})}),i.jsx(ae,{size:"sm",variant:"outline",onClick:()=>l(1),children:i.jsx(Ai,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"text-right mr-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Final Export Quality"}),i.jsx("p",{className:"text-sm font-mono text-primary",children:"3x Resolution (Print Ready)"})]}),i.jsx(ae,{variant:"outline",onClick:t,disabled:a,children:"Cancel"}),i.jsx(ae,{onClick:x,disabled:a||!d,className:"gap-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(cr,{className:"w-4 h-4"}),"Download PNG"]})})]})]})]})}):null}const Of=Object.freeze(Object.defineProperty({__proto__:null,ExportPreview:Xu},Symbol.toStringTag,{value:"Module"})),Yu=[{id:"instagram-post",name:"Instagram Post",description:"10801080px (Square)",icon:i.jsx(Ur,{className:"w-5 h-5"}),width:1080,height:1080,scale:3,format:"png"},{id:"instagram-story",name:"Instagram Story",description:"10801920px (9:16)",icon:i.jsx(Ur,{className:"w-5 h-5"}),width:1080,height:1920,scale:3,format:"png"},{id:"twitter-post",name:"Twitter/X Post",description:"1200675px (16:9)",icon:i.jsx(Ti,{className:"w-5 h-5"}),width:1200,height:675,scale:3,format:"png"},{id:"print-high",name:"Print Quality",description:"300 DPI (High Res)",icon:i.jsx(Pi,{className:"w-5 h-5"}),width:96,height:294,scale:10,format:"png"},{id:"web-preview",name:"Web Preview",description:"8002450px (Web)",icon:i.jsx(zr,{className:"w-5 h-5"}),width:800,height:2450,scale:3,format:"jpg"},{id:"thumbnail",name:"Thumbnail",description:"4001225px (Small)",icon:i.jsx(zr,{className:"w-5 h-5"}),width:400,height:1225,scale:1,format:"jpg"}];function Vu({open:e,onClose:t}){const[r,n]=f.useState(null),{objects:s,designName:o}=ke(),l=async a=>{n(a.id);try{V.info(`Exporting ${a.name}...`,{description:"This may take a moment for high-resolution exports"});const c=await yr(s,{scale:a.scale,format:a.format,includeBackground:!0}),d=URL.createObjectURL(c),u=document.createElement("a");u.href=d,u.download=`${o||"deck"}_${a.id}.${a.format}`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d),V.success(`${a.name} exported!`,{description:`${a.description}  ${a.format.toUpperCase()}`})}catch(c){console.error("Export failed:",c),V.error("Export failed",{description:"Please try again or contact support"})}finally{n(null)}};return i.jsx(vo,{open:e,onOpenChange:t,children:i.jsxs(Mr,{className:"sm:max-w-2xl",children:[i.jsx(Dr,{children:i.jsxs(Ir,{className:"flex items-center gap-2",children:[i.jsx(cr,{className:"w-5 h-5 text-primary"}),"Quick Export"]})}),i.jsxs("div",{className:"py-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Export your design in popular formats and sizes"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Yu.map(a=>i.jsxs("button",{onClick:()=>l(a),disabled:r!==null,className:`
                  flex items-start gap-3 p-4 rounded-lg border-2 transition-all text-left
                  ${r===a.id?"border-primary bg-primary/10":r?"border-border bg-muted/50 opacity-50":"border-border hover:border-primary hover:bg-accent/50"}
                `,children:[i.jsx("div",{className:`
                  p-2 rounded bg-primary/10 text-primary shrink-0
                  ${r===a.id?"animate-pulse":""}
                `,children:r===a.id?i.jsx(Je,{className:"w-5 h-5 animate-spin"}):a.icon}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium text-sm mb-0.5",children:a.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:a.description}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-[10px] font-mono bg-secondary px-1.5 py-0.5 rounded",children:a.format.toUpperCase()}),i.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[a.scale,"x resolution"]})]})]}),r!==a.id&&i.jsx(cr,{className:"w-4 h-4 text-muted-foreground shrink-0 mt-1"})]},a.id))}),i.jsx("div",{className:"mt-4 p-3 rounded-lg bg-muted/50 border border-border",children:i.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",i.jsx("strong",{children:"Tip:"})," Print Quality exports at 10x resolution for crisp physical prints. Web Preview uses JPG for smaller file sizes."]})})]})]})})}const Mf=Object.freeze(Object.defineProperty({__proto__:null,ExportPresetsModal:Vu},Symbol.toStringTag,{value:"Module"}));export{Nf as $,vd as A,Qu as B,kf as C,br as D,bd as E,Hs as F,Bs as G,vo as H,fe as I,jf as J,Mr as K,me as L,Dr as M,Ir as N,rf as O,oe as P,yr as Q,Zu as R,ps as S,bu as T,Cf as U,Y as V,ef as W,de as X,ko as Y,Tn as Z,tf as _,Fn as a,Af as a0,Tf as a1,Pf as a2,$f as a3,Of as a4,Mf as a5,fa as b,Pt as c,Ae as d,re as e,ue as f,Bn as g,Fe as h,Qi as i,i as j,ce as k,Yn as l,Ju as m,Xt as n,ae as o,ke as p,ll as q,cl as r,G as s,B as t,le as u,Wl as v,nf as w,Qn as x,$d as y,Qs as z};
